function cw(t,s){for(var r=0;r<s.length;r++){const n=s[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();var rn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wb={exports:{}},lu={},Sb={exports:{}},fs={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qo=Symbol.for("react.element"),dw=Symbol.for("react.portal"),uw=Symbol.for("react.fragment"),mw=Symbol.for("react.strict_mode"),hw=Symbol.for("react.profiler"),pw=Symbol.for("react.provider"),fw=Symbol.for("react.context"),xw=Symbol.for("react.forward_ref"),gw=Symbol.for("react.suspense"),yw=Symbol.for("react.memo"),bw=Symbol.for("react.lazy"),px=Symbol.iterator;function vw(t){return t===null||typeof t!="object"?null:(t=px&&t[px]||t["@@iterator"],typeof t=="function"?t:null)}var _b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Eb=Object.assign,kb={};function xi(t,s,r){this.props=t,this.context=s,this.refs=kb,this.updater=r||_b}xi.prototype.isReactComponent={};xi.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};xi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Cb(){}Cb.prototype=xi.prototype;function Lp(t,s,r){this.props=t,this.context=s,this.refs=kb,this.updater=r||_b}var Pp=Lp.prototype=new Cb;Pp.constructor=Lp;Eb(Pp,xi.prototype);Pp.isPureReactComponent=!0;var fx=Array.isArray,Ab=Object.prototype.hasOwnProperty,Rp={current:null},Db={key:!0,ref:!0,__self:!0,__source:!0};function Tb(t,s,r){var n,a={},l=null,i=null;if(s!=null)for(n in s.ref!==void 0&&(i=s.ref),s.key!==void 0&&(l=""+s.key),s)Ab.call(s,n)&&!Db.hasOwnProperty(n)&&(a[n]=s[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:Qo,type:t,key:l,ref:i,props:a,_owner:Rp.current}}function jw(t,s){return{$$typeof:Qo,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function Op(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qo}function Nw(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var xx=/\/+/g;function Ju(t,s){return typeof t=="object"&&t!==null&&t.key!=null?Nw(""+t.key):s.toString(36)}function Hc(t,s,r,n,a){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Qo:case dw:i=!0}}if(i)return i=t,a=a(i),t=n===""?"."+Ju(i,0):n,fx(a)?(r="",t!=null&&(r=t.replace(xx,"$&/")+"/"),Hc(a,s,r,"",function(d){return d})):a!=null&&(Op(a)&&(a=jw(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(xx,"$&/")+"/")+t)),s.push(a)),1;if(i=0,n=n===""?".":n+":",fx(t))for(var o=0;o<t.length;o++){l=t[o];var c=n+Ju(l,o);i+=Hc(l,s,r,c,a)}else if(c=vw(t),typeof c=="function")for(t=c.call(t),o=0;!(l=t.next()).done;)l=l.value,c=n+Ju(l,o++),i+=Hc(l,s,r,c,a);else if(l==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return i}function uc(t,s,r){if(t==null)return t;var n=[],a=0;return Hc(t,n,"","",function(l){return s.call(r,l,a++)}),n}function ww(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Lr={current:null},Bc={transition:null},Sw={ReactCurrentDispatcher:Lr,ReactCurrentBatchConfig:Bc,ReactCurrentOwner:Rp};function Mb(){throw Error("act(...) is not supported in production builds of React.")}fs.Children={map:uc,forEach:function(t,s,r){uc(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return uc(t,function(){s++}),s},toArray:function(t){return uc(t,function(s){return s})||[]},only:function(t){if(!Op(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fs.Component=xi;fs.Fragment=uw;fs.Profiler=hw;fs.PureComponent=Lp;fs.StrictMode=mw;fs.Suspense=gw;fs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sw;fs.act=Mb;fs.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Eb({},t.props),a=t.key,l=t.ref,i=t._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,i=Rp.current),s.key!==void 0&&(a=""+s.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in s)Ab.call(s,c)&&!Db.hasOwnProperty(c)&&(n[c]=s[c]===void 0&&o!==void 0?o[c]:s[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:Qo,type:t.type,key:a,ref:l,props:n,_owner:i}};fs.createContext=function(t){return t={$$typeof:fw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pw,_context:t},t.Consumer=t};fs.createElement=Tb;fs.createFactory=function(t){var s=Tb.bind(null,t);return s.type=t,s};fs.createRef=function(){return{current:null}};fs.forwardRef=function(t){return{$$typeof:xw,render:t}};fs.isValidElement=Op;fs.lazy=function(t){return{$$typeof:bw,_payload:{_status:-1,_result:t},_init:ww}};fs.memo=function(t,s){return{$$typeof:yw,type:t,compare:s===void 0?null:s}};fs.startTransition=function(t){var s=Bc.transition;Bc.transition={};try{t()}finally{Bc.transition=s}};fs.unstable_act=Mb;fs.useCallback=function(t,s){return Lr.current.useCallback(t,s)};fs.useContext=function(t){return Lr.current.useContext(t)};fs.useDebugValue=function(){};fs.useDeferredValue=function(t){return Lr.current.useDeferredValue(t)};fs.useEffect=function(t,s){return Lr.current.useEffect(t,s)};fs.useId=function(){return Lr.current.useId()};fs.useImperativeHandle=function(t,s,r){return Lr.current.useImperativeHandle(t,s,r)};fs.useInsertionEffect=function(t,s){return Lr.current.useInsertionEffect(t,s)};fs.useLayoutEffect=function(t,s){return Lr.current.useLayoutEffect(t,s)};fs.useMemo=function(t,s){return Lr.current.useMemo(t,s)};fs.useReducer=function(t,s,r){return Lr.current.useReducer(t,s,r)};fs.useRef=function(t){return Lr.current.useRef(t)};fs.useState=function(t){return Lr.current.useState(t)};fs.useSyncExternalStore=function(t,s,r){return Lr.current.useSyncExternalStore(t,s,r)};fs.useTransition=function(){return Lr.current.useTransition()};fs.version="18.3.1";Sb.exports=fs;var x=Sb.exports;const St=Nb(x),_w=cw({__proto__:null,default:St},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ew=x,kw=Symbol.for("react.element"),Cw=Symbol.for("react.fragment"),Aw=Object.prototype.hasOwnProperty,Dw=Ew.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tw={key:!0,ref:!0,__self:!0,__source:!0};function Ib(t,s,r){var n,a={},l=null,i=null;r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(i=s.ref);for(n in s)Aw.call(s,n)&&!Tw.hasOwnProperty(n)&&(a[n]=s[n]);if(t&&t.defaultProps)for(n in s=t.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:kw,type:t,key:l,ref:i,props:a,_owner:Dw.current}}lu.Fragment=Cw;lu.jsx=Ib;lu.jsxs=Ib;wb.exports=lu;var e=wb.exports,ih={},Lb={exports:{}},cn={},Pb={exports:{}},Rb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(J,O){var M=J.length;J.push(O);e:for(;0<M;){var k=M-1>>>1,I=J[k];if(0<a(I,O))J[k]=O,J[M]=I,M=k;else break e}}function r(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var O=J[0],M=J.pop();if(M!==O){J[0]=M;e:for(var k=0,I=J.length,K=I>>>1;k<K;){var z=2*(k+1)-1,P=J[z],R=z+1,B=J[R];if(0>a(P,M))R<I&&0>a(B,P)?(J[k]=B,J[R]=M,k=R):(J[k]=P,J[z]=M,k=z);else if(R<I&&0>a(B,M))J[k]=B,J[R]=M,k=R;else break e}}return O}function a(J,O){var M=J.sortIndex-O.sortIndex;return M!==0?M:J.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var c=[],d=[],m=1,u=null,p=3,g=!1,j=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(J){for(var O=r(d);O!==null;){if(O.callback===null)n(d);else if(O.startTime<=J)n(d),O.sortIndex=O.expirationTime,s(c,O);else break;O=r(d)}}function b(J){if(y=!1,N(J),!j)if(r(c)!==null)j=!0,Y(w);else{var O=r(d);O!==null&&q(b,O.startTime-J)}}function w(J,O){j=!1,y&&(y=!1,h(C),C=-1),g=!0;var M=p;try{for(N(O),u=r(c);u!==null&&(!(u.expirationTime>O)||J&&!E());){var k=u.callback;if(typeof k=="function"){u.callback=null,p=u.priorityLevel;var I=k(u.expirationTime<=O);O=t.unstable_now(),typeof I=="function"?u.callback=I:u===r(c)&&n(c),N(O)}else n(c);u=r(c)}if(u!==null)var K=!0;else{var z=r(d);z!==null&&q(b,z.startTime-O),K=!1}return K}finally{u=null,p=M,g=!1}}var D=!1,S=null,C=-1,T=5,_=-1;function E(){return!(t.unstable_now()-_<T)}function A(){if(S!==null){var J=t.unstable_now();_=J;var O=!0;try{O=S(!0,J)}finally{O?L():(D=!1,S=null)}}else D=!1}var L;if(typeof f=="function")L=function(){f(A)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,W=F.port2;F.port1.onmessage=A,L=function(){W.postMessage(null)}}else L=function(){v(A,0)};function Y(J){S=J,D||(D=!0,L())}function q(J,O){C=v(function(){J(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){j||g||(j=!0,Y(w))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(J){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var M=p;p=O;try{return J()}finally{p=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,O){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var M=p;p=J;try{return O()}finally{p=M}},t.unstable_scheduleCallback=function(J,O,M){var k=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?k+M:k):M=k,J){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=M+I,J={id:m++,callback:O,priorityLevel:J,startTime:M,expirationTime:I,sortIndex:-1},M>k?(J.sortIndex=M,s(d,J),r(c)===null&&J===r(d)&&(y?(h(C),C=-1):y=!0,q(b,M-k))):(J.sortIndex=I,s(c,J),j||g||(j=!0,Y(w))),J},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(J){var O=p;return function(){var M=p;p=O;try{return J.apply(this,arguments)}finally{p=M}}}})(Rb);Pb.exports=Rb;var Mw=Pb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iw=x,ln=Mw;function yt(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ob=new Set,wo={};function jl(t,s){ri(t,s),ri(t+"Capture",s)}function ri(t,s){for(wo[t]=s,t=0;t<s.length;t++)Ob.add(s[t])}var ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oh=Object.prototype.hasOwnProperty,Lw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gx={},yx={};function Pw(t){return oh.call(yx,t)?!0:oh.call(gx,t)?!1:Lw.test(t)?yx[t]=!0:(gx[t]=!0,!1)}function Rw(t,s,r,n){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ow(t,s,r,n){if(s===null||typeof s>"u"||Rw(t,s,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Pr(t,s,r,n,a,l,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=l,this.removeEmptyString=i}var xr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xr[t]=new Pr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];xr[s]=new Pr(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xr[t]=new Pr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xr[t]=new Pr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xr[t]=new Pr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xr[t]=new Pr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xr[t]=new Pr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xr[t]=new Pr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xr[t]=new Pr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fp=/[\-:]([a-z])/g;function $p(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(Fp,$p);xr[s]=new Pr(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(Fp,$p);xr[s]=new Pr(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(Fp,$p);xr[s]=new Pr(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xr[t]=new Pr(t,1,!1,t.toLowerCase(),null,!1,!1)});xr.xlinkHref=new Pr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xr[t]=new Pr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Up(t,s,r,n){var a=xr.hasOwnProperty(s)?xr[s]:null;(a!==null?a.type!==0:n||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(Ow(s,r,a,n)&&(r=null),n||a===null?Pw(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(s=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(s):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,s,r):t.setAttribute(s,r))))}var la=Iw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mc=Symbol.for("react.element"),Rl=Symbol.for("react.portal"),Ol=Symbol.for("react.fragment"),Hp=Symbol.for("react.strict_mode"),ch=Symbol.for("react.profiler"),Fb=Symbol.for("react.provider"),$b=Symbol.for("react.context"),Bp=Symbol.for("react.forward_ref"),dh=Symbol.for("react.suspense"),uh=Symbol.for("react.suspense_list"),zp=Symbol.for("react.memo"),ga=Symbol.for("react.lazy"),Ub=Symbol.for("react.offscreen"),bx=Symbol.iterator;function Ii(t){return t===null||typeof t!="object"?null:(t=bx&&t[bx]||t["@@iterator"],typeof t=="function"?t:null)}var qs=Object.assign,Xu;function Zi(t){if(Xu===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Xu=s&&s[1]||""}return`
`+Xu+t}var em=!1;function tm(t,s){if(!t||em)return"";em=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var n=d}Reflect.construct(t,[],s)}else{try{s.call()}catch(d){n=d}t.call(s.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),l=n.stack.split(`
`),i=a.length-1,o=l.length-1;1<=i&&0<=o&&a[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||a[i]!==l[o]){var c=`
`+a[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=o);break}}}finally{em=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Zi(t):""}function Fw(t){switch(t.tag){case 5:return Zi(t.type);case 16:return Zi("Lazy");case 13:return Zi("Suspense");case 19:return Zi("SuspenseList");case 0:case 2:case 15:return t=tm(t.type,!1),t;case 11:return t=tm(t.type.render,!1),t;case 1:return t=tm(t.type,!0),t;default:return""}}function mh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ol:return"Fragment";case Rl:return"Portal";case ch:return"Profiler";case Hp:return"StrictMode";case dh:return"Suspense";case uh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $b:return(t.displayName||"Context")+".Consumer";case Fb:return(t._context.displayName||"Context")+".Provider";case Bp:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zp:return s=t.displayName||null,s!==null?s:mh(t.type)||"Memo";case ga:s=t._payload,t=t._init;try{return mh(t(s))}catch{}}return null}function $w(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mh(s);case 8:return s===Hp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Oa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Hb(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Uw(t){var s=Hb(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),n=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,l.call(this,i)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function hc(t){t._valueTracker||(t._valueTracker=Uw(t))}function Bb(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),n="";return t&&(n=Hb(t)?t.checked?"true":"false":t.value),t=n,t!==r?(s.setValue(t),!0):!1}function hd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hh(t,s){var r=s.checked;return qs({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function vx(t,s){var r=s.defaultValue==null?"":s.defaultValue,n=s.checked!=null?s.checked:s.defaultChecked;r=Oa(s.value!=null?s.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function zb(t,s){s=s.checked,s!=null&&Up(t,"checked",s,!1)}function ph(t,s){zb(t,s);var r=Oa(s.value),n=s.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?fh(t,s.type,r):s.hasOwnProperty("defaultValue")&&fh(t,s.type,Oa(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function jx(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var n=s.type;if(!(n!=="submit"&&n!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function fh(t,s,r){(s!=="number"||hd(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Ji=Array.isArray;function Ql(t,s,r,n){if(t=t.options,s){s={};for(var a=0;a<r.length;a++)s["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=s.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Oa(r),s=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}s!==null||t[a].disabled||(s=t[a])}s!==null&&(s.selected=!0)}}function xh(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(yt(91));return qs({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Nx(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(yt(92));if(Ji(r)){if(1<r.length)throw Error(yt(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:Oa(r)}}function Wb(t,s){var r=Oa(s.value),n=Oa(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function wx(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function Yb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gh(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?Yb(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pc,Kb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(s,r,n,a)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(pc=pc||document.createElement("div"),pc.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=pc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function So(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hw=["Webkit","ms","Moz","O"];Object.keys(oo).forEach(function(t){Hw.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),oo[s]=oo[t]})});function qb(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||oo.hasOwnProperty(t)&&oo[t]?(""+s).trim():s+"px"}function Vb(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=qb(r,s[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var Bw=qs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yh(t,s){if(s){if(Bw[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(yt(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(yt(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(yt(61))}if(s.style!=null&&typeof s.style!="object")throw Error(yt(62))}}function bh(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vh=null;function Wp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jh=null,Zl=null,Jl=null;function Sx(t){if(t=Xo(t)){if(typeof jh!="function")throw Error(yt(280));var s=t.stateNode;s&&(s=uu(s),jh(t.stateNode,t.type,s))}}function Gb(t){Zl?Jl?Jl.push(t):Jl=[t]:Zl=t}function Qb(){if(Zl){var t=Zl,s=Jl;if(Jl=Zl=null,Sx(t),s)for(t=0;t<s.length;t++)Sx(s[t])}}function Zb(t,s){return t(s)}function Jb(){}var sm=!1;function Xb(t,s,r){if(sm)return t(s,r);sm=!0;try{return Zb(t,s,r)}finally{sm=!1,(Zl!==null||Jl!==null)&&(Jb(),Qb())}}function _o(t,s){var r=t.stateNode;if(r===null)return null;var n=uu(r);if(n===null)return null;r=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(yt(231,s,typeof r));return r}var Nh=!1;if(ea)try{var Li={};Object.defineProperty(Li,"passive",{get:function(){Nh=!0}}),window.addEventListener("test",Li,Li),window.removeEventListener("test",Li,Li)}catch{Nh=!1}function zw(t,s,r,n,a,l,i,o,c){var d=Array.prototype.slice.call(arguments,3);try{s.apply(r,d)}catch(m){this.onError(m)}}var co=!1,pd=null,fd=!1,wh=null,Ww={onError:function(t){co=!0,pd=t}};function Yw(t,s,r,n,a,l,i,o,c){co=!1,pd=null,zw.apply(Ww,arguments)}function Kw(t,s,r,n,a,l,i,o,c){if(Yw.apply(this,arguments),co){if(co){var d=pd;co=!1,pd=null}else throw Error(yt(198));fd||(fd=!0,wh=d)}}function Nl(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function ev(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function _x(t){if(Nl(t)!==t)throw Error(yt(188))}function qw(t){var s=t.alternate;if(!s){if(s=Nl(t),s===null)throw Error(yt(188));return s!==t?null:t}for(var r=t,n=s;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return _x(a),t;if(l===n)return _x(a),s;l=l.sibling}throw Error(yt(188))}if(r.return!==n.return)r=a,n=l;else{for(var i=!1,o=a.child;o;){if(o===r){i=!0,r=a,n=l;break}if(o===n){i=!0,n=a,r=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===r){i=!0,r=l,n=a;break}if(o===n){i=!0,n=l,r=a;break}o=o.sibling}if(!i)throw Error(yt(189))}}if(r.alternate!==n)throw Error(yt(190))}if(r.tag!==3)throw Error(yt(188));return r.stateNode.current===r?t:s}function tv(t){return t=qw(t),t!==null?sv(t):null}function sv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=sv(t);if(s!==null)return s;t=t.sibling}return null}var rv=ln.unstable_scheduleCallback,Ex=ln.unstable_cancelCallback,Vw=ln.unstable_shouldYield,Gw=ln.unstable_requestPaint,er=ln.unstable_now,Qw=ln.unstable_getCurrentPriorityLevel,Yp=ln.unstable_ImmediatePriority,nv=ln.unstable_UserBlockingPriority,xd=ln.unstable_NormalPriority,Zw=ln.unstable_LowPriority,av=ln.unstable_IdlePriority,iu=null,Bn=null;function Jw(t){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(iu,t,void 0,(t.current.flags&128)===128)}catch{}}var _n=Math.clz32?Math.clz32:tS,Xw=Math.log,eS=Math.LN2;function tS(t){return t>>>=0,t===0?32:31-(Xw(t)/eS|0)|0}var fc=64,xc=4194304;function Xi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gd(t,s){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,l=t.pingedLanes,i=r&268435455;if(i!==0){var o=i&~a;o!==0?n=Xi(o):(l&=i,l!==0&&(n=Xi(l)))}else i=r&~a,i!==0?n=Xi(i):l!==0&&(n=Xi(l));if(n===0)return 0;if(s!==0&&s!==n&&!(s&a)&&(a=n&-n,l=s&-s,a>=l||a===16&&(l&4194240)!==0))return s;if(n&4&&(n|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=n;0<s;)r=31-_n(s),a=1<<r,n|=t[r],s&=~a;return n}function sS(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rS(t,s){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,l=t.pendingLanes;0<l;){var i=31-_n(l),o=1<<i,c=a[i];c===-1?(!(o&r)||o&n)&&(a[i]=sS(o,s)):c<=s&&(t.expiredLanes|=o),l&=~o}}function Sh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lv(){var t=fc;return fc<<=1,!(fc&4194240)&&(fc=64),t}function rm(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function Zo(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-_n(s),t[s]=r}function nS(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-_n(r),l=1<<a;s[a]=0,n[a]=-1,t[a]=-1,r&=~l}}function Kp(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var n=31-_n(r),a=1<<n;a&s|t[n]&s&&(t[n]|=s),r&=~a}}var _s=0;function iv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ov,qp,cv,dv,uv,_h=!1,gc=[],Aa=null,Da=null,Ta=null,Eo=new Map,ko=new Map,ba=[],aS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kx(t,s){switch(t){case"focusin":case"focusout":Aa=null;break;case"dragenter":case"dragleave":Da=null;break;case"mouseover":case"mouseout":Ta=null;break;case"pointerover":case"pointerout":Eo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ko.delete(s.pointerId)}}function Pi(t,s,r,n,a,l){return t===null||t.nativeEvent!==l?(t={blockedOn:s,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},s!==null&&(s=Xo(s),s!==null&&qp(s)),t):(t.eventSystemFlags|=n,s=t.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),t)}function lS(t,s,r,n,a){switch(s){case"focusin":return Aa=Pi(Aa,t,s,r,n,a),!0;case"dragenter":return Da=Pi(Da,t,s,r,n,a),!0;case"mouseover":return Ta=Pi(Ta,t,s,r,n,a),!0;case"pointerover":var l=a.pointerId;return Eo.set(l,Pi(Eo.get(l)||null,t,s,r,n,a)),!0;case"gotpointercapture":return l=a.pointerId,ko.set(l,Pi(ko.get(l)||null,t,s,r,n,a)),!0}return!1}function mv(t){var s=tl(t.target);if(s!==null){var r=Nl(s);if(r!==null){if(s=r.tag,s===13){if(s=ev(r),s!==null){t.blockedOn=s,uv(t.priority,function(){cv(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zc(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=Eh(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);vh=n,r.target.dispatchEvent(n),vh=null}else return s=Xo(r),s!==null&&qp(s),t.blockedOn=r,!1;s.shift()}return!0}function Cx(t,s,r){zc(t)&&r.delete(s)}function iS(){_h=!1,Aa!==null&&zc(Aa)&&(Aa=null),Da!==null&&zc(Da)&&(Da=null),Ta!==null&&zc(Ta)&&(Ta=null),Eo.forEach(Cx),ko.forEach(Cx)}function Ri(t,s){t.blockedOn===s&&(t.blockedOn=null,_h||(_h=!0,ln.unstable_scheduleCallback(ln.unstable_NormalPriority,iS)))}function Co(t){function s(a){return Ri(a,t)}if(0<gc.length){Ri(gc[0],t);for(var r=1;r<gc.length;r++){var n=gc[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Aa!==null&&Ri(Aa,t),Da!==null&&Ri(Da,t),Ta!==null&&Ri(Ta,t),Eo.forEach(s),ko.forEach(s),r=0;r<ba.length;r++)n=ba[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ba.length&&(r=ba[0],r.blockedOn===null);)mv(r),r.blockedOn===null&&ba.shift()}var Xl=la.ReactCurrentBatchConfig,yd=!0;function oS(t,s,r,n){var a=_s,l=Xl.transition;Xl.transition=null;try{_s=1,Vp(t,s,r,n)}finally{_s=a,Xl.transition=l}}function cS(t,s,r,n){var a=_s,l=Xl.transition;Xl.transition=null;try{_s=4,Vp(t,s,r,n)}finally{_s=a,Xl.transition=l}}function Vp(t,s,r,n){if(yd){var a=Eh(t,s,r,n);if(a===null)hm(t,s,n,bd,r),kx(t,n);else if(lS(a,t,s,r,n))n.stopPropagation();else if(kx(t,n),s&4&&-1<aS.indexOf(t)){for(;a!==null;){var l=Xo(a);if(l!==null&&ov(l),l=Eh(t,s,r,n),l===null&&hm(t,s,n,bd,r),l===a)break;a=l}a!==null&&n.stopPropagation()}else hm(t,s,n,null,r)}}var bd=null;function Eh(t,s,r,n){if(bd=null,t=Wp(n),t=tl(t),t!==null)if(s=Nl(t),s===null)t=null;else if(r=s.tag,r===13){if(t=ev(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return bd=t,null}function hv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qw()){case Yp:return 1;case nv:return 4;case xd:case Zw:return 16;case av:return 536870912;default:return 16}default:return 16}}var Na=null,Gp=null,Wc=null;function pv(){if(Wc)return Wc;var t,s=Gp,r=s.length,n,a="value"in Na?Na.value:Na.textContent,l=a.length;for(t=0;t<r&&s[t]===a[t];t++);var i=r-t;for(n=1;n<=i&&s[r-n]===a[l-n];n++);return Wc=a.slice(t,1<n?1-n:void 0)}function Yc(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function yc(){return!0}function Ax(){return!1}function dn(t){function s(r,n,a,l,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?yc:Ax,this.isPropagationStopped=Ax,this}return qs(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=yc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=yc)},persist:function(){},isPersistent:yc}),s}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qp=dn(gi),Jo=qs({},gi,{view:0,detail:0}),dS=dn(Jo),nm,am,Oi,ou=qs({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oi&&(Oi&&t.type==="mousemove"?(nm=t.screenX-Oi.screenX,am=t.screenY-Oi.screenY):am=nm=0,Oi=t),nm)},movementY:function(t){return"movementY"in t?t.movementY:am}}),Dx=dn(ou),uS=qs({},ou,{dataTransfer:0}),mS=dn(uS),hS=qs({},Jo,{relatedTarget:0}),lm=dn(hS),pS=qs({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),fS=dn(pS),xS=qs({},gi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gS=dn(xS),yS=qs({},gi,{data:0}),Tx=dn(yS),bS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NS(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=jS[t])?!!s[t]:!1}function Zp(){return NS}var wS=qs({},Jo,{key:function(t){if(t.key){var s=bS[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Yc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zp,charCode:function(t){return t.type==="keypress"?Yc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),SS=dn(wS),_S=qs({},ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mx=dn(_S),ES=qs({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zp}),kS=dn(ES),CS=qs({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),AS=dn(CS),DS=qs({},ou,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TS=dn(DS),MS=[9,13,27,32],Jp=ea&&"CompositionEvent"in window,uo=null;ea&&"documentMode"in document&&(uo=document.documentMode);var IS=ea&&"TextEvent"in window&&!uo,fv=ea&&(!Jp||uo&&8<uo&&11>=uo),Ix=" ",Lx=!1;function xv(t,s){switch(t){case"keyup":return MS.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fl=!1;function LS(t,s){switch(t){case"compositionend":return gv(s);case"keypress":return s.which!==32?null:(Lx=!0,Ix);case"textInput":return t=s.data,t===Ix&&Lx?null:t;default:return null}}function PS(t,s){if(Fl)return t==="compositionend"||!Jp&&xv(t,s)?(t=pv(),Wc=Gp=Na=null,Fl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return fv&&s.locale!=="ko"?null:s.data;default:return null}}var RS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Px(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!RS[t.type]:s==="textarea"}function yv(t,s,r,n){Gb(n),s=vd(s,"onChange"),0<s.length&&(r=new Qp("onChange","change",null,r,n),t.push({event:r,listeners:s}))}var mo=null,Ao=null;function OS(t){Av(t,0)}function cu(t){var s=Hl(t);if(Bb(s))return t}function FS(t,s){if(t==="change")return s}var bv=!1;if(ea){var im;if(ea){var om="oninput"in document;if(!om){var Rx=document.createElement("div");Rx.setAttribute("oninput","return;"),om=typeof Rx.oninput=="function"}im=om}else im=!1;bv=im&&(!document.documentMode||9<document.documentMode)}function Ox(){mo&&(mo.detachEvent("onpropertychange",vv),Ao=mo=null)}function vv(t){if(t.propertyName==="value"&&cu(Ao)){var s=[];yv(s,Ao,t,Wp(t)),Xb(OS,s)}}function $S(t,s,r){t==="focusin"?(Ox(),mo=s,Ao=r,mo.attachEvent("onpropertychange",vv)):t==="focusout"&&Ox()}function US(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cu(Ao)}function HS(t,s){if(t==="click")return cu(s)}function BS(t,s){if(t==="input"||t==="change")return cu(s)}function zS(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var kn=typeof Object.is=="function"?Object.is:zS;function Do(t,s){if(kn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),n=Object.keys(s);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!oh.call(s,a)||!kn(t[a],s[a]))return!1}return!0}function Fx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $x(t,s){var r=Fx(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=s&&n>=s)return{node:r,offset:s-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Fx(r)}}function jv(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?jv(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Nv(){for(var t=window,s=hd();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=hd(t.document)}return s}function Xp(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function WS(t){var s=Nv(),r=t.focusedElem,n=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&jv(r.ownerDocument.documentElement,r)){if(n!==null&&Xp(r)){if(s=n.start,t=n.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!t.extend&&l>n&&(a=n,n=l,l=a),a=$x(r,l);var i=$x(r,n);a&&i&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),t.removeAllRanges(),l>n?(t.addRange(s),t.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var YS=ea&&"documentMode"in document&&11>=document.documentMode,$l=null,kh=null,ho=null,Ch=!1;function Ux(t,s,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ch||$l==null||$l!==hd(n)||(n=$l,"selectionStart"in n&&Xp(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ho&&Do(ho,n)||(ho=n,n=vd(kh,"onSelect"),0<n.length&&(s=new Qp("onSelect","select",null,s,r),t.push({event:s,listeners:n}),s.target=$l)))}function bc(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Ul={animationend:bc("Animation","AnimationEnd"),animationiteration:bc("Animation","AnimationIteration"),animationstart:bc("Animation","AnimationStart"),transitionend:bc("Transition","TransitionEnd")},cm={},wv={};ea&&(wv=document.createElement("div").style,"AnimationEvent"in window||(delete Ul.animationend.animation,delete Ul.animationiteration.animation,delete Ul.animationstart.animation),"TransitionEvent"in window||delete Ul.transitionend.transition);function du(t){if(cm[t])return cm[t];if(!Ul[t])return t;var s=Ul[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in wv)return cm[t]=s[r];return t}var Sv=du("animationend"),_v=du("animationiteration"),Ev=du("animationstart"),kv=du("transitionend"),Cv=new Map,Hx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $a(t,s){Cv.set(t,s),jl(s,[t])}for(var dm=0;dm<Hx.length;dm++){var um=Hx[dm],KS=um.toLowerCase(),qS=um[0].toUpperCase()+um.slice(1);$a(KS,"on"+qS)}$a(Sv,"onAnimationEnd");$a(_v,"onAnimationIteration");$a(Ev,"onAnimationStart");$a("dblclick","onDoubleClick");$a("focusin","onFocus");$a("focusout","onBlur");$a(kv,"onTransitionEnd");ri("onMouseEnter",["mouseout","mouseover"]);ri("onMouseLeave",["mouseout","mouseover"]);ri("onPointerEnter",["pointerout","pointerover"]);ri("onPointerLeave",["pointerout","pointerover"]);jl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jl("onBeforeInput",["compositionend","keypress","textInput","paste"]);jl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VS=new Set("cancel close invalid load scroll toggle".split(" ").concat(eo));function Bx(t,s,r){var n=t.type||"unknown-event";t.currentTarget=r,Kw(n,s,void 0,t),t.currentTarget=null}function Av(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var l=void 0;if(s)for(var i=n.length-1;0<=i;i--){var o=n[i],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==l&&a.isPropagationStopped())break e;Bx(a,o,d),l=c}else for(i=0;i<n.length;i++){if(o=n[i],c=o.instance,d=o.currentTarget,o=o.listener,c!==l&&a.isPropagationStopped())break e;Bx(a,o,d),l=c}}}if(fd)throw t=wh,fd=!1,wh=null,t}function Is(t,s){var r=s[Ih];r===void 0&&(r=s[Ih]=new Set);var n=t+"__bubble";r.has(n)||(Dv(s,t,2,!1),r.add(n))}function mm(t,s,r){var n=0;s&&(n|=4),Dv(r,t,n,s)}var vc="_reactListening"+Math.random().toString(36).slice(2);function To(t){if(!t[vc]){t[vc]=!0,Ob.forEach(function(r){r!=="selectionchange"&&(VS.has(r)||mm(r,!1,t),mm(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[vc]||(s[vc]=!0,mm("selectionchange",!1,s))}}function Dv(t,s,r,n){switch(hv(s)){case 1:var a=oS;break;case 4:a=cS;break;default:a=Vp}r=a.bind(null,s,r,t),a=void 0,!Nh||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(s,r,{capture:!0,passive:a}):t.addEventListener(s,r,!0):a!==void 0?t.addEventListener(s,r,{passive:a}):t.addEventListener(s,r,!1)}function hm(t,s,r,n,a){var l=n;if(!(s&1)&&!(s&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;o!==null;){if(i=tl(o),i===null)return;if(c=i.tag,c===5||c===6){n=l=i;continue e}o=o.parentNode}}n=n.return}Xb(function(){var d=l,m=Wp(r),u=[];e:{var p=Cv.get(t);if(p!==void 0){var g=Qp,j=t;switch(t){case"keypress":if(Yc(r)===0)break e;case"keydown":case"keyup":g=SS;break;case"focusin":j="focus",g=lm;break;case"focusout":j="blur",g=lm;break;case"beforeblur":case"afterblur":g=lm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Dx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=mS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=kS;break;case Sv:case _v:case Ev:g=fS;break;case kv:g=AS;break;case"scroll":g=dS;break;case"wheel":g=TS;break;case"copy":case"cut":case"paste":g=gS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Mx}var y=(s&4)!==0,v=!y&&t==="scroll",h=y?p!==null?p+"Capture":null:p;y=[];for(var f=d,N;f!==null;){N=f;var b=N.stateNode;if(N.tag===5&&b!==null&&(N=b,h!==null&&(b=_o(f,h),b!=null&&y.push(Mo(f,b,N)))),v)break;f=f.return}0<y.length&&(p=new g(p,j,null,r,m),u.push({event:p,listeners:y}))}}if(!(s&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&r!==vh&&(j=r.relatedTarget||r.fromElement)&&(tl(j)||j[ta]))break e;if((g||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,g?(j=r.relatedTarget||r.toElement,g=d,j=j?tl(j):null,j!==null&&(v=Nl(j),j!==v||j.tag!==5&&j.tag!==6)&&(j=null)):(g=null,j=d),g!==j)){if(y=Dx,b="onMouseLeave",h="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(y=Mx,b="onPointerLeave",h="onPointerEnter",f="pointer"),v=g==null?p:Hl(g),N=j==null?p:Hl(j),p=new y(b,f+"leave",g,r,m),p.target=v,p.relatedTarget=N,b=null,tl(m)===d&&(y=new y(h,f+"enter",j,r,m),y.target=N,y.relatedTarget=v,b=y),v=b,g&&j)t:{for(y=g,h=j,f=0,N=y;N;N=Sl(N))f++;for(N=0,b=h;b;b=Sl(b))N++;for(;0<f-N;)y=Sl(y),f--;for(;0<N-f;)h=Sl(h),N--;for(;f--;){if(y===h||h!==null&&y===h.alternate)break t;y=Sl(y),h=Sl(h)}y=null}else y=null;g!==null&&zx(u,p,g,y,!1),j!==null&&v!==null&&zx(u,v,j,y,!0)}}e:{if(p=d?Hl(d):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var w=FS;else if(Px(p))if(bv)w=BS;else{w=US;var D=$S}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(w=HS);if(w&&(w=w(t,d))){yv(u,w,r,m);break e}D&&D(t,p,d),t==="focusout"&&(D=p._wrapperState)&&D.controlled&&p.type==="number"&&fh(p,"number",p.value)}switch(D=d?Hl(d):window,t){case"focusin":(Px(D)||D.contentEditable==="true")&&($l=D,kh=d,ho=null);break;case"focusout":ho=kh=$l=null;break;case"mousedown":Ch=!0;break;case"contextmenu":case"mouseup":case"dragend":Ch=!1,Ux(u,r,m);break;case"selectionchange":if(YS)break;case"keydown":case"keyup":Ux(u,r,m)}var S;if(Jp)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Fl?xv(t,r)&&(C="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(fv&&r.locale!=="ko"&&(Fl||C!=="onCompositionStart"?C==="onCompositionEnd"&&Fl&&(S=pv()):(Na=m,Gp="value"in Na?Na.value:Na.textContent,Fl=!0)),D=vd(d,C),0<D.length&&(C=new Tx(C,t,null,r,m),u.push({event:C,listeners:D}),S?C.data=S:(S=gv(r),S!==null&&(C.data=S)))),(S=IS?LS(t,r):PS(t,r))&&(d=vd(d,"onBeforeInput"),0<d.length&&(m=new Tx("onBeforeInput","beforeinput",null,r,m),u.push({event:m,listeners:d}),m.data=S))}Av(u,s)})}function Mo(t,s,r){return{instance:t,listener:s,currentTarget:r}}function vd(t,s){for(var r=s+"Capture",n=[];t!==null;){var a=t,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=_o(t,r),l!=null&&n.unshift(Mo(t,l,a)),l=_o(t,s),l!=null&&n.push(Mo(t,l,a))),t=t.return}return n}function Sl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zx(t,s,r,n,a){for(var l=s._reactName,i=[];r!==null&&r!==n;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,a?(c=_o(r,l),c!=null&&i.unshift(Mo(r,c,o))):a||(c=_o(r,l),c!=null&&i.push(Mo(r,c,o)))),r=r.return}i.length!==0&&t.push({event:s,listeners:i})}var GS=/\r\n?/g,QS=/\u0000|\uFFFD/g;function Wx(t){return(typeof t=="string"?t:""+t).replace(GS,`
`).replace(QS,"")}function jc(t,s,r){if(s=Wx(s),Wx(t)!==s&&r)throw Error(yt(425))}function jd(){}var Ah=null,Dh=null;function Th(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Mh=typeof setTimeout=="function"?setTimeout:void 0,ZS=typeof clearTimeout=="function"?clearTimeout:void 0,Yx=typeof Promise=="function"?Promise:void 0,JS=typeof queueMicrotask=="function"?queueMicrotask:typeof Yx<"u"?function(t){return Yx.resolve(null).then(t).catch(XS)}:Mh;function XS(t){setTimeout(function(){throw t})}function pm(t,s){var r=s,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),Co(s);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Co(s)}function Ma(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Kx(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var yi=Math.random().toString(36).slice(2),$n="__reactFiber$"+yi,Io="__reactProps$"+yi,ta="__reactContainer$"+yi,Ih="__reactEvents$"+yi,e_="__reactListeners$"+yi,t_="__reactHandles$"+yi;function tl(t){var s=t[$n];if(s)return s;for(var r=t.parentNode;r;){if(s=r[ta]||r[$n]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Kx(t);t!==null;){if(r=t[$n])return r;t=Kx(t)}return s}t=r,r=t.parentNode}return null}function Xo(t){return t=t[$n]||t[ta],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(yt(33))}function uu(t){return t[Io]||null}var Lh=[],Bl=-1;function Ua(t){return{current:t}}function Os(t){0>Bl||(t.current=Lh[Bl],Lh[Bl]=null,Bl--)}function Ds(t,s){Bl++,Lh[Bl]=t.current,t.current=s}var Fa={},Ar=Ua(Fa),Wr=Ua(!1),pl=Fa;function ni(t,s){var r=t.type.contextTypes;if(!r)return Fa;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===s)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=s[l];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),a}function Yr(t){return t=t.childContextTypes,t!=null}function Nd(){Os(Wr),Os(Ar)}function qx(t,s,r){if(Ar.current!==Fa)throw Error(yt(168));Ds(Ar,s),Ds(Wr,r)}function Tv(t,s,r){var n=t.stateNode;if(s=s.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(yt(108,$w(t)||"Unknown",a));return qs({},r,n)}function wd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fa,pl=Ar.current,Ds(Ar,t),Ds(Wr,Wr.current),!0}function Vx(t,s,r){var n=t.stateNode;if(!n)throw Error(yt(169));r?(t=Tv(t,s,pl),n.__reactInternalMemoizedMergedChildContext=t,Os(Wr),Os(Ar),Ds(Ar,t)):Os(Wr),Ds(Wr,r)}var Vn=null,mu=!1,fm=!1;function Mv(t){Vn===null?Vn=[t]:Vn.push(t)}function s_(t){mu=!0,Mv(t)}function Ha(){if(!fm&&Vn!==null){fm=!0;var t=0,s=_s;try{var r=Vn;for(_s=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Vn=null,mu=!1}catch(a){throw Vn!==null&&(Vn=Vn.slice(t+1)),rv(Yp,Ha),a}finally{_s=s,fm=!1}}return null}var zl=[],Wl=0,Sd=null,_d=0,hn=[],pn=0,fl=null,Gn=1,Qn="";function Ya(t,s){zl[Wl++]=_d,zl[Wl++]=Sd,Sd=t,_d=s}function Iv(t,s,r){hn[pn++]=Gn,hn[pn++]=Qn,hn[pn++]=fl,fl=t;var n=Gn;t=Qn;var a=32-_n(n)-1;n&=~(1<<a),r+=1;var l=32-_n(s)+a;if(30<l){var i=a-a%5;l=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Gn=1<<32-_n(s)+a|r<<a|n,Qn=l+t}else Gn=1<<l|r<<a|n,Qn=t}function ef(t){t.return!==null&&(Ya(t,1),Iv(t,1,0))}function tf(t){for(;t===Sd;)Sd=zl[--Wl],zl[Wl]=null,_d=zl[--Wl],zl[Wl]=null;for(;t===fl;)fl=hn[--pn],hn[pn]=null,Qn=hn[--pn],hn[pn]=null,Gn=hn[--pn],hn[pn]=null}var an=null,nn=null,Hs=!1,wn=null;function Lv(t,s){var r=fn(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function Gx(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,an=t,nn=Ma(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,an=t,nn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=fl!==null?{id:Gn,overflow:Qn}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=fn(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,an=t,nn=null,!0):!1;default:return!1}}function Ph(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rh(t){if(Hs){var s=nn;if(s){var r=s;if(!Gx(t,s)){if(Ph(t))throw Error(yt(418));s=Ma(r.nextSibling);var n=an;s&&Gx(t,s)?Lv(n,r):(t.flags=t.flags&-4097|2,Hs=!1,an=t)}}else{if(Ph(t))throw Error(yt(418));t.flags=t.flags&-4097|2,Hs=!1,an=t}}}function Qx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;an=t}function Nc(t){if(t!==an)return!1;if(!Hs)return Qx(t),Hs=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Th(t.type,t.memoizedProps)),s&&(s=nn)){if(Ph(t))throw Pv(),Error(yt(418));for(;s;)Lv(t,s),s=Ma(s.nextSibling)}if(Qx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(yt(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){nn=Ma(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}nn=null}}else nn=an?Ma(t.stateNode.nextSibling):null;return!0}function Pv(){for(var t=nn;t;)t=Ma(t.nextSibling)}function ai(){nn=an=null,Hs=!1}function sf(t){wn===null?wn=[t]:wn.push(t)}var r_=la.ReactCurrentBatchConfig;function Fi(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(yt(309));var n=r.stateNode}if(!n)throw Error(yt(147,t));var a=n,l=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(i){var o=a.refs;i===null?delete o[l]:o[l]=i},s._stringRef=l,s)}if(typeof t!="string")throw Error(yt(284));if(!r._owner)throw Error(yt(290,t))}return t}function wc(t,s){throw t=Object.prototype.toString.call(s),Error(yt(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Zx(t){var s=t._init;return s(t._payload)}function Rv(t){function s(h,f){if(t){var N=h.deletions;N===null?(h.deletions=[f],h.flags|=16):N.push(f)}}function r(h,f){if(!t)return null;for(;f!==null;)s(h,f),f=f.sibling;return null}function n(h,f){for(h=new Map;f!==null;)f.key!==null?h.set(f.key,f):h.set(f.index,f),f=f.sibling;return h}function a(h,f){return h=Ra(h,f),h.index=0,h.sibling=null,h}function l(h,f,N){return h.index=N,t?(N=h.alternate,N!==null?(N=N.index,N<f?(h.flags|=2,f):N):(h.flags|=2,f)):(h.flags|=1048576,f)}function i(h){return t&&h.alternate===null&&(h.flags|=2),h}function o(h,f,N,b){return f===null||f.tag!==6?(f=Nm(N,h.mode,b),f.return=h,f):(f=a(f,N),f.return=h,f)}function c(h,f,N,b){var w=N.type;return w===Ol?m(h,f,N.props.children,b,N.key):f!==null&&(f.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ga&&Zx(w)===f.type)?(b=a(f,N.props),b.ref=Fi(h,f,N),b.return=h,b):(b=Jc(N.type,N.key,N.props,null,h.mode,b),b.ref=Fi(h,f,N),b.return=h,b)}function d(h,f,N,b){return f===null||f.tag!==4||f.stateNode.containerInfo!==N.containerInfo||f.stateNode.implementation!==N.implementation?(f=wm(N,h.mode,b),f.return=h,f):(f=a(f,N.children||[]),f.return=h,f)}function m(h,f,N,b,w){return f===null||f.tag!==7?(f=cl(N,h.mode,b,w),f.return=h,f):(f=a(f,N),f.return=h,f)}function u(h,f,N){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Nm(""+f,h.mode,N),f.return=h,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case mc:return N=Jc(f.type,f.key,f.props,null,h.mode,N),N.ref=Fi(h,null,f),N.return=h,N;case Rl:return f=wm(f,h.mode,N),f.return=h,f;case ga:var b=f._init;return u(h,b(f._payload),N)}if(Ji(f)||Ii(f))return f=cl(f,h.mode,N,null),f.return=h,f;wc(h,f)}return null}function p(h,f,N,b){var w=f!==null?f.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return w!==null?null:o(h,f,""+N,b);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case mc:return N.key===w?c(h,f,N,b):null;case Rl:return N.key===w?d(h,f,N,b):null;case ga:return w=N._init,p(h,f,w(N._payload),b)}if(Ji(N)||Ii(N))return w!==null?null:m(h,f,N,b,null);wc(h,N)}return null}function g(h,f,N,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return h=h.get(N)||null,o(f,h,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case mc:return h=h.get(b.key===null?N:b.key)||null,c(f,h,b,w);case Rl:return h=h.get(b.key===null?N:b.key)||null,d(f,h,b,w);case ga:var D=b._init;return g(h,f,N,D(b._payload),w)}if(Ji(b)||Ii(b))return h=h.get(N)||null,m(f,h,b,w,null);wc(f,b)}return null}function j(h,f,N,b){for(var w=null,D=null,S=f,C=f=0,T=null;S!==null&&C<N.length;C++){S.index>C?(T=S,S=null):T=S.sibling;var _=p(h,S,N[C],b);if(_===null){S===null&&(S=T);break}t&&S&&_.alternate===null&&s(h,S),f=l(_,f,C),D===null?w=_:D.sibling=_,D=_,S=T}if(C===N.length)return r(h,S),Hs&&Ya(h,C),w;if(S===null){for(;C<N.length;C++)S=u(h,N[C],b),S!==null&&(f=l(S,f,C),D===null?w=S:D.sibling=S,D=S);return Hs&&Ya(h,C),w}for(S=n(h,S);C<N.length;C++)T=g(S,h,C,N[C],b),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?C:T.key),f=l(T,f,C),D===null?w=T:D.sibling=T,D=T);return t&&S.forEach(function(E){return s(h,E)}),Hs&&Ya(h,C),w}function y(h,f,N,b){var w=Ii(N);if(typeof w!="function")throw Error(yt(150));if(N=w.call(N),N==null)throw Error(yt(151));for(var D=w=null,S=f,C=f=0,T=null,_=N.next();S!==null&&!_.done;C++,_=N.next()){S.index>C?(T=S,S=null):T=S.sibling;var E=p(h,S,_.value,b);if(E===null){S===null&&(S=T);break}t&&S&&E.alternate===null&&s(h,S),f=l(E,f,C),D===null?w=E:D.sibling=E,D=E,S=T}if(_.done)return r(h,S),Hs&&Ya(h,C),w;if(S===null){for(;!_.done;C++,_=N.next())_=u(h,_.value,b),_!==null&&(f=l(_,f,C),D===null?w=_:D.sibling=_,D=_);return Hs&&Ya(h,C),w}for(S=n(h,S);!_.done;C++,_=N.next())_=g(S,h,C,_.value,b),_!==null&&(t&&_.alternate!==null&&S.delete(_.key===null?C:_.key),f=l(_,f,C),D===null?w=_:D.sibling=_,D=_);return t&&S.forEach(function(A){return s(h,A)}),Hs&&Ya(h,C),w}function v(h,f,N,b){if(typeof N=="object"&&N!==null&&N.type===Ol&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case mc:e:{for(var w=N.key,D=f;D!==null;){if(D.key===w){if(w=N.type,w===Ol){if(D.tag===7){r(h,D.sibling),f=a(D,N.props.children),f.return=h,h=f;break e}}else if(D.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ga&&Zx(w)===D.type){r(h,D.sibling),f=a(D,N.props),f.ref=Fi(h,D,N),f.return=h,h=f;break e}r(h,D);break}else s(h,D);D=D.sibling}N.type===Ol?(f=cl(N.props.children,h.mode,b,N.key),f.return=h,h=f):(b=Jc(N.type,N.key,N.props,null,h.mode,b),b.ref=Fi(h,f,N),b.return=h,h=b)}return i(h);case Rl:e:{for(D=N.key;f!==null;){if(f.key===D)if(f.tag===4&&f.stateNode.containerInfo===N.containerInfo&&f.stateNode.implementation===N.implementation){r(h,f.sibling),f=a(f,N.children||[]),f.return=h,h=f;break e}else{r(h,f);break}else s(h,f);f=f.sibling}f=wm(N,h.mode,b),f.return=h,h=f}return i(h);case ga:return D=N._init,v(h,f,D(N._payload),b)}if(Ji(N))return j(h,f,N,b);if(Ii(N))return y(h,f,N,b);wc(h,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,f!==null&&f.tag===6?(r(h,f.sibling),f=a(f,N),f.return=h,h=f):(r(h,f),f=Nm(N,h.mode,b),f.return=h,h=f),i(h)):r(h,f)}return v}var li=Rv(!0),Ov=Rv(!1),Ed=Ua(null),kd=null,Yl=null,rf=null;function nf(){rf=Yl=kd=null}function af(t){var s=Ed.current;Os(Ed),t._currentValue=s}function Oh(t,s,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,n!==null&&(n.childLanes|=s)):n!==null&&(n.childLanes&s)!==s&&(n.childLanes|=s),t===r)break;t=t.return}}function ei(t,s){kd=t,rf=Yl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(zr=!0),t.firstContext=null)}function gn(t){var s=t._currentValue;if(rf!==t)if(t={context:t,memoizedValue:s,next:null},Yl===null){if(kd===null)throw Error(yt(308));Yl=t,kd.dependencies={lanes:0,firstContext:t}}else Yl=Yl.next=t;return s}var sl=null;function lf(t){sl===null?sl=[t]:sl.push(t)}function Fv(t,s,r,n){var a=s.interleaved;return a===null?(r.next=r,lf(s)):(r.next=a.next,a.next=r),s.interleaved=r,sa(t,n)}function sa(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ya=!1;function of(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $v(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Ia(t,s,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,vs&2){var a=n.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s,sa(t,r)}return a=n.interleaved,a===null?(s.next=s,lf(n)):(s.next=a.next,a.next=s),n.interleaved=s,sa(t,r)}function Kc(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var n=s.lanes;n&=t.pendingLanes,r|=n,s.lanes=r,Kp(t,r)}}function Jx(t,s){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?a=l=s:l=l.next=s}else a=l=s;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function Cd(t,s,r,n){var a=t.updateQueue;ya=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,i===null?l=d:i.next=d,i=c;var m=t.alternate;m!==null&&(m=m.updateQueue,o=m.lastBaseUpdate,o!==i&&(o===null?m.firstBaseUpdate=d:o.next=d,m.lastBaseUpdate=c))}if(l!==null){var u=a.baseState;i=0,m=d=c=null,o=l;do{var p=o.lane,g=o.eventTime;if((n&p)===p){m!==null&&(m=m.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var j=t,y=o;switch(p=s,g=r,y.tag){case 1:if(j=y.payload,typeof j=="function"){u=j.call(g,u,p);break e}u=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=y.payload,p=typeof j=="function"?j.call(g,u,p):j,p==null)break e;u=qs({},u,p);break e;case 2:ya=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=a.effects,p===null?a.effects=[o]:p.push(o))}else g={eventTime:g,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},m===null?(d=m=g,c=u):m=m.next=g,i|=p;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;p=o,o=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(m===null&&(c=u),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=m,s=a.shared.interleaved,s!==null){a=s;do i|=a.lane,a=a.next;while(a!==s)}else l===null&&(a.shared.lanes=0);gl|=i,t.lanes=i,t.memoizedState=u}}function Xx(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var n=t[s],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(yt(191,a));a.call(n)}}}var ec={},zn=Ua(ec),Lo=Ua(ec),Po=Ua(ec);function rl(t){if(t===ec)throw Error(yt(174));return t}function cf(t,s){switch(Ds(Po,s),Ds(Lo,t),Ds(zn,ec),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:gh(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=gh(s,t)}Os(zn),Ds(zn,s)}function ii(){Os(zn),Os(Lo),Os(Po)}function Uv(t){rl(Po.current);var s=rl(zn.current),r=gh(s,t.type);s!==r&&(Ds(Lo,t),Ds(zn,r))}function df(t){Lo.current===t&&(Os(zn),Os(Lo))}var Ws=Ua(0);function Ad(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var xm=[];function uf(){for(var t=0;t<xm.length;t++)xm[t]._workInProgressVersionPrimary=null;xm.length=0}var qc=la.ReactCurrentDispatcher,gm=la.ReactCurrentBatchConfig,xl=0,Ks=null,lr=null,cr=null,Dd=!1,po=!1,Ro=0,n_=0;function jr(){throw Error(yt(321))}function mf(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!kn(t[r],s[r]))return!1;return!0}function hf(t,s,r,n,a,l){if(xl=l,Ks=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,qc.current=t===null||t.memoizedState===null?o_:c_,t=r(n,a),po){l=0;do{if(po=!1,Ro=0,25<=l)throw Error(yt(301));l+=1,cr=lr=null,s.updateQueue=null,qc.current=d_,t=r(n,a)}while(po)}if(qc.current=Td,s=lr!==null&&lr.next!==null,xl=0,cr=lr=Ks=null,Dd=!1,s)throw Error(yt(300));return t}function pf(){var t=Ro!==0;return Ro=0,t}function On(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cr===null?Ks.memoizedState=cr=t:cr=cr.next=t,cr}function yn(){if(lr===null){var t=Ks.alternate;t=t!==null?t.memoizedState:null}else t=lr.next;var s=cr===null?Ks.memoizedState:cr.next;if(s!==null)cr=s,lr=t;else{if(t===null)throw Error(yt(310));lr=t,t={memoizedState:lr.memoizedState,baseState:lr.baseState,baseQueue:lr.baseQueue,queue:lr.queue,next:null},cr===null?Ks.memoizedState=cr=t:cr=cr.next=t}return cr}function Oo(t,s){return typeof s=="function"?s(t):s}function ym(t){var s=yn(),r=s.queue;if(r===null)throw Error(yt(311));r.lastRenderedReducer=t;var n=lr,a=n.baseQueue,l=r.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}n.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,n=n.baseState;var o=i=null,c=null,d=l;do{var m=d.lane;if((xl&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var u={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=u,i=n):c=c.next=u,Ks.lanes|=m,gl|=m}d=d.next}while(d!==null&&d!==l);c===null?i=n:c.next=o,kn(n,s.memoizedState)||(zr=!0),s.memoizedState=n,s.baseState=i,s.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do l=a.lane,Ks.lanes|=l,gl|=l,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function bm(t){var s=yn(),r=s.queue;if(r===null)throw Error(yt(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,l=s.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do l=t(l,i.action),i=i.next;while(i!==a);kn(l,s.memoizedState)||(zr=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),r.lastRenderedState=l}return[l,n]}function Hv(){}function Bv(t,s){var r=Ks,n=yn(),a=s(),l=!kn(n.memoizedState,a);if(l&&(n.memoizedState=a,zr=!0),n=n.queue,ff(Yv.bind(null,r,n,t),[t]),n.getSnapshot!==s||l||cr!==null&&cr.memoizedState.tag&1){if(r.flags|=2048,Fo(9,Wv.bind(null,r,n,a,s),void 0,null),dr===null)throw Error(yt(349));xl&30||zv(r,s,a)}return a}function zv(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Ks.updateQueue,s===null?(s={lastEffect:null,stores:null},Ks.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function Wv(t,s,r,n){s.value=r,s.getSnapshot=n,Kv(s)&&qv(t)}function Yv(t,s,r){return r(function(){Kv(s)&&qv(t)})}function Kv(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!kn(t,r)}catch{return!0}}function qv(t){var s=sa(t,1);s!==null&&En(s,t,1,-1)}function eg(t){var s=On();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:t},s.queue=t,t=t.dispatch=i_.bind(null,Ks,t),[s.memoizedState,t]}function Fo(t,s,r,n){return t={tag:t,create:s,destroy:r,deps:n,next:null},s=Ks.updateQueue,s===null?(s={lastEffect:null,stores:null},Ks.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,s.lastEffect=t)),t}function Vv(){return yn().memoizedState}function Vc(t,s,r,n){var a=On();Ks.flags|=t,a.memoizedState=Fo(1|s,r,void 0,n===void 0?null:n)}function hu(t,s,r,n){var a=yn();n=n===void 0?null:n;var l=void 0;if(lr!==null){var i=lr.memoizedState;if(l=i.destroy,n!==null&&mf(n,i.deps)){a.memoizedState=Fo(s,r,l,n);return}}Ks.flags|=t,a.memoizedState=Fo(1|s,r,l,n)}function tg(t,s){return Vc(8390656,8,t,s)}function ff(t,s){return hu(2048,8,t,s)}function Gv(t,s){return hu(4,2,t,s)}function Qv(t,s){return hu(4,4,t,s)}function Zv(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Jv(t,s,r){return r=r!=null?r.concat([t]):null,hu(4,4,Zv.bind(null,s,t),r)}function xf(){}function Xv(t,s){var r=yn();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&mf(s,n[1])?n[0]:(r.memoizedState=[t,s],t)}function ej(t,s){var r=yn();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&mf(s,n[1])?n[0]:(t=t(),r.memoizedState=[t,s],t)}function tj(t,s,r){return xl&21?(kn(r,s)||(r=lv(),Ks.lanes|=r,gl|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,zr=!0),t.memoizedState=r)}function a_(t,s){var r=_s;_s=r!==0&&4>r?r:4,t(!0);var n=gm.transition;gm.transition={};try{t(!1),s()}finally{_s=r,gm.transition=n}}function sj(){return yn().memoizedState}function l_(t,s,r){var n=Pa(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},rj(t))nj(s,r);else if(r=Fv(t,s,r,n),r!==null){var a=Mr();En(r,t,n,a),aj(r,s,n)}}function i_(t,s,r){var n=Pa(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(rj(t))nj(s,a);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var i=s.lastRenderedState,o=l(i,r);if(a.hasEagerState=!0,a.eagerState=o,kn(o,i)){var c=s.interleaved;c===null?(a.next=a,lf(s)):(a.next=c.next,c.next=a),s.interleaved=a;return}}catch{}finally{}r=Fv(t,s,a,n),r!==null&&(a=Mr(),En(r,t,n,a),aj(r,s,n))}}function rj(t){var s=t.alternate;return t===Ks||s!==null&&s===Ks}function nj(t,s){po=Dd=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function aj(t,s,r){if(r&4194240){var n=s.lanes;n&=t.pendingLanes,r|=n,s.lanes=r,Kp(t,r)}}var Td={readContext:gn,useCallback:jr,useContext:jr,useEffect:jr,useImperativeHandle:jr,useInsertionEffect:jr,useLayoutEffect:jr,useMemo:jr,useReducer:jr,useRef:jr,useState:jr,useDebugValue:jr,useDeferredValue:jr,useTransition:jr,useMutableSource:jr,useSyncExternalStore:jr,useId:jr,unstable_isNewReconciler:!1},o_={readContext:gn,useCallback:function(t,s){return On().memoizedState=[t,s===void 0?null:s],t},useContext:gn,useEffect:tg,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,Vc(4194308,4,Zv.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Vc(4194308,4,t,s)},useInsertionEffect:function(t,s){return Vc(4,2,t,s)},useMemo:function(t,s){var r=On();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var n=On();return s=r!==void 0?r(s):s,n.memoizedState=n.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},n.queue=t,t=t.dispatch=l_.bind(null,Ks,t),[n.memoizedState,t]},useRef:function(t){var s=On();return t={current:t},s.memoizedState=t},useState:eg,useDebugValue:xf,useDeferredValue:function(t){return On().memoizedState=t},useTransition:function(){var t=eg(!1),s=t[0];return t=a_.bind(null,t[1]),On().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var n=Ks,a=On();if(Hs){if(r===void 0)throw Error(yt(407));r=r()}else{if(r=s(),dr===null)throw Error(yt(349));xl&30||zv(n,s,r)}a.memoizedState=r;var l={value:r,getSnapshot:s};return a.queue=l,tg(Yv.bind(null,n,l,t),[t]),n.flags|=2048,Fo(9,Wv.bind(null,n,l,r,s),void 0,null),r},useId:function(){var t=On(),s=dr.identifierPrefix;if(Hs){var r=Qn,n=Gn;r=(n&~(1<<32-_n(n)-1)).toString(32)+r,s=":"+s+"R"+r,r=Ro++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=n_++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},c_={readContext:gn,useCallback:Xv,useContext:gn,useEffect:ff,useImperativeHandle:Jv,useInsertionEffect:Gv,useLayoutEffect:Qv,useMemo:ej,useReducer:ym,useRef:Vv,useState:function(){return ym(Oo)},useDebugValue:xf,useDeferredValue:function(t){var s=yn();return tj(s,lr.memoizedState,t)},useTransition:function(){var t=ym(Oo)[0],s=yn().memoizedState;return[t,s]},useMutableSource:Hv,useSyncExternalStore:Bv,useId:sj,unstable_isNewReconciler:!1},d_={readContext:gn,useCallback:Xv,useContext:gn,useEffect:ff,useImperativeHandle:Jv,useInsertionEffect:Gv,useLayoutEffect:Qv,useMemo:ej,useReducer:bm,useRef:Vv,useState:function(){return bm(Oo)},useDebugValue:xf,useDeferredValue:function(t){var s=yn();return lr===null?s.memoizedState=t:tj(s,lr.memoizedState,t)},useTransition:function(){var t=bm(Oo)[0],s=yn().memoizedState;return[t,s]},useMutableSource:Hv,useSyncExternalStore:Bv,useId:sj,unstable_isNewReconciler:!1};function jn(t,s){if(t&&t.defaultProps){s=qs({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function Fh(t,s,r,n){s=t.memoizedState,r=r(n,s),r=r==null?s:qs({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var pu={isMounted:function(t){return(t=t._reactInternals)?Nl(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var n=Mr(),a=Pa(t),l=Xn(n,a);l.payload=s,r!=null&&(l.callback=r),s=Ia(t,l,a),s!==null&&(En(s,t,a,n),Kc(s,t,a))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var n=Mr(),a=Pa(t),l=Xn(n,a);l.tag=1,l.payload=s,r!=null&&(l.callback=r),s=Ia(t,l,a),s!==null&&(En(s,t,a,n),Kc(s,t,a))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=Mr(),n=Pa(t),a=Xn(r,n);a.tag=2,s!=null&&(a.callback=s),s=Ia(t,a,n),s!==null&&(En(s,t,n,r),Kc(s,t,n))}};function sg(t,s,r,n,a,l,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,l,i):s.prototype&&s.prototype.isPureReactComponent?!Do(r,n)||!Do(a,l):!0}function lj(t,s,r){var n=!1,a=Fa,l=s.contextType;return typeof l=="object"&&l!==null?l=gn(l):(a=Yr(s)?pl:Ar.current,n=s.contextTypes,l=(n=n!=null)?ni(t,a):Fa),s=new s(r,l),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=pu,t.stateNode=s,s._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=l),s}function rg(t,s,r,n){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,n),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,n),s.state!==t&&pu.enqueueReplaceState(s,s.state,null)}function $h(t,s,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},of(t);var l=s.contextType;typeof l=="object"&&l!==null?a.context=gn(l):(l=Yr(s)?pl:Ar.current,a.context=ni(t,l)),a.state=t.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(Fh(t,s,l,r),a.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&pu.enqueueReplaceState(a,a.state,null),Cd(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function oi(t,s){try{var r="",n=s;do r+=Fw(n),n=n.return;while(n);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:s,stack:a,digest:null}}function vm(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function Uh(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var u_=typeof WeakMap=="function"?WeakMap:Map;function ij(t,s,r){r=Xn(-1,r),r.tag=3,r.payload={element:null};var n=s.value;return r.callback=function(){Id||(Id=!0,Qh=n),Uh(t,s)},r}function oj(t,s,r){r=Xn(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=s.value;r.payload=function(){return n(a)},r.callback=function(){Uh(t,s)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Uh(t,s),typeof n!="function"&&(La===null?La=new Set([this]):La.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})}),r}function ng(t,s,r){var n=t.pingCache;if(n===null){n=t.pingCache=new u_;var a=new Set;n.set(s,a)}else a=n.get(s),a===void 0&&(a=new Set,n.set(s,a));a.has(r)||(a.add(r),t=__.bind(null,t,s,r),s.then(t,t))}function ag(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function lg(t,s,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=Xn(-1,1),s.tag=2,Ia(r,s,1))),r.lanes|=1),t)}var m_=la.ReactCurrentOwner,zr=!1;function Dr(t,s,r,n){s.child=t===null?Ov(s,null,r,n):li(s,t.child,r,n)}function ig(t,s,r,n,a){r=r.render;var l=s.ref;return ei(s,a),n=hf(t,s,r,n,l,a),r=pf(),t!==null&&!zr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,ra(t,s,a)):(Hs&&r&&ef(s),s.flags|=1,Dr(t,s,n,a),s.child)}function og(t,s,r,n,a){if(t===null){var l=r.type;return typeof l=="function"&&!Sf(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=l,cj(t,s,l,n,a)):(t=Jc(r.type,null,n,s,s.mode,a),t.ref=s.ref,t.return=s,s.child=t)}if(l=t.child,!(t.lanes&a)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:Do,r(i,n)&&t.ref===s.ref)return ra(t,s,a)}return s.flags|=1,t=Ra(l,n),t.ref=s.ref,t.return=s,s.child=t}function cj(t,s,r,n,a){if(t!==null){var l=t.memoizedProps;if(Do(l,n)&&t.ref===s.ref)if(zr=!1,s.pendingProps=n=l,(t.lanes&a)!==0)t.flags&131072&&(zr=!0);else return s.lanes=t.lanes,ra(t,s,a)}return Hh(t,s,r,n,a)}function dj(t,s,r){var n=s.pendingProps,a=n.children,l=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ds(ql,Zr),Zr|=r;else{if(!(r&1073741824))return t=l!==null?l.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Ds(ql,Zr),Zr|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,Ds(ql,Zr),Zr|=n}else l!==null?(n=l.baseLanes|r,s.memoizedState=null):n=r,Ds(ql,Zr),Zr|=n;return Dr(t,s,a,r),s.child}function uj(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function Hh(t,s,r,n,a){var l=Yr(r)?pl:Ar.current;return l=ni(s,l),ei(s,a),r=hf(t,s,r,n,l,a),n=pf(),t!==null&&!zr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,ra(t,s,a)):(Hs&&n&&ef(s),s.flags|=1,Dr(t,s,r,a),s.child)}function cg(t,s,r,n,a){if(Yr(r)){var l=!0;wd(s)}else l=!1;if(ei(s,a),s.stateNode===null)Gc(t,s),lj(s,r,n),$h(s,r,n,a),n=!0;else if(t===null){var i=s.stateNode,o=s.memoizedProps;i.props=o;var c=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=gn(d):(d=Yr(r)?pl:Ar.current,d=ni(s,d));var m=r.getDerivedStateFromProps,u=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function";u||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==n||c!==d)&&rg(s,i,n,d),ya=!1;var p=s.memoizedState;i.state=p,Cd(s,n,i,a),c=s.memoizedState,o!==n||p!==c||Wr.current||ya?(typeof m=="function"&&(Fh(s,r,m,n),c=s.memoizedState),(o=ya||sg(s,r,o,n,p,c,d))?(u||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=n,s.memoizedState=c),i.props=n,i.state=c,i.context=d,n=o):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),n=!1)}else{i=s.stateNode,$v(t,s),o=s.memoizedProps,d=s.type===s.elementType?o:jn(s.type,o),i.props=d,u=s.pendingProps,p=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=gn(c):(c=Yr(r)?pl:Ar.current,c=ni(s,c));var g=r.getDerivedStateFromProps;(m=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==u||p!==c)&&rg(s,i,n,c),ya=!1,p=s.memoizedState,i.state=p,Cd(s,n,i,a);var j=s.memoizedState;o!==u||p!==j||Wr.current||ya?(typeof g=="function"&&(Fh(s,r,g,n),j=s.memoizedState),(d=ya||sg(s,r,d,n,p,j,c)||!1)?(m||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,j,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,j,c)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(s.flags|=1024),s.memoizedProps=n,s.memoizedState=j),i.props=n,i.state=j,i.context=c,n=d):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(s.flags|=1024),n=!1)}return Bh(t,s,r,n,l,a)}function Bh(t,s,r,n,a,l){uj(t,s);var i=(s.flags&128)!==0;if(!n&&!i)return a&&Vx(s,r,!1),ra(t,s,l);n=s.stateNode,m_.current=s;var o=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return s.flags|=1,t!==null&&i?(s.child=li(s,t.child,null,l),s.child=li(s,null,o,l)):Dr(t,s,o,l),s.memoizedState=n.state,a&&Vx(s,r,!0),s.child}function mj(t){var s=t.stateNode;s.pendingContext?qx(t,s.pendingContext,s.pendingContext!==s.context):s.context&&qx(t,s.context,!1),cf(t,s.containerInfo)}function dg(t,s,r,n,a){return ai(),sf(a),s.flags|=256,Dr(t,s,r,n),s.child}var zh={dehydrated:null,treeContext:null,retryLane:0};function Wh(t){return{baseLanes:t,cachePool:null,transitions:null}}function hj(t,s,r){var n=s.pendingProps,a=Ws.current,l=!1,i=(s.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(a&2)!==0),o?(l=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Ds(Ws,a&1),t===null)return Rh(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(i=n.children,t=n.fallback,l?(n=s.mode,l=s.child,i={mode:"hidden",children:i},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=gu(i,n,0,null),t=cl(t,n,r,null),l.return=s,t.return=s,l.sibling=t,s.child=l,s.child.memoizedState=Wh(r),s.memoizedState=zh,t):gf(s,i));if(a=t.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return h_(t,s,i,n,o,a,r);if(l){l=n.fallback,i=s.mode,a=t.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&s.child!==a?(n=s.child,n.childLanes=0,n.pendingProps=c,s.deletions=null):(n=Ra(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?l=Ra(o,l):(l=cl(l,i,r,null),l.flags|=2),l.return=s,n.return=s,n.sibling=l,s.child=n,n=l,l=s.child,i=t.child.memoizedState,i=i===null?Wh(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=t.childLanes&~r,s.memoizedState=zh,n}return l=t.child,t=l.sibling,n=Ra(l,{mode:"visible",children:n.children}),!(s.mode&1)&&(n.lanes=r),n.return=s,n.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=n,s.memoizedState=null,n}function gf(t,s){return s=gu({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Sc(t,s,r,n){return n!==null&&sf(n),li(s,t.child,null,r),t=gf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function h_(t,s,r,n,a,l,i){if(r)return s.flags&256?(s.flags&=-257,n=vm(Error(yt(422))),Sc(t,s,i,n)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(l=n.fallback,a=s.mode,n=gu({mode:"visible",children:n.children},a,0,null),l=cl(l,a,i,null),l.flags|=2,n.return=s,l.return=s,n.sibling=l,s.child=n,s.mode&1&&li(s,t.child,null,i),s.child.memoizedState=Wh(i),s.memoizedState=zh,l);if(!(s.mode&1))return Sc(t,s,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,l=Error(yt(419)),n=vm(l,n,void 0),Sc(t,s,i,n)}if(o=(i&t.childLanes)!==0,zr||o){if(n=dr,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,sa(t,a),En(n,t,a,-1))}return wf(),n=vm(Error(yt(421))),Sc(t,s,i,n)}return a.data==="$?"?(s.flags|=128,s.child=t.child,s=E_.bind(null,t),a._reactRetry=s,null):(t=l.treeContext,nn=Ma(a.nextSibling),an=s,Hs=!0,wn=null,t!==null&&(hn[pn++]=Gn,hn[pn++]=Qn,hn[pn++]=fl,Gn=t.id,Qn=t.overflow,fl=s),s=gf(s,n.children),s.flags|=4096,s)}function ug(t,s,r){t.lanes|=s;var n=t.alternate;n!==null&&(n.lanes|=s),Oh(t.return,s,r)}function jm(t,s,r,n,a){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=a)}function pj(t,s,r){var n=s.pendingProps,a=n.revealOrder,l=n.tail;if(Dr(t,s,n.children,r),n=Ws.current,n&2)n=n&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ug(t,r,s);else if(t.tag===19)ug(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ds(Ws,n),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(r=s.child,a=null;r!==null;)t=r.alternate,t!==null&&Ad(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=s.child,s.child=null):(a=r.sibling,r.sibling=null),jm(s,!1,a,r,l);break;case"backwards":for(r=null,a=s.child,s.child=null;a!==null;){if(t=a.alternate,t!==null&&Ad(t)===null){s.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}jm(s,!0,r,null,l);break;case"together":jm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Gc(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function ra(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),gl|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(yt(153));if(s.child!==null){for(t=s.child,r=Ra(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=Ra(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function p_(t,s,r){switch(s.tag){case 3:mj(s),ai();break;case 5:Uv(s);break;case 1:Yr(s.type)&&wd(s);break;case 4:cf(s,s.stateNode.containerInfo);break;case 10:var n=s.type._context,a=s.memoizedProps.value;Ds(Ed,n._currentValue),n._currentValue=a;break;case 13:if(n=s.memoizedState,n!==null)return n.dehydrated!==null?(Ds(Ws,Ws.current&1),s.flags|=128,null):r&s.child.childLanes?hj(t,s,r):(Ds(Ws,Ws.current&1),t=ra(t,s,r),t!==null?t.sibling:null);Ds(Ws,Ws.current&1);break;case 19:if(n=(r&s.childLanes)!==0,t.flags&128){if(n)return pj(t,s,r);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ds(Ws,Ws.current),n)break;return null;case 22:case 23:return s.lanes=0,dj(t,s,r)}return ra(t,s,r)}var fj,Yh,xj,gj;fj=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Yh=function(){};xj=function(t,s,r,n){var a=t.memoizedProps;if(a!==n){t=s.stateNode,rl(zn.current);var l=null;switch(r){case"input":a=hh(t,a),n=hh(t,n),l=[];break;case"select":a=qs({},a,{value:void 0}),n=qs({},n,{value:void 0}),l=[];break;case"textarea":a=xh(t,a),n=xh(t,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=jd)}yh(r,n);var i;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(wo.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in n){var c=n[d];if(o=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(l||(l=[]),l.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(wo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Is("scroll",t),l||o===c||(l=[])):(l=l||[]).push(d,c))}r&&(l=l||[]).push("style",r);var d=l;(s.updateQueue=d)&&(s.flags|=4)}};gj=function(t,s,r,n){r!==n&&(s.flags|=4)};function $i(t,s){if(!Hs)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Nr(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(s)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,s}function f_(t,s,r){var n=s.pendingProps;switch(tf(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nr(s),null;case 1:return Yr(s.type)&&Nd(),Nr(s),null;case 3:return n=s.stateNode,ii(),Os(Wr),Os(Ar),uf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Nc(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,wn!==null&&(Xh(wn),wn=null))),Yh(t,s),Nr(s),null;case 5:df(s);var a=rl(Po.current);if(r=s.type,t!==null&&s.stateNode!=null)xj(t,s,r,n,a),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!n){if(s.stateNode===null)throw Error(yt(166));return Nr(s),null}if(t=rl(zn.current),Nc(s)){n=s.stateNode,r=s.type;var l=s.memoizedProps;switch(n[$n]=s,n[Io]=l,t=(s.mode&1)!==0,r){case"dialog":Is("cancel",n),Is("close",n);break;case"iframe":case"object":case"embed":Is("load",n);break;case"video":case"audio":for(a=0;a<eo.length;a++)Is(eo[a],n);break;case"source":Is("error",n);break;case"img":case"image":case"link":Is("error",n),Is("load",n);break;case"details":Is("toggle",n);break;case"input":vx(n,l),Is("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},Is("invalid",n);break;case"textarea":Nx(n,l),Is("invalid",n)}yh(r,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?n.textContent!==o&&(l.suppressHydrationWarning!==!0&&jc(n.textContent,o,t),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&jc(n.textContent,o,t),a=["children",""+o]):wo.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&Is("scroll",n)}switch(r){case"input":hc(n),jx(n,l,!0);break;case"textarea":hc(n),wx(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=jd)}n=a,s.updateQueue=n,n!==null&&(s.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Yb(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[$n]=s,t[Io]=n,fj(t,s,!1,!1),s.stateNode=t;e:{switch(i=bh(r,n),r){case"dialog":Is("cancel",t),Is("close",t),a=n;break;case"iframe":case"object":case"embed":Is("load",t),a=n;break;case"video":case"audio":for(a=0;a<eo.length;a++)Is(eo[a],t);a=n;break;case"source":Is("error",t),a=n;break;case"img":case"image":case"link":Is("error",t),Is("load",t),a=n;break;case"details":Is("toggle",t),a=n;break;case"input":vx(t,n),a=hh(t,n),Is("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=qs({},n,{value:void 0}),Is("invalid",t);break;case"textarea":Nx(t,n),a=xh(t,n),Is("invalid",t);break;default:a=n}yh(r,a),o=a;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?Vb(t,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Kb(t,c)):l==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&So(t,c):typeof c=="number"&&So(t,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(wo.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Is("scroll",t):c!=null&&Up(t,l,c,i))}switch(r){case"input":hc(t),jx(t,n,!1);break;case"textarea":hc(t),wx(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Oa(n.value));break;case"select":t.multiple=!!n.multiple,l=n.value,l!=null?Ql(t,!!n.multiple,l,!1):n.defaultValue!=null&&Ql(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=jd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Nr(s),null;case 6:if(t&&s.stateNode!=null)gj(t,s,t.memoizedProps,n);else{if(typeof n!="string"&&s.stateNode===null)throw Error(yt(166));if(r=rl(Po.current),rl(zn.current),Nc(s)){if(n=s.stateNode,r=s.memoizedProps,n[$n]=s,(l=n.nodeValue!==r)&&(t=an,t!==null))switch(t.tag){case 3:jc(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jc(n.nodeValue,r,(t.mode&1)!==0)}l&&(s.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[$n]=s,s.stateNode=n}return Nr(s),null;case 13:if(Os(Ws),n=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Hs&&nn!==null&&s.mode&1&&!(s.flags&128))Pv(),ai(),s.flags|=98560,l=!1;else if(l=Nc(s),n!==null&&n.dehydrated!==null){if(t===null){if(!l)throw Error(yt(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(yt(317));l[$n]=s}else ai(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Nr(s),l=!1}else wn!==null&&(Xh(wn),wn=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(s.child.flags|=8192,s.mode&1&&(t===null||Ws.current&1?ir===0&&(ir=3):wf())),s.updateQueue!==null&&(s.flags|=4),Nr(s),null);case 4:return ii(),Yh(t,s),t===null&&To(s.stateNode.containerInfo),Nr(s),null;case 10:return af(s.type._context),Nr(s),null;case 17:return Yr(s.type)&&Nd(),Nr(s),null;case 19:if(Os(Ws),l=s.memoizedState,l===null)return Nr(s),null;if(n=(s.flags&128)!==0,i=l.rendering,i===null)if(n)$i(l,!1);else{if(ir!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(i=Ad(t),i!==null){for(s.flags|=128,$i(l,!1),n=i.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),s.subtreeFlags=0,n=r,r=s.child;r!==null;)l=r,t=n,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,t=i.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ds(Ws,Ws.current&1|2),s.child}t=t.sibling}l.tail!==null&&er()>ci&&(s.flags|=128,n=!0,$i(l,!1),s.lanes=4194304)}else{if(!n)if(t=Ad(i),t!==null){if(s.flags|=128,n=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),$i(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!Hs)return Nr(s),null}else 2*er()-l.renderingStartTime>ci&&r!==1073741824&&(s.flags|=128,n=!0,$i(l,!1),s.lanes=4194304);l.isBackwards?(i.sibling=s.child,s.child=i):(r=l.last,r!==null?r.sibling=i:s.child=i,l.last=i)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=er(),s.sibling=null,r=Ws.current,Ds(Ws,n?r&1|2:r&1),s):(Nr(s),null);case 22:case 23:return Nf(),n=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(s.flags|=8192),n&&s.mode&1?Zr&1073741824&&(Nr(s),s.subtreeFlags&6&&(s.flags|=8192)):Nr(s),null;case 24:return null;case 25:return null}throw Error(yt(156,s.tag))}function x_(t,s){switch(tf(s),s.tag){case 1:return Yr(s.type)&&Nd(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ii(),Os(Wr),Os(Ar),uf(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return df(s),null;case 13:if(Os(Ws),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(yt(340));ai()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Os(Ws),null;case 4:return ii(),null;case 10:return af(s.type._context),null;case 22:case 23:return Nf(),null;case 24:return null;default:return null}}var _c=!1,Er=!1,g_=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function Kl(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Zs(t,s,n)}else r.current=null}function Kh(t,s,r){try{r()}catch(n){Zs(t,s,n)}}var mg=!1;function y_(t,s){if(Ah=yd,t=Nv(),Xp(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,o=-1,c=-1,d=0,m=0,u=t,p=null;t:for(;;){for(var g;u!==r||a!==0&&u.nodeType!==3||(o=i+a),u!==l||n!==0&&u.nodeType!==3||(c=i+n),u.nodeType===3&&(i+=u.nodeValue.length),(g=u.firstChild)!==null;)p=u,u=g;for(;;){if(u===t)break t;if(p===r&&++d===a&&(o=i),p===l&&++m===n&&(c=i),(g=u.nextSibling)!==null)break;u=p,p=u.parentNode}u=g}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Dh={focusedElem:t,selectionRange:r},yd=!1,Lt=s;Lt!==null;)if(s=Lt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Lt=t;else for(;Lt!==null;){s=Lt;try{var j=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var y=j.memoizedProps,v=j.memoizedState,h=s.stateNode,f=h.getSnapshotBeforeUpdate(s.elementType===s.type?y:jn(s.type,y),v);h.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var N=s.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(yt(163))}}catch(b){Zs(s,s.return,b)}if(t=s.sibling,t!==null){t.return=s.return,Lt=t;break}Lt=s.return}return j=mg,mg=!1,j}function fo(t,s,r){var n=s.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var l=a.destroy;a.destroy=void 0,l!==void 0&&Kh(s,r,l)}a=a.next}while(a!==n)}}function fu(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==s)}}function qh(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function yj(t){var s=t.alternate;s!==null&&(t.alternate=null,yj(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[$n],delete s[Io],delete s[Ih],delete s[e_],delete s[t_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bj(t){return t.tag===5||t.tag===3||t.tag===4}function hg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vh(t,s,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=jd));else if(n!==4&&(t=t.child,t!==null))for(Vh(t,s,r),t=t.sibling;t!==null;)Vh(t,s,r),t=t.sibling}function Gh(t,s,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Gh(t,s,r),t=t.sibling;t!==null;)Gh(t,s,r),t=t.sibling}var mr=null,Nn=!1;function ca(t,s,r){for(r=r.child;r!==null;)vj(t,s,r),r=r.sibling}function vj(t,s,r){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(iu,r)}catch{}switch(r.tag){case 5:Er||Kl(r,s);case 6:var n=mr,a=Nn;mr=null,ca(t,s,r),mr=n,Nn=a,mr!==null&&(Nn?(t=mr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):mr.removeChild(r.stateNode));break;case 18:mr!==null&&(Nn?(t=mr,r=r.stateNode,t.nodeType===8?pm(t.parentNode,r):t.nodeType===1&&pm(t,r),Co(t)):pm(mr,r.stateNode));break;case 4:n=mr,a=Nn,mr=r.stateNode.containerInfo,Nn=!0,ca(t,s,r),mr=n,Nn=a;break;case 0:case 11:case 14:case 15:if(!Er&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&Kh(r,s,i),a=a.next}while(a!==n)}ca(t,s,r);break;case 1:if(!Er&&(Kl(r,s),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Zs(r,s,o)}ca(t,s,r);break;case 21:ca(t,s,r);break;case 22:r.mode&1?(Er=(n=Er)||r.memoizedState!==null,ca(t,s,r),Er=n):ca(t,s,r);break;default:ca(t,s,r)}}function pg(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new g_),s.forEach(function(n){var a=k_.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function bn(t,s){var r=s.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var l=t,i=s,o=i;e:for(;o!==null;){switch(o.tag){case 5:mr=o.stateNode,Nn=!1;break e;case 3:mr=o.stateNode.containerInfo,Nn=!0;break e;case 4:mr=o.stateNode.containerInfo,Nn=!0;break e}o=o.return}if(mr===null)throw Error(yt(160));vj(l,i,a),mr=null,Nn=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Zs(a,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)jj(s,t),s=s.sibling}function jj(t,s){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bn(s,t),Dn(t),n&4){try{fo(3,t,t.return),fu(3,t)}catch(y){Zs(t,t.return,y)}try{fo(5,t,t.return)}catch(y){Zs(t,t.return,y)}}break;case 1:bn(s,t),Dn(t),n&512&&r!==null&&Kl(r,r.return);break;case 5:if(bn(s,t),Dn(t),n&512&&r!==null&&Kl(r,r.return),t.flags&32){var a=t.stateNode;try{So(a,"")}catch(y){Zs(t,t.return,y)}}if(n&4&&(a=t.stateNode,a!=null)){var l=t.memoizedProps,i=r!==null?r.memoizedProps:l,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&zb(a,l),bh(o,i);var d=bh(o,l);for(i=0;i<c.length;i+=2){var m=c[i],u=c[i+1];m==="style"?Vb(a,u):m==="dangerouslySetInnerHTML"?Kb(a,u):m==="children"?So(a,u):Up(a,m,u,d)}switch(o){case"input":ph(a,l);break;case"textarea":Wb(a,l);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var g=l.value;g!=null?Ql(a,!!l.multiple,g,!1):p!==!!l.multiple&&(l.defaultValue!=null?Ql(a,!!l.multiple,l.defaultValue,!0):Ql(a,!!l.multiple,l.multiple?[]:"",!1))}a[Io]=l}catch(y){Zs(t,t.return,y)}}break;case 6:if(bn(s,t),Dn(t),n&4){if(t.stateNode===null)throw Error(yt(162));a=t.stateNode,l=t.memoizedProps;try{a.nodeValue=l}catch(y){Zs(t,t.return,y)}}break;case 3:if(bn(s,t),Dn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Co(s.containerInfo)}catch(y){Zs(t,t.return,y)}break;case 4:bn(s,t),Dn(t);break;case 13:bn(s,t),Dn(t),a=t.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(vf=er())),n&4&&pg(t);break;case 22:if(m=r!==null&&r.memoizedState!==null,t.mode&1?(Er=(d=Er)||m,bn(s,t),Er=d):bn(s,t),Dn(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(Lt=t,m=t.child;m!==null;){for(u=Lt=m;Lt!==null;){switch(p=Lt,g=p.child,p.tag){case 0:case 11:case 14:case 15:fo(4,p,p.return);break;case 1:Kl(p,p.return);var j=p.stateNode;if(typeof j.componentWillUnmount=="function"){n=p,r=p.return;try{s=n,j.props=s.memoizedProps,j.state=s.memoizedState,j.componentWillUnmount()}catch(y){Zs(n,r,y)}}break;case 5:Kl(p,p.return);break;case 22:if(p.memoizedState!==null){xg(u);continue}}g!==null?(g.return=p,Lt=g):xg(u)}m=m.sibling}e:for(m=null,u=t;;){if(u.tag===5){if(m===null){m=u;try{a=u.stateNode,d?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=u.stateNode,c=u.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=qb("display",i))}catch(y){Zs(t,t.return,y)}}}else if(u.tag===6){if(m===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(y){Zs(t,t.return,y)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===t)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;m===u&&(m=null),u=u.return}m===u&&(m=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:bn(s,t),Dn(t),n&4&&pg(t);break;case 21:break;default:bn(s,t),Dn(t)}}function Dn(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(bj(r)){var n=r;break e}r=r.return}throw Error(yt(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(So(a,""),n.flags&=-33);var l=hg(t);Gh(t,l,a);break;case 3:case 4:var i=n.stateNode.containerInfo,o=hg(t);Vh(t,o,i);break;default:throw Error(yt(161))}}catch(c){Zs(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function b_(t,s,r){Lt=t,Nj(t)}function Nj(t,s,r){for(var n=(t.mode&1)!==0;Lt!==null;){var a=Lt,l=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||_c;if(!i){var o=a.alternate,c=o!==null&&o.memoizedState!==null||Er;o=_c;var d=Er;if(_c=i,(Er=c)&&!d)for(Lt=a;Lt!==null;)i=Lt,c=i.child,i.tag===22&&i.memoizedState!==null?gg(a):c!==null?(c.return=i,Lt=c):gg(a);for(;l!==null;)Lt=l,Nj(l),l=l.sibling;Lt=a,_c=o,Er=d}fg(t)}else a.subtreeFlags&8772&&l!==null?(l.return=a,Lt=l):fg(t)}}function fg(t){for(;Lt!==null;){var s=Lt;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Er||fu(5,s);break;case 1:var n=s.stateNode;if(s.flags&4&&!Er)if(r===null)n.componentDidMount();else{var a=s.elementType===s.type?r.memoizedProps:jn(s.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&Xx(s,l,n);break;case 3:var i=s.updateQueue;if(i!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}Xx(s,i,r)}break;case 5:var o=s.stateNode;if(r===null&&s.flags&4){r=o;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var u=m.dehydrated;u!==null&&Co(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(yt(163))}Er||s.flags&512&&qh(s)}catch(p){Zs(s,s.return,p)}}if(s===t){Lt=null;break}if(r=s.sibling,r!==null){r.return=s.return,Lt=r;break}Lt=s.return}}function xg(t){for(;Lt!==null;){var s=Lt;if(s===t){Lt=null;break}var r=s.sibling;if(r!==null){r.return=s.return,Lt=r;break}Lt=s.return}}function gg(t){for(;Lt!==null;){var s=Lt;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{fu(4,s)}catch(c){Zs(s,r,c)}break;case 1:var n=s.stateNode;if(typeof n.componentDidMount=="function"){var a=s.return;try{n.componentDidMount()}catch(c){Zs(s,a,c)}}var l=s.return;try{qh(s)}catch(c){Zs(s,l,c)}break;case 5:var i=s.return;try{qh(s)}catch(c){Zs(s,i,c)}}}catch(c){Zs(s,s.return,c)}if(s===t){Lt=null;break}var o=s.sibling;if(o!==null){o.return=s.return,Lt=o;break}Lt=s.return}}var v_=Math.ceil,Md=la.ReactCurrentDispatcher,yf=la.ReactCurrentOwner,xn=la.ReactCurrentBatchConfig,vs=0,dr=null,rr=null,pr=0,Zr=0,ql=Ua(0),ir=0,$o=null,gl=0,xu=0,bf=0,xo=null,Br=null,vf=0,ci=1/0,qn=null,Id=!1,Qh=null,La=null,Ec=!1,wa=null,Ld=0,go=0,Zh=null,Qc=-1,Zc=0;function Mr(){return vs&6?er():Qc!==-1?Qc:Qc=er()}function Pa(t){return t.mode&1?vs&2&&pr!==0?pr&-pr:r_.transition!==null?(Zc===0&&(Zc=lv()),Zc):(t=_s,t!==0||(t=window.event,t=t===void 0?16:hv(t.type)),t):1}function En(t,s,r,n){if(50<go)throw go=0,Zh=null,Error(yt(185));Zo(t,r,n),(!(vs&2)||t!==dr)&&(t===dr&&(!(vs&2)&&(xu|=r),ir===4&&va(t,pr)),Kr(t,n),r===1&&vs===0&&!(s.mode&1)&&(ci=er()+500,mu&&Ha()))}function Kr(t,s){var r=t.callbackNode;rS(t,s);var n=gd(t,t===dr?pr:0);if(n===0)r!==null&&Ex(r),t.callbackNode=null,t.callbackPriority=0;else if(s=n&-n,t.callbackPriority!==s){if(r!=null&&Ex(r),s===1)t.tag===0?s_(yg.bind(null,t)):Mv(yg.bind(null,t)),JS(function(){!(vs&6)&&Ha()}),r=null;else{switch(iv(n)){case 1:r=Yp;break;case 4:r=nv;break;case 16:r=xd;break;case 536870912:r=av;break;default:r=xd}r=Dj(r,wj.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function wj(t,s){if(Qc=-1,Zc=0,vs&6)throw Error(yt(327));var r=t.callbackNode;if(ti()&&t.callbackNode!==r)return null;var n=gd(t,t===dr?pr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||s)s=Pd(t,n);else{s=n;var a=vs;vs|=2;var l=_j();(dr!==t||pr!==s)&&(qn=null,ci=er()+500,ol(t,s));do try{w_();break}catch(o){Sj(t,o)}while(!0);nf(),Md.current=l,vs=a,rr!==null?s=0:(dr=null,pr=0,s=ir)}if(s!==0){if(s===2&&(a=Sh(t),a!==0&&(n=a,s=Jh(t,a))),s===1)throw r=$o,ol(t,0),va(t,n),Kr(t,er()),r;if(s===6)va(t,n);else{if(a=t.current.alternate,!(n&30)&&!j_(a)&&(s=Pd(t,n),s===2&&(l=Sh(t),l!==0&&(n=l,s=Jh(t,l))),s===1))throw r=$o,ol(t,0),va(t,n),Kr(t,er()),r;switch(t.finishedWork=a,t.finishedLanes=n,s){case 0:case 1:throw Error(yt(345));case 2:Ka(t,Br,qn);break;case 3:if(va(t,n),(n&130023424)===n&&(s=vf+500-er(),10<s)){if(gd(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){Mr(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Mh(Ka.bind(null,t,Br,qn),s);break}Ka(t,Br,qn);break;case 4:if(va(t,n),(n&4194240)===n)break;for(s=t.eventTimes,a=-1;0<n;){var i=31-_n(n);l=1<<i,i=s[i],i>a&&(a=i),n&=~l}if(n=a,n=er()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*v_(n/1960))-n,10<n){t.timeoutHandle=Mh(Ka.bind(null,t,Br,qn),n);break}Ka(t,Br,qn);break;case 5:Ka(t,Br,qn);break;default:throw Error(yt(329))}}}return Kr(t,er()),t.callbackNode===r?wj.bind(null,t):null}function Jh(t,s){var r=xo;return t.current.memoizedState.isDehydrated&&(ol(t,s).flags|=256),t=Pd(t,s),t!==2&&(s=Br,Br=r,s!==null&&Xh(s)),t}function Xh(t){Br===null?Br=t:Br.push.apply(Br,t)}function j_(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],l=a.getSnapshot;a=a.value;try{if(!kn(l(),a))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function va(t,s){for(s&=~bf,s&=~xu,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-_n(s),n=1<<r;t[r]=-1,s&=~n}}function yg(t){if(vs&6)throw Error(yt(327));ti();var s=gd(t,0);if(!(s&1))return Kr(t,er()),null;var r=Pd(t,s);if(t.tag!==0&&r===2){var n=Sh(t);n!==0&&(s=n,r=Jh(t,n))}if(r===1)throw r=$o,ol(t,0),va(t,s),Kr(t,er()),r;if(r===6)throw Error(yt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Ka(t,Br,qn),Kr(t,er()),null}function jf(t,s){var r=vs;vs|=1;try{return t(s)}finally{vs=r,vs===0&&(ci=er()+500,mu&&Ha())}}function yl(t){wa!==null&&wa.tag===0&&!(vs&6)&&ti();var s=vs;vs|=1;var r=xn.transition,n=_s;try{if(xn.transition=null,_s=1,t)return t()}finally{_s=n,xn.transition=r,vs=s,!(vs&6)&&Ha()}}function Nf(){Zr=ql.current,Os(ql)}function ol(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,ZS(r)),rr!==null)for(r=rr.return;r!==null;){var n=r;switch(tf(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Nd();break;case 3:ii(),Os(Wr),Os(Ar),uf();break;case 5:df(n);break;case 4:ii();break;case 13:Os(Ws);break;case 19:Os(Ws);break;case 10:af(n.type._context);break;case 22:case 23:Nf()}r=r.return}if(dr=t,rr=t=Ra(t.current,null),pr=Zr=s,ir=0,$o=null,bf=xu=gl=0,Br=xo=null,sl!==null){for(s=0;s<sl.length;s++)if(r=sl[s],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,l=r.pending;if(l!==null){var i=l.next;l.next=a,n.next=i}r.pending=n}sl=null}return t}function Sj(t,s){do{var r=rr;try{if(nf(),qc.current=Td,Dd){for(var n=Ks.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Dd=!1}if(xl=0,cr=lr=Ks=null,po=!1,Ro=0,yf.current=null,r===null||r.return===null){ir=1,$o=s,rr=null;break}e:{var l=t,i=r.return,o=r,c=s;if(s=pr,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=o,u=m.tag;if(!(m.mode&1)&&(u===0||u===11||u===15)){var p=m.alternate;p?(m.updateQueue=p.updateQueue,m.memoizedState=p.memoizedState,m.lanes=p.lanes):(m.updateQueue=null,m.memoizedState=null)}var g=ag(i);if(g!==null){g.flags&=-257,lg(g,i,o,l,s),g.mode&1&&ng(l,d,s),s=g,c=d;var j=s.updateQueue;if(j===null){var y=new Set;y.add(c),s.updateQueue=y}else j.add(c);break e}else{if(!(s&1)){ng(l,d,s),wf();break e}c=Error(yt(426))}}else if(Hs&&o.mode&1){var v=ag(i);if(v!==null){!(v.flags&65536)&&(v.flags|=256),lg(v,i,o,l,s),sf(oi(c,o));break e}}l=c=oi(c,o),ir!==4&&(ir=2),xo===null?xo=[l]:xo.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var h=ij(l,c,s);Jx(l,h);break e;case 1:o=c;var f=l.type,N=l.stateNode;if(!(l.flags&128)&&(typeof f.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(La===null||!La.has(N)))){l.flags|=65536,s&=-s,l.lanes|=s;var b=oj(l,o,s);Jx(l,b);break e}}l=l.return}while(l!==null)}kj(r)}catch(w){s=w,rr===r&&r!==null&&(rr=r=r.return);continue}break}while(!0)}function _j(){var t=Md.current;return Md.current=Td,t===null?Td:t}function wf(){(ir===0||ir===3||ir===2)&&(ir=4),dr===null||!(gl&268435455)&&!(xu&268435455)||va(dr,pr)}function Pd(t,s){var r=vs;vs|=2;var n=_j();(dr!==t||pr!==s)&&(qn=null,ol(t,s));do try{N_();break}catch(a){Sj(t,a)}while(!0);if(nf(),vs=r,Md.current=n,rr!==null)throw Error(yt(261));return dr=null,pr=0,ir}function N_(){for(;rr!==null;)Ej(rr)}function w_(){for(;rr!==null&&!Vw();)Ej(rr)}function Ej(t){var s=Aj(t.alternate,t,Zr);t.memoizedProps=t.pendingProps,s===null?kj(t):rr=s,yf.current=null}function kj(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=x_(r,s),r!==null){r.flags&=32767,rr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ir=6,rr=null;return}}else if(r=f_(r,s,Zr),r!==null){rr=r;return}if(s=s.sibling,s!==null){rr=s;return}rr=s=t}while(s!==null);ir===0&&(ir=5)}function Ka(t,s,r){var n=_s,a=xn.transition;try{xn.transition=null,_s=1,S_(t,s,r,n)}finally{xn.transition=a,_s=n}return null}function S_(t,s,r,n){do ti();while(wa!==null);if(vs&6)throw Error(yt(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(yt(177));t.callbackNode=null,t.callbackPriority=0;var l=r.lanes|r.childLanes;if(nS(t,l),t===dr&&(rr=dr=null,pr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ec||(Ec=!0,Dj(xd,function(){return ti(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=xn.transition,xn.transition=null;var i=_s;_s=1;var o=vs;vs|=4,yf.current=null,y_(t,r),jj(r,t),WS(Dh),yd=!!Ah,Dh=Ah=null,t.current=r,b_(r),Gw(),vs=o,_s=i,xn.transition=l}else t.current=r;if(Ec&&(Ec=!1,wa=t,Ld=a),l=t.pendingLanes,l===0&&(La=null),Jw(r.stateNode),Kr(t,er()),s!==null)for(n=t.onRecoverableError,r=0;r<s.length;r++)a=s[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Id)throw Id=!1,t=Qh,Qh=null,t;return Ld&1&&t.tag!==0&&ti(),l=t.pendingLanes,l&1?t===Zh?go++:(go=0,Zh=t):go=0,Ha(),null}function ti(){if(wa!==null){var t=iv(Ld),s=xn.transition,r=_s;try{if(xn.transition=null,_s=16>t?16:t,wa===null)var n=!1;else{if(t=wa,wa=null,Ld=0,vs&6)throw Error(yt(331));var a=vs;for(vs|=4,Lt=t.current;Lt!==null;){var l=Lt,i=l.child;if(Lt.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Lt=d;Lt!==null;){var m=Lt;switch(m.tag){case 0:case 11:case 15:fo(8,m,l)}var u=m.child;if(u!==null)u.return=m,Lt=u;else for(;Lt!==null;){m=Lt;var p=m.sibling,g=m.return;if(yj(m),m===d){Lt=null;break}if(p!==null){p.return=g,Lt=p;break}Lt=g}}}var j=l.alternate;if(j!==null){var y=j.child;if(y!==null){j.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}Lt=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,Lt=i;else e:for(;Lt!==null;){if(l=Lt,l.flags&2048)switch(l.tag){case 0:case 11:case 15:fo(9,l,l.return)}var h=l.sibling;if(h!==null){h.return=l.return,Lt=h;break e}Lt=l.return}}var f=t.current;for(Lt=f;Lt!==null;){i=Lt;var N=i.child;if(i.subtreeFlags&2064&&N!==null)N.return=i,Lt=N;else e:for(i=f;Lt!==null;){if(o=Lt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:fu(9,o)}}catch(w){Zs(o,o.return,w)}if(o===i){Lt=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,Lt=b;break e}Lt=o.return}}if(vs=a,Ha(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(iu,t)}catch{}n=!0}return n}finally{_s=r,xn.transition=s}}return!1}function bg(t,s,r){s=oi(r,s),s=ij(t,s,1),t=Ia(t,s,1),s=Mr(),t!==null&&(Zo(t,1,s),Kr(t,s))}function Zs(t,s,r){if(t.tag===3)bg(t,t,r);else for(;s!==null;){if(s.tag===3){bg(s,t,r);break}else if(s.tag===1){var n=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(La===null||!La.has(n))){t=oi(r,t),t=oj(s,t,1),s=Ia(s,t,1),t=Mr(),s!==null&&(Zo(s,1,t),Kr(s,t));break}}s=s.return}}function __(t,s,r){var n=t.pingCache;n!==null&&n.delete(s),s=Mr(),t.pingedLanes|=t.suspendedLanes&r,dr===t&&(pr&r)===r&&(ir===4||ir===3&&(pr&130023424)===pr&&500>er()-vf?ol(t,0):bf|=r),Kr(t,s)}function Cj(t,s){s===0&&(t.mode&1?(s=xc,xc<<=1,!(xc&130023424)&&(xc=4194304)):s=1);var r=Mr();t=sa(t,s),t!==null&&(Zo(t,s,r),Kr(t,r))}function E_(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),Cj(t,r)}function k_(t,s){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(yt(314))}n!==null&&n.delete(s),Cj(t,r)}var Aj;Aj=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||Wr.current)zr=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return zr=!1,p_(t,s,r);zr=!!(t.flags&131072)}else zr=!1,Hs&&s.flags&1048576&&Iv(s,_d,s.index);switch(s.lanes=0,s.tag){case 2:var n=s.type;Gc(t,s),t=s.pendingProps;var a=ni(s,Ar.current);ei(s,r),a=hf(null,s,n,t,a,r);var l=pf();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Yr(n)?(l=!0,wd(s)):l=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,of(s),a.updater=pu,s.stateNode=a,a._reactInternals=s,$h(s,n,t,r),s=Bh(null,s,n,!0,l,r)):(s.tag=0,Hs&&l&&ef(s),Dr(null,s,a,r),s=s.child),s;case 16:n=s.elementType;e:{switch(Gc(t,s),t=s.pendingProps,a=n._init,n=a(n._payload),s.type=n,a=s.tag=A_(n),t=jn(n,t),a){case 0:s=Hh(null,s,n,t,r);break e;case 1:s=cg(null,s,n,t,r);break e;case 11:s=ig(null,s,n,t,r);break e;case 14:s=og(null,s,n,jn(n.type,t),r);break e}throw Error(yt(306,n,""))}return s;case 0:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:jn(n,a),Hh(t,s,n,a,r);case 1:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:jn(n,a),cg(t,s,n,a,r);case 3:e:{if(mj(s),t===null)throw Error(yt(387));n=s.pendingProps,l=s.memoizedState,a=l.element,$v(t,s),Cd(s,n,null,r);var i=s.memoizedState;if(n=i.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){a=oi(Error(yt(423)),s),s=dg(t,s,n,r,a);break e}else if(n!==a){a=oi(Error(yt(424)),s),s=dg(t,s,n,r,a);break e}else for(nn=Ma(s.stateNode.containerInfo.firstChild),an=s,Hs=!0,wn=null,r=Ov(s,null,n,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ai(),n===a){s=ra(t,s,r);break e}Dr(t,s,n,r)}s=s.child}return s;case 5:return Uv(s),t===null&&Rh(s),n=s.type,a=s.pendingProps,l=t!==null?t.memoizedProps:null,i=a.children,Th(n,a)?i=null:l!==null&&Th(n,l)&&(s.flags|=32),uj(t,s),Dr(t,s,i,r),s.child;case 6:return t===null&&Rh(s),null;case 13:return hj(t,s,r);case 4:return cf(s,s.stateNode.containerInfo),n=s.pendingProps,t===null?s.child=li(s,null,n,r):Dr(t,s,n,r),s.child;case 11:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:jn(n,a),ig(t,s,n,a,r);case 7:return Dr(t,s,s.pendingProps,r),s.child;case 8:return Dr(t,s,s.pendingProps.children,r),s.child;case 12:return Dr(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(n=s.type._context,a=s.pendingProps,l=s.memoizedProps,i=a.value,Ds(Ed,n._currentValue),n._currentValue=i,l!==null)if(kn(l.value,i)){if(l.children===a.children&&!Wr.current){s=ra(t,s,r);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(l.tag===1){c=Xn(-1,r&-r),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),Oh(l.return,r,s),o.lanes|=r;break}c=c.next}}else if(l.tag===10)i=l.type===s.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(yt(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),Oh(i,r,s),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===s){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}Dr(t,s,a.children,r),s=s.child}return s;case 9:return a=s.type,n=s.pendingProps.children,ei(s,r),a=gn(a),n=n(a),s.flags|=1,Dr(t,s,n,r),s.child;case 14:return n=s.type,a=jn(n,s.pendingProps),a=jn(n.type,a),og(t,s,n,a,r);case 15:return cj(t,s,s.type,s.pendingProps,r);case 17:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:jn(n,a),Gc(t,s),s.tag=1,Yr(n)?(t=!0,wd(s)):t=!1,ei(s,r),lj(s,n,a),$h(s,n,a,r),Bh(null,s,n,!0,t,r);case 19:return pj(t,s,r);case 22:return dj(t,s,r)}throw Error(yt(156,s.tag))};function Dj(t,s){return rv(t,s)}function C_(t,s,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(t,s,r,n){return new C_(t,s,r,n)}function Sf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function A_(t){if(typeof t=="function")return Sf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Bp)return 11;if(t===zp)return 14}return 2}function Ra(t,s){var r=t.alternate;return r===null?(r=fn(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Jc(t,s,r,n,a,l){var i=2;if(n=t,typeof t=="function")Sf(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Ol:return cl(r.children,a,l,s);case Hp:i=8,a|=8;break;case ch:return t=fn(12,r,s,a|2),t.elementType=ch,t.lanes=l,t;case dh:return t=fn(13,r,s,a),t.elementType=dh,t.lanes=l,t;case uh:return t=fn(19,r,s,a),t.elementType=uh,t.lanes=l,t;case Ub:return gu(r,a,l,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Fb:i=10;break e;case $b:i=9;break e;case Bp:i=11;break e;case zp:i=14;break e;case ga:i=16,n=null;break e}throw Error(yt(130,t==null?t:typeof t,""))}return s=fn(i,r,s,a),s.elementType=t,s.type=n,s.lanes=l,s}function cl(t,s,r,n){return t=fn(7,t,n,s),t.lanes=r,t}function gu(t,s,r,n){return t=fn(22,t,n,s),t.elementType=Ub,t.lanes=r,t.stateNode={isHidden:!1},t}function Nm(t,s,r){return t=fn(6,t,null,s),t.lanes=r,t}function wm(t,s,r){return s=fn(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function D_(t,s,r,n,a){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rm(0),this.expirationTimes=rm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rm(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function _f(t,s,r,n,a,l,i,o,c){return t=new D_(t,s,r,o,c),s===1?(s=1,l===!0&&(s|=8)):s=0,l=fn(3,null,null,s),t.current=l,l.stateNode=t,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},of(l),t}function T_(t,s,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rl,key:n==null?null:""+n,children:t,containerInfo:s,implementation:r}}function Tj(t){if(!t)return Fa;t=t._reactInternals;e:{if(Nl(t)!==t||t.tag!==1)throw Error(yt(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Yr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(yt(171))}if(t.tag===1){var r=t.type;if(Yr(r))return Tv(t,r,s)}return s}function Mj(t,s,r,n,a,l,i,o,c){return t=_f(r,n,!0,t,a,l,i,o,c),t.context=Tj(null),r=t.current,n=Mr(),a=Pa(r),l=Xn(n,a),l.callback=s??null,Ia(r,l,a),t.current.lanes=a,Zo(t,a,n),Kr(t,n),t}function yu(t,s,r,n){var a=s.current,l=Mr(),i=Pa(a);return r=Tj(r),s.context===null?s.context=r:s.pendingContext=r,s=Xn(l,i),s.payload={element:t},n=n===void 0?null:n,n!==null&&(s.callback=n),t=Ia(a,s,i),t!==null&&(En(t,a,i,l),Kc(t,a,i)),i}function Rd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vg(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function Ef(t,s){vg(t,s),(t=t.alternate)&&vg(t,s)}function M_(){return null}var Ij=typeof reportError=="function"?reportError:function(t){console.error(t)};function kf(t){this._internalRoot=t}bu.prototype.render=kf.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(yt(409));yu(t,s,null,null)};bu.prototype.unmount=kf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;yl(function(){yu(null,t,null,null)}),s[ta]=null}};function bu(t){this._internalRoot=t}bu.prototype.unstable_scheduleHydration=function(t){if(t){var s=dv();t={blockedOn:null,target:t,priority:s};for(var r=0;r<ba.length&&s!==0&&s<ba[r].priority;r++);ba.splice(r,0,t),r===0&&mv(t)}};function Cf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jg(){}function I_(t,s,r,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var d=Rd(i);l.call(d)}}var i=Mj(s,n,t,0,null,!1,!1,"",jg);return t._reactRootContainer=i,t[ta]=i.current,To(t.nodeType===8?t.parentNode:t),yl(),i}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var d=Rd(c);o.call(d)}}var c=_f(t,0,!1,null,null,!1,!1,"",jg);return t._reactRootContainer=c,t[ta]=c.current,To(t.nodeType===8?t.parentNode:t),yl(function(){yu(s,c,r,n)}),c}function ju(t,s,r,n,a){var l=r._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var o=a;a=function(){var c=Rd(i);o.call(c)}}yu(s,i,t,a)}else i=I_(r,s,t,a,n);return Rd(i)}ov=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=Xi(s.pendingLanes);r!==0&&(Kp(s,r|1),Kr(s,er()),!(vs&6)&&(ci=er()+500,Ha()))}break;case 13:yl(function(){var n=sa(t,1);if(n!==null){var a=Mr();En(n,t,1,a)}}),Ef(t,1)}};qp=function(t){if(t.tag===13){var s=sa(t,134217728);if(s!==null){var r=Mr();En(s,t,134217728,r)}Ef(t,134217728)}};cv=function(t){if(t.tag===13){var s=Pa(t),r=sa(t,s);if(r!==null){var n=Mr();En(r,t,s,n)}Ef(t,s)}};dv=function(){return _s};uv=function(t,s){var r=_s;try{return _s=t,s()}finally{_s=r}};jh=function(t,s,r){switch(s){case"input":if(ph(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var n=r[s];if(n!==t&&n.form===t.form){var a=uu(n);if(!a)throw Error(yt(90));Bb(n),ph(n,a)}}}break;case"textarea":Wb(t,r);break;case"select":s=r.value,s!=null&&Ql(t,!!r.multiple,s,!1)}};Zb=jf;Jb=yl;var L_={usingClientEntryPoint:!1,Events:[Xo,Hl,uu,Gb,Qb,jf]},Ui={findFiberByHostInstance:tl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},P_={bundleType:Ui.bundleType,version:Ui.version,rendererPackageName:Ui.rendererPackageName,rendererConfig:Ui.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:la.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tv(t),t===null?null:t.stateNode},findFiberByHostInstance:Ui.findFiberByHostInstance||M_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kc.isDisabled&&kc.supportsFiber)try{iu=kc.inject(P_),Bn=kc}catch{}}cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L_;cn.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cf(s))throw Error(yt(200));return T_(t,s,null,r)};cn.createRoot=function(t,s){if(!Cf(t))throw Error(yt(299));var r=!1,n="",a=Ij;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=_f(t,1,!1,null,null,r,!1,n,a),t[ta]=s.current,To(t.nodeType===8?t.parentNode:t),new kf(s)};cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(yt(188)):(t=Object.keys(t).join(","),Error(yt(268,t)));return t=tv(s),t=t===null?null:t.stateNode,t};cn.flushSync=function(t){return yl(t)};cn.hydrate=function(t,s,r){if(!vu(s))throw Error(yt(200));return ju(null,t,s,!0,r)};cn.hydrateRoot=function(t,s,r){if(!Cf(t))throw Error(yt(405));var n=r!=null&&r.hydratedSources||null,a=!1,l="",i=Ij;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),s=Mj(s,null,t,1,r??null,a,!1,l,i),t[ta]=s.current,To(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,a]:s.mutableSourceEagerHydrationData.push(r,a);return new bu(s)};cn.render=function(t,s,r){if(!vu(s))throw Error(yt(200));return ju(null,t,s,!1,r)};cn.unmountComponentAtNode=function(t){if(!vu(t))throw Error(yt(40));return t._reactRootContainer?(yl(function(){ju(null,null,t,!1,function(){t._reactRootContainer=null,t[ta]=null})}),!0):!1};cn.unstable_batchedUpdates=jf;cn.unstable_renderSubtreeIntoContainer=function(t,s,r,n){if(!vu(r))throw Error(yt(200));if(t==null||t._reactInternals===void 0)throw Error(yt(38));return ju(t,s,r,!1,n)};cn.version="18.3.1-next-f1338f8080-20240426";function Lj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lj)}catch(t){console.error(t)}}Lj(),Lb.exports=cn;var Pj=Lb.exports,Ng=Pj;ih.createRoot=Ng.createRoot,ih.hydrateRoot=Ng.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uo(){return Uo=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Uo.apply(this,arguments)}var Sa;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Sa||(Sa={}));const wg="popstate";function R_(t){t===void 0&&(t={});function s(n,a){let{pathname:l,search:i,hash:o}=n.location;return ep("",{pathname:l,search:i,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Oj(a)}return F_(s,r,null,t)}function nr(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Rj(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function O_(){return Math.random().toString(36).substr(2,8)}function Sg(t,s){return{usr:t.state,key:t.key,idx:s}}function ep(t,s,r,n){return r===void 0&&(r=null),Uo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?bi(s):s,{state:r,key:s&&s.key||n||O_()})}function Oj(t){let{pathname:s="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function bi(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(s.search=t.substr(n),t=t.substr(0,n)),t&&(s.pathname=t)}return s}function F_(t,s,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:l=!1}=n,i=a.history,o=Sa.Pop,c=null,d=m();d==null&&(d=0,i.replaceState(Uo({},i.state,{idx:d}),""));function m(){return(i.state||{idx:null}).idx}function u(){o=Sa.Pop;let v=m(),h=v==null?null:v-d;d=v,c&&c({action:o,location:y.location,delta:h})}function p(v,h){o=Sa.Push;let f=ep(y.location,v,h);d=m()+1;let N=Sg(f,d),b=y.createHref(f);try{i.pushState(N,"",b)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;a.location.assign(b)}l&&c&&c({action:o,location:y.location,delta:1})}function g(v,h){o=Sa.Replace;let f=ep(y.location,v,h);d=m();let N=Sg(f,d),b=y.createHref(f);i.replaceState(N,"",b),l&&c&&c({action:o,location:y.location,delta:0})}function j(v){let h=a.location.origin!=="null"?a.location.origin:a.location.href,f=typeof v=="string"?v:Oj(v);return f=f.replace(/ $/,"%20"),nr(h,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,h)}let y={get action(){return o},get location(){return t(a,i)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(wg,u),c=v,()=>{a.removeEventListener(wg,u),c=null}},createHref(v){return s(a,v)},createURL:j,encodeLocation(v){let h=j(v);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:p,replace:g,go(v){return i.go(v)}};return y}var _g;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(_g||(_g={}));function $_(t,s,r){return r===void 0&&(r="/"),U_(t,s,r)}function U_(t,s,r,n){let a=typeof s=="string"?bi(s):s,l=Uj(a.pathname||"/",r);if(l==null)return null;let i=Fj(t);H_(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let d=X_(l);o=Q_(i[c],d)}return o}function Fj(t,s,r,n){s===void 0&&(s=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(l,i,o)=>{let c={relativePath:o===void 0?l.path||"":o,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};c.relativePath.startsWith("/")&&(nr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=dl([n,c.relativePath]),m=r.concat(c);l.children&&l.children.length>0&&(nr(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Fj(l.children,s,m,d)),!(l.path==null&&!l.index)&&s.push({path:d,score:V_(d,l.index),routesMeta:m})};return t.forEach((l,i)=>{var o;if(l.path===""||!((o=l.path)!=null&&o.includes("?")))a(l,i);else for(let c of $j(l.path))a(l,i,c)}),s}function $j(t){let s=t.split("/");if(s.length===0)return[];let[r,...n]=s,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let i=$j(n.join("/")),o=[];return o.push(...i.map(c=>c===""?l:[l,c].join("/"))),a&&o.push(...i),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function H_(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:G_(s.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const B_=/^:[\w-]+$/,z_=3,W_=2,Y_=1,K_=10,q_=-2,Eg=t=>t==="*";function V_(t,s){let r=t.split("/"),n=r.length;return r.some(Eg)&&(n+=q_),s&&(n+=W_),r.filter(a=>!Eg(a)).reduce((a,l)=>a+(B_.test(l)?z_:l===""?Y_:K_),n)}function G_(t,s){return t.length===s.length&&t.slice(0,-1).every((n,a)=>n===s[a])?t[t.length-1]-s[s.length-1]:0}function Q_(t,s,r){let{routesMeta:n}=t,a={},l="/",i=[];for(let o=0;o<n.length;++o){let c=n[o],d=o===n.length-1,m=l==="/"?s:s.slice(l.length)||"/",u=Z_({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},m),p=c.route;if(!u)return null;Object.assign(a,u.params),i.push({params:a,pathname:dl([l,u.pathname]),pathnameBase:rE(dl([l,u.pathnameBase])),route:p}),u.pathnameBase!=="/"&&(l=dl([l,u.pathnameBase]))}return i}function Z_(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=J_(t.path,t.caseSensitive,t.end),a=s.match(r);if(!a)return null;let l=a[0],i=l.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((d,m,u)=>{let{paramName:p,isOptional:g}=m;if(p==="*"){let y=o[u]||"";i=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const j=o[u];return g&&!j?d[p]=void 0:d[p]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:i,pattern:t}}function J_(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),Rj(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),n]}function X_(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Rj(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function Uj(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function eE(t,s){s===void 0&&(s="/");let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?bi(t):t;return{pathname:r?r.startsWith("/")?r:tE(r,s):s,search:nE(n),hash:aE(a)}}function tE(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Sm(t,s,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sE(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function Hj(t,s){let r=sE(t);return s?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Bj(t,s,r,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=bi(t):(a=Uo({},t),nr(!a.pathname||!a.pathname.includes("?"),Sm("?","pathname","search",a)),nr(!a.pathname||!a.pathname.includes("#"),Sm("#","pathname","hash",a)),nr(!a.search||!a.search.includes("#"),Sm("#","search","hash",a)));let l=t===""||a.pathname==="",i=l?"/":a.pathname,o;if(i==null)o=r;else{let u=s.length-1;if(!n&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),u-=1;a.pathname=p.join("/")}o=u>=0?s[u]:"/"}let c=eE(a,o),d=i&&i!=="/"&&i.endsWith("/"),m=(l||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}const dl=t=>t.join("/").replace(/\/\/+/g,"/"),rE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),nE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,aE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function lE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const zj=["post","put","patch","delete"];new Set(zj);const iE=["get",...zj];new Set(iE);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ho(){return Ho=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ho.apply(this,arguments)}const Af=x.createContext(null),oE=x.createContext(null),tc=x.createContext(null),Nu=x.createContext(null),Ba=x.createContext({outlet:null,matches:[],isDataRoute:!1}),Wj=x.createContext(null);function sc(){return x.useContext(Nu)!=null}function wu(){return sc()||nr(!1),x.useContext(Nu).location}function Yj(t){x.useContext(tc).static||x.useLayoutEffect(t)}function ia(){let{isDataRoute:t}=x.useContext(Ba);return t?jE():cE()}function cE(){sc()||nr(!1);let t=x.useContext(Af),{basename:s,future:r,navigator:n}=x.useContext(tc),{matches:a}=x.useContext(Ba),{pathname:l}=wu(),i=JSON.stringify(Hj(a,r.v7_relativeSplatPath)),o=x.useRef(!1);return Yj(()=>{o.current=!0}),x.useCallback(function(d,m){if(m===void 0&&(m={}),!o.current)return;if(typeof d=="number"){n.go(d);return}let u=Bj(d,JSON.parse(i),l,m.relative==="path");t==null&&s!=="/"&&(u.pathname=u.pathname==="/"?s:dl([s,u.pathname])),(m.replace?n.replace:n.push)(u,m.state,m)},[s,n,i,l,t])}function Kj(){let{matches:t}=x.useContext(Ba),s=t[t.length-1];return s?s.params:{}}function dE(t,s){return uE(t,s)}function uE(t,s,r,n){sc()||nr(!1);let{navigator:a}=x.useContext(tc),{matches:l}=x.useContext(Ba),i=l[l.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=wu(),m;if(s){var u;let v=typeof s=="string"?bi(s):s;c==="/"||(u=v.pathname)!=null&&u.startsWith(c)||nr(!1),m=v}else m=d;let p=m.pathname||"/",g=p;if(c!=="/"){let v=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let j=$_(t,{pathname:g}),y=xE(j&&j.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:dl([c,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:dl([c,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),l,r,n);return s&&y?x.createElement(Nu.Provider,{value:{location:Ho({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Sa.Pop}},y):y}function mE(){let t=vE(),s=lE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},s),r?x.createElement("pre",{style:a},r):null,null)}const hE=x.createElement(mE,null);class pE extends x.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?x.createElement(Ba.Provider,{value:this.props.routeContext},x.createElement(Wj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fE(t){let{routeContext:s,match:r,children:n}=t,a=x.useContext(Af);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),x.createElement(Ba.Provider,{value:s},n)}function xE(t,s,r,n){var a;if(s===void 0&&(s=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var l;if(!r)return null;if(r.errors)t=r.matches;else if((l=n)!=null&&l.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,o=(a=r)==null?void 0:a.errors;if(o!=null){let m=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);m>=0||nr(!1),i=i.slice(0,Math.min(i.length,m+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let m=0;m<i.length;m++){let u=i[m];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(d=m),u.route.id){let{loaderData:p,errors:g}=r,j=u.route.loader&&p[u.route.id]===void 0&&(!g||g[u.route.id]===void 0);if(u.route.lazy||j){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((m,u,p)=>{let g,j=!1,y=null,v=null;r&&(g=o&&u.route.id?o[u.route.id]:void 0,y=u.route.errorElement||hE,c&&(d<0&&p===0?(NE("route-fallback"),j=!0,v=null):d===p&&(j=!0,v=u.route.hydrateFallbackElement||null)));let h=s.concat(i.slice(0,p+1)),f=()=>{let N;return g?N=y:j?N=v:u.route.Component?N=x.createElement(u.route.Component,null):u.route.element?N=u.route.element:N=m,x.createElement(fE,{match:u,routeContext:{outlet:m,matches:h,isDataRoute:r!=null},children:N})};return r&&(u.route.ErrorBoundary||u.route.errorElement||p===0)?x.createElement(pE,{location:r.location,revalidation:r.revalidation,component:y,error:g,children:f(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):f()},null)}var qj=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(qj||{}),Vj=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Vj||{});function gE(t){let s=x.useContext(Af);return s||nr(!1),s}function yE(t){let s=x.useContext(oE);return s||nr(!1),s}function bE(t){let s=x.useContext(Ba);return s||nr(!1),s}function Gj(t){let s=bE(),r=s.matches[s.matches.length-1];return r.route.id||nr(!1),r.route.id}function vE(){var t;let s=x.useContext(Wj),r=yE(),n=Gj();return s!==void 0?s:(t=r.errors)==null?void 0:t[n]}function jE(){let{router:t}=gE(qj.UseNavigateStable),s=Gj(Vj.UseNavigateStable),r=x.useRef(!1);return Yj(()=>{r.current=!0}),x.useCallback(function(a,l){l===void 0&&(l={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Ho({fromRouteId:s},l)))},[t,s])}const kg={};function NE(t,s,r){kg[t]||(kg[t]=!0)}function wE(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Qa(t){let{to:s,replace:r,state:n,relative:a}=t;sc()||nr(!1);let{future:l,static:i}=x.useContext(tc),{matches:o}=x.useContext(Ba),{pathname:c}=wu(),d=ia(),m=Bj(s,Hj(o,l.v7_relativeSplatPath),c,a==="path"),u=JSON.stringify(m);return x.useEffect(()=>d(JSON.parse(u),{replace:r,state:n,relative:a}),[d,u,a,r,n]),null}function pa(t){nr(!1)}function SE(t){let{basename:s="/",children:r=null,location:n,navigationType:a=Sa.Pop,navigator:l,static:i=!1,future:o}=t;sc()&&nr(!1);let c=s.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:c,navigator:l,static:i,future:Ho({v7_relativeSplatPath:!1},o)}),[c,o,l,i]);typeof n=="string"&&(n=bi(n));let{pathname:m="/",search:u="",hash:p="",state:g=null,key:j="default"}=n,y=x.useMemo(()=>{let v=Uj(m,c);return v==null?null:{location:{pathname:v,search:u,hash:p,state:g,key:j},navigationType:a}},[c,m,u,p,g,j,a]);return y==null?null:x.createElement(tc.Provider,{value:d},x.createElement(Nu.Provider,{children:r,value:y}))}function _E(t){let{children:s,location:r}=t;return dE(tp(s),r)}new Promise(()=>{});function tp(t,s){s===void 0&&(s=[]);let r=[];return x.Children.forEach(t,(n,a)=>{if(!x.isValidElement(n))return;let l=[...s,a];if(n.type===x.Fragment){r.push.apply(r,tp(n.props.children,l));return}n.type!==pa&&nr(!1),!n.props.index||!n.props.children||nr(!1);let i={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=tp(n.props.children,l)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sp(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((s,r)=>{let n=t[r];return s.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function EE(t,s){let r=sp(t);return s&&s.forEach((n,a)=>{r.has(a)||s.getAll(a).forEach(l=>{r.append(a,l)})}),r}const kE="6";try{window.__reactRouterVersion=kE}catch{}const CE="startTransition",Cg=_w[CE];function AE(t){let{basename:s,children:r,future:n,window:a}=t,l=x.useRef();l.current==null&&(l.current=R_({window:a,v5Compat:!0}));let i=l.current,[o,c]=x.useState({action:i.action,location:i.location}),{v7_startTransition:d}=n||{},m=x.useCallback(u=>{d&&Cg?Cg(()=>c(u)):c(u)},[c,d]);return x.useLayoutEffect(()=>i.listen(m),[i,m]),x.useEffect(()=>wE(n),[n]),x.createElement(SE,{basename:s,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}var Ag;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ag||(Ag={}));var Dg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Dg||(Dg={}));function DE(t){let s=x.useRef(sp(t)),r=x.useRef(!1),n=wu(),a=x.useMemo(()=>EE(n.search,r.current?null:s.current),[n.search]),l=ia(),i=x.useCallback((o,c)=>{const d=sp(typeof o=="function"?o(a):o);r.current=!0,l("?"+d,c)},[l,a]);return[a,i]}function Qj(t,s){return function(){return t.apply(s,arguments)}}const{toString:TE}=Object.prototype,{getPrototypeOf:Df}=Object,{iterator:Su,toStringTag:Zj}=Symbol,_u=(t=>s=>{const r=TE.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Cn=t=>(t=t.toLowerCase(),s=>_u(s)===t),Eu=t=>s=>typeof s===t,{isArray:vi}=Array,Bo=Eu("undefined");function rc(t){return t!==null&&!Bo(t)&&t.constructor!==null&&!Bo(t.constructor)&&qr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Jj=Cn("ArrayBuffer");function ME(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&Jj(t.buffer),s}const IE=Eu("string"),qr=Eu("function"),Xj=Eu("number"),nc=t=>t!==null&&typeof t=="object",LE=t=>t===!0||t===!1,Xc=t=>{if(_u(t)!=="object")return!1;const s=Df(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Zj in t)&&!(Su in t)},PE=t=>{if(!nc(t)||rc(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},RE=Cn("Date"),OE=Cn("File"),FE=Cn("Blob"),$E=Cn("FileList"),UE=t=>nc(t)&&qr(t.pipe),HE=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||qr(t.append)&&((s=_u(t))==="formdata"||s==="object"&&qr(t.toString)&&t.toString()==="[object FormData]"))},BE=Cn("URLSearchParams"),[zE,WE,YE,KE]=["ReadableStream","Request","Response","Headers"].map(Cn),qE=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ac(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,a;if(typeof t!="object"&&(t=[t]),vi(t))for(n=0,a=t.length;n<a;n++)s.call(null,t[n],n,t);else{if(rc(t))return;const l=r?Object.getOwnPropertyNames(t):Object.keys(t),i=l.length;let o;for(n=0;n<i;n++)o=l[n],s.call(null,t[o],o,t)}}function eN(t,s){if(rc(t))return null;s=s.toLowerCase();const r=Object.keys(t);let n=r.length,a;for(;n-- >0;)if(a=r[n],s===a.toLowerCase())return a;return null}const nl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,tN=t=>!Bo(t)&&t!==nl;function rp(){const{caseless:t}=tN(this)&&this||{},s={},r=(n,a)=>{const l=t&&eN(s,a)||a;Xc(s[l])&&Xc(n)?s[l]=rp(s[l],n):Xc(n)?s[l]=rp({},n):vi(n)?s[l]=n.slice():s[l]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&ac(arguments[n],r);return s}const VE=(t,s,r,{allOwnKeys:n}={})=>(ac(s,(a,l)=>{r&&qr(a)?t[l]=Qj(a,r):t[l]=a},{allOwnKeys:n}),t),GE=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),QE=(t,s,r,n)=>{t.prototype=Object.create(s.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},ZE=(t,s,r,n)=>{let a,l,i;const o={};if(s=s||{},t==null)return s;do{for(a=Object.getOwnPropertyNames(t),l=a.length;l-- >0;)i=a[l],(!n||n(i,t,s))&&!o[i]&&(s[i]=t[i],o[i]=!0);t=r!==!1&&Df(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},JE=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const n=t.indexOf(s,r);return n!==-1&&n===r},XE=t=>{if(!t)return null;if(vi(t))return t;let s=t.length;if(!Xj(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},ek=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&Df(Uint8Array)),tk=(t,s)=>{const n=(t&&t[Su]).call(t);let a;for(;(a=n.next())&&!a.done;){const l=a.value;s.call(t,l[0],l[1])}},sk=(t,s)=>{let r;const n=[];for(;(r=t.exec(s))!==null;)n.push(r);return n},rk=Cn("HTMLFormElement"),nk=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),Tg=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),ak=Cn("RegExp"),sN=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),n={};ac(r,(a,l)=>{let i;(i=s(a,l,t))!==!1&&(n[l]=i||a)}),Object.defineProperties(t,n)},lk=t=>{sN(t,(s,r)=>{if(qr(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(qr(n)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},ik=(t,s)=>{const r={},n=a=>{a.forEach(l=>{r[l]=!0})};return vi(t)?n(t):n(String(t).split(s)),r},ok=()=>{},ck=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function dk(t){return!!(t&&qr(t.append)&&t[Zj]==="FormData"&&t[Su])}const uk=t=>{const s=new Array(10),r=(n,a)=>{if(nc(n)){if(s.indexOf(n)>=0)return;if(rc(n))return n;if(!("toJSON"in n)){s[a]=n;const l=vi(n)?[]:{};return ac(n,(i,o)=>{const c=r(i,a+1);!Bo(c)&&(l[o]=c)}),s[a]=void 0,l}}return n};return r(t,0)},mk=Cn("AsyncFunction"),hk=t=>t&&(nc(t)||qr(t))&&qr(t.then)&&qr(t.catch),rN=((t,s)=>t?setImmediate:s?((r,n)=>(nl.addEventListener("message",({source:a,data:l})=>{a===nl&&l===r&&n.length&&n.shift()()},!1),a=>{n.push(a),nl.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",qr(nl.postMessage)),pk=typeof queueMicrotask<"u"?queueMicrotask.bind(nl):typeof process<"u"&&process.nextTick||rN,fk=t=>t!=null&&qr(t[Su]),at={isArray:vi,isArrayBuffer:Jj,isBuffer:rc,isFormData:HE,isArrayBufferView:ME,isString:IE,isNumber:Xj,isBoolean:LE,isObject:nc,isPlainObject:Xc,isEmptyObject:PE,isReadableStream:zE,isRequest:WE,isResponse:YE,isHeaders:KE,isUndefined:Bo,isDate:RE,isFile:OE,isBlob:FE,isRegExp:ak,isFunction:qr,isStream:UE,isURLSearchParams:BE,isTypedArray:ek,isFileList:$E,forEach:ac,merge:rp,extend:VE,trim:qE,stripBOM:GE,inherits:QE,toFlatObject:ZE,kindOf:_u,kindOfTest:Cn,endsWith:JE,toArray:XE,forEachEntry:tk,matchAll:sk,isHTMLForm:rk,hasOwnProperty:Tg,hasOwnProp:Tg,reduceDescriptors:sN,freezeMethods:lk,toObjectSet:ik,toCamelCase:nk,noop:ok,toFiniteNumber:ck,findKey:eN,global:nl,isContextDefined:tN,isSpecCompliantForm:dk,toJSONObject:uk,isAsyncFn:mk,isThenable:hk,setImmediate:rN,asap:pk,isIterable:fk};function ls(t,s,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}at.inherits(ls,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:at.toJSONObject(this.config),code:this.code,status:this.status}}});const nN=ls.prototype,aN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{aN[t]={value:t}});Object.defineProperties(ls,aN);Object.defineProperty(nN,"isAxiosError",{value:!0});ls.from=(t,s,r,n,a,l)=>{const i=Object.create(nN);return at.toFlatObject(t,i,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),ls.call(i,t.message,s,r,n,a),i.cause=t,i.name=t.name,l&&Object.assign(i,l),i};const xk=null;function np(t){return at.isPlainObject(t)||at.isArray(t)}function lN(t){return at.endsWith(t,"[]")?t.slice(0,-2):t}function Mg(t,s,r){return t?t.concat(s).map(function(a,l){return a=lN(a),!r&&l?"["+a+"]":a}).join(r?".":""):s}function gk(t){return at.isArray(t)&&!t.some(np)}const yk=at.toFlatObject(at,{},null,function(s){return/^is[A-Z]/.test(s)});function ku(t,s,r){if(!at.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=at.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,v){return!at.isUndefined(v[y])});const n=r.metaTokens,a=r.visitor||m,l=r.dots,i=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&at.isSpecCompliantForm(s);if(!at.isFunction(a))throw new TypeError("visitor must be a function");function d(j){if(j===null)return"";if(at.isDate(j))return j.toISOString();if(at.isBoolean(j))return j.toString();if(!c&&at.isBlob(j))throw new ls("Blob is not supported. Use a Buffer instead.");return at.isArrayBuffer(j)||at.isTypedArray(j)?c&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function m(j,y,v){let h=j;if(j&&!v&&typeof j=="object"){if(at.endsWith(y,"{}"))y=n?y:y.slice(0,-2),j=JSON.stringify(j);else if(at.isArray(j)&&gk(j)||(at.isFileList(j)||at.endsWith(y,"[]"))&&(h=at.toArray(j)))return y=lN(y),h.forEach(function(N,b){!(at.isUndefined(N)||N===null)&&s.append(i===!0?Mg([y],b,l):i===null?y:y+"[]",d(N))}),!1}return np(j)?!0:(s.append(Mg(v,y,l),d(j)),!1)}const u=[],p=Object.assign(yk,{defaultVisitor:m,convertValue:d,isVisitable:np});function g(j,y){if(!at.isUndefined(j)){if(u.indexOf(j)!==-1)throw Error("Circular reference detected in "+y.join("."));u.push(j),at.forEach(j,function(h,f){(!(at.isUndefined(h)||h===null)&&a.call(s,h,at.isString(f)?f.trim():f,y,p))===!0&&g(h,y?y.concat(f):[f])}),u.pop()}}if(!at.isObject(t))throw new TypeError("data must be an object");return g(t),s}function Ig(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return s[n]})}function Tf(t,s){this._pairs=[],t&&ku(t,this,s)}const iN=Tf.prototype;iN.append=function(s,r){this._pairs.push([s,r])};iN.toString=function(s){const r=s?function(n){return s.call(this,n,Ig)}:Ig;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function bk(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function oN(t,s,r){if(!s)return t;const n=r&&r.encode||bk;at.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let l;if(a?l=a(s,r):l=at.isURLSearchParams(s)?s.toString():new Tf(s,r).toString(n),l){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class Lg{constructor(){this.handlers=[]}use(s,r,n){return this.handlers.push({fulfilled:s,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){at.forEach(this.handlers,function(n){n!==null&&s(n)})}}const cN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vk=typeof URLSearchParams<"u"?URLSearchParams:Tf,jk=typeof FormData<"u"?FormData:null,Nk=typeof Blob<"u"?Blob:null,wk={isBrowser:!0,classes:{URLSearchParams:vk,FormData:jk,Blob:Nk},protocols:["http","https","file","blob","url","data"]},Mf=typeof window<"u"&&typeof document<"u",ap=typeof navigator=="object"&&navigator||void 0,Sk=Mf&&(!ap||["ReactNative","NativeScript","NS"].indexOf(ap.product)<0),_k=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ek=Mf&&window.location.href||"http://localhost",kk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Mf,hasStandardBrowserEnv:Sk,hasStandardBrowserWebWorkerEnv:_k,navigator:ap,origin:Ek},Symbol.toStringTag,{value:"Module"})),kr={...kk,...wk};function Ck(t,s){return ku(t,new kr.classes.URLSearchParams,{visitor:function(r,n,a,l){return kr.isNode&&at.isBuffer(r)?(this.append(n,r.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...s})}function Ak(t){return at.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function Dk(t){const s={},r=Object.keys(t);let n;const a=r.length;let l;for(n=0;n<a;n++)l=r[n],s[l]=t[l];return s}function dN(t){function s(r,n,a,l){let i=r[l++];if(i==="__proto__")return!0;const o=Number.isFinite(+i),c=l>=r.length;return i=!i&&at.isArray(a)?a.length:i,c?(at.hasOwnProp(a,i)?a[i]=[a[i],n]:a[i]=n,!o):((!a[i]||!at.isObject(a[i]))&&(a[i]=[]),s(r,n,a[i],l)&&at.isArray(a[i])&&(a[i]=Dk(a[i])),!o)}if(at.isFormData(t)&&at.isFunction(t.entries)){const r={};return at.forEachEntry(t,(n,a)=>{s(Ak(n),a,r,0)}),r}return null}function Tk(t,s,r){if(at.isString(t))try{return(s||JSON.parse)(t),at.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const lc={transitional:cN,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,l=at.isObject(s);if(l&&at.isHTMLForm(s)&&(s=new FormData(s)),at.isFormData(s))return a?JSON.stringify(dN(s)):s;if(at.isArrayBuffer(s)||at.isBuffer(s)||at.isStream(s)||at.isFile(s)||at.isBlob(s)||at.isReadableStream(s))return s;if(at.isArrayBufferView(s))return s.buffer;if(at.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let o;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Ck(s,this.formSerializer).toString();if((o=at.isFileList(s))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return ku(o?{"files[]":s}:s,c&&new c,this.formSerializer)}}return l||a?(r.setContentType("application/json",!1),Tk(s)):s}],transformResponse:[function(s){const r=this.transitional||lc.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(at.isResponse(s)||at.isReadableStream(s))return s;if(s&&at.isString(s)&&(n&&!this.responseType||a)){const i=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(s)}catch(o){if(i)throw o.name==="SyntaxError"?ls.from(o,ls.ERR_BAD_RESPONSE,this,null,this.response):o}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:kr.classes.FormData,Blob:kr.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};at.forEach(["delete","get","head","post","put","patch"],t=>{lc.headers[t]={}});const Mk=at.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ik=t=>{const s={};let r,n,a;return t&&t.split(`
`).forEach(function(i){a=i.indexOf(":"),r=i.substring(0,a).trim().toLowerCase(),n=i.substring(a+1).trim(),!(!r||s[r]&&Mk[r])&&(r==="set-cookie"?s[r]?s[r].push(n):s[r]=[n]:s[r]=s[r]?s[r]+", "+n:n)}),s},Pg=Symbol("internals");function Hi(t){return t&&String(t).trim().toLowerCase()}function ed(t){return t===!1||t==null?t:at.isArray(t)?t.map(ed):String(t)}function Lk(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)s[n[1]]=n[2];return s}const Pk=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function _m(t,s,r,n,a){if(at.isFunction(n))return n.call(this,s,r);if(a&&(s=r),!!at.isString(s)){if(at.isString(n))return s.indexOf(n)!==-1;if(at.isRegExp(n))return n.test(s)}}function Rk(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,n)=>r.toUpperCase()+n)}function Ok(t,s){const r=at.toCamelCase(" "+s);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(a,l,i){return this[n].call(this,s,a,l,i)},configurable:!0})})}let Vr=class{constructor(s){s&&this.set(s)}set(s,r,n){const a=this;function l(o,c,d){const m=Hi(c);if(!m)throw new Error("header name must be a non-empty string");const u=at.findKey(a,m);(!u||a[u]===void 0||d===!0||d===void 0&&a[u]!==!1)&&(a[u||c]=ed(o))}const i=(o,c)=>at.forEach(o,(d,m)=>l(d,m,c));if(at.isPlainObject(s)||s instanceof this.constructor)i(s,r);else if(at.isString(s)&&(s=s.trim())&&!Pk(s))i(Ik(s),r);else if(at.isObject(s)&&at.isIterable(s)){let o={},c,d;for(const m of s){if(!at.isArray(m))throw TypeError("Object iterator must return a key-value pair");o[d=m[0]]=(c=o[d])?at.isArray(c)?[...c,m[1]]:[c,m[1]]:m[1]}i(o,r)}else s!=null&&l(r,s,n);return this}get(s,r){if(s=Hi(s),s){const n=at.findKey(this,s);if(n){const a=this[n];if(!r)return a;if(r===!0)return Lk(a);if(at.isFunction(r))return r.call(this,a,n);if(at.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=Hi(s),s){const n=at.findKey(this,s);return!!(n&&this[n]!==void 0&&(!r||_m(this,this[n],n,r)))}return!1}delete(s,r){const n=this;let a=!1;function l(i){if(i=Hi(i),i){const o=at.findKey(n,i);o&&(!r||_m(n,n[o],o,r))&&(delete n[o],a=!0)}}return at.isArray(s)?s.forEach(l):l(s),a}clear(s){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const l=r[n];(!s||_m(this,this[l],l,s,!0))&&(delete this[l],a=!0)}return a}normalize(s){const r=this,n={};return at.forEach(this,(a,l)=>{const i=at.findKey(n,l);if(i){r[i]=ed(a),delete r[l];return}const o=s?Rk(l):String(l).trim();o!==l&&delete r[l],r[o]=ed(a),n[o]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return at.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=s&&at.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const n=new this(s);return r.forEach(a=>n.set(a)),n}static accessor(s){const n=(this[Pg]=this[Pg]={accessors:{}}).accessors,a=this.prototype;function l(i){const o=Hi(i);n[o]||(Ok(a,i),n[o]=!0)}return at.isArray(s)?s.forEach(l):l(s),this}};Vr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);at.reduceDescriptors(Vr.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(n){this[r]=n}}});at.freezeMethods(Vr);function Em(t,s){const r=this||lc,n=s||r,a=Vr.from(n.headers);let l=n.data;return at.forEach(t,function(o){l=o.call(r,l,a.normalize(),s?s.status:void 0)}),a.normalize(),l}function uN(t){return!!(t&&t.__CANCEL__)}function ji(t,s,r){ls.call(this,t??"canceled",ls.ERR_CANCELED,s,r),this.name="CanceledError"}at.inherits(ji,ls,{__CANCEL__:!0});function mN(t,s,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):s(new ls("Request failed with status code "+r.status,[ls.ERR_BAD_REQUEST,ls.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Fk(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function $k(t,s){t=t||10;const r=new Array(t),n=new Array(t);let a=0,l=0,i;return s=s!==void 0?s:1e3,function(c){const d=Date.now(),m=n[l];i||(i=d),r[a]=c,n[a]=d;let u=l,p=0;for(;u!==a;)p+=r[u++],u=u%t;if(a=(a+1)%t,a===l&&(l=(l+1)%t),d-i<s)return;const g=m&&d-m;return g?Math.round(p*1e3/g):void 0}}function Uk(t,s){let r=0,n=1e3/s,a,l;const i=(d,m=Date.now())=>{r=m,a=null,l&&(clearTimeout(l),l=null),t(...d)};return[(...d)=>{const m=Date.now(),u=m-r;u>=n?i(d,m):(a=d,l||(l=setTimeout(()=>{l=null,i(a)},n-u)))},()=>a&&i(a)]}const Od=(t,s,r=3)=>{let n=0;const a=$k(50,250);return Uk(l=>{const i=l.loaded,o=l.lengthComputable?l.total:void 0,c=i-n,d=a(c),m=i<=o;n=i;const u={loaded:i,total:o,progress:o?i/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&m?(o-i)/d:void 0,event:l,lengthComputable:o!=null,[s?"download":"upload"]:!0};t(u)},r)},Rg=(t,s)=>{const r=t!=null;return[n=>s[0]({lengthComputable:r,total:t,loaded:n}),s[1]]},Og=t=>(...s)=>at.asap(()=>t(...s)),Hk=kr.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,kr.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(kr.origin),kr.navigator&&/(msie|trident)/i.test(kr.navigator.userAgent)):()=>!0,Bk=kr.hasStandardBrowserEnv?{write(t,s,r,n,a,l){const i=[t+"="+encodeURIComponent(s)];at.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),at.isString(n)&&i.push("path="+n),at.isString(a)&&i.push("domain="+a),l===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function zk(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Wk(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function hN(t,s,r){let n=!zk(s);return t&&(n||r==!1)?Wk(t,s):s}const Fg=t=>t instanceof Vr?{...t}:t;function bl(t,s){s=s||{};const r={};function n(d,m,u,p){return at.isPlainObject(d)&&at.isPlainObject(m)?at.merge.call({caseless:p},d,m):at.isPlainObject(m)?at.merge({},m):at.isArray(m)?m.slice():m}function a(d,m,u,p){if(at.isUndefined(m)){if(!at.isUndefined(d))return n(void 0,d,u,p)}else return n(d,m,u,p)}function l(d,m){if(!at.isUndefined(m))return n(void 0,m)}function i(d,m){if(at.isUndefined(m)){if(!at.isUndefined(d))return n(void 0,d)}else return n(void 0,m)}function o(d,m,u){if(u in s)return n(d,m);if(u in t)return n(void 0,d)}const c={url:l,method:l,data:l,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(d,m,u)=>a(Fg(d),Fg(m),u,!0)};return at.forEach(Object.keys({...t,...s}),function(m){const u=c[m]||a,p=u(t[m],s[m],m);at.isUndefined(p)&&u!==o||(r[m]=p)}),r}const pN=t=>{const s=bl({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:l,headers:i,auth:o}=s;s.headers=i=Vr.from(i),s.url=oN(hN(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let c;if(at.isFormData(r)){if(kr.hasStandardBrowserEnv||kr.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((c=i.getContentType())!==!1){const[d,...m]=c?c.split(";").map(u=>u.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...m].join("; "))}}if(kr.hasStandardBrowserEnv&&(n&&at.isFunction(n)&&(n=n(s)),n||n!==!1&&Hk(s.url))){const d=a&&l&&Bk.read(l);d&&i.set(a,d)}return s},Yk=typeof XMLHttpRequest<"u",Kk=Yk&&function(t){return new Promise(function(r,n){const a=pN(t);let l=a.data;const i=Vr.from(a.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=a,m,u,p,g,j;function y(){g&&g(),j&&j(),a.cancelToken&&a.cancelToken.unsubscribe(m),a.signal&&a.signal.removeEventListener("abort",m)}let v=new XMLHttpRequest;v.open(a.method.toUpperCase(),a.url,!0),v.timeout=a.timeout;function h(){if(!v)return;const N=Vr.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),w={data:!o||o==="text"||o==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:N,config:t,request:v};mN(function(S){r(S),y()},function(S){n(S),y()},w),v=null}"onloadend"in v?v.onloadend=h:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(h)},v.onabort=function(){v&&(n(new ls("Request aborted",ls.ECONNABORTED,t,v)),v=null)},v.onerror=function(){n(new ls("Network Error",ls.ERR_NETWORK,t,v)),v=null},v.ontimeout=function(){let b=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const w=a.transitional||cN;a.timeoutErrorMessage&&(b=a.timeoutErrorMessage),n(new ls(b,w.clarifyTimeoutError?ls.ETIMEDOUT:ls.ECONNABORTED,t,v)),v=null},l===void 0&&i.setContentType(null),"setRequestHeader"in v&&at.forEach(i.toJSON(),function(b,w){v.setRequestHeader(w,b)}),at.isUndefined(a.withCredentials)||(v.withCredentials=!!a.withCredentials),o&&o!=="json"&&(v.responseType=a.responseType),d&&([p,j]=Od(d,!0),v.addEventListener("progress",p)),c&&v.upload&&([u,g]=Od(c),v.upload.addEventListener("progress",u),v.upload.addEventListener("loadend",g)),(a.cancelToken||a.signal)&&(m=N=>{v&&(n(!N||N.type?new ji(null,t,v):N),v.abort(),v=null)},a.cancelToken&&a.cancelToken.subscribe(m),a.signal&&(a.signal.aborted?m():a.signal.addEventListener("abort",m)));const f=Fk(a.url);if(f&&kr.protocols.indexOf(f)===-1){n(new ls("Unsupported protocol "+f+":",ls.ERR_BAD_REQUEST,t));return}v.send(l||null)})},qk=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let n=new AbortController,a;const l=function(d){if(!a){a=!0,o();const m=d instanceof Error?d:this.reason;n.abort(m instanceof ls?m:new ji(m instanceof Error?m.message:m))}};let i=s&&setTimeout(()=>{i=null,l(new ls(`timeout ${s} of ms exceeded`,ls.ETIMEDOUT))},s);const o=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(l):d.removeEventListener("abort",l)}),t=null)};t.forEach(d=>d.addEventListener("abort",l));const{signal:c}=n;return c.unsubscribe=()=>at.asap(o),c}},Vk=function*(t,s){let r=t.byteLength;if(r<s){yield t;return}let n=0,a;for(;n<r;)a=n+s,yield t.slice(n,a),n=a},Gk=async function*(t,s){for await(const r of Qk(t))yield*Vk(r,s)},Qk=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:r,value:n}=await s.read();if(r)break;yield n}}finally{await s.cancel()}},$g=(t,s,r,n)=>{const a=Gk(t,s);let l=0,i,o=c=>{i||(i=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:m}=await a.next();if(d){o(),c.close();return}let u=m.byteLength;if(r){let p=l+=u;r(p)}c.enqueue(new Uint8Array(m))}catch(d){throw o(d),d}},cancel(c){return o(c),a.return()}},{highWaterMark:2})},Cu=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",fN=Cu&&typeof ReadableStream=="function",Zk=Cu&&(typeof TextEncoder=="function"?(t=>s=>t.encode(s))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),xN=(t,...s)=>{try{return!!t(...s)}catch{return!1}},Jk=fN&&xN(()=>{let t=!1;const s=new Request(kr.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!s}),Ug=64*1024,lp=fN&&xN(()=>at.isReadableStream(new Response("").body)),Fd={stream:lp&&(t=>t.body)};Cu&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(s=>{!Fd[s]&&(Fd[s]=at.isFunction(t[s])?r=>r[s]():(r,n)=>{throw new ls(`Response type '${s}' is not supported`,ls.ERR_NOT_SUPPORT,n)})})})(new Response);const Xk=async t=>{if(t==null)return 0;if(at.isBlob(t))return t.size;if(at.isSpecCompliantForm(t))return(await new Request(kr.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(at.isArrayBufferView(t)||at.isArrayBuffer(t))return t.byteLength;if(at.isURLSearchParams(t)&&(t=t+""),at.isString(t))return(await Zk(t)).byteLength},eC=async(t,s)=>{const r=at.toFiniteNumber(t.getContentLength());return r??Xk(s)},tC=Cu&&(async t=>{let{url:s,method:r,data:n,signal:a,cancelToken:l,timeout:i,onDownloadProgress:o,onUploadProgress:c,responseType:d,headers:m,withCredentials:u="same-origin",fetchOptions:p}=pN(t);d=d?(d+"").toLowerCase():"text";let g=qk([a,l&&l.toAbortSignal()],i),j;const y=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let v;try{if(c&&Jk&&r!=="get"&&r!=="head"&&(v=await eC(m,n))!==0){let w=new Request(s,{method:"POST",body:n,duplex:"half"}),D;if(at.isFormData(n)&&(D=w.headers.get("content-type"))&&m.setContentType(D),w.body){const[S,C]=Rg(v,Od(Og(c)));n=$g(w.body,Ug,S,C)}}at.isString(u)||(u=u?"include":"omit");const h="credentials"in Request.prototype;j=new Request(s,{...p,signal:g,method:r.toUpperCase(),headers:m.normalize().toJSON(),body:n,duplex:"half",credentials:h?u:void 0});let f=await fetch(j,p);const N=lp&&(d==="stream"||d==="response");if(lp&&(o||N&&y)){const w={};["status","statusText","headers"].forEach(T=>{w[T]=f[T]});const D=at.toFiniteNumber(f.headers.get("content-length")),[S,C]=o&&Rg(D,Od(Og(o),!0))||[];f=new Response($g(f.body,Ug,S,()=>{C&&C(),y&&y()}),w)}d=d||"text";let b=await Fd[at.findKey(Fd,d)||"text"](f,t);return!N&&y&&y(),await new Promise((w,D)=>{mN(w,D,{data:b,headers:Vr.from(f.headers),status:f.status,statusText:f.statusText,config:t,request:j})})}catch(h){throw y&&y(),h&&h.name==="TypeError"&&/Load failed|fetch/i.test(h.message)?Object.assign(new ls("Network Error",ls.ERR_NETWORK,t,j),{cause:h.cause||h}):ls.from(h,h&&h.code,t,j)}}),ip={http:xk,xhr:Kk,fetch:tC};at.forEach(ip,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Hg=t=>`- ${t}`,sC=t=>at.isFunction(t)||t===null||t===!1,gN={getAdapter:t=>{t=at.isArray(t)?t:[t];const{length:s}=t;let r,n;const a={};for(let l=0;l<s;l++){r=t[l];let i;if(n=r,!sC(r)&&(n=ip[(i=String(r)).toLowerCase()],n===void 0))throw new ls(`Unknown adapter '${i}'`);if(n)break;a[i||"#"+l]=n}if(!n){const l=Object.entries(a).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=s?l.length>1?`since :
`+l.map(Hg).join(`
`):" "+Hg(l[0]):"as no adapter specified";throw new ls("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n},adapters:ip};function km(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ji(null,t)}function Bg(t){return km(t),t.headers=Vr.from(t.headers),t.data=Em.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),gN.getAdapter(t.adapter||lc.adapter)(t).then(function(n){return km(t),n.data=Em.call(t,t.transformResponse,n),n.headers=Vr.from(n.headers),n},function(n){return uN(n)||(km(t),n&&n.response&&(n.response.data=Em.call(t,t.transformResponse,n.response),n.response.headers=Vr.from(n.response.headers))),Promise.reject(n)})}const yN="1.11.0",Au={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Au[t]=function(n){return typeof n===t||"a"+(s<1?"n ":" ")+t}});const zg={};Au.transitional=function(s,r,n){function a(l,i){return"[Axios v"+yN+"] Transitional option '"+l+"'"+i+(n?". "+n:"")}return(l,i,o)=>{if(s===!1)throw new ls(a(i," has been removed"+(r?" in "+r:"")),ls.ERR_DEPRECATED);return r&&!zg[i]&&(zg[i]=!0,console.warn(a(i," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(l,i,o):!0}};Au.spelling=function(s){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${s}`),!0)};function rC(t,s,r){if(typeof t!="object")throw new ls("options must be an object",ls.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let a=n.length;for(;a-- >0;){const l=n[a],i=s[l];if(i){const o=t[l],c=o===void 0||i(o,l,t);if(c!==!0)throw new ls("option "+l+" must be "+c,ls.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ls("Unknown option "+l,ls.ERR_BAD_OPTION)}}const td={assertOptions:rC,validators:Au},Tn=td.validators;let ul=class{constructor(s){this.defaults=s||{},this.interceptors={request:new Lg,response:new Lg}}async request(s,r){try{return await this._request(s,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=bl(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:l}=r;n!==void 0&&td.assertOptions(n,{silentJSONParsing:Tn.transitional(Tn.boolean),forcedJSONParsing:Tn.transitional(Tn.boolean),clarifyTimeoutError:Tn.transitional(Tn.boolean)},!1),a!=null&&(at.isFunction(a)?r.paramsSerializer={serialize:a}:td.assertOptions(a,{encode:Tn.function,serialize:Tn.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),td.assertOptions(r,{baseUrl:Tn.spelling("baseURL"),withXsrfToken:Tn.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=l&&at.merge(l.common,l[r.method]);l&&at.forEach(["delete","get","head","post","put","patch","common"],j=>{delete l[j]}),r.headers=Vr.concat(i,l);const o=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(c=c&&y.synchronous,o.unshift(y.fulfilled,y.rejected))});const d=[];this.interceptors.response.forEach(function(y){d.push(y.fulfilled,y.rejected)});let m,u=0,p;if(!c){const j=[Bg.bind(this),void 0];for(j.unshift(...o),j.push(...d),p=j.length,m=Promise.resolve(r);u<p;)m=m.then(j[u++],j[u++]);return m}p=o.length;let g=r;for(u=0;u<p;){const j=o[u++],y=o[u++];try{g=j(g)}catch(v){y.call(this,v);break}}try{m=Bg.call(this,g)}catch(j){return Promise.reject(j)}for(u=0,p=d.length;u<p;)m=m.then(d[u++],d[u++]);return m}getUri(s){s=bl(this.defaults,s);const r=hN(s.baseURL,s.url,s.allowAbsoluteUrls);return oN(r,s.params,s.paramsSerializer)}};at.forEach(["delete","get","head","options"],function(s){ul.prototype[s]=function(r,n){return this.request(bl(n||{},{method:s,url:r,data:(n||{}).data}))}});at.forEach(["post","put","patch"],function(s){function r(n){return function(l,i,o){return this.request(bl(o||{},{method:s,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:i}))}}ul.prototype[s]=r(),ul.prototype[s+"Form"]=r(!0)});let nC=class bN{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(l){r=l});const n=this;this.promise.then(a=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](a);n._listeners=null}),this.promise.then=a=>{let l;const i=new Promise(o=>{n.subscribe(o),l=o}).then(a);return i.cancel=function(){n.unsubscribe(l)},i},s(function(l,i,o){n.reason||(n.reason=new ji(l,i,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=n=>{s.abort(n)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new bN(function(a){s=a}),cancel:s}}};function aC(t){return function(r){return t.apply(null,r)}}function lC(t){return at.isObject(t)&&t.isAxiosError===!0}const op={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(op).forEach(([t,s])=>{op[s]=t});function vN(t){const s=new ul(t),r=Qj(ul.prototype.request,s);return at.extend(r,ul.prototype,s,{allOwnKeys:!0}),at.extend(r,s,null,{allOwnKeys:!0}),r.create=function(a){return vN(bl(t,a))},r}const tr=vN(lc);tr.Axios=ul;tr.CanceledError=ji;tr.CancelToken=nC;tr.isCancel=uN;tr.VERSION=yN;tr.toFormData=ku;tr.AxiosError=ls;tr.Cancel=tr.CanceledError;tr.all=function(s){return Promise.all(s)};tr.spread=aC;tr.isAxiosError=lC;tr.mergeConfig=bl;tr.AxiosHeaders=Vr;tr.formToJSON=t=>dN(at.isHTMLForm(t)?new FormData(t):t);tr.getAdapter=gN.getAdapter;tr.HttpStatusCode=op;tr.default=tr;const{Axios:Q7,AxiosError:Z7,CanceledError:J7,isCancel:X7,CancelToken:e$,VERSION:t$,all:s$,Cancel:r$,isAxiosError:n$,spread:a$,toFormData:l$,AxiosHeaders:i$,HttpStatusCode:o$,formToJSON:c$,getAdapter:d$,mergeConfig:u$}=tr,iC=()=>"http://192.168.11.17/api",oe=tr.create({baseURL:iC(),timeout:15e3,headers:{"Content-Type":"application/json"}});oe.interceptors.request.use(t=>{const s=localStorage.getItem("authToken");return s?t.headers.Authorization=`Bearer ${s}`:t.url&&!t.url.includes("/company/info")&&!t.url.includes("/auth/login")&&console.warn("API request without token:",t.url),t},t=>Promise.reject(t));oe.interceptors.response.use(t=>t,t=>{var s,r,n,a;if(t.response&&t.response.status===401){console.log("Token expired or unauthorized - redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("authUser"),delete oe.defaults.headers.common.Authorization;const l=window.location.pathname,i=(r=(s=t.config)==null?void 0:s.url)==null?void 0:r.includes("/company/info"),o=(a=(n=t.config)==null?void 0:n.url)==null?void 0:a.includes("/auth/biometric-login"),c=l.includes("/login-bio");l!=="/"&&!i&&!o&&!c&&(window.location.href="/")}return Promise.reject(t)});const jN=x.createContext(null),NN=({children:t})=>{const[s,r]=x.useState(null),[n,a]=x.useState(null),[l,i]=x.useState(!0),o=x.useCallback(async()=>{i(!0);try{const p=localStorage.getItem("authToken"),g=localStorage.getItem("authUser");if(p&&g){const j=JSON.parse(g);j.USERID&&!j.id&&(j.id=j.USERID),a(p),r(j),oe.defaults.headers.common.Authorization=`Bearer ${p}`}else a(null),r(null)}catch(p){console.error("Failed to load auth from storage:",p),localStorage.clear()}finally{i(!1)}},[]);x.useEffect(()=>{o();const p=()=>{console.log(" Auth update event received, reloading auth data..."),o()};return window.addEventListener("authUpdate",p),()=>{window.removeEventListener("authUpdate",p)}},[o]);const c=x.useCallback(async(p,g,j="employee")=>{var y;try{const v=await oe.post("/auth/login",{username:p,password:g,loginMode:j}),{user:h,token:f}=v.data;if(!f)throw new Error("No token received from backend. Login failed.");const N={...h};N.USERID!==void 0&&N.id===void 0&&(N.id=N.USERID),a(f),r(N);try{localStorage.setItem("authToken",f),localStorage.setItem("authUser",JSON.stringify(N)),j==="admin"?localStorage.setItem("authMethod","admin"):localStorage.setItem("authMethod","portal")}catch(b){if(console.error("Error storing to localStorage:",b),b.name==="QuotaExceededError"){const w={...N};delete w.PHOTO,localStorage.setItem("authUser",JSON.stringify(w))}throw b}return oe.defaults.headers.common.Authorization=`Bearer ${f}`,!0}catch(v){throw console.error("Login failed:",((y=v.response)==null?void 0:y.data)||v.message),localStorage.removeItem("authToken"),localStorage.removeItem("authUser"),a(null),r(null),v}},[]),d=x.useCallback(()=>{console.log(" Logging out user - clearing all state data..."),r(null),a(null),localStorage.removeItem("authToken"),localStorage.removeItem("authUser"),localStorage.removeItem("authMethod"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("biometricData"),localStorage.removeItem("fingerprintData"),localStorage.removeItem("userProfile"),localStorage.removeItem("userSession"),localStorage.removeItem("loginData");try{localStorage.removeItem("biometricScanningState"),localStorage.removeItem("fingerprintCaptureState"),localStorage.removeItem("biometricMatchState"),localStorage.removeItem("lastBiometricUser"),localStorage.removeItem("biometricSessionData"),localStorage.removeItem("biometricScore"),localStorage.removeItem("biometricConfidence"),localStorage.removeItem("lastFingerprintData"),localStorage.removeItem("biometricMatchHistory"),window.DigitalPersonaHelper&&console.log(" Biometric reader will be reset on next login attempt")}catch(p){console.warn(" Error clearing biometric states:",p)}delete oe.defaults.headers.common.Authorization,console.log(" Logout completed - all authentication data cleared")},[]),m=x.useCallback(()=>{console.log("Handling unauthorized access - logging out user"),d(),window.location.href="/login"},[d]),u={user:s,token:n,isAuthenticated:!!s&&!!n,loadingAuth:l,login:c,logout:d,handleUnauthorized:m,loadAuthFromStorage:o};return e.jsx(jN.Provider,{value:u,children:t})},Ts=()=>{const t=x.useContext(jN);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},oC=({onAnimationComplete:t})=>{const[s,r]=x.useState({lguDtrName:"DTR Management System",logoPreview:null}),[n,a]=x.useState(!0);return x.useEffect(()=>{(async()=>{var i;try{console.log(" Fetching company info for animation...");const o=await oe.get("/company/info");if(console.log(" Company info response:",o.data),o.data.success){const c=o.data.data;console.log(" Company data:",c),console.log(" Logo preview:",c.logoPreview),r({lguDtrName:c.lguDtrName||"DTR Management System",logoPreview:c.logoPreview}),console.log(" Company data set:",{lguDtrName:c.lguDtrName||"DTR Management System",hasLogo:!!c.logoPreview})}else console.log(" Company info API returned success: false"),r({lguDtrName:"DTR Management System",logoPreview:null})}catch(o){console.error(" Error fetching company info:",o),console.error("Error details:",(i=o.response)==null?void 0:i.data),r({lguDtrName:"DTR Management System",logoPreview:null})}finally{a(!1)}})()},[]),x.useEffect(()=>{if(!n){const l=setTimeout(()=>{t()},3e3);return()=>clearTimeout(l)}},[n,t]),e.jsx("div",{className:"admin-login-animation",children:e.jsxs("div",{className:"animation-container",children:[e.jsx("div",{className:"logo-container",children:s.logoPreview?e.jsx("img",{src:s.logoPreview,alt:`${s.lguDtrName} Logo`,className:"logo-image"}):e.jsx("div",{className:"default-logo",children:e.jsx("svg",{className:"logo-image",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsxs("div",{className:"loading-text",children:["Loading ",s.lguDtrName,"..."]})]})})};function cC(){const[t,s]=x.useState(""),[r,n]=x.useState(""),[a,l]=x.useState(""),[i,o]=x.useState(!1),[c,d]=x.useState(!1),[m,u]=x.useState(!1),[p,g]=x.useState(!1),[j,y]=x.useState(!1),{login:v}=Ts(),h=ia();x.useEffect(()=>{const S=sessionStorage.getItem("adminAccessRequest"),C=sessionStorage.getItem("adminAccessUsername"),_=new URLSearchParams(window.location.search).get("mode");(S==="true"||_==="admin")&&(console.log(" Admin access request detected, switching to admin mode"),d(!0),C&&(s(C),console.log(" Pre-filled admin username:",C)))},[]);const f=()=>{y(!1)},N=async S=>{var C,T,_,E;if(S.preventDefault(),!(i||c)){o(!0),l("");try{const A=t.trim(),L=r.replace(/\D/g,"");if(!A||!L)throw new Error("Please enter your portal username and PIN.");await v(A,L),h("/dtr-checker")}catch(A){(T=(C=A==null?void 0:A.response)==null?void 0:C.data)!=null&&T.message?l(A.response.data.message):((_=A==null?void 0:A.response)==null?void 0:_.status)===403?l("Portal Access is Inactive"):((E=A==null?void 0:A.response)==null?void 0:E.status)===401?l("Invalid Portal Access"):l(A.message||"Login failed")}finally{o(!1)}}},b=async S=>{var C,T,_,E;if(S.preventDefault(),!(i||!c)){o(!0),l(""),g(!1);try{if(!await v(t,r,"admin")){l("Invalid credentials. Please check your username and password.");return}w(),await new Promise(L=>setTimeout(L,3e3)),h("/hris-management")}catch(A){console.error("Admin login error:",A),(T=(C=A==null?void 0:A.response)==null?void 0:C.data)!=null&&T.message?l(A.response.data.message):((_=A==null?void 0:A.response)==null?void 0:_.status)===401?l("Invalid credentials. Please check your username and password."):((E=A==null?void 0:A.response)==null?void 0:E.status)===404?l("Admin user not found. Please check your username."):l((A==null?void 0:A.message)||"Invalid login credentials. Please try again."),g(!1)}finally{o(!1)}}},w=()=>{g(!0)},D=()=>{g(!1)};return p?e.jsx(oC,{onAnimationComplete:D}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:`absolute -top-40 -right-40 w-80 h-80 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse ${c?"bg-purple-500":"bg-green-500"}`}),e.jsx("div",{className:`absolute -bottom-40 -left-40 w-80 h-80 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse ${c?"bg-blue-500":"bg-emerald-500"}`,style:{animationDelay:"2s"}}),e.jsx("div",{className:`absolute top-40 left-1/2 w-80 h-80 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse ${c?"bg-indigo-500":"bg-teal-500"}`,style:{animationDelay:"4s"}})]}),e.jsx("div",{className:"relative z-10 w-full max-w-md",children:e.jsxs("div",{className:`backdrop-blur-lg rounded-3xl shadow-2xl border p-8 transition-all duration-500 ${c?"bg-white/10 border-white/20":"bg-green-500/10 border-green-500/20"}`,children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-20 h-20 rounded-2xl mb-4 transition-all duration-500 ${c?"bg-gradient-to-r from-blue-500 to-purple-600":"bg-gradient-to-r from-green-500 to-emerald-600"}`,children:e.jsx("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Human Resource Information System"}),e.jsx("p",{className:"text-white/70 text-sm",children:c?"Administrator Access":"Portal User Access"})]}),j?e.jsx("div",{className:"space-y-6",children:e.jsx("button",{type:"button",onClick:f,className:"w-full py-3 px-6 bg-white/10 hover:bg-white/20 text-white font-semibold rounded-2xl border border-white/20 hover:border-white/30 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Use Badge Number Instead"]})})}):e.jsxs("form",{onSubmit:c?b:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-white/90 mb-2",children:c?"Admin Username":"Portal Username"}),e.jsx("input",{type:"text",id:"username",value:t,onChange:S=>s(S.target.value),className:`w-full px-4 py-3 bg-white/10 border border-white/20 rounded-2xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:border-transparent transition-all duration-300 ${c?"focus:ring-blue-500":"focus:ring-green-500"}`,placeholder:c?"Enter admin username":"Enter your portal username",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white/90 mb-2",children:c?"Password":"PIN"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m?"text":"password",id:"password",value:r,onChange:S=>{const C=S.target.value;n(c?C:C.replace(/\D/g,""))},className:`w-full px-4 py-3 bg-white/10 border border-white/20 rounded-2xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:border-transparent transition-all duration-300 pr-12 ${c?"focus:ring-blue-500":"focus:ring-green-500"}`,placeholder:c?"Enter your password":"Enter your PIN",required:!0}),e.jsx("button",{type:"button",onClick:()=>u(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/50 hover:text-white transition-colors duration-200",children:m?e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-10.875-6.825a1.5 1.5 0 010-1.5C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 10.875 6.825a1.5 1.5 0 010 1.5z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 11-4.243-4.243m4.242 4.242L9.88 9.88"})})})]})]}),e.jsx("button",{type:"submit",disabled:i,className:`w-full py-4 px-6 text-white font-semibold rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-transparent disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none ${c?"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:ring-blue-500":"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 focus:ring-green-500"}`,children:i?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-3"}),c?"Signing in as Admin...":"Signing in..."]}):c?"Sign in as Admin":"Sign In"}),!c&&e.jsx("button",{type:"button",onClick:()=>h("/login-bio"),className:"w-full py-3 px-6 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-semibold rounded-2xl border border-green-500/20 hover:border-green-400/40 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-transparent",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})}),"Use Fingerprint Login"]})})]}),a&&e.jsx("div",{className:"mt-6 p-4 bg-red-500/20 border border-red-500/30 rounded-2xl backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-200",children:a})})]})}),e.jsxs("div",{className:"mt-8 text-center",children:[e.jsx("p",{className:"text-white/60 text-sm",children:"Secure access to DHRIS"}),e.jsxs("button",{type:"button",onClick:()=>{d(S=>!S),y(!1),l(""),g(!1)},className:"mt-4 inline-flex items-center justify-center gap-2 text-white/70 hover:text-white bg-white/10 hover:bg-white/20 px-4 py-2 rounded-full transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/40","aria-label":c?"Switch to employee portal login":"Switch to admin login",children:[e.jsx("span",{className:"text-sm font-medium",children:c?"Switch to Employee Portal":"Switch to Admin Login"}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7h16M4 12h16M4 17h16"})})]})]})]})})]})}class dC{constructor(){this.initialized=!1,this.deviceConnected=!1,this.deviceList=[],console.log(" DigitalPersonaNativeClient constructor completed")}async initialize(){try{console.log(" Starting DigitalPersona PowerShell Win32 SDK Client initialization...");const s=await oe.get("/auth/digitalpersona-status");if(s.data.success)this.initialized=!0,this.deviceConnected=s.data.deviceConnected,this.deviceList=s.data.devices||[],this.fallbackMode=s.data.fallbackMode||!1,console.log(" DigitalPersona PowerShell Win32 SDK Client initialized:",{initialized:this.initialized,deviceConnected:this.deviceConnected,deviceCount:this.deviceList.length,fallbackMode:this.fallbackMode}),this.fallbackMode&&console.log(" Running in fallback mode - biometric features not available");else throw new Error(s.data.message||"Failed to initialize native SDK");return this.initialized}catch(s){throw console.error(" Failed to initialize DigitalPersona PowerShell Win32 SDK Client:",s),this.initialized=!1,this.deviceConnected=!1,s}}async captureFingerprint(s=3e4){var r,n;try{if(!this.initialized)throw new Error("DigitalPersona not initialized");console.log(" Requesting fingerprint capture from backend...");const a=await oe.post("/auth/capture-fingerprint",{timeout:s});if(a.data.success)return console.log(" Fingerprint captured successfully"),a.data.isSimulated&&(console.log(" Simulated capture response:",a.data.note),a.data.fingerprintData.isSimulated=!0,a.data.fingerprintData.note=a.data.note,a.data.fingerprintData.deviceName=a.data.deviceName),a.data.fingerprintData;throw new Error(a.data.message||"Fingerprint capture failed")}catch(a){if(console.error(" Fingerprint capture failed:",a),(n=(r=a.response)==null?void 0:r.data)!=null&&n.nativeLibraryIssue)return console.log(" Native library issue detected, providing fallback response"),{action:"capture",status:"success",quality:"fallback",deviceName:"DigitalPersona Reader (Fallback)",timestamp:Date.now(),message:"Fallback response due to native library issues",simulatedData:"DP_FALLBACK_FINGERPRINT_DATA_"+Date.now(),note:"This is a fallback response due to native library issues",isFallback:!0};throw a}}async authenticateFingerprint(s){var r,n;try{console.log(" Authenticating fingerprint...");const a=await oe.post("/auth/biometric-login",{fingerprintData:s});return a.data.success?(console.log(" Fingerprint authentication successful"),{success:!0,user:a.data.user,token:a.data.token}):{success:!1,message:a.data.message||"Authentication failed"}}catch(a){return console.error(" Fingerprint authentication failed:",a),{success:!1,message:((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||a.message||"Authentication failed"}}}async getDevices(){try{this.initialized||await this.initialize();const s=await oe.get("/auth/digitalpersona-devices");if(s.data.success)return this.deviceList=s.data.devices||[],this.deviceConnected=this.deviceList.length>0,this.deviceList;throw new Error(s.data.message||"Failed to get devices")}catch(s){return console.error(" Failed to get devices:",s),[]}}isInitialized(){return this.initialized}isDeviceConnected(){return this.deviceConnected}isInFallbackMode(){return this.fallbackMode||!1}getDeviceInfo(){return{initialized:this.initialized,deviceConnected:this.deviceConnected,deviceCount:this.deviceList.length,devices:this.deviceList,fallbackMode:this.fallbackMode}}}const uC=`
  @keyframes readyPulse {
    0%, 100% {
      transform: scale(1);
      box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
    }
    50% {
      transform: scale(1.02);
      box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
    }
  }
  
  @keyframes readyGlow {
    0%, 100% {
      box-shadow: 0 0 5px rgba(59, 130, 246, 0.5);
    }
    50% {
      box-shadow: 0 0 20px rgba(59, 130, 246, 0.8), 0 0 30px rgba(59, 130, 246, 0.6);
    }
  }
  
  @keyframes greenPulse {
    0%, 100% {
      transform: scale(1);
      box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7);
    }
    50% {
      transform: scale(1.02);
      box-shadow: 0 0 0 10px rgba(34, 197, 94, 0);
    }
  }
  
  @keyframes greenGlow {
    0%, 100% {
      box-shadow: 0 0 5px rgba(34, 197, 94, 0.5);
    }
    50% {
      box-shadow: 0 0 20px rgba(34, 197, 94, 0.8), 0 0 30px rgba(34, 197, 94, 0.6);
    }
  }
  
  .ready-button {
    animation: readyPulse 2s infinite, readyGlow 2s infinite;
  }
  
  .green-ready-button {
    animation: greenPulse 2s infinite, greenGlow 2s infinite;
  }
`;function mC(){const t=ia(),[s,r]=x.useState(null),[n,a]=x.useState(""),[l,i]=x.useState(!1),[o,c]=x.useState(!1),[d,m]=x.useState(""),[u,p]=x.useState(""),[g,j]=x.useState(""),[y,v]=x.useState(!1),[h,f]=x.useState([]),[N,b]=x.useState(!0),[w,D]=x.useState(!1),S=x.useRef(!1),[C,T]=x.useState(!1),_=x.useRef(null),E=x.useRef(null),A=async()=>{var V,re;try{if(console.log(" Starting direct biometric authentication (VerifyFingerprint.ps1)..."),P){console.log(" Employee not found popup is active, blocking new scan");return}if(S.current){console.log(" Already processing a scan, ignoring new request");return}S.current=!0,D(!0),m("Starting fingerprint scan..."),p(""),m("Place your finger on the scanner..."),console.log(" Calling direct biometric login endpoint (uses VerifyFingerprint.ps1)..."),console.log(" This will capture fingerprint and verify against database in one operation..."),m(" PLACE YOUR FINGER ON THE SCANNER NOW! (8 seconds to place finger)");const xe=(await oe.post("/auth/biometric-login-direct")).data;if(xe.success&&xe.authenticated){console.log(" Authentication successful:",xe.user),m(` Welcome, ${xe.user.NAME}!`),localStorage.setItem("authToken",xe.token),localStorage.setItem("authUser",JSON.stringify(xe.user)),localStorage.setItem("authMethod","biometric"),oe.defaults.headers.common.Authorization=`Bearer ${xe.token}`,window.dispatchEvent(new CustomEvent("authUpdate"));const me=xe.user.PRIVILEGE||xe.user.privilege||0,ee=me>0?"/hris-management":"/dtr-checker";console.log(` Authentication data stored, user privilege: ${me}, navigating to ${ee}...`),setTimeout(()=>{console.log(` Navigating to ${ee}...`),t(ee)},1500)}else console.log(" Authentication failed:",xe.message),m(" Fingerprint not recognized"),p(xe.message||"Authentication failed - fingerprint not found in database"),W(),console.log(" Keeping scanning state active for retry..."),m(' Fingerprint not recognized - Click "Scan Finger" to try again'),D(!1)}catch(ne){console.error(" Direct biometric authentication failed:",ne);const xe=((re=(V=ne.response)==null?void 0:V.data)==null?void 0:re.message)||ne.message;xe.includes("timeout")||xe.includes("No finger detected")||xe.includes("No fingerprint captured")?(m(" No finger detected"),p("No finger detected on scanner. Please place your finger and try again (press SPACE in simulation mode)."),console.log(" No finger detected - stopping scan, user can retry"),D(!1)):xe.includes("No fingerprint templates found")?(m(" No enrolled fingerprints"),p("No fingerprints enrolled in the system. Please enroll your fingerprint first."),console.log(" Database has no enrolled fingerprints"),D(!1)):xe.includes("not recognized")||xe.includes("not found")?(m(" Fingerprint not recognized"),p("Your fingerprint was not recognized. Please try again or contact administrator."),W(),D(!1)):xe.includes("SDK")||xe.includes("not available")?(m(" SDK not available"),p("DigitalPersona SDK is not available. Please check SDK installation."),j(xe),D(!1)):(m(" Scan failed"),p(xe||"Fingerprint scan failed"),W(),D(!1))}finally{S.current=!1,console.log(" Direct biometric login attempt completed")}},L=()=>{console.log(" Stopping fingerprint scanning..."),D(!1),m("Scan stopped by user"),p(""),S.current=!1,console.log(" Scanning stopped successfully")},F=()=>{B&&(clearInterval(B),U(null)),R(!1),$(0),p(""),m("Ready to scan"),w&&(console.log(" Popup closed, resuming automatic scanning..."),m("Ready to scan - Place finger on scanner..."))},W=()=>{R(!0),$(10);const V=setInterval(()=>{$(re=>re<=1?(clearInterval(V),U(null),R(!1),$(0),p(""),m("Ready to scan"),w&&(console.log(" Popup auto-closed, resuming automatic scanning..."),m("Ready to scan - Place finger on scanner...")),0):re-1)},1e3);U(V)};x.useEffect(()=>(console.log(" LoginBio: Initializing DigitalPersona biometric system..."),(async()=>{try{Y(),console.log(" Initializing DigitalPersona PowerShell Win32 SDK Client..."),_.current=new dC,await _.current.initialize(),console.log(" DigitalPersona PowerShell Win32 SDK Client initialized successfully"),j(""),i(!0),c(!0),setTimeout(()=>{J()},1e3)}catch(re){console.error(" Failed to initialize DigitalPersona Native system:",re),j(`Initialization failed: ${re.message}`),b(!1),i(!1),c(!1)}})(),()=>{q()}),[]);const Y=()=>{r(null),a(""),i(!1),c(!1),m(""),p(""),j(""),v(!1),f([]),b(!0),D(!1)},q=()=>{if(console.log(" Cleaning up DigitalPersona system..."),E.current&&clearTimeout(E.current),window.fingerDetectionResolve&&delete window.fingerDetectionResolve,window.fingerDetectionReject&&delete window.fingerDetectionReject,_.current)try{_.current=null}catch(V){console.error(" Cleanup error:",V)}},J=async()=>{try{if(console.log(" Detecting DigitalPersona devices via PowerShell Win32 SDK..."),b(!0),j("Scanning for devices..."),!_.current)throw new Error("DigitalPersona PowerShell Win32 SDK client not initialized");const V=await _.current.getDevices();console.log(" PowerShell Win32 SDK device detection result:",V);let re=[];if(V&&(Array.isArray(V)?re=V:V.devices&&Array.isArray(V.devices)?re=V.devices:(V.id!==void 0||V.name!==void 0)&&(re=[V])),re.length>0){const ne=re.map((xe,me)=>({id:xe.id||xe.Id||me,name:xe.name||xe.Name||`DigitalPersona Scanner ${me+1}`,type:"digitalPersona",status:"connected",details:`Model: ${xe.model||xe.Model||"Unknown"}`}));console.log(" DigitalPersona devices found:",ne),f(ne),v(!1),b(!1),j(`${ne.length} device(s) detected`),ne.length===1?(console.log(" Auto-selecting single device..."),setTimeout(()=>{O(ne[0])},500)):r({id:"",name:"Please select a device",type:"placeholder"})}else console.log(" No DigitalPersona devices detected"),f([]),v(!1),r({id:"",name:"No device",type:"placeholder"}),b(!1),j("No devices detected - check connection")}catch(V){console.error(" Device detection failed:",V),f([]),v(!1),r({id:"",name:"Device detection failed",type:"placeholder"}),b(!1),j(`Detection failed: ${V.message}`)}},O=async V=>{try{if(console.log(" handleDeviceSelectionWithDevice called with:",V),console.log(" Device ID:",V==null?void 0:V.id),console.log(" Device name:",V==null?void 0:V.name),!V){console.error(" No device provided for selection"),p("Device selection failed: No device provided");return}r(V),a(V.id),v(!1),p(""),j(`Selected device: ${V.name} (${V.id})`),await k(V)}catch(re){console.error(" Device selection failed:",re),p(`Device selection failed: ${re.message}`)}},M=async V=>{try{if(console.log(" handleDeviceSelection called with deviceId:",V),!V){r(null),a("");return}const re=h.find(ne=>String(ne.id)===String(V));if(!re){console.error(" Device not found in availableDevices"),p("Selected device not found");return}console.log(" Device found, calling handleDeviceSelectionWithDevice:",re),await O(re)}catch(re){console.error(" Device selection failed:",re),p(`Device selection failed: ${re.message}`)}},k=async V=>{try{if(console.log(" Initializing DigitalPersona device:",V.name),!_.current)throw new Error("DigitalPersona PowerShell Win32 SDK client not available");_.current.isInitialized()||await _.current.initialize(),i(!0),c(!0),m('Device is ready - Click "Scan Finger" to start '),j(""),console.log(" DigitalPersona device ready for scanning"),console.log(" Current state after initialization:",{isInitialized:!0,readerAvailable:!0,selectedDevice:V,showDeviceSelection:!1})}catch(re){console.error(" Device initialization failed:",re),m("Device initialization failed"),p(`Initialization error: ${re.message}`)}},I=({onClose:V})=>e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-4",children:" DigitalPersona PowerShell Win32 SDK Communication Issue"}),e.jsx("p",{className:"text-gray-700 mb-4",children:"The fingerprint scanner is experiencing communication errors with the PowerShell Win32 SDK."}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Architecture:"})," Web App  Node.js  PowerShell Win32 SDK  DigitalPersona Runtime  Fingerprint Hardware"]})}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Technical Details:"})," PowerShell Win32 SDK communication errors indicate issues with the PowerShell execution or DigitalPersona device drivers."]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:"Quick Fix:"}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-3 font-mono text-sm",children:[e.jsx("div",{className:"text-gray-600",children:"# Restart DigitalPersona services"}),e.jsx("div",{children:"net stop DpHost"}),e.jsx("div",{children:"Start-Sleep -Seconds 3"}),e.jsx("div",{children:"net start DpHost"}),e.jsx("div",{className:"text-gray-600",children:"# Restart the web application"}),e.jsx("div",{children:"Refresh the page or restart the backend server"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:'Or use services.msc to restart "DigitalPersona Authentication Service"'})]}),e.jsxs("div",{className:"flex flex-col space-y-3 mt-6",children:[e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:X,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Reinitialize PowerShell Win32 SDK"}),e.jsx("button",{onClick:Q,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Reset PowerShell Win32 SDK"})]}),e.jsx("button",{onClick:V,className:"w-full bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Close"})]})]})}),[K,z]=x.useState(!1),[P,R]=x.useState(!1),[B,U]=x.useState(null),[G,$]=x.useState(0);x.useEffect(()=>()=>{B&&clearInterval(B)},[B]);const X=async()=>{try{if(z(!1),m("Reinitializing PowerShell Win32 SDK..."),p(""),_.current)await _.current.initialize(),m(" PowerShell Win32 SDK reinitialized successfully"),p(""),setTimeout(()=>{J()},2e3);else throw new Error("DigitalPersona PowerShell Win32 SDK client not available")}catch(V){console.error("PowerShell Win32 SDK reinitialization error:",V),m(" PowerShell Win32 SDK reinitialization failed"),p("Failed to reinitialize PowerShell Win32 SDK. Please try again."),z(!0)}},Q=async()=>{try{if(m("Attempting PowerShell Win32 SDK error recovery..."),p(""),_.current){console.log(" Attempting PowerShell Win32 SDK reinitialization...");try{await _.current.initialize(),console.log(" PowerShell Win32 SDK reinitialization successful"),z(!1),m("Ready to scan - please try again"),p("")}catch(V){console.error(" PowerShell Win32 SDK reinitialization failed:",V),p("Failed to reinitialize PowerShell Win32 SDK. Please restart the application.")}}else throw new Error("DigitalPersona PowerShell Win32 SDK client not available")}catch(V){console.error("PowerShell Win32 SDK recovery error:",V),m(" PowerShell Win32 SDK recovery failed"),p("PowerShell Win32 SDK recovery failed. Please restart the application."),z(!0)}},Ne=()=>{console.log(" Retrying device detection..."),p(""),j("Retrying device detection..."),J()};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center p-4",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:uC}}),K&&e.jsx(I,{onClose:()=>{z(!1),p(""),m("Ready to scan - please try again")}}),P&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 p-8 transform animate-in zoom-in-95 duration-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-6",children:e.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"EMPLOYEE NOT FOUND!"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["The fingerprint you scanned does not match any registered employee in the system.",e.jsx("br",{}),e.jsx("br",{}),"Please contact your administrator to enroll your fingerprint or try scanning again."]}),G>0&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-gray-100 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"This popup will close automatically in:"}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:G})]})}),e.jsxs("button",{onClick:F,className:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:["Try Again (or wait ",G,"s)"]})]})})}),N&&h.length===0&&e.jsx("div",{className:"w-full max-w-md",children:e.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-8 flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"w-24 h-24 text-blue-400 animate-pulse",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-400/30 border-t-blue-400 animate-spin"})]})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"Initializing SDK"}),e.jsx("p",{className:"text-white/70 mb-6",children:"Setting up fingerprint authentication..."}),e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("div",{className:"mt-8 w-full bg-white/10 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-blue-600 rounded-full animate-pulse",style:{width:"60%"}})})]})})}),(!N||h.length>0||s)&&e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 p-8",children:[!y&&s&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[e.jsx("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"Select Fingerprint Scanner"}),N?e.jsxs("div",{className:"flex items-center justify-center py-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),e.jsx("span",{className:"text-white/70 text-sm",children:"Detecting devices..."})]}):e.jsxs("select",{value:n,onChange:V=>M(V.target.value),className:"w-full px-4 py-3 bg-gray-800/80 border border-gray-600/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Choose a fingerprint scanner..."}),h.map(V=>e.jsx("option",{value:V.id,children:V.name},V.id))]}),h.length===0&&!N&&e.jsxs("div",{className:"mt-3 p-3 bg-red-500/20 border border-red-400/30 rounded-lg",children:[e.jsx("p",{className:"text-red-300 text-sm",children:" No fingerprint scanners detected. Please check your device connection."}),e.jsx("button",{onClick:Ne,className:"mt-2 px-3 py-1 bg-white/10 hover:bg-white/20 text-white text-sm rounded transition-all",children:" Retry Detection"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:"Fingerprint Authentication"}),e.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Place your finger on the scanner to authenticate"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${l&&o?"bg-green-400 animate-pulse":l?"bg-yellow-400 animate-pulse":"bg-red-400"}`}),e.jsx("span",{className:`text-sm ${l&&o?"text-green-300":l?"text-yellow-300":"text-red-300"}`,children:l&&o?"Ready to Scan":l?"Initializing...":"Not Ready"})]}),e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsxs("div",{className:`relative transition-all duration-500 ${w?"animate-pulse":""}`,children:[e.jsx("svg",{className:`w-32 h-32 transition-all duration-500 ${w?"text-blue-400 drop-shadow-[0_0_20px_rgba(59,130,246,0.8)]":"text-white/60"}`,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})}),w&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-400/30 animate-ping"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-blue-500/50 animate-pulse"})]})]})}),w?e.jsx("button",{onClick:L,className:"w-full px-6 py-4 text-white font-semibold rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-red-500 bg-red-600 hover:bg-red-700",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),e.jsx("span",{children:"Stop Scanning"})]})}):e.jsx("button",{onClick:A,disabled:!l||!o,className:`w-full px-6 py-4 text-white font-semibold rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 ${l&&o?"bg-blue-600 hover:bg-blue-700 ready-button":"bg-gray-600 cursor-not-allowed opacity-50"}`,children:e.jsx("div",{className:"flex items-center justify-center",children:l&&o?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})}),e.jsx("span",{children:"Scan Finger"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),l?"Initializing...":"Start Fingerprint Scan"]})})})]}),e.jsx("div",{className:"space-y-3",children:e.jsx("button",{onClick:()=>t("/login"),className:"w-full py-2 px-4 bg-white/10 hover:bg-white/20 text-white text-sm rounded-lg border border-white/20 transition-all",children:" Back to Login"})}),d&&e.jsx("div",{className:`text-center px-4 py-3 rounded-lg ${d.includes("")||d.includes("Welcome")?"bg-green-500/20 text-green-300 border border-green-500/30":d.includes("")||d.includes("failed")?"bg-red-500/20 text-red-300 border border-red-500/30":d.includes("Waiting for finger")||d.includes("Detecting finger")?"bg-yellow-500/20 text-yellow-300 border border-yellow-500/30":"bg-blue-500/20 text-blue-300 border border-blue-500/30"}`,children:d}),(d.includes("Waiting for finger")||d.includes("Detecting finger"))&&e.jsxs("div",{className:"text-center px-4 py-3 rounded-lg bg-yellow-500/20 text-yellow-300 border border-yellow-500/30",children:[e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"w-5 h-5 mr-2 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.jsx("span",{className:"animate-pulse",children:"Touch the scanner surface with your finger"})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("p",{className:"text-xs text-yellow-200",children:"DigitalPersona Real SDK - touch the scanner surface"}),e.jsx("p",{className:"text-xs text-yellow-300",children:"Using actual hardware detection with DigitalPersona SDK"}),e.jsx("p",{className:"text-xs text-green-300",children:" Real SDK: Hardware-based finger detection active"})]})]}),g&&e.jsxs("div",{className:"text-xs text-white/60 bg-black/20 p-3 rounded border border-white/10",children:[e.jsx("strong",{children:"Debug:"})," ",g]})]}),u&&e.jsx("div",{className:"mt-4 p-4 bg-red-500/20 border border-red-500/30 rounded-lg",children:e.jsx("div",{className:"text-red-300 text-sm whitespace-pre-line",children:u})})]})})]})}const sr=t=>{if(!t||typeof t!="string")return 0;const[s,r]=t.split(":").map(Number);return s*60+r},wr=t=>{if(!t)return null;if(typeof t=="string"){const s=t.match(/(\d{2}):(\d{2})/);return s?`${s[1]}:${s[2]}`:null}return null},yo=t=>t&&typeof t=="string"?t.slice(0,10):null,cp=t=>{if(!t)return null;const s=String(t).trim(),n=s.split(/[T ]/)[0].match(/^(\d{4})-(\d{2})-(\d{2})$/);if(n)return{year:Number(n[1]),month:Number(n[2]),day:Number(n[3])};const a=new Date(s);return Number.isNaN(a.getTime())?null:{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate()}},hC=({year:t,month:s,day:r})=>new Date(Date.UTC(t,s-1,r)),pC=(t,s)=>{const r=cp(t),n=cp(s);if(!r||!n)return[];const a=Date.UTC(r.year,r.month-1,r.day),l=Date.UTC(n.year,n.month-1,n.day),i=[];for(let o=a;o<=l;o+=864e5){const c=new Date(o),d=c.getUTCFullYear(),m=String(c.getUTCMonth()+1).padStart(2,"0"),u=String(c.getUTCDate()).padStart(2,"0");i.push(`${d}-${m}-${u}`)}return i},wN=t=>{const s=cp(t);if(!s)return!1;const n=hC(s).getUTCDay();return n===0||n===6},Du=async t=>{if(!t)return null;try{const r=(await oe.get(`/employees/${t}/shift-schedule`)).data||{};if(r.shiftSchedule){const n={...r.shiftSchedule,assignedShifts:r.assignedShifts||[]};return r.employeeObjId&&(n.employeeObjId=r.employeeObjId),n}return r&&r.InheritDeptSchClass?{SHIFTNO:r.InheritDeptSchClass,SHIFTNAME:r.SHIFTNAME,SHIFT_AMCHECKIN:r.SHIFT_AMCHECKIN,SHIFT_AMCHECKIN_START:r.SHIFT_AMCHECKIN_START,SHIFT_AMCHECKIN_END:r.SHIFT_AMCHECKIN_END,SHIFT_AMCHECKOUT:r.SHIFT_AMCHECKOUT,SHIFT_AMCHECKOUT_START:r.SHIFT_AMCHECKOUT_START,SHIFT_AMCHECKOUT_END:r.SHIFT_AMCHECKOUT_END,SHIFT_PMCHECKIN:r.SHIFT_PMCHECKIN,SHIFT_PMCHECKIN_START:r.SHIFT_PMCHECKIN_START,SHIFT_PMCHECKIN_END:r.SHIFT_PMCHECKIN_END,SHIFT_PMCHECKOUT:r.SHIFT_PMCHECKOUT,SHIFT_PMCHECKOUT_START:r.SHIFT_PMCHECKOUT_START,SHIFT_PMCHECKOUT_END:r.SHIFT_PMCHECKOUT_END,assignedShifts:[],employeeObjId:r.employeeObjId||null}:null}catch(s){return console.error(" Error fetching employee shift schedule:",s),null}},SN=t=>t==null?"":String(t).trim().toUpperCase(),fC=t=>{if(!t)return"";const s=String(t).trim();if(!s)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(s))return s;const n=s.split(/[ T]/)[0]||"";if(/^\d{4}-\d{2}-\d{2}$/.test(n))return n;const a=n.match(/^(\d{4})-(\d{1,2})-(\d{1,2})$/);if(a){const[,l,i,o]=a;return`${l}-${i.padStart(2,"0")}-${o.padStart(2,"0")}`}return n},xC=t=>{const s=[t==null?void 0:t.emp_objid,t==null?void 0:t.empObjId,t==null?void 0:t.employee_objid,t==null?void 0:t.EMP_OBJID,t==null?void 0:t.employeeObjId];for(const r of s){if(r==null)continue;const n=String(r).trim();if(n)return n}return null},gC=t=>{const s=[t==null?void 0:t.userid,t==null?void 0:t.user_id,t==null?void 0:t.USERID,t==null?void 0:t.userId];for(const r of s){if(r==null)continue;const n=String(r).trim();if(n)return n}return null},yC=(t,s)=>{const r=[t==null?void 0:t.cdono,t==null?void 0:t.CDONO,t==null?void 0:t.cdo_no,t==null?void 0:t.reference,s==null?void 0:s.cdono,s==null?void 0:s.CDONO,s==null?void 0:s.reference_no];for(const n of r){if(n==null)continue;const a=String(n).trim();if(a)return a}return""},bC=t=>{const s=[t==null?void 0:t.employeeName,t==null?void 0:t.employee_name,t==null?void 0:t.EMPLOYEENAME,t==null?void 0:t.name];for(const r of s){if(r==null)continue;const n=String(r).trim();if(n)return n}return""},vC=t=>{const s=[t==null?void 0:t.department,t==null?void 0:t.DEPARTMENT,t==null?void 0:t.office,t==null?void 0:t.OFFICE];for(const r of s){if(r==null)continue;const n=String(r).trim();if(n)return n}return""},jC=t=>{const s=[t==null?void 0:t.position,t==null?void 0:t.POSITION,t==null?void 0:t.jobtitle,t==null?void 0:t.JOBTITLE];for(const r of s){if(r==null)continue;const n=String(r).trim();if(n)return n}return""},Wa=t=>{if(t==null||t==="")return null;const s=Number(t);return Number.isNaN(s)?null:s},NC=(t,s)=>{const r=yC(t,s),n=(t==null?void 0:t.cdotitle)||(t==null?void 0:t.CDOTITLE)||(t==null?void 0:t.title)||"",a=(t==null?void 0:t.cdopurpose)||(t==null?void 0:t.CDOPURPOSE)||(t==null?void 0:t.purpose)||"",l=(t==null?void 0:t.cdodescription)||(t==null?void 0:t.CDODESCRIPTION)||(t==null?void 0:t.description)||"",i=(t==null?void 0:t.cdoremarks)||(t==null?void 0:t.CDOREMARKS)||(t==null?void 0:t.remarks)||"",o=(s==null?void 0:s.reason)||(s==null?void 0:s.cdodateremarks)||(s==null?void 0:s.remarks)||"",c=SN((s==null?void 0:s.cdodatestatus)||(s==null?void 0:s.status)),d=(s==null?void 0:s.id)??(s==null?void 0:s.ID)??null,m=Wa(s==null?void 0:s.usedcredit)??Wa(s==null?void 0:s.cdoused)??Wa(s==null?void 0:s.used_credit),u=Wa(t==null?void 0:t.earnedcredit)??Wa(t==null?void 0:t.earned_credit),p=Wa(t==null?void 0:t.usedcredit)??Wa(t==null?void 0:t.used_credit),g=r||(d?`CDO-${d}`:"CDO");return{date:fC((s==null?void 0:s.cdodate)||(s==null?void 0:s.CDODATE)||(s==null?void 0:s.date)||(s==null?void 0:s.workdate)||(s==null?void 0:s.useDate)),displayRef:g,cdono:r,cdoTitle:n,cdoPurpose:a,cdoDescription:l,cdoRemarks:i,entryReason:o,entryStatus:c,entryId:d,transactionId:(t==null?void 0:t.id)??(t==null?void 0:t.ID)??null,creditsUsed:m,creditsEarned:u,creditsUsedTotal:p,employeeName:bC(t),department:vC(t),position:jC(t),approverName:(s==null?void 0:s.approvedByName)||(s==null?void 0:s.approvedbyname)||"",approverPosition:(s==null?void 0:s.approvedByPosition)||(s==null?void 0:s.approvedbyposition)||"",createdByName:(s==null?void 0:s.createdByName)||(s==null?void 0:s.createdbyname)||"",createdByPosition:(s==null?void 0:s.createdByPosition)||(s==null?void 0:s.createdbyposition)||"",rawEntry:s,rawTransaction:t}},_N=(t,s={})=>{const{startDate:r=null,endDate:n=null,employeeObjId:a=null,userId:l=null}=s,i={};if(!Array.isArray(t)||t.length===0)return i;const o=a!=null?String(a):null,c=l!=null?String(l):null;return t.forEach(d=>{if(!d)return;const m=xC(d),u=gC(d);if(o){if(!m||m!==o)return}else if(c&&(!u||u!==c))return;const p=Array.isArray(d==null?void 0:d.consumeEntries)?d.consumeEntries:[];p.length!==0&&p.forEach(g=>{if(!g||SN((g==null?void 0:g.cdodatestatus)||(g==null?void 0:g.status))!=="APPROVED")return;const y=NC(d,g);y.date&&(r&&y.date<r||n&&y.date>n||(i[y.date]||(i[y.date]=[]),i[y.date].push(y)))})}),Object.keys(i).forEach(d=>{i[d].sort((m,u)=>{const p=m.displayRef||"",g=u.displayRef||"";return p.localeCompare(g)})}),i},EN=(t,s)=>{if(!t||!s)return[];const r=t[s];return Array.isArray(r)?r:[]},Cm=t=>t?t.toLowerCase().split(" ").map(s=>s?s.charAt(0).toUpperCase()+s.slice(1).toLowerCase():"").filter(s=>s.length>0).join(" "):"",bs=(t,s,r=null,n=null)=>{const a=m=>(m||"").trim(),l=Cm(a(t)),i=Cm(a(s)),o=Cm(a(r)),c=a(n);if(!l&&!i)return"";let d="";return l&&i?(d=`${l}, ${i}`,o&&(d+=` ${o}`),c&&(d+=` ${c}`)):d=[l,i,o,c].filter(Boolean).join(" "),d.trim()},to=(t,s="auto")=>{if(!t||typeof t!="string")return"";const r=t.trim();if(!r)return"";const n=r.includes(",");let a="",l="",i="",o="";if(n){const[c,...d]=r.split(",").map(m=>m.trim());if(a=c,d.length>0){const m=d.join(" ").trim().split(/\s+/);l=m[0]||"";const u=(m[m.length-1]||"").toLowerCase();(/^(jr|sr|ii|iii|iv|v|esq|phd|md)$/i.test(u)||/^(jr\.|sr\.|esq\.|phd\.|md\.)$/i.test(u))&&m.length>1?(o=m[m.length-1],i=m.slice(1,-1).join(" ")):i=m.slice(1).join(" ")}}else{const c=r.split(/\s+/).filter(d=>d.length>0);if(s==="FirstLast"||s==="auto"&&c.length>=2){if(l=c[0]||"",c.length===2)a=c[1]||"";else if(c.length>=3){const d=c[c.length-1].toLowerCase();/^(jr|sr|ii|iii|iv|v|esq|phd|md)$/i.test(d)||/^(jr\.|sr\.|esq\.|phd\.|md\.)$/i.test(d)?(o=c[c.length-1],a=c[c.length-2]||"",i=c.slice(1,-2).join(" ")):(a=c[c.length-1]||"",i=c.slice(1,-1).join(" "))}}else if(s==="LastFirst"){if(a=c[0]||"",l=c[1]||"",c.length>2){const d=c[c.length-1].toLowerCase();/^(jr|sr|ii|iii|iv|v|esq|phd|md)$/i.test(d)||/^(jr\.|sr\.|esq\.|phd\.|md\.)$/i.test(d)?(o=c[c.length-1],i=c.slice(2,-1).join(" ")):i=c.slice(2).join(" ")}}else{const d=c[0]||"";d.length<=2&&c.length>=2?(a=d,l=c[1]||"",i=c.slice(2).join(" ")):(l=d,c.length===2?a=c[1]||"":c.length>=3&&(a=c[c.length-1]||"",i=c.slice(1,-1).join(" ")))}}return bs(a,l,i,o)},Ys=t=>{if(!t||typeof t!="object")return"";if(t.surname||t.firstname||t.middlename)return bs(t.surname,t.firstname,t.middlename,t.extension);const s=["employee_name","fullname","name","NAME","employeeName","fullName","FullName"];for(const r of s)if(t[r]&&typeof t[r]=="string")return to(t[r]);return t.lastname||t.firstname?bs(t.lastname||t.lastName||t.LASTNAME,t.firstname||t.firstName||t.FIRSTNAME,t.middlename||t.middleName||t.MIDDLENAME,t.extension||t.EXTENSION):""},Ll=t=>{if(!t)return"";const s=String(t).trim(),n=s.split(/[T ]/)[0].match(/^(\d{4})-(\d{2})-(\d{2})$/);if(n){const[,l,i,o]=n,c=new Date(Date.UTC(Number(l),Number(i)-1,Number(o))),d=String(o).padStart(2,"0"),m=c.toLocaleString("en-US",{month:"short",timeZone:"UTC"}),u=c.getUTCFullYear(),p=c.toLocaleString("en-US",{weekday:"short",timeZone:"UTC"});return`${d}-${m}-${u}, ${p}`}const a=new Date(s);if(!Number.isNaN(a.getTime())){const l=String(a.getUTCDate()).padStart(2,"0"),i=a.toLocaleString("en-US",{month:"short",timeZone:"UTC"}),o=a.getUTCFullYear(),c=a.toLocaleString("en-US",{weekday:"short",timeZone:"UTC"});return`${l}-${i}-${o}, ${c}`}return s},wC=t=>{if(!t)return"";if(/^\d{2}:\d{2}$/.test(t))return t;const s=t.match(/(\d{2}):(\d{2})/);return s?`${s[1]}:${s[2]}`:""},wl=t=>{if(!t)return"";if(typeof t=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(t))return t;if(typeof t=="string"){const s=Date.parse(t);if(!Number.isNaN(s)){const r=new Date(s),n=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),l=String(r.getDate()).padStart(2,"0");return`${n}-${a}-${l}`}return t.split(/[ T]/)[0]}if(t instanceof Date&&!Number.isNaN(t.getTime())){const s=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${s}-${r}-${n}`}return""},Cr=t=>{if(!t)return"";if(typeof t=="string"){const s=t.trim();return/^\d{4}-\d{2}-\d{2}$/.test(s)?s:s.length>=10?s.slice(0,10):s}if(t instanceof Date&&!Number.isNaN(t.getTime())){const s=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${s}-${r}-${n}`}return""},$d=t=>t?{hasAMCheckIn:!!t.SHIFT_AMCHECKIN,hasAMCheckOut:!!t.SHIFT_AMCHECKOUT,hasPMCheckIn:!!t.SHIFT_PMCHECKIN,hasPMCheckOut:!!t.SHIFT_PMCHECKOUT}:{hasAMCheckIn:!1,hasAMCheckOut:!1,hasPMCheckIn:!1,hasPMCheckOut:!1},Vl=t=>{if(!t)return{date:"",time:"",minutes:null};const s=wl(t),r=wC(typeof t=="string"?t:String(t)),n=r?sr(r):null;return{date:s,time:r,minutes:n}},SC=(t,s)=>!Array.isArray(t)||!s?[]:t.filter(r=>(r.locstatus||r.LOCSTATUS||"").toString().toUpperCase()!=="APPROVED"?!1:wl(r.locatordate||r.LOCDATE||r.locdate)===s).map(r=>{const n=r.loctimedeparture||r.locdeparture||r.LOCTIMEDEPARTURE,a=r.loctimearrival||r.locarrival||r.LOCTIMEARRIVAL,l=Vl(n),i=Vl(a);if(l.minutes===null&&i.minutes===null)return null;const o=Math.min(l.minutes??i.minutes??0,i.minutes??l.minutes??0),c=Math.max(l.minutes??i.minutes??0,i.minutes??l.minutes??0);return{raw:r,startMinutes:o,endMinutes:c,departureTime:l.time,arrivalTime:i.time}}).filter(Boolean),_C=(t,s,r)=>{if(!Array.isArray(t)||!s||!r)return t;const n={amCheckIn:r.SHIFT_AMCHECKIN?wr(r.SHIFT_AMCHECKIN):"",amCheckOut:r.SHIFT_AMCHECKOUT?wr(r.SHIFT_AMCHECKOUT):"",pmCheckIn:r.SHIFT_PMCHECKIN?wr(r.SHIFT_PMCHECKIN):"",pmCheckOut:r.SHIFT_PMCHECKOUT?wr(r.SHIFT_PMCHECKOUT):""},a={amCheckIn:n.amCheckIn?sr(n.amCheckIn):null,amCheckOut:n.amCheckOut?sr(n.amCheckOut):null,pmCheckIn:n.pmCheckIn?sr(n.pmCheckIn):null,pmCheckOut:n.pmCheckOut?sr(n.pmCheckOut):null},l=[{key:"amCheckIn",scheduleKey:"amCheckIn"},{key:"amCheckOut",scheduleKey:"amCheckOut"},{key:"pmCheckIn",scheduleKey:"pmCheckIn"},{key:"pmCheckOut",scheduleKey:"pmCheckOut"}];return t.map(i=>{if(!i||!i.dateStr)return i;const o=SC(s,i.dateStr);if(o.length===0)return i;const c={...i},d={...i.locatorBackfill||{}};return l.forEach(({key:m,scheduleKey:u})=>{const p=c[m],g=typeof p=="string"?p.trim():"",j=g!==""&&g!=="-",y=n[u],v=a[u];if(!y||v===null){d[m]=d[m]||!1;return}if(j){if(d[m]===!0)return;g===y?o.some(N=>N.startMinutes==null||N.endMinutes==null?!1:v>=N.startMinutes&&v<=N.endMinutes)?d[m]=!0:d[m]=d[m]||!1:d[m]=!1;return}o.some(f=>f.startMinutes==null||f.endMinutes==null?!1:v>=f.startMinutes&&v<=f.endMinutes)?(c[m]=y,d[m]=!0):d[m]=d[m]||!1}),c.locatorBackfill=d,c})},Tu=t=>{if(!t)return"For Approval";const s=t.toString().trim();if(!s)return"For Approval";const r=s.toLowerCase();return r==="pending"||r==="for approval"?"For Approval":r==="approved"?"Approved":r==="returned"?"Returned":r==="cancelled"?"Cancelled":s.replace(/\b\w/g,n=>n.toUpperCase())},EC=(t,s,r)=>{if(!s||s.length===0||!t||!r)return console.log(" [FIX LOGS DEBUG] getFixLogForDate early return:",{hasFixLogsData:!!s,fixLogsDataLength:(s==null?void 0:s.length)||0,dateStr:t,employeeObjId:r}),null;console.log(" [FIX LOGS DEBUG] getFixLogForDate called:",{dateStr:t,employeeObjId:r,fixLogsDataLength:(s==null?void 0:s.length)||0,sampleFixLog:s!=null&&s[0]?{checktimedate:s[0].checktimedate||s[0].CHECKTIMEDATE,fixstatus:s[0].fixstatus||s[0].FIXSTATUS,emp_objid:s[0].emp_objid}:null});const n=s.filter(a=>{const l=a.checktimedate||a.CHECKTIMEDATE||"",i=/^\d{4}-\d{2}-\d{2}$/.test(l)?l:wl(l),o=i===t,c=a.fixstatus||a.FIXSTATUS||"",d=Tu(c),m=d==="Approved",u=a.emp_objid,p=u!=null&&String(u)===String(r);return console.log(" [FIX LOGS DEBUG] Checking fix log:",{fixLogId:a.fixid||a.objid||"unknown",rawChecktimedate:l,extractedFixDate:i,targetDateStr:t,datesMatch:o,rawFixstatus:c,normalizedStatus:d,isApproved:m,rawEmpObjId:u,targetEmpObjId:r,empObjIdsMatch:p,passesFilter:o&&m&&p}),o&&m&&p});return console.log(" [FIX LOGS DEBUG] Filtered fix logs:",{totalFixLogs:s.length,matchingFixLogs:n.length,matchingFixLog:n[0]||null}),n.length===0?null:n[0]},kC=(t,s,r,n)=>{if(!Array.isArray(t)||!s||s.length===0||!r)return console.log(" [FIX LOGS DEBUG] applyFixLogsToProcessedLogs early return:",{isArray:Array.isArray(t),processedLength:(t==null?void 0:t.length)||0,hasFixLogsData:!!s,fixLogsDataLength:(s==null?void 0:s.length)||0,employeeObjId:r}),t;const a=$d(n);return console.log(" [FIX LOGS DEBUG] applyFixLogsToProcessedLogs called:",{processedDays:t.length,fixLogsDataLength:s.length,employeeObjId:r,employeeObjIdType:typeof r,sampleFixLog:s[0]?{emp_objid:s[0].emp_objid,emp_objidType:typeof s[0].emp_objid,checktimedate:s[0].checktimedate,fixstatus:s[0].fixstatus}:null}),t.map(l=>{var j;if(!l||!l.dateStr)return l;if(l.locatorBackfill&&(l.locatorBackfill.amCheckIn||l.locatorBackfill.amCheckOut||l.locatorBackfill.pmCheckIn||l.locatorBackfill.pmCheckOut))return console.log(" [FIX LOGS DEBUG] Skipping fix logs for date (locator backfill exists):",l.dateStr),l;const o=EC(l.dateStr,s,r);if(console.log(" [FIX LOGS DEBUG] applyFixLogsToProcessedLogs for date:",l.dateStr,{fixLogFound:!!o,dateStr:l.dateStr,dateStrType:typeof l.dateStr,employeeObjId:r,employeeObjIdType:typeof r,fixLogsDataLength:(s==null?void 0:s.length)||0,fixLogData:o?{fixid:o.fixid||o.objid,checktimedate:o.checktimedate||o.CHECKTIMEDATE,fixstatus:o.fixstatus||o.FIXSTATUS,emp_objid:o.emp_objid,emp_objidType:typeof o.emp_objid,am_checkin:o.am_checkin,am_checkout:o.am_checkout,pm_checkin:o.pm_checkin,pm_checkout:o.pm_checkout}:null,allFixLogsForDebug:(s==null?void 0:s.map(y=>({checktimedate:y.checktimedate||y.CHECKTIMEDATE,emp_objid:y.emp_objid,fixstatus:y.fixstatus||y.FIXSTATUS})))||[]}),!o)return console.log(" [FIX LOGS DEBUG] No fix log found for date, returning day without override:",l.dateStr),l;const c=o.fixstatus||o.FIXSTATUS||"",d=Tu(c);if(!(d==="Approved"))return console.log(" [FIX LOGS DEBUG] Fix log status is not Approved, skipping override:",{dateStr:l.dateStr,status:d,fixLogId:o.fixid||o.objid}),l;const u={...l},p={};return[{dayField:"amCheckIn",fixLogField:"am_checkin",isActive:a.hasAMCheckIn},{dayField:"amCheckOut",fixLogField:"am_checkout",isActive:a.hasAMCheckOut},{dayField:"pmCheckIn",fixLogField:"pm_checkin",isActive:a.hasPMCheckIn},{dayField:"pmCheckOut",fixLogField:"pm_checkout",isActive:a.hasPMCheckOut}].forEach(({dayField:y,fixLogField:v,isActive:h})=>{if(!h){console.log(" [FIX LOGS DEBUG] Skipping field (not active in assigned shift):",{dayField:y,fixLogField:v,isActive:h}),p[y]=!1;return}const f=o[v]||o[v.toUpperCase()]||o[v.toLowerCase()]||o[v.charAt(0).toUpperCase()+v.slice(1)]||"";if(console.log(" [FIX LOGS DEBUG] Processing field:",{dayField:y,fixLogField:v,fixLogValue:f,hasValue:f&&f.trim()!==""&&f!=="-"}),f&&f.trim()!==""&&f!=="-"){let N=wr(f);if(!N){const b=String(f).trim().match(/^(\d{1,2}):(\d{2})(?::\d{2})?$/);if(b){const w=String(parseInt(b[1],10)).padStart(2,"0"),D=b[2];N=`${w}:${D}`}}N?(u[y]=N,p[y]=!0):p[y]=!1}else p[y]=!1}),u.fixLogBackfill=p,u.fixLog=o,console.log(" [FIX LOGS DEBUG] Fix log applied to day:",{dateStr:l.dateStr,hasFixLog:!!u.fixLog,hasFixLogBackfill:!!u.fixLogBackfill,fixLogBackfillFlags:u.fixLogBackfill,fixLogStatus:(j=u.fixLog)==null?void 0:j.fixstatus}),u})},CC=(t,s,r)=>{if(!t||t.length===0)return"";const a=t.filter(l=>{const i=wl(l.LOCDATE||l.locatordate);return l.LOCUSERID?i===s&&String(l.LOCUSERID)===String(r):i===s}).map(l=>`Locator(${l.LOCSTATUS||l.locstatus||"For Approval"})`).filter(Boolean);return a.length>0?a.join("; "):""},Ir=(t,s,r)=>{const n=r!=null?String(r):null,a=s!=null?String(s):null;return!!(n&&t.emp_objid!==void 0&&t.emp_objid!==null&&String(t.emp_objid)===n||a&&t.USERID!==void 0&&t.USERID!==null&&String(t.USERID)===a)},AC=(t,s,r,n)=>!t||t.length===0?[]:t.filter(a=>{if(a.details&&Array.isArray(a.details)&&a.details.length>0){const c=a.details.some(m=>Cr(m.deducteddate||m.leavedate)===s),d=Ir(a,r,n);return c&&d}if(a.leaveDates&&Array.isArray(a.leaveDates)&&a.leaveDates.length>0){const c=a.leaveDates.some(m=>Cr(m.LEAVEDATE||m.leavedate)===s),d=Ir(a,r,n);return c&&d}const i=Cr(a.LEAVEDATE)===s,o=Ir(a,r,n);return i&&o}),DC=(t,s,r,n)=>{var o,c;const a=Math.random().toString(36).substr(2,9);if(console.log(` [LEAVE REMARKS ${a}] getLeaveRemarksForDate called with:`,{dateStr:s,userId:r,employeeObjId:n,leaveDataLength:t==null?void 0:t.length}),!t||t.length===0)return console.log(` [LEAVE REMARKS ${a}] No leave data available`),"";t.length>0&&console.log(` [LEAVE REMARKS ${a}] Sample leave structure:`,{firstLeave:{objid:t[0].objid,emp_objid:t[0].emp_objid,leavestatus:t[0].leavestatus,LEAVESTATUS:t[0].LEAVESTATUS,status:t[0].status,leaveno:t[0].leaveno,LEAVEREFNO:t[0].LEAVEREFNO,leave_type_name:t[0].leave_type_name,detailsCount:((o=t[0].details)==null?void 0:o.length)||0,firstDetail:(c=t[0].details)==null?void 0:c[0],hasDetails:!!t[0].details}});const l=t.filter(d=>{const m=d.leavestatus||d.LEAVESTATUS||d.status,u=Tu(m);if(console.log(` [LEAVE REMARKS ${a}] Checking leave status:`,{rawStatus:m,normalizedStatus:u,isApproved:u==="Approved",leaveRefNo:d.leaveno||d.LEAVEREFNO}),u!=="Approved")return!1;if(d.details&&Array.isArray(d.details)&&d.details.length>0){const y=d.details.some(h=>{const f=h.deducteddate||h.leavedate,N=Cr(f),b=N===s;return console.log(` [LEAVE REMARKS ${a}] Checking detail date:`,{rawDetailDate:f,extractedDetailDate:N,targetDateStr:s,dateMatch:b,detailDateType:typeof f}),b}),v=Ir(d,r,n);return console.log(` [LEAVE REMARKS ${a}] Details array check result:`,{hasMatchingDate:y,matchesEmployee:v,leaveEmpObjId:d.emp_objid,targetEmpObjId:n,leaveUserId:d.USERID,targetUserId:r}),y&&v?(console.log(` [LEAVE REMARKS ${a}] Found matching leave (details array):`,{leaveRefNo:d.leaveno||d.LEAVEREFNO,leaveType:d.leave_type_name||d.LeaveName,detailDates:d.details.map(h=>({raw:h.deducteddate||h.leavedate,extracted:Cr(h.deducteddate||h.leavedate)}))}),!0):!1}if(d.leaveDates&&Array.isArray(d.leaveDates)&&d.leaveDates.length>0){const y=d.leaveDates.some(h=>Cr(h.LEAVEDATE||h.leavedate)===s),v=Ir(d,r,n);return y&&v?(console.log(` [LEAVE REMARKS ${a}] Found matching leave (leaveDates array):`,{leaveRefNo:d.leaveno||d.LEAVEREFNO,leaveType:d.leave_type_name||d.LeaveName}),!0):!1}const p=Cr(d.LEAVEDATE),g=p===s,j=Ir(d,r,n);return console.log(` [LEAVE REMARKS ${a}] Checking leave (old structure):`,{leaveDate:p,targetDate:s,leaveUserId:d.USERID,leaveEmpObjId:d.emp_objid,targetUserId:r,targetEmpObjId:n,dateMatch:g,matchesEmployee:j,leaveType:d.leave_type_name||d.LeaveName,leaveRefNo:d.leaveno||d.LEAVEREFNO,willInclude:g&&j}),g&&j});if(console.log(` [LEAVE REMARKS ${a}] Found leaves for date:`,l.length,l),l.length===0)return"";const i=l.map(d=>{const m=d.leaveno||d.LEAVEREFNO||"N/A";return console.log(` [LEAVE REMARKS ${a}] Processing leave:`,{leaveName:d.leave_type_name||d.LeaveName,leaveno:m,status:d.leavestatus||d.LEAVESTATUS||""}),`Leave(${m})`}).join("; ");return console.log(` [LEAVE REMARKS ${a}] Final result:`,i),i},qa=t=>{if(!t)return"";const s=String(t).trim();if(!s)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(s))return s;const r=s.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(r){const[,n,a,l]=r;return`${l}-${n.padStart(2,"0")}-${a.padStart(2,"0")}`}return yo(s)},kN=t=>{if(!t)return[];if(Array.isArray(t.normalizedTravelDates))return t.normalizedTravelDates.filter(Boolean);const s=new Set;if(Array.isArray(t.travel_dates_array)&&t.travel_dates_array.forEach(r=>{const n=qa(r);n&&s.add(n)}),typeof t.travel_dates=="string"&&t.travel_dates.split(",").forEach(r=>{const n=qa(r);n&&s.add(n)}),Array.isArray(t.travel_dates)&&t.travel_dates.forEach(r=>{const n=qa(r);n&&s.add(n)}),t.TRAVELDATE){const r=qa(yo(t.TRAVELDATE));r&&s.add(r)}if(t.traveldate){const r=qa(yo(t.traveldate));r&&s.add(r)}if(t.date){const r=qa(yo(t.date));r&&s.add(r)}return Array.from(s)},TC=t=>{const s=new Set,r=n=>{n!=null&&n!==""&&s.add(String(n))};return r(t==null?void 0:t.USERID),r(t==null?void 0:t.userid),r(t==null?void 0:t.userId),r(t==null?void 0:t.createdby),r(t==null?void 0:t.created_by),r(t==null?void 0:t.created_by_userid),Array.isArray(t==null?void 0:t.participantUserIds)&&t.participantUserIds.forEach(r),Array.isArray(t==null?void 0:t.employees)&&t.employees.forEach(n=>{r(n==null?void 0:n.dtruserid),r(n==null?void 0:n.userid),r(n==null?void 0:n.USERID)}),Array.isArray(t==null?void 0:t.participants)&&t.participants.forEach(n=>{r(n==null?void 0:n.dtruserid),r(n==null?void 0:n.userid),r(n==null?void 0:n.USERID)}),Array.from(s)},MC=t=>{const s=new Set,r=n=>{n!=null&&n!==""&&s.add(String(n))};return r(t==null?void 0:t.emp_objid),r(t==null?void 0:t.employee_objid),r(t==null?void 0:t.EMP_OBJID),Array.isArray(t==null?void 0:t.participantEmpObjIds)&&t.participantEmpObjIds.forEach(r),Array.isArray(t==null?void 0:t.employees)&&t.employees.forEach(n=>{r(n==null?void 0:n.emp_objid),r(n==null?void 0:n.objid)}),Array.isArray(t==null?void 0:t.participants)&&t.participants.forEach(n=>{r(n==null?void 0:n.emp_objid),r(n==null?void 0:n.objid)}),Array.from(s)},If=t=>{const s=kN(t),r=TC(t),n=MC(t),a=(t==null?void 0:t.travelno)||(t==null?void 0:t.TRAVELNO)||(t==null?void 0:t.travel_no)||(t==null?void 0:t.TRAVEL_NO)||"N/A",l=(t==null?void 0:t.travelstatus)||(t==null?void 0:t.TRAVELSTATUS)||(t==null?void 0:t.status)||(t==null?void 0:t.TRAVEL_STATUS)||null;return{...t,normalizedTravelDates:s,participantUserIds:r,participantEmpObjIds:n,normalizedTravelNo:a,normalizedTravelStatus:l}},IC=t=>Array.isArray(t)?t.map(If):[],CN=(t,s,r)=>{const n=If(t),a=s!=null?String(s):null,l=r!=null?String(r):null,i=a&&n.participantUserIds.some(c=>String(c)===a),o=l&&n.participantEmpObjIds.some(c=>String(c)===l);return i||o?!0:n.participantUserIds.length===0&&n.participantEmpObjIds.length===0?n.USERID!==void 0&&a?String(n.USERID)===a:n.emp_objid!==void 0&&l?String(n.emp_objid)===l:!0:!1},AN=(t,s,r,n)=>!Array.isArray(t)||t.length===0?[]:t.filter(a=>{const l=Array.isArray(a.normalizedTravelDates)?a.normalizedTravelDates:kN(a);return!l||l.length===0||!l.some(o=>o===s)?!1:CN(a,r,n)}).filter(a=>(a.normalizedTravelStatus||a.travelstatus||a.TRAVELSTATUS||a.status||"").toString().toLowerCase()==="approved").map(If),LC=t=>!Array.isArray(t)||t.length===0?"":t.map(s=>`Travel: (${s.normalizedTravelNo||"N/A"})`).join("; "),DN=t=>t?Array.isArray(t)?t.flatMap(s=>DN(s)).map(s=>s.trim()).filter(Boolean):String(t).split(";").map(s=>s.trim()).filter(Boolean):[],Wg=()=>({entries:[],byType:{weekend:[],holiday:[],locator:[],leave:[],travel:[],cdo:[],absent:[],action:[],misc:[]},flags:{hasLeave:!1,hasTravel:!1,hasLocator:!1,isAbsent:!1,isHoliday:!1,hasCdo:!1}}),da=(t,s,r,n=null)=>{if(!t)return;const a=DN(r);a.length!==0&&(t.byType[s]||(t.byType[s]=[]),a.forEach(l=>{!l||t.entries.some(o=>o.type===s&&o.text===l)||(t.entries.push({type:s,text:l,data:n}),t.byType[s].push(l),s==="leave"?t.flags.hasLeave=!0:s==="travel"?t.flags.hasTravel=!0:s==="locator"?t.flags.hasLocator=!0:s==="cdo"?t.flags.hasCdo=!0:s==="absent"?t.flags.isAbsent=!0:s==="holiday"&&(t.flags.isHoliday=!0))}))},PC=(t,s)=>{!t||!Array.isArray(s)||s.length===0||(t.byType.travel||(t.byType.travel=[]),s.forEach(r=>{if(!r)return;const a=`Travel: (${r.normalizedTravelNo||r.travelno||r.TRAVELNO||r.travel_no||"N/A"})`;t.entries.some(i=>i.type==="travel"&&i.text===a)||(t.entries.push({type:"travel",text:a,data:r}),t.byType.travel.push(a),t.flags.hasTravel=!0)}))},TN=t=>{if(!t)return"";const s=[t.HOLIDAYDATE,t.holidaydate,t.holiday_date,t.HolidayDate,t.date];for(const r of s){if(r==null)continue;const n=typeof r=="string"?r.trim():String(r);if(!n)continue;if(/^\d{4}-\d{2}-\d{2}$/.test(n))return n;const a=wl(n);if(a)return a}return""},Lf=t=>{if(!t)return"Holiday";const s=[t.HOLIDAYNAME,t.holidayname,t.holiday_name,t.HolidayName,t.description,t.name,t.HOLIDAYDESC,t.holidaydesc];for(const r of s){if(r==null)continue;const n=String(r).trim();if(n)return n}return"Holiday"},dp=t=>{const s=(t==null?void 0:t.ISRECURRING)??(t==null?void 0:t.isRecurring)??(t==null?void 0:t.is_recurring)??(t==null?void 0:t.recurring)??(t==null?void 0:t.IS_RECURRING);if(s==null)return!1;if(typeof s=="boolean")return s;if(typeof s=="number")return s===1;const r=String(s).trim().toLowerCase();return r?["1","true","yes","y"].includes(r):!1},si=(t,s)=>{if(!t||t.length===0||!s)return[];const r=wl(s);if(!r)return[];const n=r.length>=5?r.slice(5,10):"";return t.filter(a=>{const l=TN(a);return l?dp(a)?(l.length>=5?l.slice(5,10):"")===n:l===r:!1})},RC=(t,s)=>{const r=si(t,s);return r.length===0?null:r.map(Lf).join("; ")},Yg=(t,s)=>{const r=si(t,s);if(r.length===0)return null;const n=r.map(Lf).filter(Boolean),a=n.some(l=>typeof l=="string"&&l.toLowerCase().includes("work suspension"));return{names:n,display:a?"Work Suspension":n.join(", ")}},OC=t=>{if(!t||typeof t!="object")return null;const s=(...n)=>{for(const a of n){if(a==null)continue;const l=typeof a=="function"?a():a;if(l!=null&&String(l).trim()!=="")return l}return null};return{HOLIDAYNAME:s(t.HOLIDAYNAME,t.holidayname,t.holiday_name,t.name,t.description)||"N/A",HOLIDAYCATEGORY:s(t.HOLIDAYCATEGORY,t.holidaycategory,t.category)||"N/A",HOLIDAYTYPE:s(t.HOLIDAYTYPE,t.holidaytype,t.type)||"N/A",HOLIDAYDATE:s(t.HOLIDAYDATE,t.holidaydate,t.date)||"",HOLIDAYDESC:s(t.HOLIDAYDESC,t.holidaydesc,t.description,"No description provided"),ISRECURRING:s(t.ISRECURRING,t.isRecurring,t.is_recurring,t.recurring,()=>{const n=s(t.HOLIDAYDESC,t.holidaydesc,t.description);return n&&n.toString().toLowerCase().includes("recurring")?1:null}),raw:t}},FC=(t,s)=>{if(!t||!s)return{remarks:"",records:[]};const r=EN(t,s);if(!r||r.length===0)return{remarks:"",records:[]};const n=new Set,a=[];return r.forEach(l=>{if(!l)return;const o=`CDO(${l.displayRef||l.cdono||"CDO"})`;n.has(o)||(n.add(o),a.push(o))}),{remarks:a.join("; "),records:r}},MN=(t,s,r,n)=>!t||t.length===0?!1:t.some(a=>Tu(a.leavestatus||a.LEAVESTATUS||a.status)!=="Approved"?!1:a.details&&Array.isArray(a.details)&&a.details.length>0?a.details.some(c=>Cr(c.deducteddate||c.leavedate)===s)&&Ir(a,r,n):a.leaveDates&&Array.isArray(a.leaveDates)&&a.leaveDates.length>0?a.leaveDates.some(c=>Cr(c.LEAVEDATE||c.leavedate)===s)&&Ir(a,r,n):Cr(a.LEAVEDATE)===s&&Ir(a,r,n)),$C=(t,s,r,n)=>{if(!t||t.length===0)return null;const a=t.find(l=>l.details&&Array.isArray(l.details)&&l.details.length>0?l.details.some(c=>Cr(c.deducteddate||c.leavedate)===s)&&Ir(l,r,n):l.leaveDates&&Array.isArray(l.leaveDates)&&l.leaveDates.length>0?l.leaveDates.some(c=>Cr(c.LEAVEDATE||c.leavedate)===s)&&Ir(l,r,n):Cr(l.LEAVEDATE)===s&&Ir(l,r,n));return a&&(a.leavestatus||a.LEAVESTATUS)||null},UC=(t,s,r,n)=>!t||t.length===0?!1:t.some(a=>{const l=(a.leave_type_name||a.LeaveName||"").toLowerCase().includes("ob");return a.details&&Array.isArray(a.details)&&a.details.length>0?a.details.some(c=>Cr(c.deducteddate||c.leavedate)===s)&&l&&Ir(a,r,n):a.leaveDates&&Array.isArray(a.leaveDates)&&a.leaveDates.length>0?a.leaveDates.some(c=>Cr(c.LEAVEDATE||c.leavedate)===s)&&l&&Ir(a,r,n):Cr(a.LEAVEDATE)===s&&l&&Ir(a,r,n)}),HC=(t,s,r,n)=>AN(t,s,r,n).length>0,IN=(t,s)=>!t||t.length===0||!s?!1:si(t,s).length>0,BC=(t,s,r,n)=>{var E,A;const a=(s==null?void 0:s.locatorBackfill)||{};let l=null;n==="AM_CHECKIN"?l="amCheckIn":n==="AM_CHECKOUT"?l="amCheckOut":n==="PM_CHECKIN"?l="pmCheckIn":n==="PM_CHECKOUT"&&(l="pmCheckOut");const i=l?!!a[l]:!1,o=(s==null?void 0:s.fixLogBackfill)||{},c=l?!!o[l]:!1,d=typeof t=="string"?t.trim():"",m=d!==""&&d!=="-",u=(s==null?void 0:s.remarkFlags)||{},p=!!u.hasLeave,g=!!u.hasTravel,j=!!u.hasCdo,y=!!(s!=null&&s.hasHoliday),v=!!(s!=null&&s.isWeekend),h=!!u.isAbsent,f=(s==null?void 0:s.leaveStatus)||null,N=!!(s!=null&&s.hasOBLeave),b=s==null?void 0:s.dateStr;console.log(" [FIX LOGS DEBUG] renderTimeColumn fix log check:",{dateStr:b,columnType:n,locatorKey:l,dayLogHasFixLogBackfill:!!(s!=null&&s.fixLogBackfill),dayLogHasFixLog:!!(s!=null&&s.fixLog),fixLogBackfillFlags:o,isFixLogOverride:c,dayLogKeys:s?Object.keys(s):[]});const w=Array.isArray(s==null?void 0:s.holidayNames)?s.holidayNames:[],D=s!=null&&s.hasWorkSuspension?"Work Suspension":null,S=D||(s==null?void 0:s.holidayDisplay)||(w.length>0?w.join(", "):"Holiday"),C=D?"text-gray-400 font-medium text-[9px]":"text-gray-400 font-medium text-[11px]",T=$d(r);let _=!0;if(r&&n&&(n==="AM_CHECKIN"?_=T.hasAMCheckIn:n==="AM_CHECKOUT"?_=T.hasAMCheckOut:n==="PM_CHECKIN"?_=T.hasPMCheckIn:n==="PM_CHECKOUT"&&(_=T.hasPMCheckOut)),console.log(" [TIME COLUMN] renderTimeColumn called:",{timeValue:t,dateStr:b,hasValue:m,isWeekend:v,hasLeave:p,hasOBLeave:N,hasTravel:g,hasHoliday:y,isAbsent:h,leaveStatus:f,columnType:n,shiftAssigned:_,activeColumns:T}),_)if(m){console.log(" [TIME COLUMN] Showing actual time value:",t,{isLocatorBackfill:i,isFixLogOverride:c,dayLogHasFixLog:!!(s!=null&&s.fixLog),dayLogHasFixLogBackfill:!!(s!=null&&s.fixLogBackfill)});const L=[];if(i&&L.push(e.jsx("span",{className:"text-xs",title:"Backfilled by Locator",role:"img","aria-label":"Backfilled by Locator",children:""},"locator")),c){const F=((E=s==null?void 0:s.fixLog)==null?void 0:E.approved_by_employee_name)||((A=s==null?void 0:s.fixLog)==null?void 0:A.approvedByName)||"Unknown",W=F!=="Unknown"?`Fixed by (${F})`:"Fixed by Fix Log";L.push(e.jsx("span",{className:"text-xs",title:W,role:"img","aria-label":W,children:""},"fixlog"))}return L.length>0?e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{children:t}),L]}):t}else if(v){console.log(" [TIME COLUMN] Showing Weekend annotation");const L=y?"text-red-600":"text-blue-600";return e.jsx("span",{className:`${L} font-medium`,children:"Weekend"})}else if(p||N){const F=(f||"").toLowerCase()==="for approval"?"For Approval":"Leave";return console.log(" [TIME COLUMN] Showing Leave annotation:",{leaveStatus:f,displayText:F}),e.jsx("span",{className:"text-gray-400",children:F})}else return g?(console.log(" [TIME COLUMN] Showing Travel annotation"),e.jsx("span",{className:"text-gray-400",children:"Travel"})):j?(console.log(" [TIME COLUMN] Showing CDO annotation"),e.jsx("span",{className:"text-gray-400",children:"CDO"})):y?(console.log(" [TIME COLUMN] Showing Holiday annotation"),e.jsx("span",{className:C,children:S})):h?(console.log(" [TIME COLUMN] Showing Absent annotation"),e.jsx("span",{children:"-"})):_?(console.log(" [TIME COLUMN] Showing dash (no logs, no annotations)"),"-"):(console.log(" [TIME COLUMN] Showing No Shift Assigned"),e.jsx("span",{className:"text-gray-500 italic",children:"No Shift Assigned"}));else return console.log(' [TIME COLUMN] Showing "-" for inactive column (shift not assigned)'),e.jsx("span",{className:"text-gray-500",children:"-"})},Kg=(t,s,r,n,a,l,i)=>{const o=new Date,c=o.toISOString().split("T")[0],d=t>c,m=t===c,u=MN(r,t,l,i),p=HC(n,t,l,i),g=IN(a,t),j=wN(t);return console.log(" [ABSENT FUNCTION] Checking Absent condition for date:",t,{hasLeave:u,hasTravel:p,hasHoliday:g,timeLogCount:s,isFutureDate:d,isCurrentDate:m,isWeekendDay:j,currentTime:o.toISOString(),dateStr:t,todayStr:c,employeeObjId:i}),!j&&!u&&!p&&!g&&s===0&&!m&&!d},zC=({user:t,selectedFilter:s,shiftSchedule:r,locatorData:n=[],selectedPeriod:a="full",onLogsProcessed:l})=>{var Ce,Ze;const{user:i}=Ts(),o=t||i;if(!o)return e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-lg",children:"Loading user information..."})});const[c,d]=x.useState([]),[m,u]=x.useState([]),[p,g]=x.useState(!1),[j,y]=x.useState(!1),[v,h]=x.useState(null),[f,N]=x.useState([]),[b,w]=x.useState([]),[D,S]=x.useState([]),[C,T]=x.useState([]),[_,E]=x.useState({}),[A,L]=x.useState({leave:0,travel:0,locator:0,cdo:0,fixLogs:0}),[F,W]=x.useState([]),[Y,q]=x.useState(!1),[J,O]=x.useState(!1),[M,k]=x.useState(""),[I,K]=x.useState(null),[z,P]=x.useState(!1),[R,B]=x.useState(null),[U,G]=x.useState(!1),[$,X]=x.useState(null),[Q,Ne]=x.useState(!1),[V,re]=x.useState(null),[ne,xe]=x.useState(!1),[me,Z]=x.useState(null),ee=()=>new Date().toISOString().slice(0,10),ye=()=>{const fe=new Date,Pe=ee();let Le,ut;if(s==="Last 2 Weeks"){const Be=new Date(fe);Be.setDate(fe.getDate()-13),Le=Be.toISOString().slice(0,10),ut=Pe}else if(s==="This Month"){const Be=fe.getFullYear(),mt=fe.getMonth()+1,qe=`${Be}-${String(mt).padStart(2,"0")}-01`,Oe=new Date(Be,mt,0).getDate(),He=`${Be}-${String(mt).padStart(2,"0")}-${String(Oe).padStart(2,"0")}`;a==="first_half"?(Le=qe,ut=`${Be}-${String(mt).padStart(2,"0")}-15`):a==="second_half"?(Le=`${Be}-${String(mt).padStart(2,"0")}-16`,ut=He):(Le=qe,ut=He)}else if(s==="Last Month"){const Be=fe.getFullYear(),mt=fe.getMonth();let qe=Be,Oe=mt-1;mt===0&&(qe=Be-1,Oe=11);const He=`${qe}-${String(Oe+1).padStart(2,"0")}-01`,Kt=new Date(qe,Oe+1,0).getDate(),rs=`${qe}-${String(Oe+1).padStart(2,"0")}-${String(Kt).padStart(2,"0")}`;a==="first_half"?(Le=He,ut=`${qe}-${String(Oe+1).padStart(2,"0")}-15`):a==="second_half"?(Le=`${qe}-${String(Oe+1).padStart(2,"0")}-16`,ut=rs):(Le=He,ut=rs)}else Le=Pe,ut=Pe;return{startDate:Le,endDate:ut}};x.useEffect(()=>{(async()=>{var Pe,Le,ut;if(!(!o||!o.id)){y(!0),h(null);try{const{startDate:Be,endDate:mt}=ye(),qe=await oe.get("/dtr/logs",{params:{startDate:Be,endDate:mt}}),Oe=Array.isArray(qe.data)?qe.data:[],He=Oe.filter(Kt=>String(Kt.USERID)===String(o.id));console.log(" [DEBUG] Total logs from API:",Oe.length),console.log(" [DEBUG] User ID:",o.id),console.log(" [DEBUG] Filtered logs for user:",He.length),console.log(" [DEBUG] Sample log USERID:",(Pe=Oe[0])==null?void 0:Pe.USERID),S(He)}catch(Be){h(((ut=(Le=Be.response)==null?void 0:Le.data)==null?void 0:ut.message)||"Failed to fetch DTR logs. Please try again.")}finally{y(!1)}}})()},[o==null?void 0:o.id,s,a]),x.useEffect(()=>{(async()=>{var Pe,Le;if(!(o!=null&&o.id)&&!(o!=null&&o.USERID)){K(null);return}try{const ut=o.id||o.USERID,Be=await oe.get("/201-employees");if((Pe=Be.data)!=null&&Pe.success&&((Le=Be.data)!=null&&Le.data)){const mt=Be.data.data.find(qe=>String(qe.dtruserid)===String(ut));K(mt?mt.objid:null)}}catch(ut){console.error(" Error fetching employee objid:",ut),K(null)}})()},[o]),x.useEffect(()=>{(async()=>{var Pe;if(!I){u([]);return}console.log(" [LOCATOR] Fetching locator data...",{employeeObjId:I,refreshTrigger:A.locator});try{g(!0);const{startDate:Le,endDate:ut}=ye(),qe=(((Pe=(await oe.get("/employee-locators",{params:{emp_objid:I,from:Le,to:ut}})).data)==null?void 0:Pe.data)||[]).map(Oe=>{const He=Oe.loctimedeparture||Oe.locdeparture||Oe.LOCTIMEDEPARTURE,Kt=Oe.loctimearrival||Oe.locarrival||Oe.LOCTIMEARRIVAL,rs=Vl(He),qt=Vl(Kt);return{LOCDATE:Oe.locatordate,LOCREMARKS:Oe.locremarks||"Locator filed",LOCSTATUS:Oe.locstatus||"For Approval",objid:Oe.objid,locatordate:Oe.locatordate,locstatus:Oe.locstatus||"For Approval",loctimedeparture:He||null,loctimearrival:Kt||null,departureTime:rs.time,arrivalTime:qt.time,departureMinutes:rs.minutes,arrivalMinutes:qt.minutes}});u(qe),console.log(" [LOCATOR] Locator data fetched successfully:",{count:qe.length})}catch(Le){console.error(" [LOCATOR] Error fetching locator data:",Le),u([])}finally{g(!1)}})()},[I,s,a,A.locator]),x.useEffect(()=>{(async()=>{var Pe;if(!I){W([]);return}try{q(!0);const{startDate:Le,endDate:ut}=ye(),Be={emp_objid:I};Le&&(Be.dateFrom=Le),ut&&(Be.dateTo=ut);const mt=await oe.get("/dtr-fix-checktime",{params:Be}),qe=((Pe=mt.data)==null?void 0:Pe.data)||mt.data||[],Oe=Array.isArray(qe)?qe:[];W(Oe),console.log(" [MY SHIFT VIEW] Fix logs data loaded:",{count:Oe.length,params:Be,sampleRecord:Oe[0]?{fixid:Oe[0].fixid||Oe[0].objid,checktimedate:Oe[0].checktimedate||Oe[0].CHECKTIMEDATE,fixstatus:Oe[0].fixstatus||Oe[0].FIXSTATUS,emp_objid:Oe[0].emp_objid,am_checkin:Oe[0].am_checkin,am_checkout:Oe[0].am_checkout,pm_checkin:Oe[0].pm_checkin,pm_checkout:Oe[0].pm_checkout}:null,allRecords:Oe})}catch(Le){console.error(" [MY SHIFT VIEW] Error loading fix logs data:",Le),W([])}finally{q(!1)}})()},[I,s,a,A.fixLogs]),x.useEffect(()=>{const fe=async()=>{var Pe,Le,ut,Be;if(!I){console.log(" [LEAVE2 DEBUG] No employeeObjId yet, skipping leave data load"),N([]);return}try{console.log(" [LEAVE2 DEBUG] Starting to load leave data for employeeObjId:",I);const mt=await oe.get(`/employee-leave-transactions/${I}`);console.log(" [LEAVE2 DEBUG] Raw API response:",mt),console.log(" [LEAVE2 DEBUG] Response data:",mt.data);const qe=Array.isArray(mt.data)?mt.data:((Pe=mt.data)==null?void 0:Pe.data)||[];console.log(" [LEAVE2 DEBUG] API call successful, setting leave data"),console.log(" [LEAVE2 DEBUG] Leave records count:",qe.length),console.log(" [LEAVE2 DEBUG] All leave records:",qe),qe.length>0&&console.log(" [LEAVE2 DEBUG] Sample transaction structure:",{objid:qe[0].objid,emp_objid:qe[0].emp_objid,leavestatus:qe[0].leavestatus,leaveno:qe[0].leaveno,leave_type_name:qe[0].leave_type_name,detailsCount:((Le=qe[0].details)==null?void 0:Le.length)||0,firstDetail:(ut=qe[0].details)==null?void 0:ut[0],hasDetails:!!qe[0].details}),N(qe)}catch(mt){console.error(" [LEAVE2 DEBUG] Error loading leave data:",mt),console.error(" [LEAVE2 DEBUG] Error details:",(Be=mt.response)==null?void 0:Be.data),N([])}};o&&I?(console.log(" [LEAVE2 DEBUG] User and employeeObjId available, loading leave data"),fe()):(console.log(" [LEAVE2 DEBUG] No user or employeeObjId, clearing leave data"),N([]))},[o,I,A.leave]),x.useEffect(()=>{(async()=>{var Pe,Le;if(o!=null&&o.id)try{console.log(" [TRAVEL2 DEBUG] Loading travel data from /employee-travels/my for employee:",o.id);const ut=await oe.get("/employee-travels/my");if(console.log("[TRAVEL2 DEBUG] /employee-travels/my raw response:",ut),console.log(" [TRAVEL2 DEBUG] /employee-travels/my data payload:",ut.data),(Pe=ut.data)!=null&&Pe.success){const Be=Array.isArray((Le=ut.data)==null?void 0:Le.data)?ut.data.data:[],mt=IC(Be),qe=I?mt.filter(Oe=>CN(Oe,o.id,I)):mt;console.log(" [TRAVEL2 DEBUG] Loaded employee travel records from new endpoint:",{total:mt.length,filtered:qe.length,employeeObjId:I}),w(qe);return}console.warn(" [TRAVEL2 DEBUG] /employee-travels/my returned unsuccessful response:",ut.data),w([])}catch(ut){console.error(" [TRAVEL2 DEBUG] Error fetching travel data from new endpoint:",ut),w([])}})()},[o,I,A.travel]),x.useEffect(()=>{(async()=>{var Pe;if(!I){E({});return}try{const{startDate:Le,endDate:ut}=ye(),Be={includeEntries:1,emp_objid:I,scope:"self"};Le&&(Be.from=Le),ut&&(Be.to=ut);const mt=await oe.get("/dtr/employee-cdo/transactions",{params:Be}),qe=Array.isArray((Pe=mt.data)==null?void 0:Pe.data)&&mt.data.data||Array.isArray(mt.data)&&mt.data||[],Oe=_N(qe,{startDate:Le,endDate:ut,employeeObjId:I});E(Oe),console.log(" [MY SHIFT] CDO usage entries loaded:",Object.keys(Oe).length)}catch(Le){console.error(" [MY SHIFT] Error loading CDO usage:",Le),E({})}})()},[I,s,a,A.cdo]);const ve=x.useCallback(async()=>{try{const fe=new Date().getFullYear(),Pe=await oe.get("/dtr-holidays");if(Pe.data.success){const Le=Array.isArray(Pe.data.data)?Pe.data.data:[],ut=Le.filter(Be=>{const mt=TN(Be);return mt&&mt.slice(0,4)===String(fe)||dp(Be)});T(ut),console.log(" Holiday data loaded from MySQL:",ut.length,"holidays (raw total:",Le.length,")")}else T([]),console.log(" Holiday API response not successful:",Pe.data)}catch(fe){console.error(" Error loading holiday data:",fe),T([])}},[]);x.useEffect(()=>{ve()},[ve]),x.useEffect(()=>{if(!o||!I){console.log(" [SSE] Skipping SSE setup:",{hasCurrentUser:!!o,hasEmployeeObjId:!!I,currentUserId:(o==null?void 0:o.id)||(o==null?void 0:o.USERID),employeeObjId:I});return}console.log(" [SSE] Setting up change notification stream...",{currentUserId:(o==null?void 0:o.id)||(o==null?void 0:o.USERID),employeeObjId:I,employeeObjIdType:typeof I});const fe=localStorage.getItem("authToken");if(!fe){console.error(" [SSE] No auth token found, cannot connect to notification stream");return}const Pe=`/api/change-notifications/stream?token=${encodeURIComponent(fe)}`;console.log(" [SSE] Connecting to:",Pe);const Le=new EventSource(Pe);return Le.onopen=()=>{console.log(" [SSE] Connected to change notification stream",{employeeObjId:I,readyState:Le.readyState})},Le.onmessage=ut=>{try{const Be=JSON.parse(ut.data);if(Be.type==="connected"){console.log(" [SSE] Stream connected:",Be),console.log(" [SSE] Connected emp_objid:",Be.emp_objid,"type:",typeof Be.emp_objid),console.log(" [SSE] Local employeeObjId:",I,"type:",typeof I),console.log(" [SSE] Match check:",String(Be.emp_objid)===String(I));return}if(Be.type==="heartbeat")return;if(Be.type==="data_changed")switch(console.log(" [SSE] Data changed notification:",Be),Be.changeType){case"leave":console.log(" [SSE] Refreshing leave data..."),L(mt=>({...mt,leave:mt.leave+1}));break;case"travel":console.log(" [SSE] Refreshing travel data..."),L(mt=>({...mt,travel:mt.travel+1}));break;case"locator":console.log(" [SSE] Refreshing locator data...",{action:Be.action,metadata:Be.metadata}),L(mt=>{const qe=mt.locator+1;return console.log(" [SSE] Updating locator refresh trigger:",{old:mt.locator,new:qe}),{...mt,locator:qe}});break;case"cdo":console.log(" [SSE] Refreshing CDO data..."),L(mt=>({...mt,cdo:mt.cdo+1}));break;case"fix_logs":console.log(" [SSE] Refreshing fix logs data..."),L(mt=>({...mt,fixLogs:mt.fixLogs+1}));break;default:console.log(" [SSE] Unknown change type, refreshing all data..."),L(mt=>({leave:mt.leave+1,travel:mt.travel+1,locator:mt.locator+1,cdo:mt.cdo+1,fixLogs:mt.fixLogs+1}))}}catch(Be){console.error(" [SSE] Error parsing message:",Be)}},Le.onerror=ut=>{console.error(" [SSE] Stream error:",ut)},()=>{console.log(" [SSE] Closing change notification stream"),Le.close()}},[o,I]),x.useEffect(()=>{if(console.log(" [USE EFFECT] Starting to process logs...",{logsLength:D==null?void 0:D.length,shiftSchedule:!!r,locatorDataLength:m==null?void 0:m.length,leaveDataLength:f==null?void 0:f.length,travelDataLength:b==null?void 0:b.length,holidayDataLength:C==null?void 0:C.length,userId:o==null?void 0:o.id,selectedFilter:s}),!r){console.log(" [USE EFFECT] No shift schedule available, setting empty array"),d([]);return}const fe=s==="Today"||s==="today";if(!D||D.length===0)if(fe)console.log(" [USE EFFECT] No logs available, but processing Today filter anyway");else{console.log(" [USE EFFECT] No logs available, setting empty array"),d([]);return}const{startDate:Pe,endDate:Le}=ye();console.log("Date range:",{startDate:Pe,endDate:Le,selectedFilter:s});const ut=pC(Pe,Le);if(console.log(" Generated date range:",ut),s==="Today"||s==="today"){const Oe=ee();ut.includes(Oe)||(console.log(" [DEBUG] Adding current date to range for Today filter"),ut.push(Oe)),console.log(" [DEBUG] Today filter - dateRange:",ut)}const Be=ut.map(Oe=>{var bt,dt,It,Et;console.log(`
 Processing day ${Oe.split("-")[2]}: ${Oe}`);const He=(D||[]).filter(gt=>yo(gt.CHECKTIME)===Oe);console.log(` Found ${He.length} logs for ${Oe}:`,He);const Kt=wN(Oe),rs=RC(C,Oe),qt=IN(C,Oe),zt=CC(m,Oe,o.id),xs=zt&&zt.trim()!=="",ms=DC(f,Oe,o.id,I),Ut=MN(f,Oe,o.id,I),$t=$C(f,Oe,o.id,I),Qt=UC(f,Oe,o.id,I),gs=AN(b,Oe,o.id,I),Yt=LC(gs),os=gs.length>0,Zt=Yg(C,Oe),Jt=(Zt==null?void 0:Zt.display)||null,es=(Zt==null?void 0:Zt.names)||[],be=es.some(gt=>typeof gt=="string"&&gt.toLowerCase().includes("work suspension")),tt=FC(_,Oe).records||[],ft=tt.length>0,kt=gt=>{gt&&(!Jt&&Kt&&da(gt,"weekend","Weekend"),Jt&&da(gt,"holiday",Jt),zt&&da(gt,"locator",zt),ms&&da(gt,"leave",ms),gs&&gs.length>0&&PC(gt,gs),tt&&tt.length>0&&tt.forEach(Xt=>{if(!Xt)return;const Vt=Xt.displayRef||Xt.cdono||"CDO";da(gt,"cdo",`CDO(${Vt})`,Xt)}))};if(He.length===0){console.log(` [NO LOGS] Processing date ${Oe} with no logs`),console.log(` [NO LOGS] Status for ${Oe}:`,{hasTravel:os,hasLeave:Ut,hasHoliday:qt,isWeekend:Kt}),console.log(" [REMARKS DEBUG - NO LOGS] For date:",Oe,{locatorRemarks:zt,leaveRemarks:ms,travelRemarks:Yt,holidayRemarks:rs,travelDataCount:(b==null?void 0:b.length)||0,holidayDataCount:(C==null?void 0:C.length)||0});const gt=Wg();kt(gt);const Vt=Kg(Oe,0,f,b,C,o.id,I);Vt&&(da(gt,"absent","Absent"),console.log(" [ABSENT DEBUG - NO LOGS] Added Absent remark for date:",Oe)),gt.flags.hasLeave=Ut,gt.flags.hasTravel=os,gt.flags.hasLocator=gt.flags.hasLocator||xs,gt.flags.isHoliday=gt.flags.isHoliday||qt,gt.flags.isAbsent=gt.flags.isAbsent||Vt,gt.flags.hasCdo=gt.flags.hasCdo||ft,gt.flags.hasCdo=gt.flags.hasCdo||ft;const ts=gt.entries.map(ps=>ps.text).join("; ");return console.log(` [NO LOGS] Returning row for ${Oe}:`,{date:Ll(Oe),remarks:ts,isWeekend:Kt,hasHoliday:qt}),{date:Ll(Oe),dateStr:Oe,displayDate:Ll(Oe),rawDate:Oe,amCheckIn:"-",amCheckOut:"-",pmCheckIn:"-",pmCheckOut:"-",lateMinutes:0,days:os?1:0,remarks:ts,remarkMeta:gt,remarkFlags:gt.flags,leaveStatus:$t,hasOBLeave:Qt,isWeekend:Kt,hasHoliday:qt,hasTravel:os,travelRecords:gs,hasCdo:ft,cdoRecords:tt,holidayDisplay:Jt,holidayNames:es,hasWorkSuspension:be,holidayRecords:si(C,Oe)}}const _t=$d(r),cs=(gt,Xt,Vt,ts,ps)=>{if(!ps)return[null,null];const ys=gt?wr(gt):null,js=Xt?wr(Xt):null;return ys&&js?[sr(ys),sr(js)]:Vt&&ts?[sr(Vt),sr(ts)]:[null,null]},as={amCheckInWindow:cs(r.SHIFT_AMCHECKIN_START,r.SHIFT_AMCHECKIN_END,"04:00","11:59",_t.hasAMCheckIn),amCheckOutWindow:cs(r.SHIFT_AMCHECKOUT_START,r.SHIFT_AMCHECKOUT_END,"11:00","12:30",_t.hasAMCheckOut),pmCheckInWindow:cs(r.SHIFT_PMCHECKIN_START,r.SHIFT_PMCHECKIN_END,"12:31","14:00",_t.hasPMCheckIn),pmCheckOutWindow:cs(r.SHIFT_PMCHECKOUT_START,r.SHIFT_PMCHECKOUT_END,"14:01","23:59",_t.hasPMCheckOut)};console.log(" Time windows (in minutes):",as);const _e=(gt,{pick:Xt="earliest"}={})=>{if(!gt||gt[0]===null||gt[1]===null)return[];const[Vt,ts]=gt;return Vt===null||ts===null?[]:He.map(ps=>({...ps,t:wr(ps.CHECKTIME||ps.DATE||ps.date)})).filter(ps=>{if(!ps.t)return!1;const ys=sr(ps.t);return ys>=Vt&&ys<=ts}).sort((ps,ys)=>{const js=sr(ps.t)-sr(ys.t);return Xt==="latest"?-js:js})},We=_t.hasAMCheckIn?_e(as.amCheckInWindow,{pick:"earliest"}):[],ct=We.length>0?wr(We[0].CHECKTIME||We[0].DATE||We[0].date):"",Ye=_t.hasAMCheckOut?_e(as.amCheckOutWindow,{pick:"earliest"}):[],te=Ye.length>0?wr(Ye[0].CHECKTIME||Ye[0].DATE||Ye[0].date):"",Me=_t.hasPMCheckIn?_e(as.pmCheckInWindow,{pick:"earliest"}):[],rt=Me.length>0?wr(Me[0].CHECKTIME||Me[0].DATE||Me[0].date):"",xt=_t.hasPMCheckOut?_e(as.pmCheckOutWindow,{pick:"latest"}):[],Mt=xt.length>0?wr(xt[0].CHECKTIME||xt[0].DATE||xt[0].date):"";console.log(" Found logs:",{amCheckIn:((bt=We[0])==null?void 0:bt.CHECKTIME)||null,amCheckOut:((dt=Ye[0])==null?void 0:dt.CHECKTIME)||null,pmCheckIn:((It=Me[0])==null?void 0:It.CHECKTIME)||null,pmCheckOut:((Et=xt[0])==null?void 0:Et.CHECKTIME)||null}),console.log(" Extracted times:",{amCheckInTime:ct,amCheckOutTime:te,pmCheckInTime:rt,pmCheckOutTime:Mt});const Ee=gt=>{const Xt=(gt==null?void 0:gt.assignedShifts)||[],Vt=ts=>{const ps=Xt.find(js=>(js.shiftMode||js.period||"").toUpperCase()===ts),ys=ps==null?void 0:ps.credits;return ys!=null?Number(ys):0};return{AM:Vt("AM"),PM:Vt("PM"),AMPM:Vt("AMPM")}},$e=(()=>{if(Ut||qt)return console.log(" [DAYS CALC] Holiday or Leave - 0 days credit"),0;const Vt=_t.hasAMCheckIn&&ct!=="",ts=_t.hasAMCheckOut&&te!=="",ps=_t.hasPMCheckIn&&rt!=="",ys=_t.hasPMCheckOut&&Mt!=="";console.log(" [DAYS CALC] Checking day calculation:",{date:Oe,activeColumns:_t,hasAMCheckIn:Vt,hasAMCheckOut:ts,hasPMCheckIn:ps,hasPMCheckOut:ys,amCheckInTime:ct,amCheckOutTime:te,pmCheckInTime:rt,pmCheckOutTime:Mt});const js=Ee(r);if(_t.hasAMCheckIn&&_t.hasPMCheckOut&&!_t.hasAMCheckOut&&!_t.hasPMCheckIn){const pe=Number(js.AMPM)||0,H=Vt?pe/2:0,ie=ys?pe/2:0,ae=Number((H+ie).toFixed(2));return console.log(" [DAYS CALC] AMPM shift credit:",ae),ae}let Fs=0;const ce=Number(js.AM)||0,je=Number(js.PM)||0,de=Vt&&ts,Fe=ps&&ys;if(Vt&&!ts&&Fe){Fs=ce+je;const pe=Number(Fs.toFixed(2));return console.log(" [DAYS CALC] Special Case 1 - Full sum:",pe),pe}if(de&&!ps&&ys){Fs=ce+je;const pe=Number(Fs.toFixed(2));return console.log(" [DAYS CALC] Special Case 2 - Full sum:",pe),pe}if(!Vt&&ts&&Fe){Fs=(ce+je)/2;const pe=Number(Fs.toFixed(2));return console.log(" [DAYS CALC] Special Case 3 - Half sum:",pe),pe}if(de&&ps&&!ys){Fs=(ce+je)/2;const pe=Number(Fs.toFixed(2));return console.log(" [DAYS CALC] Special Case 4 - Half sum:",pe),pe}if(Vt&&!ts&&!ps&&ys){Fs=ce+je;const pe=Number(Fs.toFixed(2));return console.log(" [DAYS CALC] Special Case 5 - Full sum:",pe),pe}de&&(Fs+=ce),Fe&&(Fs+=je);const se=Number(Fs.toFixed(2));return console.log(" [DAYS CALC] Standard calculation:",se),se})(),et=(()=>{let gt=0;if(_t.hasAMCheckIn&&ct&&r.SHIFT_AMCHECKIN){const Xt=sr(wr(r.SHIFT_AMCHECKIN)),ts=sr(ct)-Xt;ts>0&&(gt+=ts)}if(_t.hasPMCheckIn&&rt&&r.SHIFT_PMCHECKIN){const Xt=sr(wr(r.SHIFT_PMCHECKIN)),ts=sr(rt)-Xt;ts>0&&(gt+=ts)}if(_t.hasAMCheckOut&&te&&r.SHIFT_AMCHECKOUT){const Xt=sr(wr(r.SHIFT_AMCHECKOUT)),Vt=sr(te);if(Vt<Xt){const ts=Xt-Vt;gt+=ts}}if(_t.hasPMCheckOut&&Mt&&r.SHIFT_PMCHECKOUT){const Xt=sr(wr(r.SHIFT_PMCHECKOUT)),Vt=sr(Mt);if(Vt<Xt){const ts=Xt-Vt;gt+=ts}}return gt})();console.log(" Day calculations:",{days:$e,late:et});const Te=[ct,te,rt,Mt].filter(gt=>gt&&gt.trim()!=="").length,he=Wg();kt(he),console.log(" [REMARKS DEBUG] For date:",Oe,{locatorRemarks:zt,leaveRemarks:ms,travelRemarks:Yt,holidayRemarks:rs,travelDataCount:(b==null?void 0:b.length)||0,holidayDataCount:(C==null?void 0:C.length)||0});const Ue=Kg(Oe,Te,f,b,C,o.id,I);Ue&&(da(he,"absent","Absent"),console.log(" [ABSENT DEBUG] Added Absent remark for date:",Oe)),he.flags.hasLeave=Ut,he.flags.hasTravel=os,he.flags.hasLocator=he.flags.hasLocator||xs,he.flags.isHoliday=he.flags.isHoliday||qt,he.flags.isAbsent=he.flags.isAbsent||Ue,he.flags.hasCdo=he.flags.hasCdo||ft;const ht=new Date().toISOString().split("T")[0],st=Oe>ht;if(!Kt&&!(Oe===ht)&&!st&&!xs&&!Ut&&!os&&!qt){const gt=$d(r),Xt=(gt.hasAMCheckIn?1:0)+(gt.hasAMCheckOut?1:0)+(gt.hasPMCheckIn?1:0)+(gt.hasPMCheckOut?1:0);Te>0&&Te<Xt&&(da(he,"action","File a locator"),console.log(" [LOCATOR DEBUG] Added File a locator remark for date:",{dateStr:Oe,timeLogCount:Te,expectedLogCount:Xt,activeColumns:gt}))}const vt=he.entries.map(gt=>gt.text).join("; ");return{date:Ll(Oe),dateStr:Oe,displayDate:Ll(Oe),rawDate:Oe,amCheckIn:ct,amCheckOut:te,pmCheckIn:rt,pmCheckOut:Mt,lateMinutes:et,days:$e,remarks:vt,remarkMeta:he,remarkFlags:he.flags,leaveStatus:$t,hasOBLeave:Qt,isWeekend:Kt,hasHoliday:qt,hasCdo:ft,hasTravel:os,travelRecords:gs,cdoRecords:tt,shiftSchedule:r.SHIFTNAME,holidayDisplay:Jt,holidayNames:es,hasWorkSuspension:be,holidayRecords:si(C,Oe)}}),mt=_C(Be,m,r),qe=kC(mt,F,I,r);console.log(" Final processed days:",qe),console.log(" [DEBUG] Sample processed log:",qe[0]),d(qe),l&&l(qe)},[D,r,m,f,b,o,s,C,I,_,F,l]);const ue=fe=>{k(fe),O(!0)},we=()=>{O(!1),k("")},De=async fe=>{var Pe;if(!I){alert("Employee information not found. Please try again.");return}try{await oe.post("/employee-locators",{emp_objid:I,locatordate:M,locdestination:fe.locdestination,loctimedeparture:fe.loctimedeparture,loctimearrival:fe.loctimearrival,locpurpose:fe.locpurpose,locstatus:"For Approval",isportal:1,createdby:null});const{startDate:Le,endDate:ut}=ye(),qe=(((Pe=(await oe.get("/employee-locators",{params:{emp_objid:I,from:Le,to:ut}})).data)==null?void 0:Pe.data)||[]).map(Oe=>{const He=Oe.loctimedeparture||Oe.locdeparture||Oe.LOCTIMEDEPARTURE,Kt=Oe.loctimearrival||Oe.locarrival||Oe.LOCTIMEARRIVAL,rs=Vl(He),qt=Vl(Kt);return{LOCDATE:Oe.locatordate,LOCREMARKS:Oe.locremarks||"Locator filed",LOCSTATUS:Oe.locstatus||"For Approval",objid:Oe.objid,locatordate:Oe.locatordate,locstatus:Oe.locstatus||"For Approval",loctimedeparture:He||null,loctimearrival:Kt||null,departureTime:rs.time,arrivalTime:qt.time,departureMinutes:rs.minutes,arrivalMinutes:qt.minutes}});u(qe),we()}catch(Le){throw console.error("Error saving locator:",Le),alert("Failed to save locator. Please try again."),Le}},le=fe=>{fe&&(re(fe),Ne(!0))},Ie=()=>{Ne(!1),re(null)},ge=fe=>{fe&&(Z(fe),xe(!0))},Ge=()=>{xe(!1),Z(null)},ke=fe=>{const Pe=(fe||"").toUpperCase();return Pe==="APPROVED"?"bg-green-100 text-green-800":Pe==="REJECTED"?"bg-red-100 text-red-800":Pe==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"},Re=(fe,Pe,Le)=>{var xs;if(!fe)return null;let ut=fe;typeof ut=="string"&&(ut={entries:ut.split("; ").map(ms=>({type:"legacy",text:ms})),flags:{}});const Be=Array.isArray(ut.entries)?ut.entries:[];if(!Be.length)return null;const mt=!!((xs=ut.flags)!=null&&xs.hasLocator),qe=Pe&&o?AC(f,Pe,o.id,I):[],Oe=Array.isArray(Le==null?void 0:Le.holidayNames)?Le.holidayNames:[],He=new Set(Oe),Kt=(Le==null?void 0:Le.holidayDisplay)||null,rs=!!(Le!=null&&Le.hasWorkSuspension),qt=!!(Le!=null&&Le.hasHoliday),zt={leave:"#7c3aed",travel:"#16a34a",absent:"#ea580c",holiday:"#dc2626",locator:"#ec4899",cdo:"#0f766e",weekend:"#60a5fa"};return Be.map((ms,Ut)=>{if(!ms||!ms.text)return null;const{type:$t,text:Qt,data:gs}=ms,Yt=Qt.trim(),Zt=Ut===Be.length-1?null:"; ",Jt=Yt.toLowerCase();if($t==="locator"){const es=Yt.match(/^Locator\((.+)\)$/);if(es){const be=es[1],nt=ke(be);return e.jsxs("span",{children:[e.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${nt}`,style:{color:zt.locator},children:["Locator(",be,")"]}),Zt]},`${$t}-${Ut}`)}return e.jsxs("span",{style:{color:zt.locator,fontWeight:600},children:[Yt,Zt]},`${$t}-${Ut}`)}if($t==="action"){if(Jt.includes("file a locator")&&!mt){if(!!(Le!=null&&Le.fixLog))return null;const be=zt.locator,nt="#1d4ed8";return e.jsxs("span",{style:{color:be},children:[e.jsx("button",{className:"underline cursor-pointer",style:{backgroundColor:"transparent",border:"none",padding:0,font:"inherit",color:be,textDecorationColor:be},onMouseEnter:tt=>{tt.target.style.setProperty("color",nt,"important"),tt.target.style.setProperty("text-decoration-color",nt,"important")},onMouseLeave:tt=>{tt.target.style.setProperty("color",be,"important"),tt.target.style.setProperty("text-decoration-color",be,"important")},onClick:tt=>{tt.preventDefault(),tt.stopPropagation(),Pe&&ue(Pe)},children:Yt}),Zt]},`${$t}-${Ut}`)}return null}if($t==="holiday"){const es=zt.holiday,be="#b91c1c",nt=rs&&Jt.includes("work suspension");return e.jsxs("span",{style:{color:es},children:[e.jsx("button",{className:"underline cursor-pointer",style:{backgroundColor:"transparent",border:"none",padding:0,font:"inherit",color:es,textDecorationColor:es,fontSize:nt?"9px":void 0},onMouseEnter:tt=>{tt.target.style.setProperty("color",be,"important"),tt.target.style.setProperty("text-decoration-color",be,"important")},onMouseLeave:tt=>{tt.target.style.setProperty("color",es,"important"),tt.target.style.setProperty("text-decoration-color",es,"important")},onClick:tt=>{tt.preventDefault(),tt.stopPropagation();const ft=si(C,(Le==null?void 0:Le.rawDate)||Pe)||[],kt=Yt.toLowerCase(),_t=ft.find(cs=>{const as=(Lf(cs)||"").toLowerCase();return as===kt||kt.includes(as)||as.includes(kt)})||ft.find(cs=>{var _e,We;const as=((We=(_e=Yg([cs],(Le==null?void 0:Le.rawDate)||Pe))==null?void 0:_e.display)==null?void 0:We.toLowerCase())||"";return as===kt||kt.includes(as)||as.includes(kt)})||ft[0]||null;_t&&(B(OC(_t)),P(!0))},children:Yt}),Zt]},`${$t}-${Ut}`)}if($t==="leave"){const es=Yt.match(/^Leave\((.+?)\)$/);if(es){const be=es[1],nt=qe.find(tt=>(tt.leaveno||tt.LEAVEREFNO)===be);if(nt){const tt=zt.leave,ft="#6d28d9";return e.jsxs("span",{style:{color:tt,display:"inline"},children:[e.jsx("button",{className:"underline cursor-pointer",ref:kt=>{kt&&(kt.style.setProperty("color",tt,"important"),kt.style.setProperty("text-decoration-color",tt,"important"))},style:{backgroundColor:"transparent",border:"none",padding:0,font:"inherit",cursor:"pointer",textDecorationColor:tt},onMouseEnter:kt=>{kt.target.style.setProperty("color",ft,"important"),kt.target.style.setProperty("text-decoration-color",ft,"important")},onMouseLeave:kt=>{kt.target.style.setProperty("color",tt,"important"),kt.target.style.setProperty("text-decoration-color",tt,"important")},onClick:kt=>{kt.preventDefault(),kt.stopPropagation(),X(nt),G(!0)},children:Yt}),Zt]},`${$t}-${Ut}`)}}}if($t==="travel"){const es=Array.isArray(Le==null?void 0:Le.travelRecords)?Le.travelRecords.find(be=>{const nt=be.reference||be.travelno||be.TRAVELNO||be.travel_no||"N/A";return Yt.includes(nt)}):null;if(es){const be=zt.travel,nt="#047857";return e.jsxs("span",{style:{color:be},children:[e.jsx("button",{className:"underline cursor-pointer",style:{backgroundColor:"transparent",border:"none",padding:0,font:"inherit",color:be,textDecorationColor:be},onMouseEnter:tt=>{tt.target.style.setProperty("color",nt,"important"),tt.target.style.setProperty("text-decoration-color",nt,"important")},onMouseLeave:tt=>{tt.target.style.setProperty("color",be,"important"),tt.target.style.setProperty("text-decoration-color",be,"important")},onClick:tt=>{tt.preventDefault(),tt.stopPropagation(),le(es.raw||es)},children:Yt}),Zt]},`${$t}-${Ut}`)}}if($t==="cdo"){const be=(Array.isArray(Le==null?void 0:Le.cdoRecords)?Le.cdoRecords:[]).find(ft=>[ft==null?void 0:ft.displayRef,ft==null?void 0:ft.cdono,ft==null?void 0:ft.CDONO].map(_t=>_t!=null?String(_t).trim():"").filter(Boolean).some(_t=>Yt.includes(_t)))||gs||null,nt=zt.cdo,tt="#0d9488";return be?e.jsxs("span",{style:{color:nt},children:[e.jsx("button",{className:"underline cursor-pointer",style:{backgroundColor:"transparent",border:"none",padding:0,font:"inherit",color:nt,textDecorationColor:nt},onMouseEnter:ft=>{ft.target.style.setProperty("color",tt,"important"),ft.target.style.setProperty("text-decoration-color",tt,"important")},onMouseLeave:ft=>{ft.target.style.setProperty("color",nt,"important"),ft.target.style.setProperty("text-decoration-color",nt,"important")},onClick:ft=>{ft.preventDefault(),ft.stopPropagation(),ge(be)},children:Yt}),Zt]},`${$t}-${Ut}`):e.jsxs("span",{style:{color:nt,fontWeight:600},children:[Yt,Zt]},`${$t}-${Ut}`)}if($t==="weekend"||Yt==="Weekend")return e.jsxs("span",{style:{color:zt.weekend,fontWeight:600},children:[Yt,Zt]},`${$t}-${Ut}`);if($t==="absent"||Yt==="Absent")return e.jsxs("span",{style:{color:zt.absent,fontWeight:600},children:[Yt,Zt]},`${$t}-${Ut}`);if($t==="legacy"){if(Jt.includes("locator"))return e.jsxs("span",{style:{color:zt.locator,fontWeight:600},children:[Yt,Zt]},`${$t}-${Ut}`);if(qt&&(He.has(Yt)||Jt.includes("holiday")||Kt&&Kt.toLowerCase().includes(Jt)))return e.jsxs("span",{style:{color:zt.holiday,fontWeight:rs&&Jt.includes("work suspension")?600:500,fontSize:rs&&Jt.includes("work suspension")?"9px":void 0},children:[Yt,Zt]},`${$t}-${Ut}`);if(Jt.includes("travel"))return e.jsxs("span",{style:{color:zt.travel,fontWeight:600},children:[Yt,Zt]},`${$t}-${Ut}`);if(Jt.includes("cdo"))return e.jsxs("span",{style:{color:zt.cdo,fontWeight:600},children:[Yt,Zt]},`${$t}-${Ut}`);if(Jt.includes("leave")||Jt.includes("ob"))return e.jsxs("span",{style:{color:zt.leave,fontWeight:600},children:[Yt,Zt]},`${$t}-${Ut}`)}return e.jsxs("span",{className:"text-gray-600",children:[Yt,Zt]},`${$t}-${Ut}`)})},Xe=x.useMemo(()=>{if(!r)return"STANDARD";if((Array.isArray(r.assignedShifts)?r.assignedShifts.map(mt=>(mt.shiftMode||mt.period||"").toString().toUpperCase()).filter(Boolean):[]).includes("AMPM"))return"AMPM";const Pe=!!r.SHIFT_AMCHECKIN,Le=!!r.SHIFT_AMCHECKOUT,ut=!!r.SHIFT_PMCHECKIN,Be=!!r.SHIFT_PMCHECKOUT;return Pe&&Be&&!Le&&!ut?"AMPM":"STANDARD"},[r])==="AMPM",Se=x.useMemo(()=>[{key:"AM_CHECKIN",label:"AM Check-in",dataKey:"amCheckIn",columnType:"AM_CHECKIN",hideOnAmpm:!1},{key:"AM_CHECKOUT",label:"AM Check-out",dataKey:"amCheckOut",columnType:"AM_CHECKOUT",hideOnAmpm:!0},{key:"PM_CHECKIN",label:"PM Check-in",dataKey:"pmCheckIn",columnType:"PM_CHECKIN",hideOnAmpm:!0},{key:"PM_CHECKOUT",label:"PM Check-out",dataKey:"pmCheckOut",columnType:"PM_CHECKOUT",hideOnAmpm:!1}],[]),lt=x.useMemo(()=>Se.map(()=>"minmax(100px, 1fr)").join(" ")||"minmax(100px, 1fr)",[Se]),it=x.useMemo(()=>`minmax(120px, 1.5fr) ${lt} minmax(80px, 0.8fr) minmax(150px, 2fr)`,[lt]);if(j)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Loading logs..."})]})});if(v)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md mx-auto bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-lg",children:[e.jsx("strong",{className:"font-bold",children:"Error:"})," ",v]})});const Pt=r&&(r.SHIFTNAME||((Ce=r.assignedShifts)==null?void 0:Ce.length)>0||r.SHIFT_AMCHECKIN||r.SHIFT_AMCHECKOUT||r.SHIFT_PMCHECKIN||r.SHIFT_PMCHECKOUT);if(console.log(" [MyShiftView] Shift schedule check:",{hasShiftSchedule:!!r,shiftName:r==null?void 0:r.SHIFTNAME,assignedShiftsCount:((Ze=r==null?void 0:r.assignedShifts)==null?void 0:Ze.length)||0,hasAMCheckIn:!!(r!=null&&r.SHIFT_AMCHECKIN),hasAMCheckOut:!!(r!=null&&r.SHIFT_AMCHECKOUT),hasPMCheckIn:!!(r!=null&&r.SHIFT_PMCHECKIN),hasPMCheckOut:!!(r!=null&&r.SHIFT_PMCHECKOUT),hasAnyShift:Pt}),!r||!Pt)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center max-w-md mx-auto",children:e.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-6 py-4 rounded-lg",children:[e.jsx("p",{className:"text-red-500 mb-2 font-semibold",children:"No shift schedule assigned to this employee."}),e.jsx("p",{className:"text-sm text-gray-600",children:"Please assign a shift schedule to view time logs."}),r&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Debug: shiftSchedule exists but hasAnyShift is false. Check console for details."})]})})});if(p)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Loading locator data..."})]})});if(c.length===0)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center max-w-md mx-auto",children:e.jsx("div",{className:"bg-gray-100 border border-gray-300 text-gray-700 px-6 py-8 rounded-lg",children:e.jsx("p",{className:"text-gray-500 text-lg",children:"No logs found for the selected date range."})})})});const At={totalLateMinutes:c.reduce((Pe,Le)=>Pe+(Le.lateMinutes||0),0)};return e.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 rounded-t-xl",children:e.jsxs("div",{className:"grid",style:{gridTemplateColumns:it},children:[e.jsx("div",{className:"px-6 py-4 text-center",children:e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"Date"})}),Se.map(fe=>e.jsx("div",{className:"px-4 py-4 text-center",children:e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:fe.label})},fe.key)),e.jsx("div",{className:"px-4 py-4 text-center",children:e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"Late (min)"})}),e.jsx("div",{className:"px-6 py-4 text-center",children:e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"Remarks"})})]})}),e.jsx("div",{children:c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-lg",children:"No data available"}),e.jsx("div",{className:"text-gray-400 text-sm mt-1",children:s?`No logs found for ${s}`:"No logs found for today"})]}):e.jsx("div",{children:c.map((fe,Pe)=>{const Le=fe.hasHoliday?"bg-red-50":fe.isWeekend?"bg-blue-50":"bg-white",ut=fe.hasHoliday?"text-red-600":fe.isWeekend?"text-blue-600":"text-gray-900",Be=fe.hasHoliday?"text-red-600":"text-gray-900",mt=fe.hasHoliday?"text-red-600":"text-gray-700";return e.jsxs("div",{className:`grid hover:bg-gray-50 transition-colors duration-150 border-b border-gray-100 ${Le}`,style:{gridTemplateColumns:it,minHeight:"60px"},children:[e.jsx("div",{className:"px-6 py-4 flex items-center justify-center",children:e.jsx("div",{className:`text-sm font-semibold text-center ${ut}`,children:fe.date})}),Se.map(qe=>{const Oe=Xe&&qe.hideOnAmpm;return e.jsx("div",{className:"px-4 py-4 flex items-center justify-center",children:e.jsx("div",{className:`text-sm font-mono text-center ${Be}`,children:Oe?e.jsx("span",{className:"text-gray-400",children:"-"}):BC(fe[qe.dataKey],fe,r,qe.columnType)})},`${fe.dateStr}-${qe.key}`)}),e.jsx("div",{className:"px-4 py-4 flex items-center justify-center",children:e.jsx("div",{className:fe.hasHoliday||fe.lateMinutes>0?"text-sm font-semibold text-red-600":"text-sm font-semibold text-gray-500",children:fe.lateMinutes||0})}),e.jsx("div",{className:"px-6 py-4 flex items-center justify-center",children:e.jsx("div",{className:`text-sm text-center ${mt}`,children:Re(fe.remarkMeta,fe.dateStr,fe)})})]},`${fe.dateStr}-${Pe}`)})})}),e.jsx("div",{className:"bg-gradient-to-r from-gray-100 to-gray-200 rounded-b-xl",children:e.jsxs("div",{className:"grid",style:{gridTemplateColumns:it},children:[e.jsx("div",{className:"px-6 py-4 text-center",style:{gridColumn:`span ${1+Se.length}`},children:e.jsx("div",{className:"text-gray-800 font-bold text-sm uppercase tracking-wide",children:"TOTAL"})}),e.jsx("div",{className:"px-4 py-4 text-center",children:e.jsx("div",{className:"text-gray-800 font-bold text-sm",children:At.totalLateMinutes})}),e.jsx("div",{className:"px-6 py-4 text-center",children:e.jsx("div",{className:"text-gray-800 font-bold text-sm"})})]})})]})}),J&&e.jsx(qC,{isOpen:J,onClose:we,onSave:De,selectedDate:M}),z&&R&&e.jsx(WC,{isOpen:z,onClose:()=>{P(!1),B(null)},holiday:R}),Q&&V&&e.jsx(LN,{isOpen:Q,onClose:Ie,travel:V}),ne&&me&&e.jsx(KC,{isOpen:ne,onClose:Ge,cdo:me}),U&&$&&e.jsx(YC,{isOpen:U,onClose:()=>{G(!1),X(null)},leave:$})]})},WC=({isOpen:t,onClose:s,holiday:r})=>{if(!t||!r)return null;const n=a=>{if(!a)return"N/A";const l=wl(a);if(!l)return"N/A";const[i,o,c]=l.split("-").map(Number);return!i||!o||!c?l:new Date(Date.UTC(i,o-1,c)).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Holiday Information"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Holiday Name"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900",children:r.HOLIDAYNAME||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Category"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900",children:r.HOLIDAYCATEGORY||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Type"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900",children:r.HOLIDAYTYPE||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Holiday Date"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900",children:n(r.HOLIDAYDATE)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Description"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900 min-h-[100px]",children:r.HOLIDAYDESCRIPTION||"No description provided"})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{type:"button",onClick:s,className:"px-6 py-2 rounded bg-gray-600 text-white hover:bg-gray-700",children:"Close"})})]})]})})},YC=({isOpen:t,onClose:s,leave:r})=>{if(!t||!r)return null;const n=l=>{if(!l)return"";try{const i=l.split("-");if(i.length===3){const o=i[0],c=i[1],d=i[2];return`${c}/${d}/${o}`}return l}catch{return l}},a=()=>r.details&&Array.isArray(r.details)&&r.details.length>0?r.details.map(l=>{const i=l.deducteddate||l.leavedate||l.LEAVEDATE;if(!i)return null;const o=typeof i=="string"?i:String(i);return n(o)}).filter(Boolean).join(", "):r.inclusivedates&&typeof r.inclusivedates=="string"?r.inclusivedates.split(",").map(i=>i.trim()).filter(i=>i).map(i=>n(i)).join(", "):"N/A";return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Leave Information"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Leave No"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900",children:r.leaveno||r.LEAVEREFNO||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Leave Type"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900",children:r.leave_type_name||r.LeaveName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Mode"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900",children:r.deductmode||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Leave Status"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50",children:(()=>{const l=r.leavestatus||r.LEAVESTATUS||"N/A",i=o=>{switch(o){case"For Approval":return"bg-yellow-100 text-yellow-800";case"Approved":return"bg-green-100 text-green-800";case"Returned":return"bg-blue-100 text-blue-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${i(l)}`,children:l})})()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Inclusive Dates"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900 min-h-[60px]",children:a()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Purpose"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900 min-h-[100px]",children:r.leavepurpose||r.LEAVEREMARKS||"No purpose provided"})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{type:"button",onClick:s,className:"px-6 py-2 rounded bg-gray-600 text-white hover:bg-gray-700",children:"Close"})})]})]})})},KC=({isOpen:t,onClose:s,cdo:r})=>{if(!t||!r)return null;const n=N=>N==null?"N/A":String(N).trim()||"N/A",a=n(r.cdono||r.displayRef),l=n(r.entryStatus||"Approved"),i=n(r.date||r.cdodate),o=n(r.cdoTitle),c=n(r.cdoPurpose),d=n(r.cdoDescription),m=n(r.entryReason||r.cdoRemarks),u=n(r.employeeName),p=n(r.department),g=n(r.position),j=n(r.creditsEarned),y=n(r.creditsUsed),v=n(r.creditsUsedTotal),h=n(r.createdByName),f=n(r.approverName);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"CDO Information"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Reference: ",a]})]}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-3xl font-bold leading-none",children:""})]}),e.jsxs("div",{className:"px-6 py-6 space-y-8",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Employee"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:u})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Department"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:p})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Position"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:g})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Status"}),e.jsx("span",{className:"inline-flex px-3 py-1 rounded-full text-sm font-semibold bg-teal-100 text-teal-800",children:l})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"CDO Date"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:i})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Title"}),e.jsx("span",{className:"text-base text-gray-900",children:o})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Purpose"}),e.jsx("span",{className:"text-base text-gray-900 whitespace-pre-wrap",children:c})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Reason / Remarks"}),e.jsx("span",{className:"text-base text-gray-900 whitespace-pre-wrap",children:m})]}),d!=="N/A"&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Description"}),e.jsx("span",{className:"text-base text-gray-900 whitespace-pre-wrap",children:d})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Credits"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-teal-700 mb-1",children:"Earned"}),e.jsx("span",{className:"text-lg font-semibold text-teal-900",children:j})]}),e.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-teal-700 mb-1",children:"Used (Entry)"}),e.jsx("span",{className:"text-lg font-semibold text-teal-900",children:y})]}),e.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-teal-700 mb-1",children:"Total Used"}),e.jsx("span",{className:"text-lg font-semibold text-teal-900",children:v})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"System Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Filed By"}),e.jsx("span",{className:"text-base text-gray-900",children:h})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Approved By"}),e.jsx("span",{className:"text-base text-gray-900",children:f})]})]})]})]}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 rounded-b-lg border-t border-gray-200 flex justify-end",children:e.jsx("button",{onClick:s,className:"px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors duration-200 font-medium",children:"Close"})})]})})},LN=({isOpen:t,onClose:s,travel:r})=>{if(!t||!r)return null;const n=r.normalizedTravelNo||r.travelno||r.TRAVELNO||r.travel_no||"N/A",a=r.normalizedTravelStatus||r.travelstatus||r.TRAVELSTATUS||r.status||"N/A",l=r.traveldestination||r.destination||"N/A",i=r.purpose||r.TRAVELPURPOSE||"",o=r.createddate||r.CREATEDDATE||null,m=(Array.isArray(r.normalizedTravelDates)&&r.normalizedTravelDates.length>0?r.normalizedTravelDates:typeof r.travel_dates=="string"&&r.travel_dates.trim()!==""?r.travel_dates.split(",").map(b=>b.trim()).filter(Boolean):Array.isArray(r.travel_dates)&&r.travel_dates.length>0?r.travel_dates.filter(Boolean).map(String):r.traveldate?[String(r.traveldate)]:r.TRAVELDATE?[String(r.TRAVELDATE)]:[]).map(b=>{const w=qa(b);return w?Ll(w):b}),u=(b={})=>{const w=(b.name||b.fullname||b.display_name||"").trim(),D=(b.surname||"").trim(),S=(b.firstname||"").trim();let C="",T="";if(D){if(C=D,S)T=S.split(" ")[0];else if(w){const _=w.split(/[ ,]+/).filter(Boolean);_.length&&(T=_[0])}}else if(w)if(w.includes(",")){const[_,E=""]=w.split(",");C=_.trim(),T=E.trim().split(" ").filter(Boolean)[0]||""}else{const _=w.split(" ").filter(Boolean);_.length>=2?(T=_[0],C=_[_.length-1]):C=w}return!C&&!T?bs(b.surname,b.firstname,b.middlename)||"Unknown":[C,T].filter(Boolean).join(", ")||"Unknown"},p=Array.isArray(r.employees)?r.employees.map(b=>{const w=u(b),D=(b==null?void 0:b.photo_path)||(b==null?void 0:b.photo)||null,S=w.split(",").map(C=>C.trim()[0]||"").join("").slice(0,2).toUpperCase()||"NA";return{id:(b==null?void 0:b.objid)||(b==null?void 0:b.id)||w,name:w,photo:D,initials:S}}).filter(b=>!!b.name&&b.name!=="Unknown"):[],g=(b="")=>{const w=b.trim();if(!w)return"";if(w.includes(",")){const[S,C=""]=w.split(","),T=S.trim(),_=C.trim().split(" ").filter(Boolean)[0]||"";return[T,_].filter(Boolean).join(", ")||w}const D=w.split(/\s+/).filter(Boolean);if(D.length>=2){const S=D[0];return`${D[D.length-1]}, ${S}`}return w},j=(b,w,D)=>{const S=b&&String(b).trim()||w&&String(w).trim()||"",T=g(S)||S,_=D||null,A=(T||S||"NA").split(",").map(L=>L.trim()[0]||"").join("").slice(0,2).toUpperCase()||"NA";return{hasData:!!(T||_),displayName:T||"N/A",photo:_,initials:A}},y=j(r.created_by_employee_name,r.created_by_username||r.createdby,r.created_by_photo_path),v=j(r.approved_by_employee_name,r.approved_by_username||r.approvedby,r.approved_by_photo_path),f={Approved:"bg-green-100 text-green-800","For Approval":"bg-yellow-100 text-yellow-800",Returned:"bg-blue-100 text-blue-800",Cancelled:"bg-red-100 text-red-800"}[a]||"bg-gray-100 text-gray-800",N=o||"N/A";return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Travel Information"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),e.jsxs("div",{className:"px-6 py-4 space-y-5",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Travel No"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900",children:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Status"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${f}`,children:a})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Destination"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900",children:l})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Purpose"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900 min-h-[100px]",children:i?e.jsx("div",{dangerouslySetInnerHTML:{__html:i}}):"N/A"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Travel Dates"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900 whitespace-pre-wrap",children:m.length>0?m.join(`
`):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Participants"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900",children:p.length>0?e.jsx("div",{className:"space-y-2",children:p.map(b=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-8 h-8 rounded-full bg-gray-200 border border-gray-300 flex items-center justify-center text-xs font-semibold text-gray-600 ${b.photo?"hidden":""}`,children:b.initials}),b.photo&&e.jsx("img",{src:b.photo,alt:b.name,className:"w-8 h-8 rounded-full object-cover border border-gray-200",onError:w=>{w.currentTarget.style.display="none";const D=w.currentTarget.previousElementSibling;D&&D.classList.remove("hidden")}})]}),e.jsx("span",{children:b.name})]},b.id))}):"N/A"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Created By"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900",children:y.hasData?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-8 h-8 rounded-full bg-gray-200 border border-gray-300 flex items-center justify-center text-xs font-semibold text-gray-600 ${y.photo?"hidden":""}`,children:y.initials}),y.photo&&e.jsx("img",{src:y.photo,alt:y.displayName,className:"w-8 h-8 rounded-full object-cover border border-gray-200",onError:b=>{b.currentTarget.style.display="none";const w=b.currentTarget.previousElementSibling;w&&w.classList.remove("hidden")}})]}),e.jsx("span",{children:y.displayName})]}):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Created Date"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900",children:N})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Approved By"}),e.jsx("div",{className:"w-full border rounded px-3 py-2 bg-gray-50 text-gray-900",children:v.hasData?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-8 h-8 rounded-full bg-gray-200 border border-gray-300 flex items-center justify-center text-xs font-semibold text-gray-600 ${v.photo?"hidden":""}`,children:v.initials}),v.photo&&e.jsx("img",{src:v.photo,alt:v.displayName,className:"w-8 h-8 rounded-full object-cover border border-gray-200",onError:b=>{b.currentTarget.style.display="none";const w=b.currentTarget.previousElementSibling;w&&w.classList.remove("hidden")}})]}),e.jsx("span",{children:v.displayName})]}):"N/A"})]})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t flex justify-end",children:e.jsx("button",{type:"button",onClick:s,className:"px-6 py-2 rounded bg-gray-600 text-white hover:bg-gray-700",children:"Close"})})]})})},qC=({isOpen:t,onClose:s,onSave:r,selectedDate:n})=>{const[a,l]=x.useState({locdestination:"",loctimedeparture:"",loctimearrival:"",locpurpose:""}),[i,o]=x.useState({hours:"",minutes:""}),[c,d]=x.useState({hours:"",minutes:""}),[m,u]=x.useState(!1),[p,g]=x.useState("");x.useEffect(()=>{t&&(l({locdestination:"",loctimedeparture:"",loctimearrival:"",locpurpose:""}),o({hours:"",minutes:""}),d({hours:"",minutes:""}),g(""))},[t]);const j=(h,f,N)=>{f==="departure"?o(b=>{const w={...b,[h]:N},D=w.hours&&w.minutes?`${w.hours}:${w.minutes}`:"";return l(S=>({...S,loctimedeparture:D})),w}):f==="arrival"&&d(b=>{const w={...b,[h]:N},D=w.hours&&w.minutes?`${w.hours}:${w.minutes}`:"";return l(S=>({...S,loctimearrival:D})),w})},y=h=>{l(f=>({...f,[h.target.name]:h.target.value})),g("")},v=async h=>{var N,b;h.preventDefault(),g("");const f=[];if((!a.locdestination||!a.locdestination.trim())&&f.push("Destination"),(!a.loctimedeparture||!a.loctimedeparture.trim())&&f.push("Time Departure"),(!a.loctimearrival||!a.loctimearrival.trim())&&f.push("Time Arrival"),(!a.locpurpose||!a.locpurpose.trim())&&f.push("Purpose"),f.length>0){g(`Please fill in all required fields: ${f.join(", ")}`);return}u(!0);try{await r(a)}catch(w){g(((b=(N=w.response)==null?void 0:N.data)==null?void 0:b.message)||"Failed to save locator. Please try again.")}finally{u(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Add Locator"}),e.jsx("button",{className:"text-gray-500 hover:text-gray-700",onClick:s,children:""})]}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Locator Date"}),e.jsx("input",{type:"date",value:n||"",disabled:!0,className:"w-full border rounded px-3 py-2 bg-gray-100"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Time Departure"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:i.hours,onChange:h=>j("hours","departure",h.target.value),className:"px-3 py-2 border rounded",children:[e.jsx("option",{value:"",children:"HH"}),Array.from({length:24},(h,f)=>f.toString().padStart(2,"0")).map(h=>e.jsx("option",{value:h,children:h},h))]}),e.jsx("span",{children:":"}),e.jsxs("select",{value:i.minutes,onChange:h=>j("minutes","departure",h.target.value),className:"px-3 py-2 border rounded",children:[e.jsx("option",{value:"",children:"MM"}),Array.from({length:60},(h,f)=>f.toString().padStart(2,"0")).map(h=>e.jsx("option",{value:h,children:h},h))]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Time Arrival"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:c.hours,onChange:h=>j("hours","arrival",h.target.value),className:"px-3 py-2 border rounded",children:[e.jsx("option",{value:"",children:"HH"}),Array.from({length:24},(h,f)=>f.toString().padStart(2,"0")).map(h=>e.jsx("option",{value:h,children:h},h))]}),e.jsx("span",{children:":"}),e.jsxs("select",{value:c.minutes,onChange:h=>j("minutes","arrival",h.target.value),className:"px-3 py-2 border rounded",children:[e.jsx("option",{value:"",children:"MM"}),Array.from({length:60},(h,f)=>f.toString().padStart(2,"0")).map(h=>e.jsx("option",{value:h,children:h},h))]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Destination"}),e.jsx("input",{name:"locdestination",type:"text",value:a.locdestination,onChange:y,className:"w-full border rounded px-3 py-2",placeholder:"Enter destination"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Purpose"}),e.jsx("textarea",{name:"locpurpose",value:a.locpurpose,onChange:y,rows:3,className:"w-full border rounded px-3 py-2",placeholder:"Enter purpose"})]}),p&&e.jsx("div",{className:"mb-4 text-red-600 text-sm",children:p}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 rounded border",disabled:m,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-green-600 text-white disabled:opacity-60",disabled:m,children:m?"Saving...":"Save"})]})]})]})}):null},Ud=t=>t&&typeof t=="string"?t.slice(0,10):null,Cc=t=>{if(!t)return null;if(typeof t=="string"){const s=t.match(/(\d{2}):(\d{2})/);return s?`${s[1]}:${s[2]}`:null}return null},VC=t=>{if(!t)return"";const s=new Date(t);if(isNaN(s.getTime()))return t;const r=String(s.getDate()).padStart(2,"0"),n=s.toLocaleString("en-US",{month:"short"}).toUpperCase(),a=s.getFullYear(),l=s.toLocaleString("en-US",{weekday:"short"}).toUpperCase();return`${r}-${n}-${a}, ${l}`},GC=(t,s)=>{console.log(" [generateDateRange] Input:",{start:t,end:s});const r=[];let n=new Date(t);const a=new Date(s);for(;n<=a&&(r.push(n.toISOString().slice(0,10)),n.setDate(n.getDate()+1),!(r.length>1e3)););return console.log(" [generateDateRange] Output:",{datesCount:r.length,firstDate:r[0],lastDate:r[r.length-1],sampleDates:r.slice(0,5)}),r},QC=(t,s,r)=>{if(!t||t.length===0)return"";const n=t.filter(a=>(a.LOCDATE?a.LOCDATE.slice(0,10):"")===s&&String(a.LOCUSERID)===String(r));return n.length===0?"":n.map(a=>a.LOCREMARKS).filter(Boolean).join("; ")},ZC=(t,s,r)=>{if(!t||t.length===0)return null;const n=t.filter(l=>Ud(l.LEAVEDATE)===s&&String(l.USERID)===String(r));return n.length===0?null:n.map(l=>l.LeaveName||"Leave").join("; ")},JC=t=>t.travel_no||t.travelno||t.TRAVELNO||t.reference_no||t.reference||t.cdono||t.TRAVELUID||"",XC=t=>{const s=new Set,r=a=>{if(!a)return;if(Array.isArray(a)){a.forEach(r);return}if(typeof a=="string"){a.split(/[,;]+/).map(i=>i.trim()).forEach(i=>{if(i){const o=Ud(i);o&&s.add(o)}});return}const l=Ud(a);l&&s.add(l)},n=a=>{if(typeof a=="string")try{const l=JSON.parse(a);r(l)}catch{}};return r(t.travel_dates),r(t.travelDates),r(t.travel_dates_array),r(t.travel_dates_list),r(t.travel_dates_raw),r(t.traveldate),r(t.TRAVELDATE),r(t.date),r(t.travel_date),n(t.travel_dates_json),n(t.travelDatesJson),n(t.travel_dates_data),Array.from(s)},e4=t=>{if(!Array.isArray(t))return[];const s=[];return t.forEach(r=>{const n=XC(r),a=JC(r);n.length!==0&&n.forEach(l=>{s.push({date:l,reference:a,raw:r})})}),s},PN=t=>{if(!t)return"";const s=[t==null?void 0:t.HOLIDAYDATE,t==null?void 0:t.holidaydate,t==null?void 0:t.holiday_date,t==null?void 0:t.HolidayDate,t==null?void 0:t.date];for(const r of s){if(r==null)continue;const n=typeof r=="string"?r.trim():String(r);if(!n)continue;if(/^\d{4}-\d{2}-\d{2}$/.test(n))return n;const a=n.split(/[ T]/)[0];if(a)return a}return""},t4=t=>{if(!t)return"Holiday";const s=[t==null?void 0:t.HOLIDAYNAME,t==null?void 0:t.holidayname,t==null?void 0:t.holiday_name,t==null?void 0:t.HolidayName,t==null?void 0:t.description,t==null?void 0:t.name,t==null?void 0:t.HOLIDAYDESC,t==null?void 0:t.holidaydesc];for(const r of s){if(r==null)continue;const n=String(r).trim();if(n)return n}return"Holiday"},up=t=>{const s=(t==null?void 0:t.ISRECURRING)??(t==null?void 0:t.isRecurring)??(t==null?void 0:t.is_recurring)??(t==null?void 0:t.recurring)??(t==null?void 0:t.IS_RECURRING);if(s==null)return!1;if(typeof s=="boolean")return s;if(typeof s=="number")return s===1;const r=String(s).trim().toLowerCase();return r?r==="1"||r==="true"||r==="yes"||r==="y":!1},RN=(t,s)=>{if(!t||t.length===0||!s)return[];const r=s.substring(0,10),n=r.slice(5,10);return t.filter(a=>{const l=PN(a);return l?up(a)?l.slice(5,10)===n:l===r:!1})},s4=(t,s)=>{if(!t||t.length===0)return null;const r=t.filter(a=>a.date===s);return r.length===0?null:r.map(a=>a.reference?`Travel (${a.reference})`:"Travel").join("; ")},r4=(t,s)=>{const r=RN(t,s);return r.length===0?null:r.map(t4).join("; ")},qg=t=>{if(!t||typeof t!="string")return 0;const[s,r]=t.split(":").map(Number);return s*60+r},Vg=t=>{const r=new Date(t).getDay();return r===0||r===6},n4=(t,s)=>RN(t,s).length>0,a4=({user:t,selectedFilter:s,locatorData:r=[],selectedPeriod:n="full",onLogsProcessed:a})=>{const[l,i]=x.useState([]),[o,c]=x.useState(!1),[d,m]=x.useState(null),[u,p]=x.useState([]),[g,j]=x.useState([]),[y,v]=x.useState([]),h=()=>{const S=(n||"").toString().trim().toLowerCase();return console.log(" [getNormalizedPeriod] Input:",{selectedPeriod:n,raw:S,selectedFilter:s}),S==="first_half"||S==="first-half"||S==="first half"||S==="h1"||S==="1st_half"||S==="1st half"?(console.log(" [getNormalizedPeriod] Matched first_half"),"first_half"):S==="second_half"||S==="second-half"||S==="second half"||S==="h2"||S==="2nd_half"||S==="2nd half"?(console.log(" [getNormalizedPeriod] Matched second_half"),"second_half"):S==="full"||S==="whole"||S==="entire"?(console.log(" [getNormalizedPeriod] Matched full"),"full"):(console.log(" [getNormalizedPeriod] Defaulting to full"),"full")},f=()=>new Date().toISOString().slice(0,10),N=()=>{const S=new Date,C=f(),T=h();let _,E;if(console.log(" [RawLogsView_Dtr] Calculating date range:",{selectedFilter:s,selectedPeriod:n,normalizedPeriod:T,currentDate:S.toISOString().slice(0,10)}),s==="Last 2 Weeks"){const A=new Date(S);A.setDate(S.getDate()-13),_=A.toISOString().slice(0,10),E=C}else if(s==="This Month"){const A=S.getFullYear(),L=S.getMonth()+1,F=`${A}-${String(L).padStart(2,"0")}-01`,W=new Date(A,L,0).getDate(),Y=`${A}-${String(L).padStart(2,"0")}-${String(W).padStart(2,"0")}`;T==="first_half"?(_=F,E=`${A}-${String(L).padStart(2,"0")}-15`):T==="second_half"?(_=`${A}-${String(L).padStart(2,"0")}-16`,E=Y):(_=F,E=Y)}else if(s==="Last Month"){const A=S.getFullYear(),L=S.getMonth();let F=A,W=L-1;L===0&&(F=A-1,W=11);const Y=`${F}-${String(W+1).padStart(2,"0")}-01`,q=new Date(F,W+1,0).getDate(),J=`${F}-${String(W+1).padStart(2,"0")}-${String(q).padStart(2,"0")}`;T==="first_half"?(_=Y,E=`${F}-${String(W+1).padStart(2,"0")}-15`):T==="second_half"?(_=`${F}-${String(W+1).padStart(2,"0")}-16`,E=J):(_=Y,E=J)}else _=C,E=C;return console.log(" [RawLogsView_Dtr] Calculated date range:",{startDate:_,endDate:E,period:T,dateRangeLength:_&&E?Math.ceil((new Date(E)-new Date(_))/(1e3*60*60*24))+1:0}),{startDate:_,endDate:E}},b=()=>{p([])},w=async()=>{var S;try{const C=await oe.get("/employee-travels/transactions",{params:{participant:t.id}}),T=((S=C.data)==null?void 0:S.data)||C.data||[];j(e4(Array.isArray(T)?T:[]))}catch(C){console.error(" Error loading travel data:",C)}},D=async()=>{try{const S=new Date().getFullYear(),C=await oe.get("/dtr-holidays");if(C.data.success){const _=(Array.isArray(C.data.data)?C.data.data:[]).filter(E=>{const A=PN(E);return A&&A.slice(0,4)===String(S)||up(E)});v(_)}else v([])}catch(S){console.error(" Error loading holiday data:",S),v([])}};return x.useEffect(()=>{console.log(" [RawLogsView_Dtr] Props changed:",{selectedFilter:s,selectedPeriod:n,user:t==null?void 0:t.id,locatorDataLength:r==null?void 0:r.length})},[s,n,t,r]),x.useEffect(()=>{t&&(b(),w(),D())},[t]),x.useEffect(()=>{let S=!0;return(async()=>{var T,_,E,A;if(!(!t||!t.id)){c(!0),m(null);try{const{startDate:L,endDate:F}=N();console.log(" [RawLogsView_Dtr] Fetching logs with:",{startDate:L,endDate:F,selectedFilter:s,selectedPeriod:n,userId:t.id});const W=await oe.get("/dtr/logs",{params:{userId:t.id,startDate:L,endDate:F}}),Y=Array.isArray(W.data)?W.data:[],q=GC(L,F);console.log(" [RawLogsView_Dtr] Processing data:",{checkInOutLogsLength:Y.length,allDatesLength:q.length,startDate:L,endDate:F,firstDate:q[0],lastDate:q[q.length-1]});const J=q.map(O=>{const M=Y.filter(G=>{const $=G.CHECKTIME||G.checktime||G.CheckTime,X=$?Ud($):"";return $&&X===O}),k=M.filter(G=>{const $=Cc(G.CHECKTIME||G.checktime||G.CheckTime),X=qg($);return X>=0&&X<12*60}),I=M.filter(G=>{const $=Cc(G.CHECKTIME||G.checktime||G.CheckTime),X=qg($);return X>=12*60&&X<=23*60+59}),K=n4(y,O),z=QC(r,O,t.id),P=ZC(u,O,t.id),R=s4(g,O),B=r4(y,O);let U="";if(Vg(O))U="Weekend",z&&(U+="; "+z);else{const G=[z,P,R,B].filter(Boolean);G.length>0&&(U=G.join("; "))}return{date:O,amLogs:k,pmLogs:I,remarks:U,isWeekend:Vg(O),hasHoliday:K}});console.log(" [RawLogsView_Dtr] Final processed logs:",{processedLogsCount:J.length,firstProcessedDate:(T=J[0])==null?void 0:T.date,lastProcessedDate:(_=J[J.length-1])==null?void 0:_.date}),S&&(i(J),a&&a(J))}catch(L){S&&m(((A=(E=L.response)==null?void 0:E.data)==null?void 0:A.message)||"Failed to fetch DTR logs. Please try again.")}finally{S&&c(!1)}}})(),()=>{S=!1}},[t,r,s,n,u,g,y]),o?e.jsx("div",{className:"bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading logs..."})]})}):d?e.jsx("div",{className:"bg-gray-50 min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg max-w-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("strong",{className:"font-bold",children:"Error:"})]}),e.jsx("p",{className:"mt-1",children:d})]})}):e.jsx("div",{className:"bg-gray-50 min-h-screen",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 rounded-t-xl overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-4 gap-0 w-full",style:{gridTemplateColumns:"1fr 2fr 2fr 1fr",width:"100%"},children:[e.jsx("div",{className:"px-6 py-4 text-center flex items-center justify-center",children:e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"Date"})}),e.jsxs("div",{className:"px-4 py-4 text-center flex items-center justify-center",children:[e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"AM Logs"}),e.jsx("div",{className:"text-blue-100 text-xs font-normal ml-2",children:"(00:00-11:59)"})]}),e.jsxs("div",{className:"px-4 py-4 text-center flex items-center justify-center",children:[e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"PM Logs"}),e.jsx("div",{className:"text-blue-100 text-xs font-normal ml-2",children:"(12:00-23:59)"})]}),e.jsx("div",{className:"px-6 py-4 text-center flex items-center justify-center",children:e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"Remarks"})})]})}),e.jsx("div",{children:l.length>0?l.map((S,C)=>e.jsxs("div",{className:`grid grid-cols-4 hover:bg-gray-50 transition-colors duration-150 border-b border-gray-100 ${S.isWeekend?"bg-blue-50":"bg-white"}`,style:{gridTemplateColumns:"1fr 2fr 2fr 1fr"},children:[e.jsx("div",{className:"px-6 py-4 flex items-center justify-center",children:e.jsx("div",{className:`text-sm font-semibold ${S.isWeekend?"text-blue-600":S.hasHoliday?"text-red-600":"text-gray-900"}`,children:VC(S.date)})}),e.jsx("div",{className:"px-4 py-4 flex items-center",children:e.jsx("div",{className:"text-sm font-mono text-gray-700",children:S.amLogs&&S.amLogs.length>0?S.amLogs.map(T=>Cc(T.CHECKTIME||T.checktime||T.CheckTime)).filter(Boolean).join(", "):"-"})}),e.jsx("div",{className:"px-4 py-4 flex items-center",children:e.jsx("div",{className:"text-sm font-mono text-gray-700",children:S.pmLogs&&S.pmLogs.length>0?S.pmLogs.map(T=>Cc(T.CHECKTIME||T.checktime||T.CheckTime)).filter(Boolean).join(", "):"-"})}),e.jsx("div",{className:"px-6 py-4 flex items-center justify-center",children:e.jsx("div",{className:`text-sm font-medium ${S.isWeekend?"text-blue-600":S.hasHoliday?"text-red-600":"text-gray-700"}`,children:S.remarks||"-"})})]},`${S.date}-${C}`)):e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-indigo-100 to-blue-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsx("div",{className:"text-gray-600 text-lg font-semibold mb-2",children:"No data available"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"Please select a different date range or check your connection."})]})})}),e.jsx("div",{className:"bg-gradient-to-r from-gray-100 to-gray-200 rounded-b-xl overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-4 gap-0 w-full",style:{gridTemplateColumns:"1fr 2fr 2fr 1fr",width:"100%"},children:[e.jsx("div",{className:"px-6 py-4 text-center flex items-center justify-center",children:e.jsx("div",{className:"text-gray-800 font-bold text-sm uppercase tracking-wide",children:"Total"})}),e.jsx("div",{className:"px-4 py-4 text-center flex items-center justify-center",children:e.jsx("div",{className:"text-blue-600 font-bold text-sm",children:l.reduce((S,C)=>S+(C.amLogs?C.amLogs.length:0),0)})}),e.jsx("div",{className:"px-4 py-4 text-center flex items-center justify-center",children:e.jsx("div",{className:"text-blue-600 font-bold text-sm",children:l.reduce((S,C)=>S+(C.pmLogs?C.pmLogs.length:0),0)})}),e.jsx("div",{className:"px-6 py-4 text-center flex items-center justify-center",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Total Logs"})})]})})]})})})},Gg=({formData:t,children:s=[],education:r=[],displayValue:n,formatDate:a,employeeMedia:l=[]})=>{Array.from({length:60},(o,c)=>c+1);const i=o=>{if(!o)return"";if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(o))return o;try{const c=new Date(o);if(isNaN(c.getTime()))return console.log("Invalid child birth date:",o),o;const d=(c.getMonth()+1).toString().padStart(2,"0"),m=c.getDate().toString().padStart(2,"0"),u=c.getFullYear();return`${d}/${m}/${u}`}catch(c){return console.log("Child birth date formatting error:",c,"for date:",o),o}};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          @media print {
            @page {
              size: 8.5in 13in;
              margin: 0.25in;
            }
            body {
              margin: 0;
              padding: 0;
              font-size: 9px;
              line-height: 1.1;
            }
            .pds-table {
              border-collapse: collapse !important;
              font-size: 8px !important;
              line-height: 1.0 !important;
            }
            .pds-table td {
              padding: 2px 3px !important;
              border: 1px solid #000 !important;
              vertical-align: top !important;
              white-space: normal !important;
              word-wrap: break-word !important;
              overflow-wrap: break-word !important;
            }
            .field-label {
              font-weight: normal !important;
              background-color: #f8f8f8 !important;
            }
            .field-value {
              background-color: white !important;
            }
            .section-title {
              background-color: #e0e0e0 !important;
              font-weight: bold !important;
              text-align: center !important;
            }
            .no-page-break {
              page-break-inside: avoid !important;
            }
            .checkbox {
              font-size: 12px !important;
              font-weight: bold !important;
              color: #000 !important;
              display: inline-block !important;
              margin-right: 3px !important;
            }
          }
        `}),e.jsxs("div",{className:"no-page-break",style:{width:"100%",maxWidth:"8.5in",margin:"0 auto",padding:"0.25in",fontSize:"10px",lineHeight:"1.3",fontFamily:"Arial, sans-serif",backgroundColor:"white",color:"black"},children:[e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"17%"}}),e.jsx("col",{style:{width:"9%"}}),e.jsx("col",{style:{width:"9%"}}),e.jsx("col",{style:{width:"16%"}}),e.jsx("col",{style:{width:"5%"}}),e.jsx("col",{style:{width:"9%"}}),e.jsx("col",{style:{width:"7%"}}),e.jsx("col",{style:{width:"9%"}}),e.jsx("col",{style:{width:"9%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{style:{height:"15px"},children:e.jsxs("td",{colSpan:"9",className:"pds-header-main",style:{textAlign:"left",fontSize:"8px",padding:"10px 0"},children:["CS Form No. 212 - Revised 2017",e.jsx("br",{})]})}),e.jsx("tr",{style:{height:"70px"},children:e.jsx("td",{colSpan:"9",className:"pds-header-main",style:{topcellborder:"transparent",textAlign:"center",verticalAlign:"middle",fontWeight:"bold",fontSize:"22px",padding:"10px 0"},children:"PERSONAL DATA SHEET"})}),e.jsx("tr",{children:e.jsxs("td",{colSpan:"9",className:"warning-text",style:{fontSize:"12px",padding:"8px 0",fontWeight:"normal"},children:["WARNING: Ang misrepresentation made in the Personal Data Sheet and the Work Experience Sheet shall cause the filing of  administrative/criminal case/s against the person concerned.",e.jsx("br",{}),e.jsx("br",{})," READ THE ATTACHED GUIDE TO FILLING OUT THE PERSONAL DATA SHEET (PDS) BEFORE ACCOMPLISHING THE PDS FORM",e.jsx("br",{})]})}),e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"filling-guidelines",style:{fontSize:"10px",padding:"8px 0"},children:"Print legibly. Tick appropriate []xes () and use separate sheet if necessary. Indicate N/A if not applicable. DO NOT 1. CS ID No [ ] (Do not fill up. For CSC use only)"})}),e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"I. PERSONAL INFORMATION"})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",children:"2. SURNAME"}),e.jsx("td",{className:"field-value",colSpan:"8",style:{textAlign:"left",verticalAlign:"middle"},children:n(t.surname)})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",children:"FIRST NAME"}),e.jsx("td",{className:"field-value",colspan:"4",style:{textAlign:"left",verticalAlign:"middle"},children:n(t.firstname)}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"left",verticalAlign:"middle"},children:"NAME EXTENSION (JR.,SR)"}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"left",verticalAlign:"middle"},children:n(t.name_extension)})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{textAlign:"left",verticalAlign:"middle"},children:"MIDDLE NAME"}),e.jsx("td",{className:"field-value",colSpan:"8",style:{textAlign:"left",verticalAlign:"middle"},children:n(t.middlename)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"3. DATE OF BIRTH (mm/dd/yyyy)"}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle",whiteSpace:"normal",wordWrap:"break-word"},children:n(t.date_of_birth)}),e.jsx("td",{className:"field-label",colspan:"2",rowspan:"2",children:"16. CITIZENSHIP"}),e.jsxs("td",{className:"field-value",rowspan:"2",children:[e.jsx("span",{className:"checkbox",children:t.citizenship_filipino?"":""})," Filipino"]}),e.jsxs("td",{className:"field-value",colspan:"3",children:[e.jsx("span",{className:"checkbox",children:t.citizenship_dual?"":""})," Dual Citizenship"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"4. PLACE OF BIRTH"}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.place_of_birth)}),e.jsxs("td",{className:"field-value",children:[e.jsx("span",{className:"checkbox",children:t.dual_citizenship_type==="by birth"?"":""})," by birth"]}),e.jsxs("td",{className:"field-value",colspan:"2",children:[e.jsx("span",{className:"checkbox",children:(()=>{console.log("=== DUAL CITIZENSHIP DEBUG ==="),console.log("dual_citizenship_type:",t.dual_citizenship_type),console.log("Type of dual_citizenship_type:",typeof t.dual_citizenship_type),console.log("citizenship_dual:",t.citizenship_dual),console.log("citizenship_filipino:",t.citizenship_filipino),console.log("dual_citizenship_country:",t.dual_citizenship_country),console.log("All formData keys:",Object.keys(t));const o=t.dual_citizenship_type==="by naturalization"||t.dual_citizenship_type==="naturalization"||t.dual_citizenship_type==="By Naturalization"||t.dual_citizenship_type==="NATURALIZATION"||t.dual_citizenship_type&&t.dual_citizenship_type.toLowerCase().includes("naturalization"),c=t.citizenship_dual===!0||t.citizenship_dual==="true"||t.citizenship_dual===1,d=t.dual_citizenship_country&&t.dual_citizenship_country.toLowerCase().includes("naturalization"),m=o||c&&d;return console.log("Is naturalization (any variation):",o),console.log("Has dual citizenship:",c),console.log("Has naturalization in country:",d),console.log("Final result:",m),console.log("Final checkbox result:",m?"":""),m?"":""})()})," by naturalization"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"5. SEX"}),e.jsxs("td",{className:"field-value",colSpan:"2",children:[e.jsxs("span",{className:"checkbox-field",children:[e.jsx("span",{className:"checkbox",children:t.sex==="Male"?"":""})," Male"]}),e.jsxs("span",{className:"checkbox-field",style:{marginLeft:"20px"},children:[e.jsx("span",{className:"checkbox",children:t.sex==="Female"?"":""})," Female"]})]}),e.jsx("td",{className:"field-value",colspan:"2",children:"If holder of dual citizenship, please indicate the details."}),e.jsx("td",{className:"field-value",colSpan:"4",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.dual_citizenship_country)||"N/A"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowSpan:"4",children:"6. CIVIL STATUS"}),e.jsx("td",{className:"field-value",rowSpan:"4",children:e.jsxs("div",{className:"civil-status-layout",children:[e.jsxs("div",{children:[e.jsx("span",{className:"checkbox",children:t.civil_status==="Single"?"":""})," Single"]}),e.jsxs("div",{children:[e.jsx("span",{className:"checkbox",children:t.civil_status==="Widowed"?"":""})," Widowed"]}),e.jsxs("div",{children:[e.jsx("span",{className:"checkbox",children:t.civil_status==="Other/s"?"":""})," Other/s"]})]})}),e.jsx("td",{className:"field-value",rowSpan:"4",children:e.jsxs("div",{className:"civil-status-layout",children:[e.jsxs("div",{children:[e.jsx("span",{className:"checkbox",children:t.civil_status==="Married"?"":""})," Married"]}),e.jsxs("div",{children:[e.jsx("span",{className:"checkbox",children:t.civil_status==="Separated"?"":""})," Separated"]})]})}),e.jsx("td",{className:"field-label",rowspan:"6",children:"17. RESIDENTIAL ADDRESS"}),e.jsx("td",{className:"field-value",colSpan:"3",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_house_block_lot)}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_street)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",verticalAlign:"middle"},children:"House/Block/Lot No"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"Street"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-value",colspan:"3",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_subdivision_village)}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_barangay)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Subdivision/Village"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Barangay"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"7. HEIGHT (m)"}),e.jsx("td",{className:"field-value",colSpan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.height)}),e.jsx("td",{className:"field-value",colspan:"3",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_city_municipality)}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_province)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",children:"8. WEIGHT (kg)"}),e.jsx("td",{className:"field-value",colSpan:"2",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.weight)}),e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"City/Municipality"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Province"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"ZIP CODE"}),e.jsx("td",{className:"field-value",colspan:"5",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_zip_code)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",children:"9. BLOOD TYPE"}),e.jsx("td",{className:"field-value",colspan:"2",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.blood_type)}),e.jsx("td",{className:"field-label",rowspan:"6",children:"18. PERMANENT ADDRESS"}),e.jsx("td",{className:"field-value",colspan:"3",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.permanent_house_block_lot)}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.permanent_street)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"House/Block/Lot No"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Street"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",children:"10. GSIS ID NO."}),e.jsx("td",{className:"field-value",colspan:"2",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.gsis)}),e.jsx("td",{className:"field-value",colspan:"3",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.permanent_subdivision_village)}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.permanent_barangay)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Subdivision/Village"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Barangay"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"11. PAG-IBIG ID NO."}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.pagibig)}),e.jsx("td",{className:"field-value",colspan:"3",style:{textAlign:"center",fverticalAlign:"middle"},children:n(t.permanent_city_municipality)}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.permanent_province)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",children:"12. PHILHEALTH NO."}),e.jsx("td",{className:"field-value",colspan:"2",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.philhealth)}),e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"City/Municipality"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Province"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"ZIP CODE"}),e.jsx("td",{className:"field-value",colspan:"5",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.permanent_zip_code)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"13. SSS NO."}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.sss)}),e.jsx("td",{className:"field-label",children:"19. TELEPHONE NO."}),e.jsx("td",{className:"field-value",colSpan:"5",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.telephone)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"14. TIN NO."}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.tin)}),e.jsx("td",{className:"field-label",children:"20. MOBILE NO."}),e.jsx("td",{className:"field-value",colSpan:"5",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.mobile)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"15. AGENCY EMPLOYEE NO."}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.agency_no)}),e.jsx("td",{className:"field-label",children:"21. E-MAIL ADDRESS (if any)"}),e.jsx("td",{className:"field-value",colSpan:"5",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.email)})]})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"19.5%"}}),e.jsx("col",{style:{width:"17%"}}),e.jsx("col",{style:{width:"15.5%"}}),e.jsx("col",{style:{width:"30.5%"}}),e.jsx("col",{style:{width:"21.5%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"II. FAMILY BACKGROUND"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"22. SPOUSE'S SURNAME"}),e.jsx("td",{className:"field-value",COLSPAN:"2",children:n(t.spouse_surname)}),e.jsx("td",{className:"field-label",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:"23. NAME OF CHILD"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:"DATE OF BIRTH"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"FIRST NAME"}),e.jsx("td",{className:"field-value",children:n(t.spouse_firstname)}),e.jsxs("td",{className:"field-value",style:{borderLeft:"1px solid #000",borderRight:"1px solid #000"},children:["Name of Extension: ",n(t.spouse_extension)]}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>0?n(s[0].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>0?i(s[0].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"MIDDLE NAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.spouse_middlename)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>1?n(s[1].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>1?i(s[1].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"OCCUPATION"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.spouse_occupation)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>2?n(s[2].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>2?i(s[2].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"EMPLOYER/BUSINESS NAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.spouse_employer_business_name)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>3?n(s[3].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>3?i(s[3].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"BUSINESS ADDRESS"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.spouse_business_address)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>4?n(s[4].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>4?i(s[4].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"TELEPHONE NO."}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.spouse_telephone)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>5?n(s[5].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>5?i(s[5].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"24. FATHER'S SURNAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.father_surname)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>6?n(s[6].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>6?i(s[6].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"FIRST NAME"}),e.jsx("td",{className:"field-value",children:n(t.father_firstname)}),e.jsxs("td",{className:"field-value",style:{borderLeft:"1px solid #000",borderRight:"1px solid #000"},children:["Name of Extension: ",n(t.father_extension)]}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>7?n(s[7].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>7?i(s[7].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"MIDDLE NAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.father_middlename)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>8?n(s[8].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>8?i(s[8].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"25. MOTHER'S MAIDEN NAME"}),e.jsx("td",{className:"field-value",colspan:"2"}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>9?n(s[9].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>9?i(s[9].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"SURNAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.mother_firstname)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>10?n(s[10].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>10?i(s[10].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"FIRST NAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.mother_middlename)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>11?n(s[11].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>11?i(s[11].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"MIDDLE NAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.mother_surname)}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:"(Continue on separate sheet if necessary)"})]})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"19%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"8%"}}),e.jsx("col",{style:{width:"8%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"9%"}}),e.jsx("col",{style:{width:"13%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"III. EDUCATIONAL BACKGROUND"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",style:{verticalAlign:"middle"},children:"26. LEVEL"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",borderbottom:"transparent"},children:"NAME OF SCHOOL"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"BASIC EDUCATION/DEGREE/ COURSE"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"PERIOD OF ATTENDANCE"}),e.jsxs("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["HIGHEST LEVEL/UNITS EARNED",e.jsx("br",{}),"(if not graduated)"]}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"YEAR GRADUATED"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"SCHOLARSHIP/ HONORS"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{borderTop:"transparent"},children:"(Write in full)"}),e.jsx("td",{className:"field-label",style:{borderTop:"transparent"},children:"(Write in full)"}),e.jsx("td",{className:"field-label",children:"FROM"}),e.jsx("td",{className:"field-label",children:"TO"})]}),r.length>0?(()=>{const o=["Elementary","Secondary","Vocational/Trade Course","College","Graduate Studies"];return[...r].sort((d,m)=>{const u=n(d.level)||"",p=n(m.level)||"",g=o.indexOf(u),j=o.indexOf(p);return g!==-1&&j!==-1?g-j:g!==-1?-1:j!==-1?1:0}).slice(0,10).map((d,m)=>{const u=v=>{if(!v)return"";if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(v))return v;try{const h=new Date(v);if(isNaN(h.getTime()))return console.log("Invalid date:",v),v;const f=(h.getMonth()+1).toString().padStart(2,"0"),N=h.getDate().toString().padStart(2,"0"),b=h.getFullYear();return`${f}/${N}/${b}`}catch(h){return console.log("Date formatting error:",h,"for date:",v),v}},p=v=>{if(!v||v==="N/A")return"N/A";try{if(/^\d{4}$/.test(v.toString()))return v.toString();const h=new Date(v);return isNaN(h.getTime())?"N/A":h.getFullYear().toString()}catch{return"N/A"}},g=n(d.honor_received)||"",[j="",y=""]=g.split("|").map(v=>v.trim());return e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:n(d.level)}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:n(d.school_name)}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:n(d.course)}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:(()=>{const v=n(d.from);return console.log("FROM Column Debug:",{rawValue:d.from,displayValue:v,isNA:v==="N/A",formatted:v==="N/A"?v:u(v)}),v==="N/A"?v:u(v)})()}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:(()=>{const v=n(d.to);return console.log("TO Column Debug:",{rawValue:d.to,displayValue:v,isNA:v==="N/A",formatted:v==="N/A"?v:u(v)}),v==="N/A"?v:u(v)})()}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:n(d.highest_level)}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p(n(d.year_graduated))}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:j||y})]},m)})})():Array.from({length:10},(o,c)=>e.jsx("tr",{children:e.jsx("td",{colSpan:"8"})},c))]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word",marginTop:"0.2in"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"18.5%"}}),e.jsx("col",{style:{width:"46.5%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"25%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"left",verticalAlign:"middle",height:"20px"},children:"(Continue on separate sheet if necessary)"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:"SIGNATURE"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:(()=>{console.log("All formData keys:",Object.keys(t)),console.log("formData object:",t),console.log("employeeMedia array:",l);const o=["signature_path","signature","signature_image","signature_file","employee_signature","signature_url"];let c=null;for(const d of o)if(t[d]){c=t[d],console.log(`Found signature field in formData: ${d} = ${c}`);break}if(!c&&l&&l.length>0){console.log("Checking employeeMedia array for signature...");for(const d of l)if(console.log("Media item:",d),d.signature_path){c=d.signature_path,console.log(`Found signature in employeeMedia: ${d.signature_path}`);break}}return console.log("Signature Path Debug:",{signature_path:t.signature_path,type:typeof t.signature_path,exists:!!t.signature_path,foundField:c,employeeMediaLength:l?l.length:0}),c?e.jsx("img",{src:c,alt:"Signature",style:{maxWidth:"100%",maxHeight:"40px",objectFit:"contain",border:"1px solid #ccc"},onError:d=>{console.error("Image load error:",d),console.error("Failed to load signature image:",c)},onLoad:()=>{console.log("Signature image loaded successfully:",c)}}):(console.log("No signature path provided"),console.log("To add signature:"),console.log("1. Fetch employee_media data with signature_path field"),console.log("2. Pass it as employeeMedia prop to PdsPrintPage1 component"),console.log("3. Or add signature_path directly to formData object"),e.jsxs("div",{style:{color:"#999",fontSize:"8px",textAlign:"center",border:"1px dashed #ccc",padding:"5px",backgroundColor:"#f9f9f9"},children:[e.jsx("div",{children:"No signature data found"}),e.jsx("div",{style:{fontSize:"6px",marginTop:"2px"},children:"Add employeeMedia prop with signature_path"})]}))})()}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:"DATE"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:n(t.date_accomplished)||""})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"right",verticalAlign:"middle",height:"20px"},children:" CS FORM 212 (Revised 2017), Page 1 of 4"})})]})]})]})]})},Qg=({formData:t,civilServiceEligibility:s=[],workExperience:r=[],displayValue:n,formatDate:a,displayYesNo:l})=>{const i=o=>{if(!o||o===""||o==="0000-00-00")return"N/A";if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(o))return o;try{const c=new Date(o);if(isNaN(c.getTime()))return console.log("Invalid date:",o),"N/A";const d=(c.getMonth()+1).toString().padStart(2,"0"),m=c.getDate().toString().padStart(2,"0"),u=c.getFullYear();return`${d}/${m}/${u}`}catch(c){return console.log("Date formatting error:",c,"for date:",o),"N/A"}};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          @media print {
            @page {
              size: 8.5in 13in;
              margin: 0.25in;
            }
            body {
              margin: 0;
              padding: 0;
              font-size: 9px;
              line-height: 1.1;
            }
            .pds-table {
              border-collapse: collapse !important;
              font-size: 8px !important;
              line-height: 1.0 !important;
            }
            .pds-table td {
              padding: 2px 3px !important;
              border: 1px solid #000 !important;
              vertical-align: top !important;
              white-space: normal !important;
              word-wrap: break-word !important;
              overflow-wrap: break-word !important;
            }
            .field-label {
              font-weight: normal !important;
              background-color: #f8f8f8 !important;
            }
            .field-value {
              background-color: white !important;
            }
            .section-title {
              background-color: #e0e0e0 !important;
              font-weight: bold !important;
              text-align: center !important;
            }
            .no-page-break {
              page-break-inside: avoid !important;
            }
            .checkbox {
              font-size: 12px !important;
              font-weight: bold !important;
              color: #000 !important;
              display: inline-block !important;
              margin-right: 3px !important;
            }
          }
        `}),e.jsxs("div",{className:"no-page-break",style:{width:"100%",maxWidth:"8.5in",margin:"0 auto",padding:"0.25in",fontSize:"10px",lineHeight:"1.3",fontFamily:"Arial, sans-serif",backgroundColor:"white",color:"black"},children:[e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"20%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"20%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"20%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"IV. CIVIL SERVICE ELIGIBILITY"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"CAREER SERVICE/ RA 1080 (BOARD/ BAR) UNDER SPECIAL LAWS/ CES/ CSEE BARANGAY ELIGIBILITY / DRIVER'S LICENSE"}),e.jsxs("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["RATING ",e.jsx("br",{}),"(if Applicable)"]}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"DATE OF EXAMINATION/ CONFERMENT"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"PLACE OF EXAMINATION / CONFERMENT"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"LICENSE NUMBER (if applicatble)"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"NUMBER"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"DATE OF VALIDITY"})]}),(()=>{const o=[];let c=!1;for(let d=0;d<9;d++){const m=s[d]||{},u=s[d]!==void 0&&m!==null,p=!u&&!c;p&&(c=!0),o.push(e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:u?n(m.eligibility_type):p?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?n(m.rating):p?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?i(m.date_of_examination):p?"N/A":""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:u?n(m.place_of_examination):p?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?n(m.license_number):p?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?i(m.date_of_validity):p?"N/A":""})]},d))}return o})(),e.jsx("tr",{children:e.jsx("td",{colspan:"6",style:{textAlign:"center",verticalAlign:"middle",color:"red"},children:"(Continue on separate sheet if necessary)"})})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"18%"}}),e.jsx("col",{style:{width:"18%"}}),e.jsx("col",{style:{width:"20%"}}),e.jsx("col",{style:{width:"12%"}}),e.jsx("col",{style:{width:"12%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"8%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"V. WORK EXPERIENCE"})}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"8",children:"(Include private employment.  Start from your recent work) Description of duties should be indicated in the attached Work Experience sheet."})}),e.jsxs("tr",{children:[e.jsxs("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["28 INCLUSIVE DATES ",e.jsx("br",{}),"(mm/dd/yyyy)"]}),e.jsxs("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["POSITION TITLE ",e.jsx("br",{}),"(Write in full/Do not abbreviate)"]}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"DEPARTMENT / AGENCY / OFFICE / COMPANY   (Write in full/Do not abbreviate)"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"MONTHLY SALARY"}),e.jsxs("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["SALARY/ JOB/ PAY GRADE ",e.jsx("br",{}),'(if applicable)& STEP  (Format "00-0")/ INCREMENT']}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"STATUS OF APPOINTMENT"}),e.jsxs("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["GOV'T SERVICE ",e.jsx("br",{}),"(Y/ N)"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"From"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"To"}),e.jsx("td",{className:"field-label"}),e.jsx("td",{className:"field-label"}),e.jsx("td",{className:"field-label"}),e.jsx("td",{className:"field-label"}),e.jsx("td",{className:"field-label"}),e.jsx("td",{className:"field-label"})]}),(()=>{const o=[];let c=!1;for(let d=0;d<28;d++){const m=d>=0?d-0:-1,u=m>=0?r[m]||{}:{},p=m>=0&&r[m]!==void 0&&u!==null,g=!p&&!c&&d>=0;g&&(c=!0),o.push(e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?i(u.date_from):g?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?u.is_present?"Present":i(u.date_to):g?"N/A":""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:p?n(u.position_title):g?"N/A":""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:p?n(u.department_agency_company):g?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?n(u.monthly_salary):g?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?n(u.salary_grade_step):g?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?n(u.status_of_appointment):g?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?l(u.government_service):g?"N/A":""})]},d))}return o})(),e.jsx("tr",{children:e.jsx("td",{colspan:"8",style:{textAlign:"center",verticalAlign:"middle",color:"red"},children:"(Continue on separate sheet if necessary)"})})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word",marginTop:"0.2in"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"18.5%"}}),e.jsx("col",{style:{width:"46.5%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"25%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"left",verticalAlign:"middle",height:"20px"},children:"(Continue on separate sheet if necessary)"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:"SIGNATURE"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:e.jsx("div",{style:{color:"#999",fontSize:"8px",textAlign:"center",border:"1px dashed #ccc",padding:"5px",backgroundColor:"#f9f9f9"},children:e.jsx("div",{children:"Signature area"})})}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:"DATE"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:n(t.date_accomplished)||""})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"right",verticalAlign:"middle",height:"20px"},children:" CS FORM 212 (Revised 2017), Page 2 of 4"})})]})]})]})]})},Zg=({voluntaryWork:t=[],trainings:s=[],skills:r=[],recognitions:n=[],memberships:a=[],displayValue:l,formatDate:i,formData:o={}})=>{const c=d=>{if(!d||d===""||d==="0000-00-00")return"N/A";if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(d))return d;try{const m=new Date(d);if(isNaN(m.getTime()))return console.log("Invalid date:",d),"N/A";const u=(m.getMonth()+1).toString().padStart(2,"0"),p=m.getDate().toString().padStart(2,"0"),g=m.getFullYear();return`${u}/${p}/${g}`}catch(m){return console.log("Date formatting error:",m,"for date:",d),"N/A"}};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          @media print {
            @page {
              size: 8.5in 13in;
              margin: 0.25in;
            }
            body {
              margin: 0;
              padding: 0;
              font-size: 9px;
              line-height: 1.1;
            }
            .pds-table {
              border-collapse: collapse !important;
              font-size: 8px !important;
              line-height: 1.0 !important;
            }
            .pds-table td {
              padding: 2px 3px !important;
              border: 1px solid #000 !important;
              vertical-align: top !important;
              white-space: normal !important;
              word-wrap: break-word !important;
              overflow-wrap: break-word !important;
            }
            .field-label {
              font-weight: normal !important;
              background-color: #f8f8f8 !important;
            }
            .field-value {
              background-color: white !important;
            }
            .section-title {
              background-color: #e0e0e0 !important;
              font-weight: bold !important;
              text-align: center !important;
            }
            .no-page-break {
              page-break-inside: avoid !important;
            }
            .checkbox {
              font-size: 12px !important;
              font-weight: bold !important;
              color: #000 !important;
              display: inline-block !important;
              margin-right: 3px !important;
            }
          }
        `}),e.jsxs("div",{className:"no-page-break",style:{width:"100%",maxWidth:"8.5in",margin:"0 auto",padding:"0.25in",fontSize:"10px",lineHeight:"1.3",fontFamily:"Arial, sans-serif",backgroundColor:"white",color:"black"},children:[e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"50%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"30%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"VI. VOLUNTARY WORK OR INVOLVEMENT IN CIVIC/NON-GOVERNMENT/PEOPLE/VOLUNTARY ORGANIZATION/S"})}),e.jsxs("tr",{children:[e.jsxs("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["29. NAME & ADDRESS OF ORGANIZATION ",e.jsx("br",{})," (Write in full)"]}),e.jsxs("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["INCLUSIVE DATES ",e.jsx("br",{}),"(mm/dd/yyyy)"]}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"NUMBER OF HOURS"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"POSITION/NATURE OF WORK"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"From"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"To"})]}),Array.from({length:7},(d,m)=>{const u=t[m]||{},p=t[m]!==void 0&&u!==null;return e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:p?l(u.organization_name_address):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?c(u.date_from):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?c(u.date_to):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?l(u.number_of_hours):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?l(u.position_nature_of_work):""})]},m)}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"5",style:{textAlign:"center",verticalAlign:"middle",color:"red"},children:"(Continue on separate sheet if necessary)"})})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"40%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"20%"}}),e.jsx("col",{style:{width:"30%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsxs("td",{colSpan:"6",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:["VII. LEARNING AND DEVELOPMENT (L&D) INTERVENTIONS/TRAINING PROGRAMS ATTENDED",e.jsx("br",{})]})}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colSpan:"6",children:"Start from the most recent L&D/training program and include only the relevant L&D/training taken for the last five (5) years for Division Chief/Executive/Managerial positions)"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"30. TITLE OF LEARNING AND DEVELOPMENT INTERVENTIONS/TRAINING PROGRAMS"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"INCLUSIVE DATES OF ATTENDANCE"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"NUMBER OF HOURS"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"Type of LD (Managerial/ Supervisory/Technical/etc)"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:" CONDUCTED/ SPONSORED BY"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"From"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"To"})]}),Array.from({length:21},(d,m)=>{const u=s[m]||{},p=s[m]!==void 0&&u!==null;return e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:p?l(u.training_title):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?c(u.date_from):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?c(u.date_to):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?l(u.number_of_hours):""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:p?l(u.type_of_ld):""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:p?l(u.conducted_sponsored_by):""})]},m)}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"6",style:{textAlign:"center",verticalAlign:"middle",color:"red"},children:"(Continue on separate sheet if necessary)"})})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"30%"}}),e.jsx("col",{style:{width:"50%"}}),e.jsx("col",{style:{width:"20%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"VIII. OTHER INFORMATION"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"31. SPECIAL SKILLS and HOBBIES"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"32. NON-ACADEMIC DISTINCTIONS / RECOGNITION"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"33. MEMBERSHIP IN ASSOCIATION/ORGANIZATION"})]}),Array.from({length:10},(d,m)=>{const u=r[m]||{},p=n[m]||{},g=a[m]||{},j=r[m]!==void 0&&u!==null,y=n[m]!==void 0&&p!==null,v=a[m]!==void 0&&g!==null;return e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:j?l(u.skill_hobby):""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:y?l(p.recognition):""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:v?l(g.organization):""})]},m)}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",verticalAlign:"middle",color:"red"},children:"(Continue on separate sheet if necessary)"})})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word",marginTop:"0.2in"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"18.5%"}}),e.jsx("col",{style:{width:"46.5%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"25%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"left",verticalAlign:"middle",height:"20px"},children:"(Continue on separate sheet if necessary)"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:"SIGNATURE"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:e.jsx("div",{style:{color:"#999",fontSize:"8px",textAlign:"center",border:"1px dashed #ccc",padding:"5px",backgroundColor:"#f9f9f9"},children:e.jsx("div",{children:"Signature area"})})}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:"DATE"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:l(o.date_accomplished)||""})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"right",verticalAlign:"middle",height:"20px"},children:" CS FORM 212 (Revised 2017), Page 3 of 4"})})]})]})]})]})},Jg=({declarations:t={},references:s=[],governmentIds:r=[],signatureData:n="",photoData:a="",thumbmarkData:l="",dateAccomplished:i="",displayValue:o,displayYesNo:c,formatDate:d,formData:m={}})=>{var u,p,g,j;return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          @media print {
            @page {
              size: 8.5in 13in;
              margin: 0.25in;
            }
            body {
              margin: 0;
              padding: 0;
              font-size: 9px;
              line-height: 1.1;
            }
            .pds-table {
              border-collapse: collapse !important;
              font-size: 8px !important;
              line-height: 1.0 !important;
            }
            .pds-table td {
              padding: 2px 3px !important;
              border: 1px solid #000 !important;
              vertical-align: top !important;
              white-space: normal !important;
              word-wrap: break-word !important;
              overflow-wrap: break-word !important;
            }
            .field-label {
              font-weight: normal !important;
              background-color: #f8f8f8 !important;
            }
            .field-value {
              background-color: white !important;
            }
            .section-title {
              background-color: #e0e0e0 !important;
              font-weight: bold !important;
              text-align: center !important;
            }
            .no-page-break {
              page-break-inside: avoid !important;
            }
            .checkbox {
              font-size: 12px !important;
              font-weight: bold !important;
              color: #000 !important;
              display: inline-block !important;
              margin-right: 3px !important;
            }
            .yes-no-box {
              font-size: 20px !important;
              font-weight: bold !important;
              color: #000 !important;
              display: inline-block !important;
              margin-right: 8px !important;
              width: 20px !important;
              height: 20px !important;
              text-align: center !important;
              line-height: 18px !important;
              border: 2px solid #000 !important;
              background-color: #fff !important;
              vertical-align: middle !important;
            }
            .checkbox-large {
              width: 20px !important;
              height: 20px !important;
              border: 2px solid #000 !important;
              background-color: #fff !important;
              display: inline-block !important;
              margin-right: 8px !important;
              vertical-align: middle !important;
              position: relative !important;
            }
            .checkbox-large.checked::after {
              content: 'X' !important;
              position: absolute !important;
              top: 50% !important;
              left: 50% !important;
              transform: translate(-50%, -50%) !important;
              font-size: 16px !important;
              font-weight: 900 !important;
              color: #000 !important;
              z-index: 10 !important;
              display: block !important;
              line-height: 1 !important;
              text-shadow: none !important;
            }
            .checkbox-large.checked {
              background-color: #f0f0f0 !important;
              border: 3px solid #000 !important;
            }
            .photo-box {
              border: 1px solid #000;
              padding: 5px;
              display: inline-block;
            }
          }
        `}),e.jsxs("div",{className:"no-page-break",style:{width:"100%",maxWidth:"8.5in",margin:"0 auto",padding:"0.25in",fontSize:"10px",lineHeight:"1.3",fontFamily:"Arial, sans-serif",backgroundColor:"white",color:"black"},children:[e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.01in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"50%"}}),e.jsx("col",{style:{width:"25%"}}),e.jsx("col",{style:{width:"25%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"IX. DECLARATIONS"})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"34. Are you related by consanguinity or affinity to the appointing or recommending authority, or to the chief of bureau or office or to the person who has immediate supervision over you in the Office, Bureau or Department where you will be apppointed,  "}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"}}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"}})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"a. within the third degree?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{className:"checkbox-large",style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.third_degree?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.third_degree?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{className:"checkbox-large",style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.third_degree&&t.third_degree!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.third_degree&&t.third_degree!==void 0?"":""})," NO"]})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"b. within the fourth degree? (for Local Government Unit - Career Employees)"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.fourth_degree?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.fourth_degree?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.fourth_degree&&t.fourth_degree!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.fourth_degree&&t.fourth_degree!==void 0?"":""})," NO"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:" "}),e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:o(t.thirtyfour_b_details)}),e.jsx("td",{})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"35. a. Have you ever been found guilty of any administrative offense?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.thirtyfive_a?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.thirtyfive_a?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.thirtyfive_a&&t.thirtyfive_a!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.thirtyfive_a&&t.thirtyfive_a!==void 0?"":""})," NO"]})]}),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{}),e.jsx("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:o(t.thirtyfive_a_details)})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"b. Have you been criminally charged before any court?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.criminally_charged?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.criminally_charged?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.criminally_charged&&t.criminally_charged!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.criminally_charged&&t.criminally_charged!==void 0?"":""})," NO"]})]}),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"BIf YES, give details: "})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{}),e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",o(t.thirtyfive_datefiled)]}),e.jsx("td",{})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{}),e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Status of Case/s: ",o(t.thirtyfive_statuses)]}),e.jsx("td",{})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"36. Have you ever been convicted of any crime or violation of any law, decree, ordinance or regulation?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.convicted?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.convicted?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.convicted&&t.convicted!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.convicted&&t.convicted!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",o(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"37. Have you ever been separated from the service in any of the following modes?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.separated_service?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.separated_service?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.separated_service&&t.separated_service!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.separated_service&&t.separated_service!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",o(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"38. a. Have you ever been a candidate in a national or local election held within the last year?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.candidate?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.candidate?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.candidate&&t.candidate!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.candidate&&t.candidate!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",o(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"b. Have you resigned from the government service during the three (3)-month period before the last election to promote/actively campaign for a national or local candidate?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.candidate?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.candidate?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.candidate&&t.candidate!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.candidate&&t.candidate!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",o(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"39. Have you acquired the status of an immigrant or permanent resident of another country?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.indigenous_group?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.indigenous_group?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.indigenous_group&&t.indigenous_group!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.indigenous_group&&t.indigenous_group!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",o(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"40. Pursuant to: (a) Indigenous People's Act (RA 8371); (b) Magna Carta for Disabled Persons (RA 7277); and (c) Solo Parents Welfare Act of 2000 (RA 8972), please answer the following items:"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.pwd?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.pwd?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.pwd&&t.pwd!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.pwd&&t.pwd!==void 0?"":""})," NO"]})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"a. Are you a member of any indigenous group?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.indigenous_group?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.indigenous_group?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.indigenous_group&&t.indigenous_group!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.indigenous_group&&t.indigenous_group!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",o(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"b. Are you a person with disability?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.indigenous_group?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.indigenous_group?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.indigenous_group&&t.indigenous_group!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.indigenous_group&&t.indigenous_group!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",o(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"c. Are you a solo parent??"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.indigenous_group?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.indigenous_group?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.indigenous_group&&t.indigenous_group!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.indigenous_group&&t.indigenous_group!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",o(t.fourth_degree_details)]})})]})]}),e.jsxs("table",{className:"pds-table",style:{marginTop:"3px",tableLayout:"fixed",width:"100%"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"40%"}}),e.jsx("col",{style:{width:"23%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"18%"}})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"left",verticalAlign:"middle",height:"30px",fontSize:"11px"},children:"41. REFERENCES  (Person not related by consanguinity or affinity to applicant /appointee)"}),e.jsx("td",{className:"field-label",rowspan:"5",style:{textAlign:"center",verticalAlign:"middle",height:"30px"},children:e.jsx("div",{style:{border:"1px solid #000",height:"120px",width:"90px",margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f9f9f9"},children:a?e.jsx("img",{src:a,alt:"Employee Photo",style:{maxWidth:"85px",maxHeight:"115px",objectFit:"cover"}}):e.jsxs("div",{style:{color:"#999",fontSize:"10px",textAlign:"center"},children:["Photo",e.jsx("br",{}),"(Passport Size)"]})})})]}),Array.from({length:3},(y,v)=>{const h=s[v]||{},f=s[v]!==void 0&&h!==null;return e.jsxs("tr",{style:{height:"40px"},children:[e.jsx("td",{className:"field-value",style:{textAlign:"left",verticalAlign:"middle"},children:f?o(h.reference_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"left",verticalAlign:"middle"},children:f?o(h.reference_address):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:f?o(h.reference_tel_no):""})]},v)}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"justify",verticalAlign:"middle"},children:"42. I declare under oath that I have personally accomplished this Personal Data Sheet which is a true, correct and complete statement pursuant to the provisions of pertinent laws, rules and regulations of the Republic of the Philippines. I authorize the agency head/authorized representative to verify/validate the contents stated herein. I agree that any misrepresentation made in this document and its attachments shall cause the filing of administrative/criminal case/s against me."})})]})]}),e.jsxs("table",{className:"pds-table",style:{marginTop:"3px",tableLayout:"fixed",width:"100%"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"12%"}}),e.jsx("col",{style:{width:"12%"}}),e.jsx("col",{style:{width:"46%"}}),e.jsx("col",{style:{width:"25%"}})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsxs("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"30px",fontSize:"9px"},children:["Government Issued ID   ",e.jsx("br",{}),"(i.e.Passport, GSIS, SSS, PRC, Driver's License, etc.)"]}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"30px",fontSize:"8px"},children:"PLEASE INDICATE ID Number and Date of Issuance"}),e.jsx("td",{className:"field-label",rowspan:"4",style:{textAlign:"center",verticalAlign:"middle",height:"30px"},children:e.jsx("div",{style:{border:"1px solid #000",height:"80px",width:"200px",margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f9f9f9"},children:n?e.jsx("img",{src:n,alt:"Signature",style:{maxWidth:"190px",maxHeight:"75px",objectFit:"contain"}}):e.jsx("div",{style:{color:"#999",fontSize:"10px",textAlign:"center"},children:"Signature"})})}),e.jsx("td",{className:"field-label",rowspan:"6",style:{textAlign:"center",verticalAlign:"middle",height:"30px"},children:e.jsx("div",{style:{border:"1px solid #000",height:"144px",width:"144px",margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f9f9f9"},children:l?e.jsx("img",{src:l,alt:"Thumbmark",style:{maxWidth:"140px",maxHeight:"140px",objectFit:"contain"}}):e.jsxs("div",{style:{color:"#999",fontSize:"10px",textAlign:"center"},children:["Thumbmark",e.jsx("br",{}),'(2" x 2")']})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle",height:"30px",fontSize:"10px"},children:"Government Issued ID:"}),e.jsx("td",{className:"field-value",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle",height:"40px",fontSize:"9px"},children:r.length>0?o((u=r[0])==null?void 0:u.government_issued_id):"_____"})]}),e.jsx("tr",{}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle",height:"30px",fontSize:"10px"},children:"ID/License/Passport No.:"}),e.jsx("td",{className:"field-value",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle",height:"40px",fontSize:"9px"},children:r.length>0?o((p=r[0])==null?void 0:p.id_number):"_____"})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"9px",fontSize:"9px"},children:"Signature (Sign inside the box)"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle",height:"30px",fontSize:"10px"},children:"Date/Place of Issuance:"}),e.jsxs("td",{className:"field-value",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle",height:"40px",fontSize:"9px"},children:[r.length>0?d((g=r[0])==null?void 0:g.date_issued):"____"," / ",r.length>0?o((j=r[0])==null?void 0:j.place_of_issuance):"_________________"]}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"20px",fontSize:"9px"},children:o(i)||"_________________"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"15x"},children:" Date Accomplished"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"15px"},children:"Right Thumbmark"})]})]})]}),e.jsx("table",{className:"pds-table",style:{marginTop:"3px"},children:e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{className:"field-label",style:{padding:"10px",textAlign:"left",verticalAlign:"top",fontSize:"10px"},children:"SUBSCRIBED AND SWORN to before me this ___________________________, affiant exhibiting his/her validly issued government ID as indicated above."})}),e.jsx("tr",{children:e.jsx("td",{style:{padding:"20px",textAlign:"center",verticalAlign:"top",borderBottom:"1px solid #000"},children:e.jsx("div",{style:{border:"0px solid #000",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"3px"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{style:{fontWeight:"bold",fontSize:"12px"},children:"____insert here the municipal mayor's name__________________"}),e.jsx("div",{style:{fontSize:"10px",marginTop:"3px"},children:"Person Administering Oath"})]})})})})]})}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.01in",whiteSpace:"normal",wordWrap:"break-word",marginTop:"0.01n"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"18.5%"}}),e.jsx("col",{style:{width:"46.5%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"25%"}})]}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"right",verticalAlign:"middle",height:"20px"},children:" CS FORM 212 (Revised 2017), Page 4 of 4"})})})]})]})]})},l4=({formData:t,children:s=[],education:r=[],civilServiceEligibility:n=[],workExperience:a=[],voluntaryWork:l=[],trainings:i=[],skills:o=[],recognitions:c=[],memberships:d=[],declarations:m={},references:u=[],governmentIds:p=[],signatureData:g="",photoData:j="",thumbmarkData:y="",dateAccomplished:v="",pageNumber:h=null})=>{const f=S=>!S||S===""||S===null||S===void 0||S==="0000-00-00"?"N/A":S,N=S=>{if(!S||S===""||S==="0000-00-00")return"N/A";try{return new Date(S).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return f(S)}},b=S=>S===!0||S==="true"||S===1?"YES":S===!1||S==="false"||S===0?"NO":"N/A",w=`
    @media print {
      @page {
        size: legal;
        margin: 0.5in;
      }
      
      body {
        font-family: Arial, sans-serif;
        font-size: 9pt;
        line-height: 1.2;
        margin: 0;
        padding: 0;
      }
      
      .page-break {
        page-break-after: always;
      }
      
      .no-page-break {
        page-break-inside: avoid;
      }
      
      .pds-container {
        width: 100%;
        max-width: none;
      }
      
      .pds-header {
        text-align: center;
        font-weight: bold;
        font-size: 10pt;
        margin-bottom: 20px;
        border-bottom: 2px solid black;
        padding-bottom: 10px;
      }
      
      .pds-header-main {
        text-align: center;
        margin-bottom: 20px;
      }
      
      .form-number {
        font-size: 10pt;
        font-weight: bold;
      }
      
      .form-revision {
        font-size: 9pt;
        font-weight: normal;
      }
      
      .form-title {
        font-size: 16pt;
        font-weight: bold;
        margin: 10px 0;
        text-transform: uppercase;
      }
      
      .warning-text {
        font-size: 9pt;
        margin: 10px 0;
        text-align: left;
      }
      
      .instructions-text {
        font-size: 9pt;
        margin: 10px 0;
        text-align: left;
        font-weight: normal;
      }
      
      .filling-guidelines {
        font-size: 9pt;
        margin: 10px 0;
        text-align: left;
      }
      
      .checkbox-field {
        display: inline-flex;
        align-items: center;
        gap: 5px;
      }
      
      .checkbox-group {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 5px;
      }
      
      .checked-box {
        color: black;
      }
      
      .unchecked-box {
        color: black;
      }
      
      .other-field {
        margin-top: 5px;
        font-size: 8pt;
      }
      
      .citizenship-fields {
        display: flex;
        flex-direction: column;
        gap: 5px;
      }
      
      .dual-citizenship-details {
        margin-top: 10px;
        font-size: 8pt;
      }
      
      .checkbox {
        font-family: Arial, sans-serif;
        font-size: 12pt;
      }
      
      .pds-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 15px;
        font-size: 9pt;
      }
      
      .pds-table td, .pds-table th {
        border: 1px solid black;
        padding: 3px 4px;
        vertical-align: top;
      }
      
      .pds-table th {
        background-color: #f0f0f0;
        font-weight: bold;
        text-align: left;
      }
      
      .field-label {
        font-weight: bold;
        background-color: #f8f8f8;
        width: 25%;
      }
      
      .field-value {
        width: 75%;
      }
      
      .section-title {
        font-weight: bold;
        font-size: 10pt;
        background-color: #e0e0e0;
        text-align: center;
        padding: 5px;
        border: 1px solid black;
      }
      
      .yes-no-box {
        width: 20px;
        height: 15px;
        display: inline-block;
        border: 1px solid black;
        margin: 0 5px;
        text-align: center;
        padding-top: 1px;
      }
      
      .signature-box {
        width: 300px;
        height: 80px;
        border: 1px solid black;
        display: inline-block;
        margin: 5px;
      }
      
      .photo-box {
        width: 140px;
        height: 180px;
        border: 1px solid black;
        display: inline-block;
        text-align: center;
        padding: 5px;
      }
      
      .page-number {
        text-align: center;
        font-size: 8pt;
        margin-top: 20px;
      }
    }
    
    @media screen {
      body {
        font-family: Arial, sans-serif;
        font-size: 9pt;
        line-height: 1.2;
        margin: 20px;
      }
      
      .pds-container {
        width: 100%;
        max-width: 100%;
      }
      
      .pds-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 15px;
        font-size: 9pt;
      }
      
      .pds-table td, .pds-table th {
        border: 1px solid black;
        padding: 3px 4px;
        vertical-align: top;
      }
      
      .pds-table th {
        background-color: #f0f0f0;
        font-weight: bold;
        text-align: left;
      }
      
      .field-label {
        font-weight: bold;
        background-color: #f8f8f8;
        width: 25%;
      }
      
      .field-value {
        width: 75%;
      }
      
      .section-title {
        font-weight: bold;
        font-size: 10pt;
        background-color: #e0e0e0;
        text-align: center;
        padding: 5px;
        border: 1px solid black;
      }
      
      .pds-header-main {
        text-align: center;
        margin-bottom: 20px;
      }
      
      .form-number {
        font-size: 10pt;
        font-weight: bold;
      }
      
      .form-revision {
        font-size: 9pt;
        font-weight: normal;
      }
      
      .form-title {
        font-size: 16pt;
        font-weight: bold;
        margin: 10px 0;
        text-transform: uppercase;
      }
      
      .warning-text {
        font-size: 9pt;
        margin: 10px 0;
        text-align: left;
      }
      
      .instructions-text {
        font-size: 9pt;
        margin: 10px 0;
        text-align: left;
        font-weight: normal;
      }
      
      .filling-guidelines {
        font-size: 9pt;
        margin: 10px 0;
        text-align: left;
      }
      
      .checkbox-field {
        display: inline-flex;
        align-items: center;
        gap: 5px;
      }
      
      .checkbox-group {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 5px;
      }
      
      .checked-box {
        color: black;
      }
      
      .unchecked-box {
        color: black;
      }
      
      .other-field {
        margin-top: 5px;
        font-size: 8pt;
      }
      
      .citizenship-fields {
        display: flex;
        flex-direction: column;
        gap: 5px;
      }
      
      .dual-citizenship-details {
        margin-top: 10px;
        font-size: 8pt;
      }
      
      .checkbox {
        font-family: Arial, sans-serif;
        font-size: 12pt;
      }
      
      .civil-status-layout {
        display: flex;
        flex-direction: column;
        gap: 3px;
      }
      
      .civil-status-left {
        display: inline-block;
        width: 45%;
      }
      
      .civil-status-right {
        display: inline-block;
        width: 45%;
        margin-left: 10%;
      }
      
      .citizenship-layout {
        display: flex;
        flex-direction: column;
        gap: 3px;
      }
      
      .citizenship-main {
        display: inline-flex;
        align-items: center;
        gap: 10px;
      }
      
      .dual-citizenship-sub {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        margin-left: 20px;
      }
      
      .citizenship-instruction {
        font-size: 8pt;
        margin-top: 5px;
      }
      
      .citizenship-country {
        font-size: 8pt;
        margin-top: 2px;
      }
      
      .address-label-left {
        font-weight: bold;
        background-color: #f8f8f8;
        width: 25%;
      }
      
      .address-field-left {
        width: 25%;
      }
      
      .address-label-right {
        font-weight: bold;
        background-color: #f8f8f8;
        width: 25%;
      }
      
      .address-field-right {
        width: 25%;
      }
      
      .citizenship-span {
        vertical-align: top;
        height: 100%;
      }
      
      .residential-address-span {
        vertical-align: top;
        height: 100%;
      }
      
      .residential-address-layout {
        display: flex;
        flex-direction: column;
        gap: 2px;
        font-size: 8pt;
      }
      
      .address-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1px;
      }
      
      .address-label {
        font-weight: bold;
        font-size: 7pt;
        min-width: 60px;
      }
      
      .address-value {
        flex: 1;
        font-size: 8pt;
        margin-left: 5px;
      }
      
      .residential-address-header {
        vertical-align: top;
        display: flex;
        flex-direction: column;
        gap: 2px;
      }
      
      .zip-label-in-header {
        font-weight: bold;
        font-size: 8pt;
        text-align: center;
        margin-top: 5px;
      }
      
      .address-label-col4 {
        font-weight: bold;
        font-size: 8pt;
        text-align: center;
      }
      
      .address-label-col5 {
        font-weight: bold;
        font-size: 8pt;
        text-align: center;
      }
      
      .residential-address-content {
        vertical-align: top;
      }
      
      .zip-value-cell {
        font-weight: bold;
        text-align: center;
        vertical-align: middle;
      }
      
      .row-number {
        font-weight: bold;
        text-align: center;
        width: 30px;
        background-color: #f8f8f8;
      }
    }
  `,D=S=>{switch(S){case 1:return e.jsx(Gg,{formData:t,children:s,education:r,displayValue:f,formatDate:N});case 2:return e.jsx(Qg,{formData:t,civilServiceEligibility:n,workExperience:a,displayValue:f,formatDate:N,displayYesNo:b});case 3:return e.jsx(Zg,{voluntaryWork:l,trainings:i,skills:o,recognitions:c,memberships:d,displayValue:f,formatDate:N});case 4:return e.jsx(Jg,{declarations:m,references:u,governmentIds:p,signatureData:g,photoData:j,thumbmarkData:y,dateAccomplished:v,displayValue:f,displayYesNo:b,formatDate:N});default:return e.jsxs(e.Fragment,{children:[e.jsx(Gg,{formData:t,children:s,education:r,displayValue:f,formatDate:N}),e.jsx("div",{className:"page-break"}),e.jsx(Qg,{formData:t,civilServiceEligibility:n,workExperience:a,displayValue:f,formatDate:N,displayYesNo:b}),e.jsx("div",{className:"page-break"}),e.jsx(Zg,{voluntaryWork:l,trainings:i,skills:o,recognitions:c,memberships:d,displayValue:f,formatDate:N}),e.jsx("div",{className:"page-break"}),e.jsx(Jg,{declarations:m,references:u,governmentIds:p,signatureData:g,photoData:j,thumbmarkData:y,dateAccomplished:v,displayValue:f,displayYesNo:b,formatDate:N})]})}};return e.jsxs("div",{className:"pds-container",children:[e.jsx("style",{children:w}),D(h)]})},i4={cs_id_no:null,surname:100,firstname:100,middlename:100,name_extension:10,place_of_birth:200,height:5,weight:5,blood_type:4,gsis:20,pagibig:20,philhealth:20,sss:20,tin:20,agency_no:20,dual_citizenship_type:50,dual_citizenship_country:100,residential_house_block_lot:100,residential_street:200,residential_subdivision_village:200,residential_barangay:100,residential_city_municipality:100,residential_province:100,residential_zip_code:10,permanent_house_block_lot:100,permanent_street:200,permanent_subdivision_village:200,permanent_barangay:100,permanent_city_municipality:100,permanent_province:100,permanent_zip_code:10,telephone:20,mobile:20,email:255,spouse_surname:50,spouse_firstname:50,spouse_middlename:50,spouse_extension:10,spouse_occupation:30,spouse_employer_business_name:50,spouse_business_address:100,spouse_telephone:15,father_surname:100,father_firstname:100,father_middlename:100,father_extension:10,mother_surname:100,mother_firstname:100,mother_middlename:100,children_full_name:200,education_level:25,education_school_name:25,education_degree_course:50,education_highest_level_units:15,education_scholarship_honors:25,eligibility_rating:20,eligibility_place_of_examination:200,eligibility_license_number:50,work_experience_position_title:200,work_experience_department_agency_company:200,work_experience_salary_grade_step:20,work_experience_status_of_appointment:50,voluntary_work_organization_name_address:500,voluntary_work_position_nature_of_work:200,training_title:200,training_type_of_ld:50,training_conducted_sponsored_by:200,skills_hobbies:500,recognitions:500,memberships:200,reference_name:200,reference_address:500,reference_telephone:20,government_id_number:50,government_id_place_of_issuance:200,declaration_details:500},Ct=t=>i4[t]||null,ws=(t,s)=>{const r=Ct(t);return r===null?{valid:!0,error:null}:s&&s.length>r?{valid:!1,error:`Maximum ${r} characters allowed. Current: ${s.length} characters.`}:{valid:!0,error:null}},ON=t=>({surname:"Surname",firstname:"First Name",middlename:"Middle Name",name_extension:"Name Extension",place_of_birth:"Place of Birth",gsis:"GSIS ID No.",pagibig:"PAG-IBIG ID No.",philhealth:"PhilHealth No.",sss:"SSS No.",tin:"TIN No.",agency_no:"Agency Employee No.",telephone:"Telephone No.",mobile:"Mobile No.",email:"E-mail Address",spouse_surname:"Spouse Surname",spouse_firstname:"Spouse First Name",spouse_middlename:"Spouse Middle Name",spouse_extension:"Spouse Extension",spouse_occupation:"Spouse Occupation",spouse_employer_business_name:"Spouse Employer/Business Name",spouse_business_address:"Spouse Business Address",spouse_telephone:"Spouse Telephone",father_surname:"Father Surname",father_firstname:"Father First Name",father_middlename:"Father Middle Name",father_extension:"Father Extension",mother_surname:"Mother Surname",mother_firstname:"Mother First Name",mother_middlename:"Mother Middle Name",education_school_name:"School Name",education_degree_course:"Degree/Course",education_scholarship_honors:"Scholarship/Honors",eligibility_rating:"Eligibility Rating",eligibility_place_of_examination:"Place of Examination",eligibility_license_number:"License Number",work_experience_position_title:"Position Title",work_experience_department_agency_company:"Department/Agency/Company",work_experience_salary_grade_step:"Salary Grade/Step",voluntary_work_organization_name_address:"Organization Name/Address",voluntary_work_position_nature_of_work:"Position/Nature of Work",training_title:"Training Title",training_conducted_sponsored_by:"Conducted/Sponsored By",reference_name:"Reference Name",reference_address:"Reference Address",reference_telephone:"Reference Telephone",government_id_number:"Government ID Number",government_id_place_of_issuance:"Place of Issuance"})[t]||t.replace(/_/g," ").replace(/\b\w/g,r=>r.toUpperCase()),o4=({onBack:t,onSave:s})=>{const{user:r}=Ts(),[n,a]=x.useState(1),[l,i]=x.useState(!1),[o,c]=x.useState({}),[d,m]=x.useState(0),[u,p]=x.useState([]),[g,j]=x.useState(!1),[y,v]=x.useState(!1),[h,f]=x.useState({dtruserid:"",badgenumber:"",cs_id_no:"",surname:"",firstname:"",middlename:"",name_extension:"",date_of_birth:"",place_of_birth:"",sex:"",civil_status:"",height:"",height_unit:"m",weight:"",weight_unit:"kg",blood_type:"",gsis:"",pagibig:"",philhealth:"",sss:"",tin:"",agency_no:"",citizenship_filipino:!0,citizenship_dual:!1,dual_citizenship_type:"",dual_citizenship_country:"",residential_house_block_lot:"",residential_street:"",residential_subdivision_village:"",residential_barangay:"",residential_city_municipality:"",residential_province:"",residential_zip_code:"",permanent_same_as_residential:!1,permanent_house_block_lot:"",permanent_street:"",permanent_subdivision_village:"",permanent_barangay:"",permanent_city_municipality:"",permanent_province:"",permanent_zip_code:"",telephone:"",mobile:"",email:"",spouse_surname:"",spouse_firstname:"",spouse_middlename:"",spouse_extension:"",spouse_occupation:"",spouse_employer_business_name:"",spouse_business_address:"",spouse_telephone:"",father_surname:"",father_firstname:"",father_middlename:"",father_extension:"",mother_surname:"",mother_firstname:"",mother_middlename:""}),[N,b]=x.useState([{full_name:"",date_of_birth:""}]),[w,D]=x.useState([{level:"Elementary",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Secondary",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Vocational Course",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"College",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Graduate Studies",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""}]),[S,C]=x.useState([{eligibility_type:"",rating:"",date_of_examination:"",place_of_examination:"",license_number:"",date_of_validity:""}]),[T,_]=x.useState([{date_from:"",date_to:"",position_title:"",department_agency_company:"",monthly_salary:"",salary_grade_step:"",status_of_appointment:"",government_service:"",is_present:!1}]),[E,A]=x.useState(null),[L,F]=x.useState(!1),[W,Y]=x.useState(null),q=`
    @media print {
      body * {
        visibility: hidden;
      }

      .my-pds-print-overlay .print-scope,
      .my-pds-print-overlay .print-scope * {
        visibility: visible;
      }

      .my-pds-print-overlay .no-print {
        display: none !important;
      }

      @page {
        size: 8.5in 13in;
        margin: 0.25in;
      }
    }
  `,J=["Elementary","Secondary","Vocational Course","College","Graduate Studies"],O=H=>{if(!H)return"";if(H instanceof Date&&!Number.isNaN(H.getTime())){const Ae=H.getFullYear(),Je=String(H.getMonth()+1).padStart(2,"0"),Qe=String(H.getDate()).padStart(2,"0");return`${Ae}-${Je}-${Qe}`}const ie=String(H).trim();if(!ie)return"";if(/^\d{4}-\d{2}-\d{2}/.test(ie))return ie.slice(0,10);const ae=ie.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(ae){const[,Ae,Je,Qe]=ae;return`${Qe}-${Ae.padStart(2,"0")}-${Je.padStart(2,"0")}`}return""},M=H=>{if(!H)return"";if(/^\d{4}$/.test(String(H)))return String(H);try{const ie=new Date(H);return Number.isNaN(ie.getTime())?"":String(ie.getFullYear())}catch{return""}},k=(H=[])=>{const ie=new Map((H||[]).filter(Boolean).map(ae=>[ae.level,ae]));return J.map(ae=>{const Ae=ie.get(ae)||{};return{level:ae,school_name:Ae.school_name||"",degree_course:Ae.degree_course||Ae.course||"",period_from:O(Ae.period_from||Ae.from||""),period_to:O(Ae.period_to||Ae.to||""),highest_level_units:Ae.highest_level_units||Ae.highest_level||"",year_graduated:M(Ae.year_graduated||""),scholarship_honors:Ae.scholarship_honors||Ae.honor_received||""}})},[I,K]=x.useState([{organization_name_address:"",date_from:"",date_to:"",number_of_hours:"",position_nature_of_work:""}]),[z,P]=x.useState([{training_title:"",date_from:"",date_to:"",number_of_hours:"",type_of_ld:"",conducted_sponsored_by:""}]);x.useEffect(()=>{console.log(" [PDS] Voluntary work state changed:",I)},[I]),x.useEffect(()=>{console.log(" [PDS] Trainings state changed:",z)},[z]);const[R,B]=x.useState([{skill_hobby:""}]),[U,G]=x.useState([{recognition:""}]),[$,X]=x.useState([{organization:""}]);x.useEffect(()=>{console.log(" [PDS] Skills state changed:",R)},[R]),x.useEffect(()=>{console.log(" [PDS] Memberships state changed:",$)},[$]);const[Q,Ne]=x.useState({thirtyfour_a:!1,thirtyfour_b:!1,thirtyfour_b_details:"",thirtyfive_a:!1,thirtyfive_a_details:"",thirtyfive_b:!1,thirtyfive_datefiled:"",thirtyfive_statuses:"",thirtysix:!1,thirtysix_details:"",thirtyseven:!1,thirtyseven_details:"",thirtyeight_a:!1,thirtyeight_a_details:"",thirtyeight_b:!1,thirtyeight_b_details:"",thirtynine:!1,thirtynine_details:"",forty_a:!1,forty_a_details:"",forty_b:!1,forty_b_details:"",forty_c:!1,forty_c_details:""}),[V,re]=x.useState([{reference_name:"",reference_address:"",reference_tel_no:""}]),[ne,xe]=x.useState([{government_issued_id:"",id_number:"",date_issued:"",place_of_issuance:"",status:"active"}]),[me,Z]=x.useState(!1),[ee,ye]=x.useState(!1),[ve,ue]=x.useState(!1),[we,De]=x.useState(""),[le,Ie]=x.useState({value:"",unit:"",convertedValue:""}),[ge,Ge]=x.useState(""),[ke,Re]=x.useState(""),[Ke,Xe]=x.useState(""),[Se,lt]=x.useState(""),[it,Pt]=x.useState([]),[Nt,At]=x.useState([]),[Ce,Ze]=x.useState([]),[fe,Pe]=x.useState(!1);x.useEffect(()=>{console.log(" [PDS] Eligibility types state updated:",Ce.length,"items"),console.log(" [PDS] Eligibility types array:",Ce),Ce.length>0?(console.log(" [PDS] First few eligibility types:",Ce.slice(0,3)),console.log(" [PDS] Sample eligibility type structure:",Ce[0])):console.log(" [PDS] No eligibility types loaded")},[Ce]);const Le=()=>{console.log(" [PDS] Resetting form state for new session"),f({dtruserid:"",badgenumber:"",surname:"",firstname:"",middlename:"",extension:"",date_of_birth:"",place_of_birth:"",sex:"",civil_status:"",height:"",weight:"",blood_type:"",gsis:"",pagibig:"",philhealth:"",sss:"",tin:"",agency_no:"",residential_house_block_lot:"",residential_street:"",residential_subdivision_village:"",residential_barangay:"",residential_city_municipality:"",residential_province:"",residential_zip_code:"",permanent_same_as_residential:!1,permanent_house_block_lot:"",permanent_street:"",permanent_subdivision_village:"",permanent_barangay:"",permanent_city_municipality:"",permanent_province:"",permanent_zip_code:"",telephone:"",mobile:"",email:"",spouse_surname:"",spouse_firstname:"",spouse_middlename:"",spouse_extension:"",spouse_occupation:"",employer_business_name:"",business_address:"",spouse_telephone_no:"",father_surname:"",father_firstname:"",father_middlename:"",father_extension:"",mother_surname:"",mother_firstname:"",mother_middlename:"",citizenship_filipino:!0,citizenship_dual:!1,dual_citizenship_type:"",dual_citizenship_country:""}),b([{full_name:"",date_of_birth:""}]),D([{level:"Elementary",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Secondary",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Vocational/Trade Course",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"College",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Graduate Studies",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""}]),re([{reference_name:"",reference_address:"",reference_tel_no:""}]),C([]),_([]),K([]),P([]),B([]),xe([{government_issued_id:"",id_number:"",date_issued:"",place_of_issuance:"",status:"active"}]),Ne({thirtyfour_a:!1,thirtyfour_b:!1,thirtyfour_b_details:"",thirtyfive_a:!1,thirtyfive_a_details:"",thirtyfive_b:!1,thirtyfive_datefiled:"",thirtyfive_statuses:"",thirtysix:!1,thirtysix_details:"",thirtyseven:!1,thirtyseven_details:"",thirtyeight_a:!1,thirtyeight_a_details:"",thirtyeight_b:!1,thirtyeight_b_details:"",thirtynine:!1,thirtynine_details:"",forty_a:!1,forty_a_details:"",forty_b:!1,forty_b_details:"",forty_c:!1,forty_c_details:""}),a(1),Z(!1),Ie({value:"",unit:"",convertedValue:""}),ue(!1),De(""),m(0),p([]),j(!1),Ge(""),Xe(""),Re(""),c({}),i(!1),console.log(" [PDS] Form state reset completed")};x.useEffect(()=>{mt()},[]),x.useEffect(()=>()=>{console.log(" [PDS] Component unmounting, cleaning up state"),Le()},[]);const ut=()=>{console.log(" [PDS] Retrying lookup data fetch..."),mt()};x.useEffect(()=>{r&&(console.log(" [PDS] User loaded, resetting form state first"),Le(),setTimeout(()=>{console.log(" [PDS] Loading PDS data for user:",r.USERID),Be(),Vt()},100))},[r]),x.useEffect(()=>{Object.keys(h).length>0&&r&&Vt()},[h,V,ne,w,S,T,N,me,r]);const Be=async()=>{var H,ie,ae,Ae,Je,Qe,pt,jt,wt,Ft,ns,ks,$s,Rt;try{i(!0);const Ve=(await oe.get("/pds-dtrchecker/me")).data.data;A(!0),console.log(" [PDS] Received children data from API:",Ve.children),console.log(" [PDS] Received employee data from API:",{date_of_birth:Ve.employee.date_of_birth,place_of_birth:Ve.employee.place_of_birth,sex:Ve.employee.sex,birthdate:Ve.employee.birthdate,birthplace:Ve.employee.birthplace,gender:Ve.employee.gender}),console.log(" [PDS] Full pdsData structure keys:",Object.keys(Ve)),console.log(" [PDS] Eligibility data:",Ve.eligibility),console.log(" [PDS] Work experience data:",Ve.workExperience);const Bs=Object.fromEntries(Object.entries(Ve.employee).map(([Gt,Ht])=>{if(Ht==null)return[Gt,""];if(Gt==="date_of_birth"&&Ht){const Us=String(Ht).trim();if(/^\d{4}-\d{2}-\d{2}$/.test(Us))return[Gt,Us];if(Us.includes("T")){const ds=Us.split("T")[0];if(/^\d{4}-\d{2}-\d{2}$/.test(ds))return console.log(` [PDS] Extracting date from ISO: ${Ht} -> ${ds}`),[Gt,ds]}if(Us.includes(" ")){const ds=Us.split(" ")[0];if(/^\d{4}-\d{2}-\d{2}$/.test(ds))return console.log(` [PDS] Extracting date from datetime: ${Ht} -> ${ds}`),[Gt,ds]}return console.log(` [PDS] Invalid date format: ${Ht}`),[Gt,""]}return typeof Ht=="string"?[Gt,Ht]:[Gt,Ht?String(Ht):""]}));f(Gt=>({...Gt,...Bs,dtruserid:r.USERID||r.id,badgenumber:r.BADGENUMBER||r.badgenumber})),console.log(" [PDS] FormData after setting:",{date_of_birth:Bs.date_of_birth,place_of_birth:Bs.place_of_birth,sex:Bs.sex});const br=Number(Ve.employee.pdscompleprogress)||0;if(m(br),console.log(" [PDS] Loaded completeness progress:",br),Ve.children&&Ve.children.length>0){const Gt=Ve.children.map(Ht=>({full_name:Ht.full_name||"",date_of_birth:Ht.date_of_birth||""}));b(Gt),console.log(" [PDS] Loaded children:",Gt)}else b([{full_name:"",date_of_birth:""}]),console.log(" [PDS] No children data found, using default empty row");if(Ve.education&&Ve.education.length>0?D(k(Ve.education)):D(k([])),Ve.eligibility&&Ve.eligibility.length>0){console.log(" Received eligibility data:",Ve.eligibility),console.log(" Sample eligibility record:",Ve.eligibility[0]),console.log(" Sample eligibility date fields:",{date_of_examination:(H=Ve.eligibility[0])==null?void 0:H.date_of_examination,date_of_validity:(ie=Ve.eligibility[0])==null?void 0:ie.date_of_validity,place_of_examination:(ae=Ve.eligibility[0])==null?void 0:ae.place_of_examination});const Gt=Ve.eligibility.map(Ht=>{const Us=ds=>{if(!ds)return"";if(typeof ds=="string"&&/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(ds))return ds;if(typeof ds=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(ds)){const[vr,An,Wt]=ds.split("-");return`${An}/${Wt}/${vr}`}const Ms=new Date(ds);if(!isNaN(Ms.getTime())){const vr=String(Ms.getMonth()+1).padStart(2,"0"),An=String(Ms.getDate()).padStart(2,"0"),Wt=Ms.getFullYear();return`${vr}/${An}/${Wt}`}return""};return{...Ht,date_of_examination:Us(Ht.date_of_examination),date_of_validity:Us(Ht.date_of_validity)}});console.log(" Formatted eligibility data:",Gt),C(Gt)}else console.log(" No eligibility data found or empty array");if(Ve.workExperience&&Ve.workExperience.length>0){console.log(" Received work experience data:",Ve.workExperience),console.log(" Sample work experience record:",Ve.workExperience[0]),console.log(" Sample work experience fields:",{date_from:(Ae=Ve.workExperience[0])==null?void 0:Ae.date_from,date_to:(Je=Ve.workExperience[0])==null?void 0:Je.date_to,position_title:(Qe=Ve.workExperience[0])==null?void 0:Qe.position_title,department_agency_company:(pt=Ve.workExperience[0])==null?void 0:pt.department_agency_company,monthly_salary:(jt=Ve.workExperience[0])==null?void 0:jt.monthly_salary,salary_grade_step:(wt=Ve.workExperience[0])==null?void 0:wt.salary_grade_step,status_of_appointment:(Ft=Ve.workExperience[0])==null?void 0:Ft.status_of_appointment,government_service:(ns=Ve.workExperience[0])==null?void 0:ns.government_service,is_present:(ks=Ve.workExperience[0])==null?void 0:ks.is_present});const Gt=Ve.workExperience.map(Ht=>{const Us=Ht.is_present===!0||Ht.is_present===1||Ht.is_present==="true"||Ht.ispresent===!0||Ht.ispresent===1||Ht.ispresent==="true",ds=Ms=>{if(!Ms)return"";if(typeof Ms=="string"&&/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(Ms))return Ms;if(typeof Ms=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(Ms)){const[An,Wt,$r]=Ms.split("-");return`${Wt}/${$r}/${An}`}const vr=new Date(Ms);if(!isNaN(vr.getTime())){const An=String(vr.getMonth()+1).padStart(2,"0"),Wt=String(vr.getDate()).padStart(2,"0"),$r=vr.getFullYear();return`${An}/${Wt}/${$r}`}return""};return{...Ht,is_present:Us,date_from:ds(Ht.date_from),date_to:Us&&(!Ht.date_to||Ht.date_to==="0"||Ht.date_to==="0000-00-00"||Ht.date_to==="")?ds(new Date().toISOString().split("T")[0]):ds(Ht.date_to)}});_(Gt)}if(console.log(" [PDS] Checking voluntary work data:",Ve.voluntaryWork),Ve.voluntaryWork&&Ve.voluntaryWork.length>0?(console.log(" Received voluntary work data:",Ve.voluntaryWork),console.log(" Sample voluntary work record structure:",Ve.voluntaryWork[0]),console.log(" Voluntary work record keys:",Object.keys(Ve.voluntaryWork[0]||{})),K(Ve.voluntaryWork)):(console.log(" No voluntary work data found, keeping default empty row"),K(Gt=>Gt.length>0?Gt:[{organization_name_address:"",date_from:"",date_to:"",number_of_hours:"",position_nature_of_work:""}])),console.log(" [PDS] Checking trainings data:",Ve.trainings),Ve.trainings&&Ve.trainings.length>0?(console.log(" Received trainings data:",Ve.trainings),console.log(" Sample training record structure:",Ve.trainings[0]),console.log(" Training record keys:",Object.keys(Ve.trainings[0]||{})),console.log(" [PDS] Training conducted_sponsored_by value:",($s=Ve.trainings[0])==null?void 0:$s.conducted_sponsored_by),console.log(" [PDS] All training field values:"),Object.keys(Ve.trainings[0]||{}).forEach(Gt=>{console.log(`  ${Gt}: "${Ve.trainings[0][Gt]}"`)}),P(Ve.trainings)):(console.log(" No trainings data found, keeping default empty row"),P(Gt=>Gt.length>0?Gt:[{training_title:"",date_from:"",date_to:"",number_of_hours:"",type_of_ld:"",conducted_sponsored_by:""}])),console.log(" [PDS] Checking skills data:",Ve.skills),Ve.skills&&Ve.skills.length>0?(console.log(" Received skills data:",Ve.skills),B(Ve.skills)):(console.log(" No skills data found, keeping default empty row"),B(Gt=>Gt.length>0?Gt:[{skill_hobby:""}])),Ve.recognitions&&Ve.recognitions.length>0&&(console.log(" Received recognitions data:",Ve.recognitions),G(Ve.recognitions)),console.log(" [PDS] Checking memberships data:",Ve.memberships),Ve.memberships&&Ve.memberships.length>0?(console.log(" Received memberships data:",Ve.memberships),X(Ve.memberships)):(console.log(" No memberships data found, keeping default empty row"),X(Gt=>Gt.length>0?Gt:[{organization:""}])),Ve.references&&Ve.references.length>0&&(console.log(" Received references data:",Ve.references),re(Ve.references)),Ve.governmentIds&&Ve.governmentIds.length>0&&(console.log(" Received government IDs data:",Ve.governmentIds),console.log(" First government ID date_issued:",Ve.governmentIds[0].date_issued),xe(Ve.governmentIds)),Ve.declarations&&Object.keys(Ve.declarations).length>0){console.log(" Received declarations data:",Ve.declarations);const Gt=ds=>{if(!ds||ds===""||ds==="0000-00-00")return"";try{const Ms=new Date(ds);return isNaN(Ms.getTime())?"":Ms.toISOString().split("T")[0]}catch(Ms){return console.log("Date formatting error:",Ms,"for date:",ds),""}};console.log(" [PDS] Raw declarations data from backend:",Ve.declarations);const Ht=ds=>ds===!0||ds===1||ds==="1"||ds==="true",Us={thirtyfour_a:Ht(Ve.declarations.thirtyfour_a),thirtyfour_b:Ht(Ve.declarations.thirtyfour_b),thirtyfour_b_details:Ve.declarations.thirtyfour_b_details||"",thirtyfive_a:Ht(Ve.declarations.thirtyfive_a),thirtyfive_a_details:Ve.declarations.thirtyfive_a_details||"",thirtyfive_b:Ht(Ve.declarations.thirtyfive_b),thirtyfive_datefiled:Gt(Ve.declarations.thirtyfive_datefiled),thirtyfive_statuses:Ve.declarations.thirtyfive_statuses||"",thirtysix:Ht(Ve.declarations.thirtysix),thirtysix_details:Ve.declarations.thirtysix_details||"",thirtyseven:Ht(Ve.declarations.thirtyseven),thirtyseven_details:Ve.declarations.thirtyseven_details||"",thirtyeight_a:Ht(Ve.declarations.thirtyeight_a),thirtyeight_a_details:Ve.declarations.thirtyeight_a_details||"",thirtyeight_b:Ht(Ve.declarations.thirtyeight_b),thirtyeight_b_details:Ve.declarations.thirtyeight_b_details||"",thirtynine:Ht(Ve.declarations.thirtynine),thirtynine_details:Ve.declarations.thirtynine_details||"",forty_a:Ht(Ve.declarations.forty_a),forty_a_details:Ve.declarations.forty_a_details||"",forty_b:Ht(Ve.declarations.forty_b),forty_b_details:Ve.declarations.forty_b_details||"",forty_c:Ht(Ve.declarations.forty_c),forty_c_details:Ve.declarations.forty_c_details||""};console.log(" Mapped declarations data:",Us),console.log(" thirtyfive_datefiled value:",Us.thirtyfive_datefiled),console.log(" thirtyfive_statuses value:",Us.thirtyfive_statuses),console.log(" [PDS] Sample values - thirtyfour_a:",Us.thirtyfour_a,"thirtyfive_a:",Us.thirtyfive_a),console.log(" [PDS] Raw backend values - thirtyfour_a:",Ve.declarations.thirtyfour_a,"thirtyfive_a:",Ve.declarations.thirtyfive_a),Ne(Us)}Ve.media&&Object.keys(Ve.media).length>0&&(console.log(" Received media data:",Ve.media),Ve.media.signature&&(console.log(" Loading saved signature:",Ve.media.signature),Ge(Ve.media.signature)),Ve.media.photo&&(console.log(" Loading saved photo:",Ve.media.photo),Xe(Ve.media.photo)),Ve.media.thumb&&(console.log(" Loading saved thumbmark:",Ve.media.thumb),lt(Ve.media.thumb)),Ve.media.date_accomplished&&(console.log(" Loading date accomplished:",Ve.media.date_accomplished),Re(Ve.media.date_accomplished)),Ve.ispdsentrylock===1||Ve.ispdsentrylock===!0?(v(!0),console.log(" PDS is locked (ispdsentrylock = 1)")):(v(!1),console.log(" PDS is unlocked (ispdsentrylock = 0)"))),console.log(" Loaded existing PDS data for user:",r.USERID||r.id)}catch(Tt){if(((Rt=Tt==null?void 0:Tt.response)==null?void 0:Rt.status)===404){A(!1),i(!1);return}console.error("Error fetching PDS data:",Tt)}finally{i(!1)}},mt=async()=>{var H,ie;try{console.log(" [PDS] Fetching lookup data..."),Pe(!0),console.log(" [PDS] API base URL:",oe.defaults.baseURL),console.log(" [PDS] API headers:",oe.defaults.headers),console.log(" [PDS] Starting API call...");const ae=await oe.get("/pds-dtrchecker/lookup");if(console.log(" [PDS] Lookup response:",ae.data),ae.data.success&&ae.data.data){const{bloodTypes:Ae,civilStatuses:Je,eligibilityTypes:Qe}=ae.data.data;console.log(" [PDS] Data structure:",{bloodTypes:(Ae==null?void 0:Ae.length)||0,civilStatuses:(Je==null?void 0:Je.length)||0,eligibilityTypes:(Qe==null?void 0:Qe.length)||0}),Pt(Ae||[]),At(Je||[]),Ze(Qe||[]),console.log(" [PDS] Lookup data loaded successfully"),console.log(" [PDS] Eligibility types set:",(Qe==null?void 0:Qe.length)||0,"items")}else console.warn(" [PDS] Lookup data response was not successful"),Pt([]),At([]),Ze([])}catch(ae){console.error(" [PDS] Error fetching lookup data:",ae),console.error(" [PDS] Error details:",((H=ae.response)==null?void 0:H.data)||ae.message),console.error(" [PDS] Error status:",(ie=ae.response)==null?void 0:ie.status),console.error(" [PDS] Error config:",ae.config),console.log(" [PDS] Lookup data fetch failed - will retry or show empty dropdowns"),console.error(" [PDS] Failed to load lookup data from HR201 database tables:"),console.error("  - blood_types table"),console.error("  - civilstatus table"),console.error("  - eligibilitytypes table"),console.error("Please ensure these tables exist and have data in the HR201 database.")}finally{Pe(!1)}},qe=H=>H==null?"":typeof H=="string"?H:H?String(H):"",Oe=y,He=H=>{if(y)return;const{name:ie,value:ae,type:Ae,checked:Je}=H.target;ie==="date_of_birth"&&console.log(" [UI] Date input changed:",ae,"Type:",typeof ae,"Format:",/^\d{4}-\d{2}-\d{2}$/.test(ae)?"YYYY-MM-DD":"Other");const Qe=ae||"";if(Ae==="text"||Ae==="email"||Ae==="tel"||Ae==="textarea"&&Qe){const pt=ws(ie,Qe);pt.valid?o[ie]&&c(jt=>({...jt,[ie]:""})):c(jt=>({...jt,[ie]:pt.error}))}f(ie==="citizenship_dual"?pt=>({...pt,[ie]:Je,dual_citizenship_type:Je?pt.dual_citizenship_type:"",dual_citizenship_country:Je?pt.dual_citizenship_country:"",citizenship:"Filipino"}):pt=>({...pt,[ie]:Ae==="checkbox"?Je:Qe})),ie==="permanent_same_as_residential"&&Je&&f(pt=>({...pt,permanent_house_block_lot:pt.residential_house_block_lot,permanent_street:pt.residential_street,permanent_subdivision_village:pt.residential_subdivision_village,permanent_barangay:pt.residential_barangay,permanent_city_municipality:pt.residential_city_municipality,permanent_province:pt.residential_province,permanent_zip_code:pt.residential_zip_code})),ie==="civil_status"&&ae==="Single"&&f(pt=>({...pt,spouse_surname:"",spouse_firstname:"",spouse_middlename:"",spouse_extension:"",spouse_occupation:"",spouse_employer_business_name:"",spouse_business_address:"",spouse_telephone:""})),o[ie]&&Ae!=="text"&&Ae!=="email"&&Ae!=="tel"&&c(pt=>({...pt,[ie]:""}))},Kt=()=>{b(H=>[...H,{full_name:"",date_of_birth:""}])},rs=H=>{N.length>1&&b(ie=>ie.filter((ae,Ae)=>Ae!==H))},qt=(H,ie,ae)=>{console.log(` [PDS] updateChild: index=${H}, field=${ie}, value=${ae}`),b(Ae=>Ae.map((Je,Qe)=>{if(Qe===H){const pt={...Je,[ie]:ae};return console.log(` [PDS] Updated child ${H}:`,pt),pt}return Je}))},zt=(H,ie,ae)=>{D(Ae=>k(Ae).map((pt,jt)=>jt===H?{...pt,[ie]:ae}:pt)),console.log(` [PDS] Updated education ${H} (${ie}):`,ae)},xs=(H,ie=!1)=>{const ae=ie?"w-full px-2 py-1 border border-gray-300 rounded text-xs":"text-xs",Ae=H?H.length:0;return Ae>30?`${ae} text-xs leading-tight`:Ae>20?`${ae} text-xs`:`${ae} text-sm`},ms=(H,ie)=>{if(!H)return"text-sm";const ae=H.length,Ae=ie;return Ae<8?ae>8||ae>5?"text-xs":"text-sm":Ae<12?ae>12||ae>8?"text-xs":"text-sm":Ae<20?ae>20||ae>15?"text-xs":"text-sm":ae>30||ae>20?"text-xs":"text-sm"},Ut=()=>{C(H=>[...H,{eligibility_type:"",rating:"",date_of_examination:"",place_of_examination:"",license_number:"",date_of_validity:""}])},$t=H=>{S.length>1?C(ie=>ie.filter((ae,Ae)=>Ae!==H)):C(ie=>ie.map((ae,Ae)=>Ae===H?{eligibility_type:"",rating:"",date_of_examination:"",place_of_examination:"",license_number:"",date_of_validity:""}:ie[Ae]))},Qt=(H,ie,ae)=>{C(Ae=>Ae.map((Je,Qe)=>Qe===H?{...Je,[ie]:ae}:Je))},gs=()=>{_(H=>[...H,{date_from:"",date_to:"",position_title:"",department_agency_company:"",monthly_salary:"",salary_grade_step:"",status_of_appointment:"",government_service:"",is_present:!1}])},Yt=H=>{T.length>1?_(ie=>ie.filter((ae,Ae)=>Ae!==H)):_(ie=>ie.map((ae,Ae)=>Ae===H?{date_from:"",date_to:"",position_title:"",department_agency_company:"",monthly_salary:"",salary_grade_step:"",status_of_appointment:"",government_service:"",is_present:!1}:ie[Ae]))},os=(H,ie,ae)=>{_(Ae=>{let Je=Ae.map((Qe,pt)=>{if(pt===H){const jt={...Qe,[ie]:ae};if(ie==="is_present"&&ae===!0){const Ft=new Date().toISOString().split("T")[0];jt.date_to=Ft}return ie==="is_present"&&ae===!1&&(jt.date_to=""),jt}return Qe});return ie==="is_present"&&ae===!0&&(Je=Je.map((Qe,pt)=>pt===H?{...Qe,is_present:!0,date_to:Je[pt].date_to}:{...Qe,is_present:!1})),Je.sort((Qe,pt)=>Qe.is_present===!0&&pt.is_present!==!0?-1:Qe.is_present!==!0&&pt.is_present===!0?1:Qe.date_to&&pt.date_to?new Date(pt.date_to)-new Date(Qe.date_to):0),Je})},Zt=()=>{K(H=>[...H,{organization_name_address:"",date_from:"",date_to:"",number_of_hours:"",position_nature_of_work:""}])},Jt=H=>{K(ie=>{const ae=ie.filter((Ae,Je)=>Je!==H);return ae.length===0?[{organization_name_address:"",date_from:"",date_to:"",number_of_hours:"",position_nature_of_work:""}]:ae})},es=(H,ie,ae)=>{K(Ae=>Ae.map((Je,Qe)=>Qe===H?{...Je,[ie]:ae}:Je))},be=()=>{P(H=>[...H,{training_title:"",date_from:"",date_to:"",number_of_hours:"",type_of_ld:"",conducted_sponsored_by:""}])},nt=H=>{z.length>1?P(ie=>ie.filter((ae,Ae)=>Ae!==H)):P(ie=>ie.map((ae,Ae)=>Ae===H?{training_title:"",date_from:"",date_to:"",number_of_hours:"",type_of_ld:"",conducted_sponsored_by:""}:ie[Ae]))},tt=(H,ie,ae)=>{P(Ae=>Ae.map((Je,Qe)=>Qe===H?{...Je,[ie]:ae}:Je))},ft=()=>{B(H=>[...H,{skill_hobby:""}])},kt=H=>{R.length>1?B(ie=>ie.filter((ae,Ae)=>Ae!==H)):B(ie=>ie.map((ae,Ae)=>Ae===H?{skill_hobby:""}:ie[Ae]))},_t=(H,ie)=>{B(ae=>ae.map((Ae,Je)=>Je===H?{skill_hobby:ie}:Ae))},cs=()=>{G(H=>[...H,{recognition:""}])},as=H=>{U.length>1?G(ie=>ie.filter((ae,Ae)=>Ae!==H)):G(ie=>ie.map((ae,Ae)=>Ae===H?{recognition:""}:ie[Ae]))},_e=(H,ie)=>{G(ae=>ae.map((Ae,Je)=>Je===H?{recognition:ie}:Ae))},We=()=>{X(H=>[...H,{organization:""}])},ct=H=>{$.length>1?X(ie=>ie.filter((ae,Ae)=>Ae!==H)):X(ie=>ie.map((ae,Ae)=>Ae===H?{organization:""}:ie[Ae]))},Ye=(H,ie)=>{X(ae=>ae.map((Ae,Je)=>Je===H?{organization:ie}:Ae))},te=H=>{const{name:ie,value:ae,type:Ae,checked:Je}=H.target;let Qe=ae;if(ie==="thirtyfive_datefiled"&&ae){const pt=ae.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(pt){const[,jt,wt,Ft]=pt,ns=`${Ft}-${jt.padStart(2,"0")}-${wt.padStart(2,"0")}`;Qe=ns,console.log(" Date conversion:",ae,"",ns)}else console.log(" Invalid date format:",ae)}Ne(pt=>({...pt,[ie]:Ae==="checkbox"?Je:Qe}))},Me=(H,ie,ae=[])=>{Ne(Ae=>{const Je={...Ae,[H]:ie};return!ie&&Array.isArray(ae)&&ae.forEach(Qe=>{Qe&&(Je[Qe]="")}),Je})},rt=()=>{V.length<3&&re(H=>[...H,{reference_name:"",reference_address:"",reference_tel_no:""}])},xt=H=>{re(ie=>{const ae=ie.filter((Ae,Je)=>Je!==H);return ae.length===0?[{reference_name:"",reference_address:"",reference_tel_no:""}]:ae})},Mt=(H,ie,ae)=>{re(Ae=>Ae.map((Je,Qe)=>Qe===H?{...Je,[ie]:ae}:Je))},Ee=()=>{if(console.log(" [Government ID] addGovernmentId called"),console.log(" [Government ID] Current governmentIds:",ne),ne.length===0||!ne[0].government_issued_id)console.log(" [Government ID] Adding new government ID"),xe([{government_issued_id:"",id_number:"",date_issued:"",place_of_issuance:"",status:"active"}]),ye(!0);else{console.log(" [Government ID] Starting replace mode"),console.log(" [Government ID] Original data to preserve:",ne[0]),Z(!0),ye(!1);const H={government_issued_id:"",id_number:"",date_issued:"",place_of_issuance:"",status:"active",originalData:ne[0]};console.log(" [Government ID] New government ID with originalData:",H),xe([H]),console.log(" [Government ID] Replace mode activated")}},$e=()=>{var ae,Ae,Je,Qe;console.log(" [Government ID] acceptGovernmentIdChange called");const H=ne[0];if(console.log(" [Government ID] Current ID data:",H),!((ae=H.government_issued_id)!=null&&ae.trim())||!((Ae=H.id_number)!=null&&Ae.trim())||!((Je=H.date_issued)!=null&&Je.trim())||!((Qe=H.place_of_issuance)!=null&&Qe.trim())){console.log(" [Government ID] Validation failed - missing fields"),alert("Please fill in all fields (43.1, 43.2, 43.3, and 43.4) before accepting the change.");return}console.log(" [Government ID] All fields validated");const ie=H.originalData;if(console.log(" [Government ID] Original data:",ie),ie){const pt=H.government_issued_id!==ie.government_issued_id||H.id_number!==ie.id_number||H.date_issued!==ie.date_issued||H.place_of_issuance!==ie.place_of_issuance;if(console.log(" [Government ID] Has changes:",pt),!pt){console.log(" [Government ID] No changes detected"),alert("No changes detected. Please modify at least one field before accepting the change.");return}}console.log(" [Government ID] Accepting change"),xe([{government_issued_id:H.government_issued_id,id_number:H.id_number,date_issued:H.date_issued,place_of_issuance:H.place_of_issuance,status:"active"}]),Z(!1),ye(!0),console.log(" [Government ID] Change accepted, replace mode exited, pending change marked")},et=()=>{var ie;const H=(ie=ne[0])==null?void 0:ie.originalData;H&&xe([H]),Z(!1),ye(!1),console.log(" [Government ID] Change cancelled, original data restored")},Te=(H,ie,ae)=>{xe(Ae=>Ae.map((Je,Qe)=>Qe===H?{...Je,[ie]:ae}:Je)),(ie==="government_issued_id"||ie==="id_number"||ie==="date_issued"||ie==="place_of_issuance")&&ye(!0)},he=H=>{De(H),Ie({value:"",unit:H==="height"?"ft":"lbs",convertedValue:""}),ue(!0)},Ue=()=>{ue(!1),De(""),Ie({value:"",unit:"",convertedValue:""})},ze=(H,ie)=>{Ie(ae=>({...ae,[H]:ie,convertedValue:""}))},ht=(H,ie)=>{const ae=parseFloat(H)||0;switch(ie){case"ft":return(ae*.3048).toFixed(2);case"cm":return(ae/100).toFixed(2);case"in":return(ae*.0254).toFixed(2);default:return H}},st=(H,ie)=>{const ae=parseFloat(H)||0;switch(ie){case"lbs":return(ae*.453592).toFixed(1);case"g":return(ae/1e3).toFixed(1);default:return H}},ot=()=>{if(!le.value||!le.unit)return;let H="";we==="height"?H=ht(le.value,le.unit):we==="weight"&&(H=st(le.value,le.unit)),Ie(ie=>({...ie,convertedValue:H}))},vt=()=>{le.convertedValue&&(we==="height"?f(H=>({...H,height:le.convertedValue})):we==="weight"&&f(H=>({...H,weight:le.convertedValue})),Ue())},bt=(H,ie,ae,Ae=.9)=>new Promise((Je,Qe)=>{const pt=document.createElement("canvas"),jt=pt.getContext("2d"),wt=new Image;wt.onload=()=>{let{width:ns,height:ks}=wt;const $s=ae==="jpeg"?600:400;if(ae==="jpeg"){const Gt=ns/ks;Math.abs(Gt-.78)>.1&&(Gt>.78?ns=ks*.78:ks=ns/.78)}ns>$s&&(ks=ks*$s/ns,ns=$s),ks>$s*1.3&&(ns=ns*$s*1.3/ks,ks=$s*1.3),pt.width=ns,pt.height=ks,ae==="jpeg"&&(jt.fillStyle="white",jt.fillRect(0,0,ns,ks)),jt.drawImage(wt,0,0,ns,ks);let Rt=Ae,Tt,Ve=0;const Bs=20;do{Tt=pt.toDataURL(`image/${ae}`,Rt);const Gt=(Tt.split(",")[1]?Tt.split(",")[1].length:0)*.75/1024;if(Gt<=ie){console.log(` Image resized successfully: ${Gt.toFixed(2)}KB (target: ${ie}KB), quality: ${Rt}`);break}Rt-=.05,Ve++}while(Rt>.1&&Ve<Bs);Ve>=Bs&&console.warn(` Could not compress image below ${ie}KB, using lowest quality available`),Je(Tt)};const Ft=URL.createObjectURL(H);wt.onerror=()=>{URL.revokeObjectURL(Ft),Qe(new Error("Failed to load image"))},wt.addEventListener("load",()=>{URL.revokeObjectURL(Ft)},{once:!0}),wt.addEventListener("error",()=>{URL.revokeObjectURL(Ft)},{once:!0}),wt.src=Ft}),dt=async H=>{const ie=H.target.files[0];if(ie)try{const ae=await bt(ie,150,"jpeg",.8);Xe(ae)}catch(ae){console.error("Error resizing photo:",ae);const Ae=new FileReader;Ae.onloadend=()=>{Xe(Ae.result)},Ae.readAsDataURL(ie)}},It=async H=>{const ie=H.target.files[0];if(ie)try{const ae=await bt(ie,150,"png",.9);lt(ae)}catch(ae){console.error("Error resizing thumbmark:",ae);const Ae=new FileReader;Ae.onloadend=()=>{lt(Ae.result)},Ae.readAsDataURL(ie)}},Et=async H=>{const ie=H.target.files[0];if(ie)try{const ae=await bt(ie,150,"png",.9);Ge(ae)}catch(ae){console.error("Error resizing signature:",ae);const Ae=new FileReader;Ae.onloadend=()=>{Ge(Ae.result)},Ae.readAsDataURL(ie)}},gt=()=>{const H={};return!h.surname&&!h.firstname&&(H.surname="At least surname or first name is required"),c(H),Object.keys(H).length===0},Xt=()=>{const H=[];return[{key:"surname",label:"Surname"},{key:"firstname",label:"First Name"},{key:"middlename",label:"Middle Name"},{key:"date_of_birth",label:"Date of Birth"},{key:"place_of_birth",label:"Place of Birth"},{key:"sex",label:"Sex"},{key:"civil_status",label:"Civil Status"},{key:"height",label:"Height"},{key:"weight",label:"Weight"},{key:"blood_type",label:"Blood Type"},{key:"gsis",label:"GSIS ID No."},{key:"pagibig",label:"PAG-IBIG ID No."},{key:"philhealth",label:"PhilHealth No."},{key:"sss",label:"SSS No."},{key:"tin",label:"TIN"},{key:"agency_no",label:"Agency Employee No."}].forEach(Qe=>{(!h[Qe.key]||h[Qe.key]==="")&&H.push({section:"Personal Information",field:Qe.label,key:Qe.key})}),[{key:"residential_province",label:"Residential Province"},{key:"residential_city_municipality",label:"Residential City/Municipality"},{key:"residential_barangay",label:"Residential Barangay"},{key:"residential_zip_code",label:"Residential ZIP Code"},{key:"residential_subdivision_village",label:"Residential Subdivision/Village"},{key:"residential_street",label:"Residential Street"},{key:"permanent_province",label:"Permanent Province"},{key:"permanent_city_municipality",label:"Permanent City/Municipality"},{key:"permanent_barangay",label:"Permanent Barangay"},{key:"permanent_zip_code",label:"Permanent ZIP Code"},{key:"permanent_subdivision_village",label:"Permanent Subdivision/Village"},{key:"permanent_street",label:"Permanent Street"}].forEach(Qe=>{(!h[Qe.key]||h[Qe.key]==="")&&H.push({section:"Address",field:Qe.label,key:Qe.key})}),[{key:"telephone",label:"Telephone"},{key:"mobile",label:"Mobile"},{key:"email",label:"Email"}].forEach(Qe=>{(!h[Qe.key]||h[Qe.key]==="")&&H.push({section:"Contact Information",field:Qe.label,key:Qe.key})}),h.civil_status&&h.civil_status!=="Single"&&[{key:"spouse_surname",label:"Spouse Surname"},{key:"spouse_firstname",label:"Spouse First Name"},{key:"spouse_middlename",label:"Spouse Middle Name"},{key:"spouse_occupation",label:"Spouse Occupation"}].forEach(pt=>{(!h[pt.key]||h[pt.key]==="")&&H.push({section:"Spouse Information",field:pt.label,key:pt.key})}),[{key:"father_surname",label:"Father Surname"},{key:"father_firstname",label:"Father First Name"},{key:"father_middlename",label:"Father Middle Name"},{key:"mother_surname",label:"Mother Surname"},{key:"mother_firstname",label:"Mother First Name"},{key:"mother_middlename",label:"Mother Middle Name"}].forEach(Qe=>{(!h[Qe.key]||h[Qe.key]==="")&&H.push({section:"Family Background",field:Qe.label,key:Qe.key})}),(!N||N.length===0||!N.some(Qe=>Qe.full_name&&Qe.full_name.trim()!==""||Qe.date_of_birth&&Qe.date_of_birth.trim()!==""))&&H.push({section:"Family Background",field:"Children Information",key:"children"}),!w||w.length===0?H.push({section:"Education",field:"Education Information",key:"education"}):w.some(pt=>pt.school_name&&typeof pt.school_name=="string"&&pt.school_name.trim()!==""&&pt.degree_course&&typeof pt.degree_course=="string"&&pt.degree_course.trim()!==""&&pt.period_from&&typeof pt.period_from=="string"&&pt.period_from.trim()!==""&&pt.period_to&&typeof pt.period_to=="string"&&pt.period_to.trim()!==""&&pt.highest_level_units&&typeof pt.highest_level_units=="string"&&pt.highest_level_units.trim()!==""&&pt.year_graduated&&pt.year_graduated.toString().trim()!=="")||H.push({section:"Education",field:"Education Information (Complete row required)",key:"education"}),(!S||S.length===0||!S.some(Qe=>Qe.eligibility_type&&Qe.eligibility_type.trim()!==""||Qe.rating&&Qe.rating.trim()!==""))&&H.push({section:"Eligibility",field:"Civil Service Eligibility",key:"eligibility"}),(!T||T.length===0||!T.some(Qe=>Qe.position_title&&Qe.position_title.trim()!==""||Qe.department_name&&Qe.department_name.trim()!==""))&&H.push({section:"Work Experience",field:"Work Experience",key:"workExperience"}),(!V||V.length<3||V.filter(Qe=>Qe.reference_name&&Qe.reference_name.trim()!=="").length<3)&&H.push({section:"References",field:"Character References (3 required)",key:"references"}),(!ne||ne.length===0||!ne.some(Qe=>Qe.government_issued_id&&Qe.government_issued_id.trim()!==""))&&H.push({section:"Government IDs",field:"Government Issued ID",key:"governmentIds"}),p(H),H},Vt=async()=>{try{if(!r||E===!1)return;console.log(" [PDS] Fetching missing fields for user:",r.USERID);const H=await oe.get("/pds-dtrchecker/missing-fields");if(H.data.success){const{missingFields:ie,totalMissing:ae}=H.data;console.log(" [PDS] Received missing fields from API:",{totalMissing:ae,missingFields:ie});const Ae=[];ie&&typeof ie=="object"&&Object.keys(ie).forEach(Je=>{ie[Je]&&typeof ie[Je]=="object"&&Object.keys(ie[Je]).forEach(Qe=>{Array.isArray(ie[Je][Qe])&&ie[Je][Qe].forEach(pt=>{Ae.push({...pt,page:parseInt(Je),section:Qe})})})}),p(Ae)}else console.warn(" [PDS] API returned unsuccessful response for missing fields"),Xt()}catch(H){console.error(" [PDS] Error fetching missing fields from API:",H),Xt()}},ts=H=>{try{if(console.log(" [PDS] Attempting to focus on field:",H),H.focusSelector==="education-section"&&n!==1){console.log(" [PDS] Education section is on page 1, switching to page 1"),a(1),setTimeout(()=>{ps(H)},500);return}let ie=null;const ae=[`#${H.focusSelector}`,`[name="${H.focusSelector}"]`,`input[name*="${H.focusSelector}"]`,`select[name*="${H.focusSelector}"]`,`textarea[name*="${H.focusSelector}"]`,`[id*="${H.focusSelector}"]`];for(const Ae of ae)if(ie=document.querySelector(Ae),ie)break;ie?ps(H):H.page&&H.page!==n?(console.log(` [PDS] Switching to page ${H.page} for field: ${H.field}`),a(H.page),setTimeout(()=>{ps(H)},500)):ps(H)}catch(ie){console.error(" [PDS] Error focusing on field:",ie)}},ps=H=>{try{const ie=[`#${H.focusSelector}`,`[name="${H.focusSelector}"]`,`input[name*="${H.focusSelector}"]`,`select[name*="${H.focusSelector}"]`,`textarea[name*="${H.focusSelector}"]`,`[id*="${H.focusSelector}"]`];let ae=null;for(const Ae of ie)if(ae=document.querySelector(Ae),ae)break;ae?(ae.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),ae.style.backgroundColor="#fef3c7",setTimeout(()=>{ae.style.backgroundColor=""},2e3),setTimeout(()=>{if(ae.focus&&ae.focus(),!ae.focus&&ae.querySelector){const Ae=ae.querySelector("input, select, textarea");Ae&&Ae.focus&&Ae.focus()}},500),console.log(" [PDS] Successfully focused on field:",H.field)):console.warn(" [PDS] Could not find element for field:",H.field,"selectors tried:",ie)}catch(ie){console.error(" [PDS] Error in focusElement:",ie)}},ys=()=>{if(!E){alert("Please create or load your PDS before printing.");return}const ie={1:1,2:2,3:3,4:4}[n]||null;Y(ie),F(!0)},js=H=>{if(!H||H.trim()==="")return null;if(typeof H=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(H))return H;if(typeof H=="string"&&/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(H)){const[ie,ae,Ae]=H.split("/"),Je=ie.padStart(2,"0"),Qe=ae.padStart(2,"0");return`${Ae}-${Je}-${Qe}`}return null},Fr=async()=>{try{i(!0);const H={employee:{dtruserid:r==null?void 0:r.USERID},children:[],education:[],civil_service_eligibility:[],work_experience:[],voluntary_work:[],trainings:[],skills:[],recognitions:[],memberships:[],declarations:{},references:[],government_ids:[],is_replacing_gov_id:!1,signature_data:null,date_accomplished:null,photo_data:null,thumbmark_data:null,is_draft:!0};await oe.post("/pds-dtrchecker/me",H),A(!0),await Be()}catch(H){console.error(" [PDS] Failed to initialize PDS record:",H),alert("Failed to create initial PDS record. Please try again.")}finally{i(!1)}},Fs=()=>{const H={};let ie=!1;if(Object.keys(h).forEach(ae=>{const Ae=h[ae];if(typeof Ae=="string"&&Ae.trim()){const Je=ws(ae,Ae);Je.valid||(H[ae]=Je.error,ie=!0)}}),N.forEach((ae,Ae)=>{if(ae.full_name){const Je=ws("children_full_name",ae.full_name);Je.valid||(H[`children_${Ae}_full_name`]=Je.error,ie=!0)}}),w.forEach((ae,Ae)=>{if(ae.school_name){const Je=ws("education_school_name",ae.school_name);Je.valid||(H[`education_${Ae}_school_name`]=Je.error,ie=!0)}if(ae.degree_course){const Je=ws("education_degree_course",ae.degree_course);Je.valid||(H[`education_${Ae}_degree_course`]=Je.error,ie=!0)}if(ae.highest_level_units){const Je=ws("education_highest_level_units",ae.highest_level_units);Je.valid||(H[`education_${Ae}_highest_level_units`]=Je.error,ie=!0)}if(ae.scholarship_honors){const Je=ws("education_scholarship_honors",ae.scholarship_honors);Je.valid||(H[`education_${Ae}_scholarship_honors`]=Je.error,ie=!0)}}),h.spouse_surname){const ae=ws("spouse_surname",h.spouse_surname);ae.valid||(H.spouse_surname=ae.error,ie=!0)}if(h.spouse_firstname){const ae=ws("spouse_firstname",h.spouse_firstname);ae.valid||(H.spouse_firstname=ae.error,ie=!0)}if(h.spouse_middlename){const ae=ws("spouse_middlename",h.spouse_middlename);ae.valid||(H.spouse_middlename=ae.error,ie=!0)}if(h.spouse_extension){const ae=ws("spouse_extension",h.spouse_extension);ae.valid||(H.spouse_extension=ae.error,ie=!0)}if(h.spouse_occupation){const ae=ws("spouse_occupation",h.spouse_occupation);ae.valid||(H.spouse_occupation=ae.error,ie=!0)}if(h.spouse_employer_business_name){const ae=ws("spouse_employer_business_name",h.spouse_employer_business_name);ae.valid||(H.spouse_employer_business_name=ae.error,ie=!0)}if(h.spouse_business_address){const ae=ws("spouse_business_address",h.spouse_business_address);ae.valid||(H.spouse_business_address=ae.error,ie=!0)}if(h.spouse_telephone){const ae=ws("spouse_telephone",h.spouse_telephone);ae.valid||(H.spouse_telephone=ae.error,ie=!0)}if(ie){c(Ae=>({...Ae,...H}));const ae=Object.keys(H).map(Ae=>ON(Ae)).join(", ");return alert(`Please fix the following field(s) that exceed character limits:

${ae}

Please reduce the text length for these fields before saving.`),!1}return!0},ce=async(H=!1)=>{var ie,ae;if(!(n===1&&!gt())){if(!Fs()){i(!1);return}i(!0);try{console.log(" [PDS] Education data being saved:",w),console.log(" [PDS] FormData being sent:",{dtruserid:h.dtruserid,date_of_birth:h.date_of_birth,place_of_birth:h.place_of_birth,sex:h.sex,blood_type:h.blood_type});const Ae=Wt=>{if(Wt==null||Wt==="")return console.log(" [ensureDateFormat] Date is undefined/null/empty:",Wt),null;const $r=String(Wt).trim();if(/^\d{4}-\d{2}-\d{2}$/.test($r))return $r;const Mi=$r.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(Mi){const[,lw,iw,ow]=Mi;return`${ow}-${lw.padStart(2,"0")}-${iw.padStart(2,"0")}`}return console.log(" [ensureDateFormat] Invalid date format for database:",Wt,"String value:",$r),null},Je=Wt=>Wt?1:0,Qe=(Wt,$r)=>{if(!Wt||$r==null)return null;if(typeof $r=="string"){const Mi=$r.trim();return Mi.length?Mi:null}return $r},pt=Je(Q.thirtyfour_a),jt=Je(Q.thirtyfour_b),wt=Je(Q.thirtyfive_a),Ft=Je(Q.thirtyfive_b),ns=Je(Q.thirtysix),ks=Je(Q.thirtyseven),$s=Je(Q.thirtyeight_a),Rt=Je(Q.thirtyeight_b),Tt=Je(Q.thirtynine),Ve=Je(Q.forty_a),Bs=Je(Q.forty_b),br=Je(Q.forty_c),Gt={thirtyfour_a:pt,thirtyfour_b:jt,thirtyfour_b_details:Qe(Q.thirtyfour_b,Q.thirtyfour_b_details),thirtyfive_a:wt,thirtyfive_a_details:Qe(Q.thirtyfive_a,Q.thirtyfive_a_details),thirtyfive_b:Ft,thirtyfive_datefiled:Q.thirtyfive_b?Ae(Q.thirtyfive_datefiled):null,thirtyfive_statuses:Qe(Q.thirtyfive_b,Q.thirtyfive_statuses),thirtysix:ns,thirtysix_details:Qe(Q.thirtysix,Q.thirtysix_details),thirtyseven:ks,thirtyseven_details:Qe(Q.thirtyseven,Q.thirtyseven_details),thirtyeight_a:$s,thirtyeight_a_details:Qe(Q.thirtyeight_a,Q.thirtyeight_a_details),thirtyeight_b:Rt,thirtyeight_b_details:Qe(Q.thirtyeight_b,Q.thirtyeight_b_details),thirtynine:Tt,thirtynine_details:Qe(Q.thirtynine,Q.thirtynine_details),forty_a:Ve,forty_a_details:Qe(Q.forty_a,Q.forty_a_details),forty_b:Bs,forty_b_details:Qe(Q.forty_b,Q.forty_b_details),forty_c:br,forty_c_details:Qe(Q.forty_c,Q.forty_c_details)};console.log(" [Frontend] FormData.date_of_birth value:",h.date_of_birth,"Type:",typeof h.date_of_birth),console.log(" [Frontend] FormData keys:",Object.keys(h)),console.log(" [Frontend] FormData.date_of_birth exists?","date_of_birth"in h);const Ht=Ae(h.date_of_birth);console.log(" [Frontend] Birthdate after ensureDateFormat:",Ht,"Type:",typeof Ht),console.log(" [Frontend] Is valid YYYY-MM-DD format?",Ht?/^\d{4}-\d{2}-\d{2}$/.test(String(Ht)):"null/undefined");const{birthdate:Us,...ds}=h,Ms={...ds,dtruserid:(r==null?void 0:r.USERID)||(h==null?void 0:h.dtruserid),date_of_birth:Ht||null,place_of_birth:((ie=h.place_of_birth)==null?void 0:ie.trim())||""};console.log(" [Frontend] Employee data date_of_birth:",Ms.date_of_birth,"Type:",typeof Ms.date_of_birth),console.log(" [Frontend] Employee data has birthdate field?","birthdate"in Ms),console.log(" [Frontend] Employee data has date_of_birth field?","date_of_birth"in Ms);const vr={employee:Ms,children:N.filter(Wt=>Wt.full_name||Wt.date_of_birth),education:w,civil_service_eligibility:S.filter(Wt=>Wt.eligibility_type).map(Wt=>({...Wt,date_of_examination:js(Wt.date_of_examination),date_of_validity:js(Wt.date_of_validity)})),work_experience:T.filter(Wt=>Wt.position_title||Wt.department_agency_company).map(Wt=>({...Wt,date_from:js(Wt.date_from),date_to:js(Wt.date_to)})),voluntary_work:I.filter(Wt=>Wt.organization_name_address||Wt.position_nature_of_work),trainings:z.filter(Wt=>Wt.training_title||Wt.conducted_sponsored_by),skills:R.filter(Wt=>Wt.skill_hobby),recognitions:U.filter(Wt=>Wt.recognition),memberships:$.filter(Wt=>Wt.organization),declarations:Gt,references:V.filter(Wt=>Wt.reference_name),government_ids:ne.filter(Wt=>Wt.government_issued_id||Wt.id_number),is_replacing_gov_id:ee,signature_data:ge,date_accomplished:ke&&ke.trim()!==""?ke.trim():null,photo_data:Ke,thumbmark_data:Se,is_draft:H};console.log(" [PDS] Declarations data being sent:",Gt),console.log(" [PDS] Date field value being sent:",Gt.criminally_charged_date),console.log(" [Frontend] Complete employee payload being sent:",{date_of_birth:vr.employee.date_of_birth,place_of_birth:vr.employee.place_of_birth,dtruserid:vr.employee.dtruserid});const An=await oe.post("/pds-dtrchecker/me",vr);if(alert(H?"PDS draft saved successfully! You can continue editing later.":"PDS saved successfully!"),ee&&(ye(!1),console.log(" [PDS] Government ID replacement completed, reset pending change flag")),ke&&ke.trim()!==""&&await Be(),s&&s(),An.data.progress!==void 0){const Wt=Number(An.data.progress)||0;m(Wt),console.log(" [PDS] Updated completeness progress:",Wt)}s&&s(),!H&&onClose&&onClose()}catch(Ae){console.error("Error saving PDS:",Ae);let Je="Failed to save PDS";const Qe=(ae=Ae==null?void 0:Ae.response)==null?void 0:ae.data,pt=(Qe==null?void 0:Qe.message)||(Ae==null?void 0:Ae.message)||"";if(pt.includes("Data too long")||pt.includes("ER_DATA_TOO_LONG")){const jt=pt.match(/column ['"]([^'"]+)['"]/i)||pt.match(/for column ['"]([^'"]+)['"]/i);if(jt){const wt=jt[1];Je=`Failed to save PDS: The field "${{surname:"Surname",firstname:"First Name",middlename:"Middle Name",extension:"Name Extension",birthplace:"Place of Birth",gsis:"GSIS ID No.",pagibig:"PAG-IBIG ID No.",philhealth:"PhilHealth No.",sss:"SSS No.",tin:"TIN No.",agency_no:"Agency Employee No.",telephone:"Telephone No.",mobile:"Mobile No.",email:"E-mail Address"}[wt]||wt}" exceeds the maximum character limit. Please reduce the text length and try again.`}else Je="Failed to save PDS: One or more fields exceed the maximum character limit. Please check your entries and reduce text length where necessary."}else Qe!=null&&Qe.error?Je=`Failed to save PDS: ${Qe.error}`:pt&&(Je=`Failed to save PDS: ${pt}`);alert(Je)}finally{i(!1)}}},je=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-blue-100 text-blue-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"I"}),"PERSONAL INFORMATION"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1. CS ID No"}),e.jsx("input",{type:"text",name:"cs_id_no",value:qe(h.cs_id_no),onChange:He,placeholder:"(Do not fill up. For CSC use only)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100",disabled:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["2. SURNAME ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"surname",value:qe(h.surname),onChange:He,maxLength:Ct("surname"),disabled:Oe,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.surname?"border-red-500":"border-gray-300"} ${Oe?"bg-gray-100 cursor-not-allowed":""}`,required:!0}),o.surname&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.surname})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["2.1. FIRST NAME ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"firstname",value:qe(h.firstname),onChange:He,maxLength:Ct("firstname"),disabled:Oe,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.firstname?"border-red-500":"border-gray-300"} ${Oe?"bg-gray-100 cursor-not-allowed":""}`,required:!0}),o.firstname&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.firstname})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"2.2. MIDDLE NAME"}),e.jsx("input",{type:"text",name:"middlename",value:qe(h.middlename),onChange:He,maxLength:Ct("middlename"),disabled:Oe,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${Oe?"bg-gray-100 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"2.3. NAME EXTENSION (JR., SR)"}),e.jsx("input",{type:"text",name:"name_extension",value:h.name_extension,onChange:He,placeholder:"Jr., Sr., III",maxLength:Ct("name_extension"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"3. DATE OF BIRTH"}),e.jsx("input",{type:"date",name:"date_of_birth",value:qe(h.date_of_birth),onChange:He,disabled:Oe,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${Oe?"bg-gray-100 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"4. PLACE OF BIRTH"}),e.jsx("input",{type:"text",name:"place_of_birth",value:h.place_of_birth,onChange:He,maxLength:Ct("place_of_birth"),disabled:Oe,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${Oe?"bg-gray-100 cursor-not-allowed":""}`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["5. SEX ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"sex",value:"Male",checked:h.sex==="Male",onChange:He,disabled:Oe,className:`mr-2 ${Oe?"cursor-not-allowed":""}`}),"Male"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"sex",value:"Female",checked:h.sex==="Female",onChange:He,disabled:Oe,className:`mr-2 ${Oe?"cursor-not-allowed":""}`}),"Female"]})]}),o.sex&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.sex})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["6. CIVIL STATUS ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"civil_status",value:h.civil_status,onChange:He,disabled:Oe,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.civil_status?"border-red-500":"border-gray-300"} ${Oe?"bg-gray-100 cursor-not-allowed":""}`,required:!0,children:[e.jsx("option",{value:"",children:"Select Status"}),fe?e.jsx("option",{disabled:!0,children:"Loading civil statuses..."}):Nt.length>0?Nt.map(H=>e.jsx("option",{value:H.civil_status,children:H.civil_status},H.id)):e.jsx("option",{disabled:!0,children:"No civil status data available"})]}),o.civil_status&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.civil_status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"7. HEIGHT (meters)"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"number",step:"0.01",name:"height",value:h.height,onChange:He,placeholder:"1.75",min:"0.01",max:"3.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:()=>he("height"),className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Height Converter",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter height in meters (m)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"8. WEIGHT (kilograms)"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"number",step:"0.1",name:"weight",value:h.weight,onChange:He,placeholder:"70",min:"1",max:"500",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:()=>he("weight"),className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Weight Converter",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter weight in kilograms (kg)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"9. BLOOD TYPE"}),e.jsxs("select",{name:"blood_type",value:h.blood_type,onChange:He,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Blood Type"}),fe?e.jsx("option",{disabled:!0,children:"Loading blood types..."}):it.length>0?it.map(H=>e.jsx("option",{value:H.blood_type,children:H.blood_type},H.id)):e.jsx("option",{disabled:!0,children:"No blood type data available"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"10. GSIS ID NO."}),e.jsx("input",{type:"text",name:"gsis",value:h.gsis,onChange:He,maxLength:Ct("gsis"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"11. PAG-IBIG ID NO."}),e.jsx("input",{type:"text",name:"pagibig",value:h.pagibig,onChange:He,maxLength:Ct("pagibig"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"12. PHILHEALTH NO."}),e.jsx("input",{type:"text",name:"philhealth",value:h.philhealth,onChange:He,maxLength:Ct("philhealth"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"13. SSS NO."}),e.jsx("input",{type:"text",name:"sss",value:h.sss,onChange:He,maxLength:Ct("sss"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"14. TIN NO."}),e.jsx("input",{type:"text",name:"tin",value:h.tin,onChange:He,maxLength:Ct("tin"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"15. AGENCY EMPLOYEE NO."}),e.jsx("input",{type:"text",name:"agency_no",value:h.agency_no,onChange:He,maxLength:Ct("agency_no"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"16. CITIZENSHIP"}),e.jsxs("div",{className:"flex space-x-6 mb-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"citizenship_filipino",checked:!0,disabled:!0,className:"mr-2 bg-gray-300"}),e.jsx("span",{className:"text-gray-600",children:"Filipino (Default)"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"citizenship_dual",checked:h.citizenship_dual,onChange:He,className:"mr-2"}),"Dual Citizenship"]})]}),h.citizenship_dual&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("select",{name:"dual_citizenship_type",value:h.dual_citizenship_type,onChange:He,className:"px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"by_birth",children:"By Birth"}),e.jsx("option",{value:"by_naturalization",children:"By Naturalization"})]}),e.jsx("input",{name:"dual_citizenship_country",value:h.dual_citizenship_country,onChange:He,placeholder:"Country",maxLength:Ct("dual_citizenship_country"),className:"px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"17. RESIDENTIAL ADDRESS"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.1 House/Block/Lot No."}),e.jsx("input",{name:"residential_house_block_lot",value:h.residential_house_block_lot,onChange:He,placeholder:"Enter house/block/lot number",maxLength:Ct("residential_house_block_lot"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.2 Street"}),e.jsx("input",{name:"residential_street",value:h.residential_street,onChange:He,placeholder:"Enter street name",maxLength:Ct("residential_street"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.3 Subdivision/Village"}),e.jsx("input",{name:"residential_subdivision_village",value:h.residential_subdivision_village,onChange:He,placeholder:"Enter subdivision or village name",maxLength:Ct("residential_subdivision_village"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.4 Barangay"}),e.jsx("input",{name:"residential_barangay",value:h.residential_barangay,onChange:He,placeholder:"Enter barangay name",maxLength:Ct("residential_barangay"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.5 City/Municipality"}),e.jsx("input",{name:"residential_city_municipality",value:h.residential_city_municipality,onChange:He,placeholder:"Enter city or municipality",maxLength:Ct("residential_city_municipality"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.6 Province"}),e.jsx("input",{name:"residential_province",value:h.residential_province,onChange:He,placeholder:"Enter province",maxLength:Ct("residential_province"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.7 ZIP CODE"}),e.jsx("input",{name:"residential_zip_code",value:h.residential_zip_code,onChange:He,placeholder:"Enter ZIP code",maxLength:Ct("residential_zip_code"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"18. PERMANENT ADDRESS"}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"permanent_same_as_residential",checked:h.permanent_same_as_residential,onChange:He,className:"mr-2"}),"Same as Residential Address"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.1 House/Block/Lot No."}),e.jsx("input",{name:"permanent_house_block_lot",value:h.permanent_house_block_lot,onChange:He,placeholder:"Enter house/block/lot number",maxLength:Ct("permanent_house_block_lot"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.2 Street"}),e.jsx("input",{name:"permanent_street",value:h.permanent_street,onChange:He,placeholder:"Enter street name",maxLength:Ct("permanent_street"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.3 Subdivision/Village"}),e.jsx("input",{name:"permanent_subdivision_village",value:h.permanent_subdivision_village,onChange:He,placeholder:"Enter subdivision or village name",maxLength:Ct("permanent_subdivision_village"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.4 Barangay"}),e.jsx("input",{name:"permanent_barangay",value:h.permanent_barangay,onChange:He,placeholder:"Enter barangay name",maxLength:Ct("permanent_barangay"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.5 City/Municipality"}),e.jsx("input",{name:"permanent_city_municipality",value:h.permanent_city_municipality,onChange:He,placeholder:"Enter city or municipality",maxLength:Ct("permanent_city_municipality"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.6 Province"}),e.jsx("input",{name:"permanent_province",value:h.permanent_province,onChange:He,placeholder:"Enter province",maxLength:Ct("permanent_province"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.7 ZIP CODE"}),e.jsx("input",{name:"permanent_zip_code",value:h.permanent_zip_code,onChange:He,placeholder:"Enter ZIP code",maxLength:Ct("permanent_zip_code"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"19. TELEPHONE NO."}),e.jsx("input",{type:"text",name:"telephone",value:h.telephone,onChange:He,maxLength:Ct("telephone"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"20. MOBILE NO."}),e.jsx("input",{type:"text",name:"mobile",value:h.mobile,onChange:He,maxLength:Ct("mobile"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"21. E-MAIL ADDRESS"}),e.jsx("input",{type:"email",name:"email",value:h.email,onChange:He,maxLength:Ct("email"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-green-100 text-green-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"II"}),"FAMILY BACKGROUND"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"22. SPOUSE'S INFORMATION"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.1 Surname"}),e.jsx("input",{name:"spouse_surname",value:h.spouse_surname,onChange:He,placeholder:"Enter surname",maxLength:Ct("spouse_surname"),disabled:h.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${h.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.2 First Name"}),e.jsx("input",{name:"spouse_firstname",value:h.spouse_firstname,onChange:He,placeholder:"Enter first name",maxLength:Ct("spouse_firstname"),disabled:h.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${h.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.3 Middle Name"}),e.jsx("input",{name:"spouse_middlename",value:h.spouse_middlename,onChange:He,placeholder:"Enter middle name",maxLength:Ct("spouse_middlename"),disabled:h.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${h.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.4 Extension"}),e.jsx("input",{name:"spouse_extension",value:h.spouse_extension,onChange:He,placeholder:"Enter extension (Jr., Sr., III, etc.)",maxLength:Ct("spouse_extension"),disabled:h.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${h.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.5 Occupation"}),e.jsx("input",{name:"spouse_occupation",value:h.spouse_occupation,onChange:He,placeholder:"Enter occupation",maxLength:Ct("spouse_occupation"),disabled:h.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${h.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.6 Employer/Business Name"}),e.jsx("input",{name:"spouse_employer_business_name",value:h.spouse_employer_business_name,onChange:He,placeholder:"Enter employer or business name",maxLength:Ct("spouse_employer_business_name"),disabled:h.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${h.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.7 Business Address"}),e.jsx("input",{name:"spouse_business_address",value:h.spouse_business_address,onChange:He,placeholder:"Enter business address",maxLength:Ct("spouse_business_address"),disabled:h.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${h.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.8 Telephone"}),e.jsx("input",{name:"spouse_telephone",value:h.spouse_telephone,onChange:He,placeholder:"Enter telephone number",maxLength:Ct("spouse_telephone"),disabled:h.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${h.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]})]})]})}),e.jsxs("div",{id:"children-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"23. CHILDREN"}),N.map((H,ie)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[3fr_1fr_auto] gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsx("input",{name:`children[${ie}].full_name`,value:H.full_name,onChange:ae=>qt(ie,"full_name",ae.target.value),placeholder:"Enter child's full name",maxLength:Ct("children_full_name"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),e.jsx("input",{name:`children[${ie}].date_of_birth`,type:"date",value:H.date_of_birth,onChange:ae=>qt(ie,"date_of_birth",ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsx("div",{className:"flex items-end justify-center",children:e.jsx("button",{type:"button",onClick:()=>rs(ie),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors w-12",title:"Remove child",children:e.jsx("svg",{className:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},ie)),e.jsx("button",{type:"button",onClick:Kt,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Child"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"24. FATHER'S INFORMATION"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"24.1 Surname"}),e.jsx("input",{name:"father_surname",value:h.father_surname,onChange:He,placeholder:"Enter father's surname",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"24.2 First Name"}),e.jsx("input",{name:"father_firstname",value:h.father_firstname,onChange:He,placeholder:"Enter father's first name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"24.4 Extension"}),e.jsx("input",{name:"father_extension",value:h.father_extension,onChange:He,placeholder:"Enter extension (Jr., Sr., III, etc.)",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"24.3 Middle Name"}),e.jsx("input",{name:"father_middlename",value:h.father_middlename,onChange:He,placeholder:"Enter father's middle name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"25. MOTHER'S MAIDEN NAME"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"25.1 Surname"}),e.jsx("input",{name:"mother_surname",value:h.mother_surname,onChange:He,placeholder:"Enter mother's maiden surname",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"25.2 First Name"}),e.jsx("input",{name:"mother_firstname",value:h.mother_firstname,onChange:He,placeholder:"Enter mother's first name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"25.3 Middle Name"}),e.jsx("input",{name:"mother_middlename",value:h.mother_middlename,onChange:He,placeholder:"Enter mother's middle name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]})]})]})]}),e.jsxs("section",{id:"education-section",className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-purple-100 text-purple-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"III"}),"EDUCATIONAL BACKGROUND"]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"26. EDUCATION LEVELS"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 table-fixed",children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"11%"}})," ",e.jsx("col",{style:{width:"16%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"12%"}})," ",e.jsx("col",{style:{width:"12%"}})," ",e.jsx("col",{style:{width:"20%"}})," "]}),e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`border border-gray-300 px-4 py-2 text-left ${ms("LEVEL",10)}`,children:"LEVEL"}),e.jsx("th",{className:`border border-gray-300 px-4 py-2 text-left ${ms("NAME OF SCHOOL",20)}`,children:"NAME OF SCHOOL"}),e.jsx("th",{className:`border border-gray-300 px-4 py-2 text-left ${ms("DEGREE/COURSE",20)}`,children:"DEGREE/COURSE"}),e.jsx("th",{className:`border border-gray-300 px-4 py-2 text-left ${ms("PERIOD",10)}`,children:"PERIOD"}),e.jsx("th",{className:`border border-gray-300 px-4 py-2 text-left ${ms("HIGHEST LEVEL/UNITS",7)}`,children:"HIGHEST LEVEL /UNITS"}),e.jsx("th",{className:`border border-gray-300 px-4 py-2 text-left ${ms("YEAR",8)}`,children:"YEAR"}),e.jsx("th",{className:`border border-gray-300 px-4 py-2 text-left ${ms("SCHOLARSHIP/HONORS",20)}`,children:"SCHOLARSHIP/HONORS"})]})}),e.jsx("tbody",{children:k(w).map((H,ie)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:H.level}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("textarea",{name:`education[${ie}].school_name`,value:H.school_name,onChange:ae=>zt(ie,"school_name",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("textarea",{name:`education[${ie}].degree_course`,value:H.degree_course,onChange:ae=>zt(ie,"degree_course",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("input",{name:`education[${ie}].period_from`,type:"date",value:H.period_from,onChange:ae=>zt(ie,"period_from",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",placeholder:"From",style:{fontSize:"12px"}}),e.jsx("input",{name:`education[${ie}].period_to`,type:"date",value:H.period_to,onChange:ae=>zt(ie,"period_to",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",placeholder:"To",style:{fontSize:"12px"}})]})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`education[${ie}].highest_level_units`,value:H.highest_level_units,onChange:ae=>zt(ie,"highest_level_units",ae.target.value),className:xs(H.highest_level_units,!0),style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`education[${ie}].year_graduated`,type:"number",value:H.year_graduated,onChange:ae=>zt(ie,"year_graduated",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",min:"1900",max:"2100",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("textarea",{name:`education[${ie}].scholarship_honors`,value:H.scholarship_honors,onChange:ae=>zt(ie,"scholarship_honors",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2",style:{fontSize:"12px"}})})]},ie))})]})})]})]})]}),de=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-orange-100 text-orange-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"IV"}),"CIVIL SERVICE ELIGIBILITY"]}),e.jsxs("div",{id:"eligibility-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"27. ELIGIBILITY RECORDS"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 table-fixed",children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"10%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"20%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"5%"}})," "]}),e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"ELIGIBILITY TYPE"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"RATING"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"DATE OF EXAMINATION"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"PLACE OF EXAMINATION"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"LICENSE NUMBER"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"DATE OF VALIDITY"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left"})]})}),e.jsx("tbody",{children:S.map((H,ie)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsxs("select",{name:`civil_service_eligibility[${ie}].eligibility_type`,value:H.eligibility_type,onChange:ae=>Qt(ie,"eligibility_type",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Eligibility Type"}),fe?e.jsx("option",{value:"",disabled:!0,children:"Loading eligibility types..."}):Ce.length>0?Ce.map(ae=>e.jsx("option",{value:ae.eligibility_type,children:ae.eligibility_type},ae.id)):e.jsx("option",{value:"",disabled:!0,children:"No eligibility types available"})]})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${ie}].rating`,value:H.rating,onChange:ae=>Qt(ie,"rating",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${ie}].date_of_examination`,type:"date",value:H.date_of_examination?O(H.date_of_examination):"",onChange:ae=>Qt(ie,"date_of_examination",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${ie}].place_of_examination`,value:H.place_of_examination,onChange:ae=>Qt(ie,"place_of_examination",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${ie}].license_number`,value:H.license_number,onChange:ae=>Qt(ie,"license_number",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${ie}].date_of_validity`,type:"date",value:H.date_of_validity?O(H.date_of_validity):"",onChange:ae=>Qt(ie,"date_of_validity",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("button",{type:"button",onClick:()=>$t(ie),className:"p-2 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors",title:"Remove eligibility",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},ie))})]})}),e.jsx("button",{type:"button",onClick:Ut,className:"mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Eligibility"})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-red-100 text-red-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"V"}),"WORK EXPERIENCE"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"(Include private employment. Start from your recent work) Description of duties should be indicated in the attached Work Experience sheet."}),e.jsxs("div",{id:"work-experience-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"28. WORK HISTORY"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 table-fixed",children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"19%"}})," ",e.jsx("col",{style:{width:"19%"}})," ",e.jsx("col",{style:{width:"11%"}})," ",e.jsx("col",{style:{width:"9%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"10%"}})," ",e.jsx("col",{style:{width:"4%"}})," "]}),e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm whitespace-normal break-words",children:"FROM"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm whitespace-normal break-words",children:"TO"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm whitespace-normal break-words",children:"POSITION TITLE"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm whitespace-normal break-words",children:"DEPARTMENT /AGENCY /COMPANY"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm whitespace-normal break-words",children:"MONTHLY SALARY"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm whitespace-normal break-words",children:"SALARY /GRADE /STEP"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm whitespace-normal break-words",children:"STATUS OF APPOINTMENT"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm whitespace-normal break-words",children:"GOV'T SERVICE"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm whitespace-normal break-words"})]})}),e.jsx("tbody",{children:T.map((H,ie)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsx("input",{name:`work_experience[${ie}].date_from`,type:"date",value:H.date_from?O(H.date_from):"",onChange:ae=>os(ie,"date_from",ae.target.value),className:"w-full px-1 py-1 border border-gray-300 rounded text-xs"})}),e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[(H.is_present===!0||!T.some((ae,Ae)=>Ae!==ie&&ae.is_present===!0))&&e.jsxs("label",{className:"flex items-center text-xs whitespace-nowrap",children:[e.jsx("input",{type:"checkbox",checked:H.is_present===!0,onChange:ae=>os(ie,"is_present",ae.target.checked),className:"mr-1"}),"Present"]}),e.jsx("input",{name:`work_experience[${ie}].date_to`,type:"date",value:H.is_present===!0?H.date_to?O(H.date_to):new Date().toISOString().split("T")[0]:H.date_to&&H.date_to!=="0"&&H.date_to!=="0000-00-00"?O(H.date_to):"",onChange:ae=>os(ie,"date_to",ae.target.value),disabled:H.is_present===!0,className:"w-full px-1 py-1 border border-gray-300 rounded text-xs disabled:bg-gray-100 disabled:text-gray-500"})]})}),e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsx("textarea",{name:`work_experience[${ie}].position_title`,value:H.position_title,onChange:ae=>os(ie,"position_title",ae.target.value),className:"w-full px-1 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2"})}),e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsx("textarea",{name:`work_experience[${ie}].department_agency_company`,value:H.department_agency_company,onChange:ae=>os(ie,"department_agency_company",ae.target.value),className:"w-full px-1 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2"})}),e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsx("input",{name:`work_experience[${ie}].monthly_salary`,type:"number",step:"0.01",value:H.monthly_salary,onChange:ae=>os(ie,"monthly_salary",ae.target.value),className:"w-full px-1 py-1 border border-gray-300 rounded text-xs"})}),e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsx("input",{name:`work_experience[${ie}].salary_grade_step`,value:H.salary_grade_step,onChange:ae=>os(ie,"salary_grade_step",ae.target.value),placeholder:"00-0",className:"w-full px-1 py-1 border border-gray-300 rounded text-xs"})}),e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsxs("select",{name:`work_experience[${ie}].status_of_appointment`,value:H.status_of_appointment,onChange:ae=>os(ie,"status_of_appointment",ae.target.value),className:"w-full px-1 py-1 border border-gray-300 rounded text-xs",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"Permanent",children:"Permanent"}),e.jsx("option",{value:"Casual",children:"Casual"}),e.jsx("option",{value:"Contract",children:"Contract"}),e.jsx("option",{value:"Job Order",children:"Job Order"}),e.jsx("option",{value:"Provisionary",children:"Provisionary"}),e.jsx("option",{value:"Temporary",children:"Temporary"})]})}),e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"radio",name:`work_experience[${ie}].government_service`,value:"Y",checked:H.government_service==="Y",onChange:ae=>os(ie,"government_service",ae.target.value),className:"mr-1"}),"Y"]}),e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"radio",name:`work_experience[${ie}].government_service`,value:"N",checked:H.government_service==="N",onChange:ae=>os(ie,"government_service",ae.target.value),className:"mr-1"}),"N"]})]})}),e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsx("button",{type:"button",onClick:()=>Yt(ie),className:"p-1 bg-red-500 text-white rounded text-xs hover:bg-red-600 transition-colors",title:"Remove work experience",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},ie))})]})}),e.jsx("button",{type:"button",onClick:gs,className:"mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Work Experience"})]})]})]}),Fe=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-teal-100 text-teal-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"VI"}),"VOLUNTARY WORK OR INVOLVEMENT IN CIVIC/NON-GOVERNMENT/PEOPLE/VOLUNTARY ORGANIZATION/S"]}),e.jsxs("div",{id:"voluntary-work-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"29. VOLUNTARY WORK RECORDS"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 table-fixed",children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"26%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"10%"}})," ",e.jsx("col",{style:{width:"25%"}})," ",e.jsx("col",{style:{width:"6%"}})," "]}),e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"NAME/ADDRESS OF ORG."}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"FROM"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"TO"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"NUMBER OF HOURS"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"POSITION/NATURE OF WORK"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left"})]})}),e.jsx("tbody",{children:I.map((H,ie)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("textarea",{value:H.organization_name_address,onChange:ae=>es(ie,"organization_name_address",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"date",value:H.date_from?O(H.date_from):"",onChange:ae=>es(ie,"date_from",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"date",value:H.date_to?O(H.date_to):"",onChange:ae=>es(ie,"date_to",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"number",step:"0.5",value:H.number_of_hours,onChange:ae=>es(ie,"number_of_hours",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("textarea",{value:H.position_nature_of_work,onChange:ae=>es(ie,"position_nature_of_work",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("button",{type:"button",onClick:()=>Jt(ie),className:"p-2 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors",title:"Remove voluntary work",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},ie))})]})}),e.jsx("button",{type:"button",onClick:Zt,className:"mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Voluntary Work"})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-indigo-100 text-indigo-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"VII"}),"LEARNING AND DEVELOPMENT (L&D) INTERVENTIONS/TRAINING PROGRAMS ATTENDED"]}),e.jsxs("div",{id:"training-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"30. TRAINING RECORDS"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"(Start from the most recent L&D/training program and include only the relevant L&D/training taken for the last five (5) years for Division Chief/Executive/Managerial positions)"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 table-fixed",children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"20%"}})," ",e.jsx("col",{style:{width:"16%"}})," ",e.jsx("col",{style:{width:"16%"}})," ",e.jsx("col",{style:{width:"10%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"18%"}})," ",e.jsx("col",{style:{width:"6%"}})," "]}),e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"TITLE OF TRAINING"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"FROM"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"TO"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"NUMBER OF HOURS"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"TYPE OF L&D"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"CONDUCTED /SPONSORED BY"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left"})]})}),e.jsx("tbody",{children:z.map((H,ie)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("textarea",{value:H.training_title,onChange:ae=>tt(ie,"training_title",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"date",value:H.date_from?O(H.date_from):"",onChange:ae=>tt(ie,"date_from",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"date",value:H.date_to?O(H.date_to):"",onChange:ae=>tt(ie,"date_to",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"number",step:"0.5",value:H.number_of_hours,onChange:ae=>tt(ie,"number_of_hours",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:H.type_of_ld,onChange:ae=>tt(ie,"type_of_ld",ae.target.value),placeholder:"e.g. Managerial, Technical",className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("textarea",{value:H.conducted_sponsored_by,onChange:ae=>tt(ie,"conducted_sponsored_by",ae.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("button",{type:"button",onClick:()=>nt(ie),className:"p-2 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors",title:"Remove training",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},ie))})]})}),e.jsx("button",{type:"button",onClick:be,className:"mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Training"})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-pink-100 text-pink-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"VIII"}),"OTHER INFORMATION"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{id:"skills-section",className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"31. SPECIAL SKILLS AND HOBBIES"}),R.map((H,ie)=>e.jsxs("div",{className:"flex space-x-2 mb-2",children:[e.jsx("textarea",{value:H.skill_hobby,onChange:ae=>_t(ie,ae.target.value),placeholder:"e.g. Computer Programming, Playing Guitar",rows:"2",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm resize-vertical"}),e.jsx("button",{type:"button",onClick:()=>kt(ie),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Remove skill/hobby",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},ie)),e.jsx("button",{type:"button",onClick:ft,className:"mt-2 w-full px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm",children:"Add Skill/Hobby"})]}),e.jsxs("div",{id:"recognition-section",className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"32. NON-ACADEMIC DISTINCTIONS/RECOGNITION"}),U.map((H,ie)=>e.jsxs("div",{className:"flex space-x-2 mb-2",children:[e.jsx("textarea",{value:H.recognition,onChange:ae=>_e(ie,ae.target.value),placeholder:"e.g. Best Employee Award 2023",rows:"2",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm resize-vertical"}),e.jsx("button",{type:"button",onClick:()=>as(ie),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Remove recognition",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},ie)),e.jsx("button",{type:"button",onClick:cs,className:"mt-2 w-full px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm",children:"Add Recognition"})]}),e.jsxs("div",{id:"membership-section",className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"33. MEMBERSHIP IN ASSOCIATION/ORGANIZATION"}),$.map((H,ie)=>e.jsxs("div",{className:"flex space-x-2 mb-2",children:[e.jsx("textarea",{value:H.organization,onChange:ae=>Ye(ie,ae.target.value),placeholder:"e.g. Philippine Computer Society",rows:"2",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm resize-vertical"}),e.jsx("button",{type:"button",onClick:()=>ct(ie),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Remove membership",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},ie)),e.jsx("button",{type:"button",onClick:We,className:"mt-2 w-full px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm",children:"Add Membership"})]})]})]})]}),se=()=>{const H=St.useRef(null),[ie,ae]=St.useState(!1),Ae=St.useRef(null),Je=()=>{const Rt=H.current;if(Rt){const Tt=Rt.getContext("2d");Tt.clearRect(0,0,Rt.width,Rt.height),Tt.fillStyle="white",Tt.fillRect(0,0,Rt.width,Rt.height),Tt.strokeStyle="black",Tt.fillStyle="white",Tt.lineWidth=2,Tt.lineCap="round",Tt.lineJoin="round",Tt.globalCompositeOperation="source-over",console.log(" Canvas force reset - stroke style:",Tt.strokeStyle)}};St.useEffect(()=>{const Rt=H.current;if(Rt){const Tt=Rt.getContext("2d");Tt.strokeStyle="black",Tt.fillStyle="white",Tt.lineWidth=2,Tt.lineCap="round",Tt.lineJoin="round",Tt.globalCompositeOperation="source-over",Tt.fillRect(0,0,Rt.width,Rt.height),console.log(" Canvas initialized with stroke style:",Tt.strokeStyle)}},[]),St.useEffect(()=>{const Rt=H.current;if(Rt&&ge){const Tt=Rt.getContext("2d"),Ve=new Image;Ve.onload=()=>{Tt.clearRect(0,0,Rt.width,Rt.height),Tt.fillStyle="#ffffff",Tt.fillRect(0,0,Rt.width,Rt.height),Tt.drawImage(Ve,0,0,Rt.width,Rt.height),Tt.strokeStyle="black",Tt.fillStyle="white",Tt.lineWidth=2,Tt.lineCap="round",Tt.lineJoin="round",Tt.globalCompositeOperation="source-over"},Ve.src=ge}},[ge]),St.useEffect(()=>()=>{Ae.current&&clearTimeout(Ae.current)},[]);const Qe=Rt=>{const Tt=H.current,Ve=Tt.getBoundingClientRect(),Bs=Tt.width/Ve.width,br=Tt.height/Ve.height;return Rt.touches&&Rt.touches[0]?{x:(Rt.touches[0].clientX-Ve.left)*Bs,y:(Rt.touches[0].clientY-Ve.top)*br}:{x:(Rt.clientX-Ve.left)*Bs,y:(Rt.clientY-Ve.top)*br}},pt=Rt=>{Rt.preventDefault(),Ae.current&&clearTimeout(Ae.current);const Ve=H.current.getContext("2d"),Bs=Qe(Rt);Ve.strokeStyle="black",Ve.fillStyle="white",Ve.lineWidth=2,Ve.lineCap="round",Ve.lineJoin="round",Ve.globalCompositeOperation="source-over",console.log(" Starting new stroke with style:",Ve.strokeStyle),Ve.beginPath(),Ve.moveTo(Bs.x,Bs.y),ae(!0)},jt=Rt=>{if(!ie)return;Rt.preventDefault();const Ve=H.current.getContext("2d"),Bs=Qe(Rt);Ve.strokeStyle!=="black"&&(Ve.strokeStyle="black",Ve.lineWidth=2,Ve.lineCap="round",Ve.lineJoin="round",Ve.globalCompositeOperation="source-over"),Ve.lineTo(Bs.x,Bs.y),Ve.stroke()},wt=Rt=>{const Tt=document.createElement("canvas"),Ve=Tt.getContext("2d"),Bs=400,br=150;Tt.width=Bs,Tt.height=br,Ve.fillStyle="white",Ve.fillRect(0,0,Bs,br),Ve.drawImage(Rt,0,0,Bs,br);let Gt=.9,Ht,Us=0;const ds=20;do{Ht=Tt.toDataURL("image/png",Gt);const vr=(Ht.split(",")[1]?Ht.split(",")[1].length:0)*.75/1024;if(vr<=150){console.log(` Signature compressed successfully: ${vr.toFixed(2)}KB, quality: ${Gt}`);break}Gt-=.05,Us++}while(Gt>.1&&Us<ds);return Us>=ds&&console.warn(" Could not compress signature below 150KB, using lowest quality available"),Ht},Ft=Rt=>{Rt.preventDefault(),ie&&(ae(!1),Ae.current&&clearTimeout(Ae.current),Ae.current=setTimeout(()=>{ns()},1e3))},ns=()=>{const Rt=H.current;if(Rt){const Tt=wt(Rt);Ge(Tt),console.log(" Signature auto-saved")}},ks=()=>{Ae.current&&clearTimeout(Ae.current),ns()},$s=()=>{const Rt=H.current,Tt=Rt.getContext("2d");Ae.current&&clearTimeout(Ae.current),Tt.clearRect(0,0,Rt.width,Rt.height),Tt.fillStyle="white",Tt.fillRect(0,0,Rt.width,Rt.height),Tt.strokeStyle="black",Tt.fillStyle="white",Tt.lineWidth=2,Tt.lineCap="round",Tt.lineJoin="round",Tt.globalCompositeOperation="source-over",console.log(" Canvas cleared and stroke style reset to:",Tt.strokeStyle),Ge("")};return e.jsxs("div",{className:"border border-gray-300 rounded-lg p-4",children:[e.jsx("canvas",{ref:H,width:400,height:150,className:"border border-gray-300 bg-white cursor-crosshair",onMouseDown:pt,onMouseMove:jt,onMouseUp:Ft,onMouseLeave:Ft,onTouchStart:pt,onTouchMove:jt,onTouchEnd:Ft,style:{touchAction:"none",backgroundColor:"white",display:"block"}}),e.jsxs("div",{className:"mt-2 flex space-x-2",children:[e.jsx("button",{type:"button",onClick:ks,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Save Signature"}),e.jsx("button",{type:"button",onClick:$s,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Clear Signature"}),e.jsx("button",{type:"button",onClick:Je,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Reset Canvas"})]})]})},pe=()=>(console.log(" [PDS] Current declarations state in renderPage4:",Q),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{id:"declarations-section",className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-yellow-100 text-yellow-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"IX"}),"DECLARATIONS"]}),e.jsx("p",{className:"text-sm text-gray-700 mb-6 italic",children:"Please answer the following questions with complete honesty. Any misrepresentation made in this document may cause the filing of administrative/criminal case/s against you."}),e.jsx("div",{className:"mb-6 p-4 bg-gray-50 border-l-4 border-blue-500",children:e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"34. Are you related by consanguinity or affinity to the appointing or recommending authority, or to the chief of bureau or office or to the person who has immediate supervision over you in the Office, Bureau or Department where you will be appointed,"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"a. within the third degree?"}),e.jsx("div",{children:e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfour_a",value:"true",checked:Q.thirtyfour_a===!0,onChange:()=>Me("thirtyfour_a",!0),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfour_a",value:"false",checked:Q.thirtyfour_a===!1,onChange:()=>Me("thirtyfour_a",!1),className:"mr-2"}),"NO"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"b. within the fourth degree? (for Local Government Unit - Career Employees)"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfour_b",value:"true",checked:Q.thirtyfour_b===!0,onChange:()=>Me("thirtyfour_b",!0,["thirtyfour_b_details"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfour_b",value:"false",checked:Q.thirtyfour_b===!1,onChange:()=>Me("thirtyfour_b",!1,["thirtyfour_b_details"]),className:"mr-2"}),"NO"]})]}),Q.thirtyfour_b&&e.jsx("input",{type:"text",name:"thirtyfour_b_details",value:Q.thirtyfour_b_details,onChange:te,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"35a. Have you ever been found guilty of any administrative offense?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfive_a",value:"true",checked:Q.thirtyfive_a===!0,onChange:()=>Me("thirtyfive_a",!0,["thirtyfive_a_details"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfive_a",value:"false",checked:Q.thirtyfive_a===!1,onChange:()=>Me("thirtyfive_a",!1,["thirtyfive_a_details"]),className:"mr-2"}),"NO"]})]}),Q.thirtyfive_a&&e.jsx("input",{type:"text",name:"thirtyfive_a_details",value:Q.thirtyfive_a_details,onChange:te,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"35b. Have you been criminally charged before any court?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfive_b",value:"true",checked:Q.thirtyfive_b===!0,onChange:()=>Me("thirtyfive_b",!0,["thirtyfive_datefiled","thirtyfive_statuses"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfive_b",value:"false",checked:Q.thirtyfive_b===!1,onChange:()=>Me("thirtyfive_b",!1,["thirtyfive_datefiled","thirtyfive_statuses"]),className:"mr-2"}),"NO"]})]}),Q.thirtyfive_b&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsx("input",{type:"date",name:"thirtyfive_datefiled",value:Q.thirtyfive_datefiled||"",onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("input",{type:"text",name:"thirtyfive_statuses",value:Q.thirtyfive_statuses,onChange:te,placeholder:"Status of Case/s:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"36. Have you ever been convicted of any crime or violation of any law, decree, ordinance or regulation by any court or tribunal?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtysix",value:"true",checked:Q.thirtysix===!0,onChange:()=>Me("thirtysix",!0,["thirtysix_details"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtysix",value:"false",checked:Q.thirtysix===!1,onChange:()=>Me("thirtysix",!1,["thirtysix_details"]),className:"mr-2"}),"NO"]})]}),Q.thirtysix&&e.jsx("input",{type:"text",name:"thirtysix_details",value:Q.thirtysix_details,onChange:te,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"37. Have you ever been separated from the service in any of the following modes: resignation, retirement, dropped from the rolls, dismissal, termination, end of term, finished contract or phased out (abolition) in the public or private sector?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyseven",value:"true",checked:Q.thirtyseven===!0,onChange:()=>Me("thirtyseven",!0,["thirtyseven_details"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyseven",value:"false",checked:Q.thirtyseven===!1,onChange:()=>Me("thirtyseven",!1,["thirtyseven_details"]),className:"mr-2"}),"NO"]})]}),Q.thirtyseven&&e.jsx("input",{type:"text",name:"thirtyseven_details",value:Q.thirtyseven_details,onChange:te,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"38a. Have you ever been a candidate in a national or local election held within the last year (except Barangay election)?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyeight_a",value:"true",checked:Q.thirtyeight_a===!0,onChange:()=>Me("thirtyeight_a",!0,["thirtyeight_a_details"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyeight_a",value:"false",checked:Q.thirtyeight_a===!1,onChange:()=>Me("thirtyeight_a",!1,["thirtyeight_a_details"]),className:"mr-2"}),"NO"]})]}),Q.thirtyeight_a&&e.jsx("input",{type:"text",name:"thirtyeight_a_details",value:Q.thirtyeight_a_details,onChange:te,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"38b. Have you resigned from the government service during the three (3)-month period before the last election to promote/actively campaign for a national or local candidate?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyeight_b",value:"true",checked:Q.thirtyeight_b===!0,onChange:()=>Me("thirtyeight_b",!0,["thirtyeight_b_details"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyeight_b",value:"false",checked:Q.thirtyeight_b===!1,onChange:()=>Me("thirtyeight_b",!1,["thirtyeight_b_details"]),className:"mr-2"}),"NO"]})]}),Q.thirtyeight_b&&e.jsx("input",{type:"text",name:"thirtyeight_b_details",value:Q.thirtyeight_b_details,onChange:te,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"39. Have you acquired the status of an immigrant or permanent resident of another country?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtynine",value:"true",checked:Q.thirtynine===!0,onChange:()=>Me("thirtynine",!0,["thirtynine_details"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtynine",value:"false",checked:Q.thirtynine===!1,onChange:()=>Me("thirtynine",!1,["thirtynine_details"]),className:"mr-2"}),"NO"]})]}),Q.thirtynine&&e.jsx("input",{type:"text",name:"thirtynine_details",value:Q.thirtynine_details,onChange:te,placeholder:"If YES, give details (country):",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]})]}),e.jsx("div",{className:"mb-6 p-4 bg-gray-50 border-l-4 border-blue-500",children:e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"40. Pursuant to: (a) Indigenous People's Act (RA 8371); (b) Magna Carta for Disabled Persons (RA 7277); and (c) Solo Parents Welfare Act of 2000 (RA 8972), please answer the following items:"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"a. Are you a member of any indigenous group?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"forty_a",value:"true",checked:Q.forty_a===!0,onChange:()=>Me("forty_a",!0,["forty_a_details"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"forty_a",value:"false",checked:Q.forty_a===!1,onChange:()=>Me("forty_a",!1,["forty_a_details"]),className:"mr-2"}),"NO"]})]}),Q.forty_a&&e.jsx("input",{type:"text",name:"forty_a_details",value:Q.forty_a_details,onChange:te,placeholder:"If YES, please specify:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"b. Are you a person with disability?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"forty_b",value:"true",checked:Q.forty_b===!0,onChange:()=>Me("forty_b",!0,["forty_b_details"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"forty_b",value:"false",checked:Q.forty_b===!1,onChange:()=>Me("forty_b",!1,["forty_b_details"]),className:"mr-2"}),"NO"]})]}),Q.forty_b&&e.jsx("input",{type:"text",name:"forty_b_details",value:Q.forty_b_details,onChange:te,placeholder:"If YES, please specify ID No:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"c. Are you a solo parent?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"forty_c",value:"true",checked:Q.forty_c===!0,onChange:()=>Me("forty_c",!0,["forty_c_details"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"forty_c",value:"false",checked:Q.forty_c===!1,onChange:()=>Me("forty_c",!1,["forty_c_details"]),className:"mr-2"}),"NO"]})]}),Q.forty_c&&e.jsx("input",{type:"text",name:"forty_c_details",value:Q.forty_c_details,onChange:te,placeholder:"If YES, please specify ID No:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"bg-purple-100 text-purple-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"X"}),"CHARACTER REFERENCES"]}),e.jsxs("span",{className:"text-sm font-normal text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:[V.filter(H=>H.reference_name&&H.reference_name.trim()!=="").length,"/3 Required"]})]}),e.jsxs("div",{id:"references-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"41. REFERENCES (Person not related by consanguinity or affinity to applicant /appointee)"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 table-fixed",children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"42%"}})," ",e.jsx("col",{style:{width:"33%"}})," ",e.jsx("col",{style:{width:"20%"}})," ",e.jsx("col",{style:{width:"6%"}})," "]}),e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm",children:"NAME"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm",children:"ADDRESS"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm",children:"TEL. NO."}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm"})]})}),e.jsx("tbody",{children:V.map((H,ie)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:H.reference_name,onChange:ae=>Mt(ie,"reference_name",ae.target.value),placeholder:"Enter full name",className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("textarea",{value:H.reference_address,onChange:ae=>Mt(ie,"reference_address",ae.target.value),placeholder:"Enter complete address",className:"w-full px-2 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:H.reference_tel_no,onChange:ae=>Mt(ie,"reference_tel_no",ae.target.value),placeholder:"Enter telephone number",className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("button",{type:"button",onClick:()=>xt(ie),className:"p-1 bg-red-500 text-white rounded text-xs hover:bg-red-600 transition-colors",title:"Remove reference",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},ie))})]})}),e.jsx("button",{type:"button",onClick:rt,disabled:V.length>=3,className:`mt-4 px-4 py-2 rounded-lg ${V.length>=3?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,children:V.length>=3?"Maximum 3 References":"Add Reference"})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-gray-100 text-gray-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"XI"}),"OATH & DECLARATION"]}),e.jsx("div",{className:"bg-gray-50 border border-gray-300 rounded-lg p-6 mb-6",children:e.jsxs("p",{className:"text-sm text-gray-800 leading-relaxed",children:[e.jsx("strong",{children:"42. DECLARATION:"})," I declare under oath that I have personally accomplished this Personal Data Sheet which is a true, correct and complete statement pursuant to the provisions of pertinent laws, rules and regulations of the Republic of the Philippines. I authorize the agency head/authorized representative to verify/validate the contents stated herein. I agree that any misrepresentation made in this document and its attachments shall cause the filing of administrative/criminal case/s against me."]})})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"bg-cyan-100 text-cyan-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"XII"}),"GOVERNMENT ISSUED ID"]}),ne.length>0&&ne[0].government_issued_id&&!me&&e.jsxs("span",{className:"text-sm font-normal text-green-600 bg-green-100 px-3 py-1 rounded-full",children:[" Active ID: ",ne[0].government_issued_id]}),me&&e.jsx("span",{className:"text-sm font-normal text-orange-600 bg-orange-100 px-3 py-1 rounded-full",children:" Replacing ID - Fill all fields to accept changes"})]}),e.jsxs("div",{id:"government-id-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"43. GOVERNMENT ISSUED ID"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"(i.e. Passport, GSIS, SSS, PRC, Driver's License, etc.) PLEASE INDICATE ID Number and Date of Issuance"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 table-fixed",children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"30%"}})," ",e.jsx("col",{style:{width:"25%"}})," ",e.jsx("col",{style:{width:"20%"}})," ",e.jsx("col",{style:{width:"25%"}})," "]}),e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm",children:"GOVERNMENT ISSUED ID"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm",children:"ID NUMBER"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm",children:"DATE ISSUED"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm",children:"PLACE OF ISSUANCE"})]})}),e.jsx("tbody",{children:ne.map((H,ie)=>e.jsxs("tr",{className:me?"bg-orange-50":"",children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:H.government_issued_id,onChange:ae=>Te(ie,"government_issued_id",ae.target.value),placeholder:"Enter Government ID",className:`w-full px-2 py-1 border rounded text-xs ${me?"border-orange-300 focus:border-orange-500":"border-gray-300"}`,style:{fontSize:"12px"},required:me})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:H.id_number,onChange:ae=>Te(ie,"id_number",ae.target.value),placeholder:"Enter ID Number",className:`w-full px-2 py-1 border rounded text-xs ${me?"border-orange-300 focus:border-orange-500":"border-gray-300"}`,style:{fontSize:"12px"},required:me})}),e.jsxs("td",{className:"border border-gray-300 px-4 py-2",children:[console.log(` [Government ID] Date issued for ID ${ie}:`,H.date_issued),e.jsx("input",{type:"date",value:H.date_issued?H.date_issued.split("T")[0]:"",onChange:ae=>Te(ie,"date_issued",ae.target.value),placeholder:"Select Date",className:`w-full px-2 py-1 border rounded text-xs ${me?"border-orange-300 focus:border-orange-500":"border-gray-300"}`,style:{fontSize:"12px"},required:me})]}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:H.place_of_issuance,onChange:ae=>Te(ie,"place_of_issuance",ae.target.value),placeholder:"Enter Place of Issuance",className:`w-full px-2 py-1 border rounded text-xs ${me?"border-orange-300 focus:border-orange-500":"border-gray-300"}`,style:{fontSize:"12px"},required:me})})]},ie))})]})}),e.jsxs("div",{className:"mt-4 flex space-x-3",children:[console.log(" [Government ID] Render - isReplacingGovId:",me),console.log(" [Government ID] Render - hasPendingGovIdChange:",ee),console.log(" [Government ID] Render - governmentIds:",ne),me?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>{console.log(" [Government ID] Change Government ID button clicked"),$e()},className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Change Government ID"}),e.jsx("button",{type:"button",onClick:et,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Cancel"})]}):e.jsx("button",{type:"button",onClick:Ee,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:ne.length>0&&ne[0].government_issued_id?"Replace Government ID":"Add Government ID"})]})]})]}),e.jsxs("section",{id:"media-section",className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-rose-100 text-rose-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"XIII"}),"SIGNATURE, PHOTO & THUMBMARK"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{id:"signature-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"44. EMPLOYEE SIGNATURE"}),ge&&e.jsx("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Signature loaded from saved record"]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Draw your signature below or upload an image"}),e.jsx(se,{}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Or Upload Signature Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:Et,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),ge&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Signature Preview:"}),e.jsx("img",{src:ge,alt:"Signature",className:"border border-gray-300 rounded-lg max-w-full h-32 object-contain"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Accomplished"}),e.jsx("input",{id:"date-accomplished",type:"date",value:ke,onChange:H=>Re(H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{id:"photo-section",className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"PHOTO (3.5cm x 4.5cm)"}),Ke&&e.jsx("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Photo loaded from saved record"]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Upload passport-size photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:dt,className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-3"}),Ke&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Photo Preview:"}),e.jsx("img",{src:Ke,alt:"Employee",className:"border border-gray-300 rounded-lg w-32 h-40 object-cover"})]})]}),e.jsxs("div",{id:"thumbmark-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"RIGHT THUMBMARK"}),Se&&e.jsx("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Thumbmark loaded from saved record"]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Upload right thumbmark image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:It,className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-3"}),Se&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Thumbmark Preview:"}),e.jsx("img",{src:Se,alt:"Thumbmark",className:"border border-gray-300 rounded-lg w-24 h-24 object-contain"})]})]})]})]})]})]}));return E===!1?e.jsx("div",{className:"max-w-3xl mx-auto p-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No PDS found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't find your Personal Data Sheet. Click below to create one and start filling it out."}),e.jsx("button",{onClick:Fr,disabled:l,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-60",children:l?"Creating":"Create My PDS"})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Personal Data Sheet (PDS)"}),e.jsx("p",{className:"text-gray-600",children:"Track your progress and complete missing information"})]}),e.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:" Back to DTR Check"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"PDS Completeness"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[(typeof d=="number"?d:0).toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${(d||0)>=80?"bg-green-500":(d||0)>=50?"bg-yellow-500":(d||0)>=25?"bg-orange-500":"bg-red-500"}`,style:{width:`${d||0}%`}})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(d||0)<25?"Just getting started":(d||0)<50?"Making progress":(d||0)<80?"Almost there!":(d||0)<100?"Nearly complete!":"Complete!"})]}),u.length>0&&e.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("svg",{className:"w-4 h-4 text-yellow-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("span",{className:"text-sm font-medium text-yellow-800",children:["Missing Fields (",u.length,")"]})]}),e.jsx("div",{className:`overflow-y-auto ${g?"max-h-64":"max-h-32"}`,children:e.jsxs("div",{className:"space-y-1",children:[(g?u:u.slice(0,10)).map((H,ie)=>e.jsxs("div",{className:"text-xs text-yellow-700 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-2 flex-shrink-0"}),e.jsxs("span",{className:"font-medium",children:[H.section,":"]}),e.jsx("button",{onClick:()=>ts(H),className:"ml-1 text-blue-600 hover:text-blue-800 hover:underline cursor-pointer transition-colors duration-200",title:`Click to focus on ${H.field} field`,children:H.field})]},ie)),u.length>10&&e.jsx("div",{className:"flex justify-center pt-2",children:e.jsx("button",{onClick:()=>j(!g),className:"text-xs text-blue-600 hover:text-blue-800 hover:underline cursor-pointer transition-colors duration-200 font-medium",children:g?`Show Less (showing ${u.length} of ${u.length})`:`Show More (${u.length-10} more fields)`})})]})})]}),u.length===0&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:" All required fields completed!"})]})})]}),!fe&&it.length===0&&Nt.length===0&&Ce.length===0&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mx-6 mt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:"Lookup Data Not Available"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Unable to load data from HR201 database tables"})]})]}),e.jsx("button",{onClick:ut,className:"bg-yellow-600 text-white px-3 py-1 rounded text-sm hover:bg-yellow-700 transition-colors",children:"Retry"})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"PDS Pages"}),e.jsx("div",{className:"flex space-x-2",children:[1,2,3,4].map(H=>e.jsxs("button",{onClick:()=>a(H),className:`px-4 py-2 rounded-lg font-medium ${n===H?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Page ",H," "]},H))})]})}),e.jsxs("div",{className:"min-h-screen",children:[n===1&&je(),n===2&&de(),n===3&&Fe(),n===4&&pe()]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex space-x-3",children:n>1&&e.jsx("button",{onClick:()=>a(n-1),disabled:Oe,className:`px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 ${Oe?"opacity-50 cursor-not-allowed":""}`,children:" Previous Page"})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>ce(!0),disabled:l||Oe,className:`px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50 flex items-center space-x-2 ${Oe?"cursor-not-allowed":""}`,children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("span",{children:"Save Draft"})]})}),e.jsx("button",{onClick:()=>ce(!1),disabled:l||Oe,className:`px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-2 ${Oe?"cursor-not-allowed":""}`,children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:"Save & Close"})]})}),e.jsxs("button",{onClick:ys,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),e.jsx("span",{children:"Print PDS"})]}),n<4&&e.jsx("button",{onClick:()=>a(n+1),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Next Page "})]})]})})]})]}),L&&e.jsxs("div",{className:"my-pds-print-overlay fixed inset-0 z-50 bg-black/70 flex items-center justify-center px-4 py-8",children:[e.jsx("style",{children:q}),e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-full overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"no-print border-b px-6 py-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"PDS Print Preview"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Select a page or print the entire PDS."})]}),e.jsx("button",{onClick:()=>F(!1),className:"px-3 py-2 text-gray-600 hover:text-gray-900",children:""})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>Y(null),className:`px-3 py-1 rounded-full text-sm ${W===null?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Pages"}),[1,2,3,4].map(H=>e.jsxs("button",{onClick:()=>Y(H),className:`px-3 py-1 rounded-full text-sm ${W===H?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Page ",H]},H))]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Print"}),e.jsx("button",{onClick:()=>F(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 border border-gray-300",children:"Close"})]})]}),e.jsx("div",{className:"print-scope flex-1 overflow-auto bg-gray-50 px-4 py-3",children:e.jsx(l4,{formData:h,children:N,education:w,civilServiceEligibility:S,workExperience:T,voluntaryWork:I,trainings:z,skills:R,recognitions:U,memberships:$,declarations:Q,references:V,governmentIds:ne,signatureData:ge,photoData:Ke,thumbmarkData:Se,dateAccomplished:ke,pageNumber:W})})]})]}),ve&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:we==="height"?"Height Converter":"Weight Converter"}),e.jsx("button",{onClick:Ue,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),we==="height"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Convert height to meters"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value"}),e.jsx("input",{type:"number",value:le.value,onChange:H=>ze("value",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"5",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsxs("select",{value:le.unit,onChange:H=>ze("unit",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"ft",children:"Feet (ft)"}),e.jsx("option",{value:"cm",children:"Centimeters (cm)"}),e.jsx("option",{value:"in",children:"Inches (in)"})]})]})]}),e.jsx("button",{onClick:ot,disabled:!le.value||!le.unit,className:"w-full px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Convert to Meters"}),le.convertedValue&&e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800",children:e.jsxs("strong",{children:["Result: ",le.convertedValue," meters"]})})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Convert weight to kilograms"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value"}),e.jsx("input",{type:"number",value:le.value,onChange:H=>ze("value",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"150",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsxs("select",{value:le.unit,onChange:H=>ze("unit",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"lbs",children:"Pounds (lbs)"}),e.jsx("option",{value:"g",children:"Grams (g)"})]})]})]}),e.jsx("button",{onClick:ot,disabled:!le.value||!le.unit,className:"w-full px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Convert to Kilograms"}),le.convertedValue&&e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800",children:e.jsxs("strong",{children:["Result: ",le.convertedValue," kilograms"]})})})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:Ue,className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:vt,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",disabled:!le.convertedValue,children:"Apply to Form"})]})]})})]})},c4=()=>{const{user:t}=Ts();console.log(" [MyLeaveRecords] Component is rendering!");const[s,r]=x.useState(null),[n,a]=x.useState(!0),[l,i]=x.useState(null),o=async()=>{var d,m,u;try{a(!0),i(null),console.log(" [MyLeaveRecords] Starting fetch for user:",t);const p=(t==null?void 0:t.USERID)||(t==null?void 0:t.userid);if(!p)throw new Error("User ID not found");console.log(" [MyLeaveRecords] User ID:",p),console.log(" [MyLeaveRecords] Fetching employees...");const g=await oe.get("/201-employees");if(console.log(" [MyLeaveRecords] Employee response:",g.data),!g.data.success)throw new Error("Failed to fetch employee data");const j=g.data.data;console.log(" [MyLeaveRecords] All employees:",j);const y=j.find(N=>N.dtruserid===p);if(console.log(" [MyLeaveRecords] Current employee:",y),!y)throw new Error("Employee record not found");const v=String(y.objid||"").trim();if(console.log(" [MyLeaveRecords] Fetching leave record for objid:",v),!v)throw new Error("Employee objid is missing or invalid");const h=v.split(":")[0];console.log(" [MyLeaveRecords] Clean objid:",h);const f=await oe.get(`/employee-leave-records/${encodeURIComponent(h)}`);console.log(" [MyLeaveRecords] Leave response:",f.data),f.data.success?(r(f.data.leaveRecord),console.log(" [MyLeaveRecords] Leave record loaded successfully")):(console.log(" [MyLeaveRecords] No leave record found, setting to null"),r(null))}catch(p){((d=p==null?void 0:p.response)==null?void 0:d.status)===404?(console.log(" [MyLeaveRecords] Leave record not found (404), this is normal if employee has no record yet"),r(null),i(null)):(console.error(" [MyLeaveRecords] Error fetching leave record:",p),i(((u=(m=p.response)==null?void 0:m.data)==null?void 0:u.message)||p.message||"Failed to fetch leave record"))}finally{a(!1)}};x.useEffect(()=>{t&&o()},[t]);const c=d=>d?parseFloat(d).toFixed(3):"0.000";return n?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading leave records..."})]}):l?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:e.jsx("p",{children:l})}),e.jsx("button",{onClick:o,className:"mt-2 px-3 py-1 bg-red-100 text-red-800 rounded hover:bg-red-200",children:"Retry"})]})})}):e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:s?e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Leave Credits"}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"Total Earned Credits"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-white rounded border",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Earned VL"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:c(s.total_earned_vl)})]}),e.jsxs("div",{className:"p-3 bg-white rounded border",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Earned SL"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:c(s.total_earned_sl)})]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-green-900 mb-3",children:"Leave Balances"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-white rounded border",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"VL Balance"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:c(s.balance_vl)})]}),e.jsxs("div",{className:"p-3 bg-white rounded border",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"SL Balance"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:c(s.balance_sl)})]})]})]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["Last updated: ",s.updated_at?new Date(s.updated_at).toLocaleDateString():"N/A"]})]}):e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"text-gray-500 mb-4",children:e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Not available"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Leave record is not available. Please contact HR to set up your leave records."})]})})})},d4=({isOpen:t,onClose:s,transaction:r,onSave:n,readonly:a=!1})=>{var F;const{user:l}=Ts(),[i,o]=x.useState({leavetypeid:"",deductmode:"Leave",leavepurpose:"",selectedDates:[],deductedcredit:0,inclusivedates:0}),[c,d]=x.useState([]),[m,u]=x.useState(!1),[p,g]=x.useState(!1),[j,y]=x.useState(null),[v,h]=x.useState([]),[f,N]=x.useState({selectedQuestionId:null,answer:""}),[b,w]=x.useState(null);x.useEffect(()=>{r&&t&&(o({leavetypeid:r.leavetypeid||"",deductmode:r.deductmode||"Leave",leavepurpose:r.leavepurpose||"",selectedDates:r.details?r.details.map(W=>W.deducteddate):[],deductedcredit:r.deductedcredit||0,inclusivedates:r.inclusivedates||0}),r.questionAnswer&&N({selectedQuestionId:r.questionAnswer.questionId,answer:r.questionAnswer.answer}))},[r,t]),x.useEffect(()=>{t&&(S(),D())},[t]),x.useEffect(()=>{i.leavetypeid&&C(i.leavetypeid)},[i.leavetypeid]);const D=async()=>{try{const W=(l==null?void 0:l.USERID)||(l==null?void 0:l.userid);if(!W)return;const J=(await oe.get("/201-employees")).data.data.find(O=>O.dtruserid===W);if(J)try{const O=await oe.get(`/employee-leave-records/${J.objid}`),M=O.data.leaveRecord||O.data.data||O.data;w({...J,vl_balance:M.balance_vl||M.VL||0,sl_balance:M.balance_sl||M.SL||0})}catch(O){console.warn("Leave record not found, setting balances to 0:",O),w({...J,vl_balance:0,sl_balance:0})}}catch(W){console.error("Error fetching employee data:",W)}},S=async()=>{try{u(!0);const W=await oe.get("/leave-types");console.log("Leave types response:",W.data);let Y=[];Array.isArray(W.data)?Y=W.data:(W.data&&Array.isArray(W.data.data)||W.data&&W.data.success&&Array.isArray(W.data.data))&&(Y=W.data.data),d(Y)}catch(W){console.error("Error fetching leave types:",W),y("Failed to fetch leave types"),d([])}finally{u(!1)}},C=async W=>{try{const Y=await oe.get(`/leave-types/${W}/questions`);h(Array.isArray(Y.data)?Y.data:[])}catch(Y){console.error("Error fetching leave type questions:",Y),h([])}},T=W=>{const{name:Y,value:q}=W.target;o(J=>({...J,[Y]:q}))},_=W=>{const Y=W.toISOString().split("T")[0];o(q=>({...q,selectedDates:q.selectedDates.includes(Y)?q.selectedDates.filter(J=>J!==Y):[...q.selectedDates,Y].sort(),inclusivedates:q.selectedDates.includes(Y)?q.selectedDates.length-1:q.selectedDates.length+1,deductedcredit:q.selectedDates.includes(Y)?q.selectedDates.length-1:q.selectedDates.length+1}))},E=W=>W?new Date(W).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",A=async W=>{var Y,q;if(W.preventDefault(),!a){if(!i.leavetypeid||i.selectedDates.length===0){y("Please fill in all required fields");return}try{g(!0),y(null);const J=(r==null?void 0:r.status)||(r==null?void 0:r.leavestatus)||(r==null?void 0:r.LeaveStatus)||(r==null?void 0:r.LEAVESTATUS)||"",O=J==="Returned"||J==="returned",M={leavetypeid:i.leavetypeid,deductmode:i.deductmode,leavepurpose:i.leavepurpose,selectedDates:i.selectedDates,deductedcredit:i.selectedDates.length,inclusivedates:i.selectedDates.length,questionAnswers:f.selectedQuestionId&&f.answer?f:null};O&&(M.status="For Approval"),await oe.put(`/employee-leave-transactions/${r.objid}`,M),n(),s()}catch(J){y(((q=(Y=J.response)==null?void 0:Y.data)==null?void 0:q.error)||"Failed to update leave transaction")}finally{g(!1)}}},L=()=>{o({leavetypeid:"",deductmode:"Leave",leavepurpose:"",selectedDates:[],deductedcredit:0,inclusivedates:0}),N({selectedQuestionId:null,answer:""}),y(null),s()};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"relative w-full max-w-4xl bg-white rounded-lg shadow-xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:a?"View Leave Transaction":"Edit Leave Transaction"}),e.jsx("button",{onClick:L,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200 p-1 rounded-full hover:bg-gray-100",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),b&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[b.photo_path?e.jsx("img",{src:b.photo_path,alt:b.employee_name,className:"h-16 w-16 rounded-full object-cover"}):e.jsx("div",{className:"h-16 w-16 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 text-lg font-medium",children:(F=b.employee_name)==null?void 0:F.split(" ").map(W=>W[0]).join("").substring(0,2)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:b.employee_name}),e.jsx("p",{className:"text-gray-600",children:b.employee_id}),e.jsxs("p",{className:"text-sm text-gray-500",children:["VL: ",b.vl_balance||0," | SL: ",b.sl_balance||0]})]})]})}),e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[j&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:j}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leave Type *"}),e.jsxs("select",{name:"leavetypeid",value:i.leavetypeid,onChange:T,disabled:a,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 ${a?"bg-gray-50 text-gray-600 cursor-not-allowed":""}`,required:!0,children:[e.jsx("option",{value:"",children:"Select Leave Type"}),Array.isArray(c)&&c.length>0?c.map(W=>e.jsxs("option",{value:W.leaveid,children:[W.leavetype," (",W.leavecode||"N/A",")"]},W.leaveid)):e.jsx("option",{value:"",disabled:!0,children:"Loading leave types..."})]})]}),e.jsx("div",{children:v.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Questions"}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:Array.isArray(v)&&v.map((W,Y)=>e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("input",{type:"radio",id:`question-${W.objid}`,name:"leave-question",checked:f.selectedQuestionId===W.objid,onChange:q=>{q.target.checked&&N({selectedQuestionId:W.objid,answer:""})},disabled:a,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("label",{htmlFor:`question-${W.objid}`,className:"block text-xs font-medium text-gray-700 mb-1 cursor-pointer",children:[Y+1,". ",W.question]}),f.selectedQuestionId===W.objid&&e.jsx("textarea",{value:f.answer,onChange:q=>{N(J=>({...J,answer:q.target.value}))},disabled:a,rows:2,className:`w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none ${a?"bg-gray-50 text-gray-600 cursor-not-allowed":""}`,placeholder:"Answer..."})]})]})},W.objid))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deduct Mode"}),e.jsxs("select",{name:"deductmode",value:i.deductmode,onChange:T,disabled:a,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 ${a?"bg-gray-50 text-gray-600 cursor-not-allowed":""}`,children:[e.jsx("option",{value:"Leave",children:"Leave"}),e.jsx("option",{value:"Absent",children:"Absent"}),e.jsx("option",{value:"Lates",children:"Lates"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leave Purpose"}),e.jsx("textarea",{name:"leavepurpose",value:i.leavepurpose,onChange:T,disabled:a,rows:3,maxLength:100,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none ${a?"bg-gray-50 text-gray-600 cursor-not-allowed":""}`,placeholder:"Enter leave purpose..."}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[i.leavepurpose.length,"/100 characters"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Dates *"}),e.jsx("input",{type:"date",onChange:W=>_(new Date(W.target.value)),disabled:a,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 ${a?"bg-gray-50 text-gray-600 cursor-not-allowed":""}`}),i.selectedDates.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Selected Dates:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.selectedDates.map(W=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:[E(W),!a&&e.jsx("button",{type:"button",onClick:()=>_(new Date(W)),className:"ml-2 text-blue-600 hover:text-blue-800 transition-colors duration-200",children:""})]},W))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inclusive Dates"}),e.jsx("input",{type:"text",value:i.inclusivedates,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deducted Credit"}),e.jsx("input",{type:"text",value:i.deductedcredit,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600 cursor-not-allowed"})]})]}),(()=>{const W=(r==null?void 0:r.status)||(r==null?void 0:r.leavestatus)||(r==null?void 0:r.LeaveStatus)||(r==null?void 0:r.LEAVESTATUS)||"",Y=W==="Returned"||W==="Approved"||W==="Cancelled"||W==="returned"||W==="approved"||W==="cancelled",q=(r==null?void 0:r.leaveremarks)||(r==null?void 0:r.LEAVEREMARKS)||"";return Y?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:W==="Returned"||W==="returned"?"Return Reason":W==="Cancelled"||W==="cancelled"?"Cancellation Reason":"Remarks"}),e.jsx("textarea",{value:q||"No remarks",readOnly:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600 cursor-not-allowed resize-none"})]}):null})(),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:L,className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors duration-200",children:a?"Close":"Cancel"}),!a&&(()=>{const W=(r==null?void 0:r.status)||(r==null?void 0:r.leavestatus)||(r==null?void 0:r.LeaveStatus)||(r==null?void 0:r.LEAVESTATUS)||"",q=W==="Returned"||W==="returned"?"Resubmit Application":"Update Transaction";return e.jsx("button",{type:"submit",disabled:p||!i.leavetypeid||i.selectedDates.length===0,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:p?"Saving...":q})})()]})]})]})})}):null};function u4(t,s,r="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:t,timeZoneName:r}).format(s).split(/\s/g).slice(2).join(" ")}const Am={},so={};function al(t,s){try{const n=(Am[t]||(Am[t]=new Intl.DateTimeFormat("en-US",{timeZone:t,timeZoneName:"longOffset"}).format))(s).split("GMT")[1];return n in so?so[n]:Xg(n,n.split(":"))}catch{if(t in so)return so[t];const r=t==null?void 0:t.match(m4);return r?Xg(t,r.slice(1)):NaN}}const m4=/([+-]\d\d):?(\d\d)?/;function Xg(t,s){const r=+(s[0]||0),n=+(s[1]||0),a=+(s[2]||0)/60;return so[t]=r*60+n>0?r*60+n+a:r*60-n-a}class Hn extends Date{constructor(...s){super(),s.length>1&&typeof s[s.length-1]=="string"&&(this.timeZone=s.pop()),this.internal=new Date,isNaN(al(this.timeZone,this))?this.setTime(NaN):s.length?typeof s[0]=="number"&&(s.length===1||s.length===2&&typeof s[1]!="number")?this.setTime(s[0]):typeof s[0]=="string"?this.setTime(+new Date(s[0])):s[0]instanceof Date?this.setTime(+s[0]):(this.setTime(+new Date(...s)),FN(this),mp(this)):this.setTime(Date.now())}static tz(s,...r){return r.length?new Hn(...r,s):new Hn(Date.now(),s)}withTimeZone(s){return new Hn(+this,s)}getTimezoneOffset(){const s=-al(this.timeZone,this);return s>0?Math.floor(s):Math.ceil(s)}setTime(s){return Date.prototype.setTime.apply(this,arguments),mp(this),+this}[Symbol.for("constructDateFrom")](s){return new Hn(+new Date(s),this.timeZone)}}const e0=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(t=>{if(!e0.test(t))return;const s=t.replace(e0,"$1UTC");Hn.prototype[s]&&(t.startsWith("get")?Hn.prototype[t]=function(){return this.internal[s]()}:(Hn.prototype[t]=function(){return Date.prototype[s].apply(this.internal,arguments),h4(this),+this},Hn.prototype[s]=function(){return Date.prototype[s].apply(this,arguments),mp(this),+this}))});function mp(t){t.internal.setTime(+t),t.internal.setUTCSeconds(t.internal.getUTCSeconds()-Math.round(-al(t.timeZone,t)*60))}function h4(t){Date.prototype.setFullYear.call(t,t.internal.getUTCFullYear(),t.internal.getUTCMonth(),t.internal.getUTCDate()),Date.prototype.setHours.call(t,t.internal.getUTCHours(),t.internal.getUTCMinutes(),t.internal.getUTCSeconds(),t.internal.getUTCMilliseconds()),FN(t)}function FN(t){const s=al(t.timeZone,t),r=s>0?Math.floor(s):Math.ceil(s),n=new Date(+t);n.setUTCHours(n.getUTCHours()-1);const a=-new Date(+t).getTimezoneOffset(),l=-new Date(+n).getTimezoneOffset(),i=a-l,o=Date.prototype.getHours.apply(t)!==t.internal.getUTCHours();i&&o&&t.internal.setUTCMinutes(t.internal.getUTCMinutes()+i);const c=a-r;c&&Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+c);const d=new Date(+t);d.setUTCSeconds(0);const m=a>0?d.getSeconds():(d.getSeconds()-60)%60,u=Math.round(-(al(t.timeZone,t)*60))%60;(u||m)&&(t.internal.setUTCSeconds(t.internal.getUTCSeconds()+u),Date.prototype.setUTCSeconds.call(t,Date.prototype.getUTCSeconds.call(t)+u+m));const p=al(t.timeZone,t),g=p>0?Math.floor(p):Math.ceil(p),y=-new Date(+t).getTimezoneOffset()-g,v=g!==r,h=y-c;if(v&&h){Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+h);const f=al(t.timeZone,t),N=f>0?Math.floor(f):Math.ceil(f),b=g-N;b&&(t.internal.setUTCMinutes(t.internal.getUTCMinutes()+b),Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+b))}}class Sr extends Hn{static tz(s,...r){return r.length?new Sr(...r,s):new Sr(Date.now(),s)}toISOString(){const[s,r,n]=this.tzComponents(),a=`${s}${r}:${n}`;return this.internal.toISOString().slice(0,-1)+a}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[s,r,n,a]=this.internal.toUTCString().split(" ");return`${s==null?void 0:s.slice(0,-1)} ${n} ${r} ${a}`}toTimeString(){const s=this.internal.toUTCString().split(" ")[4],[r,n,a]=this.tzComponents();return`${s} GMT${r}${n}${a} (${u4(this.timeZone,this)})`}toLocaleString(s,r){return Date.prototype.toLocaleString.call(this,s,{...r,timeZone:(r==null?void 0:r.timeZone)||this.timeZone})}toLocaleDateString(s,r){return Date.prototype.toLocaleDateString.call(this,s,{...r,timeZone:(r==null?void 0:r.timeZone)||this.timeZone})}toLocaleTimeString(s,r){return Date.prototype.toLocaleTimeString.call(this,s,{...r,timeZone:(r==null?void 0:r.timeZone)||this.timeZone})}tzComponents(){const s=this.getTimezoneOffset(),r=s>0?"-":"+",n=String(Math.floor(Math.abs(s)/60)).padStart(2,"0"),a=String(Math.abs(s)%60).padStart(2,"0");return[r,n,a]}withTimeZone(s){return new Sr(+this,s)}[Symbol.for("constructDateFrom")](s){return new Sr(+new Date(s),this.timeZone)}}const $N=6048e5,p4=864e5,t0=Symbol.for("constructDateFrom");function ar(t,s){return typeof t=="function"?t(s):t&&typeof t=="object"&&t0 in t?t[t0](s):t instanceof Date?new t.constructor(s):new Date(s)}function Es(t,s){return ar(s||t,t)}function UN(t,s,r){const n=Es(t,r==null?void 0:r.in);return isNaN(s)?ar(t,NaN):(s&&n.setDate(n.getDate()+s),n)}function HN(t,s,r){const n=Es(t,r==null?void 0:r.in);if(isNaN(s))return ar(t,NaN);if(!s)return n;const a=n.getDate(),l=ar(t,n.getTime());l.setMonth(n.getMonth()+s+1,0);const i=l.getDate();return a>=i?l:(n.setFullYear(l.getFullYear(),l.getMonth(),a),n)}let f4={};function ic(){return f4}function di(t,s){var o,c,d,m;const r=ic(),n=(s==null?void 0:s.weekStartsOn)??((c=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((m=(d=r.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??0,a=Es(t,s==null?void 0:s.in),l=a.getDay(),i=(l<n?7:0)+l-n;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function zo(t,s){return di(t,{...s,weekStartsOn:1})}function BN(t,s){const r=Es(t,s==null?void 0:s.in),n=r.getFullYear(),a=ar(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const l=zo(a),i=ar(r,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=zo(i);return r.getTime()>=l.getTime()?n+1:r.getTime()>=o.getTime()?n:n-1}function s0(t){const s=Es(t),r=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return r.setUTCFullYear(s.getFullYear()),+t-+r}function Ni(t,...s){const r=ar.bind(null,s.find(n=>typeof n=="object"));return s.map(r)}function Wo(t,s){const r=Es(t,s==null?void 0:s.in);return r.setHours(0,0,0,0),r}function zN(t,s,r){const[n,a]=Ni(r==null?void 0:r.in,t,s),l=Wo(n),i=Wo(a),o=+l-s0(l),c=+i-s0(i);return Math.round((o-c)/p4)}function x4(t,s){const r=BN(t,s),n=ar(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),zo(n)}function g4(t,s,r){return UN(t,s*7,r)}function y4(t,s,r){return HN(t,s*12,r)}function b4(t,s){let r,n=s==null?void 0:s.in;return t.forEach(a=>{!n&&typeof a=="object"&&(n=ar.bind(null,a));const l=Es(a,n);(!r||r<l||isNaN(+l))&&(r=l)}),ar(n,r||NaN)}function v4(t,s){let r,n=s==null?void 0:s.in;return t.forEach(a=>{!n&&typeof a=="object"&&(n=ar.bind(null,a));const l=Es(a,n);(!r||r>l||isNaN(+l))&&(r=l)}),ar(n,r||NaN)}function j4(t,s,r){const[n,a]=Ni(r==null?void 0:r.in,t,s);return+Wo(n)==+Wo(a)}function WN(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function N4(t){return!(!WN(t)&&typeof t!="number"||isNaN(+Es(t)))}function w4(t,s,r){const[n,a]=Ni(r==null?void 0:r.in,t,s),l=n.getFullYear()-a.getFullYear(),i=n.getMonth()-a.getMonth();return l*12+i}function S4(t,s){const r=Es(t,s==null?void 0:s.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function YN(t,s){const[r,n]=Ni(t,s.start,s.end);return{start:r,end:n}}function _4(t,s){const{start:r,end:n}=YN(s==null?void 0:s.in,t);let a=+r>+n;const l=a?+r:+n,i=a?n:r;i.setHours(0,0,0,0),i.setDate(1);let o=1;const c=[];for(;+i<=l;)c.push(ar(r,i)),i.setMonth(i.getMonth()+o);return a?c.reverse():c}function E4(t,s){const r=Es(t,s==null?void 0:s.in);return r.setDate(1),r.setHours(0,0,0,0),r}function k4(t,s){const r=Es(t,s==null?void 0:s.in),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function KN(t,s){const r=Es(t,s==null?void 0:s.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function C4(t,s){const{start:r,end:n}=YN(s==null?void 0:s.in,t);let a=+r>+n;const l=a?+r:+n,i=a?n:r;i.setHours(0,0,0,0),i.setMonth(0,1);let o=1;const c=[];for(;+i<=l;)c.push(ar(r,i)),i.setFullYear(i.getFullYear()+o);return a?c.reverse():c}function qN(t,s){var o,c,d,m;const r=ic(),n=(s==null?void 0:s.weekStartsOn)??((c=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((m=(d=r.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??0,a=Es(t,s==null?void 0:s.in),l=a.getDay(),i=(l<n?-7:0)+6-(l-n);return a.setDate(a.getDate()+i),a.setHours(23,59,59,999),a}function A4(t,s){return qN(t,{...s,weekStartsOn:1})}const D4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},T4=(t,s,r)=>{let n;const a=D4[t];return typeof a=="string"?n=a:s===1?n=a.one:n=a.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Dm(t){return(s={})=>{const r=s.width?String(s.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const M4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},I4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},L4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},P4={date:Dm({formats:M4,defaultWidth:"full"}),time:Dm({formats:I4,defaultWidth:"full"}),dateTime:Dm({formats:L4,defaultWidth:"full"})},R4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},O4=(t,s,r,n)=>R4[t];function Bi(t){return(s,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,o=r!=null&&r.width?String(r.width):i;a=t.formattingValues[o]||t.formattingValues[i]}else{const i=t.defaultWidth,o=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[o]||t.values[i]}const l=t.argumentCallback?t.argumentCallback(s):s;return a[l]}}const F4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},U4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},H4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},B4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},z4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},W4=(t,s)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Y4={ordinalNumber:W4,era:Bi({values:F4,defaultWidth:"wide"}),quarter:Bi({values:$4,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Bi({values:U4,defaultWidth:"wide"}),day:Bi({values:H4,defaultWidth:"wide"}),dayPeriod:Bi({values:B4,defaultWidth:"wide",formattingValues:z4,defaultFormattingWidth:"wide"})};function zi(t){return(s,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],l=s.match(a);if(!l)return null;const i=l[0],o=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?q4(o,u=>u.test(i)):K4(o,u=>u.test(i));let d;d=t.valueCallback?t.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const m=s.slice(i.length);return{value:d,rest:m}}}function K4(t,s){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&s(t[r]))return r}function q4(t,s){for(let r=0;r<t.length;r++)if(s(t[r]))return r}function V4(t){return(s,r={})=>{const n=s.match(t.matchPattern);if(!n)return null;const a=n[0],l=s.match(t.parsePattern);if(!l)return null;let i=t.valueCallback?t.valueCallback(l[0]):l[0];i=r.valueCallback?r.valueCallback(i):i;const o=s.slice(a.length);return{value:i,rest:o}}}const G4=/^(\d+)(th|st|nd|rd)?/i,Q4=/\d+/i,Z4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},J4={any:[/^b/i,/^(a|c)/i]},X4={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},eA={any:[/1/i,/2/i,/3/i,/4/i]},tA={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sA={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},rA={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nA={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},aA={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},lA={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},iA={ordinalNumber:V4({matchPattern:G4,parsePattern:Q4,valueCallback:t=>parseInt(t,10)}),era:zi({matchPatterns:Z4,defaultMatchWidth:"wide",parsePatterns:J4,defaultParseWidth:"any"}),quarter:zi({matchPatterns:X4,defaultMatchWidth:"wide",parsePatterns:eA,defaultParseWidth:"any",valueCallback:t=>t+1}),month:zi({matchPatterns:tA,defaultMatchWidth:"wide",parsePatterns:sA,defaultParseWidth:"any"}),day:zi({matchPatterns:rA,defaultMatchWidth:"wide",parsePatterns:nA,defaultParseWidth:"any"}),dayPeriod:zi({matchPatterns:aA,defaultMatchWidth:"any",parsePatterns:lA,defaultParseWidth:"any"})},Pf={code:"en-US",formatDistance:T4,formatLong:P4,formatRelative:O4,localize:Y4,match:iA,options:{weekStartsOn:0,firstWeekContainsDate:1}};function oA(t,s){const r=Es(t,s==null?void 0:s.in);return zN(r,KN(r))+1}function VN(t,s){const r=Es(t,s==null?void 0:s.in),n=+zo(r)-+x4(r);return Math.round(n/$N)+1}function GN(t,s){var m,u,p,g;const r=Es(t,s==null?void 0:s.in),n=r.getFullYear(),a=ic(),l=(s==null?void 0:s.firstWeekContainsDate)??((u=(m=s==null?void 0:s.locale)==null?void 0:m.options)==null?void 0:u.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(p=a.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,i=ar((s==null?void 0:s.in)||t,0);i.setFullYear(n+1,0,l),i.setHours(0,0,0,0);const o=di(i,s),c=ar((s==null?void 0:s.in)||t,0);c.setFullYear(n,0,l),c.setHours(0,0,0,0);const d=di(c,s);return+r>=+o?n+1:+r>=+d?n:n-1}function cA(t,s){var o,c,d,m;const r=ic(),n=(s==null?void 0:s.firstWeekContainsDate)??((c=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(d=r.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??1,a=GN(t,s),l=ar((s==null?void 0:s.in)||t,0);return l.setFullYear(a,0,n),l.setHours(0,0,0,0),di(l,s)}function QN(t,s){const r=Es(t,s==null?void 0:s.in),n=+di(r,s)-+cA(r,s);return Math.round(n/$N)+1}function Ss(t,s){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(s,"0");return r+n}const ua={y(t,s){const r=t.getFullYear(),n=r>0?r:1-r;return Ss(s==="yy"?n%100:n,s.length)},M(t,s){const r=t.getMonth();return s==="M"?String(r+1):Ss(r+1,2)},d(t,s){return Ss(t.getDate(),s.length)},a(t,s){const r=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,s){return Ss(t.getHours()%12||12,s.length)},H(t,s){return Ss(t.getHours(),s.length)},m(t,s){return Ss(t.getMinutes(),s.length)},s(t,s){return Ss(t.getSeconds(),s.length)},S(t,s){const r=s.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Ss(a,s.length)}},_l={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},r0={G:function(t,s,r){const n=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,s,r){if(s==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return ua.y(t,s)},Y:function(t,s,r,n){const a=GN(t,n),l=a>0?a:1-a;if(s==="YY"){const i=l%100;return Ss(i,2)}return s==="Yo"?r.ordinalNumber(l,{unit:"year"}):Ss(l,s.length)},R:function(t,s){const r=BN(t);return Ss(r,s.length)},u:function(t,s){const r=t.getFullYear();return Ss(r,s.length)},Q:function(t,s,r){const n=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(n);case"QQ":return Ss(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,s,r){const n=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(n);case"qq":return Ss(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,s,r){const n=t.getMonth();switch(s){case"M":case"MM":return ua.M(t,s);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,s,r){const n=t.getMonth();switch(s){case"L":return String(n+1);case"LL":return Ss(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,s,r,n){const a=QN(t,n);return s==="wo"?r.ordinalNumber(a,{unit:"week"}):Ss(a,s.length)},I:function(t,s,r){const n=VN(t);return s==="Io"?r.ordinalNumber(n,{unit:"week"}):Ss(n,s.length)},d:function(t,s,r){return s==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):ua.d(t,s)},D:function(t,s,r){const n=oA(t);return s==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Ss(n,s.length)},E:function(t,s,r){const n=t.getDay();switch(s){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,s,r,n){const a=t.getDay(),l=(a-n.weekStartsOn+8)%7||7;switch(s){case"e":return String(l);case"ee":return Ss(l,2);case"eo":return r.ordinalNumber(l,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,s,r,n){const a=t.getDay(),l=(a-n.weekStartsOn+8)%7||7;switch(s){case"c":return String(l);case"cc":return Ss(l,s.length);case"co":return r.ordinalNumber(l,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,s,r){const n=t.getDay(),a=n===0?7:n;switch(s){case"i":return String(a);case"ii":return Ss(a,s.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,s,r){const a=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,s,r){const n=t.getHours();let a;switch(n===12?a=_l.noon:n===0?a=_l.midnight:a=n/12>=1?"pm":"am",s){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,s,r){const n=t.getHours();let a;switch(n>=17?a=_l.evening:n>=12?a=_l.afternoon:n>=4?a=_l.morning:a=_l.night,s){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,s,r){if(s==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return ua.h(t,s)},H:function(t,s,r){return s==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):ua.H(t,s)},K:function(t,s,r){const n=t.getHours()%12;return s==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Ss(n,s.length)},k:function(t,s,r){let n=t.getHours();return n===0&&(n=24),s==="ko"?r.ordinalNumber(n,{unit:"hour"}):Ss(n,s.length)},m:function(t,s,r){return s==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):ua.m(t,s)},s:function(t,s,r){return s==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):ua.s(t,s)},S:function(t,s){return ua.S(t,s)},X:function(t,s,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(s){case"X":return a0(n);case"XXXX":case"XX":return Va(n);case"XXXXX":case"XXX":default:return Va(n,":")}},x:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"x":return a0(n);case"xxxx":case"xx":return Va(n);case"xxxxx":case"xxx":default:return Va(n,":")}},O:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+n0(n,":");case"OOOO":default:return"GMT"+Va(n,":")}},z:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+n0(n,":");case"zzzz":default:return"GMT"+Va(n,":")}},t:function(t,s,r){const n=Math.trunc(+t/1e3);return Ss(n,s.length)},T:function(t,s,r){return Ss(+t,s.length)}};function n0(t,s=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),l=n%60;return l===0?r+String(a):r+String(a)+s+Ss(l,2)}function a0(t,s){return t%60===0?(t>0?"-":"+")+Ss(Math.abs(t)/60,2):Va(t,s)}function Va(t,s=""){const r=t>0?"-":"+",n=Math.abs(t),a=Ss(Math.trunc(n/60),2),l=Ss(n%60,2);return r+a+s+l}const l0=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},ZN=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},dA=(t,s)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return l0(t,s);let l;switch(n){case"P":l=s.dateTime({width:"short"});break;case"PP":l=s.dateTime({width:"medium"});break;case"PPP":l=s.dateTime({width:"long"});break;case"PPPP":default:l=s.dateTime({width:"full"});break}return l.replace("{{date}}",l0(n,s)).replace("{{time}}",ZN(a,s))},uA={p:ZN,P:dA},mA=/^D+$/,hA=/^Y+$/,pA=["D","DD","YY","YYYY"];function fA(t){return mA.test(t)}function xA(t){return hA.test(t)}function gA(t,s,r){const n=yA(t,s,r);if(console.warn(n),pA.includes(t))throw new RangeError(n)}function yA(t,s,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const bA=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vA=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jA=/^'([^]*?)'?$/,NA=/''/g,wA=/[a-zA-Z]/;function SA(t,s,r){var m,u,p,g,j,y,v,h;const n=ic(),a=(r==null?void 0:r.locale)??n.locale??Pf,l=(r==null?void 0:r.firstWeekContainsDate)??((u=(m=r==null?void 0:r.locale)==null?void 0:m.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(p=n.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,i=(r==null?void 0:r.weekStartsOn)??((y=(j=r==null?void 0:r.locale)==null?void 0:j.options)==null?void 0:y.weekStartsOn)??n.weekStartsOn??((h=(v=n.locale)==null?void 0:v.options)==null?void 0:h.weekStartsOn)??0,o=Es(t,r==null?void 0:r.in);if(!N4(o))throw new RangeError("Invalid time value");let c=s.match(vA).map(f=>{const N=f[0];if(N==="p"||N==="P"){const b=uA[N];return b(f,a.formatLong)}return f}).join("").match(bA).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const N=f[0];if(N==="'")return{isToken:!1,value:_A(f)};if(r0[N])return{isToken:!0,value:f};if(N.match(wA))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:f}});a.localize.preprocessor&&(c=a.localize.preprocessor(o,c));const d={firstWeekContainsDate:l,weekStartsOn:i,locale:a};return c.map(f=>{if(!f.isToken)return f.value;const N=f.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&xA(N)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&fA(N))&&gA(N,s,String(t));const b=r0[N[0]];return b(o,N,a.localize,d)}).join("")}function _A(t){const s=t.match(jA);return s?s[1].replace(NA,"'"):t}function EA(t,s){const r=Es(t,s==null?void 0:s.in),n=r.getFullYear(),a=r.getMonth(),l=ar(r,0);return l.setFullYear(n,a+1,0),l.setHours(0,0,0,0),l.getDate()}function kA(t,s){return Es(t,s==null?void 0:s.in).getMonth()}function CA(t,s){return Es(t,s==null?void 0:s.in).getFullYear()}function AA(t,s){return+Es(t)>+Es(s)}function DA(t,s){return+Es(t)<+Es(s)}function TA(t,s,r){const[n,a]=Ni(r==null?void 0:r.in,t,s);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()}function MA(t,s,r){const[n,a]=Ni(r==null?void 0:r.in,t,s);return n.getFullYear()===a.getFullYear()}function IA(t,s,r){const n=Es(t,r==null?void 0:r.in),a=n.getFullYear(),l=n.getDate(),i=ar(t,0);i.setFullYear(a,s,15),i.setHours(0,0,0,0);const o=EA(i);return n.setMonth(s,Math.min(l,o)),n}function LA(t,s,r){const n=Es(t,r==null?void 0:r.in);return isNaN(+n)?ar(t,NaN):(n.setFullYear(s),n)}const i0=5,PA=4;function RA(t,s){const r=s.startOfMonth(t),n=r.getDay()>0?r.getDay():7,a=s.addDays(t,-n+1),l=s.addDays(a,i0*7-1);return s.getMonth(t)===s.getMonth(l)?i0:PA}function JN(t,s){const r=s.startOfMonth(t),n=r.getDay();return n===1?r:n===0?s.addDays(r,-1*6):s.addDays(r,-1*(n-1))}function OA(t,s){const r=JN(t,s),n=RA(t,s);return s.addDays(r,n*7-1)}class on{constructor(s,r){this.Date=Date,this.today=()=>{var n;return(n=this.overrides)!=null&&n.today?this.overrides.today():this.options.timeZone?Sr.tz(this.options.timeZone):new this.Date},this.newDate=(n,a,l)=>{var i;return(i=this.overrides)!=null&&i.newDate?this.overrides.newDate(n,a,l):this.options.timeZone?new Sr(n,a,l,this.options.timeZone):new Date(n,a,l)},this.addDays=(n,a)=>{var l;return(l=this.overrides)!=null&&l.addDays?this.overrides.addDays(n,a):UN(n,a)},this.addMonths=(n,a)=>{var l;return(l=this.overrides)!=null&&l.addMonths?this.overrides.addMonths(n,a):HN(n,a)},this.addWeeks=(n,a)=>{var l;return(l=this.overrides)!=null&&l.addWeeks?this.overrides.addWeeks(n,a):g4(n,a)},this.addYears=(n,a)=>{var l;return(l=this.overrides)!=null&&l.addYears?this.overrides.addYears(n,a):y4(n,a)},this.differenceInCalendarDays=(n,a)=>{var l;return(l=this.overrides)!=null&&l.differenceInCalendarDays?this.overrides.differenceInCalendarDays(n,a):zN(n,a)},this.differenceInCalendarMonths=(n,a)=>{var l;return(l=this.overrides)!=null&&l.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(n,a):w4(n,a)},this.eachMonthOfInterval=n=>{var a;return(a=this.overrides)!=null&&a.eachMonthOfInterval?this.overrides.eachMonthOfInterval(n):_4(n)},this.eachYearOfInterval=n=>{var o;const a=(o=this.overrides)!=null&&o.eachYearOfInterval?this.overrides.eachYearOfInterval(n):C4(n),l=new Set(a.map(c=>this.getYear(c)));if(l.size===a.length)return a;const i=[];return l.forEach(c=>{i.push(new Date(c,0,1))}),i},this.endOfBroadcastWeek=n=>{var a;return(a=this.overrides)!=null&&a.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(n):OA(n,this)},this.endOfISOWeek=n=>{var a;return(a=this.overrides)!=null&&a.endOfISOWeek?this.overrides.endOfISOWeek(n):A4(n)},this.endOfMonth=n=>{var a;return(a=this.overrides)!=null&&a.endOfMonth?this.overrides.endOfMonth(n):S4(n)},this.endOfWeek=(n,a)=>{var l;return(l=this.overrides)!=null&&l.endOfWeek?this.overrides.endOfWeek(n,a):qN(n,this.options)},this.endOfYear=n=>{var a;return(a=this.overrides)!=null&&a.endOfYear?this.overrides.endOfYear(n):k4(n)},this.format=(n,a,l)=>{var o;const i=(o=this.overrides)!=null&&o.format?this.overrides.format(n,a,this.options):SA(n,a,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(i):i},this.getISOWeek=n=>{var a;return(a=this.overrides)!=null&&a.getISOWeek?this.overrides.getISOWeek(n):VN(n)},this.getMonth=(n,a)=>{var l;return(l=this.overrides)!=null&&l.getMonth?this.overrides.getMonth(n,this.options):kA(n,this.options)},this.getYear=(n,a)=>{var l;return(l=this.overrides)!=null&&l.getYear?this.overrides.getYear(n,this.options):CA(n,this.options)},this.getWeek=(n,a)=>{var l;return(l=this.overrides)!=null&&l.getWeek?this.overrides.getWeek(n,this.options):QN(n,this.options)},this.isAfter=(n,a)=>{var l;return(l=this.overrides)!=null&&l.isAfter?this.overrides.isAfter(n,a):AA(n,a)},this.isBefore=(n,a)=>{var l;return(l=this.overrides)!=null&&l.isBefore?this.overrides.isBefore(n,a):DA(n,a)},this.isDate=n=>{var a;return(a=this.overrides)!=null&&a.isDate?this.overrides.isDate(n):WN(n)},this.isSameDay=(n,a)=>{var l;return(l=this.overrides)!=null&&l.isSameDay?this.overrides.isSameDay(n,a):j4(n,a)},this.isSameMonth=(n,a)=>{var l;return(l=this.overrides)!=null&&l.isSameMonth?this.overrides.isSameMonth(n,a):TA(n,a)},this.isSameYear=(n,a)=>{var l;return(l=this.overrides)!=null&&l.isSameYear?this.overrides.isSameYear(n,a):MA(n,a)},this.max=n=>{var a;return(a=this.overrides)!=null&&a.max?this.overrides.max(n):b4(n)},this.min=n=>{var a;return(a=this.overrides)!=null&&a.min?this.overrides.min(n):v4(n)},this.setMonth=(n,a)=>{var l;return(l=this.overrides)!=null&&l.setMonth?this.overrides.setMonth(n,a):IA(n,a)},this.setYear=(n,a)=>{var l;return(l=this.overrides)!=null&&l.setYear?this.overrides.setYear(n,a):LA(n,a)},this.startOfBroadcastWeek=(n,a)=>{var l;return(l=this.overrides)!=null&&l.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(n,this):JN(n,this)},this.startOfDay=n=>{var a;return(a=this.overrides)!=null&&a.startOfDay?this.overrides.startOfDay(n):Wo(n)},this.startOfISOWeek=n=>{var a;return(a=this.overrides)!=null&&a.startOfISOWeek?this.overrides.startOfISOWeek(n):zo(n)},this.startOfMonth=n=>{var a;return(a=this.overrides)!=null&&a.startOfMonth?this.overrides.startOfMonth(n):E4(n)},this.startOfWeek=(n,a)=>{var l;return(l=this.overrides)!=null&&l.startOfWeek?this.overrides.startOfWeek(n,this.options):di(n,this.options)},this.startOfYear=n=>{var a;return(a=this.overrides)!=null&&a.startOfYear?this.overrides.startOfYear(n):KN(n)},this.options={locale:Pf,...s},this.overrides=r}getDigitMap(){const{numerals:s="latn"}=this.options,r=new Intl.NumberFormat("en-US",{numberingSystem:s}),n={};for(let a=0;a<10;a++)n[a.toString()]=r.format(a);return n}replaceDigits(s){const r=this.getDigitMap();return s.replace(/\d/g,n=>r[n]||n)}formatNumber(s){return this.replaceDigits(s.toString())}getMonthYearOrder(){var r;const s=(r=this.options.locale)==null?void 0:r.code;return s&&on.yearFirstLocales.has(s)?"year-first":"month-first"}formatMonthYear(s){const{locale:r,timeZone:n,numerals:a}=this.options,l=r==null?void 0:r.code;if(l&&on.yearFirstLocales.has(l))try{return new Intl.DateTimeFormat(l,{month:"long",year:"numeric",timeZone:n,numberingSystem:a}).format(s)}catch{}const i=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(s,i)}}on.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const Wn=new on;class XN{constructor(s,r,n=Wn){this.date=s,this.displayMonth=r,this.outside=!!(r&&!n.isSameMonth(s,r)),this.dateLib=n}isEqualTo(s){return this.dateLib.isSameDay(s.date,this.date)&&this.dateLib.isSameMonth(s.displayMonth,this.displayMonth)}}class FA{constructor(s,r){this.date=s,this.weeks=r}}class $A{constructor(s,r){this.days=r,this.weekNumber=s}}function UA(t){return St.createElement("button",{...t})}function HA(t){return St.createElement("span",{...t})}function BA(t){const{size:s=24,orientation:r="left",className:n}=t;return St.createElement("svg",{className:n,width:s,height:s,viewBox:"0 0 24 24"},r==="up"&&St.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),r==="down"&&St.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),r==="left"&&St.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),r==="right"&&St.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function zA(t){const{day:s,modifiers:r,...n}=t;return St.createElement("td",{...n})}function WA(t){const{day:s,modifiers:r,...n}=t,a=St.useRef(null);return St.useEffect(()=>{var l;r.focused&&((l=a.current)==null||l.focus())},[r.focused]),St.createElement("button",{ref:a,...n})}var Bt;(function(t){t.Root="root",t.Chevron="chevron",t.Day="day",t.DayButton="day_button",t.CaptionLabel="caption_label",t.Dropdowns="dropdowns",t.Dropdown="dropdown",t.DropdownRoot="dropdown_root",t.Footer="footer",t.MonthGrid="month_grid",t.MonthCaption="month_caption",t.MonthsDropdown="months_dropdown",t.Month="month",t.Months="months",t.Nav="nav",t.NextMonthButton="button_next",t.PreviousMonthButton="button_previous",t.Week="week",t.Weeks="weeks",t.Weekday="weekday",t.Weekdays="weekdays",t.WeekNumber="week_number",t.WeekNumberHeader="week_number_header",t.YearsDropdown="years_dropdown"})(Bt||(Bt={}));var zs;(function(t){t.disabled="disabled",t.hidden="hidden",t.outside="outside",t.focused="focused",t.today="today"})(zs||(zs={}));var Sn;(function(t){t.range_end="range_end",t.range_middle="range_middle",t.range_start="range_start",t.selected="selected"})(Sn||(Sn={}));var Jr;(function(t){t.weeks_before_enter="weeks_before_enter",t.weeks_before_exit="weeks_before_exit",t.weeks_after_enter="weeks_after_enter",t.weeks_after_exit="weeks_after_exit",t.caption_after_enter="caption_after_enter",t.caption_after_exit="caption_after_exit",t.caption_before_enter="caption_before_enter",t.caption_before_exit="caption_before_exit"})(Jr||(Jr={}));function YA(t){const{options:s,className:r,components:n,classNames:a,...l}=t,i=[a[Bt.Dropdown],r].join(" "),o=s==null?void 0:s.find(({value:c})=>c===l.value);return St.createElement("span",{"data-disabled":l.disabled,className:a[Bt.DropdownRoot]},St.createElement(n.Select,{className:i,...l},s==null?void 0:s.map(({value:c,label:d,disabled:m})=>St.createElement(n.Option,{key:c,value:c,disabled:m},d))),St.createElement("span",{className:a[Bt.CaptionLabel],"aria-hidden":!0},o==null?void 0:o.label,St.createElement(n.Chevron,{orientation:"down",size:18,className:a[Bt.Chevron]})))}function KA(t){return St.createElement("div",{...t})}function qA(t){return St.createElement("div",{...t})}function VA(t){const{calendarMonth:s,displayIndex:r,...n}=t;return St.createElement("div",{...n},t.children)}function GA(t){const{calendarMonth:s,displayIndex:r,...n}=t;return St.createElement("div",{...n})}function QA(t){return St.createElement("table",{...t})}function ZA(t){return St.createElement("div",{...t})}const e1=x.createContext(void 0);function oc(){const t=x.useContext(e1);if(t===void 0)throw new Error("useDayPicker() must be used within a custom component.");return t}function JA(t){const{components:s}=oc();return St.createElement(s.Dropdown,{...t})}function XA(t){const{onPreviousClick:s,onNextClick:r,previousMonth:n,nextMonth:a,...l}=t,{components:i,classNames:o,labels:{labelPrevious:c,labelNext:d}}=oc(),m=x.useCallback(p=>{a&&(r==null||r(p))},[a,r]),u=x.useCallback(p=>{n&&(s==null||s(p))},[n,s]);return St.createElement("nav",{...l},St.createElement(i.PreviousMonthButton,{type:"button",className:o[Bt.PreviousMonthButton],tabIndex:n?void 0:-1,"aria-disabled":n?void 0:!0,"aria-label":c(n),onClick:u},St.createElement(i.Chevron,{disabled:n?void 0:!0,className:o[Bt.Chevron],orientation:"left"})),St.createElement(i.NextMonthButton,{type:"button",className:o[Bt.NextMonthButton],tabIndex:a?void 0:-1,"aria-disabled":a?void 0:!0,"aria-label":d(a),onClick:m},St.createElement(i.Chevron,{disabled:a?void 0:!0,orientation:"right",className:o[Bt.Chevron]})))}function e3(t){const{components:s}=oc();return St.createElement(s.Button,{...t})}function t3(t){return St.createElement("option",{...t})}function s3(t){const{components:s}=oc();return St.createElement(s.Button,{...t})}function r3(t){const{rootRef:s,...r}=t;return St.createElement("div",{...r,ref:s})}function n3(t){return St.createElement("select",{...t})}function a3(t){const{week:s,...r}=t;return St.createElement("tr",{...r})}function l3(t){return St.createElement("th",{...t})}function i3(t){return St.createElement("thead",{"aria-hidden":!0},St.createElement("tr",{...t}))}function o3(t){const{week:s,...r}=t;return St.createElement("th",{...r})}function c3(t){return St.createElement("th",{...t})}function d3(t){return St.createElement("tbody",{...t})}function u3(t){const{components:s}=oc();return St.createElement(s.Dropdown,{...t})}const m3=Object.freeze(Object.defineProperty({__proto__:null,Button:UA,CaptionLabel:HA,Chevron:BA,Day:zA,DayButton:WA,Dropdown:YA,DropdownNav:KA,Footer:qA,Month:VA,MonthCaption:GA,MonthGrid:QA,Months:ZA,MonthsDropdown:JA,Nav:XA,NextMonthButton:e3,Option:t3,PreviousMonthButton:s3,Root:r3,Select:n3,Week:a3,WeekNumber:o3,WeekNumberHeader:c3,Weekday:l3,Weekdays:i3,Weeks:d3,YearsDropdown:u3},Symbol.toStringTag,{value:"Module"}));function Zn(t,s,r=!1,n=Wn){let{from:a,to:l}=t;const{differenceInCalendarDays:i,isSameDay:o}=n;return a&&l?(i(l,a)<0&&([a,l]=[l,a]),i(s,a)>=(r?1:0)&&i(l,s)>=(r?1:0)):!r&&l?o(l,s):!r&&a?o(a,s):!1}function t1(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function Rf(t){return!!(t&&typeof t=="object"&&"from"in t)}function s1(t){return!!(t&&typeof t=="object"&&"after"in t)}function r1(t){return!!(t&&typeof t=="object"&&"before"in t)}function n1(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function a1(t,s){return Array.isArray(t)&&t.every(s.isDate)}function Jn(t,s,r=Wn){const n=Array.isArray(s)?s:[s],{isSameDay:a,differenceInCalendarDays:l,isAfter:i}=r;return n.some(o=>{if(typeof o=="boolean")return o;if(r.isDate(o))return a(t,o);if(a1(o,r))return o.includes(t);if(Rf(o))return Zn(o,t,!1,r);if(n1(o))return Array.isArray(o.dayOfWeek)?o.dayOfWeek.includes(t.getDay()):o.dayOfWeek===t.getDay();if(t1(o)){const c=l(o.before,t),d=l(o.after,t),m=c>0,u=d<0;return i(o.before,o.after)?u&&m:m||u}return s1(o)?l(t,o.after)>0:r1(o)?l(o.before,t)>0:typeof o=="function"?o(t):!1})}function h3(t,s,r,n,a){const{disabled:l,hidden:i,modifiers:o,showOutsideDays:c,broadcastCalendar:d,today:m}=s,{isSameDay:u,isSameMonth:p,startOfMonth:g,isBefore:j,endOfMonth:y,isAfter:v}=a,h=r&&g(r),f=n&&y(n),N={[zs.focused]:[],[zs.outside]:[],[zs.disabled]:[],[zs.hidden]:[],[zs.today]:[]},b={};for(const w of t){const{date:D,displayMonth:S}=w,C=!!(S&&!p(D,S)),T=!!(h&&j(D,h)),_=!!(f&&v(D,f)),E=!!(l&&Jn(D,l,a)),A=!!(i&&Jn(D,i,a))||T||_||!d&&!c&&C||d&&c===!1&&C,L=u(D,m??a.today());C&&N.outside.push(w),E&&N.disabled.push(w),A&&N.hidden.push(w),L&&N.today.push(w),o&&Object.keys(o).forEach(F=>{const W=o==null?void 0:o[F];W&&Jn(D,W,a)&&(b[F]?b[F].push(w):b[F]=[w])})}return w=>{const D={[zs.focused]:!1,[zs.disabled]:!1,[zs.hidden]:!1,[zs.outside]:!1,[zs.today]:!1},S={};for(const C in N){const T=N[C];D[C]=T.some(_=>_===w)}for(const C in b)S[C]=b[C].some(T=>T===w);return{...D,...S}}}function p3(t,s,r={}){return Object.entries(t).filter(([,a])=>a===!0).reduce((a,[l])=>(r[l]?a.push(r[l]):s[zs[l]]?a.push(s[zs[l]]):s[Sn[l]]&&a.push(s[Sn[l]]),a),[s[Bt.Day]])}function f3(t){return{...m3,...t}}function x3(t){const s={"data-mode":t.mode??void 0,"data-required":"required"in t?t.required:void 0,"data-multiple-months":t.numberOfMonths&&t.numberOfMonths>1||void 0,"data-week-numbers":t.showWeekNumber||void 0,"data-broadcast-calendar":t.broadcastCalendar||void 0,"data-nav-layout":t.navLayout||void 0};return Object.entries(t).forEach(([r,n])=>{r.startsWith("data-")&&(s[r]=n)}),s}function g3(){const t={};for(const s in Bt)t[Bt[s]]=`rdp-${Bt[s]}`;for(const s in zs)t[zs[s]]=`rdp-${zs[s]}`;for(const s in Sn)t[Sn[s]]=`rdp-${Sn[s]}`;for(const s in Jr)t[Jr[s]]=`rdp-${Jr[s]}`;return t}function l1(t,s,r){return(r??new on(s)).formatMonthYear(t)}const y3=l1;function b3(t,s,r){return(r??new on(s)).format(t,"d")}function v3(t,s=Wn){return s.format(t,"LLLL")}function j3(t,s,r){return(r??new on(s)).format(t,"cccccc")}function N3(t,s=Wn){return t<10?s.formatNumber(`0${t.toLocaleString()}`):s.formatNumber(`${t.toLocaleString()}`)}function w3(){return""}function i1(t,s=Wn){return s.format(t,"yyyy")}const S3=i1,_3=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:l1,formatDay:b3,formatMonthCaption:y3,formatMonthDropdown:v3,formatWeekNumber:N3,formatWeekNumberHeader:w3,formatWeekdayName:j3,formatYearCaption:S3,formatYearDropdown:i1},Symbol.toStringTag,{value:"Module"}));function E3(t){return t!=null&&t.formatMonthCaption&&!t.formatCaption&&(t.formatCaption=t.formatMonthCaption),t!=null&&t.formatYearCaption&&!t.formatYearDropdown&&(t.formatYearDropdown=t.formatYearCaption),{..._3,...t}}function k3(t,s,r,n,a){const{startOfMonth:l,startOfYear:i,endOfYear:o,eachMonthOfInterval:c,getMonth:d}=a;return c({start:i(t),end:o(t)}).map(p=>{const g=n.formatMonthDropdown(p,a),j=d(p),y=s&&p<l(s)||r&&p>l(r)||!1;return{value:j,label:g,disabled:y}})}function C3(t,s={},r={}){let n={...s==null?void 0:s[Bt.Day]};return Object.entries(t).filter(([,a])=>a===!0).forEach(([a])=>{n={...n,...r==null?void 0:r[a]}}),n}function A3(t,s,r){const n=t.today(),a=s?t.startOfISOWeek(n):t.startOfWeek(n),l=[];for(let i=0;i<7;i++){const o=t.addDays(a,i);l.push(o)}return l}function D3(t,s,r,n,a=!1){if(!t||!s)return;const{startOfYear:l,endOfYear:i,eachYearOfInterval:o,getYear:c}=n,d=l(t),m=i(s),u=o({start:d,end:m});return a&&u.reverse(),u.map(p=>{const g=r.formatYearDropdown(p,n);return{value:c(p),label:g,disabled:!1}})}function o1(t,s,r,n){let a=(n??new on(r)).format(t,"PPPP");return s.today&&(a=`Today, ${a}`),s.selected&&(a=`${a}, selected`),a}const T3=o1;function c1(t,s,r){return(r??new on(s)).formatMonthYear(t)}const M3=c1;function I3(t,s,r,n){let a=(n??new on(r)).format(t,"PPPP");return s!=null&&s.today&&(a=`Today, ${a}`),a}function L3(t){return"Choose the Month"}function P3(){return""}function R3(t){return"Go to the Next Month"}function O3(t){return"Go to the Previous Month"}function F3(t,s,r){return(r??new on(s)).format(t,"cccc")}function $3(t,s){return`Week ${t}`}function U3(t){return"Week Number"}function H3(t){return"Choose the Year"}const B3=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:M3,labelDay:T3,labelDayButton:o1,labelGrid:c1,labelGridcell:I3,labelMonthDropdown:L3,labelNav:P3,labelNext:R3,labelPrevious:O3,labelWeekNumber:$3,labelWeekNumberHeader:U3,labelWeekday:F3,labelYearDropdown:H3},Symbol.toStringTag,{value:"Module"})),cc=t=>t instanceof HTMLElement?t:null,Tm=t=>[...t.querySelectorAll("[data-animated-month]")??[]],z3=t=>cc(t.querySelector("[data-animated-month]")),Mm=t=>cc(t.querySelector("[data-animated-caption]")),Im=t=>cc(t.querySelector("[data-animated-weeks]")),W3=t=>cc(t.querySelector("[data-animated-nav]")),Y3=t=>cc(t.querySelector("[data-animated-weekdays]"));function K3(t,s,{classNames:r,months:n,focused:a,dateLib:l}){const i=x.useRef(null),o=x.useRef(n),c=x.useRef(!1);x.useLayoutEffect(()=>{const d=o.current;if(o.current=n,!s||!t.current||!(t.current instanceof HTMLElement)||n.length===0||d.length===0||n.length!==d.length)return;const m=l.isSameMonth(n[0].date,d[0].date),u=l.isAfter(n[0].date,d[0].date),p=u?r[Jr.caption_after_enter]:r[Jr.caption_before_enter],g=u?r[Jr.weeks_after_enter]:r[Jr.weeks_before_enter],j=i.current,y=t.current.cloneNode(!0);if(y instanceof HTMLElement?(Tm(y).forEach(N=>{if(!(N instanceof HTMLElement))return;const b=z3(N);b&&N.contains(b)&&N.removeChild(b);const w=Mm(N);w&&w.classList.remove(p);const D=Im(N);D&&D.classList.remove(g)}),i.current=y):i.current=null,c.current||m||a)return;const v=j instanceof HTMLElement?Tm(j):[],h=Tm(t.current);if(h!=null&&h.every(f=>f instanceof HTMLElement)&&v&&v.every(f=>f instanceof HTMLElement)){c.current=!0,t.current.style.isolation="isolate";const f=W3(t.current);f&&(f.style.zIndex="1"),h.forEach((N,b)=>{const w=v[b];if(!w)return;N.style.position="relative",N.style.overflow="hidden";const D=Mm(N);D&&D.classList.add(p);const S=Im(N);S&&S.classList.add(g);const C=()=>{c.current=!1,t.current&&(t.current.style.isolation=""),f&&(f.style.zIndex=""),D&&D.classList.remove(p),S&&S.classList.remove(g),N.style.position="",N.style.overflow="",N.contains(w)&&N.removeChild(w)};w.style.pointerEvents="none",w.style.position="absolute",w.style.overflow="hidden",w.setAttribute("aria-hidden","true");const T=Y3(w);T&&(T.style.opacity="0");const _=Mm(w);_&&(_.classList.add(u?r[Jr.caption_before_exit]:r[Jr.caption_after_exit]),_.addEventListener("animationend",C));const E=Im(w);E&&E.classList.add(u?r[Jr.weeks_before_exit]:r[Jr.weeks_after_exit]),N.insertBefore(w,N.firstChild)})}})}function q3(t,s,r,n){const a=t[0],l=t[t.length-1],{ISOWeek:i,fixedWeeks:o,broadcastCalendar:c}=r??{},{addDays:d,differenceInCalendarDays:m,differenceInCalendarMonths:u,endOfBroadcastWeek:p,endOfISOWeek:g,endOfMonth:j,endOfWeek:y,isAfter:v,startOfBroadcastWeek:h,startOfISOWeek:f,startOfWeek:N}=n,b=c?h(a,n):i?f(a):N(a),w=c?p(l):i?g(j(l)):y(j(l)),D=m(w,b),S=u(l,a)+1,C=[];for(let E=0;E<=D;E++){const A=d(b,E);if(s&&v(A,s))break;C.push(A)}const _=(c?35:42)*S;if(o&&C.length<_){const E=_-C.length;for(let A=0;A<E;A++){const L=d(C[C.length-1],1);C.push(L)}}return C}function V3(t){const s=[];return t.reduce((r,n)=>{const a=n.weeks.reduce((l,i)=>l.concat(i.days.slice()),s.slice());return r.concat(a.slice())},s.slice())}function G3(t,s,r,n){const{numberOfMonths:a=1}=r,l=[];for(let i=0;i<a;i++){const o=n.addMonths(t,i);if(s&&o>s)break;l.push(o)}return l}function o0(t,s,r,n){const{month:a,defaultMonth:l,today:i=n.today(),numberOfMonths:o=1}=t;let c=a||l||i;const{differenceInCalendarMonths:d,addMonths:m,startOfMonth:u}=n;if(r&&d(r,c)<o-1){const p=-1*(o-1);c=m(r,p)}return s&&d(c,s)<0&&(c=s),u(c)}function Q3(t,s,r,n){const{addDays:a,endOfBroadcastWeek:l,endOfISOWeek:i,endOfMonth:o,endOfWeek:c,getISOWeek:d,getWeek:m,startOfBroadcastWeek:u,startOfISOWeek:p,startOfWeek:g}=n,j=t.reduce((y,v)=>{const h=r.broadcastCalendar?u(v,n):r.ISOWeek?p(v):g(v),f=r.broadcastCalendar?l(v):r.ISOWeek?i(o(v)):c(o(v)),N=s.filter(S=>S>=h&&S<=f),b=r.broadcastCalendar?35:42;if(r.fixedWeeks&&N.length<b){const S=s.filter(C=>{const T=b-N.length;return C>f&&C<=a(f,T)});N.push(...S)}const w=N.reduce((S,C)=>{const T=r.ISOWeek?d(C):m(C),_=S.find(A=>A.weekNumber===T),E=new XN(C,v,n);return _?_.days.push(E):S.push(new $A(T,[E])),S},[]),D=new FA(v,w);return y.push(D),y},[]);return r.reverseMonths?j.reverse():j}function Z3(t,s){let{startMonth:r,endMonth:n}=t;const{startOfYear:a,startOfDay:l,startOfMonth:i,endOfMonth:o,addYears:c,endOfYear:d,newDate:m,today:u}=s,{fromYear:p,toYear:g,fromMonth:j,toMonth:y}=t;!r&&j&&(r=j),!r&&p&&(r=s.newDate(p,0,1)),!n&&y&&(n=y),!n&&g&&(n=m(g,11,31));const v=t.captionLayout==="dropdown"||t.captionLayout==="dropdown-years";return r?r=i(r):p?r=m(p,0,1):!r&&v&&(r=a(c(t.today??u(),-100))),n?n=o(n):g?n=m(g,11,31):!n&&v&&(n=d(t.today??u())),[r&&l(r),n&&l(n)]}function J3(t,s,r,n){if(r.disableNavigation)return;const{pagedNavigation:a,numberOfMonths:l=1}=r,{startOfMonth:i,addMonths:o,differenceInCalendarMonths:c}=n,d=a?l:1,m=i(t);if(!s)return o(m,d);if(!(c(s,t)<l))return o(m,d)}function X3(t,s,r,n){if(r.disableNavigation)return;const{pagedNavigation:a,numberOfMonths:l}=r,{startOfMonth:i,addMonths:o,differenceInCalendarMonths:c}=n,d=a?l??1:1,m=i(t);if(!s)return o(m,-d);if(!(c(m,s)<=0))return o(m,-d)}function eD(t){const s=[];return t.reduce((r,n)=>r.concat(n.weeks.slice()),s.slice())}function Mu(t,s){const[r,n]=x.useState(t);return[s===void 0?r:s,n]}function tD(t,s){const[r,n]=Z3(t,s),{startOfMonth:a,endOfMonth:l}=s,i=o0(t,r,n,s),[o,c]=Mu(i,t.month?i:void 0);x.useEffect(()=>{const D=o0(t,r,n,s);c(D)},[t.timeZone]);const d=G3(o,n,t,s),m=q3(d,t.endMonth?l(t.endMonth):void 0,t,s),u=Q3(d,m,t,s),p=eD(u),g=V3(u),j=X3(o,r,t,s),y=J3(o,n,t,s),{disableNavigation:v,onMonthChange:h}=t,f=D=>p.some(S=>S.days.some(C=>C.isEqualTo(D))),N=D=>{if(v)return;let S=a(D);r&&S<a(r)&&(S=a(r)),n&&S>a(n)&&(S=a(n)),c(S),h==null||h(S)};return{months:u,weeks:p,days:g,navStart:r,navEnd:n,previousMonth:j,nextMonth:y,goToMonth:N,goToDay:D=>{f(D)||N(D.date)}}}var Fn;(function(t){t[t.Today=0]="Today",t[t.Selected=1]="Selected",t[t.LastFocused=2]="LastFocused",t[t.FocusedModifier=3]="FocusedModifier"})(Fn||(Fn={}));function c0(t){return!t[zs.disabled]&&!t[zs.hidden]&&!t[zs.outside]}function sD(t,s,r,n){let a,l=-1;for(const i of t){const o=s(i);c0(o)&&(o[zs.focused]&&l<Fn.FocusedModifier?(a=i,l=Fn.FocusedModifier):n!=null&&n.isEqualTo(i)&&l<Fn.LastFocused?(a=i,l=Fn.LastFocused):r(i.date)&&l<Fn.Selected?(a=i,l=Fn.Selected):o[zs.today]&&l<Fn.Today&&(a=i,l=Fn.Today))}return a||(a=t.find(i=>c0(s(i)))),a}function rD(t,s,r,n,a,l,i){const{ISOWeek:o,broadcastCalendar:c}=l,{addDays:d,addMonths:m,addWeeks:u,addYears:p,endOfBroadcastWeek:g,endOfISOWeek:j,endOfWeek:y,max:v,min:h,startOfBroadcastWeek:f,startOfISOWeek:N,startOfWeek:b}=i;let D={day:d,week:u,month:m,year:p,startOfWeek:S=>c?f(S,i):o?N(S):b(S),endOfWeek:S=>c?g(S):o?j(S):y(S)}[t](r,s==="after"?1:-1);return s==="before"&&n?D=v([n,D]):s==="after"&&a&&(D=h([a,D])),D}function d1(t,s,r,n,a,l,i,o=0){if(o>365)return;const c=rD(t,s,r.date,n,a,l,i),d=!!(l.disabled&&Jn(c,l.disabled,i)),m=!!(l.hidden&&Jn(c,l.hidden,i)),u=c,p=new XN(c,u,i);return!d&&!m?p:d1(t,s,p,n,a,l,i,o+1)}function nD(t,s,r,n,a){const{autoFocus:l}=t,[i,o]=x.useState(),c=sD(s.days,r,n||(()=>!1),i),[d,m]=x.useState(l?c:void 0);return{isFocusTarget:y=>!!(c!=null&&c.isEqualTo(y)),setFocused:m,focused:d,blur:()=>{o(d),m(void 0)},moveFocus:(y,v)=>{if(!d)return;const h=d1(y,v,d,s.navStart,s.navEnd,t,a);h&&(t.disableNavigation&&!s.days.some(N=>N.isEqualTo(h))||(s.goToDay(h),m(h)))}}}function aD(t,s){const{selected:r,required:n,onSelect:a}=t,[l,i]=Mu(r,a?r:void 0),o=a?r:l,{isSameDay:c}=s,d=g=>(o==null?void 0:o.some(j=>c(j,g)))??!1,{min:m,max:u}=t;return{selected:o,select:(g,j,y)=>{let v=[...o??[]];if(d(g)){if((o==null?void 0:o.length)===m||n&&(o==null?void 0:o.length)===1)return;v=o==null?void 0:o.filter(h=>!c(h,g))}else(o==null?void 0:o.length)===u?v=[g]:v=[...v,g];return a||i(v),a==null||a(v,g,j,y),v},isSelected:d}}function lD(t,s,r=0,n=0,a=!1,l=Wn){const{from:i,to:o}=s||{},{isSameDay:c,isAfter:d,isBefore:m}=l;let u;if(!i&&!o)u={from:t,to:r>0?void 0:t};else if(i&&!o)c(i,t)?r===0?u={from:i,to:t}:a?u={from:i,to:void 0}:u=void 0:m(t,i)?u={from:t,to:i}:u={from:i,to:t};else if(i&&o)if(c(i,t)&&c(o,t))a?u={from:i,to:o}:u=void 0;else if(c(i,t))u={from:i,to:r>0?void 0:t};else if(c(o,t))u={from:t,to:r>0?void 0:t};else if(m(t,i))u={from:t,to:o};else if(d(t,i))u={from:i,to:t};else if(d(t,o))u={from:i,to:t};else throw new Error("Invalid range");if(u!=null&&u.from&&(u!=null&&u.to)){const p=l.differenceInCalendarDays(u.to,u.from);n>0&&p>n?u={from:t,to:void 0}:r>1&&p<r&&(u={from:t,to:void 0})}return u}function iD(t,s,r=Wn){const n=Array.isArray(s)?s:[s];let a=t.from;const l=r.differenceInCalendarDays(t.to,t.from),i=Math.min(l,6);for(let o=0;o<=i;o++){if(n.includes(a.getDay()))return!0;a=r.addDays(a,1)}return!1}function d0(t,s,r=Wn){return Zn(t,s.from,!1,r)||Zn(t,s.to,!1,r)||Zn(s,t.from,!1,r)||Zn(s,t.to,!1,r)}function oD(t,s,r=Wn){const n=Array.isArray(s)?s:[s];if(n.filter(o=>typeof o!="function").some(o=>typeof o=="boolean"?o:r.isDate(o)?Zn(t,o,!1,r):a1(o,r)?o.some(c=>Zn(t,c,!1,r)):Rf(o)?o.from&&o.to?d0(t,{from:o.from,to:o.to},r):!1:n1(o)?iD(t,o.dayOfWeek,r):t1(o)?r.isAfter(o.before,o.after)?d0(t,{from:r.addDays(o.after,1),to:r.addDays(o.before,-1)},r):Jn(t.from,o,r)||Jn(t.to,o,r):s1(o)||r1(o)?Jn(t.from,o,r)||Jn(t.to,o,r):!1))return!0;const i=n.filter(o=>typeof o=="function");if(i.length){let o=t.from;const c=r.differenceInCalendarDays(t.to,t.from);for(let d=0;d<=c;d++){if(i.some(m=>m(o)))return!0;o=r.addDays(o,1)}}return!1}function cD(t,s){const{disabled:r,excludeDisabled:n,selected:a,required:l,onSelect:i}=t,[o,c]=Mu(a,i?a:void 0),d=i?a:o;return{selected:d,select:(p,g,j)=>{const{min:y,max:v}=t,h=p?lD(p,d,y,v,l,s):void 0;return n&&r&&(h!=null&&h.from)&&h.to&&oD({from:h.from,to:h.to},r,s)&&(h.from=p,h.to=void 0),i||c(h),i==null||i(h,p,g,j),h},isSelected:p=>d&&Zn(d,p,!1,s)}}function dD(t,s){const{selected:r,required:n,onSelect:a}=t,[l,i]=Mu(r,a?r:void 0),o=a?r:l,{isSameDay:c}=s;return{selected:o,select:(u,p,g)=>{let j=u;return!n&&o&&o&&c(u,o)&&(j=void 0),a||i(j),a==null||a(j,u,p,g),j},isSelected:u=>o?c(o,u):!1}}function uD(t,s){const r=dD(t,s),n=aD(t,s),a=cD(t,s);switch(t.mode){case"single":return r;case"multiple":return n;case"range":return a;default:return}}function vl(t){var Nt;let s=t;s.timeZone&&(s={...t},s.today&&(s.today=new Sr(s.today,s.timeZone)),s.month&&(s.month=new Sr(s.month,s.timeZone)),s.defaultMonth&&(s.defaultMonth=new Sr(s.defaultMonth,s.timeZone)),s.startMonth&&(s.startMonth=new Sr(s.startMonth,s.timeZone)),s.endMonth&&(s.endMonth=new Sr(s.endMonth,s.timeZone)),s.mode==="single"&&s.selected?s.selected=new Sr(s.selected,s.timeZone):s.mode==="multiple"&&s.selected?s.selected=(Nt=s.selected)==null?void 0:Nt.map(At=>new Sr(At,s.timeZone)):s.mode==="range"&&s.selected&&(s.selected={from:s.selected.from?new Sr(s.selected.from,s.timeZone):void 0,to:s.selected.to?new Sr(s.selected.to,s.timeZone):void 0}));const{components:r,formatters:n,labels:a,dateLib:l,locale:i,classNames:o}=x.useMemo(()=>{const At={...Pf,...s.locale};return{dateLib:new on({locale:At,weekStartsOn:s.broadcastCalendar?1:s.weekStartsOn,firstWeekContainsDate:s.firstWeekContainsDate,useAdditionalWeekYearTokens:s.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:s.useAdditionalDayOfYearTokens,timeZone:s.timeZone,numerals:s.numerals},s.dateLib),components:f3(s.components),formatters:E3(s.formatters),labels:{...B3,...s.labels},locale:At,classNames:{...g3(),...s.classNames}}},[s.locale,s.broadcastCalendar,s.weekStartsOn,s.firstWeekContainsDate,s.useAdditionalWeekYearTokens,s.useAdditionalDayOfYearTokens,s.timeZone,s.numerals,s.dateLib,s.components,s.formatters,s.labels,s.classNames]),{captionLayout:c,mode:d,navLayout:m,numberOfMonths:u=1,onDayBlur:p,onDayClick:g,onDayFocus:j,onDayKeyDown:y,onDayMouseEnter:v,onDayMouseLeave:h,onNextClick:f,onPrevClick:N,showWeekNumber:b,styles:w}=s,{formatCaption:D,formatDay:S,formatMonthDropdown:C,formatWeekNumber:T,formatWeekNumberHeader:_,formatWeekdayName:E,formatYearDropdown:A}=n,L=tD(s,l),{days:F,months:W,navStart:Y,navEnd:q,previousMonth:J,nextMonth:O,goToMonth:M}=L,k=h3(F,s,Y,q,l),{isSelected:I,select:K,selected:z}=uD(s,l)??{},{blur:P,focused:R,isFocusTarget:B,moveFocus:U,setFocused:G}=nD(s,L,k,I??(()=>!1),l),{labelDayButton:$,labelGridcell:X,labelGrid:Q,labelMonthDropdown:Ne,labelNav:V,labelPrevious:re,labelNext:ne,labelWeekday:xe,labelWeekNumber:me,labelWeekNumberHeader:Z,labelYearDropdown:ee}=a,ye=x.useMemo(()=>A3(l,s.ISOWeek),[l,s.ISOWeek]),ve=d!==void 0||g!==void 0,ue=x.useCallback(()=>{J&&(M(J),N==null||N(J))},[J,M,N]),we=x.useCallback(()=>{O&&(M(O),f==null||f(O))},[M,O,f]),De=x.useCallback((At,Ce)=>Ze=>{Ze.preventDefault(),Ze.stopPropagation(),G(At),K==null||K(At.date,Ce,Ze),g==null||g(At.date,Ce,Ze)},[K,g,G]),le=x.useCallback((At,Ce)=>Ze=>{G(At),j==null||j(At.date,Ce,Ze)},[j,G]),Ie=x.useCallback((At,Ce)=>Ze=>{P(),p==null||p(At.date,Ce,Ze)},[P,p]),ge=x.useCallback((At,Ce)=>Ze=>{const fe={ArrowLeft:[Ze.shiftKey?"month":"day",s.dir==="rtl"?"after":"before"],ArrowRight:[Ze.shiftKey?"month":"day",s.dir==="rtl"?"before":"after"],ArrowDown:[Ze.shiftKey?"year":"week","after"],ArrowUp:[Ze.shiftKey?"year":"week","before"],PageUp:[Ze.shiftKey?"year":"month","before"],PageDown:[Ze.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(fe[Ze.key]){Ze.preventDefault(),Ze.stopPropagation();const[Pe,Le]=fe[Ze.key];U(Pe,Le)}y==null||y(At.date,Ce,Ze)},[U,y,s.dir]),Ge=x.useCallback((At,Ce)=>Ze=>{v==null||v(At.date,Ce,Ze)},[v]),ke=x.useCallback((At,Ce)=>Ze=>{h==null||h(At.date,Ce,Ze)},[h]),Re=x.useCallback(At=>Ce=>{const Ze=Number(Ce.target.value),fe=l.setMonth(l.startOfMonth(At),Ze);M(fe)},[l,M]),Ke=x.useCallback(At=>Ce=>{const Ze=Number(Ce.target.value),fe=l.setYear(l.startOfMonth(At),Ze);M(fe)},[l,M]),{className:Xe,style:Se}=x.useMemo(()=>({className:[o[Bt.Root],s.className].filter(Boolean).join(" "),style:{...w==null?void 0:w[Bt.Root],...s.style}}),[o,s.className,s.style,w]),lt=x3(s),it=x.useRef(null);K3(it,!!s.animate,{classNames:o,months:W,focused:R,dateLib:l});const Pt={dayPickerProps:s,selected:z,select:K,isSelected:I,months:W,nextMonth:O,previousMonth:J,goToMonth:M,getModifiers:k,components:r,classNames:o,styles:w,labels:a,formatters:n};return St.createElement(e1.Provider,{value:Pt},St.createElement(r.Root,{rootRef:s.animate?it:void 0,className:Xe,style:Se,dir:s.dir,id:s.id,lang:s.lang,nonce:s.nonce,title:s.title,role:s.role,"aria-label":s["aria-label"],"aria-labelledby":s["aria-labelledby"],...lt},St.createElement(r.Months,{className:o[Bt.Months],style:w==null?void 0:w[Bt.Months]},!s.hideNavigation&&!m&&St.createElement(r.Nav,{"data-animated-nav":s.animate?"true":void 0,className:o[Bt.Nav],style:w==null?void 0:w[Bt.Nav],"aria-label":V(),onPreviousClick:ue,onNextClick:we,previousMonth:J,nextMonth:O}),W.map((At,Ce)=>St.createElement(r.Month,{"data-animated-month":s.animate?"true":void 0,className:o[Bt.Month],style:w==null?void 0:w[Bt.Month],key:Ce,displayIndex:Ce,calendarMonth:At},m==="around"&&!s.hideNavigation&&Ce===0&&St.createElement(r.PreviousMonthButton,{type:"button",className:o[Bt.PreviousMonthButton],tabIndex:J?void 0:-1,"aria-disabled":J?void 0:!0,"aria-label":re(J),onClick:ue,"data-animated-button":s.animate?"true":void 0},St.createElement(r.Chevron,{disabled:J?void 0:!0,className:o[Bt.Chevron],orientation:s.dir==="rtl"?"right":"left"})),St.createElement(r.MonthCaption,{"data-animated-caption":s.animate?"true":void 0,className:o[Bt.MonthCaption],style:w==null?void 0:w[Bt.MonthCaption],calendarMonth:At,displayIndex:Ce},c!=null&&c.startsWith("dropdown")?St.createElement(r.DropdownNav,{className:o[Bt.Dropdowns],style:w==null?void 0:w[Bt.Dropdowns]},(()=>{const Ze=c==="dropdown"||c==="dropdown-months"?St.createElement(r.MonthsDropdown,{key:"month",className:o[Bt.MonthsDropdown],"aria-label":Ne(),classNames:o,components:r,disabled:!!s.disableNavigation,onChange:Re(At.date),options:k3(At.date,Y,q,n,l),style:w==null?void 0:w[Bt.Dropdown],value:l.getMonth(At.date)}):St.createElement("span",{key:"month"},C(At.date,l)),fe=c==="dropdown"||c==="dropdown-years"?St.createElement(r.YearsDropdown,{key:"year",className:o[Bt.YearsDropdown],"aria-label":ee(l.options),classNames:o,components:r,disabled:!!s.disableNavigation,onChange:Ke(At.date),options:D3(Y,q,n,l,!!s.reverseYears),style:w==null?void 0:w[Bt.Dropdown],value:l.getYear(At.date)}):St.createElement("span",{key:"year"},A(At.date,l));return l.getMonthYearOrder()==="year-first"?[fe,Ze]:[Ze,fe]})(),St.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},D(At.date,l.options,l))):St.createElement(r.CaptionLabel,{className:o[Bt.CaptionLabel],role:"status","aria-live":"polite"},D(At.date,l.options,l))),m==="around"&&!s.hideNavigation&&Ce===u-1&&St.createElement(r.NextMonthButton,{type:"button",className:o[Bt.NextMonthButton],tabIndex:O?void 0:-1,"aria-disabled":O?void 0:!0,"aria-label":ne(O),onClick:we,"data-animated-button":s.animate?"true":void 0},St.createElement(r.Chevron,{disabled:O?void 0:!0,className:o[Bt.Chevron],orientation:s.dir==="rtl"?"left":"right"})),Ce===u-1&&m==="after"&&!s.hideNavigation&&St.createElement(r.Nav,{"data-animated-nav":s.animate?"true":void 0,className:o[Bt.Nav],style:w==null?void 0:w[Bt.Nav],"aria-label":V(),onPreviousClick:ue,onNextClick:we,previousMonth:J,nextMonth:O}),St.createElement(r.MonthGrid,{role:"grid","aria-multiselectable":d==="multiple"||d==="range","aria-label":Q(At.date,l.options,l)||void 0,className:o[Bt.MonthGrid],style:w==null?void 0:w[Bt.MonthGrid]},!s.hideWeekdays&&St.createElement(r.Weekdays,{"data-animated-weekdays":s.animate?"true":void 0,className:o[Bt.Weekdays],style:w==null?void 0:w[Bt.Weekdays]},b&&St.createElement(r.WeekNumberHeader,{"aria-label":Z(l.options),className:o[Bt.WeekNumberHeader],style:w==null?void 0:w[Bt.WeekNumberHeader],scope:"col"},_()),ye.map(Ze=>St.createElement(r.Weekday,{"aria-label":xe(Ze,l.options,l),className:o[Bt.Weekday],key:String(Ze),style:w==null?void 0:w[Bt.Weekday],scope:"col"},E(Ze,l.options,l)))),St.createElement(r.Weeks,{"data-animated-weeks":s.animate?"true":void 0,className:o[Bt.Weeks],style:w==null?void 0:w[Bt.Weeks]},At.weeks.map(Ze=>St.createElement(r.Week,{className:o[Bt.Week],key:Ze.weekNumber,style:w==null?void 0:w[Bt.Week],week:Ze},b&&St.createElement(r.WeekNumber,{week:Ze,style:w==null?void 0:w[Bt.WeekNumber],"aria-label":me(Ze.weekNumber,{locale:i}),className:o[Bt.WeekNumber],scope:"row",role:"rowheader"},T(Ze.weekNumber,l)),Ze.days.map(fe=>{const{date:Pe}=fe,Le=k(fe);if(Le[zs.focused]=!Le.hidden&&!!(R!=null&&R.isEqualTo(fe)),Le[Sn.selected]=(I==null?void 0:I(Pe))||Le.selected,Rf(z)){const{from:qe,to:Oe}=z;Le[Sn.range_start]=!!(qe&&Oe&&l.isSameDay(Pe,qe)),Le[Sn.range_end]=!!(qe&&Oe&&l.isSameDay(Pe,Oe)),Le[Sn.range_middle]=Zn(z,Pe,!0,l)}const ut=C3(Le,w,s.modifiersStyles),Be=p3(Le,o,s.modifiersClassNames),mt=!ve&&!Le.hidden?X(Pe,Le,l.options,l):void 0;return St.createElement(r.Day,{key:`${l.format(Pe,"yyyy-MM-dd")}_${l.format(fe.displayMonth,"yyyy-MM")}`,day:fe,modifiers:Le,className:Be.join(" "),style:ut,role:"gridcell","aria-selected":Le.selected||void 0,"aria-label":mt,"data-day":l.format(Pe,"yyyy-MM-dd"),"data-month":fe.outside?l.format(Pe,"yyyy-MM"):void 0,"data-selected":Le.selected||void 0,"data-disabled":Le.disabled||void 0,"data-hidden":Le.hidden||void 0,"data-outside":fe.outside||void 0,"data-focused":Le.focused||void 0,"data-today":Le.today||void 0},!Le.hidden&&ve?St.createElement(r.DayButton,{className:o[Bt.DayButton],style:w==null?void 0:w[Bt.DayButton],type:"button",day:fe,modifiers:Le,disabled:Le.disabled||void 0,tabIndex:B(fe)?0:-1,"aria-label":$(Pe,Le,l.options,l),onClick:De(fe,Le),onBlur:Ie(fe,Le),onFocus:le(fe,Le),onKeyDown:ge(fe,Le),onMouseEnter:Ge(fe,Le),onMouseLeave:ke(fe,Le)},S(Pe,l.options,l)):!Le.hidden&&S(fe.date,l.options,l))})))))))),s.footer&&St.createElement(r.Footer,{className:o[Bt.Footer],style:w==null?void 0:w[Bt.Footer],role:"status","aria-live":"polite"},s.footer)))}const mD=()=>"http://192.168.11.17/uploads",Wi=t=>{if(!t)return null;const s=mD(),r=t.startsWith("/")?t.slice(1):t;return`${s}/${r}`},or=t=>{if(!t)return null;if(t.startsWith("http://")||t.startsWith("https://"))return t;if(t.includes("\\")&&(t.startsWith("C:")||t.startsWith("D:")||t.startsWith("E:"))){const s=t.split("\\"),r=s[s.length-1];return Wi(`photo/${r}`)}if(t.startsWith("uploads/")){const s=t.replace("uploads/","");return Wi(s)}if(t.startsWith("/uploads/")){const s=t.replace("/uploads/","");return Wi(s)}return t.includes("/")?Wi(t):Wi(`photo/${t}`)},hD=({onClose:t,onSuccess:s})=>{var U,G;const{user:r}=Ts(),[n,a]=x.useState(!0),[l,i]=x.useState(!1),[o,c]=x.useState(null),[d,m]=x.useState([]),[u,p]=x.useState({vl:0,sl:0}),[g,j]=x.useState(!1),[y,v]=x.useState(!1),[h,f]=x.useState([]),[N,b]=x.useState({selectedQuestionId:null,answer:""}),[w,D]=x.useState([]),[S,C]=x.useState([]),[T,_]=x.useState({text:"",type:""}),[E,A]=x.useState(null),[L,F]=x.useState(!1),[W,Y]=x.useState({leavetypeid:"",deductmode:"Leave",leavepurpose:"",selectedDates:[],leavestatus:"For Approval",deductedcredit:0,inclusivedates:0}),q=($,X="success")=>{_({text:$,type:X}),setTimeout(()=>_({text:"",type:""}),5e3)},J=({label:$,value:X,options:Q=[],onSelect:Ne,placeholder:V="Select an option",required:re=!1,className:ne=""})=>{const[xe,me]=x.useState(!1),[Z,ee]=x.useState(""),[ye,ve]=x.useState(null),ue=Array.isArray(Q)?Q.filter(le=>le&&typeof le=="object"&&le.value&&le.label):[];x.useEffect(()=>{if(X&&ue.length>0){const le=ue.find(Ie=>Ie.value===X);ve(le||null)}else ve(null)},[X,ue]);const we=ue.filter(le=>{try{return!le||!le.label||typeof le.label!="string"?!1:le.label.toLowerCase().includes(Z.toLowerCase())}catch{return!1}});x.useEffect(()=>{const le=Ie=>{xe&&!Ie.target.closest(".enhanced-dropdown")&&(me(!1),ee(""))};return document.addEventListener("mousedown",le),()=>{document.removeEventListener("mousedown",le)}},[xe]);const De=le=>{try{if(!le||typeof Ne!="function")return;ve(le),Ne(le.value),me(!1),ee("")}catch(Ie){console.error("Error selecting option:",Ie)}};return e.jsxs("div",{className:`enhanced-dropdown ${ne}`,children:[$&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[$,re&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{onClick:()=>me(!xe),className:`w-full px-3 py-2 border border-gray-300 rounded-md cursor-pointer bg-white flex items-center justify-between ${xe?"ring-2 ring-blue-500 border-blue-500":"hover:border-gray-400"} transition-colors duration-200`,children:[e.jsx("span",{className:ye?"text-gray-900":"text-gray-500",children:ye?ye.label:V}),e.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${xe?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),xe&&e.jsxs("div",{className:"absolute z-[70] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b border-gray-200",children:e.jsx("input",{type:"text",value:Z,onChange:le=>ee(le.target.value),placeholder:"Search...",className:"w-full px-2 py-1 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 text-gray-900",autoFocus:!0})}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:we.length>0?we.map(le=>!le||!le.value||!le.label?null:e.jsx("div",{className:`px-3 py-2 text-sm cursor-pointer transition-colors duration-150 ${(ye==null?void 0:ye.value)===le.value?"bg-blue-50 text-blue-900 font-medium":"text-gray-900 hover:bg-gray-50"}`,onClick:()=>De(le),children:le.label},le.value)):e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No options found"})})]})]})]})};x.useEffect(()=>{O()},[]);const O=async()=>{var $;try{a(!0);const X=(r==null?void 0:r.USERID)||(r==null?void 0:r.userid);if(!X){q("User ID not found","error");return}try{await oe.get("/pds-dtrchecker/me"),j(!0)}catch{j(!1)}const V=(await oe.get("/201-employees")).data.data.find(ne=>ne.dtruserid===X);if(!V){q("Employee record not found","error");return}c(V);try{const ne=await oe.get(`/employee-leave-records/${V.objid}`);if(ne.data&&ne.data.success===!0&&ne.data.leaveRecord){const xe=ne.data.leaveRecord;p({vl:parseFloat(xe.balance_vl||0),sl:parseFloat(xe.balance_sl||0)}),v(!0)}else v(!1)}catch{v(!1)}const re=await oe.get("/leave-types");m((($=re.data)==null?void 0:$.data)||[])}catch(X){console.error("Error fetching initial data:",X),q("Error loading data. Please try again.","error")}finally{a(!1)}},M=async $=>{try{const X=await oe.get(`/leave-types/${$}/questions`);f(X.data||[])}catch(X){console.error("Error fetching leave type questions:",X),f([])}};x.useEffect(()=>{const $=(w||[]).filter(Boolean).map(X=>{const Q=X.getFullYear(),Ne=String(X.getMonth()+1).padStart(2,"0"),V=String(X.getDate()).padStart(2,"0");return`${Q}-${Ne}-${V}`});Y(X=>({...X,selectedDates:Array.from(new Set([...(X.selectedDates||[]).filter(Q=>!S.includes(Q)),...$])),inclusivedates:$.length,deductedcredit:$.length*1})),C($)},[w]);const k=x.useCallback(async($,X,Q,Ne)=>{var V;if(!$||!X||!Ne||Ne.length===0){A(null);return}try{F(!0);const re=await oe.post("/employee-leave-transactions/validate",{emp_objid:$,leavetypeid:X,deductedcredit:Q,selectedDates:Ne});re.data&&re.data.success!==!1?re.data.valid?A(null):A({valid:!1,error:re.data.error||"Validation failed"}):A({valid:!1,error:((V=re.data)==null?void 0:V.error)||"Validation failed"})}catch(re){console.error("Error validating leave limits:",re),A(null)}finally{F(!1)}},[]);x.useEffect(()=>{var $,X;o!=null&&o.objid&&W.leavetypeid&&(($=W.selectedDates)==null?void 0:$.length)>0?k(o.objid,W.leavetypeid,W.deductedcredit||W.inclusivedates||0,W.selectedDates):(!W.leavetypeid||((X=W.selectedDates)==null?void 0:X.length)===0)&&A(null)},[W.leavetypeid,W.selectedDates,W.deductedcredit,o==null?void 0:o.objid,k]);const I=$=>{Y(X=>{const Q=(X.selectedDates||[]).filter(V=>V!==$),Ne=Math.max(0,Q.length);return{...X,selectedDates:Q,inclusivedates:Ne,deductedcredit:Ne*1}}),S.includes($)&&(D(X=>X.filter(Q=>{const Ne=Q.getFullYear(),V=String(Q.getMonth()+1).padStart(2,"0"),re=String(Q.getDate()).padStart(2,"0");return`${Ne}-${V}-${re}`!==$})),C(X=>X.filter(Q=>Q!==$)))},z=(()=>{var V,re,ne,xe;const $=W.selectedDates.length;if(!Array.isArray(d)||d.length===0||!W.leavetypeid)return{required:0,type:"Other",available:0,sufficient:!0};const X=d.find(me=>me.leaveid===W.leavetypeid);if(!X)return{required:0,type:"Other",available:0,sufficient:!0};const Q=((V=X.leavecode)==null?void 0:V.includes("VL"))||((re=X.leavetype)==null?void 0:re.includes("Vacation")),Ne=((ne=X.leavecode)==null?void 0:ne.includes("SL"))||((xe=X.leavetype)==null?void 0:xe.includes("Sick"));return{required:$*1,type:Q?"VL":Ne?"SL":"Other",available:Q?u.vl:Ne?u.sl:0,sufficient:Q?u.vl>=$:Ne?u.sl>=$:!0}})(),P=g&&y&&z.sufficient&&W.leavetypeid&&W.selectedDates.length>0&&(!E||E.valid),R=$=>{const{name:X,value:Q}=$.target;Y(Ne=>({...Ne,[X]:Q}))},B=async()=>{var $,X;try{i(!0);const Q={emp_objid:o.objid,leavetypeid:W.leavetypeid,deductmode:"Leave",leavepurpose:W.leavepurpose,selectedDates:W.selectedDates,deductedcredit:W.deductedcredit,inclusivedates:W.inclusivedates,status:"For Approval",isportal:1,createdby:r.USERID,questionAnswers:N.selectedQuestionId&&N.answer?N:null};await oe.post("/employee-leave-transactions",Q),q("Leave application submitted successfully","success"),setTimeout(()=>{s()},1e3)}catch(Q){console.error("Error submitting leave application:",Q),q(((X=($=Q.response)==null?void 0:$.data)==null?void 0:X.error)||"Failed to submit leave application. Please try again.","error")}finally{i(!1)}};return n?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"relative w-full max-w-4xl bg-white rounded-lg shadow-xl p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})})}):e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"relative w-full max-w-4xl bg-white rounded-lg shadow-xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:o!=null&&o.photo_path?e.jsx("img",{src:or(o.photo_path),alt:o.employee_name||"Employee",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-300",children:e.jsx("span",{className:"text-gray-600 text-sm font-medium",children:(((U=o==null?void 0:o.surname)==null?void 0:U[0])||"")+(((G=o==null?void 0:o.firstname)==null?void 0:G[0])||"")})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Apply Leave"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[o?bs(o.surname,o.firstname,o.middlename):"",(o==null?void 0:o.employee_id)&&`  ${o.employee_id}`]})]})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200 p-1 rounded-full hover:bg-gray-100",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),T.text&&e.jsx("div",{className:`mb-4 p-3 rounded-md ${T.type==="error"?"bg-red-50 text-red-800":"bg-green-50 text-green-800"}`,children:T.text}),!g&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"PDS Required"}),e.jsxs("p",{className:"mt-1 text-sm text-red-700",children:["You must complete your Personal Data Sheet (PDS) before applying for leave. Please go to the ",e.jsx("strong",{children:'"My PDS"'})," tab to fill out your information."]})]})]})}),!y&&e.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"No Leave Credits Found"}),e.jsx("p",{className:"mt-1 text-sm text-yellow-700",children:"No leave credits found in the system. Please contact HR to update your leave credit records."})]})]})}),y&&e.jsxs("div",{className:"mb-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Vacation Leave (VL)"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:u.vl.toFixed(3)})]}),e.jsxs("div",{className:"flex-1 text-center border-l border-blue-300",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Sick Leave (SL)"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:u.sl.toFixed(3)})]})]}),W.selectedDates.length>0&&W.leavetypeid&&e.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200",children:e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Selected:"})," ",W.selectedDates.length," day(s) ",e.jsx("strong",{children:" Required Credits:"})," ",z.required.toFixed(3)," ",z.type,!z.sufficient&&e.jsxs("span",{className:"ml-2 text-red-600 font-semibold",children:["(Insufficient: ",z.type," balance is ",z.available.toFixed(3),")"]})]})})]}),e.jsxs("form",{onSubmit:$=>{$.preventDefault(),B()},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(J,{label:"Leave Type",value:W.leavetypeid,options:Array.isArray(d)?d.map($=>({value:$.leaveid,label:`${$.leavetype||"Unknown Leave Type"} (${$.leavecode||"N/A"})`,hasQuestions:$.hasquestion===1||$.hasquestion===!0})):[],onSelect:$=>{if(Y(X=>({...X,leavetypeid:$})),Array.isArray(d)){const X=d.find(Q=>Q.leaveid===$);X&&(X.hasquestion===1||X.hasquestion===!0)?M($):(f([]),b({selectedQuestionId:null,answer:""}))}},placeholder:"Select Leave Type",required:!0}),E&&!E.valid&&e.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-400 mt-0.5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-sm text-red-800",children:E.error})]})}),L&&e.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"Validating leave limits..."})]}),e.jsx("div",{children:h.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Questions"}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:h.map(($,X)=>e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("input",{type:"radio",id:`question-${$.objid}`,name:"leave-question",checked:N.selectedQuestionId===$.objid,onChange:Q=>{Q.target.checked&&b({selectedQuestionId:$.objid,answer:""})},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("label",{htmlFor:`question-${$.objid}`,className:"block text-xs font-medium text-gray-700 mb-1 cursor-pointer",children:[X+1,". ",$.question]}),N.selectedQuestionId===$.objid&&e.jsx("textarea",{value:N.answer,onChange:Q=>{b(Ne=>({...Ne,answer:Q.target.value}))},rows:2,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Answer..."})]})]})},$.objid))})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leave Purpose"}),e.jsx("textarea",{name:"leavepurpose",value:W.leavepurpose,onChange:R,rows:3,maxLength:100,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Enter leave purpose..."}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[W.leavepurpose.length,"/100 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Dates"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(vl,{mode:"multiple",selected:w,onSelect:D,weekStartsOn:1,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-1,toYear:new Date().getFullYear()+1})}),e.jsxs("div",{className:"border rounded p-3 bg-gray-50 max-h-64 overflow-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Selected Dates"}),e.jsxs("span",{className:"text-xs text-gray-600",children:["Total: ",W.selectedDates.length]})]}),e.jsxs("ul",{className:"space-y-1 text-sm",children:[W.selectedDates.sort().map($=>{const X=$.slice(5,7),Q=$.slice(8,10),Ne=$.slice(0,4),V=`${X}/${Q}/${Ne}`;return e.jsxs("li",{className:"flex items-center justify-between bg-white rounded border px-2 py-1",children:[e.jsx("span",{children:V}),e.jsx("button",{type:"button",onClick:()=>I($),className:"text-red-600 text-xs hover:text-red-800",children:"Remove"})]},$)}),W.selectedDates.length===0&&e.jsx("li",{className:"text-xs text-gray-500",children:"No dates selected"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l||!P||E&&!E.valid,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Submitting...":"Submit Leave Application"})]})]})]})})})};var wi={},pD=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},u1={},un={};let Of;const fD=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];un.getSymbolSize=function(s){if(!s)throw new Error('"version" cannot be null or undefined');if(s<1||s>40)throw new Error('"version" should be in range from 1 to 40');return s*4+17};un.getSymbolTotalCodewords=function(s){return fD[s]};un.getBCHDigit=function(t){let s=0;for(;t!==0;)s++,t>>>=1;return s};un.setToSJISFunction=function(s){if(typeof s!="function")throw new Error('"toSJISFunc" is not a valid function.');Of=s};un.isKanjiModeEnabled=function(){return typeof Of<"u"};un.toSJIS=function(s){return Of(s)};var Iu={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function s(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,a){if(t.isValid(n))return n;try{return s(n)}catch{return a}}})(Iu);function m1(){this.buffer=[],this.length=0}m1.prototype={get:function(t){const s=Math.floor(t/8);return(this.buffer[s]>>>7-t%8&1)===1},put:function(t,s){for(let r=0;r<s;r++)this.putBit((t>>>s-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),t&&(this.buffer[s]|=128>>>this.length%8),this.length++}};var xD=m1;function dc(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}dc.prototype.set=function(t,s,r,n){const a=t*this.size+s;this.data[a]=r,n&&(this.reservedBit[a]=!0)};dc.prototype.get=function(t,s){return this.data[t*this.size+s]};dc.prototype.xor=function(t,s,r){this.data[t*this.size+s]^=r};dc.prototype.isReserved=function(t,s){return this.reservedBit[t*this.size+s]};var gD=dc,h1={};(function(t){const s=un.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const a=Math.floor(n/7)+2,l=s(n),i=l===145?26:Math.ceil((l-13)/(2*a-2))*2,o=[l-7];for(let c=1;c<a-1;c++)o[c]=o[c-1]-i;return o.push(6),o.reverse()},t.getPositions=function(n){const a=[],l=t.getRowColCoords(n),i=l.length;for(let o=0;o<i;o++)for(let c=0;c<i;c++)o===0&&c===0||o===0&&c===i-1||o===i-1&&c===0||a.push([l[o],l[c]]);return a}})(h1);var p1={};const yD=un.getSymbolSize,u0=7;p1.getPositions=function(s){const r=yD(s);return[[0,0],[r-u0,0],[0,r-u0]]};var f1={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const s={N1:3,N2:3,N3:40,N4:10};t.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},t.from=function(a){return t.isValid(a)?parseInt(a,10):void 0},t.getPenaltyN1=function(a){const l=a.size;let i=0,o=0,c=0,d=null,m=null;for(let u=0;u<l;u++){o=c=0,d=m=null;for(let p=0;p<l;p++){let g=a.get(u,p);g===d?o++:(o>=5&&(i+=s.N1+(o-5)),d=g,o=1),g=a.get(p,u),g===m?c++:(c>=5&&(i+=s.N1+(c-5)),m=g,c=1)}o>=5&&(i+=s.N1+(o-5)),c>=5&&(i+=s.N1+(c-5))}return i},t.getPenaltyN2=function(a){const l=a.size;let i=0;for(let o=0;o<l-1;o++)for(let c=0;c<l-1;c++){const d=a.get(o,c)+a.get(o,c+1)+a.get(o+1,c)+a.get(o+1,c+1);(d===4||d===0)&&i++}return i*s.N2},t.getPenaltyN3=function(a){const l=a.size;let i=0,o=0,c=0;for(let d=0;d<l;d++){o=c=0;for(let m=0;m<l;m++)o=o<<1&2047|a.get(d,m),m>=10&&(o===1488||o===93)&&i++,c=c<<1&2047|a.get(m,d),m>=10&&(c===1488||c===93)&&i++}return i*s.N3},t.getPenaltyN4=function(a){let l=0;const i=a.data.length;for(let c=0;c<i;c++)l+=a.data[c];return Math.abs(Math.ceil(l*100/i/5)-10)*s.N4};function r(n,a,l){switch(n){case t.Patterns.PATTERN000:return(a+l)%2===0;case t.Patterns.PATTERN001:return a%2===0;case t.Patterns.PATTERN010:return l%3===0;case t.Patterns.PATTERN011:return(a+l)%3===0;case t.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(l/3))%2===0;case t.Patterns.PATTERN101:return a*l%2+a*l%3===0;case t.Patterns.PATTERN110:return(a*l%2+a*l%3)%2===0;case t.Patterns.PATTERN111:return(a*l%3+(a+l)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(a,l){const i=l.size;for(let o=0;o<i;o++)for(let c=0;c<i;c++)l.isReserved(c,o)||l.xor(c,o,r(a,c,o))},t.getBestMask=function(a,l){const i=Object.keys(t.Patterns).length;let o=0,c=1/0;for(let d=0;d<i;d++){l(d),t.applyMask(d,a);const m=t.getPenaltyN1(a)+t.getPenaltyN2(a)+t.getPenaltyN3(a)+t.getPenaltyN4(a);t.applyMask(d,a),m<c&&(c=m,o=d)}return o}})(f1);var Lu={};const _a=Iu,Ac=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Dc=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Lu.getBlocksCount=function(s,r){switch(r){case _a.L:return Ac[(s-1)*4+0];case _a.M:return Ac[(s-1)*4+1];case _a.Q:return Ac[(s-1)*4+2];case _a.H:return Ac[(s-1)*4+3];default:return}};Lu.getTotalCodewordsCount=function(s,r){switch(r){case _a.L:return Dc[(s-1)*4+0];case _a.M:return Dc[(s-1)*4+1];case _a.Q:return Dc[(s-1)*4+2];case _a.H:return Dc[(s-1)*4+3];default:return}};var x1={},Pu={};const bo=new Uint8Array(512),Hd=new Uint8Array(256);(function(){let s=1;for(let r=0;r<255;r++)bo[r]=s,Hd[s]=r,s<<=1,s&256&&(s^=285);for(let r=255;r<512;r++)bo[r]=bo[r-255]})();Pu.log=function(s){if(s<1)throw new Error("log("+s+")");return Hd[s]};Pu.exp=function(s){return bo[s]};Pu.mul=function(s,r){return s===0||r===0?0:bo[Hd[s]+Hd[r]]};(function(t){const s=Pu;t.mul=function(n,a){const l=new Uint8Array(n.length+a.length-1);for(let i=0;i<n.length;i++)for(let o=0;o<a.length;o++)l[i+o]^=s.mul(n[i],a[o]);return l},t.mod=function(n,a){let l=new Uint8Array(n);for(;l.length-a.length>=0;){const i=l[0];for(let c=0;c<a.length;c++)l[c]^=s.mul(a[c],i);let o=0;for(;o<l.length&&l[o]===0;)o++;l=l.slice(o)}return l},t.generateECPolynomial=function(n){let a=new Uint8Array([1]);for(let l=0;l<n;l++)a=t.mul(a,new Uint8Array([1,s.exp(l)]));return a}})(x1);const g1=x1;function Ff(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Ff.prototype.initialize=function(s){this.degree=s,this.genPoly=g1.generateECPolynomial(this.degree)};Ff.prototype.encode=function(s){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(s.length+this.degree);r.set(s);const n=g1.mod(r,this.genPoly),a=this.degree-n.length;if(a>0){const l=new Uint8Array(this.degree);return l.set(n,a),l}return n};var bD=Ff,y1={},za={},$f={};$f.isValid=function(s){return!isNaN(s)&&s>=1&&s<=40};var Yn={};const b1="[0-9]+",vD="[A-Z $%*+\\-./:]+";let Yo="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Yo=Yo.replace(/u/g,"\\u");const jD="(?:(?![A-Z0-9 $%*+\\-./:]|"+Yo+`)(?:.|[\r
]))+`;Yn.KANJI=new RegExp(Yo,"g");Yn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Yn.BYTE=new RegExp(jD,"g");Yn.NUMERIC=new RegExp(b1,"g");Yn.ALPHANUMERIC=new RegExp(vD,"g");const ND=new RegExp("^"+Yo+"$"),wD=new RegExp("^"+b1+"$"),SD=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Yn.testKanji=function(s){return ND.test(s)};Yn.testNumeric=function(s){return wD.test(s)};Yn.testAlphanumeric=function(s){return SD.test(s)};(function(t){const s=$f,r=Yn;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(l,i){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!s.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?l.ccBits[0]:i<27?l.ccBits[1]:l.ccBits[2]},t.getBestModeForData=function(l){return r.testNumeric(l)?t.NUMERIC:r.testAlphanumeric(l)?t.ALPHANUMERIC:r.testKanji(l)?t.KANJI:t.BYTE},t.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},t.isValid=function(l){return l&&l.bit&&l.ccBits};function n(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+a)}}t.from=function(l,i){if(t.isValid(l))return l;try{return n(l)}catch{return i}}})(za);(function(t){const s=un,r=Lu,n=Iu,a=za,l=$f,i=7973,o=s.getBCHDigit(i);function c(p,g,j){for(let y=1;y<=40;y++)if(g<=t.getCapacity(y,j,p))return y}function d(p,g){return a.getCharCountIndicator(p,g)+4}function m(p,g){let j=0;return p.forEach(function(y){const v=d(y.mode,g);j+=v+y.getBitsLength()}),j}function u(p,g){for(let j=1;j<=40;j++)if(m(p,j)<=t.getCapacity(j,g,a.MIXED))return j}t.from=function(g,j){return l.isValid(g)?parseInt(g,10):j},t.getCapacity=function(g,j,y){if(!l.isValid(g))throw new Error("Invalid QR Code version");typeof y>"u"&&(y=a.BYTE);const v=s.getSymbolTotalCodewords(g),h=r.getTotalCodewordsCount(g,j),f=(v-h)*8;if(y===a.MIXED)return f;const N=f-d(y,g);switch(y){case a.NUMERIC:return Math.floor(N/10*3);case a.ALPHANUMERIC:return Math.floor(N/11*2);case a.KANJI:return Math.floor(N/13);case a.BYTE:default:return Math.floor(N/8)}},t.getBestVersionForData=function(g,j){let y;const v=n.from(j,n.M);if(Array.isArray(g)){if(g.length>1)return u(g,v);if(g.length===0)return 1;y=g[0]}else y=g;return c(y.mode,y.getLength(),v)},t.getEncodedBits=function(g){if(!l.isValid(g)||g<7)throw new Error("Invalid QR Code version");let j=g<<12;for(;s.getBCHDigit(j)-o>=0;)j^=i<<s.getBCHDigit(j)-o;return g<<12|j}})(y1);var v1={};const hp=un,j1=1335,_D=21522,m0=hp.getBCHDigit(j1);v1.getEncodedBits=function(s,r){const n=s.bit<<3|r;let a=n<<10;for(;hp.getBCHDigit(a)-m0>=0;)a^=j1<<hp.getBCHDigit(a)-m0;return(n<<10|a)^_D};var N1={};const ED=za;function ui(t){this.mode=ED.NUMERIC,this.data=t.toString()}ui.getBitsLength=function(s){return 10*Math.floor(s/3)+(s%3?s%3*3+1:0)};ui.prototype.getLength=function(){return this.data.length};ui.prototype.getBitsLength=function(){return ui.getBitsLength(this.data.length)};ui.prototype.write=function(s){let r,n,a;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),a=parseInt(n,10),s.put(a,10);const l=this.data.length-r;l>0&&(n=this.data.substr(r),a=parseInt(n,10),s.put(a,l*3+1))};var kD=ui;const CD=za,Lm=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function mi(t){this.mode=CD.ALPHANUMERIC,this.data=t}mi.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)};mi.prototype.getLength=function(){return this.data.length};mi.prototype.getBitsLength=function(){return mi.getBitsLength(this.data.length)};mi.prototype.write=function(s){let r;for(r=0;r+2<=this.data.length;r+=2){let n=Lm.indexOf(this.data[r])*45;n+=Lm.indexOf(this.data[r+1]),s.put(n,11)}this.data.length%2&&s.put(Lm.indexOf(this.data[r]),6)};var AD=mi;const DD=za;function hi(t){this.mode=DD.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}hi.getBitsLength=function(s){return s*8};hi.prototype.getLength=function(){return this.data.length};hi.prototype.getBitsLength=function(){return hi.getBitsLength(this.data.length)};hi.prototype.write=function(t){for(let s=0,r=this.data.length;s<r;s++)t.put(this.data[s],8)};var TD=hi;const MD=za,ID=un;function pi(t){this.mode=MD.KANJI,this.data=t}pi.getBitsLength=function(s){return s*13};pi.prototype.getLength=function(){return this.data.length};pi.prototype.getBitsLength=function(){return pi.getBitsLength(this.data.length)};pi.prototype.write=function(t){let s;for(s=0;s<this.data.length;s++){let r=ID.toSJIS(this.data[s]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var LD=pi,w1={exports:{}};(function(t){var s={single_source_shortest_paths:function(r,n,a){var l={},i={};i[n]=0;var o=s.PriorityQueue.make();o.push(n,0);for(var c,d,m,u,p,g,j,y,v;!o.empty();){c=o.pop(),d=c.value,u=c.cost,p=r[d]||{};for(m in p)p.hasOwnProperty(m)&&(g=p[m],j=u+g,y=i[m],v=typeof i[m]>"u",(v||y>j)&&(i[m]=j,o.push(m,j),l[m]=d))}if(typeof a<"u"&&typeof i[a]>"u"){var h=["Could not find a path from ",n," to ",a,"."].join("");throw new Error(h)}return l},extract_shortest_path_from_predecessor_list:function(r,n){for(var a=[],l=n;l;)a.push(l),r[l],l=r[l];return a.reverse(),a},find_path:function(r,n,a){var l=s.single_source_shortest_paths(r,n,a);return s.extract_shortest_path_from_predecessor_list(l,a)},PriorityQueue:{make:function(r){var n=s.PriorityQueue,a={},l;r=r||{};for(l in n)n.hasOwnProperty(l)&&(a[l]=n[l]);return a.queue=[],a.sorter=r.sorter||n.default_sorter,a},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var a={value:r,cost:n};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=s})(w1);var PD=w1.exports;(function(t){const s=za,r=kD,n=AD,a=TD,l=LD,i=Yn,o=un,c=PD;function d(h){return unescape(encodeURIComponent(h)).length}function m(h,f,N){const b=[];let w;for(;(w=h.exec(N))!==null;)b.push({data:w[0],index:w.index,mode:f,length:w[0].length});return b}function u(h){const f=m(i.NUMERIC,s.NUMERIC,h),N=m(i.ALPHANUMERIC,s.ALPHANUMERIC,h);let b,w;return o.isKanjiModeEnabled()?(b=m(i.BYTE,s.BYTE,h),w=m(i.KANJI,s.KANJI,h)):(b=m(i.BYTE_KANJI,s.BYTE,h),w=[]),f.concat(N,b,w).sort(function(S,C){return S.index-C.index}).map(function(S){return{data:S.data,mode:S.mode,length:S.length}})}function p(h,f){switch(f){case s.NUMERIC:return r.getBitsLength(h);case s.ALPHANUMERIC:return n.getBitsLength(h);case s.KANJI:return l.getBitsLength(h);case s.BYTE:return a.getBitsLength(h)}}function g(h){return h.reduce(function(f,N){const b=f.length-1>=0?f[f.length-1]:null;return b&&b.mode===N.mode?(f[f.length-1].data+=N.data,f):(f.push(N),f)},[])}function j(h){const f=[];for(let N=0;N<h.length;N++){const b=h[N];switch(b.mode){case s.NUMERIC:f.push([b,{data:b.data,mode:s.ALPHANUMERIC,length:b.length},{data:b.data,mode:s.BYTE,length:b.length}]);break;case s.ALPHANUMERIC:f.push([b,{data:b.data,mode:s.BYTE,length:b.length}]);break;case s.KANJI:f.push([b,{data:b.data,mode:s.BYTE,length:d(b.data)}]);break;case s.BYTE:f.push([{data:b.data,mode:s.BYTE,length:d(b.data)}])}}return f}function y(h,f){const N={},b={start:{}};let w=["start"];for(let D=0;D<h.length;D++){const S=h[D],C=[];for(let T=0;T<S.length;T++){const _=S[T],E=""+D+T;C.push(E),N[E]={node:_,lastCount:0},b[E]={};for(let A=0;A<w.length;A++){const L=w[A];N[L]&&N[L].node.mode===_.mode?(b[L][E]=p(N[L].lastCount+_.length,_.mode)-p(N[L].lastCount,_.mode),N[L].lastCount+=_.length):(N[L]&&(N[L].lastCount=_.length),b[L][E]=p(_.length,_.mode)+4+s.getCharCountIndicator(_.mode,f))}}w=C}for(let D=0;D<w.length;D++)b[w[D]].end=0;return{map:b,table:N}}function v(h,f){let N;const b=s.getBestModeForData(h);if(N=s.from(f,b),N!==s.BYTE&&N.bit<b.bit)throw new Error('"'+h+'" cannot be encoded with mode '+s.toString(N)+`.
 Suggested mode is: `+s.toString(b));switch(N===s.KANJI&&!o.isKanjiModeEnabled()&&(N=s.BYTE),N){case s.NUMERIC:return new r(h);case s.ALPHANUMERIC:return new n(h);case s.KANJI:return new l(h);case s.BYTE:return new a(h)}}t.fromArray=function(f){return f.reduce(function(N,b){return typeof b=="string"?N.push(v(b,null)):b.data&&N.push(v(b.data,b.mode)),N},[])},t.fromString=function(f,N){const b=u(f,o.isKanjiModeEnabled()),w=j(b),D=y(w,N),S=c.find_path(D.map,"start","end"),C=[];for(let T=1;T<S.length-1;T++)C.push(D.table[S[T]].node);return t.fromArray(g(C))},t.rawSplit=function(f){return t.fromArray(u(f,o.isKanjiModeEnabled()))}})(N1);const Ru=un,Pm=Iu,RD=xD,OD=gD,FD=h1,$D=p1,pp=f1,fp=Lu,UD=bD,Bd=y1,HD=v1,BD=za,Rm=N1;function zD(t,s){const r=t.size,n=$D.getPositions(s);for(let a=0;a<n.length;a++){const l=n[a][0],i=n[a][1];for(let o=-1;o<=7;o++)if(!(l+o<=-1||r<=l+o))for(let c=-1;c<=7;c++)i+c<=-1||r<=i+c||(o>=0&&o<=6&&(c===0||c===6)||c>=0&&c<=6&&(o===0||o===6)||o>=2&&o<=4&&c>=2&&c<=4?t.set(l+o,i+c,!0,!0):t.set(l+o,i+c,!1,!0))}}function WD(t){const s=t.size;for(let r=8;r<s-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function YD(t,s){const r=FD.getPositions(s);for(let n=0;n<r.length;n++){const a=r[n][0],l=r[n][1];for(let i=-2;i<=2;i++)for(let o=-2;o<=2;o++)i===-2||i===2||o===-2||o===2||i===0&&o===0?t.set(a+i,l+o,!0,!0):t.set(a+i,l+o,!1,!0)}}function KD(t,s){const r=t.size,n=Bd.getEncodedBits(s);let a,l,i;for(let o=0;o<18;o++)a=Math.floor(o/3),l=o%3+r-8-3,i=(n>>o&1)===1,t.set(a,l,i,!0),t.set(l,a,i,!0)}function Om(t,s,r){const n=t.size,a=HD.getEncodedBits(s,r);let l,i;for(l=0;l<15;l++)i=(a>>l&1)===1,l<6?t.set(l,8,i,!0):l<8?t.set(l+1,8,i,!0):t.set(n-15+l,8,i,!0),l<8?t.set(8,n-l-1,i,!0):l<9?t.set(8,15-l-1+1,i,!0):t.set(8,15-l-1,i,!0);t.set(n-8,8,1,!0)}function qD(t,s){const r=t.size;let n=-1,a=r-1,l=7,i=0;for(let o=r-1;o>0;o-=2)for(o===6&&o--;;){for(let c=0;c<2;c++)if(!t.isReserved(a,o-c)){let d=!1;i<s.length&&(d=(s[i]>>>l&1)===1),t.set(a,o-c,d),l--,l===-1&&(i++,l=7)}if(a+=n,a<0||r<=a){a-=n,n=-n;break}}}function VD(t,s,r){const n=new RD;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),BD.getCharCountIndicator(c.mode,t)),c.write(n)});const a=Ru.getSymbolTotalCodewords(t),l=fp.getTotalCodewordsCount(t,s),i=(a-l)*8;for(n.getLengthInBits()+4<=i&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const o=(i-n.getLengthInBits())/8;for(let c=0;c<o;c++)n.put(c%2?17:236,8);return GD(n,t,s)}function GD(t,s,r){const n=Ru.getSymbolTotalCodewords(s),a=fp.getTotalCodewordsCount(s,r),l=n-a,i=fp.getBlocksCount(s,r),o=n%i,c=i-o,d=Math.floor(n/i),m=Math.floor(l/i),u=m+1,p=d-m,g=new UD(p);let j=0;const y=new Array(i),v=new Array(i);let h=0;const f=new Uint8Array(t.buffer);for(let S=0;S<i;S++){const C=S<c?m:u;y[S]=f.slice(j,j+C),v[S]=g.encode(y[S]),j+=C,h=Math.max(h,C)}const N=new Uint8Array(n);let b=0,w,D;for(w=0;w<h;w++)for(D=0;D<i;D++)w<y[D].length&&(N[b++]=y[D][w]);for(w=0;w<p;w++)for(D=0;D<i;D++)N[b++]=v[D][w];return N}function QD(t,s,r,n){let a;if(Array.isArray(t))a=Rm.fromArray(t);else if(typeof t=="string"){let d=s;if(!d){const m=Rm.rawSplit(t);d=Bd.getBestVersionForData(m,r)}a=Rm.fromString(t,d||40)}else throw new Error("Invalid data");const l=Bd.getBestVersionForData(a,r);if(!l)throw new Error("The amount of data is too big to be stored in a QR Code");if(!s)s=l;else if(s<l)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+l+`.
`);const i=VD(s,r,a),o=Ru.getSymbolSize(s),c=new OD(o);return zD(c,s),WD(c),YD(c,s),Om(c,r,0),s>=7&&KD(c,s),qD(c,i),isNaN(n)&&(n=pp.getBestMask(c,Om.bind(null,c,r))),pp.applyMask(n,c),Om(c,r,n),{modules:c,version:s,errorCorrectionLevel:r,maskPattern:n,segments:a}}u1.create=function(s,r){if(typeof s>"u"||s==="")throw new Error("No input text");let n=Pm.M,a,l;return typeof r<"u"&&(n=Pm.from(r.errorCorrectionLevel,Pm.M),a=Bd.from(r.version),l=pp.from(r.maskPattern),r.toSJISFunc&&Ru.setToSJISFunction(r.toSJISFunc)),QD(s,a,n,l)};var S1={},Uf={};(function(t){function s(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(l){return[l,l]}))),n.length===6&&n.push("F","F");const a=parseInt(n.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const a=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,l=n.width&&n.width>=21?n.width:void 0,i=n.scale||4;return{width:l,scale:l?4:i,margin:a,color:{dark:s(n.color.dark||"#000000ff"),light:s(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,a){return a.width&&a.width>=n+a.margin*2?a.width/(n+a.margin*2):a.scale},t.getImageWidth=function(n,a){const l=t.getScale(n,a);return Math.floor((n+a.margin*2)*l)},t.qrToImageData=function(n,a,l){const i=a.modules.size,o=a.modules.data,c=t.getScale(i,l),d=Math.floor((i+l.margin*2)*c),m=l.margin*c,u=[l.color.light,l.color.dark];for(let p=0;p<d;p++)for(let g=0;g<d;g++){let j=(p*d+g)*4,y=l.color.light;if(p>=m&&g>=m&&p<d-m&&g<d-m){const v=Math.floor((p-m)/c),h=Math.floor((g-m)/c);y=u[o[v*i+h]?1:0]}n[j++]=y.r,n[j++]=y.g,n[j++]=y.b,n[j]=y.a}}})(Uf);(function(t){const s=Uf;function r(a,l,i){a.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=i,l.width=i,l.style.height=i+"px",l.style.width=i+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(l,i,o){let c=o,d=i;typeof c>"u"&&(!i||!i.getContext)&&(c=i,i=void 0),i||(d=n()),c=s.getOptions(c);const m=s.getImageWidth(l.modules.size,c),u=d.getContext("2d"),p=u.createImageData(m,m);return s.qrToImageData(p.data,l,c),r(u,d,m),u.putImageData(p,0,0),d},t.renderToDataURL=function(l,i,o){let c=o;typeof c>"u"&&(!i||!i.getContext)&&(c=i,i=void 0),c||(c={});const d=t.render(l,i,c),m=c.type||"image/png",u=c.rendererOpts||{};return d.toDataURL(m,u.quality)}})(S1);var _1={};const ZD=Uf;function h0(t,s){const r=t.a/255,n=s+'="'+t.hex+'"';return r<1?n+" "+s+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function Fm(t,s,r){let n=t+s;return typeof r<"u"&&(n+=" "+r),n}function JD(t,s,r){let n="",a=0,l=!1,i=0;for(let o=0;o<t.length;o++){const c=Math.floor(o%s),d=Math.floor(o/s);!c&&!l&&(l=!0),t[o]?(i++,o>0&&c>0&&t[o-1]||(n+=l?Fm("M",c+r,.5+d+r):Fm("m",a,0),a=0,l=!1),c+1<s&&t[o+1]||(n+=Fm("h",i),i=0)):a++}return n}_1.render=function(s,r,n){const a=ZD.getOptions(r),l=s.modules.size,i=s.modules.data,o=l+a.margin*2,c=a.color.light.a?"<path "+h0(a.color.light,"fill")+' d="M0 0h'+o+"v"+o+'H0z"/>':"",d="<path "+h0(a.color.dark,"stroke")+' d="'+JD(i,l,a.margin)+'"/>',m='viewBox="0 0 '+o+" "+o+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+m+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof n=="function"&&n(null,p),p};const XD=pD,xp=u1,E1=S1,eT=_1;function Hf(t,s,r,n,a){const l=[].slice.call(arguments,1),i=l.length,o=typeof l[i-1]=="function";if(!o&&!XD())throw new Error("Callback required as last argument");if(o){if(i<2)throw new Error("Too few arguments provided");i===2?(a=r,r=s,s=n=void 0):i===3&&(s.getContext&&typeof a>"u"?(a=n,n=void 0):(a=n,n=r,r=s,s=void 0))}else{if(i<1)throw new Error("Too few arguments provided");return i===1?(r=s,s=n=void 0):i===2&&!s.getContext&&(n=r,r=s,s=void 0),new Promise(function(c,d){try{const m=xp.create(r,n);c(t(m,s,n))}catch(m){d(m)}})}try{const c=xp.create(r,n);a(null,t(c,s,n))}catch(c){a(c)}}wi.create=xp.create;wi.toCanvas=Hf.bind(null,E1.render);wi.toDataURL=Hf.bind(null,E1.renderToDataURL);wi.toString=Hf.bind(null,function(t,s,r){return eT.render(t,r)});const tT=`
body {
  font-family: Arial, sans-serif;
  background: #fff;
  padding: 20px;
}

table {
  border-collapse: collapse;
  width: 100%;
  box-sizing: border-box;
}

tr:not(:first-child) td {
  border: 1px solid #000;
}

td {
  padding: 8px;
  font-size: 14px;
  vertical-align: middle;
}

.form-info-block {
  font-size: 12px;
  font-weight: bold;
  line-height: 1.2em;
}

.header-container {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  flex-wrap: wrap;
  margin-top: 6px;
  width: 100%;
}

.logo-box {
  margin-left: 200px;
  text-align: center;
  flex-shrink: 0;
}

.logo-box img {
  max-width: 120px;
  max-height: 80px;
  width: 100%;
  height: auto;
  object-fit: contain;
}

.center-group-global {
  text-align: center;
  font-size: 12px;
  font-weight: bold;
  line-height: 1.2em;
  white-space: nowrap;
  flex-grow: 1;
}

.center-group-global .bottom {
  font-size: 11px;
}

.center-group-global .agency {
  font-size: 11px;
  font-style: italic;
}

.extra-line {
  font-size: 11px;
  margin-top: 2px;
  height: 1em;
}

.form-title {
  margin: 8px 0 0;
  font-size: 20px;
  font-weight: bold;
}

.stamp-box {
  border: 1px dashed #000;
  padding: 6px 10px;
  font-size: 12px;
  text-align: center;
  white-space: nowrap;
  flex-shrink: 0;
}

.label {
  font-weight: bold;
  margin-right: 6px;
  white-space: nowrap;
}

input[type="text"],
input[type="date"] {
  padding: 4px;
  font-size: 14px;
  border: 1px solid #ccc;
  background: #f9f9f9;
  box-sizing: border-box;
}

.inline-field {
  display: flex;
  align-items: center;
  gap: 6px;
  width: 100%;
}

.row-three {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 20px;
}

.row-three > div {
  flex: 1;
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: 6px;
}

.small-note {
  font-size: 0.8em;
  color: #555;
  margin-left: 4px;
}

@media print {
  body {
    background: #fff;
    color: #000;
    padding: 0;
    margin: 0;
    font-size: 12pt;
  }

  input[type="text"],
  input[type="date"],
  [contenteditable="true"] {
    border: none;
    border-bottom: 1px solid #000;
    background: transparent;
    color: #000;
    font-size: 12pt;
    padding: 2px 4px;
  }

  input[type="checkbox"] {
    width: 14px;
    height: 14px;
    accent-color: black;
  }

  .print-button {
    display: none !important;
  }

  .logo-box img {
    max-width: 100px;
    max-height: 60px;
  }

  @page {
    size: 8.5in 13in;
    margin: 1cm;
  }
}

.certification-grid {
  width: 50%;
  margin: 12px auto;
  border-collapse: collapse;
  table-layout: fixed;
}

.certification-grid td {
  border: 1px solid #000;
  height: 1.6em;
  padding: 4px;
  vertical-align: top;
}

.approval-table td {
  border: none;
  padding: 4px;
}
`,sT={lguDtrName:"",lguName:"",lguType:"",lguAddress:"",lguHrmo:"",lguMayor:"",logoPreview:"",logo:""},Xs=t=>t==null?"":String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),rT=t=>{if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";const r=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),a=String(s.getDate()).padStart(2,"0");return`${r}-${n}-${a}`},nT=t=>{const s=Number(t);return Number.isNaN(s)?"":s.toLocaleString("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2})},aT=(t,s)=>{const r=(t==null?void 0:t.employee_name)||(t==null?void 0:t.fullname)||(s==null?void 0:s.employee_name)||"";if(!r)return{last:"",first:"",middle:""};const[n,a=""]=r.split(","),l=(n||"").trim(),[i="",o=""]=a.trim().split(/\s+/);return{last:Xs(l),first:Xs(i),middle:Xs(o)}},lT=t=>{const s=((t==null?void 0:t.leave_type_name)||(t==null?void 0:t.leave_type)||"").toLowerCase(),r=((t==null?void 0:t.leavetypecategory)||(t==null?void 0:t.leave_category)||"").toLowerCase(),n=i=>s.includes(i)||r.includes(i),a=String((t==null?void 0:t.leavetypeid)||(t==null?void 0:t.leavetype)||(t==null?void 0:t.leave_type_id)||(t==null?void 0:t.leavecode)||"").toLowerCase(),l=(...i)=>i.some(o=>n(o)||a.includes(o));return{vacation:l("vacation","vl","privilege"),mandatory:l("mandatory","force","forced"),sick:l("sick","sl"),maternity:l("maternity"),paternity:l("paternity"),specialPrivilege:l("special privilege","priv"),soloParent:l("solo parent"),study:l("study"),vawc:l("vawc","violence against women"),rehabilitation:l("rehabilitation","rehab"),specialWomen:l("women","ra 9710"),specialEmergency:l("emergency","special emergency"),adoption:l("adoption")}},iT=["inclusiveDate","inclusive_date","inclusivedate","LeaveDate","Leave_Dates","leaveDate","leavedate","leave_date","deducteddate","deducted_date","deductdate","date","value"],oT=t=>{if(!t)return"";if(typeof t=="string")return t.trim();if(typeof t=="object"){for(const s of iT)if(t[s])return String(t[s]).trim()}return""},k1=t=>{if(!t)return"";const s=t.trim();if(/^\d{4}-\d{2}-\d{2}$/.test(s))return s;if(/^\d{4}-\d{2}-\d{2}\s+\d{2}:\d{2}(:\d{2})?$/.test(s))return s.split(" ")[0];if(/^\d{1,2}\/\d{1,2}\/\d{2,4}$/.test(s)){const[r,n,a]=s.split("/");return`${a.padStart(4,"20")}-${r.padStart(2,"0")}-${n.padStart(2,"0")}`}return s},cT=t=>{if(!t)return"";const s=k1(t),r=new Date(s);return Number.isNaN(r.getTime())?Xs(t):r.toLocaleDateString("en-PH",{year:"numeric",month:"2-digit",day:"2-digit"})},dT=t=>{if(!t)return"";const s=k1(t),r=new Date(s);if(Number.isNaN(r.getTime()))return"";const n=String(r.getMonth()+1).padStart(2,"0"),a=String(r.getDate()).padStart(2,"0"),l=r.getFullYear();return`${n}/${a}/${l}`},p0=t=>{if(t==null||t==="")return"";const s=Number(t);return Number.isNaN(s)?Xs(String(t)):s.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})},f0=(...t)=>{for(const s of t)if(s!=null&&!(typeof s=="string"&&s.trim()===""))return s;return""},uT=t=>{if(!t)return[];const s=t.trim();if(!s)return[];if(s.startsWith("[")&&s.endsWith("]")||s.startsWith("{")&&s.endsWith("}"))try{const r=JSON.parse(s);if(Array.isArray(r))return r;if(r&&typeof r=="object"){if(Array.isArray(r.dates))return r.dates;if(Array.isArray(r.details))return r.details}}catch{}return s.split(/[,;]+/)},mT=t=>{const s=(Array.isArray(t==null?void 0:t.details)&&t.details.length?t.details:null)||(t==null?void 0:t.leave_dates)||(t==null?void 0:t.inclusivedates)||"";if(!s)return"";let r=[];return Array.isArray(s)?r=s:typeof s=="string"?r=uT(s):typeof s=="object"&&(Array.isArray(s.dates)?r=s.dates:Array.isArray(s.details)?r=s.details:r=Object.values(s)),r.map(oT).filter(Boolean).map(cT).join(", ")},hT=t=>t.logoPreview?t.logoPreview:t.logoBase64?t.logoBase64:t.logo?t.logo:"",pT=({company:t,transaction:s,employee:r,qrDataUrl:n})=>{const a=aT(r,s),l=(r==null?void 0:r.department_name)||(r==null?void 0:r.department)||(s==null?void 0:s.department)||(t==null?void 0:t.lguName)||"",i=(r==null?void 0:r.position_title)||(r==null?void 0:r.position)||(s==null?void 0:s.position)||"",o=(r==null?void 0:r.monthly_salary)||(r==null?void 0:r.salary)||(s==null?void 0:s.salary)||"",c=(s==null?void 0:s.leave_type_name)||(s==null?void 0:s.leave_type)||"",d=lT(s),m=mT(s),u=(s==null?void 0:s.deductedcredit)||(s==null?void 0:s.days)||"",p=((s==null?void 0:s.commutation)||"").toLowerCase()==="requested",g=((s==null?void 0:s.status)||"").toLowerCase(),j=(s==null?void 0:s.leavepurpose)||"",y=(s==null?void 0:s.createddate)||(s==null?void 0:s.created_date)||(s==null?void 0:s.datecreated)||(s==null?void 0:s.created_at)||(s==null?void 0:s.deductdate)||(s==null?void 0:s.date_created)||"",v=(s==null?void 0:s.approveddate)||(s==null?void 0:s.approved_date)||(s==null?void 0:s.dateapproved)||(s==null?void 0:s.approvaldate)||"",h=dT(v),f=f0(s==null?void 0:s.vl_balance,s==null?void 0:s.balance_vl,s==null?void 0:s.vlbal,s==null?void 0:s.vl,s==null?void 0:s.VL,r==null?void 0:r.vl_balance,r==null?void 0:r.balance_vl,r==null?void 0:r.vl,r==null?void 0:r.VL),N=f0(s==null?void 0:s.sl_balance,s==null?void 0:s.balance_sl,s==null?void 0:s.slbal,s==null?void 0:s.sl,s==null?void 0:s.SL,r==null?void 0:r.sl_balance,r==null?void 0:r.balance_sl,r==null?void 0:r.sl,r==null?void 0:r.SL),b=p0(f),w=p0(N),D=hT(t),S=(t==null?void 0:t.lguHrmo)||"",C=(t==null?void 0:t.lguMayor)||"",T=n?`<div style="text-align:right;margin-bottom:8px;"><img src="${n}" alt="QR Code" style="width:80px;height:80px;object-fit:contain;" /></div>`:"";return`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CS Form No. 6  Application for Leave</title>
  <style>${tT}</style>
</head>
<body>
  <table>
    <tr>
      <td colspan="3" style="border: none;">
        <div class="form-info-block">
          <div>Civil Service Form No. 6</div>
          <div>Revised 2020</div>
        </div>
        <button class="print-button" onclick="window.print()" style="margin-bottom: 20px;">Print Form</button>
        <div class="header-container">
          <div class="logo-box">
            ${D?`<img src="${D}" alt="Agency Logo" />`:'<div style="font-size:12px;color:#999;">No Logo</div>'}
          </div>
          <div class="center-group-global">
            <div class="top">Republic of the Philippines</div>
            <div class="bottom">${Xs(t.lguDtrName||t.lguName||"")}</div>
            <div class="agency">${Xs(t.lguAddress||t.lguType||"")}</div>
            <div class="extra-line">&nbsp;</div>
            <div class="extra-line">&nbsp;</div>
            <h1 class="form-title">APPLICATION FOR LEAVE</h1>
          </div>
          <div class="stamp-box">Stamp of Date of Receipt</div>
        </div>
        ${T}
      </td>
    </tr>

    <tr>
      <td colspan="3">
        <div style="display:flex; justify-content:space-between; gap:40px;">
          <div style="flex:1;">
            <span class="label">1. OFFICE/DEPARTMENT</span><br />
            <input type="text" value="${Xs(l)}" readonly style="width:100%; text-align:center;" />
          </div>
          <div style="flex:1;">
            <span class="label">2. NAME (Last, First, Middle)</span>
            <div style="display:flex; gap:10px;">
              <input type="text" value="${a.last}" readonly style="flex:1; text-align:center;" />
              <input type="text" value="${a.first}" readonly style="flex:1; text-align:center;" />
              <input type="text" value="${a.middle}" readonly style="flex:1; text-align:center;" />
            </div>
          </div>
        </div>
      </td>
    </tr>

    <tr>
      <td colspan="3">
        <div class="row-three">
          <div class="inline-field">
            <span class="label">3. DATE OF FILING</span>
            <input type="date" value="${rT(y)}" readonly />
          </div>
          <div class="inline-field">
            <span class="label">4. POSITION</span>
            <input type="text" value="${Xs(i)}" readonly />
          </div>
          <div class="inline-field">
            <span class="label">5. SALARY</span>
            <input type="text" value="${Xs(nT(o)||o)}" readonly />
          </div>
        </div>
      </td>
    </tr>

    <tr>
      <td colspan="3" style="text-align:center;font-weight:bold;">6. DETAILS OF APPLICATION</td>
    </tr>

    <tr>
      <td style="width: 56.5%; vertical-align: top;">
        <div style="padding-left:5px;">
          <span class="label">6.A TYPE OF LEAVE TO BE AVAILED OF</span>
          <div style="height:8px;"></div>
          <div style="display:flex;flex-direction:column;gap:6px;">
            <label><input type="checkbox" ${d.vacation?"checked":""} /> Vacation Leave <span class="small-note">(Sec. 51, Rule XVI, Omnibus Rules Implementing E.O. No. 292)</span></label>
            <label><input type="checkbox" ${d.mandatory?"checked":""} /> Mandatory/Forced Leave <span class="small-note">(Sec. 25, Rule XVI, Omnibus Rules Implementing E.O. No. 292)</span></label>
            <label><input type="checkbox" ${d.sick?"checked":""} /> Sick Leave <span class="small-note">(Sec. 43, Rule XVI, Omnibus Rules Implementing E.O. No. 292)</span></label>
            <label><input type="checkbox" ${d.maternity?"checked":""} /> Maternity Leave <span class="small-note">(R.A. No. 11210 / IRR issued by CSC, DOLE and SSS)</span></label>
            <label><input type="checkbox" ${d.paternity?"checked":""} /> Paternity Leave <span class="small-note">(R.A. No. 8187 / CSC MC No. 71, s. 1998, as amended)</span></label>
            <label><input type="checkbox" ${d.specialPrivilege?"checked":""} /> Special Privilege Leave <span class="small-note">(Sec. 21, Rule XVI, Omnibus Rules Implementing E.O. No. 292)</span></label>
            <label><input type="checkbox" ${d.soloParent?"checked":""} /> Solo Parent Leave <span class="small-note">(RA No. 8972 / CSC MC No. 8, s. 2004)</span></label>
            <label><input type="checkbox" ${d.study?"checked":""} /> Study Leave <span class="small-note">(Sec. 68, Rule XVI, Omnibus Rules Implementing E.O. No. 292)</span></label>
            <label><input type="checkbox" ${d.vawc?"checked":""} /> 10-Day VAWC Leave <span class="small-note">(RA No. 9262 / CSC MC No. 15, s. 2005)</span></label>
            <label><input type="checkbox" ${d.rehabilitation?"checked":""} /> Rehabilitation Leave <span class="small-note">(Sec. 55, Rule XVI, Omnibus Rules Implementing E.O. No. 292)</span></label>
            <label><input type="checkbox" ${d.specialWomen?"checked":""} /> Special Leave Benefits for Women <span class="small-note">(RA No. 9710 / CSC MC No. 25, s. 2010)</span></label>
            <label><input type="checkbox" ${d.specialEmergency?"checked":""} /> Special Emergency <span class="small-note">(CSC MC No. 2, s. 2012, as amended)</span></label>
            <label><input type="checkbox" ${d.adoption?"checked":""} /> Adoption Leave <span class="small-note">(R.A. No. 8552)</span></label>
            <div style="margin-top:10px;">
              <span class="label">Others:</span>
              <div contenteditable="true" role="textbox" style="border-bottom:1px solid #000;min-height:1em;padding:4px 2px;background:#fff;">${Object.values(d).some(Boolean)?"":Xs(c)}</div>
            </div>
          </div>
        </div>
      </td>
      <td style="width:43.5%;vertical-align:top;">
        <div style="padding-left:0;">
          <span class="label">6.B DETAILS OF LEAVE</span>
          <div style="height:12px;"></div>
          <span class="label">In case of Vacation/Special Privilege Leave:</span>
          <div style="display:flex;flex-direction:column;gap:6px;margin-top:5px;">
            <label style="display:flex;align-items:flex-start;gap:8px;"><input type="checkbox" /> <span>In the morning only</span></label>
            <label style="display:flex;align-items:flex-start;gap:8px;"><input type="checkbox" /> <span>Whole day</span></label>
          </div>
          <span class="label" style="margin-top:8px;display:block;">In case of Sick Leave:</span>
          <div style="display:flex;flex-direction:column;gap:6px;margin-top:4px;">
            <label style="display:flex;align-items:flex-start;gap:8px;"><input type="checkbox" /> <span>In Hospital (Specify Illness)</span></label>
            <div contenteditable="true" style="padding:4px 6px;background:repeating-linear-gradient(to bottom,transparent 0px,transparent 1.8em,#000 1.8em,#000 1.9em);line-height:1.8em;min-height:1.8em;">${Xs(j)}</div>
            <label style="display:flex;align-items:flex-start;gap:8px;"><input type="checkbox" /> <span>Out Patient (Specify Illness)</span></label>
            <div contenteditable="true" style="padding:4px 6px;background:repeating-linear-gradient(to bottom,transparent 0px,transparent 1.8em,#000 1.8em,#000 1.9em);line-height:1.8em;min-height:1.8em;"></div>
          </div>
          <span class="label" style="margin-top:8px;display:block;">In case of Special Leave Benefits for Women:</span>
          <div contenteditable="true" style="padding:4px 6px;background:repeating-linear-gradient(to bottom,transparent 0px,transparent 1.8em,#000 1.8em,#000 1.9em);line-height:1.8em;min-height:1.8em;"></div>
          <div style="height:8px;"></div>
          <label><input type="checkbox" /> Completion of Master's Degree</label>
          <label><input type="checkbox" /> BAR/Board Examination Review</label>
          <span class="label" style="margin-top:6px;display:block;">Other purpose:</span>
          <div contenteditable="true" style="padding:4px 6px;background:repeating-linear-gradient(to bottom,transparent 0px,transparent 1.8em,#000 1.8em,#000 1.9em);line-height:1.8em;min-height:1.8em;">${Xs(j)}</div>
          <label style="margin-top:10px;"><input type="checkbox" /> Monetization of Leave Credits</label>
          <label><input type="checkbox" /> Terminal Leave</label>
        </div>
      </td>
    </tr>

    <tr>
      <td style="width:56.5%;vertical-align:top;">
        <div style="padding-left:5px;">
          <span class="label" style="display:block;margin-bottom:6px;">6.C NUMBER OF WORKING DAYS APPLIED FOR</span>
          <div contenteditable="true" style="padding:4px 6px;background:repeating-linear-gradient(to bottom,transparent 0px,transparent 1.6em,#000 1.6em,#000 1.7em);line-height:1.6em;min-height:1.6em;">${Xs(u)}</div>
          <span class="label" style="display:block;margin:8px 0 4px;">INCLUSIVE DATES:</span>
          <div contenteditable="true" style="padding:4px 6px;background:repeating-linear-gradient(to bottom,transparent 0px,transparent 1.6em,#000 1.6em,#000 1.7em);line-height:1.6em;min-height:1.6em;">${Xs(m)}</div>
        </div>
      </td>
      <td style="width:43.5%;vertical-align:top;">
        <div style="padding-left:0;">
          <span class="label">6.D COMMUTATION</span>
          <div style="display:flex;flex-direction:column;gap:6px;margin-top:6px;">
            <label><input type="checkbox" ${p?"":"checked"} /> Not Requested</label>
            <label><input type="checkbox" ${p?"checked":""} /> Requested</label>
          </div>
          <div style="margin-top:16px;text-align:center;">
            <div contenteditable="true" style="display:inline-block;width:60%;height:1.8em;padding:2px 4px;line-height:1.8em;background:#fff;border-bottom:1px solid #000;white-space:nowrap;overflow:hidden;">${Xs(a.first?`${a.first} ${a.middle} ${a.last}`.trim():"")}</div>
            <div style="font-size:12px;margin-top:4px;">(Signature over printed name)</div>
          </div>
        </div>
      </td>
    </tr>

    <tr>
      <td colspan="3" style="text-align:center;font-weight:bold;">7. DETAILS OF ACTION ON APPLICATION</td>
    </tr>

    <tr>
      <td style="width:56.5%;vertical-align:top;">
        <div style="padding-left:5px;">
          <span class="label">7.A CERTIFICATION OF LEAVE CREDITS</span>
        </div>
        <div style="text-align:center;margin-top:8px;">
          <span style="font-weight:bold;">As of</span>
          <div contenteditable="true" style="display:inline-block;width:140px;height:1.8em;margin-left:6px;border-bottom:1px solid #000;line-height:1.8em;text-align:center;">
            ${Xs(h)}
          </div>
        </div>
        <table class="certification-grid">
          <tr>
            <td></td>
            <td>Vacation Leave</td>
            <td>Sick Leave</td>
          </tr>
          <tr>
            <td>Total Earned</td>
            <td contenteditable="true">${Xs(b)}</td>
            <td contenteditable="true">${Xs(w)}</td>
          </tr>
          <tr>
            <td>Less this application</td>
            <td contenteditable="true"></td>
            <td contenteditable="true"></td>
          </tr>
          <tr>
            <td>Balance</td>
            <td contenteditable="true"></td>
            <td contenteditable="true"></td>
          </tr>
        </table>
        <div style="margin-top:16px;text-align:center;">
          <div contenteditable="true" style="display:inline-block;width:60%;height:1.8em;padding:2px 4px;line-height:1.8em;background:#fff;border-bottom:1px solid #000;">
            ${Xs(S)}
          </div>
          <div style="font-size:12px;margin-top:4px;">(Signature over printed name)</div>
        </div>
      </td>
      <td style="width:43.5%;vertical-align:top;">
        <div style="padding-left:0;">
          <span class="label">7.B RECOMMENDATION</span>
        </div>
        <div style="display:flex;flex-direction:column;gap:6px;margin-top:6px;">
          <label><input type="checkbox" ${g==="approved"||g==="for approval"?"checked":""} /> For approval</label>
          <label style="display:flex;align-items:flex-start;gap:6px;">
            <span style="white-space:nowrap;"><input type="checkbox" ${g==="returned"||g==="cancelled"?"checked":""} /> For disapproval due to</span>
            <div contenteditable="true" style="flex-grow:1;min-height:4em;padding:0 6px;border:none;background-image:repeating-linear-gradient(to bottom,#000 0px,#000 1px,transparent 1px,transparent 1.4em);line-height:1.4em;font-size:14px;white-space:pre-wrap;word-break:break-word;"></div>
          </label>
        </div>
        <div style="margin-top:48px;text-align:center;">
          <div contenteditable="true" style="display:inline-block;width:60%;height:1.8em;padding:2px 4px;line-height:1.8em;background:#fff;border-bottom:1px solid #000;"></div>
          <div style="font-size:12px;margin-top:4px;">(Signature over printed name)</div>
        </div>
      </td>
    </tr>

    <tr>
      <td colspan="3" style="padding:12px 8px;">
        <div style="display:flex;justify-content:space-between;gap:40px;font-weight:bold;font-size:14px;">
          <span>7.C APPROVED FOR:</span>
          <span>7.D DISAPPROVED DUE TO:</span>
        </div>
        <div style="display:flex;justify-content:space-between;gap:12px;margin-top:6px;">
          <div style="flex:1;">
            <div style="display:flex;align-items:center;gap:8px;margin-bottom:6px;">
              <div contenteditable="true" style="width:20%;height:1.4em;border-bottom:1px solid #000;"></div>
              <span>days with pay</span>
            </div>
            <div style="display:flex;align-items:center;gap:8px;margin-bottom:6px;">
              <div contenteditable="true" style="width:20%;height:1.4em;border-bottom:1px solid #000;"></div>
              <span>days without pay</span>
            </div>
            <div style="display:flex;align-items:center;gap:8px;">
              <div contenteditable="true" style="width:20%;height:1.4em;border-bottom:1px solid #000;"></div>
              <span>others (specify)</span>
            </div>
          </div>
          <div style="flex:1;">
            <div contenteditable="true" style="width:100%;height:4.5em;border-bottom:1px solid #000;"></div>
          </div>
        </div>
        <div style="margin-top:24px;text-align:center;">
          <div contenteditable="true" style="display:inline-block;width:60%;height:1.8em;padding:2px 4px;line-height:1.8em;background:#fff;border-bottom:1px solid #000;">
            ${Xs(C)}
          </div>
          <div style="font-size:12px;margin-top:4px;">(Authorized Official)</div>
        </div>
      </td>
    </tr>
  </table>
</body>
</html>`},fT=async t=>{var s;if(!t)return null;try{const r=await oe.get("/employee-designations",{params:{status:"active",search:""}});return(((s=r==null?void 0:r.data)==null?void 0:s.data)||[]).find(a=>String(a.emp_objid)===String(t)&&Number(a.ispresent)===1)||null}catch(r){return console.error("Failed to fetch designation for leave print:",r),null}},xT=(t,s)=>!t||!s?t:{...t,position_title:s.position||t.position_title||t.position,salary:s.salary??t.salary??t.rate??t.monthly_salary??t.SALARY,__designationLoaded:!0},C1=async(t,s)=>{if(!t)return null;if(t.__designationLoaded)return t;const r=t.objid||t.emp_objid||(s==null?void 0:s.emp_objid);if(!r)return t;const n=await fT(r);return xT(t,n)},gT=async t=>{var s;if(!(t!=null&&t.emp_objid))return null;try{const r=await oe.get("/201-employees"),a=(((s=r==null?void 0:r.data)==null?void 0:s.data)||[]).find(l=>String(l.objid)===String(t.emp_objid))||null;return a?await C1(a,t):null}catch(r){return console.error("Failed to fetch employees for leave print:",r),null}},gp=async(t,s=null)=>{var o;if(!t){console.warn("openLeavePrintWindow called without transaction");return}let r={...sT};try{const c=await oe.get("/company/info");(o=c==null?void 0:c.data)!=null&&o.success&&c.data.data&&(r={...r,...c.data.data})}catch(c){console.error("Failed to fetch company info for leave print:",c)}let n=s;n=n||await gT(t),n=await C1(n,t);let a="";if(t!=null&&t.leaveno)try{a=await wi.toDataURL(String(t.leaveno),{width:256,margin:1})}catch(c){console.error("Failed to generate QR code for leave print:",c)}const l=pT({company:r,transaction:t,employee:n,qrDataUrl:a}),i=window.open("","_blank","width=900,height=1100");if(!i){alert("Pop-up blocked. Please allow pop-ups to print.");return}i.document.open(),i.document.write(l),i.document.close(),i.onload=()=>{try{i.focus(),i.print()}catch(c){console.error("Failed to print leave application:",c)}}},yT=()=>{const{user:t}=Ts(),[s,r]=x.useState([]),[n,a]=x.useState(!0),[l,i]=x.useState(null),[o,c]=x.useState(null),[d,m]=x.useState(!1),[u,p]=x.useState(!1),[g,j]=x.useState(null),[y,v]=x.useState(!1),[h,f]=x.useState(!1),[N,b]=x.useState(!0),[w,D]=x.useState(""),[S,C]=x.useState(!0);x.useEffect(()=>{_(),T()},[t]);const T=async()=>{C(!0);try{const F=(t==null?void 0:t.USERID)||(t==null?void 0:t.userid);try{await oe.get("/pds-dtrchecker/me"),v(!0)}catch{v(!1)}const q=(await oe.get("/201-employees")).data.data.find(J=>J.dtruserid===F);if(q){j(q);try{const J=await oe.get(`/employee-leave-records/${q.objid}`);f(J.data&&J.data.success===!0&&J.data.leaveRecord)}catch{f(!1)}}try{const J=await oe.get("/employee-leave-records/eligibility/current");b(J.data.canApplyLeave||!1),D(J.data.reason||"")}catch(J){console.error("Error checking leave eligibility:",J),b(!1),D("Unable to verify leave eligibility. Please contact HR.")}}catch(F){console.error("Error checking eligibility:",F)}finally{C(!1)}},_=async()=>{try{a(!0),i(null);const F=(t==null?void 0:t.USERID)||(t==null?void 0:t.userid);if(!F)throw new Error("User ID not found");const q=(await oe.get("/201-employees")).data.data.find(O=>O.dtruserid===F);if(!q)throw new Error("Employee record not found");j(q);const J=await oe.get(`/employee-leave-transactions/${q.objid}`);r(J.data)}catch(F){i(F.message)}finally{a(!1)}},E=F=>{c(F),m(!0)},A=()=>{m(!1),c(null)},L=()=>{_()};return n?e.jsx(bT,{}):l?e.jsx(vT,{message:l}):e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"My Leave Transactions"}),e.jsxs("button",{onClick:()=>p(!0),disabled:!y||!h||!N||S,className:`px-4 py-2 rounded-lg transition-colors flex items-center space-x-2 ${!y||!h||!N||S?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"}`,title:y?h?N?"Apply for leave":w||"You are not authorized to apply for leave. Contact HR for more information.":"No leave credits found. Contact HR.":"Please complete your PDS first",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{children:"Apply Leave"})]})]}),!S&&(!y||!h||!N)&&e.jsx("div",{className:"mx-6 mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Action Required"}),e.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[!y&&e.jsxs("p",{className:"mb-2",children:["You must complete your Personal Data Sheet (PDS) before applying for leave. Please go to the ",e.jsx("strong",{children:'"My PDS"'})," tab to fill out your information."]}),!h&&e.jsx("p",{className:"mb-2",children:"No leave credits found in the system. Please contact HR to update your leave credit records."}),!N&&e.jsx("p",{children:w||"You are not authorized to apply for leave. Please contact HR for more information."})]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No."}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Leave Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Leave Dates"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Purpose"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created By"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((F,W)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:W+1}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:F.leave_type_name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:F.leave_dates?e.jsx("div",{className:"flex flex-wrap gap-1",children:F.leave_dates.split(", ").map((Y,q)=>e.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:new Date(Y).toLocaleDateString()},q))}):e.jsx("span",{className:"text-gray-400",children:"No dates"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:F.leavepurpose}),e.jsx("td",{className:"px-6 py-4",children:F.isportal===1?e.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"Portal"}):F.created_by_photo_path?e.jsx("img",{src:F.created_by_photo_path,alt:"Creator",className:"w-8 h-8 rounded-full"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-gray-600",children:"N/A"})})}),e.jsx("td",{className:"px-6 py-4",children:(()=>{const Y=F.status||F.leavestatus||F.LeaveStatus||F.LEAVESTATUS||"Unknown",q=Y.toLowerCase();return e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${q==="approved"?"bg-green-100 text-green-800":q==="for approval"?"bg-yellow-100 text-yellow-800":q==="returned"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:Y})})()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{const q=(F.status||F.leavestatus||F.LeaveStatus||F.LEAVESTATUS||"").toLowerCase(),J=q==="for approval"||q==="returned",O=Number(F.isportal)===1,M=q==="approved"||q==="cancelled",k=[];return J&&O&&k.push(e.jsx("button",{onClick:()=>E(F),className:"text-indigo-600 hover:text-indigo-900",title:"Edit",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})},"edit")),M&&k.push(e.jsx("button",{onClick:()=>{c(F),m(!0)},className:"text-gray-600 hover:text-gray-800",title:"View",children:""},"view")),k})(),e.jsx("button",{onClick:()=>gp(F,g||{employee_name:F.employee_name||(t==null?void 0:t.NAME),emp_objid:F.emp_objid,department_name:F.department_name||(selectedEmployee==null?void 0:selectedEmployee.department_name),position_title:F.position_title||(selectedEmployee==null?void 0:selectedEmployee.position_title),salary:F.salary||(selectedEmployee==null?void 0:selectedEmployee.salary)}),className:"text-green-600 hover:text-green-800 transition-colors",title:"Print Leave Application",children:""})]})})]},F.objid))})]})}),s.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No leave transactions found."})}),e.jsx(d4,{isOpen:d,onClose:A,transaction:o,onSave:L,readonly:o&&(o.status==="Approved"||o.status==="Cancelled"||o.leavestatus==="Approved"||o.leavestatus==="Cancelled")}),u&&e.jsx(hD,{onClose:()=>p(!1),onSuccess:()=>{p(!1),_()}})]})},bT=()=>e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}),vT=({message:t})=>e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg",children:[e.jsx("p",{className:"font-semibold",children:"Error:"}),e.jsx("p",{children:t})]});function jT(){this.__data__=[],this.size=0}var NT=jT;function wT(t,s){return t===s||t!==t&&s!==s}var A1=wT,ST=A1;function _T(t,s){for(var r=t.length;r--;)if(ST(t[r][0],s))return r;return-1}var Ou=_T,ET=Ou,kT=Array.prototype,CT=kT.splice;function AT(t){var s=this.__data__,r=ET(s,t);if(r<0)return!1;var n=s.length-1;return r==n?s.pop():CT.call(s,r,1),--this.size,!0}var DT=AT,TT=Ou;function MT(t){var s=this.__data__,r=TT(s,t);return r<0?void 0:s[r][1]}var IT=MT,LT=Ou;function PT(t){return LT(this.__data__,t)>-1}var RT=PT,OT=Ou;function FT(t,s){var r=this.__data__,n=OT(r,t);return n<0?(++this.size,r.push([t,s])):r[n][1]=s,this}var $T=FT,UT=NT,HT=DT,BT=IT,zT=RT,WT=$T;function Si(t){var s=-1,r=t==null?0:t.length;for(this.clear();++s<r;){var n=t[s];this.set(n[0],n[1])}}Si.prototype.clear=UT;Si.prototype.delete=HT;Si.prototype.get=BT;Si.prototype.has=zT;Si.prototype.set=WT;var Fu=Si,YT=Fu;function KT(){this.__data__=new YT,this.size=0}var qT=KT;function VT(t){var s=this.__data__,r=s.delete(t);return this.size=s.size,r}var GT=VT;function QT(t){return this.__data__.get(t)}var ZT=QT;function JT(t){return this.__data__.has(t)}var XT=JT,e5=typeof rn=="object"&&rn&&rn.Object===Object&&rn,D1=e5,t5=D1,s5=typeof self=="object"&&self&&self.Object===Object&&self,r5=t5||s5||Function("return this")(),oa=r5,n5=oa,a5=n5.Symbol,Bf=a5,x0=Bf,T1=Object.prototype,l5=T1.hasOwnProperty,i5=T1.toString,Yi=x0?x0.toStringTag:void 0;function o5(t){var s=l5.call(t,Yi),r=t[Yi];try{t[Yi]=void 0;var n=!0}catch{}var a=i5.call(t);return n&&(s?t[Yi]=r:delete t[Yi]),a}var c5=o5,d5=Object.prototype,u5=d5.toString;function m5(t){return u5.call(t)}var h5=m5,g0=Bf,p5=c5,f5=h5,x5="[object Null]",g5="[object Undefined]",y0=g0?g0.toStringTag:void 0;function y5(t){return t==null?t===void 0?g5:x5:y0&&y0 in Object(t)?p5(t):f5(t)}var $u=y5;function b5(t){var s=typeof t;return t!=null&&(s=="object"||s=="function")}var M1=b5,v5=$u,j5=M1,N5="[object AsyncFunction]",w5="[object Function]",S5="[object GeneratorFunction]",_5="[object Proxy]";function E5(t){if(!j5(t))return!1;var s=v5(t);return s==w5||s==S5||s==N5||s==_5}var I1=E5,k5=oa,C5=k5["__core-js_shared__"],A5=C5,$m=A5,b0=function(){var t=/[^.]+$/.exec($m&&$m.keys&&$m.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function D5(t){return!!b0&&b0 in t}var T5=D5,M5=Function.prototype,I5=M5.toString;function L5(t){if(t!=null){try{return I5.call(t)}catch{}try{return t+""}catch{}}return""}var L1=L5,P5=I1,R5=T5,O5=M1,F5=L1,$5=/[\\^$.*+?()[\]{}|]/g,U5=/^\[object .+?Constructor\]$/,H5=Function.prototype,B5=Object.prototype,z5=H5.toString,W5=B5.hasOwnProperty,Y5=RegExp("^"+z5.call(W5).replace($5,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function K5(t){if(!O5(t)||R5(t))return!1;var s=P5(t)?Y5:U5;return s.test(F5(t))}var q5=K5;function V5(t,s){return t==null?void 0:t[s]}var G5=V5,Q5=q5,Z5=G5;function J5(t,s){var r=Z5(t,s);return Q5(r)?r:void 0}var _i=J5,X5=_i,e6=oa,t6=X5(e6,"Map"),zf=t6,s6=_i,r6=s6(Object,"create"),Uu=r6,v0=Uu;function n6(){this.__data__=v0?v0(null):{},this.size=0}var a6=n6;function l6(t){var s=this.has(t)&&delete this.__data__[t];return this.size-=s?1:0,s}var i6=l6,o6=Uu,c6="__lodash_hash_undefined__",d6=Object.prototype,u6=d6.hasOwnProperty;function m6(t){var s=this.__data__;if(o6){var r=s[t];return r===c6?void 0:r}return u6.call(s,t)?s[t]:void 0}var h6=m6,p6=Uu,f6=Object.prototype,x6=f6.hasOwnProperty;function g6(t){var s=this.__data__;return p6?s[t]!==void 0:x6.call(s,t)}var y6=g6,b6=Uu,v6="__lodash_hash_undefined__";function j6(t,s){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=b6&&s===void 0?v6:s,this}var N6=j6,w6=a6,S6=i6,_6=h6,E6=y6,k6=N6;function Ei(t){var s=-1,r=t==null?0:t.length;for(this.clear();++s<r;){var n=t[s];this.set(n[0],n[1])}}Ei.prototype.clear=w6;Ei.prototype.delete=S6;Ei.prototype.get=_6;Ei.prototype.has=E6;Ei.prototype.set=k6;var C6=Ei,j0=C6,A6=Fu,D6=zf;function T6(){this.size=0,this.__data__={hash:new j0,map:new(D6||A6),string:new j0}}var M6=T6;function I6(t){var s=typeof t;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?t!=="__proto__":t===null}var L6=I6,P6=L6;function R6(t,s){var r=t.__data__;return P6(s)?r[typeof s=="string"?"string":"hash"]:r.map}var Hu=R6,O6=Hu;function F6(t){var s=O6(this,t).delete(t);return this.size-=s?1:0,s}var $6=F6,U6=Hu;function H6(t){return U6(this,t).get(t)}var B6=H6,z6=Hu;function W6(t){return z6(this,t).has(t)}var Y6=W6,K6=Hu;function q6(t,s){var r=K6(this,t),n=r.size;return r.set(t,s),this.size+=r.size==n?0:1,this}var V6=q6,G6=M6,Q6=$6,Z6=B6,J6=Y6,X6=V6;function ki(t){var s=-1,r=t==null?0:t.length;for(this.clear();++s<r;){var n=t[s];this.set(n[0],n[1])}}ki.prototype.clear=G6;ki.prototype.delete=Q6;ki.prototype.get=Z6;ki.prototype.has=J6;ki.prototype.set=X6;var P1=ki,eM=Fu,tM=zf,sM=P1,rM=200;function nM(t,s){var r=this.__data__;if(r instanceof eM){var n=r.__data__;if(!tM||n.length<rM-1)return n.push([t,s]),this.size=++r.size,this;r=this.__data__=new sM(n)}return r.set(t,s),this.size=r.size,this}var aM=nM,lM=Fu,iM=qT,oM=GT,cM=ZT,dM=XT,uM=aM;function Ci(t){var s=this.__data__=new lM(t);this.size=s.size}Ci.prototype.clear=iM;Ci.prototype.delete=oM;Ci.prototype.get=cM;Ci.prototype.has=dM;Ci.prototype.set=uM;var mM=Ci,hM="__lodash_hash_undefined__";function pM(t){return this.__data__.set(t,hM),this}var fM=pM;function xM(t){return this.__data__.has(t)}var gM=xM,yM=P1,bM=fM,vM=gM;function zd(t){var s=-1,r=t==null?0:t.length;for(this.__data__=new yM;++s<r;)this.add(t[s])}zd.prototype.add=zd.prototype.push=bM;zd.prototype.has=vM;var jM=zd;function NM(t,s){for(var r=-1,n=t==null?0:t.length;++r<n;)if(s(t[r],r,t))return!0;return!1}var wM=NM;function SM(t,s){return t.has(s)}var _M=SM,EM=jM,kM=wM,CM=_M,AM=1,DM=2;function TM(t,s,r,n,a,l){var i=r&AM,o=t.length,c=s.length;if(o!=c&&!(i&&c>o))return!1;var d=l.get(t),m=l.get(s);if(d&&m)return d==s&&m==t;var u=-1,p=!0,g=r&DM?new EM:void 0;for(l.set(t,s),l.set(s,t);++u<o;){var j=t[u],y=s[u];if(n)var v=i?n(y,j,u,s,t,l):n(j,y,u,t,s,l);if(v!==void 0){if(v)continue;p=!1;break}if(g){if(!kM(s,function(h,f){if(!CM(g,f)&&(j===h||a(j,h,r,n,l)))return g.push(f)})){p=!1;break}}else if(!(j===y||a(j,y,r,n,l))){p=!1;break}}return l.delete(t),l.delete(s),p}var R1=TM,MM=oa,IM=MM.Uint8Array,LM=IM;function PM(t){var s=-1,r=Array(t.size);return t.forEach(function(n,a){r[++s]=[a,n]}),r}var RM=PM;function OM(t){var s=-1,r=Array(t.size);return t.forEach(function(n){r[++s]=n}),r}var FM=OM,N0=Bf,w0=LM,$M=A1,UM=R1,HM=RM,BM=FM,zM=1,WM=2,YM="[object Boolean]",KM="[object Date]",qM="[object Error]",VM="[object Map]",GM="[object Number]",QM="[object RegExp]",ZM="[object Set]",JM="[object String]",XM="[object Symbol]",eI="[object ArrayBuffer]",tI="[object DataView]",S0=N0?N0.prototype:void 0,Um=S0?S0.valueOf:void 0;function sI(t,s,r,n,a,l,i){switch(r){case tI:if(t.byteLength!=s.byteLength||t.byteOffset!=s.byteOffset)return!1;t=t.buffer,s=s.buffer;case eI:return!(t.byteLength!=s.byteLength||!l(new w0(t),new w0(s)));case YM:case KM:case GM:return $M(+t,+s);case qM:return t.name==s.name&&t.message==s.message;case QM:case JM:return t==s+"";case VM:var o=HM;case ZM:var c=n&zM;if(o||(o=BM),t.size!=s.size&&!c)return!1;var d=i.get(t);if(d)return d==s;n|=WM,i.set(t,s);var m=UM(o(t),o(s),n,a,l,i);return i.delete(t),m;case XM:if(Um)return Um.call(t)==Um.call(s)}return!1}var rI=sI;function nI(t,s){for(var r=-1,n=s.length,a=t.length;++r<n;)t[a+r]=s[r];return t}var aI=nI,lI=Array.isArray,Wf=lI,iI=aI,oI=Wf;function cI(t,s,r){var n=s(t);return oI(t)?n:iI(n,r(t))}var dI=cI;function uI(t,s){for(var r=-1,n=t==null?0:t.length,a=0,l=[];++r<n;){var i=t[r];s(i,r,t)&&(l[a++]=i)}return l}var mI=uI;function hI(){return[]}var pI=hI,fI=mI,xI=pI,gI=Object.prototype,yI=gI.propertyIsEnumerable,_0=Object.getOwnPropertySymbols,bI=_0?function(t){return t==null?[]:(t=Object(t),fI(_0(t),function(s){return yI.call(t,s)}))}:xI,vI=bI;function jI(t,s){for(var r=-1,n=Array(t);++r<t;)n[r]=s(r);return n}var NI=jI;function wI(t){return t!=null&&typeof t=="object"}var Bu=wI,SI=$u,_I=Bu,EI="[object Arguments]";function kI(t){return _I(t)&&SI(t)==EI}var CI=kI,E0=CI,AI=Bu,O1=Object.prototype,DI=O1.hasOwnProperty,TI=O1.propertyIsEnumerable,MI=E0(function(){return arguments}())?E0:function(t){return AI(t)&&DI.call(t,"callee")&&!TI.call(t,"callee")},II=MI,Wd={exports:{}};function LI(){return!1}var PI=LI;Wd.exports;(function(t,s){var r=oa,n=PI,a=s&&!s.nodeType&&s,l=a&&!0&&t&&!t.nodeType&&t,i=l&&l.exports===a,o=i?r.Buffer:void 0,c=o?o.isBuffer:void 0,d=c||n;t.exports=d})(Wd,Wd.exports);var F1=Wd.exports,RI=9007199254740991,OI=/^(?:0|[1-9]\d*)$/;function FI(t,s){var r=typeof t;return s=s??RI,!!s&&(r=="number"||r!="symbol"&&OI.test(t))&&t>-1&&t%1==0&&t<s}var $I=FI,UI=9007199254740991;function HI(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=UI}var $1=HI,BI=$u,zI=$1,WI=Bu,YI="[object Arguments]",KI="[object Array]",qI="[object Boolean]",VI="[object Date]",GI="[object Error]",QI="[object Function]",ZI="[object Map]",JI="[object Number]",XI="[object Object]",eL="[object RegExp]",tL="[object Set]",sL="[object String]",rL="[object WeakMap]",nL="[object ArrayBuffer]",aL="[object DataView]",lL="[object Float32Array]",iL="[object Float64Array]",oL="[object Int8Array]",cL="[object Int16Array]",dL="[object Int32Array]",uL="[object Uint8Array]",mL="[object Uint8ClampedArray]",hL="[object Uint16Array]",pL="[object Uint32Array]",Ls={};Ls[lL]=Ls[iL]=Ls[oL]=Ls[cL]=Ls[dL]=Ls[uL]=Ls[mL]=Ls[hL]=Ls[pL]=!0;Ls[YI]=Ls[KI]=Ls[nL]=Ls[qI]=Ls[aL]=Ls[VI]=Ls[GI]=Ls[QI]=Ls[ZI]=Ls[JI]=Ls[XI]=Ls[eL]=Ls[tL]=Ls[sL]=Ls[rL]=!1;function fL(t){return WI(t)&&zI(t.length)&&!!Ls[BI(t)]}var xL=fL;function gL(t){return function(s){return t(s)}}var yL=gL,Yd={exports:{}};Yd.exports;(function(t,s){var r=D1,n=s&&!s.nodeType&&s,a=n&&!0&&t&&!t.nodeType&&t,l=a&&a.exports===n,i=l&&r.process,o=function(){try{var c=a&&a.require&&a.require("util").types;return c||i&&i.binding&&i.binding("util")}catch{}}();t.exports=o})(Yd,Yd.exports);var bL=Yd.exports,vL=xL,jL=yL,k0=bL,C0=k0&&k0.isTypedArray,NL=C0?jL(C0):vL,U1=NL,wL=NI,SL=II,_L=Wf,EL=F1,kL=$I,CL=U1,AL=Object.prototype,DL=AL.hasOwnProperty;function TL(t,s){var r=_L(t),n=!r&&SL(t),a=!r&&!n&&EL(t),l=!r&&!n&&!a&&CL(t),i=r||n||a||l,o=i?wL(t.length,String):[],c=o.length;for(var d in t)(s||DL.call(t,d))&&!(i&&(d=="length"||a&&(d=="offset"||d=="parent")||l&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||kL(d,c)))&&o.push(d);return o}var ML=TL,IL=Object.prototype;function LL(t){var s=t&&t.constructor,r=typeof s=="function"&&s.prototype||IL;return t===r}var PL=LL;function RL(t,s){return function(r){return t(s(r))}}var OL=RL,FL=OL,$L=FL(Object.keys,Object),UL=$L,HL=PL,BL=UL,zL=Object.prototype,WL=zL.hasOwnProperty;function YL(t){if(!HL(t))return BL(t);var s=[];for(var r in Object(t))WL.call(t,r)&&r!="constructor"&&s.push(r);return s}var KL=YL,qL=I1,VL=$1;function GL(t){return t!=null&&VL(t.length)&&!qL(t)}var QL=GL,ZL=ML,JL=KL,XL=QL;function eP(t){return XL(t)?ZL(t):JL(t)}var tP=eP,sP=dI,rP=vI,nP=tP;function aP(t){return sP(t,nP,rP)}var lP=aP,A0=lP,iP=1,oP=Object.prototype,cP=oP.hasOwnProperty;function dP(t,s,r,n,a,l){var i=r&iP,o=A0(t),c=o.length,d=A0(s),m=d.length;if(c!=m&&!i)return!1;for(var u=c;u--;){var p=o[u];if(!(i?p in s:cP.call(s,p)))return!1}var g=l.get(t),j=l.get(s);if(g&&j)return g==s&&j==t;var y=!0;l.set(t,s),l.set(s,t);for(var v=i;++u<c;){p=o[u];var h=t[p],f=s[p];if(n)var N=i?n(f,h,p,s,t,l):n(h,f,p,t,s,l);if(!(N===void 0?h===f||a(h,f,r,n,l):N)){y=!1;break}v||(v=p=="constructor")}if(y&&!v){var b=t.constructor,w=s.constructor;b!=w&&"constructor"in t&&"constructor"in s&&!(typeof b=="function"&&b instanceof b&&typeof w=="function"&&w instanceof w)&&(y=!1)}return l.delete(t),l.delete(s),y}var uP=dP,mP=_i,hP=oa,pP=mP(hP,"DataView"),fP=pP,xP=_i,gP=oa,yP=xP(gP,"Promise"),bP=yP,vP=_i,jP=oa,NP=vP(jP,"Set"),wP=NP,SP=_i,_P=oa,EP=SP(_P,"WeakMap"),kP=EP,yp=fP,bp=zf,vp=bP,jp=wP,Np=kP,H1=$u,Ai=L1,D0="[object Map]",CP="[object Object]",T0="[object Promise]",M0="[object Set]",I0="[object WeakMap]",L0="[object DataView]",AP=Ai(yp),DP=Ai(bp),TP=Ai(vp),MP=Ai(jp),IP=Ai(Np),Ga=H1;(yp&&Ga(new yp(new ArrayBuffer(1)))!=L0||bp&&Ga(new bp)!=D0||vp&&Ga(vp.resolve())!=T0||jp&&Ga(new jp)!=M0||Np&&Ga(new Np)!=I0)&&(Ga=function(t){var s=H1(t),r=s==CP?t.constructor:void 0,n=r?Ai(r):"";if(n)switch(n){case AP:return L0;case DP:return D0;case TP:return T0;case MP:return M0;case IP:return I0}return s});var LP=Ga,Hm=mM,PP=R1,RP=rI,OP=uP,P0=LP,R0=Wf,O0=F1,FP=U1,$P=1,F0="[object Arguments]",$0="[object Array]",Tc="[object Object]",UP=Object.prototype,U0=UP.hasOwnProperty;function HP(t,s,r,n,a,l){var i=R0(t),o=R0(s),c=i?$0:P0(t),d=o?$0:P0(s);c=c==F0?Tc:c,d=d==F0?Tc:d;var m=c==Tc,u=d==Tc,p=c==d;if(p&&O0(t)){if(!O0(s))return!1;i=!0,m=!1}if(p&&!m)return l||(l=new Hm),i||FP(t)?PP(t,s,r,n,a,l):RP(t,s,c,r,n,a,l);if(!(r&$P)){var g=m&&U0.call(t,"__wrapped__"),j=u&&U0.call(s,"__wrapped__");if(g||j){var y=g?t.value():t,v=j?s.value():s;return l||(l=new Hm),a(y,v,r,n,l)}}return p?(l||(l=new Hm),OP(t,s,r,n,a,l)):!1}var BP=HP,zP=BP,H0=Bu;function B1(t,s,r,n,a){return t===s?!0:t==null||s==null||!H0(t)&&!H0(s)?t!==t&&s!==s:zP(t,s,r,n,B1,a)}var WP=B1,YP=WP;function KP(t,s){return YP(t,s)}var qP=KP,z1={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,s){(function(n,a){t.exports=a()})(typeof self<"u"?self:rn,function(){return function(r){var n={};function a(l){if(n[l])return n[l].exports;var i=n[l]={i:l,l:!1,exports:{}};return r[l].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=r,a.c=n,a.d=function(l,i,o){a.o(l,i)||Object.defineProperty(l,i,{configurable:!1,enumerable:!0,get:o})},a.n=function(l){var i=l&&l.__esModule?function(){return l.default}:function(){return l};return a.d(i,"a",i),i},a.o=function(l,i){return Object.prototype.hasOwnProperty.call(l,i)},a.p="",a(a.s=109)}([function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(17),i=a(18),o=a(19),c=a(45),d=a(46),m=a(47),u=a(48),p=a(49),g=a(12),j=a(32),y=a(33),v=a(31),h=a(1),f={Scope:h.Scope,create:h.create,find:h.find,query:h.query,register:h.register,Container:l.default,Format:i.default,Leaf:o.default,Embed:u.default,Scroll:c.default,Block:m.default,Inline:d.default,Text:p.default,Attributor:{Attribute:g.default,Class:j.default,Style:y.default,Store:v.default}};n.default=f},function(r,n,a){var l=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var N in f)f.hasOwnProperty(N)&&(h[N]=f[N])};return function(h,f){v(h,f);function N(){this.constructor=h}h.prototype=f===null?Object.create(f):(N.prototype=f.prototype,new N)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=function(v){l(h,v);function h(f){var N=this;return f="[Parchment] "+f,N=v.call(this,f)||this,N.message=f,N.name=N.constructor.name,N}return h}(Error);n.ParchmentError=i;var o={},c={},d={},m={};n.DATA_KEY="__blot";var u;(function(v){v[v.TYPE=3]="TYPE",v[v.LEVEL=12]="LEVEL",v[v.ATTRIBUTE=13]="ATTRIBUTE",v[v.BLOT=14]="BLOT",v[v.INLINE=7]="INLINE",v[v.BLOCK=11]="BLOCK",v[v.BLOCK_BLOT=10]="BLOCK_BLOT",v[v.INLINE_BLOT=6]="INLINE_BLOT",v[v.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",v[v.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",v[v.ANY=15]="ANY"})(u=n.Scope||(n.Scope={}));function p(v,h){var f=j(v);if(f==null)throw new i("Unable to create "+v+" blot");var N=f,b=v instanceof Node||v.nodeType===Node.TEXT_NODE?v:N.create(h);return new N(b,h)}n.create=p;function g(v,h){return h===void 0&&(h=!1),v==null?null:v[n.DATA_KEY]!=null?v[n.DATA_KEY].blot:h?g(v.parentNode,h):null}n.find=g;function j(v,h){h===void 0&&(h=u.ANY);var f;if(typeof v=="string")f=m[v]||o[v];else if(v instanceof Text||v.nodeType===Node.TEXT_NODE)f=m.text;else if(typeof v=="number")v&u.LEVEL&u.BLOCK?f=m.block:v&u.LEVEL&u.INLINE&&(f=m.inline);else if(v instanceof HTMLElement){var N=(v.getAttribute("class")||"").split(/\s+/);for(var b in N)if(f=c[N[b]],f)break;f=f||d[v.tagName]}return f==null?null:h&u.LEVEL&f.scope&&h&u.TYPE&f.scope?f:null}n.query=j;function y(){for(var v=[],h=0;h<arguments.length;h++)v[h]=arguments[h];if(v.length>1)return v.map(function(b){return y(b)});var f=v[0];if(typeof f.blotName!="string"&&typeof f.attrName!="string")throw new i("Invalid definition");if(f.blotName==="abstract")throw new i("Cannot register abstract class");if(m[f.blotName||f.attrName]=f,typeof f.keyName=="string")o[f.keyName]=f;else if(f.className!=null&&(c[f.className]=f),f.tagName!=null){Array.isArray(f.tagName)?f.tagName=f.tagName.map(function(b){return b.toUpperCase()}):f.tagName=f.tagName.toUpperCase();var N=Array.isArray(f.tagName)?f.tagName:[f.tagName];N.forEach(function(b){(d[b]==null||f.className==null)&&(d[b]=f)})}return f}n.register=y},function(r,n,a){var l=a(51),i=a(11),o=a(3),c=a(20),d="\0",m=function(u){Array.isArray(u)?this.ops=u:u!=null&&Array.isArray(u.ops)?this.ops=u.ops:this.ops=[]};m.prototype.insert=function(u,p){var g={};return u.length===0?this:(g.insert=u,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(g.attributes=p),this.push(g))},m.prototype.delete=function(u){return u<=0?this:this.push({delete:u})},m.prototype.retain=function(u,p){if(u<=0)return this;var g={retain:u};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(g.attributes=p),this.push(g)},m.prototype.push=function(u){var p=this.ops.length,g=this.ops[p-1];if(u=o(!0,{},u),typeof g=="object"){if(typeof u.delete=="number"&&typeof g.delete=="number")return this.ops[p-1]={delete:g.delete+u.delete},this;if(typeof g.delete=="number"&&u.insert!=null&&(p-=1,g=this.ops[p-1],typeof g!="object"))return this.ops.unshift(u),this;if(i(u.attributes,g.attributes)){if(typeof u.insert=="string"&&typeof g.insert=="string")return this.ops[p-1]={insert:g.insert+u.insert},typeof u.attributes=="object"&&(this.ops[p-1].attributes=u.attributes),this;if(typeof u.retain=="number"&&typeof g.retain=="number")return this.ops[p-1]={retain:g.retain+u.retain},typeof u.attributes=="object"&&(this.ops[p-1].attributes=u.attributes),this}}return p===this.ops.length?this.ops.push(u):this.ops.splice(p,0,u),this},m.prototype.chop=function(){var u=this.ops[this.ops.length-1];return u&&u.retain&&!u.attributes&&this.ops.pop(),this},m.prototype.filter=function(u){return this.ops.filter(u)},m.prototype.forEach=function(u){this.ops.forEach(u)},m.prototype.map=function(u){return this.ops.map(u)},m.prototype.partition=function(u){var p=[],g=[];return this.forEach(function(j){var y=u(j)?p:g;y.push(j)}),[p,g]},m.prototype.reduce=function(u,p){return this.ops.reduce(u,p)},m.prototype.changeLength=function(){return this.reduce(function(u,p){return p.insert?u+c.length(p):p.delete?u-p.delete:u},0)},m.prototype.length=function(){return this.reduce(function(u,p){return u+c.length(p)},0)},m.prototype.slice=function(u,p){u=u||0,typeof p!="number"&&(p=1/0);for(var g=[],j=c.iterator(this.ops),y=0;y<p&&j.hasNext();){var v;y<u?v=j.next(u-y):(v=j.next(p-y),g.push(v)),y+=c.length(v)}return new m(g)},m.prototype.compose=function(u){var p=c.iterator(this.ops),g=c.iterator(u.ops),j=[],y=g.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){for(var v=y.retain;p.peekType()==="insert"&&p.peekLength()<=v;)v-=p.peekLength(),j.push(p.next());y.retain-v>0&&g.next(y.retain-v)}for(var h=new m(j);p.hasNext()||g.hasNext();)if(g.peekType()==="insert")h.push(g.next());else if(p.peekType()==="delete")h.push(p.next());else{var f=Math.min(p.peekLength(),g.peekLength()),N=p.next(f),b=g.next(f);if(typeof b.retain=="number"){var w={};typeof N.retain=="number"?w.retain=f:w.insert=N.insert;var D=c.attributes.compose(N.attributes,b.attributes,typeof N.retain=="number");if(D&&(w.attributes=D),h.push(w),!g.hasNext()&&i(h.ops[h.ops.length-1],w)){var S=new m(p.rest());return h.concat(S).chop()}}else typeof b.delete=="number"&&typeof N.retain=="number"&&h.push(b)}return h.chop()},m.prototype.concat=function(u){var p=new m(this.ops.slice());return u.ops.length>0&&(p.push(u.ops[0]),p.ops=p.ops.concat(u.ops.slice(1))),p},m.prototype.diff=function(u,p){if(this.ops===u.ops)return new m;var g=[this,u].map(function(f){return f.map(function(N){if(N.insert!=null)return typeof N.insert=="string"?N.insert:d;var b=f===u?"on":"with";throw new Error("diff() called "+b+" non-document")}).join("")}),j=new m,y=l(g[0],g[1],p),v=c.iterator(this.ops),h=c.iterator(u.ops);return y.forEach(function(f){for(var N=f[1].length;N>0;){var b=0;switch(f[0]){case l.INSERT:b=Math.min(h.peekLength(),N),j.push(h.next(b));break;case l.DELETE:b=Math.min(N,v.peekLength()),v.next(b),j.delete(b);break;case l.EQUAL:b=Math.min(v.peekLength(),h.peekLength(),N);var w=v.next(b),D=h.next(b);i(w.insert,D.insert)?j.retain(b,c.attributes.diff(w.attributes,D.attributes)):j.push(D).delete(b);break}N-=b}}),j.chop()},m.prototype.eachLine=function(u,p){p=p||`
`;for(var g=c.iterator(this.ops),j=new m,y=0;g.hasNext();){if(g.peekType()!=="insert")return;var v=g.peek(),h=c.length(v)-g.peekLength(),f=typeof v.insert=="string"?v.insert.indexOf(p,h)-h:-1;if(f<0)j.push(g.next());else if(f>0)j.push(g.next(f));else{if(u(j,g.next(1).attributes||{},y)===!1)return;y+=1,j=new m}}j.length()>0&&u(j,{},y)},m.prototype.transform=function(u,p){if(p=!!p,typeof u=="number")return this.transformPosition(u,p);for(var g=c.iterator(this.ops),j=c.iterator(u.ops),y=new m;g.hasNext()||j.hasNext();)if(g.peekType()==="insert"&&(p||j.peekType()!=="insert"))y.retain(c.length(g.next()));else if(j.peekType()==="insert")y.push(j.next());else{var v=Math.min(g.peekLength(),j.peekLength()),h=g.next(v),f=j.next(v);if(h.delete)continue;f.delete?y.push(f):y.retain(v,c.attributes.transform(h.attributes,f.attributes,p))}return y.chop()},m.prototype.transformPosition=function(u,p){p=!!p;for(var g=c.iterator(this.ops),j=0;g.hasNext()&&j<=u;){var y=g.peekLength(),v=g.peekType();if(g.next(),v==="delete"){u-=Math.min(y,u-j);continue}else v==="insert"&&(j<u||!p)&&(u+=y);j+=y}return u},r.exports=m},function(r,n){var a=Object.prototype.hasOwnProperty,l=Object.prototype.toString,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,c=function(g){return typeof Array.isArray=="function"?Array.isArray(g):l.call(g)==="[object Array]"},d=function(g){if(!g||l.call(g)!=="[object Object]")return!1;var j=a.call(g,"constructor"),y=g.constructor&&g.constructor.prototype&&a.call(g.constructor.prototype,"isPrototypeOf");if(g.constructor&&!j&&!y)return!1;var v;for(v in g);return typeof v>"u"||a.call(g,v)},m=function(g,j){i&&j.name==="__proto__"?i(g,j.name,{enumerable:!0,configurable:!0,value:j.newValue,writable:!0}):g[j.name]=j.newValue},u=function(g,j){if(j==="__proto__")if(a.call(g,j)){if(o)return o(g,j).value}else return;return g[j]};r.exports=function p(){var g,j,y,v,h,f,N=arguments[0],b=1,w=arguments.length,D=!1;for(typeof N=="boolean"&&(D=N,N=arguments[1]||{},b=2),(N==null||typeof N!="object"&&typeof N!="function")&&(N={});b<w;++b)if(g=arguments[b],g!=null)for(j in g)y=u(N,j),v=u(g,j),N!==v&&(D&&v&&(d(v)||(h=c(v)))?(h?(h=!1,f=y&&c(y)?y:[]):f=y&&d(y)?y:{},m(N,{name:j,newValue:p(D,f,v)})):typeof v<"u"&&m(N,{name:j,newValue:v}));return N}},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var l=function(){function E(A,L){for(var F=0;F<L.length;F++){var W=L[F];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(A,W.key,W)}}return function(A,L,F){return L&&E(A.prototype,L),F&&E(A,F),A}}(),i=function E(A,L,F){A===null&&(A=Function.prototype);var W=Object.getOwnPropertyDescriptor(A,L);if(W===void 0){var Y=Object.getPrototypeOf(A);return Y===null?void 0:E(Y,L,F)}else{if("value"in W)return W.value;var q=W.get;return q===void 0?void 0:q.call(F)}},o=a(3),c=N(o),d=a(2),m=N(d),u=a(0),p=N(u),g=a(16),j=N(g),y=a(6),v=N(y),h=a(7),f=N(h);function N(E){return E&&E.__esModule?E:{default:E}}function b(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}function w(E,A){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:E}function D(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(E,A):E.__proto__=A)}var S=1,C=function(E){D(A,E);function A(){return b(this,A),w(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return l(A,[{key:"attach",value:function(){i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"attach",this).call(this),this.attributes=new p.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new m.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(F,W){var Y=p.default.query(F,p.default.Scope.BLOCK_ATTRIBUTE);Y!=null&&this.attributes.attribute(Y,W)}},{key:"formatAt",value:function(F,W,Y,q){this.format(Y,q)}},{key:"insertAt",value:function(F,W,Y){if(typeof W=="string"&&W.endsWith(`
`)){var q=p.default.create(T.blotName);this.parent.insertBefore(q,F===0?this:this.next),q.insertAt(0,W.slice(0,-1))}else i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,F,W,Y)}}]),A}(p.default.Embed);C.scope=p.default.Scope.BLOCK_BLOT;var T=function(E){D(A,E);function A(L){b(this,A);var F=w(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,L));return F.cache={},F}return l(A,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(p.default.Leaf).reduce(function(F,W){return W.length()===0?F:F.insert(W.value(),_(W))},new m.default).insert(`
`,_(this))),this.cache.delta}},{key:"deleteAt",value:function(F,W){i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"deleteAt",this).call(this,F,W),this.cache={}}},{key:"formatAt",value:function(F,W,Y,q){W<=0||(p.default.query(Y,p.default.Scope.BLOCK)?F+W===this.length()&&this.format(Y,q):i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,F,Math.min(W,this.length()-F-1),Y,q),this.cache={})}},{key:"insertAt",value:function(F,W,Y){if(Y!=null)return i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,F,W,Y);if(W.length!==0){var q=W.split(`
`),J=q.shift();J.length>0&&(F<this.length()-1||this.children.tail==null?i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,Math.min(F,this.length()-1),J):this.children.tail.insertAt(this.children.tail.length(),J),this.cache={});var O=this;q.reduce(function(M,k){return O=O.split(M,!0),O.insertAt(0,k),k.length},F+J.length)}}},{key:"insertBefore",value:function(F,W){var Y=this.children.head;i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,F,W),Y instanceof j.default&&Y.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"length",this).call(this)+S),this.cache.length}},{key:"moveChildren",value:function(F,W){i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"moveChildren",this).call(this,F,W),this.cache={}}},{key:"optimize",value:function(F){i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,F),this.cache={}}},{key:"path",value:function(F){return i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"path",this).call(this,F,!0)}},{key:"removeChild",value:function(F){i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"removeChild",this).call(this,F),this.cache={}}},{key:"split",value:function(F){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(W&&(F===0||F>=this.length()-S)){var Y=this.clone();return F===0?(this.parent.insertBefore(Y,this),this):(this.parent.insertBefore(Y,this.next),Y)}else{var q=i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"split",this).call(this,F,W);return this.cache={},q}}}]),A}(p.default.Block);T.blotName="block",T.tagName="P",T.defaultChild="break",T.allowedChildren=[v.default,p.default.Embed,f.default];function _(E){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return E==null||(typeof E.formats=="function"&&(A=(0,c.default)(A,E.formats())),E.parent==null||E.parent.blotName=="scroll"||E.parent.statics.scope!==E.statics.scope)?A:_(E.parent,A)}n.bubbleFormats=_,n.BlockEmbed=C,n.default=T},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},i=function(){function O(M,k){var I=[],K=!0,z=!1,P=void 0;try{for(var R=M[Symbol.iterator](),B;!(K=(B=R.next()).done)&&(I.push(B.value),!(k&&I.length===k));K=!0);}catch(U){z=!0,P=U}finally{try{!K&&R.return&&R.return()}finally{if(z)throw P}}return I}return function(M,k){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return O(M,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function O(M,k){for(var I=0;I<k.length;I++){var K=k[I];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(M,K.key,K)}}return function(M,k,I){return k&&O(M.prototype,k),I&&O(M,I),M}}();a(50);var c=a(2),d=_(c),m=a(14),u=_(m),p=a(8),g=_(p),j=a(9),y=_(j),v=a(0),h=_(v),f=a(15),N=_(f),b=a(3),w=_(b),D=a(10),S=_(D),C=a(34),T=_(C);function _(O){return O&&O.__esModule?O:{default:O}}function E(O,M,k){return M in O?Object.defineProperty(O,M,{value:k,enumerable:!0,configurable:!0,writable:!0}):O[M]=k,O}function A(O,M){if(!(O instanceof M))throw new TypeError("Cannot call a class as a function")}var L=(0,S.default)("quill"),F=function(){o(O,null,[{key:"debug",value:function(k){k===!0&&(k="log"),S.default.level(k)}},{key:"find",value:function(k){return k.__quill||h.default.find(k)}},{key:"import",value:function(k){return this.imports[k]==null&&L.error("Cannot import "+k+". Are you sure it was registered?"),this.imports[k]}},{key:"register",value:function(k,I){var K=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof k!="string"){var P=k.attrName||k.blotName;typeof P=="string"?this.register("formats/"+P,k,I):Object.keys(k).forEach(function(R){K.register(R,k[R],I)})}else this.imports[k]!=null&&!z&&L.warn("Overwriting "+k+" with",I),this.imports[k]=I,(k.startsWith("blots/")||k.startsWith("formats/"))&&I.blotName!=="abstract"?h.default.register(I):k.startsWith("modules")&&typeof I.register=="function"&&I.register()}}]);function O(M){var k=this,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(A(this,O),this.options=W(M,I),this.container=this.options.container,this.container==null)return L.error("Invalid Quill container",M);this.options.debug&&O.debug(this.options.debug);var K=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new g.default,this.scroll=h.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new u.default(this.scroll),this.selection=new N.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(g.default.events.EDITOR_CHANGE,function(P){P===g.default.events.TEXT_CHANGE&&k.root.classList.toggle("ql-blank",k.editor.isBlank())}),this.emitter.on(g.default.events.SCROLL_UPDATE,function(P,R){var B=k.selection.lastRange,U=B&&B.length===0?B.index:void 0;Y.call(k,function(){return k.editor.update(null,R,U)},P)});var z=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+K+"<p><br></p></div>");this.setContents(z),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return o(O,[{key:"addContainer",value:function(k){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof k=="string"){var K=k;k=document.createElement("div"),k.classList.add(K)}return this.container.insertBefore(k,I),k}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(k,I,K){var z=this,P=q(k,I,K),R=i(P,4);return k=R[0],I=R[1],K=R[3],Y.call(this,function(){return z.editor.deleteText(k,I)},K,k,-1*I)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(k),this.container.classList.toggle("ql-disabled",!k)}},{key:"focus",value:function(){var k=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=k,this.scrollIntoView()}},{key:"format",value:function(k,I){var K=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;return Y.call(this,function(){var P=K.getSelection(!0),R=new d.default;if(P==null)return R;if(h.default.query(k,h.default.Scope.BLOCK))R=K.editor.formatLine(P.index,P.length,E({},k,I));else{if(P.length===0)return K.selection.format(k,I),R;R=K.editor.formatText(P.index,P.length,E({},k,I))}return K.setSelection(P,g.default.sources.SILENT),R},z)}},{key:"formatLine",value:function(k,I,K,z,P){var R=this,B=void 0,U=q(k,I,K,z,P),G=i(U,4);return k=G[0],I=G[1],B=G[2],P=G[3],Y.call(this,function(){return R.editor.formatLine(k,I,B)},P,k,0)}},{key:"formatText",value:function(k,I,K,z,P){var R=this,B=void 0,U=q(k,I,K,z,P),G=i(U,4);return k=G[0],I=G[1],B=G[2],P=G[3],Y.call(this,function(){return R.editor.formatText(k,I,B)},P,k,0)}},{key:"getBounds",value:function(k){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,K=void 0;typeof k=="number"?K=this.selection.getBounds(k,I):K=this.selection.getBounds(k.index,k.length);var z=this.container.getBoundingClientRect();return{bottom:K.bottom-z.top,height:K.height,left:K.left-z.left,right:K.right-z.left,top:K.top-z.top,width:K.width}}},{key:"getContents",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-k,K=q(k,I),z=i(K,2);return k=z[0],I=z[1],this.editor.getContents(k,I)}},{key:"getFormat",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof k=="number"?this.editor.getFormat(k,I):this.editor.getFormat(k.index,k.length)}},{key:"getIndex",value:function(k){return k.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(k){return this.scroll.leaf(k)}},{key:"getLine",value:function(k){return this.scroll.line(k)}},{key:"getLines",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof k!="number"?this.scroll.lines(k.index,k.length):this.scroll.lines(k,I)}},{key:"getModule",value:function(k){return this.theme.modules[k]}},{key:"getSelection",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return k&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-k,K=q(k,I),z=i(K,2);return k=z[0],I=z[1],this.editor.getText(k,I)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(k,I,K){var z=this,P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:O.sources.API;return Y.call(this,function(){return z.editor.insertEmbed(k,I,K)},P,k)}},{key:"insertText",value:function(k,I,K,z,P){var R=this,B=void 0,U=q(k,0,K,z,P),G=i(U,4);return k=G[0],B=G[2],P=G[3],Y.call(this,function(){return R.editor.insertText(k,I,B)},P,k,I.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(k,I,K){this.clipboard.dangerouslyPasteHTML(k,I,K)}},{key:"removeFormat",value:function(k,I,K){var z=this,P=q(k,I,K),R=i(P,4);return k=R[0],I=R[1],K=R[3],Y.call(this,function(){return z.editor.removeFormat(k,I)},K,k)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(k){var I=this,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.default.sources.API;return Y.call(this,function(){k=new d.default(k);var z=I.getLength(),P=I.editor.deleteText(0,z),R=I.editor.applyDelta(k),B=R.ops[R.ops.length-1];B!=null&&typeof B.insert=="string"&&B.insert[B.insert.length-1]===`
`&&(I.editor.deleteText(I.getLength()-1,1),R.delete(1));var U=P.compose(R);return U},K)}},{key:"setSelection",value:function(k,I,K){if(k==null)this.selection.setRange(null,I||O.sources.API);else{var z=q(k,I,K),P=i(z,4);k=P[0],I=P[1],K=P[3],this.selection.setRange(new f.Range(k,I),K),K!==g.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(k){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.default.sources.API,K=new d.default().insert(k);return this.setContents(K,I)}},{key:"update",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.default.sources.USER,I=this.scroll.update(k);return this.selection.update(k),I}},{key:"updateContents",value:function(k){var I=this,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.default.sources.API;return Y.call(this,function(){return k=new d.default(k),I.editor.applyDelta(k,K)},K,!0)}}]),O}();F.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},F.events=g.default.events,F.sources=g.default.sources,F.version="1.3.7",F.imports={delta:d.default,parchment:h.default,"core/module":y.default,"core/theme":T.default};function W(O,M){if(M=(0,w.default)(!0,{container:O,modules:{clipboard:!0,keyboard:!0,history:!0}},M),!M.theme||M.theme===F.DEFAULTS.theme)M.theme=T.default;else if(M.theme=F.import("themes/"+M.theme),M.theme==null)throw new Error("Invalid theme "+M.theme+". Did you register it?");var k=(0,w.default)(!0,{},M.theme.DEFAULTS);[k,M].forEach(function(z){z.modules=z.modules||{},Object.keys(z.modules).forEach(function(P){z.modules[P]===!0&&(z.modules[P]={})})});var I=Object.keys(k.modules).concat(Object.keys(M.modules)),K=I.reduce(function(z,P){var R=F.import("modules/"+P);return R==null?L.error("Cannot load "+P+" module. Are you sure you registered it?"):z[P]=R.DEFAULTS||{},z},{});return M.modules!=null&&M.modules.toolbar&&M.modules.toolbar.constructor!==Object&&(M.modules.toolbar={container:M.modules.toolbar}),M=(0,w.default)(!0,{},F.DEFAULTS,{modules:K},k,M),["bounds","container","scrollingContainer"].forEach(function(z){typeof M[z]=="string"&&(M[z]=document.querySelector(M[z]))}),M.modules=Object.keys(M.modules).reduce(function(z,P){return M.modules[P]&&(z[P]=M.modules[P]),z},{}),M}function Y(O,M,k,I){if(this.options.strict&&!this.isEnabled()&&M===g.default.sources.USER)return new d.default;var K=k==null?null:this.getSelection(),z=this.editor.delta,P=O();if(K!=null&&(k===!0&&(k=K.index),I==null?K=J(K,P,M):I!==0&&(K=J(K,k,I,M)),this.setSelection(K,g.default.sources.SILENT)),P.length()>0){var R,B=[g.default.events.TEXT_CHANGE,P,z,M];if((R=this.emitter).emit.apply(R,[g.default.events.EDITOR_CHANGE].concat(B)),M!==g.default.sources.SILENT){var U;(U=this.emitter).emit.apply(U,B)}}return P}function q(O,M,k,I,K){var z={};return typeof O.index=="number"&&typeof O.length=="number"?typeof M!="number"?(K=I,I=k,k=M,M=O.length,O=O.index):(M=O.length,O=O.index):typeof M!="number"&&(K=I,I=k,k=M,M=0),(typeof k>"u"?"undefined":l(k))==="object"?(z=k,K=I):typeof k=="string"&&(I!=null?z[k]=I:K=k),K=K||g.default.sources.API,[O,M,z,K]}function J(O,M,k,I){if(O==null)return null;var K=void 0,z=void 0;if(M instanceof d.default){var P=[O.index,O.index+O.length].map(function(G){return M.transformPosition(G,I!==g.default.sources.USER)}),R=i(P,2);K=R[0],z=R[1]}else{var B=[O.index,O.index+O.length].map(function(G){return G<M||G===M&&I===g.default.sources.USER?G:k>=0?G+k:Math.max(M,G+k)}),U=i(B,2);K=U[0],z=U[1]}return new f.Range(K,z-K)}n.expandConfig=W,n.overload=q,n.default=F},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function v(h,f){for(var N=0;N<f.length;N++){var b=f[N];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,f,N){return f&&v(h.prototype,f),N&&v(h,N),h}}(),i=function v(h,f,N){h===null&&(h=Function.prototype);var b=Object.getOwnPropertyDescriptor(h,f);if(b===void 0){var w=Object.getPrototypeOf(h);return w===null?void 0:v(w,f,N)}else{if("value"in b)return b.value;var D=b.get;return D===void 0?void 0:D.call(N)}},o=a(7),c=u(o),d=a(0),m=u(d);function u(v){return v&&v.__esModule?v:{default:v}}function p(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}function g(v,h){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:v}function j(v,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);v.prototype=Object.create(h&&h.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(v,h):v.__proto__=h)}var y=function(v){j(h,v);function h(){return p(this,h),g(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return l(h,[{key:"formatAt",value:function(N,b,w,D){if(h.compare(this.statics.blotName,w)<0&&m.default.query(w,m.default.Scope.BLOT)){var S=this.isolate(N,b);D&&S.wrap(w,D)}else i(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"formatAt",this).call(this,N,b,w,D)}},{key:"optimize",value:function(N){if(i(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"optimize",this).call(this,N),this.parent instanceof h&&h.compare(this.statics.blotName,this.parent.statics.blotName)>0){var b=this.parent.isolate(this.offset(),this.length());this.moveChildren(b),b.wrap(this)}}}],[{key:"compare",value:function(N,b){var w=h.order.indexOf(N),D=h.order.indexOf(b);return w>=0||D>=0?w-D:N===b?0:N<b?-1:1}}]),h}(m.default.Inline);y.allowedChildren=[y,m.default.Embed,c.default],y.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=y},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(0),i=o(l);function o(p){return p&&p.__esModule?p:{default:p}}function c(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function d(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function m(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var u=function(p){m(g,p);function g(){return c(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(i.default.Text);n.default=u},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function f(N,b){for(var w=0;w<b.length;w++){var D=b[w];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(N,D.key,D)}}return function(N,b,w){return b&&f(N.prototype,b),w&&f(N,w),N}}(),i=function f(N,b,w){N===null&&(N=Function.prototype);var D=Object.getOwnPropertyDescriptor(N,b);if(D===void 0){var S=Object.getPrototypeOf(N);return S===null?void 0:f(S,b,w)}else{if("value"in D)return D.value;var C=D.get;return C===void 0?void 0:C.call(w)}},o=a(54),c=u(o),d=a(10),m=u(d);function u(f){return f&&f.__esModule?f:{default:f}}function p(f,N){if(!(f instanceof N))throw new TypeError("Cannot call a class as a function")}function g(f,N){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:f}function j(f,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);f.prototype=Object.create(N&&N.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(f,N):f.__proto__=N)}var y=(0,m.default)("quill:events"),v=["selectionchange","mousedown","mouseup","click"];v.forEach(function(f){document.addEventListener(f,function(){for(var N=arguments.length,b=Array(N),w=0;w<N;w++)b[w]=arguments[w];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(D){if(D.__quill&&D.__quill.emitter){var S;(S=D.__quill.emitter).handleDOM.apply(S,b)}})})});var h=function(f){j(N,f);function N(){p(this,N);var b=g(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));return b.listeners={},b.on("error",y.error),b}return l(N,[{key:"emit",value:function(){y.log.apply(y,arguments),i(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(w){for(var D=arguments.length,S=Array(D>1?D-1:0),C=1;C<D;C++)S[C-1]=arguments[C];(this.listeners[w.type]||[]).forEach(function(T){var _=T.node,E=T.handler;(w.target===_||_.contains(w.target))&&E.apply(void 0,[w].concat(S))})}},{key:"listenDOM",value:function(w,D,S){this.listeners[w]||(this.listeners[w]=[]),this.listeners[w].push({node:D,handler:S})}}]),N}(c.default);h.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},h.sources={API:"api",SILENT:"silent",USER:"user"},n.default=h},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});function l(o,c){if(!(o instanceof c))throw new TypeError("Cannot call a class as a function")}var i=function o(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l(this,o),this.quill=c,this.options=d};i.DEFAULTS={},n.default=i},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=["error","warn","log","info"],i="warn";function o(d){if(l.indexOf(d)<=l.indexOf(i)){for(var m,u=arguments.length,p=Array(u>1?u-1:0),g=1;g<u;g++)p[g-1]=arguments[g];(m=console)[d].apply(m,p)}}function c(d){return l.reduce(function(m,u){return m[u]=o.bind(console,u,d),m},{})}o.level=c.level=function(d){i=d},n.default=c},function(r,n,a){var l=Array.prototype.slice,i=a(52),o=a(53),c=r.exports=function(p,g,j){return j||(j={}),p===g?!0:p instanceof Date&&g instanceof Date?p.getTime()===g.getTime():!p||!g||typeof p!="object"&&typeof g!="object"?j.strict?p===g:p==g:u(p,g,j)};function d(p){return p==null}function m(p){return!(!p||typeof p!="object"||typeof p.length!="number"||typeof p.copy!="function"||typeof p.slice!="function"||p.length>0&&typeof p[0]!="number")}function u(p,g,j){var y,v;if(d(p)||d(g)||p.prototype!==g.prototype)return!1;if(o(p))return o(g)?(p=l.call(p),g=l.call(g),c(p,g,j)):!1;if(m(p)){if(!m(g)||p.length!==g.length)return!1;for(y=0;y<p.length;y++)if(p[y]!==g[y])return!1;return!0}try{var h=i(p),f=i(g)}catch{return!1}if(h.length!=f.length)return!1;for(h.sort(),f.sort(),y=h.length-1;y>=0;y--)if(h[y]!=f[y])return!1;for(y=h.length-1;y>=0;y--)if(v=h[y],!c(p[v],g[v],j))return!1;return typeof p==typeof g}},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(1),i=function(){function o(c,d,m){m===void 0&&(m={}),this.attrName=c,this.keyName=d;var u=l.Scope.TYPE&l.Scope.ATTRIBUTE;m.scope!=null?this.scope=m.scope&l.Scope.LEVEL|u:this.scope=l.Scope.ATTRIBUTE,m.whitelist!=null&&(this.whitelist=m.whitelist)}return o.keys=function(c){return[].map.call(c.attributes,function(d){return d.name})},o.prototype.add=function(c,d){return this.canAdd(c,d)?(c.setAttribute(this.keyName,d),!0):!1},o.prototype.canAdd=function(c,d){var m=l.query(c,l.Scope.BLOT&(this.scope|l.Scope.TYPE));return m==null?!1:this.whitelist==null?!0:typeof d=="string"?this.whitelist.indexOf(d.replace(/["']/g,""))>-1:this.whitelist.indexOf(d)>-1},o.prototype.remove=function(c){c.removeAttribute(this.keyName)},o.prototype.value=function(c){var d=c.getAttribute(this.keyName);return this.canAdd(c,d)&&d?d:""},o}();n.default=i},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var l=function(){function C(T,_){var E=[],A=!0,L=!1,F=void 0;try{for(var W=T[Symbol.iterator](),Y;!(A=(Y=W.next()).done)&&(E.push(Y.value),!(_&&E.length===_));A=!0);}catch(q){L=!0,F=q}finally{try{!A&&W.return&&W.return()}finally{if(L)throw F}}return E}return function(T,_){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return C(T,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function C(T,_){for(var E=0;E<_.length;E++){var A=_[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(T,A.key,A)}}return function(T,_,E){return _&&C(T.prototype,_),E&&C(T,E),T}}(),o=function C(T,_,E){T===null&&(T=Function.prototype);var A=Object.getOwnPropertyDescriptor(T,_);if(A===void 0){var L=Object.getPrototypeOf(T);return L===null?void 0:C(L,_,E)}else{if("value"in A)return A.value;var F=A.get;return F===void 0?void 0:F.call(E)}},c=a(2),d=f(c),m=a(0),u=f(m),p=a(4),g=f(p),j=a(6),y=f(j),v=a(7),h=f(v);function f(C){return C&&C.__esModule?C:{default:C}}function N(C,T){if(!(C instanceof T))throw new TypeError("Cannot call a class as a function")}function b(C,T){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:C}function w(C,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);C.prototype=Object.create(T&&T.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(C,T):C.__proto__=T)}var D=function(C){w(T,C);function T(){return N(this,T),b(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return T}(y.default);D.blotName="code",D.tagName="CODE";var S=function(C){w(T,C);function T(){return N(this,T),b(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return i(T,[{key:"delta",value:function(){var E=this,A=this.domNode.textContent;return A.endsWith(`
`)&&(A=A.slice(0,-1)),A.split(`
`).reduce(function(L,F){return L.insert(F).insert(`
`,E.formats())},new d.default)}},{key:"format",value:function(E,A){if(!(E===this.statics.blotName&&A)){var L=this.descendant(h.default,this.length()-1),F=l(L,1),W=F[0];W!=null&&W.deleteAt(W.length()-1,1),o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"format",this).call(this,E,A)}}},{key:"formatAt",value:function(E,A,L,F){if(A!==0&&!(u.default.query(L,u.default.Scope.BLOCK)==null||L===this.statics.blotName&&F===this.statics.formats(this.domNode))){var W=this.newlineIndex(E);if(!(W<0||W>=E+A)){var Y=this.newlineIndex(E,!0)+1,q=W-Y+1,J=this.isolate(Y,q),O=J.next;J.format(L,F),O instanceof T&&O.formatAt(0,E-Y+A-q,L,F)}}}},{key:"insertAt",value:function(E,A,L){if(L==null){var F=this.descendant(h.default,E),W=l(F,2),Y=W[0],q=W[1];Y.insertAt(q,A)}}},{key:"length",value:function(){var E=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?E:E+1}},{key:"newlineIndex",value:function(E){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(A)return this.domNode.textContent.slice(0,E).lastIndexOf(`
`);var L=this.domNode.textContent.slice(E).indexOf(`
`);return L>-1?E+L:-1}},{key:"optimize",value:function(E){this.domNode.textContent.endsWith(`
`)||this.appendChild(u.default.create("text",`
`)),o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,E);var A=this.next;A!=null&&A.prev===this&&A.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===A.statics.formats(A.domNode)&&(A.optimize(E),A.moveChildren(this),A.remove())}},{key:"replace",value:function(E){o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replace",this).call(this,E),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(A){var L=u.default.find(A);L==null?A.parentNode.removeChild(A):L instanceof u.default.Embed?L.remove():L.unwrap()})}}],[{key:"create",value:function(E){var A=o(T.__proto__||Object.getPrototypeOf(T),"create",this).call(this,E);return A.setAttribute("spellcheck",!1),A}},{key:"formats",value:function(){return!0}}]),T}(g.default);S.blotName="code-block",S.tagName="PRE",S.TAB="  ",n.Code=D,n.default=S},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},i=function(){function O(M,k){var I=[],K=!0,z=!1,P=void 0;try{for(var R=M[Symbol.iterator](),B;!(K=(B=R.next()).done)&&(I.push(B.value),!(k&&I.length===k));K=!0);}catch(U){z=!0,P=U}finally{try{!K&&R.return&&R.return()}finally{if(z)throw P}}return I}return function(M,k){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return O(M,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function O(M,k){for(var I=0;I<k.length;I++){var K=k[I];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(M,K.key,K)}}return function(M,k,I){return k&&O(M.prototype,k),I&&O(M,I),M}}(),c=a(2),d=A(c),m=a(20),u=A(m),p=a(0),g=A(p),j=a(13),y=A(j),v=a(24),h=A(v),f=a(4),N=A(f),b=a(16),w=A(b),D=a(21),S=A(D),C=a(11),T=A(C),_=a(3),E=A(_);function A(O){return O&&O.__esModule?O:{default:O}}function L(O,M,k){return M in O?Object.defineProperty(O,M,{value:k,enumerable:!0,configurable:!0,writable:!0}):O[M]=k,O}function F(O,M){if(!(O instanceof M))throw new TypeError("Cannot call a class as a function")}var W=/^[ -~]*$/,Y=function(){function O(M){F(this,O),this.scroll=M,this.delta=this.getDelta()}return o(O,[{key:"applyDelta",value:function(k){var I=this,K=!1;this.scroll.update();var z=this.scroll.length();return this.scroll.batchStart(),k=J(k),k.reduce(function(P,R){var B=R.retain||R.delete||R.insert.length||1,U=R.attributes||{};if(R.insert!=null){if(typeof R.insert=="string"){var G=R.insert;G.endsWith(`
`)&&K&&(K=!1,G=G.slice(0,-1)),P>=z&&!G.endsWith(`
`)&&(K=!0),I.scroll.insertAt(P,G);var $=I.scroll.line(P),X=i($,2),Q=X[0],Ne=X[1],V=(0,E.default)({},(0,f.bubbleFormats)(Q));if(Q instanceof N.default){var re=Q.descendant(g.default.Leaf,Ne),ne=i(re,1),xe=ne[0];V=(0,E.default)(V,(0,f.bubbleFormats)(xe))}U=u.default.attributes.diff(V,U)||{}}else if(l(R.insert)==="object"){var me=Object.keys(R.insert)[0];if(me==null)return P;I.scroll.insertAt(P,me,R.insert[me])}z+=B}return Object.keys(U).forEach(function(Z){I.scroll.formatAt(P,B,Z,U[Z])}),P+B},0),k.reduce(function(P,R){return typeof R.delete=="number"?(I.scroll.deleteAt(P,R.delete),P):P+(R.retain||R.insert.length||1)},0),this.scroll.batchEnd(),this.update(k)}},{key:"deleteText",value:function(k,I){return this.scroll.deleteAt(k,I),this.update(new d.default().retain(k).delete(I))}},{key:"formatLine",value:function(k,I){var K=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(z).forEach(function(P){if(!(K.scroll.whitelist!=null&&!K.scroll.whitelist[P])){var R=K.scroll.lines(k,Math.max(I,1)),B=I;R.forEach(function(U){var G=U.length();if(!(U instanceof y.default))U.format(P,z[P]);else{var $=k-U.offset(K.scroll),X=U.newlineIndex($+B)-$+1;U.formatAt($,X,P,z[P])}B-=G})}}),this.scroll.optimize(),this.update(new d.default().retain(k).retain(I,(0,S.default)(z)))}},{key:"formatText",value:function(k,I){var K=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(z).forEach(function(P){K.scroll.formatAt(k,I,P,z[P])}),this.update(new d.default().retain(k).retain(I,(0,S.default)(z)))}},{key:"getContents",value:function(k,I){return this.delta.slice(k,k+I)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(k,I){return k.concat(I.delta())},new d.default)}},{key:"getFormat",value:function(k){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,K=[],z=[];I===0?this.scroll.path(k).forEach(function(R){var B=i(R,1),U=B[0];U instanceof N.default?K.push(U):U instanceof g.default.Leaf&&z.push(U)}):(K=this.scroll.lines(k,I),z=this.scroll.descendants(g.default.Leaf,k,I));var P=[K,z].map(function(R){if(R.length===0)return{};for(var B=(0,f.bubbleFormats)(R.shift());Object.keys(B).length>0;){var U=R.shift();if(U==null)return B;B=q((0,f.bubbleFormats)(U),B)}return B});return E.default.apply(E.default,P)}},{key:"getText",value:function(k,I){return this.getContents(k,I).filter(function(K){return typeof K.insert=="string"}).map(function(K){return K.insert}).join("")}},{key:"insertEmbed",value:function(k,I,K){return this.scroll.insertAt(k,I,K),this.update(new d.default().retain(k).insert(L({},I,K)))}},{key:"insertText",value:function(k,I){var K=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return I=I.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(k,I),Object.keys(z).forEach(function(P){K.scroll.formatAt(k,I.length,P,z[P])}),this.update(new d.default().retain(k).insert(I,(0,S.default)(z)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var k=this.scroll.children.head;return k.statics.blotName!==N.default.blotName||k.children.length>1?!1:k.children.head instanceof w.default}},{key:"removeFormat",value:function(k,I){var K=this.getText(k,I),z=this.scroll.line(k+I),P=i(z,2),R=P[0],B=P[1],U=0,G=new d.default;R!=null&&(R instanceof y.default?U=R.newlineIndex(B)-B+1:U=R.length()-B,G=R.delta().slice(B,B+U-1).insert(`
`));var $=this.getContents(k,I+U),X=$.diff(new d.default().insert(K).concat(G)),Q=new d.default().retain(k).concat(X);return this.applyDelta(Q)}},{key:"update",value:function(k){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,z=this.delta;if(I.length===1&&I[0].type==="characterData"&&I[0].target.data.match(W)&&g.default.find(I[0].target)){var P=g.default.find(I[0].target),R=(0,f.bubbleFormats)(P),B=P.offset(this.scroll),U=I[0].oldValue.replace(h.default.CONTENTS,""),G=new d.default().insert(U),$=new d.default().insert(P.value()),X=new d.default().retain(B).concat(G.diff($,K));k=X.reduce(function(Q,Ne){return Ne.insert?Q.insert(Ne.insert,R):Q.push(Ne)},new d.default),this.delta=z.compose(k)}else this.delta=this.getDelta(),(!k||!(0,T.default)(z.compose(k),this.delta))&&(k=z.diff(this.delta,K));return k}}]),O}();function q(O,M){return Object.keys(M).reduce(function(k,I){return O[I]==null||(M[I]===O[I]?k[I]=M[I]:Array.isArray(M[I])?M[I].indexOf(O[I])<0&&(k[I]=M[I].concat([O[I]])):k[I]=[M[I],O[I]]),k},{})}function J(O){return O.reduce(function(M,k){if(k.insert===1){var I=(0,S.default)(k.attributes);return delete I.image,M.insert({image:k.attributes.image},I)}if(k.attributes!=null&&(k.attributes.list===!0||k.attributes.bullet===!0)&&(k=(0,S.default)(k),k.attributes.list?k.attributes.list="ordered":(k.attributes.list="bullet",delete k.attributes.bullet)),typeof k.insert=="string"){var K=k.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return M.insert(K,k.attributes)}return M.push(k)},new d.default)}n.default=Y},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var l=function(){function C(T,_){var E=[],A=!0,L=!1,F=void 0;try{for(var W=T[Symbol.iterator](),Y;!(A=(Y=W.next()).done)&&(E.push(Y.value),!(_&&E.length===_));A=!0);}catch(q){L=!0,F=q}finally{try{!A&&W.return&&W.return()}finally{if(L)throw F}}return E}return function(T,_){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return C(T,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function C(T,_){for(var E=0;E<_.length;E++){var A=_[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(T,A.key,A)}}return function(T,_,E){return _&&C(T.prototype,_),E&&C(T,E),T}}(),o=a(0),c=h(o),d=a(21),m=h(d),u=a(11),p=h(u),g=a(8),j=h(g),y=a(10),v=h(y);function h(C){return C&&C.__esModule?C:{default:C}}function f(C){if(Array.isArray(C)){for(var T=0,_=Array(C.length);T<C.length;T++)_[T]=C[T];return _}else return Array.from(C)}function N(C,T){if(!(C instanceof T))throw new TypeError("Cannot call a class as a function")}var b=(0,v.default)("quill:selection"),w=function C(T){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;N(this,C),this.index=T,this.length=_},D=function(){function C(T,_){var E=this;N(this,C),this.emitter=_,this.scroll=T,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new w(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){E.mouseDown||setTimeout(E.update.bind(E,j.default.sources.USER),1)}),this.emitter.on(j.default.events.EDITOR_CHANGE,function(A,L){A===j.default.events.TEXT_CHANGE&&L.length()>0&&E.update(j.default.sources.SILENT)}),this.emitter.on(j.default.events.SCROLL_BEFORE_UPDATE,function(){if(E.hasFocus()){var A=E.getNativeRange();A!=null&&A.start.node!==E.cursor.textNode&&E.emitter.once(j.default.events.SCROLL_UPDATE,function(){try{E.setNativeRange(A.start.node,A.start.offset,A.end.node,A.end.offset)}catch{}})}}),this.emitter.on(j.default.events.SCROLL_OPTIMIZE,function(A,L){if(L.range){var F=L.range,W=F.startNode,Y=F.startOffset,q=F.endNode,J=F.endOffset;E.setNativeRange(W,Y,q,J)}}),this.update(j.default.sources.SILENT)}return i(C,[{key:"handleComposition",value:function(){var _=this;this.root.addEventListener("compositionstart",function(){_.composing=!0}),this.root.addEventListener("compositionend",function(){if(_.composing=!1,_.cursor.parent){var E=_.cursor.restore();if(!E)return;setTimeout(function(){_.setNativeRange(E.startNode,E.startOffset,E.endNode,E.endOffset)},1)}})}},{key:"handleDragging",value:function(){var _=this;this.emitter.listenDOM("mousedown",document.body,function(){_.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){_.mouseDown=!1,_.update(j.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(_,E){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[_])){this.scroll.update();var A=this.getNativeRange();if(!(A==null||!A.native.collapsed||c.default.query(_,c.default.Scope.BLOCK))){if(A.start.node!==this.cursor.textNode){var L=c.default.find(A.start.node,!1);if(L==null)return;if(L instanceof c.default.Leaf){var F=L.split(A.start.offset);L.parent.insertBefore(this.cursor,F)}else L.insertBefore(this.cursor,A.start.node);this.cursor.attach()}this.cursor.format(_,E),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(_){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=this.scroll.length();_=Math.min(_,A-1),E=Math.min(_+E,A-1)-_;var L=void 0,F=this.scroll.leaf(_),W=l(F,2),Y=W[0],q=W[1];if(Y==null)return null;var J=Y.position(q,!0),O=l(J,2);L=O[0],q=O[1];var M=document.createRange();if(E>0){M.setStart(L,q);var k=this.scroll.leaf(_+E),I=l(k,2);if(Y=I[0],q=I[1],Y==null)return null;var K=Y.position(q,!0),z=l(K,2);return L=z[0],q=z[1],M.setEnd(L,q),M.getBoundingClientRect()}else{var P="left",R=void 0;return L instanceof Text?(q<L.data.length?(M.setStart(L,q),M.setEnd(L,q+1)):(M.setStart(L,q-1),M.setEnd(L,q),P="right"),R=M.getBoundingClientRect()):(R=Y.domNode.getBoundingClientRect(),q>0&&(P="right")),{bottom:R.top+R.height,height:R.height,left:R[P],right:R[P],top:R.top,width:0}}}},{key:"getNativeRange",value:function(){var _=document.getSelection();if(_==null||_.rangeCount<=0)return null;var E=_.getRangeAt(0);if(E==null)return null;var A=this.normalizeNative(E);return b.info("getNativeRange",A),A}},{key:"getRange",value:function(){var _=this.getNativeRange();if(_==null)return[null,null];var E=this.normalizedToRange(_);return[E,_]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(_){var E=this,A=[[_.start.node,_.start.offset]];_.native.collapsed||A.push([_.end.node,_.end.offset]);var L=A.map(function(Y){var q=l(Y,2),J=q[0],O=q[1],M=c.default.find(J,!0),k=M.offset(E.scroll);return O===0?k:M instanceof c.default.Container?k+M.length():k+M.index(J,O)}),F=Math.min(Math.max.apply(Math,f(L)),this.scroll.length()-1),W=Math.min.apply(Math,[F].concat(f(L)));return new w(W,F-W)}},{key:"normalizeNative",value:function(_){if(!S(this.root,_.startContainer)||!_.collapsed&&!S(this.root,_.endContainer))return null;var E={start:{node:_.startContainer,offset:_.startOffset},end:{node:_.endContainer,offset:_.endOffset},native:_};return[E.start,E.end].forEach(function(A){for(var L=A.node,F=A.offset;!(L instanceof Text)&&L.childNodes.length>0;)if(L.childNodes.length>F)L=L.childNodes[F],F=0;else if(L.childNodes.length===F)L=L.lastChild,F=L instanceof Text?L.data.length:L.childNodes.length+1;else break;A.node=L,A.offset=F}),E}},{key:"rangeToNative",value:function(_){var E=this,A=_.collapsed?[_.index]:[_.index,_.index+_.length],L=[],F=this.scroll.length();return A.forEach(function(W,Y){W=Math.min(F-1,W);var q=void 0,J=E.scroll.leaf(W),O=l(J,2),M=O[0],k=O[1],I=M.position(k,Y!==0),K=l(I,2);q=K[0],k=K[1],L.push(q,k)}),L.length<2&&(L=L.concat(L)),L}},{key:"scrollIntoView",value:function(_){var E=this.lastRange;if(E!=null){var A=this.getBounds(E.index,E.length);if(A!=null){var L=this.scroll.length()-1,F=this.scroll.line(Math.min(E.index,L)),W=l(F,1),Y=W[0],q=Y;if(E.length>0){var J=this.scroll.line(Math.min(E.index+E.length,L)),O=l(J,1);q=O[0]}if(!(Y==null||q==null)){var M=_.getBoundingClientRect();A.top<M.top?_.scrollTop-=M.top-A.top:A.bottom>M.bottom&&(_.scrollTop+=A.bottom-M.bottom)}}}}},{key:"setNativeRange",value:function(_,E){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_,L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:E,F=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(b.info("setNativeRange",_,E,A,L),!(_!=null&&(this.root.parentNode==null||_.parentNode==null||A.parentNode==null))){var W=document.getSelection();if(W!=null)if(_!=null){this.hasFocus()||this.root.focus();var Y=(this.getNativeRange()||{}).native;if(Y==null||F||_!==Y.startContainer||E!==Y.startOffset||A!==Y.endContainer||L!==Y.endOffset){_.tagName=="BR"&&(E=[].indexOf.call(_.parentNode.childNodes,_),_=_.parentNode),A.tagName=="BR"&&(L=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode);var q=document.createRange();q.setStart(_,E),q.setEnd(A,L),W.removeAllRanges(),W.addRange(q)}}else W.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(_){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:j.default.sources.API;if(typeof E=="string"&&(A=E,E=!1),b.info("setRange",_),_!=null){var L=this.rangeToNative(_);this.setNativeRange.apply(this,f(L).concat([E]))}else this.setNativeRange(null);this.update(A)}},{key:"update",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:j.default.sources.USER,E=this.lastRange,A=this.getRange(),L=l(A,2),F=L[0],W=L[1];if(this.lastRange=F,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,p.default)(E,this.lastRange)){var Y;!this.composing&&W!=null&&W.native.collapsed&&W.start.node!==this.cursor.textNode&&this.cursor.restore();var q=[j.default.events.SELECTION_CHANGE,(0,m.default)(this.lastRange),(0,m.default)(E),_];if((Y=this.emitter).emit.apply(Y,[j.default.events.EDITOR_CHANGE].concat(q)),_!==j.default.sources.SILENT){var J;(J=this.emitter).emit.apply(J,q)}}}}]),C}();function S(C,T){try{T.parentNode}catch{return!1}return T instanceof Text&&(T=T.parentNode),C.contains(T)}n.Range=w,n.default=D},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function j(y,v){for(var h=0;h<v.length;h++){var f=v[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(y,f.key,f)}}return function(y,v,h){return v&&j(y.prototype,v),h&&j(y,h),y}}(),i=function j(y,v,h){y===null&&(y=Function.prototype);var f=Object.getOwnPropertyDescriptor(y,v);if(f===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:j(N,v,h)}else{if("value"in f)return f.value;var b=f.get;return b===void 0?void 0:b.call(h)}},o=a(0),c=d(o);function d(j){return j&&j.__esModule?j:{default:j}}function m(j,y){if(!(j instanceof y))throw new TypeError("Cannot call a class as a function")}function u(j,y){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:j}function p(j,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);j.prototype=Object.create(y&&y.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(j,y):j.__proto__=y)}var g=function(j){p(y,j);function y(){return m(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return l(y,[{key:"insertInto",value:function(h,f){h.children.length===0?i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"insertInto",this).call(this,h,f):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),y}(c.default.Embed);g.blotName="break",g.tagName="BR",n.default=g},function(r,n,a){var l=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var j in g)g.hasOwnProperty(j)&&(p[j]=g[j])};return function(p,g){u(p,g);function j(){this.constructor=p}p.prototype=g===null?Object.create(g):(j.prototype=g.prototype,new j)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=a(44),o=a(30),c=a(1),d=function(u){l(p,u);function p(g){var j=u.call(this,g)||this;return j.build(),j}return p.prototype.appendChild=function(g){this.insertBefore(g)},p.prototype.attach=function(){u.prototype.attach.call(this),this.children.forEach(function(g){g.attach()})},p.prototype.build=function(){var g=this;this.children=new i.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(j){try{var y=m(j);g.insertBefore(y,g.children.head||void 0)}catch(v){if(v instanceof c.ParchmentError)return;throw v}})},p.prototype.deleteAt=function(g,j){if(g===0&&j===this.length())return this.remove();this.children.forEachAt(g,j,function(y,v,h){y.deleteAt(v,h)})},p.prototype.descendant=function(g,j){var y=this.children.find(j),v=y[0],h=y[1];return g.blotName==null&&g(v)||g.blotName!=null&&v instanceof g?[v,h]:v instanceof p?v.descendant(g,h):[null,-1]},p.prototype.descendants=function(g,j,y){j===void 0&&(j=0),y===void 0&&(y=Number.MAX_VALUE);var v=[],h=y;return this.children.forEachAt(j,y,function(f,N,b){(g.blotName==null&&g(f)||g.blotName!=null&&f instanceof g)&&v.push(f),f instanceof p&&(v=v.concat(f.descendants(g,N,h))),h-=b}),v},p.prototype.detach=function(){this.children.forEach(function(g){g.detach()}),u.prototype.detach.call(this)},p.prototype.formatAt=function(g,j,y,v){this.children.forEachAt(g,j,function(h,f,N){h.formatAt(f,N,y,v)})},p.prototype.insertAt=function(g,j,y){var v=this.children.find(g),h=v[0],f=v[1];if(h)h.insertAt(f,j,y);else{var N=y==null?c.create("text",j):c.create(j,y);this.appendChild(N)}},p.prototype.insertBefore=function(g,j){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(y){return g instanceof y}))throw new c.ParchmentError("Cannot insert "+g.statics.blotName+" into "+this.statics.blotName);g.insertInto(this,j)},p.prototype.length=function(){return this.children.reduce(function(g,j){return g+j.length()},0)},p.prototype.moveChildren=function(g,j){this.children.forEach(function(y){g.insertBefore(y,j)})},p.prototype.optimize=function(g){if(u.prototype.optimize.call(this,g),this.children.length===0)if(this.statics.defaultChild!=null){var j=c.create(this.statics.defaultChild);this.appendChild(j),j.optimize(g)}else this.remove()},p.prototype.path=function(g,j){j===void 0&&(j=!1);var y=this.children.find(g,j),v=y[0],h=y[1],f=[[this,g]];return v instanceof p?f.concat(v.path(h,j)):(v!=null&&f.push([v,h]),f)},p.prototype.removeChild=function(g){this.children.remove(g)},p.prototype.replace=function(g){g instanceof p&&g.moveChildren(this),u.prototype.replace.call(this,g)},p.prototype.split=function(g,j){if(j===void 0&&(j=!1),!j){if(g===0)return this;if(g===this.length())return this.next}var y=this.clone();return this.parent.insertBefore(y,this.next),this.children.forEachAt(g,this.length(),function(v,h,f){v=v.split(h,j),y.appendChild(v)}),y},p.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},p.prototype.update=function(g,j){var y=this,v=[],h=[];g.forEach(function(f){f.target===y.domNode&&f.type==="childList"&&(v.push.apply(v,f.addedNodes),h.push.apply(h,f.removedNodes))}),h.forEach(function(f){if(!(f.parentNode!=null&&f.tagName!=="IFRAME"&&document.body.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var N=c.find(f);N!=null&&(N.domNode.parentNode==null||N.domNode.parentNode===y.domNode)&&N.detach()}}),v.filter(function(f){return f.parentNode==y.domNode}).sort(function(f,N){return f===N?0:f.compareDocumentPosition(N)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(f){var N=null;f.nextSibling!=null&&(N=c.find(f.nextSibling));var b=m(f);(b.next!=N||b.next==null)&&(b.parent!=null&&b.parent.removeChild(y),y.insertBefore(b,N||void 0))})},p}(o.default);function m(u){var p=c.find(u);if(p==null)try{p=c.create(u)}catch{p=c.create(c.Scope.INLINE),[].slice.call(u.childNodes).forEach(function(j){p.domNode.appendChild(j)}),u.parentNode&&u.parentNode.replaceChild(p.domNode,u),p.attach()}return p}n.default=d},function(r,n,a){var l=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var j in g)g.hasOwnProperty(j)&&(p[j]=g[j])};return function(p,g){u(p,g);function j(){this.constructor=p}p.prototype=g===null?Object.create(g):(j.prototype=g.prototype,new j)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=a(12),o=a(31),c=a(17),d=a(1),m=function(u){l(p,u);function p(g){var j=u.call(this,g)||this;return j.attributes=new o.default(j.domNode),j}return p.formats=function(g){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return g.tagName.toLowerCase()},p.prototype.format=function(g,j){var y=d.query(g);y instanceof i.default?this.attributes.attribute(y,j):j&&y!=null&&(g!==this.statics.blotName||this.formats()[g]!==j)&&this.replaceWith(g,j)},p.prototype.formats=function(){var g=this.attributes.values(),j=this.statics.formats(this.domNode);return j!=null&&(g[this.statics.blotName]=j),g},p.prototype.replaceWith=function(g,j){var y=u.prototype.replaceWith.call(this,g,j);return this.attributes.copy(y),y},p.prototype.update=function(g,j){var y=this;u.prototype.update.call(this,g,j),g.some(function(v){return v.target===y.domNode&&v.type==="attributes"})&&this.attributes.build()},p.prototype.wrap=function(g,j){var y=u.prototype.wrap.call(this,g,j);return y instanceof p&&y.statics.scope===this.statics.scope&&this.attributes.move(y),y},p}(c.default);n.default=m},function(r,n,a){var l=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,u){m.__proto__=u}||function(m,u){for(var p in u)u.hasOwnProperty(p)&&(m[p]=u[p])};return function(m,u){d(m,u);function p(){this.constructor=m}m.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=a(30),o=a(1),c=function(d){l(m,d);function m(){return d!==null&&d.apply(this,arguments)||this}return m.value=function(u){return!0},m.prototype.index=function(u,p){return this.domNode===u||this.domNode.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(p,1):-1},m.prototype.position=function(u,p){var g=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return u>0&&(g+=1),[this.parent.domNode,g]},m.prototype.value=function(){var u;return u={},u[this.statics.blotName]=this.statics.value(this.domNode)||!0,u},m.scope=o.Scope.INLINE_BLOT,m}(i.default);n.default=c},function(r,n,a){var l=a(11),i=a(3),o={attributes:{compose:function(d,m,u){typeof d!="object"&&(d={}),typeof m!="object"&&(m={});var p=i(!0,{},m);u||(p=Object.keys(p).reduce(function(j,y){return p[y]!=null&&(j[y]=p[y]),j},{}));for(var g in d)d[g]!==void 0&&m[g]===void 0&&(p[g]=d[g]);return Object.keys(p).length>0?p:void 0},diff:function(d,m){typeof d!="object"&&(d={}),typeof m!="object"&&(m={});var u=Object.keys(d).concat(Object.keys(m)).reduce(function(p,g){return l(d[g],m[g])||(p[g]=m[g]===void 0?null:m[g]),p},{});return Object.keys(u).length>0?u:void 0},transform:function(d,m,u){if(typeof d!="object")return m;if(typeof m=="object"){if(!u)return m;var p=Object.keys(m).reduce(function(g,j){return d[j]===void 0&&(g[j]=m[j]),g},{});return Object.keys(p).length>0?p:void 0}}},iterator:function(d){return new c(d)},length:function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.insert=="string"?d.insert.length:1}};function c(d){this.ops=d,this.index=0,this.offset=0}c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(d){d||(d=1/0);var m=this.ops[this.index];if(m){var u=this.offset,p=o.length(m);if(d>=p-u?(d=p-u,this.index+=1,this.offset=0):this.offset+=d,typeof m.delete=="number")return{delete:d};var g={};return m.attributes&&(g.attributes=m.attributes),typeof m.retain=="number"?g.retain=d:typeof m.insert=="string"?g.insert=m.insert.substr(u,d):g.insert=m.insert,g}else return{retain:1/0}},c.prototype.peek=function(){return this.ops[this.index]},c.prototype.peekLength=function(){return this.ops[this.index]?o.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},c.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var d=this.offset,m=this.index,u=this.next(),p=this.ops.slice(this.index);return this.offset=d,this.index=m,[u].concat(p)}else return[]},r.exports=o},function(r,n){var a=function(){function l(y,v){return v!=null&&y instanceof v}var i;try{i=Map}catch{i=function(){}}var o;try{o=Set}catch{o=function(){}}var c;try{c=Promise}catch{c=function(){}}function d(y,v,h,f,N){typeof v=="object"&&(h=v.depth,f=v.prototype,N=v.includeNonEnumerable,v=v.circular);var b=[],w=[],D=typeof Buffer<"u";typeof v>"u"&&(v=!0),typeof h>"u"&&(h=1/0);function S(C,T){if(C===null)return null;if(T===0)return C;var _,E;if(typeof C!="object")return C;if(l(C,i))_=new i;else if(l(C,o))_=new o;else if(l(C,c))_=new c(function(M,k){C.then(function(I){M(S(I,T-1))},function(I){k(S(I,T-1))})});else if(d.__isArray(C))_=[];else if(d.__isRegExp(C))_=new RegExp(C.source,j(C)),C.lastIndex&&(_.lastIndex=C.lastIndex);else if(d.__isDate(C))_=new Date(C.getTime());else{if(D&&Buffer.isBuffer(C))return Buffer.allocUnsafe?_=Buffer.allocUnsafe(C.length):_=new Buffer(C.length),C.copy(_),_;l(C,Error)?_=Object.create(C):typeof f>"u"?(E=Object.getPrototypeOf(C),_=Object.create(E)):(_=Object.create(f),E=f)}if(v){var A=b.indexOf(C);if(A!=-1)return w[A];b.push(C),w.push(_)}l(C,i)&&C.forEach(function(M,k){var I=S(k,T-1),K=S(M,T-1);_.set(I,K)}),l(C,o)&&C.forEach(function(M){var k=S(M,T-1);_.add(k)});for(var L in C){var F;E&&(F=Object.getOwnPropertyDescriptor(E,L)),!(F&&F.set==null)&&(_[L]=S(C[L],T-1))}if(Object.getOwnPropertySymbols)for(var W=Object.getOwnPropertySymbols(C),L=0;L<W.length;L++){var Y=W[L],q=Object.getOwnPropertyDescriptor(C,Y);q&&!q.enumerable&&!N||(_[Y]=S(C[Y],T-1),q.enumerable||Object.defineProperty(_,Y,{enumerable:!1}))}if(N)for(var J=Object.getOwnPropertyNames(C),L=0;L<J.length;L++){var O=J[L],q=Object.getOwnPropertyDescriptor(C,O);q&&q.enumerable||(_[O]=S(C[O],T-1),Object.defineProperty(_,O,{enumerable:!1}))}return _}return S(y,h)}d.clonePrototype=function(v){if(v===null)return null;var h=function(){};return h.prototype=v,new h};function m(y){return Object.prototype.toString.call(y)}d.__objToStr=m;function u(y){return typeof y=="object"&&m(y)==="[object Date]"}d.__isDate=u;function p(y){return typeof y=="object"&&m(y)==="[object Array]"}d.__isArray=p;function g(y){return typeof y=="object"&&m(y)==="[object RegExp]"}d.__isRegExp=g;function j(y){var v="";return y.global&&(v+="g"),y.ignoreCase&&(v+="i"),y.multiline&&(v+="m"),v}return d.__getRegExpFlags=j,d}();typeof r=="object"&&r.exports&&(r.exports=a)},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function _(E,A){var L=[],F=!0,W=!1,Y=void 0;try{for(var q=E[Symbol.iterator](),J;!(F=(J=q.next()).done)&&(L.push(J.value),!(A&&L.length===A));F=!0);}catch(O){W=!0,Y=O}finally{try{!F&&q.return&&q.return()}finally{if(W)throw Y}}return L}return function(E,A){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return _(E,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function _(E,A){for(var L=0;L<A.length;L++){var F=A[L];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(E,F.key,F)}}return function(E,A,L){return A&&_(E.prototype,A),L&&_(E,L),E}}(),o=function _(E,A,L){E===null&&(E=Function.prototype);var F=Object.getOwnPropertyDescriptor(E,A);if(F===void 0){var W=Object.getPrototypeOf(E);return W===null?void 0:_(W,A,L)}else{if("value"in F)return F.value;var Y=F.get;return Y===void 0?void 0:Y.call(L)}},c=a(0),d=b(c),m=a(8),u=b(m),p=a(4),g=b(p),j=a(16),y=b(j),v=a(13),h=b(v),f=a(25),N=b(f);function b(_){return _&&_.__esModule?_:{default:_}}function w(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}function D(_,E){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:_}function S(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);_.prototype=Object.create(E&&E.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(_,E):_.__proto__=E)}function C(_){return _ instanceof g.default||_ instanceof p.BlockEmbed}var T=function(_){S(E,_);function E(A,L){w(this,E);var F=D(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,A));return F.emitter=L.emitter,Array.isArray(L.whitelist)&&(F.whitelist=L.whitelist.reduce(function(W,Y){return W[Y]=!0,W},{})),F.domNode.addEventListener("DOMNodeInserted",function(){}),F.optimize(),F.enable(),F}return i(E,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(L,F){var W=this.line(L),Y=l(W,2),q=Y[0],J=Y[1],O=this.line(L+F),M=l(O,1),k=M[0];if(o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,L,F),k!=null&&q!==k&&J>0){if(q instanceof p.BlockEmbed||k instanceof p.BlockEmbed){this.optimize();return}if(q instanceof h.default){var I=q.newlineIndex(q.length(),!0);if(I>-1&&(q=q.split(I+1),q===k)){this.optimize();return}}else if(k instanceof h.default){var K=k.newlineIndex(0);K>-1&&k.split(K+1)}var z=k.children.head instanceof y.default?null:k.children.head;q.moveChildren(k,z),q.remove()}this.optimize()}},{key:"enable",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",L)}},{key:"formatAt",value:function(L,F,W,Y){this.whitelist!=null&&!this.whitelist[W]||(o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,L,F,W,Y),this.optimize())}},{key:"insertAt",value:function(L,F,W){if(!(W!=null&&this.whitelist!=null&&!this.whitelist[F])){if(L>=this.length())if(W==null||d.default.query(F,d.default.Scope.BLOCK)==null){var Y=d.default.create(this.statics.defaultChild);this.appendChild(Y),W==null&&F.endsWith(`
`)&&(F=F.slice(0,-1)),Y.insertAt(0,F,W)}else{var q=d.default.create(F,W);this.appendChild(q)}else o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,L,F,W);this.optimize()}}},{key:"insertBefore",value:function(L,F){if(L.statics.scope===d.default.Scope.INLINE_BLOT){var W=d.default.create(this.statics.defaultChild);W.appendChild(L),L=W}o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,L,F)}},{key:"leaf",value:function(L){return this.path(L).pop()||[null,-1]}},{key:"line",value:function(L){return L===this.length()?this.line(L-1):this.descendant(C,L)}},{key:"lines",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,W=function Y(q,J,O){var M=[],k=O;return q.children.forEachAt(J,O,function(I,K,z){C(I)?M.push(I):I instanceof d.default.Container&&(M=M.concat(Y(I,K,k))),k-=z}),M};return W(this,L,F)}},{key:"optimize",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,L,F),L.length>0&&this.emitter.emit(u.default.events.SCROLL_OPTIMIZE,L,F))}},{key:"path",value:function(L){return o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,L).slice(1)}},{key:"update",value:function(L){if(this.batch!==!0){var F=u.default.sources.USER;typeof L=="string"&&(F=L),Array.isArray(L)||(L=this.observer.takeRecords()),L.length>0&&this.emitter.emit(u.default.events.SCROLL_BEFORE_UPDATE,F,L),o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"update",this).call(this,L.concat([])),L.length>0&&this.emitter.emit(u.default.events.SCROLL_UPDATE,F,L)}}}]),E}(d.default.Scroll);T.blotName="scroll",T.className="ql-editor",T.tagName="DIV",T.defaultChild="block",T.allowedChildren=[g.default,p.BlockEmbed,N.default],n.default=T},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},i=function(){function R(B,U){var G=[],$=!0,X=!1,Q=void 0;try{for(var Ne=B[Symbol.iterator](),V;!($=(V=Ne.next()).done)&&(G.push(V.value),!(U&&G.length===U));$=!0);}catch(re){X=!0,Q=re}finally{try{!$&&Ne.return&&Ne.return()}finally{if(X)throw Q}}return G}return function(B,U){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return R(B,U);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function R(B,U){for(var G=0;G<U.length;G++){var $=U[G];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(B,$.key,$)}}return function(B,U,G){return U&&R(B.prototype,U),G&&R(B,G),B}}(),c=a(21),d=_(c),m=a(11),u=_(m),p=a(3),g=_(p),j=a(2),y=_(j),v=a(20),h=_(v),f=a(0),N=_(f),b=a(5),w=_(b),D=a(10),S=_(D),C=a(9),T=_(C);function _(R){return R&&R.__esModule?R:{default:R}}function E(R,B,U){return B in R?Object.defineProperty(R,B,{value:U,enumerable:!0,configurable:!0,writable:!0}):R[B]=U,R}function A(R,B){if(!(R instanceof B))throw new TypeError("Cannot call a class as a function")}function L(R,B){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:R}function F(R,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);R.prototype=Object.create(B&&B.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(R,B):R.__proto__=B)}var W=(0,S.default)("quill:keyboard"),Y=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",q=function(R){F(B,R),o(B,null,[{key:"match",value:function(G,$){return $=P($),["altKey","ctrlKey","metaKey","shiftKey"].some(function(X){return!!$[X]!==G[X]&&$[X]!==null})?!1:$.key===(G.which||G.keyCode)}}]);function B(U,G){A(this,B);var $=L(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,U,G));return $.bindings={},Object.keys($.options.bindings).forEach(function(X){X==="list autofill"&&U.scroll.whitelist!=null&&!U.scroll.whitelist.list||$.options.bindings[X]&&$.addBinding($.options.bindings[X])}),$.addBinding({key:B.keys.ENTER,shiftKey:null},I),$.addBinding({key:B.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?($.addBinding({key:B.keys.BACKSPACE},{collapsed:!0},O),$.addBinding({key:B.keys.DELETE},{collapsed:!0},M)):($.addBinding({key:B.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},O),$.addBinding({key:B.keys.DELETE},{collapsed:!0,suffix:/^.?$/},M)),$.addBinding({key:B.keys.BACKSPACE},{collapsed:!1},k),$.addBinding({key:B.keys.DELETE},{collapsed:!1},k),$.addBinding({key:B.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},O),$.listen(),$}return o(B,[{key:"addBinding",value:function(G){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Q=P(G);if(Q==null||Q.key==null)return W.warn("Attempted to add invalid keyboard binding",Q);typeof $=="function"&&($={handler:$}),typeof X=="function"&&(X={handler:X}),Q=(0,g.default)(Q,$,X),this.bindings[Q.key]=this.bindings[Q.key]||[],this.bindings[Q.key].push(Q)}},{key:"listen",value:function(){var G=this;this.quill.root.addEventListener("keydown",function($){if(!$.defaultPrevented){var X=$.which||$.keyCode,Q=(G.bindings[X]||[]).filter(function(ke){return B.match($,ke)});if(Q.length!==0){var Ne=G.quill.getSelection();if(!(Ne==null||!G.quill.hasFocus())){var V=G.quill.getLine(Ne.index),re=i(V,2),ne=re[0],xe=re[1],me=G.quill.getLeaf(Ne.index),Z=i(me,2),ee=Z[0],ye=Z[1],ve=Ne.length===0?[ee,ye]:G.quill.getLeaf(Ne.index+Ne.length),ue=i(ve,2),we=ue[0],De=ue[1],le=ee instanceof N.default.Text?ee.value().slice(0,ye):"",Ie=we instanceof N.default.Text?we.value().slice(De):"",ge={collapsed:Ne.length===0,empty:Ne.length===0&&ne.length()<=1,format:G.quill.getFormat(Ne),offset:xe,prefix:le,suffix:Ie},Ge=Q.some(function(ke){if(ke.collapsed!=null&&ke.collapsed!==ge.collapsed||ke.empty!=null&&ke.empty!==ge.empty||ke.offset!=null&&ke.offset!==ge.offset)return!1;if(Array.isArray(ke.format)){if(ke.format.every(function(Re){return ge.format[Re]==null}))return!1}else if(l(ke.format)==="object"&&!Object.keys(ke.format).every(function(Re){return ke.format[Re]===!0?ge.format[Re]!=null:ke.format[Re]===!1?ge.format[Re]==null:(0,u.default)(ke.format[Re],ge.format[Re])}))return!1;return ke.prefix!=null&&!ke.prefix.test(ge.prefix)||ke.suffix!=null&&!ke.suffix.test(ge.suffix)?!1:ke.handler.call(G,Ne,ge)!==!0});Ge&&$.preventDefault()}}}})}}]),B}(T.default);q.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},q.DEFAULTS={bindings:{bold:z("bold"),italic:z("italic"),underline:z("underline"),indent:{key:q.keys.TAB,format:["blockquote","indent","list"],handler:function(B,U){if(U.collapsed&&U.offset!==0)return!0;this.quill.format("indent","+1",w.default.sources.USER)}},outdent:{key:q.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(B,U){if(U.collapsed&&U.offset!==0)return!0;this.quill.format("indent","-1",w.default.sources.USER)}},"outdent backspace":{key:q.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(B,U){U.format.indent!=null?this.quill.format("indent","-1",w.default.sources.USER):U.format.list!=null&&this.quill.format("list",!1,w.default.sources.USER)}},"indent code-block":K(!0),"outdent code-block":K(!1),"remove tab":{key:q.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(B){this.quill.deleteText(B.index-1,1,w.default.sources.USER)}},tab:{key:q.keys.TAB,handler:function(B){this.quill.history.cutoff();var U=new y.default().retain(B.index).delete(B.length).insert("	");this.quill.updateContents(U,w.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(B.index+1,w.default.sources.SILENT)}},"list empty enter":{key:q.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(B,U){this.quill.format("list",!1,w.default.sources.USER),U.format.indent&&this.quill.format("indent",!1,w.default.sources.USER)}},"checklist enter":{key:q.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(B){var U=this.quill.getLine(B.index),G=i(U,2),$=G[0],X=G[1],Q=(0,g.default)({},$.formats(),{list:"checked"}),Ne=new y.default().retain(B.index).insert(`
`,Q).retain($.length()-X-1).retain(1,{list:"unchecked"});this.quill.updateContents(Ne,w.default.sources.USER),this.quill.setSelection(B.index+1,w.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:q.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(B,U){var G=this.quill.getLine(B.index),$=i(G,2),X=$[0],Q=$[1],Ne=new y.default().retain(B.index).insert(`
`,U.format).retain(X.length()-Q-1).retain(1,{header:null});this.quill.updateContents(Ne,w.default.sources.USER),this.quill.setSelection(B.index+1,w.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(B,U){var G=U.prefix.length,$=this.quill.getLine(B.index),X=i($,2),Q=X[0],Ne=X[1];if(Ne>G)return!0;var V=void 0;switch(U.prefix.trim()){case"[]":case"[ ]":V="unchecked";break;case"[x]":V="checked";break;case"-":case"*":V="bullet";break;default:V="ordered"}this.quill.insertText(B.index," ",w.default.sources.USER),this.quill.history.cutoff();var re=new y.default().retain(B.index-Ne).delete(G+1).retain(Q.length()-2-Ne).retain(1,{list:V});this.quill.updateContents(re,w.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(B.index-G,w.default.sources.SILENT)}},"code exit":{key:q.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(B){var U=this.quill.getLine(B.index),G=i(U,2),$=G[0],X=G[1],Q=new y.default().retain(B.index+$.length()-X-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Q,w.default.sources.USER)}},"embed left":J(q.keys.LEFT,!1),"embed left shift":J(q.keys.LEFT,!0),"embed right":J(q.keys.RIGHT,!1),"embed right shift":J(q.keys.RIGHT,!0)}};function J(R,B){var U,G=R===q.keys.LEFT?"prefix":"suffix";return U={key:R,shiftKey:B,altKey:null},E(U,G,/^$/),E(U,"handler",function(X){var Q=X.index;R===q.keys.RIGHT&&(Q+=X.length+1);var Ne=this.quill.getLeaf(Q),V=i(Ne,1),re=V[0];return re instanceof N.default.Embed?(R===q.keys.LEFT?B?this.quill.setSelection(X.index-1,X.length+1,w.default.sources.USER):this.quill.setSelection(X.index-1,w.default.sources.USER):B?this.quill.setSelection(X.index,X.length+1,w.default.sources.USER):this.quill.setSelection(X.index+X.length+1,w.default.sources.USER),!1):!0}),U}function O(R,B){if(!(R.index===0||this.quill.getLength()<=1)){var U=this.quill.getLine(R.index),G=i(U,1),$=G[0],X={};if(B.offset===0){var Q=this.quill.getLine(R.index-1),Ne=i(Q,1),V=Ne[0];if(V!=null&&V.length()>1){var re=$.formats(),ne=this.quill.getFormat(R.index-1,1);X=h.default.attributes.diff(re,ne)||{}}}var xe=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(B.prefix)?2:1;this.quill.deleteText(R.index-xe,xe,w.default.sources.USER),Object.keys(X).length>0&&this.quill.formatLine(R.index-xe,xe,X,w.default.sources.USER),this.quill.focus()}}function M(R,B){var U=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(B.suffix)?2:1;if(!(R.index>=this.quill.getLength()-U)){var G={},$=0,X=this.quill.getLine(R.index),Q=i(X,1),Ne=Q[0];if(B.offset>=Ne.length()-1){var V=this.quill.getLine(R.index+1),re=i(V,1),ne=re[0];if(ne){var xe=Ne.formats(),me=this.quill.getFormat(R.index,1);G=h.default.attributes.diff(xe,me)||{},$=ne.length()}}this.quill.deleteText(R.index,U,w.default.sources.USER),Object.keys(G).length>0&&this.quill.formatLine(R.index+$-1,U,G,w.default.sources.USER)}}function k(R){var B=this.quill.getLines(R),U={};if(B.length>1){var G=B[0].formats(),$=B[B.length-1].formats();U=h.default.attributes.diff($,G)||{}}this.quill.deleteText(R,w.default.sources.USER),Object.keys(U).length>0&&this.quill.formatLine(R.index,1,U,w.default.sources.USER),this.quill.setSelection(R.index,w.default.sources.SILENT),this.quill.focus()}function I(R,B){var U=this;R.length>0&&this.quill.scroll.deleteAt(R.index,R.length);var G=Object.keys(B.format).reduce(function($,X){return N.default.query(X,N.default.Scope.BLOCK)&&!Array.isArray(B.format[X])&&($[X]=B.format[X]),$},{});this.quill.insertText(R.index,`
`,G,w.default.sources.USER),this.quill.setSelection(R.index+1,w.default.sources.SILENT),this.quill.focus(),Object.keys(B.format).forEach(function($){G[$]==null&&(Array.isArray(B.format[$])||$!=="link"&&U.quill.format($,B.format[$],w.default.sources.USER))})}function K(R){return{key:q.keys.TAB,shiftKey:!R,format:{"code-block":!0},handler:function(U){var G=N.default.query("code-block"),$=U.index,X=U.length,Q=this.quill.scroll.descendant(G,$),Ne=i(Q,2),V=Ne[0],re=Ne[1];if(V!=null){var ne=this.quill.getIndex(V),xe=V.newlineIndex(re,!0)+1,me=V.newlineIndex(ne+re+X),Z=V.domNode.textContent.slice(xe,me).split(`
`);re=0,Z.forEach(function(ee,ye){R?(V.insertAt(xe+re,G.TAB),re+=G.TAB.length,ye===0?$+=G.TAB.length:X+=G.TAB.length):ee.startsWith(G.TAB)&&(V.deleteAt(xe+re,G.TAB.length),re-=G.TAB.length,ye===0?$-=G.TAB.length:X-=G.TAB.length),re+=ee.length+1}),this.quill.update(w.default.sources.USER),this.quill.setSelection($,X,w.default.sources.SILENT)}}}}function z(R){return{key:R[0].toUpperCase(),shortKey:!0,handler:function(U,G){this.quill.format(R,!G.format[R],w.default.sources.USER)}}}function P(R){if(typeof R=="string"||typeof R=="number")return P({key:R});if((typeof R>"u"?"undefined":l(R))==="object"&&(R=(0,d.default)(R,!1)),typeof R.key=="string")if(q.keys[R.key.toUpperCase()]!=null)R.key=q.keys[R.key.toUpperCase()];else if(R.key.length===1)R.key=R.key.toUpperCase().charCodeAt(0);else return null;return R.shortKey&&(R[Y]=R.shortKey,delete R.shortKey),R}n.default=q,n.SHORTKEY=Y},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function h(f,N){var b=[],w=!0,D=!1,S=void 0;try{for(var C=f[Symbol.iterator](),T;!(w=(T=C.next()).done)&&(b.push(T.value),!(N&&b.length===N));w=!0);}catch(_){D=!0,S=_}finally{try{!w&&C.return&&C.return()}finally{if(D)throw S}}return b}return function(f,N){if(Array.isArray(f))return f;if(Symbol.iterator in Object(f))return h(f,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function h(f,N,b){f===null&&(f=Function.prototype);var w=Object.getOwnPropertyDescriptor(f,N);if(w===void 0){var D=Object.getPrototypeOf(f);return D===null?void 0:h(D,N,b)}else{if("value"in w)return w.value;var S=w.get;return S===void 0?void 0:S.call(b)}},o=function(){function h(f,N){for(var b=0;b<N.length;b++){var w=N[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}return function(f,N,b){return N&&h(f.prototype,N),b&&h(f,b),f}}(),c=a(0),d=p(c),m=a(7),u=p(m);function p(h){return h&&h.__esModule?h:{default:h}}function g(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function j(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:h}function y(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(h,f):h.__proto__=f)}var v=function(h){y(f,h),o(f,null,[{key:"value",value:function(){}}]);function f(N,b){g(this,f);var w=j(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,N));return w.selection=b,w.textNode=document.createTextNode(f.CONTENTS),w.domNode.appendChild(w.textNode),w._length=0,w}return o(f,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(b,w){if(this._length!==0)return i(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"format",this).call(this,b,w);for(var D=this,S=0;D!=null&&D.statics.scope!==d.default.Scope.BLOCK_BLOT;)S+=D.offset(D.parent),D=D.parent;D!=null&&(this._length=f.CONTENTS.length,D.optimize(),D.formatAt(S,f.CONTENTS.length,b,w),this._length=0)}},{key:"index",value:function(b,w){return b===this.textNode?0:i(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"index",this).call(this,b,w)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){i(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var b=this.textNode,w=this.selection.getNativeRange(),D=void 0,S=void 0,C=void 0;if(w!=null&&w.start.node===b&&w.end.node===b){var T=[b,w.start.offset,w.end.offset];D=T[0],S=T[1],C=T[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==f.CONTENTS){var _=this.textNode.data.split(f.CONTENTS).join("");this.next instanceof u.default?(D=this.next.domNode,this.next.insertAt(0,_),this.textNode.data=f.CONTENTS):(this.textNode.data=_,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(f.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),S!=null){var E=[S,C].map(function(L){return Math.max(0,Math.min(D.data.length,L-1))}),A=l(E,2);return S=A[0],C=A[1],{startNode:D,startOffset:S,endNode:D,endOffset:C}}}}},{key:"update",value:function(b,w){var D=this;if(b.some(function(C){return C.type==="characterData"&&C.target===D.textNode})){var S=this.restore();S&&(w.range=S)}}},{key:"value",value:function(){return""}}]),f}(d.default.Embed);v.blotName="cursor",v.className="ql-cursor",v.tagName="span",v.CONTENTS="\uFEFF",n.default=v},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(0),i=d(l),o=a(4),c=d(o);function d(j){return j&&j.__esModule?j:{default:j}}function m(j,y){if(!(j instanceof y))throw new TypeError("Cannot call a class as a function")}function u(j,y){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:j}function p(j,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);j.prototype=Object.create(y&&y.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(j,y):j.__proto__=y)}var g=function(j){p(y,j);function y(){return m(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(i.default.Container);g.allowedChildren=[c.default,o.BlockEmbed,g],n.default=g},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var l=function(){function v(h,f){for(var N=0;N<f.length;N++){var b=f[N];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,f,N){return f&&v(h.prototype,f),N&&v(h,N),h}}(),i=function v(h,f,N){h===null&&(h=Function.prototype);var b=Object.getOwnPropertyDescriptor(h,f);if(b===void 0){var w=Object.getPrototypeOf(h);return w===null?void 0:v(w,f,N)}else{if("value"in b)return b.value;var D=b.get;return D===void 0?void 0:D.call(N)}},o=a(0),c=d(o);function d(v){return v&&v.__esModule?v:{default:v}}function m(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}function u(v,h){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:v}function p(v,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);v.prototype=Object.create(h&&h.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(v,h):v.__proto__=h)}var g=function(v){p(h,v);function h(){return m(this,h),u(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return l(h,[{key:"value",value:function(N){var b=i(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"value",this).call(this,N);return b.startsWith("rgb(")?(b=b.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+b.split(",").map(function(w){return("00"+parseInt(w).toString(16)).slice(-2)}).join("")):b}}]),h}(c.default.Attributor.Style),j=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),y=new g("color","color",{scope:c.default.Scope.INLINE});n.ColorAttributor=g,n.ColorClass=j,n.ColorStyle=y},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var l=function(){function y(v,h){for(var f=0;f<h.length;f++){var N=h[f];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(v,N.key,N)}}return function(v,h,f){return h&&y(v.prototype,h),f&&y(v,f),v}}(),i=function y(v,h,f){v===null&&(v=Function.prototype);var N=Object.getOwnPropertyDescriptor(v,h);if(N===void 0){var b=Object.getPrototypeOf(v);return b===null?void 0:y(b,h,f)}else{if("value"in N)return N.value;var w=N.get;return w===void 0?void 0:w.call(f)}},o=a(6),c=d(o);function d(y){return y&&y.__esModule?y:{default:y}}function m(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function u(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function p(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var g=function(y){p(v,y);function v(){return m(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return l(v,[{key:"format",value:function(f,N){if(f!==this.statics.blotName||!N)return i(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,f,N);N=this.constructor.sanitize(N),this.domNode.setAttribute("href",N)}}],[{key:"create",value:function(f){var N=i(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,f);return f=this.sanitize(f),N.setAttribute("href",f),N.setAttribute("rel","noopener noreferrer"),N.setAttribute("target","_blank"),N}},{key:"formats",value:function(f){return f.getAttribute("href")}},{key:"sanitize",value:function(f){return j(f,this.PROTOCOL_WHITELIST)?f:this.SANITIZED_URL}}]),v}(c.default);g.blotName="link",g.tagName="A",g.SANITIZED_URL="about:blank",g.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function j(y,v){var h=document.createElement("a");h.href=y;var f=h.href.slice(0,h.href.indexOf(":"));return v.indexOf(f)>-1}n.default=g,n.sanitize=j},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},i=function(){function v(h,f){for(var N=0;N<f.length;N++){var b=f[N];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,f,N){return f&&v(h.prototype,f),N&&v(h,N),h}}(),o=a(23),c=u(o),d=a(107),m=u(d);function u(v){return v&&v.__esModule?v:{default:v}}function p(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}var g=0;function j(v,h){v.setAttribute(h,v.getAttribute(h)!=="true")}var y=function(){function v(h){var f=this;p(this,v),this.select=h,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){f.togglePicker()}),this.label.addEventListener("keydown",function(N){switch(N.keyCode){case c.default.keys.ENTER:f.togglePicker();break;case c.default.keys.ESCAPE:f.escape(),N.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return i(v,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),j(this.label,"aria-expanded"),j(this.options,"aria-hidden")}},{key:"buildItem",value:function(f){var N=this,b=document.createElement("span");return b.tabIndex="0",b.setAttribute("role","button"),b.classList.add("ql-picker-item"),f.hasAttribute("value")&&b.setAttribute("data-value",f.getAttribute("value")),f.textContent&&b.setAttribute("data-label",f.textContent),b.addEventListener("click",function(){N.selectItem(b,!0)}),b.addEventListener("keydown",function(w){switch(w.keyCode){case c.default.keys.ENTER:N.selectItem(b,!0),w.preventDefault();break;case c.default.keys.ESCAPE:N.escape(),w.preventDefault();break}}),b}},{key:"buildLabel",value:function(){var f=document.createElement("span");return f.classList.add("ql-picker-label"),f.innerHTML=m.default,f.tabIndex="0",f.setAttribute("role","button"),f.setAttribute("aria-expanded","false"),this.container.appendChild(f),f}},{key:"buildOptions",value:function(){var f=this,N=document.createElement("span");N.classList.add("ql-picker-options"),N.setAttribute("aria-hidden","true"),N.tabIndex="-1",N.id="ql-picker-options-"+g,g+=1,this.label.setAttribute("aria-controls",N.id),this.options=N,[].slice.call(this.select.options).forEach(function(b){var w=f.buildItem(b);N.appendChild(w),b.selected===!0&&f.selectItem(w)}),this.container.appendChild(N)}},{key:"buildPicker",value:function(){var f=this;[].slice.call(this.select.attributes).forEach(function(N){f.container.setAttribute(N.name,N.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var f=this;this.close(),setTimeout(function(){return f.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(f){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,b=this.container.querySelector(".ql-selected");if(f!==b&&(b!=null&&b.classList.remove("ql-selected"),f!=null&&(f.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(f.parentNode.children,f),f.hasAttribute("data-value")?this.label.setAttribute("data-value",f.getAttribute("data-value")):this.label.removeAttribute("data-value"),f.hasAttribute("data-label")?this.label.setAttribute("data-label",f.getAttribute("data-label")):this.label.removeAttribute("data-label"),N))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":l(Event))==="object"){var w=document.createEvent("Event");w.initEvent("change",!0,!0),this.select.dispatchEvent(w)}this.close()}}},{key:"update",value:function(){var f=void 0;if(this.select.selectedIndex>-1){var N=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];f=this.select.options[this.select.selectedIndex],this.selectItem(N)}else this.selectItem(null);var b=f!=null&&f!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",b)}}]),v}();n.default=y},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(0),i=W(l),o=a(5),c=W(o),d=a(4),m=W(d),u=a(16),p=W(u),g=a(25),j=W(g),y=a(24),v=W(y),h=a(35),f=W(h),N=a(6),b=W(N),w=a(22),D=W(w),S=a(7),C=W(S),T=a(55),_=W(T),E=a(42),A=W(E),L=a(23),F=W(L);function W(Y){return Y&&Y.__esModule?Y:{default:Y}}c.default.register({"blots/block":m.default,"blots/block/embed":d.BlockEmbed,"blots/break":p.default,"blots/container":j.default,"blots/cursor":v.default,"blots/embed":f.default,"blots/inline":b.default,"blots/scroll":D.default,"blots/text":C.default,"modules/clipboard":_.default,"modules/history":A.default,"modules/keyboard":F.default}),i.default.register(m.default,p.default,v.default,b.default,D.default,C.default),n.default=c.default},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(1),i=function(){function o(c){this.domNode=c,this.domNode[l.DATA_KEY]={blot:this}}return Object.defineProperty(o.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),o.create=function(c){if(this.tagName==null)throw new l.ParchmentError("Blot definition missing tagName");var d;return Array.isArray(this.tagName)?(typeof c=="string"&&(c=c.toUpperCase(),parseInt(c).toString()===c&&(c=parseInt(c))),typeof c=="number"?d=document.createElement(this.tagName[c-1]):this.tagName.indexOf(c)>-1?d=document.createElement(c):d=document.createElement(this.tagName[0])):d=document.createElement(this.tagName),this.className&&d.classList.add(this.className),d},o.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},o.prototype.clone=function(){var c=this.domNode.cloneNode(!1);return l.create(c)},o.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[l.DATA_KEY]},o.prototype.deleteAt=function(c,d){var m=this.isolate(c,d);m.remove()},o.prototype.formatAt=function(c,d,m,u){var p=this.isolate(c,d);if(l.query(m,l.Scope.BLOT)!=null&&u)p.wrap(m,u);else if(l.query(m,l.Scope.ATTRIBUTE)!=null){var g=l.create(this.statics.scope);p.wrap(g),g.format(m,u)}},o.prototype.insertAt=function(c,d,m){var u=m==null?l.create("text",d):l.create(d,m),p=this.split(c);this.parent.insertBefore(u,p)},o.prototype.insertInto=function(c,d){d===void 0&&(d=null),this.parent!=null&&this.parent.children.remove(this);var m=null;c.children.insertBefore(this,d),d!=null&&(m=d.domNode),(this.domNode.parentNode!=c.domNode||this.domNode.nextSibling!=m)&&c.domNode.insertBefore(this.domNode,m),this.parent=c,this.attach()},o.prototype.isolate=function(c,d){var m=this.split(c);return m.split(d),m},o.prototype.length=function(){return 1},o.prototype.offset=function(c){return c===void 0&&(c=this.parent),this.parent==null||this==c?0:this.parent.children.offset(this)+this.parent.offset(c)},o.prototype.optimize=function(c){this.domNode[l.DATA_KEY]!=null&&delete this.domNode[l.DATA_KEY].mutations},o.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},o.prototype.replace=function(c){c.parent!=null&&(c.parent.insertBefore(this,c.next),c.remove())},o.prototype.replaceWith=function(c,d){var m=typeof c=="string"?l.create(c,d):c;return m.replace(this),m},o.prototype.split=function(c,d){return c===0?this:this.next},o.prototype.update=function(c,d){},o.prototype.wrap=function(c,d){var m=typeof c=="string"?l.create(c,d):c;return this.parent!=null&&this.parent.insertBefore(m,this.next),m.appendChild(this),m},o.blotName="abstract",o}();n.default=i},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(12),i=a(32),o=a(33),c=a(1),d=function(){function m(u){this.attributes={},this.domNode=u,this.build()}return m.prototype.attribute=function(u,p){p?u.add(this.domNode,p)&&(u.value(this.domNode)!=null?this.attributes[u.attrName]=u:delete this.attributes[u.attrName]):(u.remove(this.domNode),delete this.attributes[u.attrName])},m.prototype.build=function(){var u=this;this.attributes={};var p=l.default.keys(this.domNode),g=i.default.keys(this.domNode),j=o.default.keys(this.domNode);p.concat(g).concat(j).forEach(function(y){var v=c.query(y,c.Scope.ATTRIBUTE);v instanceof l.default&&(u.attributes[v.attrName]=v)})},m.prototype.copy=function(u){var p=this;Object.keys(this.attributes).forEach(function(g){var j=p.attributes[g].value(p.domNode);u.format(g,j)})},m.prototype.move=function(u){var p=this;this.copy(u),Object.keys(this.attributes).forEach(function(g){p.attributes[g].remove(p.domNode)}),this.attributes={}},m.prototype.values=function(){var u=this;return Object.keys(this.attributes).reduce(function(p,g){return p[g]=u.attributes[g].value(u.domNode),p},{})},m}();n.default=d},function(r,n,a){var l=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,u){m.__proto__=u}||function(m,u){for(var p in u)u.hasOwnProperty(p)&&(m[p]=u[p])};return function(m,u){d(m,u);function p(){this.constructor=m}m.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=a(12);function o(d,m){var u=d.getAttribute("class")||"";return u.split(/\s+/).filter(function(p){return p.indexOf(m+"-")===0})}var c=function(d){l(m,d);function m(){return d!==null&&d.apply(this,arguments)||this}return m.keys=function(u){return(u.getAttribute("class")||"").split(/\s+/).map(function(p){return p.split("-").slice(0,-1).join("-")})},m.prototype.add=function(u,p){return this.canAdd(u,p)?(this.remove(u),u.classList.add(this.keyName+"-"+p),!0):!1},m.prototype.remove=function(u){var p=o(u,this.keyName);p.forEach(function(g){u.classList.remove(g)}),u.classList.length===0&&u.removeAttribute("class")},m.prototype.value=function(u){var p=o(u,this.keyName)[0]||"",g=p.slice(this.keyName.length+1);return this.canAdd(u,g)?g:""},m}(i.default);n.default=c},function(r,n,a){var l=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,u){m.__proto__=u}||function(m,u){for(var p in u)u.hasOwnProperty(p)&&(m[p]=u[p])};return function(m,u){d(m,u);function p(){this.constructor=m}m.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=a(12);function o(d){var m=d.split("-"),u=m.slice(1).map(function(p){return p[0].toUpperCase()+p.slice(1)}).join("");return m[0]+u}var c=function(d){l(m,d);function m(){return d!==null&&d.apply(this,arguments)||this}return m.keys=function(u){return(u.getAttribute("style")||"").split(";").map(function(p){var g=p.split(":");return g[0].trim()})},m.prototype.add=function(u,p){return this.canAdd(u,p)?(u.style[o(this.keyName)]=p,!0):!1},m.prototype.remove=function(u){u.style[o(this.keyName)]="",u.getAttribute("style")||u.removeAttribute("style")},m.prototype.value=function(u){var p=u.style[o(this.keyName)];return this.canAdd(u,p)?p:""},m}(i.default);n.default=c},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function c(d,m){for(var u=0;u<m.length;u++){var p=m[u];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,m,u){return m&&c(d.prototype,m),u&&c(d,u),d}}();function i(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function(){function c(d,m){i(this,c),this.quill=d,this.options=m,this.modules={}}return l(c,[{key:"init",value:function(){var m=this;Object.keys(this.options.modules).forEach(function(u){m.modules[u]==null&&m.addModule(u)})}},{key:"addModule",value:function(m){var u=this.quill.constructor.import("modules/"+m);return this.modules[m]=new u(this.quill,this.options.modules[m]||{}),this.modules[m]}}]),c}();o.DEFAULTS={modules:{}},o.themes={default:o},n.default=o},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function h(f,N){for(var b=0;b<N.length;b++){var w=N[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}return function(f,N,b){return N&&h(f.prototype,N),b&&h(f,b),f}}(),i=function h(f,N,b){f===null&&(f=Function.prototype);var w=Object.getOwnPropertyDescriptor(f,N);if(w===void 0){var D=Object.getPrototypeOf(f);return D===null?void 0:h(D,N,b)}else{if("value"in w)return w.value;var S=w.get;return S===void 0?void 0:S.call(b)}},o=a(0),c=u(o),d=a(7),m=u(d);function u(h){return h&&h.__esModule?h:{default:h}}function p(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function g(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:h}function j(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(h,f):h.__proto__=f)}var y="\uFEFF",v=function(h){j(f,h);function f(N){p(this,f);var b=g(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,N));return b.contentNode=document.createElement("span"),b.contentNode.setAttribute("contenteditable",!1),[].slice.call(b.domNode.childNodes).forEach(function(w){b.contentNode.appendChild(w)}),b.leftGuard=document.createTextNode(y),b.rightGuard=document.createTextNode(y),b.domNode.appendChild(b.leftGuard),b.domNode.appendChild(b.contentNode),b.domNode.appendChild(b.rightGuard),b}return l(f,[{key:"index",value:function(b,w){return b===this.leftGuard?0:b===this.rightGuard?1:i(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"index",this).call(this,b,w)}},{key:"restore",value:function(b){var w=void 0,D=void 0,S=b.data.split(y).join("");if(b===this.leftGuard)if(this.prev instanceof m.default){var C=this.prev.length();this.prev.insertAt(C,S),w={startNode:this.prev.domNode,startOffset:C+S.length}}else D=document.createTextNode(S),this.parent.insertBefore(c.default.create(D),this),w={startNode:D,startOffset:S.length};else b===this.rightGuard&&(this.next instanceof m.default?(this.next.insertAt(0,S),w={startNode:this.next.domNode,startOffset:S.length}):(D=document.createTextNode(S),this.parent.insertBefore(c.default.create(D),this.next),w={startNode:D,startOffset:S.length}));return b.data=y,w}},{key:"update",value:function(b,w){var D=this;b.forEach(function(S){if(S.type==="characterData"&&(S.target===D.leftGuard||S.target===D.rightGuard)){var C=D.restore(S.target);C&&(w.range=C)}})}}]),f}(c.default.Embed);n.default=v},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var l=a(0),i=o(l);function o(p){return p&&p.__esModule?p:{default:p}}var c={scope:i.default.Scope.BLOCK,whitelist:["right","center","justify"]},d=new i.default.Attributor.Attribute("align","align",c),m=new i.default.Attributor.Class("align","ql-align",c),u=new i.default.Attributor.Style("align","text-align",c);n.AlignAttribute=d,n.AlignClass=m,n.AlignStyle=u},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var l=a(0),i=c(l),o=a(26);function c(u){return u&&u.__esModule?u:{default:u}}var d=new i.default.Attributor.Class("background","ql-bg",{scope:i.default.Scope.INLINE}),m=new o.ColorAttributor("background","background-color",{scope:i.default.Scope.INLINE});n.BackgroundClass=d,n.BackgroundStyle=m},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var l=a(0),i=o(l);function o(p){return p&&p.__esModule?p:{default:p}}var c={scope:i.default.Scope.BLOCK,whitelist:["rtl"]},d=new i.default.Attributor.Attribute("direction","dir",c),m=new i.default.Attributor.Class("direction","ql-direction",c),u=new i.default.Attributor.Style("direction","direction",c);n.DirectionAttribute=d,n.DirectionClass=m,n.DirectionStyle=u},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var l=function(){function h(f,N){for(var b=0;b<N.length;b++){var w=N[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}return function(f,N,b){return N&&h(f.prototype,N),b&&h(f,b),f}}(),i=function h(f,N,b){f===null&&(f=Function.prototype);var w=Object.getOwnPropertyDescriptor(f,N);if(w===void 0){var D=Object.getPrototypeOf(f);return D===null?void 0:h(D,N,b)}else{if("value"in w)return w.value;var S=w.get;return S===void 0?void 0:S.call(b)}},o=a(0),c=d(o);function d(h){return h&&h.__esModule?h:{default:h}}function m(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function u(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:h}function p(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(h,f):h.__proto__=f)}var g={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},j=new c.default.Attributor.Class("font","ql-font",g),y=function(h){p(f,h);function f(){return m(this,f),u(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return l(f,[{key:"value",value:function(b){return i(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"value",this).call(this,b).replace(/["']/g,"")}}]),f}(c.default.Attributor.Style),v=new y("font","font-family",g);n.FontStyle=v,n.FontClass=j},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var l=a(0),i=o(l);function o(m){return m&&m.__esModule?m:{default:m}}var c=new i.default.Attributor.Class("size","ql-size",{scope:i.default.Scope.INLINE,whitelist:["small","large","huge"]}),d=new i.default.Attributor.Style("size","font-size",{scope:i.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=c,n.SizeStyle=d},function(r,n,a){r.exports={align:{"":a(76),center:a(77),right:a(78),justify:a(79)},background:a(80),blockquote:a(81),bold:a(82),clean:a(83),code:a(58),"code-block":a(58),color:a(84),direction:{"":a(85),rtl:a(86)},float:{center:a(87),full:a(88),left:a(89),right:a(90)},formula:a(91),header:{1:a(92),2:a(93)},italic:a(94),image:a(95),indent:{"+1":a(96),"-1":a(97)},link:a(98),list:{ordered:a(99),bullet:a(100),check:a(101)},script:{sub:a(102),super:a(103)},strike:a(104),underline:a(105),video:a(106)}},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var l=function(){function N(b,w){for(var D=0;D<w.length;D++){var S=w[D];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,S.key,S)}}return function(b,w,D){return w&&N(b.prototype,w),D&&N(b,D),b}}(),i=a(0),o=p(i),c=a(5),d=p(c),m=a(9),u=p(m);function p(N){return N&&N.__esModule?N:{default:N}}function g(N,b){if(!(N instanceof b))throw new TypeError("Cannot call a class as a function")}function j(N,b){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:N}function y(N,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);N.prototype=Object.create(b&&b.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(N,b):N.__proto__=b)}var v=function(N){y(b,N);function b(w,D){g(this,b);var S=j(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,w,D));return S.lastRecorded=0,S.ignoreChange=!1,S.clear(),S.quill.on(d.default.events.EDITOR_CHANGE,function(C,T,_,E){C!==d.default.events.TEXT_CHANGE||S.ignoreChange||(!S.options.userOnly||E===d.default.sources.USER?S.record(T,_):S.transform(T))}),S.quill.keyboard.addBinding({key:"Z",shortKey:!0},S.undo.bind(S)),S.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},S.redo.bind(S)),/Win/i.test(navigator.platform)&&S.quill.keyboard.addBinding({key:"Y",shortKey:!0},S.redo.bind(S)),S}return l(b,[{key:"change",value:function(D,S){if(this.stack[D].length!==0){var C=this.stack[D].pop();this.stack[S].push(C),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(C[D],d.default.sources.USER),this.ignoreChange=!1;var T=f(C[D]);this.quill.setSelection(T)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(D,S){if(D.ops.length!==0){this.stack.redo=[];var C=this.quill.getContents().diff(S),T=Date.now();if(this.lastRecorded+this.options.delay>T&&this.stack.undo.length>0){var _=this.stack.undo.pop();C=C.compose(_.undo),D=_.redo.compose(D)}else this.lastRecorded=T;this.stack.undo.push({redo:D,undo:C}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(D){this.stack.undo.forEach(function(S){S.undo=D.transform(S.undo,!0),S.redo=D.transform(S.redo,!0)}),this.stack.redo.forEach(function(S){S.undo=D.transform(S.undo,!0),S.redo=D.transform(S.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),b}(u.default);v.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function h(N){var b=N.ops[N.ops.length-1];return b==null?!1:b.insert!=null?typeof b.insert=="string"&&b.insert.endsWith(`
`):b.attributes!=null?Object.keys(b.attributes).some(function(w){return o.default.query(w,o.default.Scope.BLOCK)!=null}):!1}function f(N){var b=N.reduce(function(D,S){return D+=S.delete||0,D},0),w=N.length()-b;return h(N)&&(w-=1),w}n.default=v,n.getLastChangeIndex=f},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var l=function(){function I(K,z){for(var P=0;P<z.length;P++){var R=z[P];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(K,R.key,R)}}return function(K,z,P){return z&&I(K.prototype,z),P&&I(K,P),K}}(),i=function I(K,z,P){K===null&&(K=Function.prototype);var R=Object.getOwnPropertyDescriptor(K,z);if(R===void 0){var B=Object.getPrototypeOf(K);return B===null?void 0:I(B,z,P)}else{if("value"in R)return R.value;var U=R.get;return U===void 0?void 0:U.call(P)}},o=a(3),c=T(o),d=a(2),m=T(d),u=a(8),p=T(u),g=a(23),j=T(g),y=a(34),v=T(y),h=a(59),f=T(h),N=a(60),b=T(N),w=a(28),D=T(w),S=a(61),C=T(S);function T(I){return I&&I.__esModule?I:{default:I}}function _(I,K){if(!(I instanceof K))throw new TypeError("Cannot call a class as a function")}function E(I,K){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K&&(typeof K=="object"||typeof K=="function")?K:I}function A(I,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);I.prototype=Object.create(K&&K.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(I,K):I.__proto__=K)}var L=[!1,"center","right","justify"],F=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],W=[!1,"serif","monospace"],Y=["1","2","3",!1],q=["small",!1,"large","huge"],J=function(I){A(K,I);function K(z,P){_(this,K);var R=E(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,z,P)),B=function U(G){if(!document.body.contains(z.root))return document.body.removeEventListener("click",U);R.tooltip!=null&&!R.tooltip.root.contains(G.target)&&document.activeElement!==R.tooltip.textbox&&!R.quill.hasFocus()&&R.tooltip.hide(),R.pickers!=null&&R.pickers.forEach(function($){$.container.contains(G.target)||$.close()})};return z.emitter.listenDOM("click",document.body,B),R}return l(K,[{key:"addModule",value:function(P){var R=i(K.prototype.__proto__||Object.getPrototypeOf(K.prototype),"addModule",this).call(this,P);return P==="toolbar"&&this.extendToolbar(R),R}},{key:"buildButtons",value:function(P,R){P.forEach(function(B){var U=B.getAttribute("class")||"";U.split(/\s+/).forEach(function(G){if(G.startsWith("ql-")&&(G=G.slice(3),R[G]!=null))if(G==="direction")B.innerHTML=R[G][""]+R[G].rtl;else if(typeof R[G]=="string")B.innerHTML=R[G];else{var $=B.value||"";$!=null&&R[G][$]&&(B.innerHTML=R[G][$])}})})}},{key:"buildPickers",value:function(P,R){var B=this;this.pickers=P.map(function(G){if(G.classList.contains("ql-align"))return G.querySelector("option")==null&&k(G,L),new b.default(G,R.align);if(G.classList.contains("ql-background")||G.classList.contains("ql-color")){var $=G.classList.contains("ql-background")?"background":"color";return G.querySelector("option")==null&&k(G,F,$==="background"?"#ffffff":"#000000"),new f.default(G,R[$])}else return G.querySelector("option")==null&&(G.classList.contains("ql-font")?k(G,W):G.classList.contains("ql-header")?k(G,Y):G.classList.contains("ql-size")&&k(G,q)),new D.default(G)});var U=function(){B.pickers.forEach(function($){$.update()})};this.quill.on(p.default.events.EDITOR_CHANGE,U)}}]),K}(v.default);J.DEFAULTS=(0,c.default)(!0,{},v.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var K=this,z=this.container.querySelector("input.ql-image[type=file]");z==null&&(z=document.createElement("input"),z.setAttribute("type","file"),z.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),z.classList.add("ql-image"),z.addEventListener("change",function(){if(z.files!=null&&z.files[0]!=null){var P=new FileReader;P.onload=function(R){var B=K.quill.getSelection(!0);K.quill.updateContents(new m.default().retain(B.index).delete(B.length).insert({image:R.target.result}),p.default.sources.USER),K.quill.setSelection(B.index+1,p.default.sources.SILENT),z.value=""},P.readAsDataURL(z.files[0])}}),this.container.appendChild(z)),z.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var O=function(I){A(K,I);function K(z,P){_(this,K);var R=E(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,z,P));return R.textbox=R.root.querySelector('input[type="text"]'),R.listen(),R}return l(K,[{key:"listen",value:function(){var P=this;this.textbox.addEventListener("keydown",function(R){j.default.match(R,"enter")?(P.save(),R.preventDefault()):j.default.match(R,"escape")&&(P.cancel(),R.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),R!=null?this.textbox.value=R:P!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+P)||""),this.root.setAttribute("data-mode",P)}},{key:"restoreFocus",value:function(){var P=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=P}},{key:"save",value:function(){var P=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var R=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",P,p.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",P,p.default.sources.USER)),this.quill.root.scrollTop=R;break}case"video":P=M(P);case"formula":{if(!P)break;var B=this.quill.getSelection(!0);if(B!=null){var U=B.index+B.length;this.quill.insertEmbed(U,this.root.getAttribute("data-mode"),P,p.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(U+1," ",p.default.sources.USER),this.quill.setSelection(U+2,p.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),K}(C.default);function M(I){var K=I.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||I.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return K?(K[1]||"https")+"://www.youtube.com/embed/"+K[2]+"?showinfo=0":(K=I.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(K[1]||"https")+"://player.vimeo.com/video/"+K[2]+"/":I}function k(I,K){var z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;K.forEach(function(P){var R=document.createElement("option");P===z?R.setAttribute("selected","selected"):R.setAttribute("value",P),I.appendChild(R)})}n.BaseTooltip=O,n.default=J},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function i(){this.head=this.tail=null,this.length=0}return i.prototype.append=function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];this.insertBefore(o[0],null),o.length>1&&this.append.apply(this,o.slice(1))},i.prototype.contains=function(o){for(var c,d=this.iterator();c=d();)if(c===o)return!0;return!1},i.prototype.insertBefore=function(o,c){o&&(o.next=c,c!=null?(o.prev=c.prev,c.prev!=null&&(c.prev.next=o),c.prev=o,c===this.head&&(this.head=o)):this.tail!=null?(this.tail.next=o,o.prev=this.tail,this.tail=o):(o.prev=null,this.head=this.tail=o),this.length+=1)},i.prototype.offset=function(o){for(var c=0,d=this.head;d!=null;){if(d===o)return c;c+=d.length(),d=d.next}return-1},i.prototype.remove=function(o){this.contains(o)&&(o.prev!=null&&(o.prev.next=o.next),o.next!=null&&(o.next.prev=o.prev),o===this.head&&(this.head=o.next),o===this.tail&&(this.tail=o.prev),this.length-=1)},i.prototype.iterator=function(o){return o===void 0&&(o=this.head),function(){var c=o;return o!=null&&(o=o.next),c}},i.prototype.find=function(o,c){c===void 0&&(c=!1);for(var d,m=this.iterator();d=m();){var u=d.length();if(o<u||c&&o===u&&(d.next==null||d.next.length()!==0))return[d,o];o-=u}return[null,0]},i.prototype.forEach=function(o){for(var c,d=this.iterator();c=d();)o(c)},i.prototype.forEachAt=function(o,c,d){if(!(c<=0))for(var m=this.find(o),u=m[0],p=m[1],g,j=o-p,y=this.iterator(u);(g=y())&&j<o+c;){var v=g.length();o>j?d(g,o-j,Math.min(c,j+v-o)):d(g,0,Math.min(v,o+c-j)),j+=v}},i.prototype.map=function(o){return this.reduce(function(c,d){return c.push(o(d)),c},[])},i.prototype.reduce=function(o,c){for(var d,m=this.iterator();d=m();)c=o(c,d);return c},i}();n.default=l},function(r,n,a){var l=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var j in g)g.hasOwnProperty(j)&&(p[j]=g[j])};return function(p,g){u(p,g);function j(){this.constructor=p}p.prototype=g===null?Object.create(g):(j.prototype=g.prototype,new j)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=a(17),o=a(1),c={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},d=100,m=function(u){l(p,u);function p(g){var j=u.call(this,g)||this;return j.scroll=j,j.observer=new MutationObserver(function(y){j.update(y)}),j.observer.observe(j.domNode,c),j.attach(),j}return p.prototype.detach=function(){u.prototype.detach.call(this),this.observer.disconnect()},p.prototype.deleteAt=function(g,j){this.update(),g===0&&j===this.length()?this.children.forEach(function(y){y.remove()}):u.prototype.deleteAt.call(this,g,j)},p.prototype.formatAt=function(g,j,y,v){this.update(),u.prototype.formatAt.call(this,g,j,y,v)},p.prototype.insertAt=function(g,j,y){this.update(),u.prototype.insertAt.call(this,g,j,y)},p.prototype.optimize=function(g,j){var y=this;g===void 0&&(g=[]),j===void 0&&(j={}),u.prototype.optimize.call(this,j);for(var v=[].slice.call(this.observer.takeRecords());v.length>0;)g.push(v.pop());for(var h=function(w,D){D===void 0&&(D=!0),!(w==null||w===y)&&w.domNode.parentNode!=null&&(w.domNode[o.DATA_KEY].mutations==null&&(w.domNode[o.DATA_KEY].mutations=[]),D&&h(w.parent))},f=function(w){w.domNode[o.DATA_KEY]==null||w.domNode[o.DATA_KEY].mutations==null||(w instanceof i.default&&w.children.forEach(f),w.optimize(j))},N=g,b=0;N.length>0;b+=1){if(b>=d)throw new Error("[Parchment] Maximum optimize iterations reached");for(N.forEach(function(w){var D=o.find(w.target,!0);D!=null&&(D.domNode===w.target&&(w.type==="childList"?(h(o.find(w.previousSibling,!1)),[].forEach.call(w.addedNodes,function(S){var C=o.find(S,!1);h(C,!1),C instanceof i.default&&C.children.forEach(function(T){h(T,!1)})})):w.type==="attributes"&&h(D.prev)),h(D))}),this.children.forEach(f),N=[].slice.call(this.observer.takeRecords()),v=N.slice();v.length>0;)g.push(v.pop())}},p.prototype.update=function(g,j){var y=this;j===void 0&&(j={}),g=g||this.observer.takeRecords(),g.map(function(v){var h=o.find(v.target,!0);return h==null?null:h.domNode[o.DATA_KEY].mutations==null?(h.domNode[o.DATA_KEY].mutations=[v],h):(h.domNode[o.DATA_KEY].mutations.push(v),null)}).forEach(function(v){v==null||v===y||v.domNode[o.DATA_KEY]==null||v.update(v.domNode[o.DATA_KEY].mutations||[],j)}),this.domNode[o.DATA_KEY].mutations!=null&&u.prototype.update.call(this,this.domNode[o.DATA_KEY].mutations,j),this.optimize(g,j)},p.blotName="scroll",p.defaultChild="block",p.scope=o.Scope.BLOCK_BLOT,p.tagName="DIV",p}(i.default);n.default=m},function(r,n,a){var l=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var g in p)p.hasOwnProperty(g)&&(u[g]=p[g])};return function(u,p){m(u,p);function g(){this.constructor=u}u.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=a(18),o=a(1);function c(m,u){if(Object.keys(m).length!==Object.keys(u).length)return!1;for(var p in m)if(m[p]!==u[p])return!1;return!0}var d=function(m){l(u,m);function u(){return m!==null&&m.apply(this,arguments)||this}return u.formats=function(p){if(p.tagName!==u.tagName)return m.formats.call(this,p)},u.prototype.format=function(p,g){var j=this;p===this.statics.blotName&&!g?(this.children.forEach(function(y){y instanceof i.default||(y=y.wrap(u.blotName,!0)),j.attributes.copy(y)}),this.unwrap()):m.prototype.format.call(this,p,g)},u.prototype.formatAt=function(p,g,j,y){if(this.formats()[j]!=null||o.query(j,o.Scope.ATTRIBUTE)){var v=this.isolate(p,g);v.format(j,y)}else m.prototype.formatAt.call(this,p,g,j,y)},u.prototype.optimize=function(p){m.prototype.optimize.call(this,p);var g=this.formats();if(Object.keys(g).length===0)return this.unwrap();var j=this.next;j instanceof u&&j.prev===this&&c(g,j.formats())&&(j.moveChildren(this),j.remove())},u.blotName="inline",u.scope=o.Scope.INLINE_BLOT,u.tagName="SPAN",u}(i.default);n.default=d},function(r,n,a){var l=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,u){m.__proto__=u}||function(m,u){for(var p in u)u.hasOwnProperty(p)&&(m[p]=u[p])};return function(m,u){d(m,u);function p(){this.constructor=m}m.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=a(18),o=a(1),c=function(d){l(m,d);function m(){return d!==null&&d.apply(this,arguments)||this}return m.formats=function(u){var p=o.query(m.blotName).tagName;if(u.tagName!==p)return d.formats.call(this,u)},m.prototype.format=function(u,p){o.query(u,o.Scope.BLOCK)!=null&&(u===this.statics.blotName&&!p?this.replaceWith(m.blotName):d.prototype.format.call(this,u,p))},m.prototype.formatAt=function(u,p,g,j){o.query(g,o.Scope.BLOCK)!=null?this.format(g,j):d.prototype.formatAt.call(this,u,p,g,j)},m.prototype.insertAt=function(u,p,g){if(g==null||o.query(p,o.Scope.INLINE)!=null)d.prototype.insertAt.call(this,u,p,g);else{var j=this.split(u),y=o.create(p,g);j.parent.insertBefore(y,j)}},m.prototype.update=function(u,p){navigator.userAgent.match(/Trident/)?this.build():d.prototype.update.call(this,u,p)},m.blotName="block",m.scope=o.Scope.BLOCK_BLOT,m.tagName="P",m}(i.default);n.default=c},function(r,n,a){var l=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var u in m)m.hasOwnProperty(u)&&(d[u]=m[u])};return function(d,m){c(d,m);function u(){this.constructor=d}d.prototype=m===null?Object.create(m):(u.prototype=m.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=a(19),o=function(c){l(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.formats=function(m){},d.prototype.format=function(m,u){c.prototype.formatAt.call(this,0,this.length(),m,u)},d.prototype.formatAt=function(m,u,p,g){m===0&&u===this.length()?this.format(p,g):c.prototype.formatAt.call(this,m,u,p,g)},d.prototype.formats=function(){return this.statics.formats(this.domNode)},d}(i.default);n.default=o},function(r,n,a){var l=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,u){m.__proto__=u}||function(m,u){for(var p in u)u.hasOwnProperty(p)&&(m[p]=u[p])};return function(m,u){d(m,u);function p(){this.constructor=m}m.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=a(19),o=a(1),c=function(d){l(m,d);function m(u){var p=d.call(this,u)||this;return p.text=p.statics.value(p.domNode),p}return m.create=function(u){return document.createTextNode(u)},m.value=function(u){var p=u.data;return p.normalize&&(p=p.normalize()),p},m.prototype.deleteAt=function(u,p){this.domNode.data=this.text=this.text.slice(0,u)+this.text.slice(u+p)},m.prototype.index=function(u,p){return this.domNode===u?p:-1},m.prototype.insertAt=function(u,p,g){g==null?(this.text=this.text.slice(0,u)+p+this.text.slice(u),this.domNode.data=this.text):d.prototype.insertAt.call(this,u,p,g)},m.prototype.length=function(){return this.text.length},m.prototype.optimize=function(u){d.prototype.optimize.call(this,u),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof m&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},m.prototype.position=function(u,p){return[this.domNode,u]},m.prototype.split=function(u,p){if(p===void 0&&(p=!1),!p){if(u===0)return this;if(u===this.length())return this.next}var g=o.create(this.domNode.splitText(u));return this.parent.insertBefore(g,this.next),this.text=this.statics.value(this.domNode),g},m.prototype.update=function(u,p){var g=this;u.some(function(j){return j.type==="characterData"&&j.target===g.domNode})&&(this.text=this.statics.value(this.domNode))},m.prototype.value=function(){return this.text},m.blotName="text",m.scope=o.Scope.INLINE_BLOT,m}(i.default);n.default=c},function(r,n,a){var l=document.createElement("div");if(l.classList.toggle("test-class",!1),l.classList.contains("test-class")){var i=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(o,c){return arguments.length>1&&!this.contains(o)==!c?c:i.call(this,o)}}String.prototype.startsWith||(String.prototype.startsWith=function(o,c){return c=c||0,this.substr(c,o.length)===o}),String.prototype.endsWith||(String.prototype.endsWith=function(o,c){var d=this.toString();(typeof c!="number"||!isFinite(c)||Math.floor(c)!==c||c>d.length)&&(c=d.length),c-=o.length;var m=d.indexOf(o,c);return m!==-1&&m===c}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof c!="function")throw new TypeError("predicate must be a function");for(var d=Object(this),m=d.length>>>0,u=arguments[1],p,g=0;g<m;g++)if(p=d[g],c.call(u,p,g,d))return p}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(r,n){var a=-1,l=1,i=0;function o(b,w,D){if(b==w)return b?[[i,b]]:[];(D<0||b.length<D)&&(D=null);var S=u(b,w),C=b.substring(0,S);b=b.substring(S),w=w.substring(S),S=p(b,w);var T=b.substring(b.length-S);b=b.substring(0,b.length-S),w=w.substring(0,w.length-S);var _=c(b,w);return C&&_.unshift([i,C]),T&&_.push([i,T]),j(_),D!=null&&(_=h(_,D)),_=f(_),_}function c(b,w){var D;if(!b)return[[l,w]];if(!w)return[[a,b]];var S=b.length>w.length?b:w,C=b.length>w.length?w:b,T=S.indexOf(C);if(T!=-1)return D=[[l,S.substring(0,T)],[i,C],[l,S.substring(T+C.length)]],b.length>w.length&&(D[0][0]=D[2][0]=a),D;if(C.length==1)return[[a,b],[l,w]];var _=g(b,w);if(_){var E=_[0],A=_[1],L=_[2],F=_[3],W=_[4],Y=o(E,L),q=o(A,F);return Y.concat([[i,W]],q)}return d(b,w)}function d(b,w){for(var D=b.length,S=w.length,C=Math.ceil((D+S)/2),T=C,_=2*C,E=new Array(_),A=new Array(_),L=0;L<_;L++)E[L]=-1,A[L]=-1;E[T+1]=0,A[T+1]=0;for(var F=D-S,W=F%2!=0,Y=0,q=0,J=0,O=0,M=0;M<C;M++){for(var k=-M+Y;k<=M-q;k+=2){var I=T+k,K;k==-M||k!=M&&E[I-1]<E[I+1]?K=E[I+1]:K=E[I-1]+1;for(var z=K-k;K<D&&z<S&&b.charAt(K)==w.charAt(z);)K++,z++;if(E[I]=K,K>D)q+=2;else if(z>S)Y+=2;else if(W){var P=T+F-k;if(P>=0&&P<_&&A[P]!=-1){var R=D-A[P];if(K>=R)return m(b,w,K,z)}}}for(var B=-M+J;B<=M-O;B+=2){var P=T+B,R;B==-M||B!=M&&A[P-1]<A[P+1]?R=A[P+1]:R=A[P-1]+1;for(var U=R-B;R<D&&U<S&&b.charAt(D-R-1)==w.charAt(S-U-1);)R++,U++;if(A[P]=R,R>D)O+=2;else if(U>S)J+=2;else if(!W){var I=T+F-B;if(I>=0&&I<_&&E[I]!=-1){var K=E[I],z=T+K-I;if(R=D-R,K>=R)return m(b,w,K,z)}}}}return[[a,b],[l,w]]}function m(b,w,D,S){var C=b.substring(0,D),T=w.substring(0,S),_=b.substring(D),E=w.substring(S),A=o(C,T),L=o(_,E);return A.concat(L)}function u(b,w){if(!b||!w||b.charAt(0)!=w.charAt(0))return 0;for(var D=0,S=Math.min(b.length,w.length),C=S,T=0;D<C;)b.substring(T,C)==w.substring(T,C)?(D=C,T=D):S=C,C=Math.floor((S-D)/2+D);return C}function p(b,w){if(!b||!w||b.charAt(b.length-1)!=w.charAt(w.length-1))return 0;for(var D=0,S=Math.min(b.length,w.length),C=S,T=0;D<C;)b.substring(b.length-C,b.length-T)==w.substring(w.length-C,w.length-T)?(D=C,T=D):S=C,C=Math.floor((S-D)/2+D);return C}function g(b,w){var D=b.length>w.length?b:w,S=b.length>w.length?w:b;if(D.length<4||S.length*2<D.length)return null;function C(q,J,O){for(var M=q.substring(O,O+Math.floor(q.length/4)),k=-1,I="",K,z,P,R;(k=J.indexOf(M,k+1))!=-1;){var B=u(q.substring(O),J.substring(k)),U=p(q.substring(0,O),J.substring(0,k));I.length<U+B&&(I=J.substring(k-U,k)+J.substring(k,k+B),K=q.substring(0,O-U),z=q.substring(O+B),P=J.substring(0,k-U),R=J.substring(k+B))}return I.length*2>=q.length?[K,z,P,R,I]:null}var T=C(D,S,Math.ceil(D.length/4)),_=C(D,S,Math.ceil(D.length/2)),E;if(!T&&!_)return null;_?T?E=T[4].length>_[4].length?T:_:E=_:E=T;var A,L,F,W;b.length>w.length?(A=E[0],L=E[1],F=E[2],W=E[3]):(F=E[0],W=E[1],A=E[2],L=E[3]);var Y=E[4];return[A,L,F,W,Y]}function j(b){b.push([i,""]);for(var w=0,D=0,S=0,C="",T="",_;w<b.length;)switch(b[w][0]){case l:S++,T+=b[w][1],w++;break;case a:D++,C+=b[w][1],w++;break;case i:D+S>1?(D!==0&&S!==0&&(_=u(T,C),_!==0&&(w-D-S>0&&b[w-D-S-1][0]==i?b[w-D-S-1][1]+=T.substring(0,_):(b.splice(0,0,[i,T.substring(0,_)]),w++),T=T.substring(_),C=C.substring(_)),_=p(T,C),_!==0&&(b[w][1]=T.substring(T.length-_)+b[w][1],T=T.substring(0,T.length-_),C=C.substring(0,C.length-_))),D===0?b.splice(w-S,D+S,[l,T]):S===0?b.splice(w-D,D+S,[a,C]):b.splice(w-D-S,D+S,[a,C],[l,T]),w=w-D-S+(D?1:0)+(S?1:0)+1):w!==0&&b[w-1][0]==i?(b[w-1][1]+=b[w][1],b.splice(w,1)):w++,S=0,D=0,C="",T="";break}b[b.length-1][1]===""&&b.pop();var E=!1;for(w=1;w<b.length-1;)b[w-1][0]==i&&b[w+1][0]==i&&(b[w][1].substring(b[w][1].length-b[w-1][1].length)==b[w-1][1]?(b[w][1]=b[w-1][1]+b[w][1].substring(0,b[w][1].length-b[w-1][1].length),b[w+1][1]=b[w-1][1]+b[w+1][1],b.splice(w-1,1),E=!0):b[w][1].substring(0,b[w+1][1].length)==b[w+1][1]&&(b[w-1][1]+=b[w+1][1],b[w][1]=b[w][1].substring(b[w+1][1].length)+b[w+1][1],b.splice(w+1,1),E=!0)),w++;E&&j(b)}var y=o;y.INSERT=l,y.DELETE=a,y.EQUAL=i,r.exports=y;function v(b,w){if(w===0)return[i,b];for(var D=0,S=0;S<b.length;S++){var C=b[S];if(C[0]===a||C[0]===i){var T=D+C[1].length;if(w===T)return[S+1,b];if(w<T){b=b.slice();var _=w-D,E=[C[0],C[1].slice(0,_)],A=[C[0],C[1].slice(_)];return b.splice(S,1,E,A),[S+1,b]}else D=T}}throw new Error("cursor_pos is out of bounds!")}function h(b,w){var D=v(b,w),S=D[1],C=D[0],T=S[C],_=S[C+1];if(T==null)return b;if(T[0]!==i)return b;if(_!=null&&T[1]+_[1]===_[1]+T[1])return S.splice(C,2,_,T),N(S,C,2);if(_!=null&&_[1].indexOf(T[1])===0){S.splice(C,2,[_[0],T[1]],[0,T[1]]);var E=_[1].slice(T[1].length);return E.length>0&&S.splice(C+2,0,[_[0],E]),N(S,C,3)}else return b}function f(b){for(var w=!1,D=function(_){return _.charCodeAt(0)>=56320&&_.charCodeAt(0)<=57343},S=function(_){return _.charCodeAt(_.length-1)>=55296&&_.charCodeAt(_.length-1)<=56319},C=2;C<b.length;C+=1)b[C-2][0]===i&&S(b[C-2][1])&&b[C-1][0]===a&&D(b[C-1][1])&&b[C][0]===l&&D(b[C][1])&&(w=!0,b[C-1][1]=b[C-2][1].slice(-1)+b[C-1][1],b[C][1]=b[C-2][1].slice(-1)+b[C][1],b[C-2][1]=b[C-2][1].slice(0,-1));if(!w)return b;for(var T=[],C=0;C<b.length;C+=1)b[C][1].length>0&&T.push(b[C]);return T}function N(b,w,D){for(var S=w+D-1;S>=0&&S>=w-1;S--)if(S+1<b.length){var C=b[S],T=b[S+1];C[0]===T[1]&&b.splice(S,2,[C[0],C[1]+T[1]])}return b}},function(r,n){n=r.exports=typeof Object.keys=="function"?Object.keys:a,n.shim=a;function a(l){var i=[];for(var o in l)i.push(o);return i}},function(r,n){var a=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=r.exports=a?l:i,n.supported=l;function l(o){return Object.prototype.toString.call(o)=="[object Arguments]"}n.unsupported=i;function i(o){return o&&typeof o=="object"&&typeof o.length=="number"&&Object.prototype.hasOwnProperty.call(o,"callee")&&!Object.prototype.propertyIsEnumerable.call(o,"callee")||!1}},function(r,n){var a=Object.prototype.hasOwnProperty,l="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(l=!1));function o(d,m,u){this.fn=d,this.context=m,this.once=u||!1}function c(){this._events=new i,this._eventsCount=0}c.prototype.eventNames=function(){var m=[],u,p;if(this._eventsCount===0)return m;for(p in u=this._events)a.call(u,p)&&m.push(l?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(u)):m},c.prototype.listeners=function(m,u){var p=l?l+m:m,g=this._events[p];if(u)return!!g;if(!g)return[];if(g.fn)return[g.fn];for(var j=0,y=g.length,v=new Array(y);j<y;j++)v[j]=g[j].fn;return v},c.prototype.emit=function(m,u,p,g,j,y){var v=l?l+m:m;if(!this._events[v])return!1;var h=this._events[v],f=arguments.length,N,b;if(h.fn){switch(h.once&&this.removeListener(m,h.fn,void 0,!0),f){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,u),!0;case 3:return h.fn.call(h.context,u,p),!0;case 4:return h.fn.call(h.context,u,p,g),!0;case 5:return h.fn.call(h.context,u,p,g,j),!0;case 6:return h.fn.call(h.context,u,p,g,j,y),!0}for(b=1,N=new Array(f-1);b<f;b++)N[b-1]=arguments[b];h.fn.apply(h.context,N)}else{var w=h.length,D;for(b=0;b<w;b++)switch(h[b].once&&this.removeListener(m,h[b].fn,void 0,!0),f){case 1:h[b].fn.call(h[b].context);break;case 2:h[b].fn.call(h[b].context,u);break;case 3:h[b].fn.call(h[b].context,u,p);break;case 4:h[b].fn.call(h[b].context,u,p,g);break;default:if(!N)for(D=1,N=new Array(f-1);D<f;D++)N[D-1]=arguments[D];h[b].fn.apply(h[b].context,N)}}return!0},c.prototype.on=function(m,u,p){var g=new o(u,p||this),j=l?l+m:m;return this._events[j]?this._events[j].fn?this._events[j]=[this._events[j],g]:this._events[j].push(g):(this._events[j]=g,this._eventsCount++),this},c.prototype.once=function(m,u,p){var g=new o(u,p||this,!0),j=l?l+m:m;return this._events[j]?this._events[j].fn?this._events[j]=[this._events[j],g]:this._events[j].push(g):(this._events[j]=g,this._eventsCount++),this},c.prototype.removeListener=function(m,u,p,g){var j=l?l+m:m;if(!this._events[j])return this;if(!u)return--this._eventsCount===0?this._events=new i:delete this._events[j],this;var y=this._events[j];if(y.fn)y.fn===u&&(!g||y.once)&&(!p||y.context===p)&&(--this._eventsCount===0?this._events=new i:delete this._events[j]);else{for(var v=0,h=[],f=y.length;v<f;v++)(y[v].fn!==u||g&&!y[v].once||p&&y[v].context!==p)&&h.push(y[v]);h.length?this._events[j]=h.length===1?h[0]:h:--this._eventsCount===0?this._events=new i:delete this._events[j]}return this},c.prototype.removeAllListeners=function(m){var u;return m?(u=l?l+m:m,this._events[u]&&(--this._eventsCount===0?this._events=new i:delete this._events[u])):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=l,c.EventEmitter=c,typeof r<"u"&&(r.exports=c)},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(me){return typeof me}:function(me){return me&&typeof Symbol=="function"&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":typeof me},i=function(){function me(Z,ee){var ye=[],ve=!0,ue=!1,we=void 0;try{for(var De=Z[Symbol.iterator](),le;!(ve=(le=De.next()).done)&&(ye.push(le.value),!(ee&&ye.length===ee));ve=!0);}catch(Ie){ue=!0,we=Ie}finally{try{!ve&&De.return&&De.return()}finally{if(ue)throw we}}return ye}return function(Z,ee){if(Array.isArray(Z))return Z;if(Symbol.iterator in Object(Z))return me(Z,ee);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function me(Z,ee){for(var ye=0;ye<ee.length;ye++){var ve=ee[ye];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(Z,ve.key,ve)}}return function(Z,ee,ye){return ee&&me(Z.prototype,ee),ye&&me(Z,ye),Z}}(),c=a(3),d=A(c),m=a(2),u=A(m),p=a(0),g=A(p),j=a(5),y=A(j),v=a(10),h=A(v),f=a(9),N=A(f),b=a(36),w=a(37),D=a(13),S=A(D),C=a(26),T=a(38),_=a(39),E=a(40);function A(me){return me&&me.__esModule?me:{default:me}}function L(me,Z,ee){return Z in me?Object.defineProperty(me,Z,{value:ee,enumerable:!0,configurable:!0,writable:!0}):me[Z]=ee,me}function F(me,Z){if(!(me instanceof Z))throw new TypeError("Cannot call a class as a function")}function W(me,Z){if(!me)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z&&(typeof Z=="object"||typeof Z=="function")?Z:me}function Y(me,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Z);me.prototype=Object.create(Z&&Z.prototype,{constructor:{value:me,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(me,Z):me.__proto__=Z)}var q=(0,h.default)("quill:clipboard"),J="__ql-matcher",O=[[Node.TEXT_NODE,xe],[Node.TEXT_NODE,V],["br",X],[Node.ELEMENT_NODE,V],[Node.ELEMENT_NODE,$],[Node.ELEMENT_NODE,re],[Node.ELEMENT_NODE,G],[Node.ELEMENT_NODE,ne],["li",Ne],["b",U.bind(U,"bold")],["i",U.bind(U,"italic")],["style",Q]],M=[b.AlignAttribute,T.DirectionAttribute].reduce(function(me,Z){return me[Z.keyName]=Z,me},{}),k=[b.AlignStyle,w.BackgroundStyle,C.ColorStyle,T.DirectionStyle,_.FontStyle,E.SizeStyle].reduce(function(me,Z){return me[Z.keyName]=Z,me},{}),I=function(me){Y(Z,me);function Z(ee,ye){F(this,Z);var ve=W(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this,ee,ye));return ve.quill.root.addEventListener("paste",ve.onPaste.bind(ve)),ve.container=ve.quill.addContainer("ql-clipboard"),ve.container.setAttribute("contenteditable",!0),ve.container.setAttribute("tabindex",-1),ve.matchers=[],O.concat(ve.options.matchers).forEach(function(ue){var we=i(ue,2),De=we[0],le=we[1];!ye.matchVisual&&le===re||ve.addMatcher(De,le)}),ve}return o(Z,[{key:"addMatcher",value:function(ye,ve){this.matchers.push([ye,ve])}},{key:"convert",value:function(ye){if(typeof ye=="string")return this.container.innerHTML=ye.replace(/\>\r?\n +\</g,"><"),this.convert();var ve=this.quill.getFormat(this.quill.selection.savedRange.index);if(ve[S.default.blotName]){var ue=this.container.innerText;return this.container.innerHTML="",new u.default().insert(ue,L({},S.default.blotName,ve[S.default.blotName]))}var we=this.prepareMatching(),De=i(we,2),le=De[0],Ie=De[1],ge=B(this.container,le,Ie);return P(ge,`
`)&&ge.ops[ge.ops.length-1].attributes==null&&(ge=ge.compose(new u.default().retain(ge.length()-1).delete(1))),q.log("convert",this.container.innerHTML,ge),this.container.innerHTML="",ge}},{key:"dangerouslyPasteHTML",value:function(ye,ve){var ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof ye=="string")this.quill.setContents(this.convert(ye),ve),this.quill.setSelection(0,y.default.sources.SILENT);else{var we=this.convert(ve);this.quill.updateContents(new u.default().retain(ye).concat(we),ue),this.quill.setSelection(ye+we.length(),y.default.sources.SILENT)}}},{key:"onPaste",value:function(ye){var ve=this;if(!(ye.defaultPrevented||!this.quill.isEnabled())){var ue=this.quill.getSelection(),we=new u.default().retain(ue.index),De=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(y.default.sources.SILENT),setTimeout(function(){we=we.concat(ve.convert()).delete(ue.length),ve.quill.updateContents(we,y.default.sources.USER),ve.quill.setSelection(we.length()-ue.length,y.default.sources.SILENT),ve.quill.scrollingContainer.scrollTop=De,ve.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ye=this,ve=[],ue=[];return this.matchers.forEach(function(we){var De=i(we,2),le=De[0],Ie=De[1];switch(le){case Node.TEXT_NODE:ue.push(Ie);break;case Node.ELEMENT_NODE:ve.push(Ie);break;default:[].forEach.call(ye.container.querySelectorAll(le),function(ge){ge[J]=ge[J]||[],ge[J].push(Ie)});break}}),[ve,ue]}}]),Z}(N.default);I.DEFAULTS={matchers:[],matchVisual:!0};function K(me,Z,ee){return(typeof Z>"u"?"undefined":l(Z))==="object"?Object.keys(Z).reduce(function(ye,ve){return K(ye,ve,Z[ve])},me):me.reduce(function(ye,ve){return ve.attributes&&ve.attributes[Z]?ye.push(ve):ye.insert(ve.insert,(0,d.default)({},L({},Z,ee),ve.attributes))},new u.default)}function z(me){if(me.nodeType!==Node.ELEMENT_NODE)return{};var Z="__ql-computed-style";return me[Z]||(me[Z]=window.getComputedStyle(me))}function P(me,Z){for(var ee="",ye=me.ops.length-1;ye>=0&&ee.length<Z.length;--ye){var ve=me.ops[ye];if(typeof ve.insert!="string")break;ee=ve.insert+ee}return ee.slice(-1*Z.length)===Z}function R(me){if(me.childNodes.length===0)return!1;var Z=z(me);return["block","list-item"].indexOf(Z.display)>-1}function B(me,Z,ee){return me.nodeType===me.TEXT_NODE?ee.reduce(function(ye,ve){return ve(me,ye)},new u.default):me.nodeType===me.ELEMENT_NODE?[].reduce.call(me.childNodes||[],function(ye,ve){var ue=B(ve,Z,ee);return ve.nodeType===me.ELEMENT_NODE&&(ue=Z.reduce(function(we,De){return De(ve,we)},ue),ue=(ve[J]||[]).reduce(function(we,De){return De(ve,we)},ue)),ye.concat(ue)},new u.default):new u.default}function U(me,Z,ee){return K(ee,me,!0)}function G(me,Z){var ee=g.default.Attributor.Attribute.keys(me),ye=g.default.Attributor.Class.keys(me),ve=g.default.Attributor.Style.keys(me),ue={};return ee.concat(ye).concat(ve).forEach(function(we){var De=g.default.query(we,g.default.Scope.ATTRIBUTE);De!=null&&(ue[De.attrName]=De.value(me),ue[De.attrName])||(De=M[we],De!=null&&(De.attrName===we||De.keyName===we)&&(ue[De.attrName]=De.value(me)||void 0),De=k[we],De!=null&&(De.attrName===we||De.keyName===we)&&(De=k[we],ue[De.attrName]=De.value(me)||void 0))}),Object.keys(ue).length>0&&(Z=K(Z,ue)),Z}function $(me,Z){var ee=g.default.query(me);if(ee==null)return Z;if(ee.prototype instanceof g.default.Embed){var ye={},ve=ee.value(me);ve!=null&&(ye[ee.blotName]=ve,Z=new u.default().insert(ye,ee.formats(me)))}else typeof ee.formats=="function"&&(Z=K(Z,ee.blotName,ee.formats(me)));return Z}function X(me,Z){return P(Z,`
`)||Z.insert(`
`),Z}function Q(){return new u.default}function Ne(me,Z){var ee=g.default.query(me);if(ee==null||ee.blotName!=="list-item"||!P(Z,`
`))return Z;for(var ye=-1,ve=me.parentNode;!ve.classList.contains("ql-clipboard");)(g.default.query(ve)||{}).blotName==="list"&&(ye+=1),ve=ve.parentNode;return ye<=0?Z:Z.compose(new u.default().retain(Z.length()-1).retain(1,{indent:ye}))}function V(me,Z){return P(Z,`
`)||(R(me)||Z.length()>0&&me.nextSibling&&R(me.nextSibling))&&Z.insert(`
`),Z}function re(me,Z){if(R(me)&&me.nextElementSibling!=null&&!P(Z,`

`)){var ee=me.offsetHeight+parseFloat(z(me).marginTop)+parseFloat(z(me).marginBottom);me.nextElementSibling.offsetTop>me.offsetTop+ee*1.5&&Z.insert(`
`)}return Z}function ne(me,Z){var ee={},ye=me.style||{};return ye.fontStyle&&z(me).fontStyle==="italic"&&(ee.italic=!0),ye.fontWeight&&(z(me).fontWeight.startsWith("bold")||parseInt(z(me).fontWeight)>=700)&&(ee.bold=!0),Object.keys(ee).length>0&&(Z=K(Z,ee)),parseFloat(ye.textIndent||0)>0&&(Z=new u.default().insert("	").concat(Z)),Z}function xe(me,Z){var ee=me.data;if(me.parentNode.tagName==="O:P")return Z.insert(ee.trim());if(ee.trim().length===0&&me.parentNode.classList.contains("ql-clipboard"))return Z;if(!z(me.parentNode).whiteSpace.startsWith("pre")){var ye=function(ue,we){return we=we.replace(/[^\u00a0]/g,""),we.length<1&&ue?" ":we};ee=ee.replace(/\r\n/g," ").replace(/\n/g," "),ee=ee.replace(/\s\s+/g,ye.bind(ye,!0)),(me.previousSibling==null&&R(me.parentNode)||me.previousSibling!=null&&R(me.previousSibling))&&(ee=ee.replace(/^\s+/,ye.bind(ye,!1))),(me.nextSibling==null&&R(me.parentNode)||me.nextSibling!=null&&R(me.nextSibling))&&(ee=ee.replace(/\s+$/,ye.bind(ye,!1)))}return Z.insert(ee)}n.default=I,n.matchAttributor=G,n.matchBlot=$,n.matchNewline=V,n.matchSpacing=re,n.matchText=xe},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function j(y,v){for(var h=0;h<v.length;h++){var f=v[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(y,f.key,f)}}return function(y,v,h){return v&&j(y.prototype,v),h&&j(y,h),y}}(),i=function j(y,v,h){y===null&&(y=Function.prototype);var f=Object.getOwnPropertyDescriptor(y,v);if(f===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:j(N,v,h)}else{if("value"in f)return f.value;var b=f.get;return b===void 0?void 0:b.call(h)}},o=a(6),c=d(o);function d(j){return j&&j.__esModule?j:{default:j}}function m(j,y){if(!(j instanceof y))throw new TypeError("Cannot call a class as a function")}function u(j,y){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:j}function p(j,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);j.prototype=Object.create(y&&y.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(j,y):j.__proto__=y)}var g=function(j){p(y,j);function y(){return m(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return l(y,[{key:"optimize",value:function(h){i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,h),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return i(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),y}(c.default);g.blotName="bold",g.tagName=["STRONG","B"],n.default=g},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var l=function(){function E(A,L){var F=[],W=!0,Y=!1,q=void 0;try{for(var J=A[Symbol.iterator](),O;!(W=(O=J.next()).done)&&(F.push(O.value),!(L&&F.length===L));W=!0);}catch(M){Y=!0,q=M}finally{try{!W&&J.return&&J.return()}finally{if(Y)throw q}}return F}return function(A,L){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return E(A,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function E(A,L){for(var F=0;F<L.length;F++){var W=L[F];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(A,W.key,W)}}return function(A,L,F){return L&&E(A.prototype,L),F&&E(A,F),A}}(),o=a(2),c=h(o),d=a(0),m=h(d),u=a(5),p=h(u),g=a(10),j=h(g),y=a(9),v=h(y);function h(E){return E&&E.__esModule?E:{default:E}}function f(E,A,L){return A in E?Object.defineProperty(E,A,{value:L,enumerable:!0,configurable:!0,writable:!0}):E[A]=L,E}function N(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}function b(E,A){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:E}function w(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(E,A):E.__proto__=A)}var D=(0,j.default)("quill:toolbar"),S=function(E){w(A,E);function A(L,F){N(this,A);var W=b(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,L,F));if(Array.isArray(W.options.container)){var Y=document.createElement("div");T(Y,W.options.container),L.container.parentNode.insertBefore(Y,L.container),W.container=Y}else typeof W.options.container=="string"?W.container=document.querySelector(W.options.container):W.container=W.options.container;if(!(W.container instanceof HTMLElement)){var q;return q=D.error("Container required for toolbar",W.options),b(W,q)}return W.container.classList.add("ql-toolbar"),W.controls=[],W.handlers={},Object.keys(W.options.handlers).forEach(function(J){W.addHandler(J,W.options.handlers[J])}),[].forEach.call(W.container.querySelectorAll("button, select"),function(J){W.attach(J)}),W.quill.on(p.default.events.EDITOR_CHANGE,function(J,O){J===p.default.events.SELECTION_CHANGE&&W.update(O)}),W.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){var J=W.quill.selection.getRange(),O=l(J,1),M=O[0];W.update(M)}),W}return i(A,[{key:"addHandler",value:function(F,W){this.handlers[F]=W}},{key:"attach",value:function(F){var W=this,Y=[].find.call(F.classList,function(J){return J.indexOf("ql-")===0});if(Y){if(Y=Y.slice(3),F.tagName==="BUTTON"&&F.setAttribute("type","button"),this.handlers[Y]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Y]==null){D.warn("ignoring attaching to disabled format",Y,F);return}if(m.default.query(Y)==null){D.warn("ignoring attaching to nonexistent format",Y,F);return}}var q=F.tagName==="SELECT"?"change":"click";F.addEventListener(q,function(J){var O=void 0;if(F.tagName==="SELECT"){if(F.selectedIndex<0)return;var M=F.options[F.selectedIndex];M.hasAttribute("selected")?O=!1:O=M.value||!1}else F.classList.contains("ql-active")?O=!1:O=F.value||!F.hasAttribute("value"),J.preventDefault();W.quill.focus();var k=W.quill.selection.getRange(),I=l(k,1),K=I[0];if(W.handlers[Y]!=null)W.handlers[Y].call(W,O);else if(m.default.query(Y).prototype instanceof m.default.Embed){if(O=prompt("Enter "+Y),!O)return;W.quill.updateContents(new c.default().retain(K.index).delete(K.length).insert(f({},Y,O)),p.default.sources.USER)}else W.quill.format(Y,O,p.default.sources.USER);W.update(K)}),this.controls.push([Y,F])}}},{key:"update",value:function(F){var W=F==null?{}:this.quill.getFormat(F);this.controls.forEach(function(Y){var q=l(Y,2),J=q[0],O=q[1];if(O.tagName==="SELECT"){var M=void 0;if(F==null)M=null;else if(W[J]==null)M=O.querySelector("option[selected]");else if(!Array.isArray(W[J])){var k=W[J];typeof k=="string"&&(k=k.replace(/\"/g,'\\"')),M=O.querySelector('option[value="'+k+'"]')}M==null?(O.value="",O.selectedIndex=-1):M.selected=!0}else if(F==null)O.classList.remove("ql-active");else if(O.hasAttribute("value")){var I=W[J]===O.getAttribute("value")||W[J]!=null&&W[J].toString()===O.getAttribute("value")||W[J]==null&&!O.getAttribute("value");O.classList.toggle("ql-active",I)}else O.classList.toggle("ql-active",W[J]!=null)})}}]),A}(v.default);S.DEFAULTS={};function C(E,A,L){var F=document.createElement("button");F.setAttribute("type","button"),F.classList.add("ql-"+A),L!=null&&(F.value=L),E.appendChild(F)}function T(E,A){Array.isArray(A[0])||(A=[A]),A.forEach(function(L){var F=document.createElement("span");F.classList.add("ql-formats"),L.forEach(function(W){if(typeof W=="string")C(F,W);else{var Y=Object.keys(W)[0],q=W[Y];Array.isArray(q)?_(F,Y,q):C(F,Y,q)}}),E.appendChild(F)})}function _(E,A,L){var F=document.createElement("select");F.classList.add("ql-"+A),L.forEach(function(W){var Y=document.createElement("option");W!==!1?Y.setAttribute("value",W):Y.setAttribute("selected","selected"),F.appendChild(Y)}),E.appendChild(F)}S.DEFAULTS={container:null,handlers:{clean:function(){var A=this,L=this.quill.getSelection();if(L!=null)if(L.length==0){var F=this.quill.getFormat();Object.keys(F).forEach(function(W){m.default.query(W,m.default.Scope.INLINE)!=null&&A.quill.format(W,!1)})}else this.quill.removeFormat(L,p.default.sources.USER)},direction:function(A){var L=this.quill.getFormat().align;A==="rtl"&&L==null?this.quill.format("align","right",p.default.sources.USER):!A&&L==="right"&&this.quill.format("align",!1,p.default.sources.USER),this.quill.format("direction",A,p.default.sources.USER)},indent:function(A){var L=this.quill.getSelection(),F=this.quill.getFormat(L),W=parseInt(F.indent||0);if(A==="+1"||A==="-1"){var Y=A==="+1"?1:-1;F.direction==="rtl"&&(Y*=-1),this.quill.format("indent",W+Y,p.default.sources.USER)}},link:function(A){A===!0&&(A=prompt("Enter link URL:")),this.quill.format("link",A,p.default.sources.USER)},list:function(A){var L=this.quill.getSelection(),F=this.quill.getFormat(L);A==="check"?F.list==="checked"||F.list==="unchecked"?this.quill.format("list",!1,p.default.sources.USER):this.quill.format("list","unchecked",p.default.sources.USER):this.quill.format("list",A,p.default.sources.USER)}}},n.default=S,n.addControls=T},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function j(y,v){for(var h=0;h<v.length;h++){var f=v[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(y,f.key,f)}}return function(y,v,h){return v&&j(y.prototype,v),h&&j(y,h),y}}(),i=function j(y,v,h){y===null&&(y=Function.prototype);var f=Object.getOwnPropertyDescriptor(y,v);if(f===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:j(N,v,h)}else{if("value"in f)return f.value;var b=f.get;return b===void 0?void 0:b.call(h)}},o=a(28),c=d(o);function d(j){return j&&j.__esModule?j:{default:j}}function m(j,y){if(!(j instanceof y))throw new TypeError("Cannot call a class as a function")}function u(j,y){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:j}function p(j,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);j.prototype=Object.create(y&&y.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(j,y):j.__proto__=y)}var g=function(j){p(y,j);function y(v,h){m(this,y);var f=u(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,v));return f.label.innerHTML=h,f.container.classList.add("ql-color-picker"),[].slice.call(f.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(N){N.classList.add("ql-primary")}),f}return l(y,[{key:"buildItem",value:function(h){var f=i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"buildItem",this).call(this,h);return f.style.backgroundColor=h.getAttribute("value")||"",f}},{key:"selectItem",value:function(h,f){i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"selectItem",this).call(this,h,f);var N=this.label.querySelector(".ql-color-label"),b=h&&h.getAttribute("data-value")||"";N&&(N.tagName==="line"?N.style.stroke=b:N.style.fill=b)}}]),y}(c.default);n.default=g},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function j(y,v){for(var h=0;h<v.length;h++){var f=v[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(y,f.key,f)}}return function(y,v,h){return v&&j(y.prototype,v),h&&j(y,h),y}}(),i=function j(y,v,h){y===null&&(y=Function.prototype);var f=Object.getOwnPropertyDescriptor(y,v);if(f===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:j(N,v,h)}else{if("value"in f)return f.value;var b=f.get;return b===void 0?void 0:b.call(h)}},o=a(28),c=d(o);function d(j){return j&&j.__esModule?j:{default:j}}function m(j,y){if(!(j instanceof y))throw new TypeError("Cannot call a class as a function")}function u(j,y){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:j}function p(j,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);j.prototype=Object.create(y&&y.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(j,y):j.__proto__=y)}var g=function(j){p(y,j);function y(v,h){m(this,y);var f=u(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,v));return f.container.classList.add("ql-icon-picker"),[].forEach.call(f.container.querySelectorAll(".ql-picker-item"),function(N){N.innerHTML=h[N.getAttribute("data-value")||""]}),f.defaultItem=f.container.querySelector(".ql-selected"),f.selectItem(f.defaultItem),f}return l(y,[{key:"selectItem",value:function(h,f){i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"selectItem",this).call(this,h,f),h=h||this.defaultItem,this.label.innerHTML=h.innerHTML}}]),y}(c.default);n.default=g},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function c(d,m){for(var u=0;u<m.length;u++){var p=m[u];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,m,u){return m&&c(d.prototype,m),u&&c(d,u),d}}();function i(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function(){function c(d,m){var u=this;i(this,c),this.quill=d,this.boundsContainer=m||document.body,this.root=d.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){u.root.style.marginTop=-1*u.quill.root.scrollTop+"px"}),this.hide()}return l(c,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(m){var u=m.left+m.width/2-this.root.offsetWidth/2,p=m.bottom+this.quill.root.scrollTop;this.root.style.left=u+"px",this.root.style.top=p+"px",this.root.classList.remove("ql-flip");var g=this.boundsContainer.getBoundingClientRect(),j=this.root.getBoundingClientRect(),y=0;if(j.right>g.right&&(y=g.right-j.right,this.root.style.left=u+y+"px"),j.left<g.left&&(y=g.left-j.left,this.root.style.left=u+y+"px"),j.bottom>g.bottom){var v=j.bottom-j.top,h=m.bottom-m.top+v;this.root.style.top=p-h+"px",this.root.classList.add("ql-flip")}return y}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),c}();n.default=o},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function _(E,A){var L=[],F=!0,W=!1,Y=void 0;try{for(var q=E[Symbol.iterator](),J;!(F=(J=q.next()).done)&&(L.push(J.value),!(A&&L.length===A));F=!0);}catch(O){W=!0,Y=O}finally{try{!F&&q.return&&q.return()}finally{if(W)throw Y}}return L}return function(E,A){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return _(E,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function _(E,A,L){E===null&&(E=Function.prototype);var F=Object.getOwnPropertyDescriptor(E,A);if(F===void 0){var W=Object.getPrototypeOf(E);return W===null?void 0:_(W,A,L)}else{if("value"in F)return F.value;var Y=F.get;return Y===void 0?void 0:Y.call(L)}},o=function(){function _(E,A){for(var L=0;L<A.length;L++){var F=A[L];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(E,F.key,F)}}return function(E,A,L){return A&&_(E.prototype,A),L&&_(E,L),E}}(),c=a(3),d=N(c),m=a(8),u=N(m),p=a(43),g=N(p),j=a(27),y=N(j),v=a(15),h=a(41),f=N(h);function N(_){return _&&_.__esModule?_:{default:_}}function b(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}function w(_,E){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:_}function D(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);_.prototype=Object.create(E&&E.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(_,E):_.__proto__=E)}var S=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],C=function(_){D(E,_);function E(A,L){b(this,E),L.modules.toolbar!=null&&L.modules.toolbar.container==null&&(L.modules.toolbar.container=S);var F=w(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,A,L));return F.quill.container.classList.add("ql-snow"),F}return o(E,[{key:"extendToolbar",value:function(L){L.container.classList.add("ql-snow"),this.buildButtons([].slice.call(L.container.querySelectorAll("button")),f.default),this.buildPickers([].slice.call(L.container.querySelectorAll("select")),f.default),this.tooltip=new T(this.quill,this.options.bounds),L.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(F,W){L.handlers.link.call(L,!W.format.link)})}}]),E}(g.default);C.DEFAULTS=(0,d.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){if(E){var A=this.quill.getSelection();if(A==null||A.length==0)return;var L=this.quill.getText(A);/^\S+@\S+\.\S+$/.test(L)&&L.indexOf("mailto:")!==0&&(L="mailto:"+L);var F=this.quill.theme.tooltip;F.edit("link",L)}else this.quill.format("link",!1)}}}}});var T=function(_){D(E,_);function E(A,L){b(this,E);var F=w(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,A,L));return F.preview=F.root.querySelector("a.ql-preview"),F}return o(E,[{key:"listen",value:function(){var L=this;i(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(F){L.root.classList.contains("ql-editing")?L.save():L.edit("link",L.preview.textContent),F.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(F){if(L.linkRange!=null){var W=L.linkRange;L.restoreFocus(),L.quill.formatText(W,"link",!1,u.default.sources.USER),delete L.linkRange}F.preventDefault(),L.hide()}),this.quill.on(u.default.events.SELECTION_CHANGE,function(F,W,Y){if(F!=null){if(F.length===0&&Y===u.default.sources.USER){var q=L.quill.scroll.descendant(y.default,F.index),J=l(q,2),O=J[0],M=J[1];if(O!=null){L.linkRange=new v.Range(F.index-M,O.length());var k=y.default.formats(O.domNode);L.preview.textContent=k,L.preview.setAttribute("href",k),L.show(),L.position(L.quill.getBounds(L.linkRange));return}}else delete L.linkRange;L.hide()}})}},{key:"show",value:function(){i(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),E}(p.BaseTooltip);T.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=C},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(29),i=ve(l),o=a(36),c=a(38),d=a(64),m=a(65),u=ve(m),p=a(66),g=ve(p),j=a(67),y=ve(j),v=a(37),h=a(26),f=a(39),N=a(40),b=a(56),w=ve(b),D=a(68),S=ve(D),C=a(27),T=ve(C),_=a(69),E=ve(_),A=a(70),L=ve(A),F=a(71),W=ve(F),Y=a(72),q=ve(Y),J=a(73),O=ve(J),M=a(13),k=ve(M),I=a(74),K=ve(I),z=a(75),P=ve(z),R=a(57),B=ve(R),U=a(41),G=ve(U),$=a(28),X=ve($),Q=a(59),Ne=ve(Q),V=a(60),re=ve(V),ne=a(61),xe=ve(ne),me=a(108),Z=ve(me),ee=a(62),ye=ve(ee);function ve(ue){return ue&&ue.__esModule?ue:{default:ue}}i.default.register({"attributors/attribute/direction":c.DirectionAttribute,"attributors/class/align":o.AlignClass,"attributors/class/background":v.BackgroundClass,"attributors/class/color":h.ColorClass,"attributors/class/direction":c.DirectionClass,"attributors/class/font":f.FontClass,"attributors/class/size":N.SizeClass,"attributors/style/align":o.AlignStyle,"attributors/style/background":v.BackgroundStyle,"attributors/style/color":h.ColorStyle,"attributors/style/direction":c.DirectionStyle,"attributors/style/font":f.FontStyle,"attributors/style/size":N.SizeStyle},!0),i.default.register({"formats/align":o.AlignClass,"formats/direction":c.DirectionClass,"formats/indent":d.IndentClass,"formats/background":v.BackgroundStyle,"formats/color":h.ColorStyle,"formats/font":f.FontClass,"formats/size":N.SizeClass,"formats/blockquote":u.default,"formats/code-block":k.default,"formats/header":g.default,"formats/list":y.default,"formats/bold":w.default,"formats/code":M.Code,"formats/italic":S.default,"formats/link":T.default,"formats/script":E.default,"formats/strike":L.default,"formats/underline":W.default,"formats/image":q.default,"formats/video":O.default,"formats/list/item":j.ListItem,"modules/formula":K.default,"modules/syntax":P.default,"modules/toolbar":B.default,"themes/bubble":Z.default,"themes/snow":ye.default,"ui/icons":G.default,"ui/picker":X.default,"ui/icon-picker":re.default,"ui/color-picker":Ne.default,"ui/tooltip":xe.default},!0),n.default=i.default},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var l=function(){function y(v,h){for(var f=0;f<h.length;f++){var N=h[f];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(v,N.key,N)}}return function(v,h,f){return h&&y(v.prototype,h),f&&y(v,f),v}}(),i=function y(v,h,f){v===null&&(v=Function.prototype);var N=Object.getOwnPropertyDescriptor(v,h);if(N===void 0){var b=Object.getPrototypeOf(v);return b===null?void 0:y(b,h,f)}else{if("value"in N)return N.value;var w=N.get;return w===void 0?void 0:w.call(f)}},o=a(0),c=d(o);function d(y){return y&&y.__esModule?y:{default:y}}function m(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function u(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function p(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var g=function(y){p(v,y);function v(){return m(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return l(v,[{key:"add",value:function(f,N){if(N==="+1"||N==="-1"){var b=this.value(f)||0;N=N==="+1"?b+1:b-1}return N===0?(this.remove(f),!0):i(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"add",this).call(this,f,N)}},{key:"canAdd",value:function(f,N){return i(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"canAdd",this).call(this,f,N)||i(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"canAdd",this).call(this,f,parseInt(N))}},{key:"value",value:function(f){return parseInt(i(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,f))||void 0}}]),v}(c.default.Attributor.Class),j=new g("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=j},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(4),i=o(l);function o(p){return p&&p.__esModule?p:{default:p}}function c(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function d(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function m(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var u=function(p){m(g,p);function g(){return c(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(i.default);u.blotName="blockquote",u.tagName="blockquote",n.default=u},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function g(j,y){for(var v=0;v<y.length;v++){var h=y[v];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(j,h.key,h)}}return function(j,y,v){return y&&g(j.prototype,y),v&&g(j,v),j}}(),i=a(4),o=c(i);function c(g){return g&&g.__esModule?g:{default:g}}function d(g,j){if(!(g instanceof j))throw new TypeError("Cannot call a class as a function")}function m(g,j){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:g}function u(g,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);g.prototype=Object.create(j&&j.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(g,j):g.__proto__=j)}var p=function(g){u(j,g);function j(){return d(this,j),m(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return l(j,null,[{key:"formats",value:function(v){return this.tagName.indexOf(v.tagName)+1}}]),j}(o.default);p.blotName="header",p.tagName=["H1","H2","H3","H4","H5","H6"],n.default=p},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var l=function(){function b(w,D){for(var S=0;S<D.length;S++){var C=D[S];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(w,C.key,C)}}return function(w,D,S){return D&&b(w.prototype,D),S&&b(w,S),w}}(),i=function b(w,D,S){w===null&&(w=Function.prototype);var C=Object.getOwnPropertyDescriptor(w,D);if(C===void 0){var T=Object.getPrototypeOf(w);return T===null?void 0:b(T,D,S)}else{if("value"in C)return C.value;var _=C.get;return _===void 0?void 0:_.call(S)}},o=a(0),c=g(o),d=a(4),m=g(d),u=a(25),p=g(u);function g(b){return b&&b.__esModule?b:{default:b}}function j(b,w,D){return w in b?Object.defineProperty(b,w,{value:D,enumerable:!0,configurable:!0,writable:!0}):b[w]=D,b}function y(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function v(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function h(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var f=function(b){h(w,b);function w(){return y(this,w),v(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return l(w,[{key:"format",value:function(S,C){S===N.blotName&&!C?this.replaceWith(c.default.create(this.statics.scope)):i(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,S,C)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():i(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(S,C){return this.parent.isolate(this.offset(this.parent),this.length()),S===this.parent.statics.blotName?(this.parent.replaceWith(S,C),this):(this.parent.unwrap(),i(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"replaceWith",this).call(this,S,C))}}],[{key:"formats",value:function(S){return S.tagName===this.tagName?void 0:i(w.__proto__||Object.getPrototypeOf(w),"formats",this).call(this,S)}}]),w}(m.default);f.blotName="list-item",f.tagName="LI";var N=function(b){h(w,b),l(w,null,[{key:"create",value:function(S){var C=S==="ordered"?"OL":"UL",T=i(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,C);return(S==="checked"||S==="unchecked")&&T.setAttribute("data-checked",S==="checked"),T}},{key:"formats",value:function(S){if(S.tagName==="OL")return"ordered";if(S.tagName==="UL")return S.hasAttribute("data-checked")?S.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function w(D){y(this,w);var S=v(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,D)),C=function(_){if(_.target.parentNode===D){var E=S.statics.formats(D),A=c.default.find(_.target);E==="checked"?A.format("list","unchecked"):E==="unchecked"&&A.format("list","checked")}};return D.addEventListener("touchstart",C),D.addEventListener("mousedown",C),S}return l(w,[{key:"format",value:function(S,C){this.children.length>0&&this.children.tail.format(S,C)}},{key:"formats",value:function(){return j({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(S,C){if(S instanceof f)i(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"insertBefore",this).call(this,S,C);else{var T=C==null?this.length():C.offset(this),_=this.split(T);_.parent.insertBefore(S,_)}}},{key:"optimize",value:function(S){i(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"optimize",this).call(this,S);var C=this.next;C!=null&&C.prev===this&&C.statics.blotName===this.statics.blotName&&C.domNode.tagName===this.domNode.tagName&&C.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(C.moveChildren(this),C.remove())}},{key:"replace",value:function(S){if(S.statics.blotName!==this.statics.blotName){var C=c.default.create(this.statics.defaultChild);S.moveChildren(C),this.appendChild(C)}i(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"replace",this).call(this,S)}}]),w}(p.default);N.blotName="list",N.scope=c.default.Scope.BLOCK_BLOT,N.tagName=["OL","UL"],N.defaultChild="list-item",N.allowedChildren=[f],n.ListItem=f,n.default=N},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(56),i=o(l);function o(p){return p&&p.__esModule?p:{default:p}}function c(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function d(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function m(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var u=function(p){m(g,p);function g(){return c(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(i.default);u.blotName="italic",u.tagName=["EM","I"],n.default=u},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function j(y,v){for(var h=0;h<v.length;h++){var f=v[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(y,f.key,f)}}return function(y,v,h){return v&&j(y.prototype,v),h&&j(y,h),y}}(),i=function j(y,v,h){y===null&&(y=Function.prototype);var f=Object.getOwnPropertyDescriptor(y,v);if(f===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:j(N,v,h)}else{if("value"in f)return f.value;var b=f.get;return b===void 0?void 0:b.call(h)}},o=a(6),c=d(o);function d(j){return j&&j.__esModule?j:{default:j}}function m(j,y){if(!(j instanceof y))throw new TypeError("Cannot call a class as a function")}function u(j,y){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:j}function p(j,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);j.prototype=Object.create(y&&y.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(j,y):j.__proto__=y)}var g=function(j){p(y,j);function y(){return m(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return l(y,null,[{key:"create",value:function(h){return h==="super"?document.createElement("sup"):h==="sub"?document.createElement("sub"):i(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,h)}},{key:"formats",value:function(h){if(h.tagName==="SUB")return"sub";if(h.tagName==="SUP")return"super"}}]),y}(c.default);g.blotName="script",g.tagName=["SUB","SUP"],n.default=g},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(6),i=o(l);function o(p){return p&&p.__esModule?p:{default:p}}function c(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function d(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function m(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var u=function(p){m(g,p);function g(){return c(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(i.default);u.blotName="strike",u.tagName="S",n.default=u},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(6),i=o(l);function o(p){return p&&p.__esModule?p:{default:p}}function c(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function d(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function m(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var u=function(p){m(g,p);function g(){return c(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(i.default);u.blotName="underline",u.tagName="U",n.default=u},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function v(h,f){for(var N=0;N<f.length;N++){var b=f[N];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,f,N){return f&&v(h.prototype,f),N&&v(h,N),h}}(),i=function v(h,f,N){h===null&&(h=Function.prototype);var b=Object.getOwnPropertyDescriptor(h,f);if(b===void 0){var w=Object.getPrototypeOf(h);return w===null?void 0:v(w,f,N)}else{if("value"in b)return b.value;var D=b.get;return D===void 0?void 0:D.call(N)}},o=a(0),c=m(o),d=a(27);function m(v){return v&&v.__esModule?v:{default:v}}function u(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}function p(v,h){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:v}function g(v,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);v.prototype=Object.create(h&&h.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(v,h):v.__proto__=h)}var j=["alt","height","width"],y=function(v){g(h,v);function h(){return u(this,h),p(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return l(h,[{key:"format",value:function(N,b){j.indexOf(N)>-1?b?this.domNode.setAttribute(N,b):this.domNode.removeAttribute(N):i(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"format",this).call(this,N,b)}}],[{key:"create",value:function(N){var b=i(h.__proto__||Object.getPrototypeOf(h),"create",this).call(this,N);return typeof N=="string"&&b.setAttribute("src",this.sanitize(N)),b}},{key:"formats",value:function(N){return j.reduce(function(b,w){return N.hasAttribute(w)&&(b[w]=N.getAttribute(w)),b},{})}},{key:"match",value:function(N){return/\.(jpe?g|gif|png)$/.test(N)||/^data:image\/.+;base64/.test(N)}},{key:"sanitize",value:function(N){return(0,d.sanitize)(N,["http","https","data"])?N:"//:0"}},{key:"value",value:function(N){return N.getAttribute("src")}}]),h}(c.default.Embed);y.blotName="image",y.tagName="IMG",n.default=y},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function v(h,f){for(var N=0;N<f.length;N++){var b=f[N];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,f,N){return f&&v(h.prototype,f),N&&v(h,N),h}}(),i=function v(h,f,N){h===null&&(h=Function.prototype);var b=Object.getOwnPropertyDescriptor(h,f);if(b===void 0){var w=Object.getPrototypeOf(h);return w===null?void 0:v(w,f,N)}else{if("value"in b)return b.value;var D=b.get;return D===void 0?void 0:D.call(N)}},o=a(4),c=a(27),d=m(c);function m(v){return v&&v.__esModule?v:{default:v}}function u(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}function p(v,h){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:v}function g(v,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);v.prototype=Object.create(h&&h.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(v,h):v.__proto__=h)}var j=["height","width"],y=function(v){g(h,v);function h(){return u(this,h),p(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return l(h,[{key:"format",value:function(N,b){j.indexOf(N)>-1?b?this.domNode.setAttribute(N,b):this.domNode.removeAttribute(N):i(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"format",this).call(this,N,b)}}],[{key:"create",value:function(N){var b=i(h.__proto__||Object.getPrototypeOf(h),"create",this).call(this,N);return b.setAttribute("frameborder","0"),b.setAttribute("allowfullscreen",!0),b.setAttribute("src",this.sanitize(N)),b}},{key:"formats",value:function(N){return j.reduce(function(b,w){return N.hasAttribute(w)&&(b[w]=N.getAttribute(w)),b},{})}},{key:"sanitize",value:function(N){return d.default.sanitize(N)}},{key:"value",value:function(N){return N.getAttribute("src")}}]),h}(o.BlockEmbed);y.blotName="video",y.className="ql-video",y.tagName="IFRAME",n.default=y},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var l=function(){function N(b,w){for(var D=0;D<w.length;D++){var S=w[D];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,S.key,S)}}return function(b,w,D){return w&&N(b.prototype,w),D&&N(b,D),b}}(),i=function N(b,w,D){b===null&&(b=Function.prototype);var S=Object.getOwnPropertyDescriptor(b,w);if(S===void 0){var C=Object.getPrototypeOf(b);return C===null?void 0:N(C,w,D)}else{if("value"in S)return S.value;var T=S.get;return T===void 0?void 0:T.call(D)}},o=a(35),c=g(o),d=a(5),m=g(d),u=a(9),p=g(u);function g(N){return N&&N.__esModule?N:{default:N}}function j(N,b){if(!(N instanceof b))throw new TypeError("Cannot call a class as a function")}function y(N,b){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:N}function v(N,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);N.prototype=Object.create(b&&b.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(N,b):N.__proto__=b)}var h=function(N){v(b,N);function b(){return j(this,b),y(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return l(b,null,[{key:"create",value:function(D){var S=i(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,D);return typeof D=="string"&&(window.katex.render(D,S,{throwOnError:!1,errorColor:"#f00"}),S.setAttribute("data-value",D)),S}},{key:"value",value:function(D){return D.getAttribute("data-value")}}]),b}(c.default);h.blotName="formula",h.className="ql-formula",h.tagName="SPAN";var f=function(N){v(b,N),l(b,null,[{key:"register",value:function(){m.default.register(h,!0)}}]);function b(){j(this,b);var w=y(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return w}return b}(p.default);n.FormulaBlot=h,n.default=f},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var l=function(){function D(S,C){for(var T=0;T<C.length;T++){var _=C[T];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(S,_.key,_)}}return function(S,C,T){return C&&D(S.prototype,C),T&&D(S,T),S}}(),i=function D(S,C,T){S===null&&(S=Function.prototype);var _=Object.getOwnPropertyDescriptor(S,C);if(_===void 0){var E=Object.getPrototypeOf(S);return E===null?void 0:D(E,C,T)}else{if("value"in _)return _.value;var A=_.get;return A===void 0?void 0:A.call(T)}},o=a(0),c=y(o),d=a(5),m=y(d),u=a(9),p=y(u),g=a(13),j=y(g);function y(D){return D&&D.__esModule?D:{default:D}}function v(D,S){if(!(D instanceof S))throw new TypeError("Cannot call a class as a function")}function h(D,S){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:D}function f(D,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);D.prototype=Object.create(S&&S.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(D,S):D.__proto__=S)}var N=function(D){f(S,D);function S(){return v(this,S),h(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return l(S,[{key:"replaceWith",value:function(T){this.domNode.textContent=this.domNode.textContent,this.attach(),i(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,T)}},{key:"highlight",value:function(T){var _=this.domNode.textContent;this.cachedText!==_&&((_.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=T(_),this.domNode.normalize(),this.attach()),this.cachedText=_)}}]),S}(j.default);N.className="ql-syntax";var b=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),w=function(D){f(S,D),l(S,null,[{key:"register",value:function(){m.default.register(b,!0),m.default.register(N,!0)}}]);function S(C,T){v(this,S);var _=h(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,C,T));if(typeof _.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var E=null;return _.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(E),E=setTimeout(function(){_.highlight(),E=null},_.options.interval)}),_.highlight(),_}return l(S,[{key:"highlight",value:function(){var T=this;if(!this.quill.selection.composing){this.quill.update(m.default.sources.USER);var _=this.quill.getSelection();this.quill.scroll.descendants(N).forEach(function(E){E.highlight(T.options.highlight)}),this.quill.update(m.default.sources.SILENT),_!=null&&this.quill.setSelection(_,m.default.sources.SILENT)}}}]),S}(p.default);w.DEFAULTS={highlight:function(){return window.hljs==null?null:function(D){var S=window.hljs.highlightAuto(D);return S.value}}(),interval:1e3},n.CodeBlock=N,n.CodeToken=b,n.default=w},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var l=function S(C,T,_){C===null&&(C=Function.prototype);var E=Object.getOwnPropertyDescriptor(C,T);if(E===void 0){var A=Object.getPrototypeOf(C);return A===null?void 0:S(A,T,_)}else{if("value"in E)return E.value;var L=E.get;return L===void 0?void 0:L.call(_)}},i=function(){function S(C,T){for(var _=0;_<T.length;_++){var E=T[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(C,E.key,E)}}return function(C,T,_){return T&&S(C.prototype,T),_&&S(C,_),C}}(),o=a(3),c=v(o),d=a(8),m=v(d),u=a(43),p=v(u),g=a(15),j=a(41),y=v(j);function v(S){return S&&S.__esModule?S:{default:S}}function h(S,C){if(!(S instanceof C))throw new TypeError("Cannot call a class as a function")}function f(S,C){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:S}function N(S,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);S.prototype=Object.create(C&&C.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(S,C):S.__proto__=C)}var b=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],w=function(S){N(C,S);function C(T,_){h(this,C),_.modules.toolbar!=null&&_.modules.toolbar.container==null&&(_.modules.toolbar.container=b);var E=f(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,T,_));return E.quill.container.classList.add("ql-bubble"),E}return i(C,[{key:"extendToolbar",value:function(_){this.tooltip=new D(this.quill,this.options.bounds),this.tooltip.root.appendChild(_.container),this.buildButtons([].slice.call(_.container.querySelectorAll("button")),y.default),this.buildPickers([].slice.call(_.container.querySelectorAll("select")),y.default)}}]),C}(p.default);w.DEFAULTS=(0,c.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(C){C?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var D=function(S){N(C,S);function C(T,_){h(this,C);var E=f(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,T,_));return E.quill.on(m.default.events.EDITOR_CHANGE,function(A,L,F,W){if(A===m.default.events.SELECTION_CHANGE)if(L!=null&&L.length>0&&W===m.default.sources.USER){E.show(),E.root.style.left="0px",E.root.style.width="",E.root.style.width=E.root.offsetWidth+"px";var Y=E.quill.getLines(L.index,L.length);if(Y.length===1)E.position(E.quill.getBounds(L));else{var q=Y[Y.length-1],J=E.quill.getIndex(q),O=Math.min(q.length()-1,L.index+L.length-J),M=E.quill.getBounds(new g.Range(J,O));E.position(M)}}else document.activeElement!==E.textbox&&E.quill.hasFocus()&&E.hide()}),E}return i(C,[{key:"listen",value:function(){var _=this;l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){_.root.classList.remove("ql-editing")}),this.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!_.root.classList.contains("ql-hidden")){var E=_.quill.getSelection();E!=null&&_.position(_.quill.getBounds(E))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(_){var E=l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"position",this).call(this,_),A=this.root.querySelector(".ql-tooltip-arrow");if(A.style.marginLeft="",E===0)return E;A.style.marginLeft=-1*E-A.offsetWidth/2+"px"}}]),C}(u.BaseTooltip);D.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=D,n.default=w},function(r,n,a){r.exports=a(63)}]).default})})(z1);var VP=z1.exports,GP=rn&&rn.__extends||function(){var t=function(s,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)a.hasOwnProperty(l)&&(n[l]=a[l])},t(s,r)};return function(s,r){t(s,r);function n(){this.constructor=s}s.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kd=rn&&rn.__assign||function(){return Kd=Object.assign||function(t){for(var s,r=1,n=arguments.length;r<n;r++){s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},Kd.apply(this,arguments)},QP=rn&&rn.__spreadArrays||function(){for(var t=0,s=0,r=arguments.length;s<r;s++)t+=arguments[s].length;for(var n=Array(t),a=0,s=0;s<r;s++)for(var l=arguments[s],i=0,o=l.length;i<o;i++,a++)n[a]=l[i];return n},zu=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Mn=zu(x),ZP=zu(Pj),Ki=zu(qP),B0=zu(VP),JP=function(t){GP(s,t);function s(r){var n=t.call(this,r)||this;n.dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.selection=null,n.onEditorChange=function(l,i,o,c){var d,m,u,p;l==="text-change"?(m=(d=n).onEditorChangeText)===null||m===void 0||m.call(d,n.editor.root.innerHTML,i,c,n.unprivilegedEditor):l==="selection-change"&&((p=(u=n).onEditorChangeSelection)===null||p===void 0||p.call(u,i,c,n.unprivilegedEditor))};var a=n.isControlled()?r.value:r.defaultValue;return n.value=a??"",n}return s.prototype.validateProps=function(r){var n;if(Mn.default.Children.count(r.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Mn.default.Children.count(r.children)){var a=Mn.default.Children.only(r.children);if(((n=a)===null||n===void 0?void 0:n.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&r.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},s.prototype.shouldComponentUpdate=function(r,n){var a=this,l;if(this.validateProps(r),!this.editor||this.state.generation!==n.generation)return!0;if("value"in r){var i=this.getEditorContents(),o=(l=r.value,l??"");this.isEqualValue(o,i)||this.setEditorContents(this.editor,o)}return r.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,r.readOnly),QP(this.cleanProps,this.dirtyProps).some(function(c){return!Ki.default(r[c],a.props[c])})},s.prototype.shouldComponentRegenerate=function(r){var n=this;return this.dirtyProps.some(function(a){return!Ki.default(r[a],n.props[a])})},s.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},s.prototype.componentWillUnmount=function(){this.destroyEditor()},s.prototype.componentDidUpdate=function(r,n){var a=this;if(this.editor&&this.shouldComponentRegenerate(r)){var l=this.editor.getContents(),i=this.editor.getSelection();this.regenerationSnapshot={delta:l,selection:i},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==n.generation){var o=this.regenerationSnapshot,l=o.delta,c=o.selection;delete this.regenerationSnapshot,this.instantiateEditor();var d=this.editor;d.setContents(l),z0(function(){return a.setEditorSelection(d,c)})}},s.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},s.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},s.prototype.isControlled=function(){return"value"in this.props},s.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},s.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},s.prototype.createEditor=function(r,n){var a=new B0.default(r,n);return n.tabIndex!=null&&this.setEditorTabIndex(a,n.tabIndex),this.hookEditor(a),a},s.prototype.hookEditor=function(r){this.unprivilegedEditor=this.makeUnprivilegedEditor(r),r.on("editor-change",this.onEditorChange)},s.prototype.unhookEditor=function(r){r.off("editor-change",this.onEditorChange)},s.prototype.getEditorContents=function(){return this.value},s.prototype.getEditorSelection=function(){return this.selection},s.prototype.isDelta=function(r){return r&&r.ops},s.prototype.isEqualValue=function(r,n){return this.isDelta(r)&&this.isDelta(n)?Ki.default(r.ops,n.ops):Ki.default(r,n)},s.prototype.setEditorContents=function(r,n){var a=this;this.value=n;var l=this.getEditorSelection();typeof n=="string"?r.setContents(r.clipboard.convert(n)):r.setContents(n),z0(function(){return a.setEditorSelection(r,l)})},s.prototype.setEditorSelection=function(r,n){if(this.selection=n,n){var a=r.getLength();n.index=Math.max(0,Math.min(n.index,a-1)),n.length=Math.max(0,Math.min(n.length,a-1-n.index)),r.setSelection(n)}},s.prototype.setEditorTabIndex=function(r,n){var a,l;!((l=(a=r)===null||a===void 0?void 0:a.scroll)===null||l===void 0)&&l.domNode&&(r.scroll.domNode.tabIndex=n)},s.prototype.setEditorReadOnly=function(r,n){n?r.disable():r.enable()},s.prototype.makeUnprivilegedEditor=function(r){var n=r;return{getHTML:function(){return n.root.innerHTML},getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}},s.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var r=ZP.default.findDOMNode(this.editingArea);if(!r)throw new Error("Cannot find element for editing area");if(r.nodeType===3)throw new Error("Editing area cannot be a text node");return r},s.prototype.renderEditingArea=function(){var r=this,n=this.props,a=n.children,l=n.preserveWhitespace,i=this.state.generation,o={key:i,ref:function(c){r.editingArea=c}};return Mn.default.Children.count(a)?Mn.default.cloneElement(Mn.default.Children.only(a),o):l?Mn.default.createElement("pre",Kd({},o)):Mn.default.createElement("div",Kd({},o))},s.prototype.render=function(){var r;return Mn.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(r=this.props.className,r??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},s.prototype.onEditorChangeText=function(r,n,a,l){var i,o;if(this.editor){var c=this.isDelta(this.value)?l.getContents():l.getHTML();c!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=c,(o=(i=this.props).onChange)===null||o===void 0||o.call(i,r,n,a,l))}},s.prototype.onEditorChangeSelection=function(r,n,a){var l,i,o,c,d,m;if(this.editor){var u=this.getEditorSelection(),p=!u&&r,g=u&&!r;Ki.default(r,u)||(this.selection=r,(i=(l=this.props).onChangeSelection)===null||i===void 0||i.call(l,r,n,a),p?(c=(o=this.props).onFocus)===null||c===void 0||c.call(o,r,n,a):g&&((m=(d=this.props).onBlur)===null||m===void 0||m.call(d,u,n,a)))}},s.prototype.focus=function(){this.editor&&this.editor.focus()},s.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},s.displayName="React Quill",s.Quill=B0.default,s.defaultProps={theme:"snow",modules:{},readOnly:!1},s}(Mn.default.Component);function z0(t){Promise.resolve().then(t)}var XP=JP;const W1=Nb(XP);var Di={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y1=x;function is(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ur=Object.prototype.hasOwnProperty,eR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W0={},Y0={};function K1(t){return Ur.call(Y0,t)?!0:Ur.call(W0,t)?!1:eR.test(t)?Y0[t]=!0:(W0[t]=!0,!1)}function Rr(t,s,r,n,a,l,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=l,this.removeEmptyString=i}var gr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gr[t]=new Rr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];gr[s]=new Rr(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gr[t]=new Rr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gr[t]=new Rr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gr[t]=new Rr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gr[t]=new Rr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gr[t]=new Rr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gr[t]=new Rr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gr[t]=new Rr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yf=/[\-:]([a-z])/g;function Kf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(Yf,Kf);gr[s]=new Rr(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(Yf,Kf);gr[s]=new Rr(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(Yf,Kf);gr[s]=new Rr(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gr[t]=new Rr(t,1,!1,t.toLowerCase(),null,!1,!1)});gr.xlinkHref=new Rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gr[t]=new Rr(t,1,!1,t.toLowerCase(),null,!0,!0)});var sd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tR=["Webkit","ms","Moz","O"];Object.keys(sd).forEach(function(t){tR.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),sd[s]=sd[t]})});var sR=/["'&<>]/;function Tr(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var s=sR.exec(t);if(s){var r="",n,a=0;for(n=s.index;n<t.length;n++){switch(t.charCodeAt(n)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 39:s="&#x27;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}a!==n&&(r+=t.substring(a,n)),a=n+1,r+=s}t=a!==n?r+t.substring(a,n):r}return t}var rR=/([A-Z])/g,nR=/^ms-/,wp=Array.isArray;function Kn(t,s){return{insertionMode:t,selectedValue:s}}function aR(t,s,r){switch(s){case"select":return Kn(1,r.value!=null?r.value:r.defaultValue);case"svg":return Kn(2,null);case"math":return Kn(3,null);case"foreignObject":return Kn(1,null);case"table":return Kn(4,null);case"thead":case"tbody":case"tfoot":return Kn(5,null);case"colgroup":return Kn(7,null);case"tr":return Kn(6,null)}return 4<=t.insertionMode||t.insertionMode===0?Kn(1,null):t}var K0=new Map;function q1(t,s,r){if(typeof r!="object")throw Error(is(62));s=!0;for(var n in r)if(Ur.call(r,n)){var a=r[n];if(a!=null&&typeof a!="boolean"&&a!==""){if(n.indexOf("--")===0){var l=Tr(n);a=Tr((""+a).trim())}else{l=n;var i=K0.get(l);i!==void 0||(i=Tr(l.replace(rR,"-$1").toLowerCase().replace(nR,"-ms-")),K0.set(l,i)),l=i,a=typeof a=="number"?a===0||Ur.call(sd,n)?""+a:a+"px":Tr((""+a).trim())}s?(s=!1,t.push(' style="',l,":",a)):t.push(";",l,":",a)}}s||t.push('"')}function Gr(t,s,r,n){switch(r){case"style":q1(t,s,n);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N"){if(s=gr.hasOwnProperty(r)?gr[r]:null,s!==null){switch(typeof n){case"function":case"symbol":return;case"boolean":if(!s.acceptsBooleans)return}switch(r=s.attributeName,s.type){case 3:n&&t.push(" ",r,'=""');break;case 4:n===!0?t.push(" ",r,'=""'):n!==!1&&t.push(" ",r,'="',Tr(n),'"');break;case 5:isNaN(n)||t.push(" ",r,'="',Tr(n),'"');break;case 6:!isNaN(n)&&1<=n&&t.push(" ",r,'="',Tr(n),'"');break;default:s.sanitizeURL&&(n=""+n),t.push(" ",r,'="',Tr(n),'"')}}else if(K1(r)){switch(typeof n){case"function":case"symbol":return;case"boolean":if(s=r.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-")return}t.push(" ",r,'="',Tr(n),'"')}}}function rd(t,s,r){if(s!=null){if(r!=null)throw Error(is(60));if(typeof s!="object"||!("__html"in s))throw Error(is(61));s=s.__html,s!=null&&t.push(""+s)}}function lR(t){var s="";return Y1.Children.forEach(t,function(r){r!=null&&(s+=r)}),s}function Bm(t,s,r,n){t.push(Ln(r));var a=r=null,l;for(l in s)if(Ur.call(s,l)){var i=s[l];if(i!=null)switch(l){case"children":r=i;break;case"dangerouslySetInnerHTML":a=i;break;default:Gr(t,n,l,i)}}return t.push(">"),rd(t,a,r),typeof r=="string"?(t.push(Tr(r)),null):r}var iR=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,q0=new Map;function Ln(t){var s=q0.get(t);if(s===void 0){if(!iR.test(t))throw Error(is(65,t));s="<"+t,q0.set(t,s)}return s}function oR(t,s,r,n,a){switch(s){case"select":t.push(Ln("select"));var l=null,i=null;for(m in r)if(Ur.call(r,m)){var o=r[m];if(o!=null)switch(m){case"children":l=o;break;case"dangerouslySetInnerHTML":i=o;break;case"defaultValue":case"value":break;default:Gr(t,n,m,o)}}return t.push(">"),rd(t,i,l),l;case"option":i=a.selectedValue,t.push(Ln("option"));var c=o=null,d=null,m=null;for(l in r)if(Ur.call(r,l)){var u=r[l];if(u!=null)switch(l){case"children":o=u;break;case"selected":d=u;break;case"dangerouslySetInnerHTML":m=u;break;case"value":c=u;default:Gr(t,n,l,u)}}if(i!=null)if(r=c!==null?""+c:lR(o),wp(i)){for(n=0;n<i.length;n++)if(""+i[n]===r){t.push(' selected=""');break}}else""+i===r&&t.push(' selected=""');else d&&t.push(' selected=""');return t.push(">"),rd(t,m,o),o;case"textarea":t.push(Ln("textarea")),m=i=l=null;for(o in r)if(Ur.call(r,o)&&(c=r[o],c!=null))switch(o){case"children":m=c;break;case"value":l=c;break;case"defaultValue":i=c;break;case"dangerouslySetInnerHTML":throw Error(is(91));default:Gr(t,n,o,c)}if(l===null&&i!==null&&(l=i),t.push(">"),m!=null){if(l!=null)throw Error(is(92));if(wp(m)&&1<m.length)throw Error(is(93));l=""+m}return typeof l=="string"&&l[0]===`
`&&t.push(`
`),l!==null&&t.push(Tr(""+l)),null;case"input":t.push(Ln("input")),c=m=o=l=null;for(i in r)if(Ur.call(r,i)&&(d=r[i],d!=null))switch(i){case"children":case"dangerouslySetInnerHTML":throw Error(is(399,"input"));case"defaultChecked":c=d;break;case"defaultValue":o=d;break;case"checked":m=d;break;case"value":l=d;break;default:Gr(t,n,i,d)}return m!==null?Gr(t,n,"checked",m):c!==null&&Gr(t,n,"checked",c),l!==null?Gr(t,n,"value",l):o!==null&&Gr(t,n,"value",o),t.push("/>"),null;case"menuitem":t.push(Ln("menuitem"));for(var p in r)if(Ur.call(r,p)&&(l=r[p],l!=null))switch(p){case"children":case"dangerouslySetInnerHTML":throw Error(is(400));default:Gr(t,n,p,l)}return t.push(">"),null;case"title":t.push(Ln("title")),l=null;for(u in r)if(Ur.call(r,u)&&(i=r[u],i!=null))switch(u){case"children":l=i;break;case"dangerouslySetInnerHTML":throw Error(is(434));default:Gr(t,n,u,i)}return t.push(">"),l;case"listing":case"pre":t.push(Ln(s)),i=l=null;for(c in r)if(Ur.call(r,c)&&(o=r[c],o!=null))switch(c){case"children":l=o;break;case"dangerouslySetInnerHTML":i=o;break;default:Gr(t,n,c,o)}if(t.push(">"),i!=null){if(l!=null)throw Error(is(60));if(typeof i!="object"||!("__html"in i))throw Error(is(61));r=i.__html,r!=null&&(typeof r=="string"&&0<r.length&&r[0]===`
`?t.push(`
`,r):t.push(""+r))}return typeof l=="string"&&l[0]===`
`&&t.push(`
`),l;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(Ln(s));for(var g in r)if(Ur.call(r,g)&&(l=r[g],l!=null))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(is(399,s));default:Gr(t,n,g,l)}return t.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Bm(t,r,s,n);case"html":return a.insertionMode===0&&t.push("<!DOCTYPE html>"),Bm(t,r,s,n);default:if(s.indexOf("-")===-1&&typeof r.is!="string")return Bm(t,r,s,n);t.push(Ln(s)),i=l=null;for(d in r)if(Ur.call(r,d)&&(o=r[d],o!=null))switch(d){case"children":l=o;break;case"dangerouslySetInnerHTML":i=o;break;case"style":q1(t,n,o);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:K1(d)&&typeof o!="function"&&typeof o!="symbol"&&t.push(" ",d,'="',Tr(o),'"')}return t.push(">"),rd(t,i,l),l}}function V0(t,s,r){if(t.push('<!--$?--><template id="'),r===null)throw Error(is(395));return t.push(r),t.push('"></template>')}function cR(t,s,r,n){switch(r.insertionMode){case 0:case 1:return t.push('<div hidden id="'),t.push(s.segmentPrefix),s=n.toString(16),t.push(s),t.push('">');case 2:return t.push('<svg aria-hidden="true" style="display:none" id="'),t.push(s.segmentPrefix),s=n.toString(16),t.push(s),t.push('">');case 3:return t.push('<math aria-hidden="true" style="display:none" id="'),t.push(s.segmentPrefix),s=n.toString(16),t.push(s),t.push('">');case 4:return t.push('<table hidden id="'),t.push(s.segmentPrefix),s=n.toString(16),t.push(s),t.push('">');case 5:return t.push('<table hidden><tbody id="'),t.push(s.segmentPrefix),s=n.toString(16),t.push(s),t.push('">');case 6:return t.push('<table hidden><tr id="'),t.push(s.segmentPrefix),s=n.toString(16),t.push(s),t.push('">');case 7:return t.push('<table hidden><colgroup id="'),t.push(s.segmentPrefix),s=n.toString(16),t.push(s),t.push('">');default:throw Error(is(397))}}function dR(t,s){switch(s.insertionMode){case 0:case 1:return t.push("</div>");case 2:return t.push("</svg>");case 3:return t.push("</math>");case 4:return t.push("</table>");case 5:return t.push("</tbody></table>");case 6:return t.push("</tr></table>");case 7:return t.push("</colgroup></table>");default:throw Error(is(397))}}var uR=/[<\u2028\u2029]/g;function zm(t){return JSON.stringify(t).replace(uR,function(s){switch(s){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function mR(t,s){return s=s===void 0?"":s,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:s+"P:",segmentPrefix:s+"S:",boundaryPrefix:s+"B:",idPrefix:s,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:t}}function G0(t,s,r,n){return r.generateStaticMarkup?(t.push(Tr(s)),!1):(s===""?t=n:(n&&t.push("<!-- -->"),t.push(Tr(s)),t=!0),t)}var vo=Object.assign,hR=Symbol.for("react.element"),V1=Symbol.for("react.portal"),G1=Symbol.for("react.fragment"),Q1=Symbol.for("react.strict_mode"),Z1=Symbol.for("react.profiler"),J1=Symbol.for("react.provider"),X1=Symbol.for("react.context"),e2=Symbol.for("react.forward_ref"),t2=Symbol.for("react.suspense"),s2=Symbol.for("react.suspense_list"),r2=Symbol.for("react.memo"),qf=Symbol.for("react.lazy"),pR=Symbol.for("react.scope"),fR=Symbol.for("react.debug_trace_mode"),xR=Symbol.for("react.legacy_hidden"),gR=Symbol.for("react.default_value"),Q0=Symbol.iterator;function Sp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G1:return"Fragment";case V1:return"Portal";case Z1:return"Profiler";case Q1:return"StrictMode";case t2:return"Suspense";case s2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case X1:return(t.displayName||"Context")+".Consumer";case J1:return(t._context.displayName||"Context")+".Provider";case e2:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case r2:return s=t.displayName||null,s!==null?s:Sp(t.type)||"Memo";case qf:s=t._payload,t=t._init;try{return Sp(t(s))}catch{}}return null}var n2={};function Z0(t,s){if(t=t.contextTypes,!t)return n2;var r={},n;for(n in t)r[n]=s[n];return r}var ll=null;function Wu(t,s){if(t!==s){t.context._currentValue2=t.parentValue,t=t.parent;var r=s.parent;if(t===null){if(r!==null)throw Error(is(401))}else{if(r===null)throw Error(is(401));Wu(t,r)}s.context._currentValue2=s.value}}function a2(t){t.context._currentValue2=t.parentValue,t=t.parent,t!==null&&a2(t)}function l2(t){var s=t.parent;s!==null&&l2(s),t.context._currentValue2=t.value}function i2(t,s){if(t.context._currentValue2=t.parentValue,t=t.parent,t===null)throw Error(is(402));t.depth===s.depth?Wu(t,s):i2(t,s)}function o2(t,s){var r=s.parent;if(r===null)throw Error(is(402));t.depth===r.depth?Wu(t,r):o2(t,r),s.context._currentValue2=s.value}function qd(t){var s=ll;s!==t&&(s===null?l2(t):t===null?a2(s):s.depth===t.depth?Wu(s,t):s.depth>t.depth?i2(s,t):o2(s,t),ll=t)}var J0={isMounted:function(){return!1},enqueueSetState:function(t,s){t=t._reactInternals,t.queue!==null&&t.queue.push(s)},enqueueReplaceState:function(t,s){t=t._reactInternals,t.replace=!0,t.queue=[s]},enqueueForceUpdate:function(){}};function X0(t,s,r,n){var a=t.state!==void 0?t.state:null;t.updater=J0,t.props=r,t.state=a;var l={queue:[],replace:!1};t._reactInternals=l;var i=s.contextType;if(t.context=typeof i=="object"&&i!==null?i._currentValue2:n,i=s.getDerivedStateFromProps,typeof i=="function"&&(i=i(r,a),a=i==null?a:vo({},a,i),t.state=a),typeof s.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(s=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),s!==t.state&&J0.enqueueReplaceState(t,t.state,null),l.queue!==null&&0<l.queue.length)if(s=l.queue,i=l.replace,l.queue=null,l.replace=!1,i&&s.length===1)t.state=s[0];else{for(l=i?s[0]:t.state,a=!0,i=i?1:0;i<s.length;i++){var o=s[i];o=typeof o=="function"?o.call(t,l,r,n):o,o!=null&&(a?(a=!1,l=vo({},l,o)):vo(l,o))}t.state=l}else l.queue=null}var yR={id:1,overflow:""};function _p(t,s,r){var n=t.id;t=t.overflow;var a=32-nd(n)-1;n&=~(1<<a),r+=1;var l=32-nd(s)+a;if(30<l){var i=a-a%5;return l=(n&(1<<i)-1).toString(32),n>>=i,a-=i,{id:1<<32-nd(s)+a|r<<a|n,overflow:l+t}}return{id:1<<l|r<<a|n,overflow:t}}var nd=Math.clz32?Math.clz32:jR,bR=Math.log,vR=Math.LN2;function jR(t){return t>>>=0,t===0?32:31-(bR(t)/vR|0)|0}function NR(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var wR=typeof Object.is=="function"?Object.is:NR,na=null,Vf=null,ad=null,Cs=null,ro=!1,Vd=!1,Ko=0,Ea=null,Yu=0;function Za(){if(na===null)throw Error(is(321));return na}function ey(){if(0<Yu)throw Error(is(312));return{memoizedState:null,queue:null,next:null}}function Gf(){return Cs===null?ad===null?(ro=!1,ad=Cs=ey()):(ro=!0,Cs=ad):Cs.next===null?(ro=!1,Cs=Cs.next=ey()):(ro=!0,Cs=Cs.next),Cs}function Qf(){Vf=na=null,Vd=!1,ad=null,Yu=0,Cs=Ea=null}function c2(t,s){return typeof s=="function"?s(t):s}function ty(t,s,r){if(na=Za(),Cs=Gf(),ro){var n=Cs.queue;if(s=n.dispatch,Ea!==null&&(r=Ea.get(n),r!==void 0)){Ea.delete(n),n=Cs.memoizedState;do n=t(n,r.action),r=r.next;while(r!==null);return Cs.memoizedState=n,[n,s]}return[Cs.memoizedState,s]}return t=t===c2?typeof s=="function"?s():s:r!==void 0?r(s):s,Cs.memoizedState=t,t=Cs.queue={last:null,dispatch:null},t=t.dispatch=SR.bind(null,na,t),[Cs.memoizedState,t]}function sy(t,s){if(na=Za(),Cs=Gf(),s=s===void 0?null:s,Cs!==null){var r=Cs.memoizedState;if(r!==null&&s!==null){var n=r[1];e:if(n===null)n=!1;else{for(var a=0;a<n.length&&a<s.length;a++)if(!wR(s[a],n[a])){n=!1;break e}n=!0}if(n)return r[0]}}return t=t(),Cs.memoizedState=[t,s],t}function SR(t,s,r){if(25<=Yu)throw Error(is(301));if(t===na)if(Vd=!0,t={action:r,next:null},Ea===null&&(Ea=new Map),r=Ea.get(s),r===void 0)Ea.set(s,t);else{for(s=r;s.next!==null;)s=s.next;s.next=t}}function _R(){throw Error(is(394))}function Mc(){}var ry={readContext:function(t){return t._currentValue2},useContext:function(t){return Za(),t._currentValue2},useMemo:sy,useReducer:ty,useRef:function(t){na=Za(),Cs=Gf();var s=Cs.memoizedState;return s===null?(t={current:t},Cs.memoizedState=t):s},useState:function(t){return ty(c2,t)},useInsertionEffect:Mc,useLayoutEffect:function(){},useCallback:function(t,s){return sy(function(){return t},s)},useImperativeHandle:Mc,useEffect:Mc,useDebugValue:Mc,useDeferredValue:function(t){return Za(),t},useTransition:function(){return Za(),[!1,_R]},useId:function(){var t=Vf.treeContext,s=t.overflow;t=t.id,t=(t&~(1<<32-nd(t)-1)).toString(32)+s;var r=ld;if(r===null)throw Error(is(404));return s=Ko++,t=":"+r.idPrefix+"R"+t,0<s&&(t+="H"+s.toString(32)),t+":"},useMutableSource:function(t,s){return Za(),s(t._source)},useSyncExternalStore:function(t,s,r){if(r===void 0)throw Error(is(407));return r()}},ld=null,Wm=Y1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function ER(t){return console.error(t),null}function no(){}function kR(t,s,r,n,a,l,i,o,c){var d=[],m=new Set;return s={destination:null,responseState:s,progressiveChunkSize:n===void 0?12800:n,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:m,pingedTasks:d,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:a===void 0?ER:a,onAllReady:no,onShellReady:i===void 0?no:i,onShellError:no,onFatalError:no},r=Gd(s,0,null,r,!1,!1),r.parentFlushed=!0,t=Zf(s,t,null,r,m,n2,null,yR),d.push(t),s}function Zf(t,s,r,n,a,l,i,o){t.allPendingTasks++,r===null?t.pendingRootTasks++:r.pendingTasks++;var c={node:s,ping:function(){var d=t.pingedTasks;d.push(c),d.length===1&&m2(t)},blockedBoundary:r,blockedSegment:n,abortSet:a,legacyContext:l,context:i,treeContext:o};return a.add(c),c}function Gd(t,s,r,n,a,l){return{status:0,id:-1,index:s,parentFlushed:!1,chunks:[],children:[],formatContext:n,boundary:r,lastPushedText:a,textEmbedded:l}}function qo(t,s){if(t=t.onError(s),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function Qd(t,s){var r=t.onShellError;r(s),r=t.onFatalError,r(s),t.destination!==null?(t.status=2,t.destination.destroy(s)):(t.status=1,t.fatalError=s)}function ny(t,s,r,n,a){for(na={},Vf=s,Ko=0,t=r(n,a);Vd;)Vd=!1,Ko=0,Yu+=1,Cs=null,t=r(n,a);return Qf(),t}function ay(t,s,r,n){var a=r.render(),l=n.childContextTypes;if(l!=null){var i=s.legacyContext;if(typeof r.getChildContext!="function")n=i;else{r=r.getChildContext();for(var o in r)if(!(o in l))throw Error(is(108,Sp(n)||"Unknown",o));n=vo({},i,r)}s.legacyContext=n,Xr(t,s,a),s.legacyContext=i}else Xr(t,s,a)}function ly(t,s){if(t&&t.defaultProps){s=vo({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function Ep(t,s,r,n,a){if(typeof r=="function")if(r.prototype&&r.prototype.isReactComponent){a=Z0(r,s.legacyContext);var l=r.contextType;l=new r(n,typeof l=="object"&&l!==null?l._currentValue2:a),X0(l,r,n,a),ay(t,s,l,r)}else{l=Z0(r,s.legacyContext),a=ny(t,s,r,n,l);var i=Ko!==0;if(typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0)X0(a,r,n,l),ay(t,s,a,r);else if(i){n=s.treeContext,s.treeContext=_p(n,1,0);try{Xr(t,s,a)}finally{s.treeContext=n}}else Xr(t,s,a)}else if(typeof r=="string"){switch(a=s.blockedSegment,l=oR(a.chunks,r,n,t.responseState,a.formatContext),a.lastPushedText=!1,i=a.formatContext,a.formatContext=aR(i,r,n),kp(t,s,l),a.formatContext=i,r){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:a.chunks.push("</",r,">")}a.lastPushedText=!1}else{switch(r){case xR:case fR:case Q1:case Z1:case G1:Xr(t,s,n.children);return;case s2:Xr(t,s,n.children);return;case pR:throw Error(is(343));case t2:e:{r=s.blockedBoundary,a=s.blockedSegment,l=n.fallback,n=n.children,i=new Set;var o={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:i,errorDigest:null},c=Gd(t,a.chunks.length,o,a.formatContext,!1,!1);a.children.push(c),a.lastPushedText=!1;var d=Gd(t,0,null,a.formatContext,!1,!1);d.parentFlushed=!0,s.blockedBoundary=o,s.blockedSegment=d;try{if(kp(t,s,n),t.responseState.generateStaticMarkup||d.lastPushedText&&d.textEmbedded&&d.chunks.push("<!-- -->"),d.status=1,Zd(o,d),o.pendingTasks===0)break e}catch(m){d.status=4,o.forceClientRender=!0,o.errorDigest=qo(t,m)}finally{s.blockedBoundary=r,s.blockedSegment=a}s=Zf(t,l,r,c,i,s.legacyContext,s.context,s.treeContext),t.pingedTasks.push(s)}return}if(typeof r=="object"&&r!==null)switch(r.$$typeof){case e2:if(n=ny(t,s,r.render,n,a),Ko!==0){r=s.treeContext,s.treeContext=_p(r,1,0);try{Xr(t,s,n)}finally{s.treeContext=r}}else Xr(t,s,n);return;case r2:r=r.type,n=ly(r,n),Ep(t,s,r,n,a);return;case J1:if(a=n.children,r=r._context,n=n.value,l=r._currentValue2,r._currentValue2=n,i=ll,ll=n={parent:i,depth:i===null?0:i.depth+1,context:r,parentValue:l,value:n},s.context=n,Xr(t,s,a),t=ll,t===null)throw Error(is(403));n=t.parentValue,t.context._currentValue2=n===gR?t.context._defaultValue:n,t=ll=t.parent,s.context=t;return;case X1:n=n.children,n=n(r._currentValue2),Xr(t,s,n);return;case qf:a=r._init,r=a(r._payload),n=ly(r,n),Ep(t,s,r,n,void 0);return}throw Error(is(130,r==null?r:typeof r,""))}}function Xr(t,s,r){if(s.node=r,typeof r=="object"&&r!==null){switch(r.$$typeof){case hR:Ep(t,s,r.type,r.props,r.ref);return;case V1:throw Error(is(257));case qf:var n=r._init;r=n(r._payload),Xr(t,s,r);return}if(wp(r)){iy(t,s,r);return}if(r===null||typeof r!="object"?n=null:(n=Q0&&r[Q0]||r["@@iterator"],n=typeof n=="function"?n:null),n&&(n=n.call(r))){if(r=n.next(),!r.done){var a=[];do a.push(r.value),r=n.next();while(!r.done);iy(t,s,a)}return}throw t=Object.prototype.toString.call(r),Error(is(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}typeof r=="string"?(n=s.blockedSegment,n.lastPushedText=G0(s.blockedSegment.chunks,r,t.responseState,n.lastPushedText)):typeof r=="number"&&(n=s.blockedSegment,n.lastPushedText=G0(s.blockedSegment.chunks,""+r,t.responseState,n.lastPushedText))}function iy(t,s,r){for(var n=r.length,a=0;a<n;a++){var l=s.treeContext;s.treeContext=_p(l,n,a);try{kp(t,s,r[a])}finally{s.treeContext=l}}}function kp(t,s,r){var n=s.blockedSegment.formatContext,a=s.legacyContext,l=s.context;try{return Xr(t,s,r)}catch(c){if(Qf(),typeof c=="object"&&c!==null&&typeof c.then=="function"){r=c;var i=s.blockedSegment,o=Gd(t,i.chunks.length,null,i.formatContext,i.lastPushedText,!0);i.children.push(o),i.lastPushedText=!1,t=Zf(t,s.node,s.blockedBoundary,o,s.abortSet,s.legacyContext,s.context,s.treeContext).ping,r.then(t,t),s.blockedSegment.formatContext=n,s.legacyContext=a,s.context=l,qd(l)}else throw s.blockedSegment.formatContext=n,s.legacyContext=a,s.context=l,qd(l),c}}function CR(t){var s=t.blockedBoundary;t=t.blockedSegment,t.status=3,u2(this,s,t)}function d2(t,s,r){var n=t.blockedBoundary;t.blockedSegment.status=3,n===null?(s.allPendingTasks--,s.status!==2&&(s.status=2,s.destination!==null&&s.destination.push(null))):(n.pendingTasks--,n.forceClientRender||(n.forceClientRender=!0,t=r===void 0?Error(is(432)):r,n.errorDigest=s.onError(t),n.parentFlushed&&s.clientRenderedBoundaries.push(n)),n.fallbackAbortableTasks.forEach(function(a){return d2(a,s,r)}),n.fallbackAbortableTasks.clear(),s.allPendingTasks--,s.allPendingTasks===0&&(n=s.onAllReady,n()))}function Zd(t,s){if(s.chunks.length===0&&s.children.length===1&&s.children[0].boundary===null){var r=s.children[0];r.id=s.id,r.parentFlushed=!0,r.status===1&&Zd(t,r)}else t.completedSegments.push(s)}function u2(t,s,r){if(s===null){if(r.parentFlushed){if(t.completedRootSegment!==null)throw Error(is(389));t.completedRootSegment=r}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=no,s=t.onShellReady,s())}else s.pendingTasks--,s.forceClientRender||(s.pendingTasks===0?(r.parentFlushed&&r.status===1&&Zd(s,r),s.parentFlushed&&t.completedBoundaries.push(s),s.fallbackAbortableTasks.forEach(CR,t),s.fallbackAbortableTasks.clear()):r.parentFlushed&&r.status===1&&(Zd(s,r),s.completedSegments.length===1&&s.parentFlushed&&t.partialBoundaries.push(s)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function m2(t){if(t.status!==2){var s=ll,r=Wm.current;Wm.current=ry;var n=ld;ld=t.responseState;try{var a=t.pingedTasks,l;for(l=0;l<a.length;l++){var i=a[l],o=t,c=i.blockedSegment;if(c.status===0){qd(i.context);try{Xr(o,i,i.node),o.responseState.generateStaticMarkup||c.lastPushedText&&c.textEmbedded&&c.chunks.push("<!-- -->"),i.abortSet.delete(i),c.status=1,u2(o,i.blockedBoundary,c)}catch(j){if(Qf(),typeof j=="object"&&j!==null&&typeof j.then=="function"){var d=i.ping;j.then(d,d)}else{i.abortSet.delete(i),c.status=4;var m=i.blockedBoundary,u=j,p=qo(o,u);if(m===null?Qd(o,u):(m.pendingTasks--,m.forceClientRender||(m.forceClientRender=!0,m.errorDigest=p,m.parentFlushed&&o.clientRenderedBoundaries.push(m))),o.allPendingTasks--,o.allPendingTasks===0){var g=o.onAllReady;g()}}}finally{}}}a.splice(0,l),t.destination!==null&&Jf(t,t.destination)}catch(j){qo(t,j),Qd(t,j)}finally{ld=n,Wm.current=r,r===ry&&qd(s)}}}function Ic(t,s,r){switch(r.parentFlushed=!0,r.status){case 0:var n=r.id=t.nextSegmentId++;return r.lastPushedText=!1,r.textEmbedded=!1,t=t.responseState,s.push('<template id="'),s.push(t.placeholderPrefix),t=n.toString(16),s.push(t),s.push('"></template>');case 1:r.status=2;var a=!0;n=r.chunks;var l=0;r=r.children;for(var i=0;i<r.length;i++){for(a=r[i];l<a.index;l++)s.push(n[l]);a=Ku(t,s,a)}for(;l<n.length-1;l++)s.push(n[l]);return l<n.length&&(a=s.push(n[l])),a;default:throw Error(is(390))}}function Ku(t,s,r){var n=r.boundary;if(n===null)return Ic(t,s,r);if(n.parentFlushed=!0,n.forceClientRender)return t.responseState.generateStaticMarkup||(n=n.errorDigest,s.push("<!--$!-->"),s.push("<template"),n&&(s.push(' data-dgst="'),n=Tr(n),s.push(n),s.push('"')),s.push("></template>")),Ic(t,s,r),t=t.responseState.generateStaticMarkup?!0:s.push("<!--/$-->"),t;if(0<n.pendingTasks){n.rootSegmentID=t.nextSegmentId++,0<n.completedSegments.length&&t.partialBoundaries.push(n);var a=t.responseState,l=a.nextSuspenseID++;return a=a.boundaryPrefix+l.toString(16),n=n.id=a,V0(s,t.responseState,n),Ic(t,s,r),s.push("<!--/$-->")}if(n.byteSize>t.progressiveChunkSize)return n.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(n),V0(s,t.responseState,n.id),Ic(t,s,r),s.push("<!--/$-->");if(t.responseState.generateStaticMarkup||s.push("<!--$-->"),r=n.completedSegments,r.length!==1)throw Error(is(391));return Ku(t,s,r[0]),t=t.responseState.generateStaticMarkup?!0:s.push("<!--/$-->"),t}function oy(t,s,r){return cR(s,t.responseState,r.formatContext,r.id),Ku(t,s,r),dR(s,r.formatContext)}function cy(t,s,r){for(var n=r.completedSegments,a=0;a<n.length;a++)h2(t,s,r,n[a]);if(n.length=0,t=t.responseState,n=r.id,r=r.rootSegmentID,s.push(t.startInlineScript),t.sentCompleteBoundaryFunction?s.push('$RC("'):(t.sentCompleteBoundaryFunction=!0,s.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),n===null)throw Error(is(395));return r=r.toString(16),s.push(n),s.push('","'),s.push(t.segmentPrefix),s.push(r),s.push('")<\/script>')}function h2(t,s,r,n){if(n.status===2)return!0;var a=n.id;if(a===-1){if((n.id=r.rootSegmentID)===-1)throw Error(is(392));return oy(t,s,n)}return oy(t,s,n),t=t.responseState,s.push(t.startInlineScript),t.sentCompleteSegmentFunction?s.push('$RS("'):(t.sentCompleteSegmentFunction=!0,s.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),s.push(t.segmentPrefix),a=a.toString(16),s.push(a),s.push('","'),s.push(t.placeholderPrefix),s.push(a),s.push('")<\/script>')}function Jf(t,s){try{var r=t.completedRootSegment;if(r!==null&&t.pendingRootTasks===0){Ku(t,s,r),t.completedRootSegment=null;var n=t.responseState.bootstrapChunks;for(r=0;r<n.length-1;r++)s.push(n[r]);r<n.length&&s.push(n[r])}var a=t.clientRenderedBoundaries,l;for(l=0;l<a.length;l++){var i=a[l];n=s;var o=t.responseState,c=i.id,d=i.errorDigest,m=i.errorMessage,u=i.errorComponentStack;if(n.push(o.startInlineScript),o.sentClientRenderFunction?n.push('$RX("'):(o.sentClientRenderFunction=!0,n.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),c===null)throw Error(is(395));if(n.push(c),n.push('"'),d||m||u){n.push(",");var p=zm(d||"");n.push(p)}if(m||u){n.push(",");var g=zm(m||"");n.push(g)}if(u){n.push(",");var j=zm(u);n.push(j)}if(!n.push(")<\/script>")){t.destination=null,l++,a.splice(0,l);return}}a.splice(0,l);var y=t.completedBoundaries;for(l=0;l<y.length;l++)if(!cy(t,s,y[l])){t.destination=null,l++,y.splice(0,l);return}y.splice(0,l);var v=t.partialBoundaries;for(l=0;l<v.length;l++){var h=v[l];e:{a=t,i=s;var f=h.completedSegments;for(o=0;o<f.length;o++)if(!h2(a,i,h,f[o])){o++,f.splice(0,o);var N=!1;break e}f.splice(0,o),N=!0}if(!N){t.destination=null,l++,v.splice(0,l);return}}v.splice(0,l);var b=t.completedBoundaries;for(l=0;l<b.length;l++)if(!cy(t,s,b[l])){t.destination=null,l++,b.splice(0,l);return}b.splice(0,l)}finally{t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&s.push(null)}}function AR(t,s){try{var r=t.abortableTasks;r.forEach(function(n){return d2(n,t,s)}),r.clear(),t.destination!==null&&Jf(t,t.destination)}catch(n){qo(t,n),Qd(t,n)}}function DR(){}function p2(t,s,r,n){var a=!1,l=null,i="",o={push:function(d){return d!==null&&(i+=d),!0},destroy:function(d){a=!0,l=d}},c=!1;if(t=kR(t,mR(r,s?s.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,DR,void 0,function(){c=!0}),m2(t),AR(t,n),t.status===1)t.status=2,o.destroy(t.fatalError);else if(t.status!==2&&t.destination===null){t.destination=o;try{Jf(t,o)}catch(d){qo(t,d),Qd(t,d)}}if(a)throw l;if(!c)throw Error(is(426));return i}Di.renderToNodeStream=function(){throw Error(is(207))};Di.renderToStaticMarkup=function(t,s){return p2(t,s,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Di.renderToStaticNodeStream=function(){throw Error(is(208))};Di.renderToString=function(t,s){return p2(t,s,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Di.version="18.3.1";var Xf={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f2=x;function us(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var en=null,tn=0;function Ot(t,s){if(s.length!==0)if(512<s.length)0<tn&&(t.enqueue(new Uint8Array(en.buffer,0,tn)),en=new Uint8Array(512),tn=0),t.enqueue(s);else{var r=en.length-tn;r<s.length&&(r===0?t.enqueue(en):(en.set(s.subarray(0,r),tn),t.enqueue(en),s=s.subarray(r)),en=new Uint8Array(512),tn=0),en.set(s,tn),tn+=s.length}}function Ps(t,s){return Ot(t,s),!0}function dy(t){en&&0<tn&&(t.enqueue(new Uint8Array(en.buffer,0,tn)),en=null,tn=0)}var x2=new TextEncoder;function hs(t){return x2.encode(t)}function Dt(t){return x2.encode(t)}function g2(t,s){typeof t.error=="function"?t.error(s):t.close()}var Hr=Object.prototype.hasOwnProperty,TR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uy={},my={};function y2(t){return Hr.call(my,t)?!0:Hr.call(uy,t)?!1:TR.test(t)?my[t]=!0:(uy[t]=!0,!1)}function Or(t,s,r,n,a,l,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=l,this.removeEmptyString=i}var yr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yr[t]=new Or(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];yr[s]=new Or(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yr[t]=new Or(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yr[t]=new Or(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yr[t]=new Or(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yr[t]=new Or(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yr[t]=new Or(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yr[t]=new Or(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yr[t]=new Or(t,5,!1,t.toLowerCase(),null,!1,!1)});var ex=/[\-:]([a-z])/g;function tx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(ex,tx);yr[s]=new Or(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(ex,tx);yr[s]=new Or(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(ex,tx);yr[s]=new Or(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yr[t]=new Or(t,1,!1,t.toLowerCase(),null,!1,!1)});yr.xlinkHref=new Or("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yr[t]=new Or(t,1,!1,t.toLowerCase(),null,!0,!0)});var id={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MR=["Webkit","ms","Moz","O"];Object.keys(id).forEach(function(t){MR.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),id[s]=id[t]})});var IR=/["'&<>]/;function hr(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var s=IR.exec(t);if(s){var r="",n,a=0;for(n=s.index;n<t.length;n++){switch(t.charCodeAt(n)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 39:s="&#x27;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}a!==n&&(r+=t.substring(a,n)),a=n+1,r+=s}t=a!==n?r+t.substring(a,n):r}return t}var LR=/([A-Z])/g,PR=/^ms-/,Cp=Array.isArray,RR=Dt("<script>"),OR=Dt("<\/script>"),FR=Dt('<script src="'),$R=Dt('<script type="module" src="'),hy=Dt('" async=""><\/script>'),UR=/(<\/|<)(s)(cript)/gi;function HR(t,s,r,n){return""+s+(r==="s"?"\\u0073":"\\u0053")+n}function BR(t,s,r,n,a){t=t===void 0?"":t,s=s===void 0?RR:Dt('<script nonce="'+hr(s)+'">');var l=[];if(r!==void 0&&l.push(s,hs((""+r).replace(UR,HR)),OR),n!==void 0)for(r=0;r<n.length;r++)l.push(FR,hs(hr(n[r])),hy);if(a!==void 0)for(n=0;n<a.length;n++)l.push($R,hs(hr(a[n])),hy);return{bootstrapChunks:l,startInlineScript:s,placeholderPrefix:Dt(t+"P:"),segmentPrefix:Dt(t+"S:"),boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function Pn(t,s){return{insertionMode:t,selectedValue:s}}function zR(t){return Pn(t==="http://www.w3.org/2000/svg"?2:t==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function WR(t,s,r){switch(s){case"select":return Pn(1,r.value!=null?r.value:r.defaultValue);case"svg":return Pn(2,null);case"math":return Pn(3,null);case"foreignObject":return Pn(1,null);case"table":return Pn(4,null);case"thead":case"tbody":case"tfoot":return Pn(5,null);case"colgroup":return Pn(7,null);case"tr":return Pn(6,null)}return 4<=t.insertionMode||t.insertionMode===0?Pn(1,null):t}var sx=Dt("<!-- -->");function py(t,s,r,n){return s===""?n:(n&&t.push(sx),t.push(hs(hr(s))),!0)}var fy=new Map,YR=Dt(' style="'),xy=Dt(":"),KR=Dt(";");function b2(t,s,r){if(typeof r!="object")throw Error(us(62));s=!0;for(var n in r)if(Hr.call(r,n)){var a=r[n];if(a!=null&&typeof a!="boolean"&&a!==""){if(n.indexOf("--")===0){var l=hs(hr(n));a=hs(hr((""+a).trim()))}else{l=n;var i=fy.get(l);i!==void 0||(i=Dt(hr(l.replace(LR,"-$1").toLowerCase().replace(PR,"-ms-"))),fy.set(l,i)),l=i,a=typeof a=="number"?a===0||Hr.call(id,n)?hs(""+a):hs(a+"px"):hs(hr((""+a).trim()))}s?(s=!1,t.push(YR,l,xy,a)):t.push(KR,l,xy,a)}}s||t.push(Ja)}var fa=Dt(" "),Pl=Dt('="'),Ja=Dt('"'),gy=Dt('=""');function Qr(t,s,r,n){switch(r){case"style":b2(t,s,n);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N"){if(s=yr.hasOwnProperty(r)?yr[r]:null,s!==null){switch(typeof n){case"function":case"symbol":return;case"boolean":if(!s.acceptsBooleans)return}switch(r=hs(s.attributeName),s.type){case 3:n&&t.push(fa,r,gy);break;case 4:n===!0?t.push(fa,r,gy):n!==!1&&t.push(fa,r,Pl,hs(hr(n)),Ja);break;case 5:isNaN(n)||t.push(fa,r,Pl,hs(hr(n)),Ja);break;case 6:!isNaN(n)&&1<=n&&t.push(fa,r,Pl,hs(hr(n)),Ja);break;default:s.sanitizeURL&&(n=""+n),t.push(fa,r,Pl,hs(hr(n)),Ja)}}else if(y2(r)){switch(typeof n){case"function":case"symbol":return;case"boolean":if(s=r.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-")return}t.push(fa,hs(r),Pl,hs(hr(n)),Ja)}}}var xa=Dt(">"),yy=Dt("/>");function od(t,s,r){if(s!=null){if(r!=null)throw Error(us(60));if(typeof s!="object"||!("__html"in s))throw Error(us(61));s=s.__html,s!=null&&t.push(hs(""+s))}}function qR(t){var s="";return f2.Children.forEach(t,function(r){r!=null&&(s+=r)}),s}var Ym=Dt(' selected=""');function Km(t,s,r,n){t.push(Rn(r));var a=r=null,l;for(l in s)if(Hr.call(s,l)){var i=s[l];if(i!=null)switch(l){case"children":r=i;break;case"dangerouslySetInnerHTML":a=i;break;default:Qr(t,n,l,i)}}return t.push(xa),od(t,a,r),typeof r=="string"?(t.push(hs(hr(r))),null):r}var qm=Dt(`
`),VR=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,by=new Map;function Rn(t){var s=by.get(t);if(s===void 0){if(!VR.test(t))throw Error(us(65,t));s=Dt("<"+t),by.set(t,s)}return s}var GR=Dt("<!DOCTYPE html>");function QR(t,s,r,n,a){switch(s){case"select":t.push(Rn("select"));var l=null,i=null;for(m in r)if(Hr.call(r,m)){var o=r[m];if(o!=null)switch(m){case"children":l=o;break;case"dangerouslySetInnerHTML":i=o;break;case"defaultValue":case"value":break;default:Qr(t,n,m,o)}}return t.push(xa),od(t,i,l),l;case"option":i=a.selectedValue,t.push(Rn("option"));var c=o=null,d=null,m=null;for(l in r)if(Hr.call(r,l)){var u=r[l];if(u!=null)switch(l){case"children":o=u;break;case"selected":d=u;break;case"dangerouslySetInnerHTML":m=u;break;case"value":c=u;default:Qr(t,n,l,u)}}if(i!=null)if(r=c!==null?""+c:qR(o),Cp(i)){for(n=0;n<i.length;n++)if(""+i[n]===r){t.push(Ym);break}}else""+i===r&&t.push(Ym);else d&&t.push(Ym);return t.push(xa),od(t,m,o),o;case"textarea":t.push(Rn("textarea")),m=i=l=null;for(o in r)if(Hr.call(r,o)&&(c=r[o],c!=null))switch(o){case"children":m=c;break;case"value":l=c;break;case"defaultValue":i=c;break;case"dangerouslySetInnerHTML":throw Error(us(91));default:Qr(t,n,o,c)}if(l===null&&i!==null&&(l=i),t.push(xa),m!=null){if(l!=null)throw Error(us(92));if(Cp(m)&&1<m.length)throw Error(us(93));l=""+m}return typeof l=="string"&&l[0]===`
`&&t.push(qm),l!==null&&t.push(hs(hr(""+l))),null;case"input":t.push(Rn("input")),c=m=o=l=null;for(i in r)if(Hr.call(r,i)&&(d=r[i],d!=null))switch(i){case"children":case"dangerouslySetInnerHTML":throw Error(us(399,"input"));case"defaultChecked":c=d;break;case"defaultValue":o=d;break;case"checked":m=d;break;case"value":l=d;break;default:Qr(t,n,i,d)}return m!==null?Qr(t,n,"checked",m):c!==null&&Qr(t,n,"checked",c),l!==null?Qr(t,n,"value",l):o!==null&&Qr(t,n,"value",o),t.push(yy),null;case"menuitem":t.push(Rn("menuitem"));for(var p in r)if(Hr.call(r,p)&&(l=r[p],l!=null))switch(p){case"children":case"dangerouslySetInnerHTML":throw Error(us(400));default:Qr(t,n,p,l)}return t.push(xa),null;case"title":t.push(Rn("title")),l=null;for(u in r)if(Hr.call(r,u)&&(i=r[u],i!=null))switch(u){case"children":l=i;break;case"dangerouslySetInnerHTML":throw Error(us(434));default:Qr(t,n,u,i)}return t.push(xa),l;case"listing":case"pre":t.push(Rn(s)),i=l=null;for(c in r)if(Hr.call(r,c)&&(o=r[c],o!=null))switch(c){case"children":l=o;break;case"dangerouslySetInnerHTML":i=o;break;default:Qr(t,n,c,o)}if(t.push(xa),i!=null){if(l!=null)throw Error(us(60));if(typeof i!="object"||!("__html"in i))throw Error(us(61));r=i.__html,r!=null&&(typeof r=="string"&&0<r.length&&r[0]===`
`?t.push(qm,hs(r)):t.push(hs(""+r)))}return typeof l=="string"&&l[0]===`
`&&t.push(qm),l;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(Rn(s));for(var g in r)if(Hr.call(r,g)&&(l=r[g],l!=null))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(us(399,s));default:Qr(t,n,g,l)}return t.push(yy),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Km(t,r,s,n);case"html":return a.insertionMode===0&&t.push(GR),Km(t,r,s,n);default:if(s.indexOf("-")===-1&&typeof r.is!="string")return Km(t,r,s,n);t.push(Rn(s)),i=l=null;for(d in r)if(Hr.call(r,d)&&(o=r[d],o!=null))switch(d){case"children":l=o;break;case"dangerouslySetInnerHTML":i=o;break;case"style":b2(t,n,o);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:y2(d)&&typeof o!="function"&&typeof o!="symbol"&&t.push(fa,hs(d),Pl,hs(hr(o)),Ja)}return t.push(xa),od(t,i,l),l}}var ZR=Dt("</"),JR=Dt(">"),XR=Dt('<template id="'),eO=Dt('"></template>'),tO=Dt("<!--$-->"),sO=Dt('<!--$?--><template id="'),rO=Dt('"></template>'),nO=Dt("<!--$!-->"),aO=Dt("<!--/$-->"),lO=Dt("<template"),iO=Dt('"'),oO=Dt(' data-dgst="');Dt(' data-msg="');Dt(' data-stck="');var cO=Dt("></template>");function vy(t,s,r){if(Ot(t,sO),r===null)throw Error(us(395));return Ot(t,r),Ps(t,rO)}var dO=Dt('<div hidden id="'),uO=Dt('">'),mO=Dt("</div>"),hO=Dt('<svg aria-hidden="true" style="display:none" id="'),pO=Dt('">'),fO=Dt("</svg>"),xO=Dt('<math aria-hidden="true" style="display:none" id="'),gO=Dt('">'),yO=Dt("</math>"),bO=Dt('<table hidden id="'),vO=Dt('">'),jO=Dt("</table>"),NO=Dt('<table hidden><tbody id="'),wO=Dt('">'),SO=Dt("</tbody></table>"),_O=Dt('<table hidden><tr id="'),EO=Dt('">'),kO=Dt("</tr></table>"),CO=Dt('<table hidden><colgroup id="'),AO=Dt('">'),DO=Dt("</colgroup></table>");function TO(t,s,r,n){switch(r.insertionMode){case 0:case 1:return Ot(t,dO),Ot(t,s.segmentPrefix),Ot(t,hs(n.toString(16))),Ps(t,uO);case 2:return Ot(t,hO),Ot(t,s.segmentPrefix),Ot(t,hs(n.toString(16))),Ps(t,pO);case 3:return Ot(t,xO),Ot(t,s.segmentPrefix),Ot(t,hs(n.toString(16))),Ps(t,gO);case 4:return Ot(t,bO),Ot(t,s.segmentPrefix),Ot(t,hs(n.toString(16))),Ps(t,vO);case 5:return Ot(t,NO),Ot(t,s.segmentPrefix),Ot(t,hs(n.toString(16))),Ps(t,wO);case 6:return Ot(t,_O),Ot(t,s.segmentPrefix),Ot(t,hs(n.toString(16))),Ps(t,EO);case 7:return Ot(t,CO),Ot(t,s.segmentPrefix),Ot(t,hs(n.toString(16))),Ps(t,AO);default:throw Error(us(397))}}function MO(t,s){switch(s.insertionMode){case 0:case 1:return Ps(t,mO);case 2:return Ps(t,fO);case 3:return Ps(t,yO);case 4:return Ps(t,jO);case 5:return Ps(t,SO);case 6:return Ps(t,kO);case 7:return Ps(t,DO);default:throw Error(us(397))}}var IO=Dt('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),LO=Dt('$RS("'),PO=Dt('","'),RO=Dt('")<\/script>'),OO=Dt('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),FO=Dt('$RC("'),$O=Dt('","'),UO=Dt('")<\/script>'),HO=Dt('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),BO=Dt('$RX("'),zO=Dt('"'),WO=Dt(")<\/script>"),Vm=Dt(","),YO=/[<\u2028\u2029]/g;function Gm(t){return JSON.stringify(t).replace(YO,function(s){switch(s){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var jo=Object.assign,KO=Symbol.for("react.element"),v2=Symbol.for("react.portal"),j2=Symbol.for("react.fragment"),N2=Symbol.for("react.strict_mode"),w2=Symbol.for("react.profiler"),S2=Symbol.for("react.provider"),_2=Symbol.for("react.context"),E2=Symbol.for("react.forward_ref"),k2=Symbol.for("react.suspense"),C2=Symbol.for("react.suspense_list"),A2=Symbol.for("react.memo"),rx=Symbol.for("react.lazy"),qO=Symbol.for("react.scope"),VO=Symbol.for("react.debug_trace_mode"),GO=Symbol.for("react.legacy_hidden"),QO=Symbol.for("react.default_value"),jy=Symbol.iterator;function Ap(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case j2:return"Fragment";case v2:return"Portal";case w2:return"Profiler";case N2:return"StrictMode";case k2:return"Suspense";case C2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _2:return(t.displayName||"Context")+".Consumer";case S2:return(t._context.displayName||"Context")+".Provider";case E2:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case A2:return s=t.displayName||null,s!==null?s:Ap(t.type)||"Memo";case rx:s=t._payload,t=t._init;try{return Ap(t(s))}catch{}}return null}var D2={};function Ny(t,s){if(t=t.contextTypes,!t)return D2;var r={},n;for(n in t)r[n]=s[n];return r}var il=null;function qu(t,s){if(t!==s){t.context._currentValue=t.parentValue,t=t.parent;var r=s.parent;if(t===null){if(r!==null)throw Error(us(401))}else{if(r===null)throw Error(us(401));qu(t,r)}s.context._currentValue=s.value}}function T2(t){t.context._currentValue=t.parentValue,t=t.parent,t!==null&&T2(t)}function M2(t){var s=t.parent;s!==null&&M2(s),t.context._currentValue=t.value}function I2(t,s){if(t.context._currentValue=t.parentValue,t=t.parent,t===null)throw Error(us(402));t.depth===s.depth?qu(t,s):I2(t,s)}function L2(t,s){var r=s.parent;if(r===null)throw Error(us(402));t.depth===r.depth?qu(t,r):L2(t,r),s.context._currentValue=s.value}function Jd(t){var s=il;s!==t&&(s===null?M2(t):t===null?T2(s):s.depth===t.depth?qu(s,t):s.depth>t.depth?I2(s,t):L2(s,t),il=t)}var wy={isMounted:function(){return!1},enqueueSetState:function(t,s){t=t._reactInternals,t.queue!==null&&t.queue.push(s)},enqueueReplaceState:function(t,s){t=t._reactInternals,t.replace=!0,t.queue=[s]},enqueueForceUpdate:function(){}};function Sy(t,s,r,n){var a=t.state!==void 0?t.state:null;t.updater=wy,t.props=r,t.state=a;var l={queue:[],replace:!1};t._reactInternals=l;var i=s.contextType;if(t.context=typeof i=="object"&&i!==null?i._currentValue:n,i=s.getDerivedStateFromProps,typeof i=="function"&&(i=i(r,a),a=i==null?a:jo({},a,i),t.state=a),typeof s.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(s=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),s!==t.state&&wy.enqueueReplaceState(t,t.state,null),l.queue!==null&&0<l.queue.length)if(s=l.queue,i=l.replace,l.queue=null,l.replace=!1,i&&s.length===1)t.state=s[0];else{for(l=i?s[0]:t.state,a=!0,i=i?1:0;i<s.length;i++){var o=s[i];o=typeof o=="function"?o.call(t,l,r,n):o,o!=null&&(a?(a=!1,l=jo({},l,o)):jo(l,o))}t.state=l}else l.queue=null}var ZO={id:1,overflow:""};function Dp(t,s,r){var n=t.id;t=t.overflow;var a=32-cd(n)-1;n&=~(1<<a),r+=1;var l=32-cd(s)+a;if(30<l){var i=a-a%5;return l=(n&(1<<i)-1).toString(32),n>>=i,a-=i,{id:1<<32-cd(s)+a|r<<a|n,overflow:l+t}}return{id:1<<l|r<<a|n,overflow:t}}var cd=Math.clz32?Math.clz32:e8,JO=Math.log,XO=Math.LN2;function e8(t){return t>>>=0,t===0?32:31-(JO(t)/XO|0)|0}function t8(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var s8=typeof Object.is=="function"?Object.is:t8,aa=null,nx=null,dd=null,As=null,ao=!1,Xd=!1,Vo=0,ka=null,Vu=0;function Xa(){if(aa===null)throw Error(us(321));return aa}function _y(){if(0<Vu)throw Error(us(312));return{memoizedState:null,queue:null,next:null}}function ax(){return As===null?dd===null?(ao=!1,dd=As=_y()):(ao=!0,As=dd):As.next===null?(ao=!1,As=As.next=_y()):(ao=!0,As=As.next),As}function lx(){nx=aa=null,Xd=!1,dd=null,Vu=0,As=ka=null}function P2(t,s){return typeof s=="function"?s(t):s}function Ey(t,s,r){if(aa=Xa(),As=ax(),ao){var n=As.queue;if(s=n.dispatch,ka!==null&&(r=ka.get(n),r!==void 0)){ka.delete(n),n=As.memoizedState;do n=t(n,r.action),r=r.next;while(r!==null);return As.memoizedState=n,[n,s]}return[As.memoizedState,s]}return t=t===P2?typeof s=="function"?s():s:r!==void 0?r(s):s,As.memoizedState=t,t=As.queue={last:null,dispatch:null},t=t.dispatch=r8.bind(null,aa,t),[As.memoizedState,t]}function ky(t,s){if(aa=Xa(),As=ax(),s=s===void 0?null:s,As!==null){var r=As.memoizedState;if(r!==null&&s!==null){var n=r[1];e:if(n===null)n=!1;else{for(var a=0;a<n.length&&a<s.length;a++)if(!s8(s[a],n[a])){n=!1;break e}n=!0}if(n)return r[0]}}return t=t(),As.memoizedState=[t,s],t}function r8(t,s,r){if(25<=Vu)throw Error(us(301));if(t===aa)if(Xd=!0,t={action:r,next:null},ka===null&&(ka=new Map),r=ka.get(s),r===void 0)ka.set(s,t);else{for(s=r;s.next!==null;)s=s.next;s.next=t}}function n8(){throw Error(us(394))}function Lc(){}var Cy={readContext:function(t){return t._currentValue},useContext:function(t){return Xa(),t._currentValue},useMemo:ky,useReducer:Ey,useRef:function(t){aa=Xa(),As=ax();var s=As.memoizedState;return s===null?(t={current:t},As.memoizedState=t):s},useState:function(t){return Ey(P2,t)},useInsertionEffect:Lc,useLayoutEffect:function(){},useCallback:function(t,s){return ky(function(){return t},s)},useImperativeHandle:Lc,useEffect:Lc,useDebugValue:Lc,useDeferredValue:function(t){return Xa(),t},useTransition:function(){return Xa(),[!1,n8]},useId:function(){var t=nx.treeContext,s=t.overflow;t=t.id,t=(t&~(1<<32-cd(t)-1)).toString(32)+s;var r=ud;if(r===null)throw Error(us(404));return s=Vo++,t=":"+r.idPrefix+"R"+t,0<s&&(t+="H"+s.toString(32)),t+":"},useMutableSource:function(t,s){return Xa(),s(t._source)},useSyncExternalStore:function(t,s,r){if(r===void 0)throw Error(us(407));return r()}},ud=null,Qm=f2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function a8(t){return console.error(t),null}function lo(){}function l8(t,s,r,n,a,l,i,o,c){var d=[],m=new Set;return s={destination:null,responseState:s,progressiveChunkSize:n===void 0?12800:n,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:m,pingedTasks:d,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:a===void 0?a8:a,onAllReady:l===void 0?lo:l,onShellReady:i===void 0?lo:i,onShellError:o===void 0?lo:o,onFatalError:c===void 0?lo:c},r=eu(s,0,null,r,!1,!1),r.parentFlushed=!0,t=ix(s,t,null,r,m,D2,null,ZO),d.push(t),s}function ix(t,s,r,n,a,l,i,o){t.allPendingTasks++,r===null?t.pendingRootTasks++:r.pendingTasks++;var c={node:s,ping:function(){var d=t.pingedTasks;d.push(c),d.length===1&&F2(t)},blockedBoundary:r,blockedSegment:n,abortSet:a,legacyContext:l,context:i,treeContext:o};return a.add(c),c}function eu(t,s,r,n,a,l){return{status:0,id:-1,index:s,parentFlushed:!1,chunks:[],children:[],formatContext:n,boundary:r,lastPushedText:a,textEmbedded:l}}function Go(t,s){if(t=t.onError(s),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function tu(t,s){var r=t.onShellError;r(s),r=t.onFatalError,r(s),t.destination!==null?(t.status=2,g2(t.destination,s)):(t.status=1,t.fatalError=s)}function Ay(t,s,r,n,a){for(aa={},nx=s,Vo=0,t=r(n,a);Xd;)Xd=!1,Vo=0,Vu+=1,As=null,t=r(n,a);return lx(),t}function Dy(t,s,r,n){var a=r.render(),l=n.childContextTypes;if(l!=null){var i=s.legacyContext;if(typeof r.getChildContext!="function")n=i;else{r=r.getChildContext();for(var o in r)if(!(o in l))throw Error(us(108,Ap(n)||"Unknown",o));n=jo({},i,r)}s.legacyContext=n,sn(t,s,a),s.legacyContext=i}else sn(t,s,a)}function Ty(t,s){if(t&&t.defaultProps){s=jo({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function Tp(t,s,r,n,a){if(typeof r=="function")if(r.prototype&&r.prototype.isReactComponent){a=Ny(r,s.legacyContext);var l=r.contextType;l=new r(n,typeof l=="object"&&l!==null?l._currentValue:a),Sy(l,r,n,a),Dy(t,s,l,r)}else{l=Ny(r,s.legacyContext),a=Ay(t,s,r,n,l);var i=Vo!==0;if(typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0)Sy(a,r,n,l),Dy(t,s,a,r);else if(i){n=s.treeContext,s.treeContext=Dp(n,1,0);try{sn(t,s,a)}finally{s.treeContext=n}}else sn(t,s,a)}else if(typeof r=="string"){switch(a=s.blockedSegment,l=QR(a.chunks,r,n,t.responseState,a.formatContext),a.lastPushedText=!1,i=a.formatContext,a.formatContext=WR(i,r,n),Mp(t,s,l),a.formatContext=i,r){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:a.chunks.push(ZR,hs(r),JR)}a.lastPushedText=!1}else{switch(r){case GO:case VO:case N2:case w2:case j2:sn(t,s,n.children);return;case C2:sn(t,s,n.children);return;case qO:throw Error(us(343));case k2:e:{r=s.blockedBoundary,a=s.blockedSegment,l=n.fallback,n=n.children,i=new Set;var o={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:i,errorDigest:null},c=eu(t,a.chunks.length,o,a.formatContext,!1,!1);a.children.push(c),a.lastPushedText=!1;var d=eu(t,0,null,a.formatContext,!1,!1);d.parentFlushed=!0,s.blockedBoundary=o,s.blockedSegment=d;try{if(Mp(t,s,n),d.lastPushedText&&d.textEmbedded&&d.chunks.push(sx),d.status=1,su(o,d),o.pendingTasks===0)break e}catch(m){d.status=4,o.forceClientRender=!0,o.errorDigest=Go(t,m)}finally{s.blockedBoundary=r,s.blockedSegment=a}s=ix(t,l,r,c,i,s.legacyContext,s.context,s.treeContext),t.pingedTasks.push(s)}return}if(typeof r=="object"&&r!==null)switch(r.$$typeof){case E2:if(n=Ay(t,s,r.render,n,a),Vo!==0){r=s.treeContext,s.treeContext=Dp(r,1,0);try{sn(t,s,n)}finally{s.treeContext=r}}else sn(t,s,n);return;case A2:r=r.type,n=Ty(r,n),Tp(t,s,r,n,a);return;case S2:if(a=n.children,r=r._context,n=n.value,l=r._currentValue,r._currentValue=n,i=il,il=n={parent:i,depth:i===null?0:i.depth+1,context:r,parentValue:l,value:n},s.context=n,sn(t,s,a),t=il,t===null)throw Error(us(403));n=t.parentValue,t.context._currentValue=n===QO?t.context._defaultValue:n,t=il=t.parent,s.context=t;return;case _2:n=n.children,n=n(r._currentValue),sn(t,s,n);return;case rx:a=r._init,r=a(r._payload),n=Ty(r,n),Tp(t,s,r,n,void 0);return}throw Error(us(130,r==null?r:typeof r,""))}}function sn(t,s,r){if(s.node=r,typeof r=="object"&&r!==null){switch(r.$$typeof){case KO:Tp(t,s,r.type,r.props,r.ref);return;case v2:throw Error(us(257));case rx:var n=r._init;r=n(r._payload),sn(t,s,r);return}if(Cp(r)){My(t,s,r);return}if(r===null||typeof r!="object"?n=null:(n=jy&&r[jy]||r["@@iterator"],n=typeof n=="function"?n:null),n&&(n=n.call(r))){if(r=n.next(),!r.done){var a=[];do a.push(r.value),r=n.next();while(!r.done);My(t,s,a)}return}throw t=Object.prototype.toString.call(r),Error(us(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}typeof r=="string"?(n=s.blockedSegment,n.lastPushedText=py(s.blockedSegment.chunks,r,t.responseState,n.lastPushedText)):typeof r=="number"&&(n=s.blockedSegment,n.lastPushedText=py(s.blockedSegment.chunks,""+r,t.responseState,n.lastPushedText))}function My(t,s,r){for(var n=r.length,a=0;a<n;a++){var l=s.treeContext;s.treeContext=Dp(l,n,a);try{Mp(t,s,r[a])}finally{s.treeContext=l}}}function Mp(t,s,r){var n=s.blockedSegment.formatContext,a=s.legacyContext,l=s.context;try{return sn(t,s,r)}catch(c){if(lx(),typeof c=="object"&&c!==null&&typeof c.then=="function"){r=c;var i=s.blockedSegment,o=eu(t,i.chunks.length,null,i.formatContext,i.lastPushedText,!0);i.children.push(o),i.lastPushedText=!1,t=ix(t,s.node,s.blockedBoundary,o,s.abortSet,s.legacyContext,s.context,s.treeContext).ping,r.then(t,t),s.blockedSegment.formatContext=n,s.legacyContext=a,s.context=l,Jd(l)}else throw s.blockedSegment.formatContext=n,s.legacyContext=a,s.context=l,Jd(l),c}}function i8(t){var s=t.blockedBoundary;t=t.blockedSegment,t.status=3,O2(this,s,t)}function R2(t,s,r){var n=t.blockedBoundary;t.blockedSegment.status=3,n===null?(s.allPendingTasks--,s.status!==2&&(s.status=2,s.destination!==null&&s.destination.close())):(n.pendingTasks--,n.forceClientRender||(n.forceClientRender=!0,t=r===void 0?Error(us(432)):r,n.errorDigest=s.onError(t),n.parentFlushed&&s.clientRenderedBoundaries.push(n)),n.fallbackAbortableTasks.forEach(function(a){return R2(a,s,r)}),n.fallbackAbortableTasks.clear(),s.allPendingTasks--,s.allPendingTasks===0&&(n=s.onAllReady,n()))}function su(t,s){if(s.chunks.length===0&&s.children.length===1&&s.children[0].boundary===null){var r=s.children[0];r.id=s.id,r.parentFlushed=!0,r.status===1&&su(t,r)}else t.completedSegments.push(s)}function O2(t,s,r){if(s===null){if(r.parentFlushed){if(t.completedRootSegment!==null)throw Error(us(389));t.completedRootSegment=r}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=lo,s=t.onShellReady,s())}else s.pendingTasks--,s.forceClientRender||(s.pendingTasks===0?(r.parentFlushed&&r.status===1&&su(s,r),s.parentFlushed&&t.completedBoundaries.push(s),s.fallbackAbortableTasks.forEach(i8,t),s.fallbackAbortableTasks.clear()):r.parentFlushed&&r.status===1&&(su(s,r),s.completedSegments.length===1&&s.parentFlushed&&t.partialBoundaries.push(s)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function F2(t){if(t.status!==2){var s=il,r=Qm.current;Qm.current=Cy;var n=ud;ud=t.responseState;try{var a=t.pingedTasks,l;for(l=0;l<a.length;l++){var i=a[l],o=t,c=i.blockedSegment;if(c.status===0){Jd(i.context);try{sn(o,i,i.node),c.lastPushedText&&c.textEmbedded&&c.chunks.push(sx),i.abortSet.delete(i),c.status=1,O2(o,i.blockedBoundary,c)}catch(j){if(lx(),typeof j=="object"&&j!==null&&typeof j.then=="function"){var d=i.ping;j.then(d,d)}else{i.abortSet.delete(i),c.status=4;var m=i.blockedBoundary,u=j,p=Go(o,u);if(m===null?tu(o,u):(m.pendingTasks--,m.forceClientRender||(m.forceClientRender=!0,m.errorDigest=p,m.parentFlushed&&o.clientRenderedBoundaries.push(m))),o.allPendingTasks--,o.allPendingTasks===0){var g=o.onAllReady;g()}}}finally{}}}a.splice(0,l),t.destination!==null&&ox(t,t.destination)}catch(j){Go(t,j),tu(t,j)}finally{ud=n,Qm.current=r,r===Cy&&Jd(s)}}}function Pc(t,s,r){switch(r.parentFlushed=!0,r.status){case 0:var n=r.id=t.nextSegmentId++;return r.lastPushedText=!1,r.textEmbedded=!1,t=t.responseState,Ot(s,XR),Ot(s,t.placeholderPrefix),t=hs(n.toString(16)),Ot(s,t),Ps(s,eO);case 1:r.status=2;var a=!0;n=r.chunks;var l=0;r=r.children;for(var i=0;i<r.length;i++){for(a=r[i];l<a.index;l++)Ot(s,n[l]);a=Gu(t,s,a)}for(;l<n.length-1;l++)Ot(s,n[l]);return l<n.length&&(a=Ps(s,n[l])),a;default:throw Error(us(390))}}function Gu(t,s,r){var n=r.boundary;if(n===null)return Pc(t,s,r);if(n.parentFlushed=!0,n.forceClientRender)n=n.errorDigest,Ps(s,nO),Ot(s,lO),n&&(Ot(s,oO),Ot(s,hs(hr(n))),Ot(s,iO)),Ps(s,cO),Pc(t,s,r);else if(0<n.pendingTasks){n.rootSegmentID=t.nextSegmentId++,0<n.completedSegments.length&&t.partialBoundaries.push(n);var a=t.responseState,l=a.nextSuspenseID++;a=Dt(a.boundaryPrefix+l.toString(16)),n=n.id=a,vy(s,t.responseState,n),Pc(t,s,r)}else if(n.byteSize>t.progressiveChunkSize)n.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(n),vy(s,t.responseState,n.id),Pc(t,s,r);else{if(Ps(s,tO),r=n.completedSegments,r.length!==1)throw Error(us(391));Gu(t,s,r[0])}return Ps(s,aO)}function Iy(t,s,r){return TO(s,t.responseState,r.formatContext,r.id),Gu(t,s,r),MO(s,r.formatContext)}function Ly(t,s,r){for(var n=r.completedSegments,a=0;a<n.length;a++)$2(t,s,r,n[a]);if(n.length=0,t=t.responseState,n=r.id,r=r.rootSegmentID,Ot(s,t.startInlineScript),t.sentCompleteBoundaryFunction?Ot(s,FO):(t.sentCompleteBoundaryFunction=!0,Ot(s,OO)),n===null)throw Error(us(395));return r=hs(r.toString(16)),Ot(s,n),Ot(s,$O),Ot(s,t.segmentPrefix),Ot(s,r),Ps(s,UO)}function $2(t,s,r,n){if(n.status===2)return!0;var a=n.id;if(a===-1){if((n.id=r.rootSegmentID)===-1)throw Error(us(392));return Iy(t,s,n)}return Iy(t,s,n),t=t.responseState,Ot(s,t.startInlineScript),t.sentCompleteSegmentFunction?Ot(s,LO):(t.sentCompleteSegmentFunction=!0,Ot(s,IO)),Ot(s,t.segmentPrefix),a=hs(a.toString(16)),Ot(s,a),Ot(s,PO),Ot(s,t.placeholderPrefix),Ot(s,a),Ps(s,RO)}function ox(t,s){en=new Uint8Array(512),tn=0;try{var r=t.completedRootSegment;if(r!==null&&t.pendingRootTasks===0){Gu(t,s,r),t.completedRootSegment=null;var n=t.responseState.bootstrapChunks;for(r=0;r<n.length-1;r++)Ot(s,n[r]);r<n.length&&Ps(s,n[r])}var a=t.clientRenderedBoundaries,l;for(l=0;l<a.length;l++){var i=a[l];n=s;var o=t.responseState,c=i.id,d=i.errorDigest,m=i.errorMessage,u=i.errorComponentStack;if(Ot(n,o.startInlineScript),o.sentClientRenderFunction?Ot(n,BO):(o.sentClientRenderFunction=!0,Ot(n,HO)),c===null)throw Error(us(395));Ot(n,c),Ot(n,zO),(d||m||u)&&(Ot(n,Vm),Ot(n,hs(Gm(d||"")))),(m||u)&&(Ot(n,Vm),Ot(n,hs(Gm(m||"")))),u&&(Ot(n,Vm),Ot(n,hs(Gm(u)))),Ps(n,WO)}a.splice(0,l);var p=t.completedBoundaries;for(l=0;l<p.length;l++)Ly(t,s,p[l]);p.splice(0,l),dy(s),en=new Uint8Array(512),tn=0;var g=t.partialBoundaries;for(l=0;l<g.length;l++){var j=g[l];e:{a=t,i=s;var y=j.completedSegments;for(o=0;o<y.length;o++)if(!$2(a,i,j,y[o])){o++,y.splice(0,o);var v=!1;break e}y.splice(0,o),v=!0}if(!v){t.destination=null,l++,g.splice(0,l);return}}g.splice(0,l);var h=t.completedBoundaries;for(l=0;l<h.length;l++)Ly(t,s,h[l]);h.splice(0,l)}finally{dy(s),t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&s.close()}}function Py(t,s){try{var r=t.abortableTasks;r.forEach(function(n){return R2(n,t,s)}),r.clear(),t.destination!==null&&ox(t,t.destination)}catch(n){Go(t,n),tu(t,n)}}Xf.renderToReadableStream=function(t,s){return new Promise(function(r,n){var a,l,i=new Promise(function(m,u){l=m,a=u}),o=l8(t,BR(s?s.identifierPrefix:void 0,s?s.nonce:void 0,s?s.bootstrapScriptContent:void 0,s?s.bootstrapScripts:void 0,s?s.bootstrapModules:void 0),zR(s?s.namespaceURI:void 0),s?s.progressiveChunkSize:void 0,s?s.onError:void 0,l,function(){var m=new ReadableStream({type:"bytes",pull:function(u){if(o.status===1)o.status=2,g2(u,o.fatalError);else if(o.status!==2&&o.destination===null){o.destination=u;try{ox(o,u)}catch(p){Go(o,p),tu(o,p)}}},cancel:function(){Py(o)}},{highWaterMark:0});m.allReady=i,r(m)},function(m){i.catch(function(){}),n(m)},a);if(s&&s.signal){var c=s.signal,d=function(){Py(o,c.reason),c.removeEventListener("abort",d)};c.addEventListener("abort",d)}F2(o)})};Xf.version="18.3.1";var Ti,U2;Ti=Di,U2=Xf;Ti.version;Ti.renderToString;var o8=Ti.renderToStaticMarkup;Ti.renderToNodeStream;Ti.renderToStaticNodeStream;U2.renderToReadableStream;const c8={lguDtrName:"LGU",lguName:"",lguType:"Municipal",lguAddress:"",lguContact:"",lguEmail:"",lguMayor:"",mayorEsigPreview:"",logoPreview:""},d8=t=>{if(!t)return"";if(typeof window<"u"&&window.document){const s=window.document.createElement("div");return s.innerHTML=t,s.textContent||s.innerText||""}return String(t).replace(/<[^>]*>/g," ")},u8=t=>{var d;const s=(t==null?void 0:t.name)||(t==null?void 0:t.fullname)||(t==null?void 0:t.display_name)||"";if(!s)return null;const r=(d=s.split(":")[0])==null?void 0:d.trim();if(!r)return null;const[n,a=""]=r.split(","),l=(n||"").trim(),i=a.trim().split(/\s+/)[0]||"";if(!l&&!i)return null;const o=l.toUpperCase(),c=i.toUpperCase();return{boldHtml:`<strong>${o}${c?`, ${c}`:""}</strong>`,plainText:`${o}${c?`, ${c}`:""}`}},m8=(t=[])=>{if(!Array.isArray(t)||t.length===0)return{namesHtml:"",namesPlain:""};const s=t.map(l=>u8(l)).filter(Boolean);if(!s.length)return{namesHtml:"",namesPlain:""};const r=l=>l.length===1?l[0]:l.length===2?`${l[0]} and ${l[1]}`:`${l.slice(0,-1).join(", ")}, and ${l[l.length-1]}`,n=s.map(l=>l.boldHtml),a=s.map(l=>l.plainText);return{namesHtml:r(n),namesPlain:a.join("; ")}},H2=t=>{if(!t)return null;if(/^\d{4}-\d{2}-\d{2}/.test(t)){const r=new Date(`${t}T00:00:00`);return Number.isNaN(r.getTime())?null:r}if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(t)){const[r,n,a]=t.split("/"),l=new Date(`${a}-${r.padStart(2,"0")}-${n.padStart(2,"0")}T00:00:00`);return Number.isNaN(l.getTime())?null:l}const s=new Date(t);return Number.isNaN(s.getTime())?null:s},B2=t=>{const s=H2(t);return s?s.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):t||""},h8=(t=[])=>{if(!Array.isArray(t)||t.length===0)return"";const s=t.map(r=>B2(r)).filter(Boolean);return s.length?s.length===1?s[0]:s.length===2?`${s[0]} and ${s[1]}`:`${s.slice(0,-1).join(", ")}, and ${s[s.length-1]}`:""},p8=t=>{const s=Number(t);if(!Number.isInteger(s))return"";const r=s%10,n=s%100;return r===1&&n!==11?`${s}st`:r===2&&n!==12?`${s}nd`:r===3&&n!==13?`${s}rd`:`${s}th`},z2=t=>{const s=H2(t);if(!s)return"";const r=p8(s.getDate()),n=s.toLocaleDateString("en-US",{month:"long"}),a=s.getFullYear();return`${r} of ${n}, ${a}`},f8=t=>{switch(t){case"Province":return"Provincial Governor";case"National":return"Agency Head";default:return"Municipal Mayor"}},x8=t=>{switch(t){case"Province":return"Office of the Provincial Governor";case"National":return"Office of the Agency Head";default:return"Office of the Municipal Mayor"}},g8=({travel:t,company:s,meta:r})=>e.jsxs("html",{children:[e.jsxs("head",{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("title",{children:`Travel Authorization - ${t.travelno||""}`}),e.jsx("style",{children:`
        * {
          box-sizing: border-box;
        }
        body {
          font-family: 'Times New Roman', serif;
          margin: 0;
          background: #f7f7f7;
        }
        .actions-bar {
          position: sticky;
          top: 0;
          background: #f7f7f7;
          padding: 0.5in 0.9in;
          display: flex;
          justify-content: flex-end;
          gap: 0.5rem;
        }
        .btn {
          font-family: 'Inter', sans-serif;
          font-size: 10pt;
          padding: 0.35rem 0.8rem;
          border-radius: 6px;
          border: 1px solid #1f2937;
          cursor: pointer;
          background-color: #fff;
          color: #1f2937;
        }
        .btn-print {
          background-color: #2563eb;
          border-color: #2563eb;
          color: #fff;
        }
        .btn:hover {
          opacity: 0.9;
        }
        .page {
          width: 8.5in;
          min-height: 11in;
          padding: 0.85in 0.9in;
          margin: 0.5in auto;
          background: #ffffff;
          color: #000;
          border: 1px solid #d0d0d0;
        }
        .header {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          margin-bottom: 0.75rem;
        }
        .logo {
          flex: 0 0 90px;
        }
        .logo img {
          max-width: 90px;
          max-height: 90px;
        }
        .header-text {
          flex: 1;
          text-align: center;
          line-height: 1.4;
        }
        .header-text .rep {
          font-size: 12pt;
          font-weight: 600;
          text-transform: uppercase;
        }
        .header-text .lgu-name {
          font-size: 14pt;
          font-weight: 700;
          text-transform: uppercase;
        }
        .header-text .office-title {
          font-size: 13pt;
          font-weight: 700;
          margin-top: 0.2rem;
        }
        .header-text .contact-line {
          font-size: 11pt;
          color: #1f2937;
        }
        .divider {
          border-top: 2px solid #111;
          margin: 0.5rem 0 1.1rem;
        }
        .travel-no {
          font-size: 11pt;
          margin-bottom: 1.4rem;
        }
        .title {
          text-align: center;
          font-size: 15pt;
          font-weight: 700;
          letter-spacing: 0.05em;
          margin-bottom: 1.8rem;
        }
        .subheading {
          text-align: center;
          font-size: 11pt;
          font-weight: 700;
          margin-bottom: 1.4rem;
        }
        .subheading.left {
          text-align: left;
        }
        .body-text {
          font-size: 12pt;
          text-align: justify;
          margin-bottom: 1rem;
        }
        .issued {
          font-size: 12pt;
          margin-top: 2rem;
        }
        .signature {
          text-align: right;
          margin-top: 3rem;
        }
        .signature img {
          max-height: 90px;
          margin-bottom: 0.5rem;
        }
        .signature-text {
          display: inline-block;
          text-align: center;
        }
        .signature-text .name {
          font-size: 12pt;
          font-weight: 700;
          text-transform: uppercase;
        }
        .signature-text .title {
          font-size: 11pt;
        }
        .footer {
          margin-top: 2rem;
          display: flex;
          align-items: flex-end;
          justify-content: flex-start;
          gap: 1.5rem;
        }
        .qr-block {
          text-align: left;
        }
        .qr-block img {
          width: 110px;
          height: 110px;
          object-fit: contain;
        }
        .qr-caption {
          font-size: 9pt;
          margin-top: 0.25rem;
          color: #4b5563;
        }
        .approval-seal {
          margin-left: auto;
          text-align: right;
        }
        .approval-seal svg {
          width: 140px;
          height: 140px;
        }
        @media print {
          @page {
            size: A4;
            margin: 0;
          }
          body {
            background: #ffffff;
          }
          .actions-bar {
            display: none;
          }
          .page {
            width: 210mm;
            min-height: 297mm;
            margin: auto;
            border: none;
            box-shadow: none;
            padding: 22mm 23mm;
          }
        }
      `})]}),e.jsxs("body",{children:[e.jsxs("div",{className:"actions-bar",children:[e.jsx("button",{type:"button",className:"btn",id:"closePreviewBtn",children:"Close"}),e.jsx("button",{type:"button",className:"btn btn-print",id:"printPreviewBtn",children:"Print"})]}),e.jsxs("div",{className:"page",children:[e.jsxs("header",{className:"header",children:[e.jsx("div",{className:"logo",children:r.logoSrc?e.jsx("img",{src:r.logoSrc,alt:"LGU Logo"}):null}),e.jsxs("div",{className:"header-text",children:[e.jsx("div",{className:"rep",children:"Republic of the Philippines"}),r.headerLocation?e.jsx("div",{className:"contact-line",children:r.headerLocation}):null,s.lguName?e.jsx("div",{className:"lgu-name",children:"Munipality of Dalaguete"}):null,e.jsx("div",{className:"office-title",children:r.officeTitle}),s.lguContact?e.jsxs("div",{className:"contact-line",children:["Telephone No. ",s.lguContact]}):null,s.lguEmail?e.jsx("div",{className:"contact-line",children:s.lguEmail}):null]})]}),e.jsx("div",{className:"divider"}),e.jsxs("div",{className:"travel-no",children:["Travel Order No.: ",e.jsx("strong",{children:t.travelno||""})]}),e.jsx("div",{className:"title",children:"AUTHORIZATION TO TRAVEL"}),e.jsx("div",{className:"subheading left",children:"TO WHOM IT MAY CONCERN"}),e.jsxs("p",{className:"body-text",children:["This is to authorize"," ",r.employeeNamesHtml?e.jsx("span",{dangerouslySetInnerHTML:{__html:r.employeeNamesHtml}}):"________________"," ","to travel on official business on ",r.datesSentence||"________________","."," ",r.purposeText||"________________"," at ",t.traveldestination||"________________","."]}),e.jsxs("p",{className:"issued",children:["Issued this ",r.issueDate||z2(new Date)," at ",r.issuePlace||"________________","."]}),e.jsxs("div",{className:"signature",align:"right",children:[r.mayorEsig?e.jsx("img",{src:r.mayorEsig,alt:"Mayor Electronic Signature"}):null,e.jsxs("div",{className:"signature-text",children:[e.jsx("div",{className:"name",children:s.lguMayor||"________________"}),e.jsx("div",{className:"title",children:r.mayorTitle})]})]}),e.jsxs("div",{className:"footer",children:[r.qrDataUrl?e.jsxs("div",{className:"qr-block",children:[e.jsx("img",{src:r.qrDataUrl,alt:`QR code for ${t.travelno||"Travel Record"}`}),e.jsxs("div",{className:"qr-caption",children:["Travel No.: ",t.travelno||""]})]}):null,r.isApproved?e.jsx("div",{className:"approval-seal",children:e.jsxs("svg",{viewBox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("defs",{children:[e.jsx("path",{id:"seal-top-arc",d:"M24 100 A76 76 0 0 0 176 100"}),e.jsx("path",{id:"seal-bottom-arc",d:"M24 100 A76 76 0 0 1 176 100"})]}),e.jsx("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"#15803d",strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"100",cy:"100",r:"70",fill:"none",stroke:"#15803d",strokeWidth:"3",strokeDasharray:"8 6",opacity:"0.8"}),e.jsx("text",{fill:"#15803d",fontFamily:"'Times New Roman', serif",fontSize:"13",fontWeight:"700",letterSpacing:"2",children:e.jsx("textPath",{startOffset:"50%",textAnchor:"middle",href:"#seal-top-arc",dy:"-4",children:"MUNICIPALITY OF DALAGUETE"})}),e.jsx("text",{fill:"#15803d",fontFamily:"'Times New Roman', serif",fontSize:"13",fontWeight:"700",letterSpacing:"2",children:e.jsx("textPath",{startOffset:"50%",textAnchor:"middle",href:"#seal-bottom-arc",dy:"12",children:"TRAVEL ORDER"})}),e.jsx("rect",{x:"40",y:"88",width:"120",height:"24",rx:"12",fill:"#15803d",opacity:"0.12"}),e.jsx("text",{x:"100",y:"106",fill:"#15803d",fontFamily:"'Times New Roman', serif",fontSize:"28",fontWeight:"700",textAnchor:"middle",letterSpacing:"4",children:"APPROVED"})]})}):null]})]}),e.jsx("script",{dangerouslySetInnerHTML:{__html:`
            (function() {
              function bindActions() {
                var printBtn = document.getElementById('printPreviewBtn');
                var closeBtn = document.getElementById('closePreviewBtn');
                if (printBtn) {
                  printBtn.addEventListener('click', function () {
                    window.print();
                  });
                }
                if (closeBtn) {
                  closeBtn.addEventListener('click', function () {
                    window.close();
                  });
                }
              }
              if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', bindActions);
              } else {
                bindActions();
              }
            })();
          `}})]})]}),y8=(t,s,r)=>{const{namesHtml:n="",namesPlain:a=""}=m8(t==null?void 0:t.employees),l=t!=null&&t.travel_dates?String(t.travel_dates).split(",").map(g=>g.trim()).filter(Boolean):[],i=h8(l),o=l.map(g=>B2(g)).filter(Boolean).join("; "),c=d8(t==null?void 0:t.purpose).replace(/\s+/g," ").trim(),d=c?c.endsWith(".")?c:`${c}.`:"",m=z2(t==null?void 0:t.createddate),u=f8(s==null?void 0:s.lguType),p=x8(s==null?void 0:s.lguType);return{logoSrc:(s==null?void 0:s.logoPreview)||"",mayorEsig:(s==null?void 0:s.mayorEsigPreview)||"",employeeNamesHtml:n,employeeNamesPlain:a,datesSentence:i,datesList:o,purposeText:c,purposeSentence:d,issueDate:m,issuePlace:(s==null?void 0:s.lguAddress)||(s==null?void 0:s.lguName)||"",mayorTitle:u,officeTitle:p,headerLocation:(s==null?void 0:s.lguAddress)||"",qrDataUrl:r||"",isApproved:String((t==null?void 0:t.travelstatus)||"").toLowerCase()==="approved"}},W2=async t=>{var i;if(!t){console.warn("Travel print invoked without travel data");return}let s={...c8};try{const o=await oe.get("/company/info");(i=o==null?void 0:o.data)!=null&&i.success&&o.data.data&&(s={...s,...o.data.data})}catch(o){console.error("Failed to load company info for travel print:",o)}let r="";if(t!=null&&t.travelno)try{r=await wi.toDataURL(String(t.travelno),{width:256,margin:1})}catch(o){console.error("Failed to generate QR code for travel print:",o)}const n=y8(t,s,r),a=`<!DOCTYPE html>${o8(e.jsx(g8,{travel:t,company:s,meta:n}))}`,l=window.open("","_blank","width=900,height=1100");if(!l){alert("Pop-up blocked. Please allow pop-ups to print.");return}l.document.open(),l.document.write(a),l.document.close(),l.focus(),l.onload=()=>{try{l.focus()}catch(o){console.error("Failed to focus print window:",o)}}},qi=1,Vs=()=>{const{user:t}=Ts(),[s,r]=x.useState({}),[n,a]=x.useState([]),[l,i]=x.useState(!0),o=t==null?void 0:t.usertype,c=(t==null?void 0:t.USERID)||(t==null?void 0:t.id);x.useEffect(()=>{(async()=>{var g,j,y,v,h,f,N,b,w,D,S;if(!c){r({}),a([]),i(!1);return}if(o===qi){try{const C=await oe.get("/auth/permissions");(g=C.data)!=null&&g.success&&((j=C.data)!=null&&j.permissions)?(r({isRootAdmin:!0,...C.data.permissions}),a(((y=C.data.permissions)==null?void 0:y.componentgroups)||[])):(r({isRootAdmin:!0}),a([]))}catch(C){console.error("Error fetching permissions for Root Admin:",C),r({isRootAdmin:!0}),a([])}finally{i(!1)}return}try{const C=await oe.get("/auth/permissions");console.log("[Frontend] Permissions API response:",{success:(v=C.data)==null?void 0:v.success,hasPermissions:!!((h=C.data)!=null&&h.permissions),permissionKeys:(f=C.data)!=null&&f.permissions?Object.keys(C.data.permissions).filter(T=>T!=="componentgroups").slice(0,10):[],componentgroups:((b=(N=C.data)==null?void 0:N.permissions)==null?void 0:b.componentgroups)||[]}),(w=C.data)!=null&&w.success&&((D=C.data)!=null&&D.permissions)?(r(C.data.permissions),a(((S=C.data.permissions)==null?void 0:S.componentgroups)||[])):(r({}),a([]))}catch(C){console.error("Error fetching permissions:",C),r({}),a([])}finally{i(!1)}})()},[c,o]);const d=x.useCallback((p,g)=>{if(s.isRootAdmin||o===qi)return!0;if(!p||!g||!s||Object.keys(s).length===0)return!1;if(s["*"])return s["*"][g]===!0;const j=s[p];return j?typeof j=="object"&&!Array.isArray(j)?{read:j.canread,create:j.cancreate,update:j.canupdate,delete:j.candelete,approve:j.canapprove,print:j.canprint,softdelete:j.cansoftdelete,return:j.canreturn,cancel:j.cancancel}[g]===!0:Array.isArray(j)?j.includes(g):!1:!1},[s,o]),m=x.useCallback(p=>{if(s.isRootAdmin||o===qi)return!0;if(!p||!s||Object.keys(s).length===0)return console.log(`[Frontend] canAccessPage(${p}): No permissions or empty`,{hasComponentName:!!p,hasPermissions:!!s,permissionKeys:s?Object.keys(s).filter(j=>j!=="componentgroups"):[]}),!1;if(s["*"])return s["*"].canaccesspage===!0||s["*"].canaccesspage===1;const g=s[p];if(!g){if(p==="dtr-cdo")console.log("[Frontend]  canAccessPage('dtr-cdo'): Component NOT found in permissions",{allPermissionKeys:Object.keys(s).filter(j=>j!=="componentgroups"),searchedFor:"dtr-cdo",permissionsObject:s});else if(p==="compute-attendance-report"){const j=s["computed-attendances"];if(j)return console.log("[Frontend]  canAccessPage('compute-attendance-report'): Using old name 'computed-attendances' as fallback"),j.canaccesspage===!0||j.canaccesspage===1;console.log("[Frontend]  canAccessPage('compute-attendance-report'): Component NOT found in permissions",{allPermissionKeys:Object.keys(s).filter(y=>y!=="componentgroups"),searchedFor:"compute-attendance-report",permissionsObject:s})}else console.log(`[Frontend] canAccessPage(${p}): Component not found in permissions`,{availableComponents:Object.keys(s).filter(j=>j!=="componentgroups").slice(0,10),searchedFor:p});return!1}if(typeof g=="object"&&"canaccesspage"in g){const j=g.canaccesspage===!0||g.canaccesspage===1;return j?(p==="dtr-cdo"||p==="dtr-fix-checktimes"||p==="compute-attendance-report")&&console.log(`[Frontend]  canAccessPage('${p}'): TRUE`,g):console.log(`[Frontend] canAccessPage(${p}): canaccesspage is false`,g),j}return Array.isArray(g)?g.length>0:Object.keys(g).length>0},[s,o]),u=x.useCallback(p=>s.isRootAdmin||o===qi?!0:!p||n.length===0?!1:n.includes(p),[n,s.isRootAdmin,o]);return{can:d,canAccessPage:m,hasComponentGroupAccess:u,componentgroups:n,permissions:s,loading:l,isRootAdmin:s.isRootAdmin||o===qi}},Ry=({status:t})=>{let s="bg-gray-100 text-gray-800";switch(t){case"For Approval":s="bg-yellow-100 text-yellow-800";break;case"Returned":s="bg-blue-100 text-blue-800";break;case"Approved":s="bg-green-100 text-green-800";break;case"Cancelled":s="bg-red-100 text-red-800";break;default:s="bg-gray-100 text-gray-800"}return e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${s}`,children:t})},Y2=({isOpen:t,onClose:s,onSaved:r,travel:n,defaultIsPortal:a=0,portalCanCreateTravel:l=null})=>{const{can:i,loading:o}=Vs(),c="201-travel",d=i(c,"create"),m=i(c,"update"),g=n?a===1&&l!==null?l:m:a===1&&l!==null?l:d,[j,y]=x.useState(!1),[v,h]=x.useState({purpose:"",traveldestination:"",dates:[],employees:[]}),[f,N]=x.useState([]),[b,w]=x.useState([]),[D,S]=x.useState(""),[C,T]=x.useState(""),[_,E]=x.useState([]),[A,L]=x.useState(""),[F,W]=x.useState(!1),[Y,q]=x.useState(new Set),[J,O]=x.useState(!1),M=!!n;x.useEffect(()=>{if(t){if(n){const B=n.travel_dates?n.travel_dates.split(", ").map(G=>{const[$,X,Q]=G.split("/");return`${Q}-${$.padStart(2,"0")}-${X.padStart(2,"0")}`}):[],U=B.map(G=>{const[$,X,Q]=G.split("-");return new Date(parseInt($),parseInt(X)-1,parseInt(Q))});h({purpose:n.purpose||"",traveldestination:n.traveldestination||"",dates:B,employees:n.employees||[]}),N(U),w(B)}else h({purpose:"",traveldestination:"",dates:[],employees:[]}),S(""),N([]),w([]);T(""),L("")}t&&(async()=>{var U;W(!0);try{const G=await oe.get("/201-employees");E(((U=G.data)==null?void 0:U.data)||[])}catch(G){console.error("Failed to fetch employees",G)}finally{W(!1)}})()},[t,n]);const k=x.useMemo(()=>{if(!A.trim())return _;const B=A.toLowerCase();return _.filter(U=>bs(U.surname,U.firstname,U.middlename).toLowerCase().includes(B)||(U.employee_id||"").toLowerCase().includes(B))},[_,A]),I=B=>{Y.has(B.objid)||h(U=>U.employees.some($=>$.objid===B.objid)?{...U,employees:U.employees.filter($=>$.objid!==B.objid)}:{...U,employees:[...U.employees,B]})},K=B=>Y.has(B),z=B=>v.employees.some(U=>U.objid===B),P=B=>{h(U=>({...U,dates:(U.dates||[]).filter(G=>G!==B)})),b.includes(B)&&(N(U=>U.filter(G=>{const $=G.getFullYear(),X=String(G.getMonth()+1).padStart(2,"0"),Q=String(G.getDate()).padStart(2,"0");return`${$}-${X}-${Q}`!==B})),w(U=>U.filter(G=>G!==B)))};x.useEffect(()=>{if(!f||!Array.isArray(f))return;const B=f.filter(Boolean).map(G=>{const $=G.getFullYear(),X=String(G.getMonth()+1).padStart(2,"0"),Q=String(G.getDate()).padStart(2,"0");return`${$}-${X}-${Q}`}),U=b;w(B),h(G=>{const $=(G.dates||[]).filter(X=>!U.includes(X));return{...G,dates:Array.from(new Set([...$,...B]))}})},[f]),x.useEffect(()=>{(async()=>{var U,G;if(!v.dates||v.dates.length===0){q(new Set);return}O(!0);try{const $=v.dates.sort()[0],X=v.dates.sort()[v.dates.length-1],Q=new URLSearchParams;Q.append("dateFrom",$),Q.append("dateTo",X),Q.append("status","Approved");const Ne=await oe.get(`/employee-leave-transactions/all?${Q.toString()}`),V=((U=Ne.data)==null?void 0:U.data)||Ne.data||[],re=new URLSearchParams;re.append("dateFrom",$),re.append("dateTo",X),re.append("status","Approved");const xe=((G=(await oe.get(`/employee-travels/transactions?${re.toString()}`)).data)==null?void 0:G.data)||[],me=new Set;V.forEach(Z=>{Z.details&&Array.isArray(Z.details)&&Z.details.forEach(ee=>{const ye=ee.leavedate||ee.deducteddate;if(ye){const ve=ye.slice(0,10);v.dates.includes(ve)&&Z.emp_objid&&me.add(Z.emp_objid)}})}),xe.forEach(Z=>{if(!(M&&n&&Z.objid===n.objid)&&Z.travel_dates&&Z.employees){const ee=Z.travel_dates.split(", ").map(ve=>{const[ue,we,De]=ve.split("/");return`${De}-${ue.padStart(2,"0")}-${we.padStart(2,"0")}`});v.dates.some(ve=>ee.includes(ve))&&Z.employees&&Z.employees.forEach(ve=>{ve.objid&&me.add(ve.objid)})}}),q(me),h(Z=>({...Z,employees:Z.employees.filter(ee=>{const ye=typeof ee=="object"?ee.objid:ee;return!me.has(ye)})}))}catch($){console.error("Failed to check conflicts",$),q(new Set)}finally{O(!1)}})()},[v.dates,M,n]);const R=async()=>{if(!g){alert("You do not have permission to save travel records.");return}if(!(v.dates||[]).length){alert("Please select at least one date");return}if(!v.purpose||!v.purpose.trim()){alert("Please enter purpose");return}if(!v.traveldestination||!v.traveldestination.trim()){alert("Please enter destination");return}if(!(v.employees||[]).length){alert("Please select at least one employee");return}y(!0);try{const B={employees:v.employees.map(U=>U.objid||U),purpose:v.purpose,traveldestination:v.traveldestination,dates:v.dates,isportal:M?(n==null?void 0:n.isportal)||0:a};M?await oe.put(`/employee-travels/${n.objid}`,B):await oe.post("/employee-travels",B),r==null||r(),s()}catch(B){console.error(`Failed to ${M?"update":"create"} travel`,B),alert(`Failed to ${M?"update":"create"} travel`)}finally{y(!1)}};return t?o&&(a!==1||l===null)?e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4 overflow-y-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-6 text-center text-gray-500",children:"Loading permissions..."})}):g?e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-4xl my-8",children:[e.jsxs("div",{className:"px-6 py-4 border-b flex items-center justify-between",children:[e.jsx("div",{className:"font-semibold text-lg",children:M?"Edit Travel":"Add Travel"}),e.jsx("button",{className:"text-gray-600 hover:text-gray-800",onClick:s,children:""})]}),e.jsxs("div",{className:"p-6 space-y-6 max-h-[calc(100vh-200px)] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date(s) *"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(vl,{mode:"multiple",selected:f,onSelect:N,weekStartsOn:1,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-1,toYear:new Date().getFullYear()+1})}),e.jsxs("div",{className:"border rounded p-3 bg-gray-50 max-h-64 overflow-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Selected Dates"}),e.jsxs("span",{className:"text-xs text-gray-600",children:["Total: ",(v.dates||[]).length]})]}),e.jsxs("ul",{className:"space-y-1 text-sm",children:[(v.dates||[]).sort().map(B=>{const U=B.slice(5,7),G=B.slice(8,10),$=B.slice(0,4),X=`${U}/${G}/${$}`;return e.jsxs("li",{className:"flex items-center justify-between bg-white rounded border px-2 py-1",children:[e.jsx("span",{children:X}),e.jsx("button",{onClick:()=>P(B),className:"text-red-600 text-xs hover:text-red-800",children:"Remove"})]},B)}),!(v.dates||[]).length&&e.jsx("li",{className:"text-xs text-gray-500",children:"No dates selected"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purpose *"}),e.jsx(W1,{theme:"snow",value:v.purpose,onChange:B=>{g&&h(U=>({...U,purpose:B}))},placeholder:"Enter travel purpose...",className:"bg-white",readOnly:!g})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Destination *"}),e.jsx("input",{className:"w-full border rounded px-3 py-2 disabled:opacity-50 disabled:cursor-not-allowed",value:v.traveldestination,onChange:B=>{g&&h(U=>({...U,traveldestination:B.target.value}))},placeholder:"Enter travel destination",disabled:!g})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Employee(s) *",J&&v.dates.length>0&&e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(Checking availability...)"})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-3 border-b bg-gray-50",children:e.jsx("input",{type:"text",value:A,onChange:B=>L(B.target.value),placeholder:"Search employees by name...",className:"w-full px-3 py-2 border rounded"})}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:F?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading employees..."}):k.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No employees found"}):k.map(B=>{const U=bs(B.surname,B.firstname,B.middlename),G=K(B.objid);return e.jsxs("div",{className:`px-4 py-2 flex items-center space-x-3 border-b last:border-b-0 ${G?"bg-gray-100 cursor-not-allowed opacity-60":"hover:bg-gray-50 cursor-pointer"}`,onClick:()=>!G&&I(B),children:[e.jsx("input",{type:"checkbox",checked:z(B.objid),onChange:()=>I(B),onClick:$=>$.stopPropagation(),disabled:G,className:`h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded ${G?"cursor-not-allowed":""}`}),e.jsxs("div",{className:"flex-1 flex items-center space-x-3",children:[B.photo_path?e.jsx("img",{src:B.photo_path,alt:U,className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-xs text-gray-600",children:U.split(" ").map($=>$[0]).join("").substring(0,2)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:`font-medium text-sm ${G?"text-gray-400":""}`,children:[U,G&&e.jsx("span",{className:"ml-2 text-xs text-red-600",title:"Has approved leave or travel on selected dates",children:"(Unavailable)"})]}),B.employee_id&&e.jsxs("div",{className:`text-xs ${G?"text-gray-400":"text-gray-500"}`,children:["ID: ",B.employee_id]})]})]})]},B.objid)})}),v.employees.length>0&&e.jsx("div",{className:"p-2 border-t bg-blue-50",children:e.jsxs("div",{className:"text-xs text-blue-700 text-center",children:[v.employees.length," employee(s) selected"]})})]})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t flex justify-end gap-2",children:[e.jsx("button",{className:"px-4 py-2 border rounded hover:bg-gray-50",onClick:s,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded disabled:opacity-60 hover:bg-blue-700",disabled:j||!g,onClick:R,children:j?M?"Updating":"Saving":M?"Update":"Save"})]})]})}):e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-6 text-center text-gray-500",children:["You do not have permission to ",M?"edit":"create"," travel records.",e.jsx("div",{className:"mt-4",children:e.jsx("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",onClick:s,children:"Close"})})]})}):null},b8=()=>{const{can:t,canAccessPage:s,loading:r}=Vs(),n="201-travel",a=t(n,"read")||s(n),l=t(n,"create"),i=t(n,"update"),o=t(n,"delete"),c=t(n,"print"),d=t(n,"approve")||i,[m,u]=x.useState("tx"),[p,g]=x.useState(!0),[j,y]=x.useState([]),[v,h]=x.useState(!1),[f,N]=x.useState(null),[b,w]=x.useState({dateFrom:"",dateTo:"",status:"",searchEmployee:""}),[D,S]=x.useState(new Date),[C,T]=x.useState([]),[_,E]=x.useState(()=>new Map),[A,L]=x.useState(!1),[F,W]=x.useState(!1),[Y,q]=x.useState(""),J=x.useCallback(async()=>{var Z;if(!a){y([]),g(!1);return}g(!0);try{const ee=new URLSearchParams;b.dateFrom&&ee.append("dateFrom",b.dateFrom),b.dateTo&&ee.append("dateTo",b.dateTo),b.status&&b.status!=="All"&&b.status!==""&&ee.append("status",b.status);const ye=`/employee-travels/transactions${ee.toString()?"?"+ee.toString():""}`,ve=await oe.get(ye);y(((Z=ve.data)==null?void 0:Z.data)||[])}catch(ee){console.error(ee)}finally{g(!1)}},[a,b.dateFrom,b.dateTo,b.status]),O=x.useCallback(async()=>{var Z;if(!a){T([]),L(!1);return}L(!0);try{const ye=(((Z=(await oe.get("/employee-travels/liaisons")).data)==null?void 0:Z.data)||[]).map(ue=>({...ue,cancreatetravel:!!ue.cancreatetravel}));T(ye);const ve=new Map;ye.forEach(ue=>{ve.set(ue.objid,ue.cancreatetravel?1:0)}),E(ve)}catch(ee){console.error("Failed to load travel liaisons",ee),alert("Failed to load travel liaisons.")}finally{L(!1)}},[a]),M=async Z=>{if(!o){alert("You do not have permission to delete travel records.");return}if(window.confirm("Are you sure you want to delete this travel record?"))try{await oe.delete(`/employee-travels/${Z}`),J()}catch(ee){console.error("Failed to delete travel",ee),alert("Failed to delete travel record")}},[k,I]=x.useState({open:!1,action:null,travel:null}),[K,z]=x.useState(""),[P,R]=x.useState(!1),B=(Z,ee)=>{z(""),I({open:!0,action:Z,travel:ee})},U=()=>{I({open:!1,action:null,travel:null}),z("")},G=async()=>{if(!k.open||!k.action||!k.travel)return;if(!d){alert("You do not have permission to approve, return, or cancel travel records.");return}const Z=k.travel,ee=k.action,ve={approve:"Approved",return:"Returned",cancel:"Cancelled"}[ee];if(ve){if((ee==="return"||ee==="cancel")&&!K.trim()){alert("Please enter remarks.");return}R(!0);try{await oe.put(`/employee-travels/${Z.objid}`,{travelstatus:ve,remarks:K||null}),U(),J()}catch(ue){console.error(`Failed to ${ee} travel`,ue),alert(`Failed to ${ee} travel record`)}finally{R(!1)}}},$=Z=>{if(!i){alert("You do not have permission to edit travel records.");return}N(Z),h(!0)},X=()=>{h(!1),N(null)},Q=x.useMemo(()=>{if(!b.searchEmployee||!b.searchEmployee.trim())return j;const Z=b.searchEmployee.toLowerCase().trim();return j.filter(ee=>!ee.employees||!Array.isArray(ee.employees)?!1:ee.employees.some(ye=>{const ve=(ye.name||"").toLowerCase(),ue=(ye.employee_id||ye.idno||"").toLowerCase();return ve.includes(Z)||ue.includes(Z)}))},[j,b.searchEmployee]);x.useEffect(()=>{(m==="tx"||m==="calendar")&&J()},[m,J]),x.useEffect(()=>{m==="liaisons"&&!A&&C.length===0&&O()},[m,A,C.length,O]);const Ne=x.useMemo(()=>{if(!Y.trim())return C;const Z=Y.toLowerCase();return C.filter(ee=>{const ye=(ee.fullname||"").toLowerCase(),ve=String(ee.idno||"").toLowerCase(),ue=String(ee.dtruserid||"").toLowerCase();return ye.includes(Z)||ve.includes(Z)||ue.includes(Z)})},[C,Y]),V=x.useMemo(()=>C.filter(Z=>Z.cancreatetravel).length,[C]),re=x.useMemo(()=>C.some(Z=>(_.get(Z.objid)??0)!==(Z.cancreatetravel?1:0)),[C,_]),ne=Z=>{T(ee=>ee.map(ye=>ye.objid===Z?{...ye,cancreatetravel:!ye.cancreatetravel}:ye))},xe=()=>{T(Z=>Z.map(ee=>{const ye=_.get(ee.objid)??0;return{...ee,cancreatetravel:ye===1}}))},me=async()=>{if(!i){alert("You do not have permission to update travel liaison settings.");return}const Z=C.reduce((ee,ye)=>{const ve=_.get(ye.objid)??0,ue=ye.cancreatetravel?1:0;return ve!==ue&&ee.push({objid:ye.objid,cancreatetravel:ye.cancreatetravel}),ee},[]);if(Z.length===0){alert("No changes to save.");return}W(!0);try{await oe.put("/employee-travels/liaisons",{updates:Z}),await O(),alert("Travel liaison access updated.")}catch(ee){console.error("Failed to save travel liaisons",ee),alert("Failed to save travel liaison changes.")}finally{W(!1)}};return r?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-white border border-dashed rounded-lg p-8 text-center text-gray-500",children:"Loading permissions..."})}):a?e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsx("div",{className:"px-6",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>{u("tx")},className:`py-4 px-1 border-b-2 font-medium text-sm ${m==="tx"?"border-green-600 text-green-700":"border-transparent text-gray-500"}`,children:"Transactions"}),e.jsx("button",{onClick:()=>{u("calendar")},className:`py-4 px-1 border-b-2 font-medium text-sm ${m==="calendar"?"border-green-600 text-green-700":"border-transparent text-gray-500"}`,children:"Calendar"}),i&&e.jsx("button",{onClick:()=>{u("liaisons")},className:`py-4 px-1 border-b-2 font-medium text-sm ${m==="liaisons"?"border-green-600 text-green-700":"border-transparent text-gray-500"}`,children:"Travel Liaisons"})]})})}),m==="tx"&&e.jsx("div",{className:"mt-4",children:p?e.jsx("div",{className:"text-center py-10",children:"Loading"}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2.5",children:"Search Employee"}),e.jsx("input",{type:"text",value:b.searchEmployee,onChange:Z=>w(ee=>({...ee,searchEmployee:Z.target.value})),placeholder:"Search by name or ID...",className:"w-full px-3 py-2.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2.5",children:"Date From"}),e.jsx("input",{type:"date",value:b.dateFrom,onChange:Z=>w(ee=>({...ee,dateFrom:Z.target.value})),className:"w-full px-3 py-2.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2.5",children:"Date To"}),e.jsx("input",{type:"date",value:b.dateTo,onChange:Z=>w(ee=>({...ee,dateTo:Z.target.value})),min:b.dateFrom,className:"w-full px-3 py-2.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2.5",children:"Status"}),e.jsxs("select",{value:b.status,onChange:Z=>w(ee=>({...ee,status:Z.target.value})),className:"w-full px-3 py-2.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"For Approval",children:"For Approval"}),e.jsx("option",{value:"Approved",children:"Approved"}),e.jsx("option",{value:"Returned",children:"Returned"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]})]}),(b.searchEmployee||b.dateFrom||b.dateTo||b.status)&&e.jsx("div",{className:"mt-4",children:e.jsx("button",{type:"button",onClick:()=>{w({dateFrom:"",dateTo:"",status:"",searchEmployee:""})},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Clear Filters"})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between border-b",children:[e.jsx("div",{className:"font-semibold",children:"Travel Transactions"}),l&&e.jsx("button",{onClick:()=>h(!0),className:"inline-flex items-center gap-1 px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:" Create Travel"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Travel No"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee(s)"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Travel Date(s)"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Purpose"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Destination"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Created By"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 text-sm",children:Q.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-6 text-center text-sm text-gray-500",children:j.length===0?"No travel transactions found.":"No transactions match the filters."})}):Q.map(Z=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:Z.travelno}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:(Z.employees||[]).map((ee,ye)=>{const ve=ee.photo_path&&(ee.photo_path.startsWith("data:")||ee.photo_path.startsWith("http"));return e.jsxs("div",{className:"relative group",title:ee.name,children:[ve?e.jsx("img",{src:ee.photo_path,alt:ee.name||"Employee",className:"w-8 h-8 rounded-full object-cover border-2 border-gray-200 hover:border-blue-400",onError:ue=>{ue.target.style.display="none";const we=ue.target.nextElementSibling;we&&(we.style.display="flex")}}):null,e.jsx("div",{className:`w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-xs text-gray-600 border-2 border-gray-200 hover:border-blue-400 ${ve?"hidden":""}`,children:(ee.name||"NA").split(" ").map(ue=>ue[0]).join("").substring(0,2)}),e.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-10",children:ee.name})]},ee.objid||ye)})})}),e.jsx("td",{className:"px-4 py-2",children:Z.travel_dates}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Z.purpose},className:"max-w-sm whitespace-pre-wrap break-words"})}),e.jsx("td",{className:"px-4 py-2",children:Z.traveldestination}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[Z.created_by_photo_path?e.jsx("img",{src:Z.created_by_photo_path,alt:Z.created_by_employee_name||Z.created_by_username||"Creator",className:"w-8 h-8 rounded-full object-cover border-2 border-gray-200",title:Z.created_by_employee_name||Z.created_by_username||"Creator",onError:ee=>{ee.target.style.display="none";const ye=ee.target.nextElementSibling;ye&&(ye.style.display="flex")}}):null,e.jsx("div",{className:`w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-xs text-gray-600 border-2 border-gray-200 ${Z.created_by_photo_path?"hidden":""}`,title:Z.created_by_employee_name||Z.created_by_username||"Creator",children:(Z.created_by_employee_name||Z.created_by_username||"NA").split(" ").map(ee=>ee[0]).join("").substring(0,2)})]})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(Ry,{status:Z.travelstatus})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[Z.travelstatus==="For Approval"&&d&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>B("approve",Z),className:"text-green-600 hover:text-green-800 transition-colors",title:"Approve Travel",children:""}),Z.isportal===1&&e.jsx("button",{onClick:()=>B("return",Z),className:"text-orange-600 hover:text-orange-800 transition-colors",title:"Return Travel",children:""}),e.jsx("button",{onClick:()=>B("cancel",Z),className:"text-red-600 hover:text-red-800 transition-colors",title:"Cancel Travel",children:""})]}),i&&e.jsx("button",{onClick:()=>$(Z),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit Travel",children:""}),c&&e.jsx("button",{onClick:()=>{W2(Z)},className:"text-green-600 hover:text-green-800 transition-colors",title:"Print Travel",children:""}),o&&e.jsx("button",{onClick:()=>M(Z.objid),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete Travel",children:""}),!i&&!c&&!o&&!d&&e.jsx("span",{className:"text-xs text-gray-400",children:"No actions available"})]})})]},Z.objid))})]})})]})]})}),m==="calendar"&&e.jsx("div",{className:"mt-4",children:p?e.jsx("div",{className:"text-center py-10",children:"Loading"}):e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Travel Calendar View"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{const Z=new Date(D);Z.setMonth(Z.getMonth()-1),S(Z)},className:"px-3 py-1 border rounded text-sm hover:bg-gray-50",children:" Prev"}),e.jsx("button",{onClick:()=>S(new Date),className:"px-3 py-1 border rounded text-sm hover:bg-gray-50",children:"Today"}),e.jsx("button",{onClick:()=>{const Z=new Date(D);Z.setMonth(Z.getMonth()+1),S(Z)},className:"px-3 py-1 border rounded text-sm hover:bg-gray-50",children:"Next "})]})]}),e.jsx("div",{className:"text-center mb-4 text-lg font-medium",children:D.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx(v8,{month:D,travels:j})]})}),m==="liaisons"&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 border-b flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Travel Liaisons"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Grant or revoke employee access to create travel records via the employee portal."}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[V," employee(s) enabled"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-2 border rounded text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",onClick:xe,disabled:!re||F,children:"Reset"}),e.jsx("button",{className:"px-3 py-2 bg-green-600 text-white rounded text-sm hover:bg-green-700 disabled:opacity-60 disabled:cursor-not-allowed",onClick:me,disabled:!re||F,children:F?"Saving":"Save Changes"})]})]}),e.jsx("div",{className:"p-4 border-b",children:e.jsx("input",{type:"text",value:Y,onChange:Z=>q(Z.target.value),placeholder:"Search employees by name, ID, or DTR ID",className:"w-full px-3 py-2 border rounded"})}),e.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:A?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"Loading employees"}):Ne.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No employees found."}):Ne.map(Z=>{const ee=(Z.fullname||"NA").split(" ").map(ye=>ye[0]).join("").slice(0,2);return e.jsxs("div",{className:"px-4 py-3 flex items-center space-x-3 border-b last:border-b-0 hover:bg-gray-50 cursor-pointer",onClick:()=>ne(Z.objid),children:[e.jsx("input",{type:"checkbox",checked:!!Z.cancreatetravel,onChange:()=>ne(Z.objid),onClick:ye=>ye.stopPropagation(),className:"h-4 w-4 text-green-600 border-gray-300 rounded"}),e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[Z.photo_path?e.jsx("img",{src:Z.photo_path,alt:Z.fullname||"Employee",className:"w-9 h-9 rounded-full object-cover border"}):e.jsx("div",{className:"w-9 h-9 rounded-full bg-gray-200 border flex items-center justify-center text-xs text-gray-600",children:ee}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm text-gray-900",children:Z.fullname||"Unnamed Employee"}),e.jsxs("div",{className:"text-xs text-gray-500 space-x-2",children:[Z.idno?e.jsxs("span",{children:["ID: ",Z.idno]}):null,Z.dtruserid?e.jsxs("span",{children:["DTR ID: ",Z.dtruserid]}):null]})]})]})]},Z.objid)})})]})}),k.open&&k.travel&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"relative w-full max-w-2xl bg-white rounded-lg shadow-xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[k.action==="approve"&&"Approve Travel Record",k.action==="return"&&"Return Travel Record",k.action==="cancel"&&"Cancel Travel Record"]}),e.jsx("div",{className:"text-sm text-gray-600",children:k.travel.travelno})]}),e.jsx("button",{onClick:U,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200 p-1 rounded-full hover:bg-gray-100",children:""})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-4",children:"Travel Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Travel No."}),e.jsx("div",{className:"text-sm text-gray-900",children:k.travel.travelno||""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("div",{className:"text-sm text-gray-900",children:e.jsx(Ry,{status:k.travel.travelstatus})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Travel Dates"}),e.jsx("div",{className:"text-sm text-gray-900",children:k.travel.travel_dates||""})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination"}),e.jsx("div",{className:"text-sm text-gray-900",children:k.travel.traveldestination||""})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-4",children:k.action==="approve"?"Approval Information":k.action==="return"?"Return Information":"Cancellation Information"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Remarks ",k.action!=="approve"&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:K,onChange:Z=>z(Z.target.value),rows:4,placeholder:k.action==="approve"?"Optional remarks...":"Enter the reason...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:U,className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Close"}),k.action==="approve"&&e.jsx("button",{type:"button",onClick:G,disabled:P,className:"px-6 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:P?"Approving":"Approve"}),k.action==="return"&&e.jsx("button",{type:"button",onClick:G,disabled:P,className:"px-6 py-2 text-sm font-medium text-white bg-orange-600 border border-transparent rounded-md hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:P?"Returning":"Return"}),k.action==="cancel"&&e.jsx("button",{type:"button",onClick:G,disabled:P,className:"px-6 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:P?"Cancelling":"Cancel Travel"})]})]})})}),e.jsx(Y2,{isOpen:v,onClose:X,onSaved:()=>{J(),X()},travel:f})]}):e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-white border border-dashed rounded-lg p-8 text-center text-gray-500",children:"You do not have permission to view travel records."})})},v8=({month:t,travels:s})=>{const r=u=>{switch(u){case"For Approval":return"bg-yellow-100 text-yellow-800";case"Returned":return"bg-blue-100 text-blue-800";case"Approved":return"bg-green-100 text-green-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},n=new Date(t.getFullYear(),t.getMonth(),1),a=new Date(t.getFullYear(),t.getMonth()+1,0),l=new Date(n);l.setDate(l.getDate()-l.getDay()+1);const i=new Date(a);i.setDate(i.getDate()+(7-i.getDay()));const o=[],c=new Date(l);for(;c<=i;)o.push(new Date(c)),c.setDate(c.getDate()+1);const d=u=>{const p=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}-${String(u.getDate()).padStart(2,"0")}`;return s.filter(g=>g.travel_dates?g.travel_dates.split(", ").map(y=>{const[v,h,f]=y.split("/");return`${f}-${v.padStart(2,"0")}-${h.padStart(2,"0")}`}).includes(p):!1)},m=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[m.map(u=>e.jsx("div",{className:"p-2 text-center text-xs font-semibold text-gray-600 bg-gray-50",children:u},u)),o.map((u,p)=>{const g=u.getMonth()===t.getMonth(),j=d(u);return e.jsxs("div",{className:`min-h-24 p-1 border border-gray-200 ${g?"bg-white":"bg-gray-50"}`,children:[e.jsx("div",{className:`text-xs mb-1 ${g?"text-gray-900":"text-gray-400"}`,children:u.getDate()}),e.jsxs("div",{className:"space-y-1",children:[j.slice(0,3).map((y,v)=>e.jsx("div",{className:`text-xs px-1 py-0.5 rounded truncate ${r(y.travelstatus)}`,title:`${y.travelno}: ${y.traveldestination}`,children:y.travelno},y.objid||v)),j.length>3&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",j.length-3," more"]})]})]},p)})]})},j8=()=>{const{user:t}=Ts(),s=(t==null?void 0:t.USERID)||(t==null?void 0:t.userid)||(t==null?void 0:t.id)||null,[r,n]=x.useState(!0),[a,l]=x.useState(null),[i,o]=x.useState(!1),[c,d]=x.useState("my"),[m,u]=x.useState([]),[p,g]=x.useState(!1),[j,y]=x.useState([]),[v,h]=x.useState(!1),[f,N]=x.useState(!1),[b,w]=x.useState(0),[D,S]=x.useState(null),[C,T]=x.useState(null),_=x.useCallback(async()=>{var K;if(!s){l(null),o(!1),n(!1);return}try{console.log("[MyTravelPortal] Fetching employee profile for userId:",s);const z=await oe.get("/201-employees"),P=Array.isArray((K=z.data)==null?void 0:K.data)?z.data.data:[],R=P.find(B=>String(B.dtruserid)===String(s));console.log("[MyTravelPortal] Employees fetched:",P.length),console.log("[MyTravelPortal] Matched employee:",R),R?(l(R.objid),o(!!R.cancreatetravel)):(l(null),o(!1))}catch(z){console.error("Failed to load employee profile for travel portal",z),l(null),o(!1)}finally{n(!1)}},[s]),E=x.useCallback(async()=>{var K;g(!0);try{console.log("[MyTravelPortal] Loading my travel records...");const z=await oe.get("/employee-travels/my");console.log("[MyTravelPortal] /employee-travels/my response:",z.data),u(((K=z.data)==null?void 0:K.data)||[])}catch(z){console.error("Failed to load travel records",z),u([])}finally{g(!1)}},[]),A=x.useCallback(async()=>{var K;if(!s){y([]);return}h(!0);try{const z=new URLSearchParams;z.append("createdBy",s);const P=await oe.get(`/employee-travels/transactions?${z.toString()}`);console.log("[MyTravelPortal] My transaction response:",P.data),y(((K=P.data)==null?void 0:K.data)||[])}catch(z){console.error("Failed to load my travel transactions",z),y([])}finally{h(!1)}},[s,a]);x.useEffect(()=>{_()},[_]),x.useEffect(()=>{!r&&c==="my"&&E()},[r,c,E]),x.useEffect(()=>{c==="transactions"&&i&&A()},[c,i,A]);const L=()=>{c==="my"?E():c==="transactions"&&A()},F=()=>{S(null),w(K=>K+1),N(!0)},W=K=>{S(K||null),w(z=>z+1),N(!0)},Y=()=>{N(!1),S(null)},q=()=>{Y(),A(),E()},J=x.useCallback(K=>{const z=Array.isArray(K.employees)?K.employees:[];return z.length?e.jsx("div",{className:"flex flex-wrap gap-2",children:z.map((P,R)=>{const B=(P.name||P.fullname||P.display_name||"Unknown Employee").replace(/\s+/g," ").trim(),U=B.split(" ").map(X=>X[0]||"").join("").slice(0,2)||"NA",G=P.photo_path&&(P.photo_path.startsWith("data:")||P.photo_path.startsWith("http")),$=P.objid||`${B}-${R}`;return e.jsxs("div",{className:"relative group",children:[G?e.jsx("img",{src:P.photo_path,alt:B,className:"w-8 h-8 rounded-full object-cover border border-gray-200",onError:X=>{X.currentTarget.style.display="none"}}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-xs font-semibold text-gray-600 border border-gray-200",children:U}),e.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-10",children:B})]},$)})}):""},[]),O=x.useCallback(K=>{switch(K){case"Approved":return"bg-green-100 text-green-800";case"Cancelled":return"bg-red-100 text-red-800";case"Returned":return"bg-orange-100 text-orange-800";case"For Approval":return"bg-yellow-100 text-yellow-800";default:return"bg-blue-100 text-blue-800"}},[]),M=(K,z)=>{const P=K&&K.trim()||z&&z.trim()||"Unknown";if(P.includes(",")){const[B,U=""]=P.split(","),G=B.trim(),X=(U.trim().split(" ").filter(Boolean)[0]||U.trim()).trim();return[G,X].filter(Boolean).join(", ")||P}const R=P.split(" ").filter(Boolean);if(R.length>=2){const B=R[0];return`${R[R.length-1]}, ${B}`}return P},k=K=>{const z=M(K.created_by_employee_name,K.created_by_username),P=K.created_by_photo_path,R=z.split(",").map(B=>B.trim()[0]||"").join("").slice(0,2).toUpperCase()||"NA";return e.jsxs("div",{className:"relative group inline-block",title:z,"aria-label":z,children:[e.jsx("div",{className:`w-9 h-9 rounded-full bg-gray-200 border border-gray-300 flex items-center justify-center text-xs font-semibold text-gray-600 ${P?"hidden":""}`,children:R}),P&&e.jsx("img",{src:P,alt:z,className:"w-9 h-9 rounded-full object-cover border border-gray-200 shadow-sm",onError:B=>{B.currentTarget.style.display="none";const U=B.currentTarget.previousElementSibling;U&&U.classList.remove("hidden")}}),e.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-20 shadow-lg",children:z})]})},I=(K,z,P=!1)=>z?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-6 text-center text-gray-500",children:"Loading"})}):!K||K.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-6 text-center text-gray-500",children:"No travel records found."})}):K.map(R=>{const B=String(R.travelstatus).toLowerCase()==="approved",U=P&&i&&["pending","returned"].includes(String(R.travelstatus).toLowerCase());return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:R.travelno}),e.jsx("td",{className:"px-4 py-2",children:J(R)}),e.jsx("td",{className:"px-4 py-2",children:R.travel_dates||""}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("div",{className:"max-w-md whitespace-pre-wrap break-words",dangerouslySetInnerHTML:{__html:R.purpose||""}})}),e.jsx("td",{className:"px-4 py-2",children:R.traveldestination||""}),e.jsx("td",{className:"px-4 py-2",children:k(R)}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${O(R.travelstatus)}`,children:R.travelstatus||""})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("button",{onClick:()=>T(R),className:"text-indigo-600 hover:text-indigo-800",title:"View details",children:""}),U?e.jsx("button",{onClick:()=>W(R),className:"text-blue-600 hover:text-blue-800",title:"Edit travel",children:""}):null,e.jsx("button",{onClick:()=>W2(R),disabled:!B&&!P,className:`text-green-600 hover:text-green-800 ${B||P?"":"opacity-40 cursor-not-allowed hover:text-green-600"}`,title:B||P?"Print travel order":"Print available once approved",children:""})]})})]},R.objid)});return r?e.jsx("div",{className:"bg-white rounded-lg shadow p-6 text-center text-gray-500",children:"Loading travel information"}):a?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-4 py-3 border-b flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>d("my"),className:`text-sm font-medium px-3 py-2 rounded ${c==="my"?"bg-indigo-100 text-indigo-700":"text-gray-600 hover:text-gray-800"}`,children:"My Travel"}),i&&e.jsx("button",{onClick:()=>d("transactions"),className:`text-sm font-medium px-3 py-2 rounded ${c==="transactions"?"bg-indigo-100 text-indigo-700":"text-gray-600 hover:text-gray-800"}`,children:"My Transactions"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:L,className:"px-3 py-2 border rounded text-sm hover:bg-gray-50",children:"Refresh"}),c==="transactions"&&i&&e.jsxs("button",{onClick:F,className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 text-sm",children:[e.jsx("span",{className:"text-lg leading-none",children:""}),"Create Travel"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Travel No."}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee(s)"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Travel Date(s)"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Purpose"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Destination"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Created By"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 text-sm",children:c==="my"?I(m,p,!1):I(j,v,!0)})]})})]}),f&&e.jsx(Y2,{isOpen:f,onClose:Y,onSaved:q,travel:D,defaultIsPortal:1,portalCanCreateTravel:i},b),C&&e.jsx(N8,{travel:C,onClose:()=>T(null)})]}):e.jsx("div",{className:"bg-white rounded-lg shadow p-6 text-center text-gray-500",children:"Employee record not found. Please contact HR for assistance."})},N8=({travel:t,onClose:s})=>{if(!t)return null;const r=Array.isArray(t.employees)?t.employees:[],n=a=>{switch(a){case"Approved":return"bg-green-100 text-green-800";case"Cancelled":return"bg-red-100 text-red-800";case"Returned":return"bg-orange-100 text-orange-800";case"For Approval":return"bg-yellow-100 text-yellow-800";default:return"bg-blue-100 text-blue-800"}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Travel Details"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Travel Order No. ",t.travelno||""]})]}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-2xl leading-none",children:""})]}),e.jsxs("div",{className:"px-6 py-4 space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Destination"}),e.jsx("div",{className:"text-sm text-gray-900",children:t.traveldestination||""})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Travel Date(s)"}),e.jsx("div",{className:"text-sm text-gray-900",children:t.travel_dates||""})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Status"}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${n(t.travelstatus)}`,children:t.travelstatus||""})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Created By"}),e.jsx("div",{className:"text-sm text-gray-900",children:t.created_by_employee_name||t.created_by_username||""})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Purpose"}),e.jsx("div",{className:"prose prose-sm max-w-none text-gray-900",dangerouslySetInnerHTML:{__html:t.purpose||""}})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Employee(s)"}),r.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"No employees listed."}):e.jsx("ul",{className:"space-y-2",children:r.map(a=>{const l=(a.name||"NA").split(" ").map(i=>i[0]).join("").slice(0,2);return e.jsxs("li",{className:"flex items-center gap-3",children:[a.photo_path?e.jsx("img",{src:a.photo_path,alt:a.name,className:"w-8 h-8 rounded-full object-cover border"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 border flex items-center justify-center text-xs text-gray-600",children:l}),e.jsx("span",{className:"text-sm text-gray-900",children:a.name})]},a.objid)})})]})]})]})})},w8=(t,s)=>{const r=new Date;let n,a;if(t==="This Month")n=r.getFullYear(),a=r.getMonth()+1;else if(t==="Last Month")n=r.getFullYear(),a=r.getMonth(),a===0&&(n--,a=12);else return"Current Period";const l=new Date(n,a-1,1).toLocaleString("en-US",{month:"long"}),i=n,o=new Date(n,a,0).getDate();switch(s){case"first_half":return`${l} 1-15, ${i}`;case"second_half":return`${l} 16-${o}, ${i}`;case"full":default:return`${l} ${i}`}},Oy=t=>{const r=new Date(t).getDay();return r===0||r===6},S8=t=>{if(!t)return"";const s=new Date(t);if(isNaN(s.getTime()))return t;const r=String(s.getDate()).padStart(2,"0"),n=s.toLocaleString("en-US",{month:"short"}),a=s.getFullYear(),l=s.toLocaleString("en-US",{weekday:"short"});return`${r}-${n}-${a}, ${l.toUpperCase()}`},_8=t=>{const s=new Date;let r,n;t==="This Month"?(r=s.getFullYear(),n=s.getMonth()+1):t==="Last Month"?(r=s.getFullYear(),n=s.getMonth(),n===0&&(r--,n=12)):(r=s.getFullYear(),n=s.getMonth()+1);const a=`${r}-${String(n).padStart(2,"0")}-01`,l=new Date(r,n,0).getDate(),i=`${r}-${String(n).padStart(2,"0")}-${String(l).padStart(2,"0")}`,o=[];let c=new Date(a);const d=new Date(i);for(;c<=d;)o.push(c.toISOString().slice(0,10)),c.setDate(c.getDate()+1);return o},E8=(t,s)=>_8(s).map(n=>{const a=t.find(l=>l.dateStr===n);return a||{date:S8(n),dateStr:n,amCheckIn:"-",amCheckOut:"-",pmCheckIn:"-",pmCheckOut:"-",remarks:Oy(n)?"Weekend":"",isWeekend:Oy(n),hasHoliday:!1,lateMinutes:0,days:0}});function k8({user:t,selectedFilter:s,selectedPeriod:r="full",processedLogs:n=[],shiftSchedule:a,onClose:l}){const i=x.useRef(),[o,c]=x.useState(!1),[d,m]=x.useState(null),u=E8(n,s);console.log(" [PrintMyDTRChecker] Debug info:",{selectedFilter:s,selectedPeriod:r,processedLogsLength:n.length,fullMonthLogsLength:u.length,sampleProcessedLog:n[0],sampleFullMonthLog:u[0]});const g=(()=>{const y=u.reduce((h,f)=>h+(f.lateMinutes||0),0),v=u.reduce((h,f)=>h+(f.days||0),0);return{totalLateMinutes:y,totalDays:v}})(),j=()=>{const y=i.current.innerHTML,v=window.open("","_blank");v.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>DTR Print</title>
          <style>
            @media print {
              @page {
                size: A4;
                margin: 8mm;
              }
              body { 
                margin: 0; 
                padding: 0; 
                font-family: Arial, sans-serif;
                font-size: 6px;
                line-height: 1.1;
              }
              .no-print { display: none !important; }
              
              /* Header Styles - Compact for space */
              .header { 
                text-align: center; 
                margin-bottom: 6px; 
                font-size: 10px;
              }
              .header h1 { 
                font-size: 12px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header h2 { 
                font-size: 11px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header h3 { 
                font-size: 10px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header p { 
                font-size: 8px; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              
              /* Specific header text styling - Font size 12px with bold month */
              .header .month-year {
                font-size: 10px !important;
                font-weight: normal;
                margin: 1px 0;
              }
              .header .month-year .bold-month {
                font-weight: bold !important;
              }
              .header .official-hours {
                font-size: 8px !important;
                font-weight: normal;
                margin: 1px 0;
              }
              .header .regular-days {
                font-size: 8px !important;
                font-weight: normal;
                margin: 1px 0;
              }
              
              /* Table Styles - 40% increase in row height from default */
              table { 
                border-collapse: collapse; 
                width: 100%; 
                font-size: 10px;
                margin-bottom: 8px;
                table-layout: fixed;
                height: auto;
              }
              th, td { 
                border: 0.5px solid #000; 
                padding: 2.8px 1px; /* 40% increase from 2px */
                text-align: center; 
                vertical-align: middle;
                font-size: 11px; /* 30% increase from 6px: 6px + 5px */
                line-height: 1.0;
                height: 14px; /* 40% increase from 10px */
              }
              th { 
                font-weight: bold; 
                background-color: #d3d3d3 !important; /* Light grey header */
                font-size: 11px; /* 30% increase from 6px: 6px + 5px */
                height: 16.8px; /* 40% increase from 12px */
              }
              
              /* Column widths for better A4 utilization */
              .col-day { width: 6%; }
              .col-am-arrival { width: 13%; }
              .col-am-departure { width: 13%; }
              .col-pm-arrival { width: 13%; }
              .col-pm-departure { width: 13%; }
              .col-undertime-hours { width: 6%; }
              .col-undertime-minutes { width: 6%; }
              .col-days { width: 7%; }
              .col-late { width: 7%; }
              
              /* Weekend day styling */
              .weekend-day {
                color: #0066cc !important; /* Blue color for weekends */
                font-weight: bold;
              }
              
              /* Footer Styles - Compact */
              .footer { 
                margin-top: 6px; 
                font-size: 8px;
                background-color: #f5f5f5 !important; /* Light grey footer */
                padding: 6px;
                border: 1px solid #ddd;
              }
              .footer p { 
                margin: 0 0 2px 0; 
                font-size: 8px;
                line-height: 1.1;
              }
              .footer p.text-right {
                text-align: right !important;
              }
              .footer .mb-2 {
                margin-bottom: 8px !important;
              }
              .signature-line { 
                margin-top: 4px; 
                text-align: right; 
              }
              .signature-line .line { 
                border-bottom: 1px solid #000; 
                display: inline-block; 
                width: 120px; 
              }
              .signature-line .label { 
                text-align: right !important; /* Right align the "In Charge" label */
                width: 100%; 
                margin-top: 1px; 
                font-size: 8px;
                padding-right: 0;
              }
              
              /* Employee signature line styling */
              .signature-line .employee-signature { 
                border-bottom: 1px solid #000; 
                display: inline-block; 
                width: 300px; 
                margin-top: 2px;
              }
              
              /* Fit to page container - No height restrictions */
              .print-container {
                height: auto;
                width: 100%;
                overflow: visible;
              }
              .table-container {
                height: auto;
                overflow: visible;
              }
              
              /* Totals row styling */
              .totals-row {
                background-color: #d3d3d3 !important; /* Light grey totals row */
                font-weight: bold;
                height: 16.8px; /* 40% increase from 12px to match header */
              }
            }
          </style>
        </head>
        <body>
          <div class="print-container">
            ${y}
          </div>
        </body>
      </html>
    `),v.document.close(),v.onload=()=>{v.print(),v.close()}};return o?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{children:"Loading DTR data..."})]})})}):d?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-gray-700 mb-4",children:d}),e.jsx("button",{onClick:l,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"DTR Print Preview - My Shift View"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:j,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Print"}),e.jsx("button",{onClick:l,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})]})]}),e.jsxs("div",{ref:i,className:"print-content",children:[e.jsxs("div",{className:"header text-center mb-4",children:[e.jsx("h1",{className:"text-lg font-bold",children:"CIVIL SERVICE FORM NO. 48"}),e.jsx("div",{className:"mt-1"}),e.jsx("h2",{className:"text-lg font-bold",children:"DAILY TIME RECORD"}),e.jsx("h3",{className:"text-lg font-bold",children:(t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"Employee"}),e.jsx("p",{className:"text-sm",children:"NAME"}),e.jsxs("p",{className:"text-lg month-year",children:["For the month of: ",e.jsx("span",{className:"bold-month",children:w8(s,r)})]}),e.jsx("p",{className:"text-sm official-hours",children:"Official hours for arrival and departure"}),e.jsx("p",{className:"text-sm regular-days",children:"Regular Days ________ Saturdays _____________"})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 mb-4",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-gray-300",children:[e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-day",children:"Day"}),e.jsx("th",{colSpan:"2",className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs",children:"AM"}),e.jsx("th",{colSpan:"2",className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs",children:"PM"}),e.jsx("th",{colSpan:"2",className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs",children:"Undertime"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-days",children:"Days"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-late",children:"Late"})]}),e.jsxs("tr",{className:"bg-gray-300",children:[e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-am-arrival",children:"Arrival"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-am-departure",children:"Departure"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-pm-arrival",children:"Arrival"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-pm-departure",children:"Departure"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-undertime-hours",children:"Hours"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-undertime-minutes",children:"Minutes"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium"})]})]}),e.jsx("tbody",{children:u.map((y,v)=>(console.log(` [PrintMyDTRChecker] Rendering row ${v}:`,{date:y.date,dateStr:y.dateStr,amCheckIn:y.amCheckIn,amCheckOut:y.amCheckOut,pmCheckIn:y.pmCheckIn,pmCheckOut:y.pmCheckOut,days:y.days,lateMinutes:y.lateMinutes}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:`border border-gray-300 px-2 py-2 text-center text-xs ${y.isWeekend?"weekend-day":""}`,children:v+1}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:y.amCheckIn||""}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:y.amCheckOut||""}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:y.pmCheckIn||""}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:y.pmCheckOut||""}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs"}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs"}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:y.days||""}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:y.lateMinutes||""})]},v)))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-300 font-semibold totals-row",children:[e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:"TOTAL"}),e.jsx("td",{colSpan:"4",className:"border border-gray-300 px-2 py-2 text-center text-xs"}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs"}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs"}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-bold",children:g.totalDays}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-bold",children:g.totalLateMinutes})]})})]})}),e.jsxs("div",{className:"footer bg-gray-100 p-3 border border-gray-300",children:[e.jsx("p",{className:"mb-2",children:"I CERTIFY on my honor that the above is a true and correct report of the hours and work performed, record of which was made daily at the time of arrival at and departure from office."}),e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"signature-line",children:e.jsx("div",{className:"line",children:"_________________"})}),e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"mb-2"}),e.jsx("p",{className:"mb-2 text-right",children:"Verified as to the prescribed office hours."}),e.jsx("div",{className:"mb-2"}),e.jsxs("div",{className:"signature-line",children:[e.jsx("div",{className:"line",children:"_______________"}),e.jsx("div",{className:"label",children:"In Charge"})]})]})]})]})})}const C8=(t,s)=>{const r=new Date;let n,a;if(t==="This Month")n=r.getFullYear(),a=r.getMonth()+1;else if(t==="Last Month")n=r.getFullYear(),a=r.getMonth(),a===0&&(n--,a=12);else return"Current Period";const l=new Date(n,a-1,1).toLocaleString("en-US",{month:"long"}),i=n,o=new Date(n,a,0).getDate();switch(s){case"first_half":return`${l} 1-15, ${i}`;case"second_half":return`${l} 16-${o}, ${i}`;case"full":default:return`${l} ${i}`}},A8=t=>{if(!t)return"";const s=new Date(t);if(isNaN(s.getTime()))return t;const r=String(s.getDate()).padStart(2,"0"),n=s.toLocaleString("en-US",{month:"short"}),a=s.getFullYear(),l=s.toLocaleString("en-US",{weekday:"short"});return`${r}-${n}-${a}, ${l.toUpperCase()}`},Zm=t=>{if(!t)return"";const s=new Date(t);return isNaN(s.getTime())?"":s.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})},Fy=t=>{if(!t)return 0;const s=t.match(/(\d{2}):(\d{2})/);if(!s)return 0;const r=parseInt(s[1],10),n=parseInt(s[2],10);return r*60+n},D8=t=>{const r=new Date(t).getDay();return r===0||r===6},T8=t=>{const s=new Date;let r,n;t==="This Month"?(r=s.getFullYear(),n=s.getMonth()+1):t==="Last Month"?(r=s.getFullYear(),n=s.getMonth(),n===0&&(r--,n=12)):(r=s.getFullYear(),n=s.getMonth()+1);const a=`${r}-${String(n).padStart(2,"0")}-01`,l=new Date(r,n,0).getDate(),i=`${r}-${String(n).padStart(2,"0")}-${String(l).padStart(2,"0")}`,o=[];let c=new Date(a);const d=new Date(i);for(;c<=d;)o.push(c.toISOString().slice(0,10)),c.setDate(c.getDate()+1);return o},M8=(t,s)=>T8(s).map(n=>{const a=t.find(l=>l.date===n);if(a){const l=[...a.amLogs||[],...a.pmLogs||[]];return{date:n,logs:l}}return{date:n,logs:[]}});function I8({user:t,selectedFilter:s,selectedPeriod:r="full",logs:n=[],onClose:a}){const l=x.useRef(),[i,o]=x.useState(!1),[c,d]=x.useState(null),m=M8(n,s);console.log(" [PrintMyDTRRaw] Debug info:",{selectedFilter:s,selectedPeriod:r,logsLength:n.length,fullMonthLogsLength:m.length,sampleLog:n[0],sampleFullMonthLog:m[0]});const u=()=>{console.log(" [PrintMyDTRRaw] Print button clicked"),console.log(" [PrintMyDTRRaw] printRef.current:",l.current);const p=l.current.innerHTML;console.log(" [PrintMyDTRRaw] printContents length:",p.length),console.log(" [PrintMyDTRRaw] printContents preview:",p.substring(0,500));const g=window.open("","_blank");if(!g){console.error(" [PrintMyDTRRaw] Failed to open print window"),alert("Failed to open print window. Please check your popup blocker settings.");return}console.log(" [PrintMyDTRRaw] Print window opened successfully"),g.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>DTR Print - Raw Logs</title>
          <style>
            @media print {
              @page {
                size: A4;
                margin: 8mm;
              }
              body { 
                margin: 0; 
                padding: 0; 
                font-family: Arial, sans-serif;
                font-size: 6px;
                line-height: 1.1;
              }
              .no-print { display: none !important; }
              
              /* Header Styles - Compact for space */
              .header { 
                text-align: center; 
                margin-bottom: 6px; 
                font-size: 10px;
              }
              .header h1 { 
                font-size: 12px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header h2 { 
                font-size: 11px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header h3 { 
                font-size: 10px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header p { 
                font-size: 8px; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              
              /* Specific header text styling - Font size 12px with bold month */
              .header .month-year {
                font-size: 10px !important;
                font-weight: normal;
                margin: 1px 0;
              }
              .header .month-year .bold-month {
                font-weight: bold !important;
              }
              .header .official-hours {
                font-size: 8px !important;
                font-weight: normal;
                margin: 1px 0;
              }
              .header .regular-days {
                font-size: 8px !important;
                font-weight: normal;
                margin: 1px 0;
              }
              
              /* Table Styles - 40% increase in row height from default */
              table { 
                border-collapse: collapse; 
                width: 100%; 
                font-size: 10px;
                margin-bottom: 8px;
                table-layout: fixed;
                height: auto;
              }
              th, td { 
                border: 0.5px solid #000; 
                padding: 2.8px 1px; /* 40% increase from 2px */
                text-align: center; 
                vertical-align: middle;
                font-size: 11px; /* 30% increase from 6px: 6px + 5px */
                line-height: 1.0;
                height: 14px; /* 40% increase from 10px */
              }
              th { 
                font-weight: bold; 
                background-color: #d3d3d3 !important; /* Light grey header */
                font-size: 11px; /* 30% increase from 6px: 6px + 5px */
                height: 16.8px; /* 40% increase from 12px */
              }
              
              /* Column widths for better A4 utilization */
              .col-day { width: 25%; }
              .col-am-logs { width: 37.5%; }
              .col-pm-logs { width: 37.5%; }
              
              /* Footer Styles - Compact */
              .footer { 
                margin-top: 6px; 
                font-size: 8px;
                background-color: #f5f5f5 !important; /* Light grey footer */
                padding: 6px;
                border: 1px solid #ddd;
              }
              .footer p { 
                margin: 0 0 2px 0; 
                font-size: 8px;
                line-height: 1.1;
              }
              .footer p.text-right {
                text-align: right !important;
              }
              .footer .mb-2 {
                margin-bottom: 8px !important;
              }
              .signature-line { 
                margin-top: 4px; 
                text-align: right; 
              }
              .signature-line .line { 
                border-bottom: 1px solid #000; 
                display: inline-block; 
                width: 120px; 
              }
              .signature-line .label { 
                text-align: right !important; /* Right align the "In Charge" label */
                width: 100%; 
                margin-top: 1px; 
                font-size: 8px;
                padding-right: 0;
              }
              
              /* Employee signature line styling */
              .signature-line .employee-signature { 
                border-bottom: 1px solid #000; 
                display: inline-block; 
                width: 300px; 
                margin-top: 2px;
              }
              
              /* Fit to page container - No height restrictions */
              .print-container {
                height: auto;
                width: 100%;
                overflow: visible;
              }
              .table-container {
                height: auto;
                overflow: visible;
              }
              
              /* Totals row styling */
              .totals-row {
                background-color: #d3d3d3 !important; /* Light grey totals row */
                font-weight: bold;
                height: 16.8px; /* 40% increase from 12px to match header */
              }
            }
          </style>
        </head>
        <body>
          <div class="print-container">
            ${p}
          </div>
        </body>
      </html>
    `),g.document.close(),g.onload=()=>{g.print(),g.close()}};return i?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{children:"Loading DTR data..."})]})})}):c?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-gray-700 mb-4",children:c}),e.jsx("button",{onClick:a,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"DTR Print Preview - Raw Logs View"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:u,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Print"}),e.jsx("button",{onClick:a,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})]})]}),e.jsxs("div",{ref:l,className:"print-content",children:[e.jsxs("div",{className:"header text-center mb-4",children:[e.jsx("h1",{className:"text-lg font-bold",children:"CIVIL SERVICE FORM NO. 48"}),e.jsx("div",{className:"mt-1"}),e.jsx("h2",{className:"text-lg font-bold",children:"TIME LOGS REPORT"}),e.jsx("h3",{className:"text-lg font-bold",children:(t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"Employee"}),e.jsx("p",{className:"text-sm",children:"NAME"}),e.jsxs("p",{className:"text-lg month-year",children:["For the period: ",e.jsx("span",{className:"bold-month",children:C8(s,r)})]}),e.jsx("p",{className:"text-sm official-hours",children:"Daily Time Record - Raw Logs"})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 mb-4",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-300",children:[e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-day",children:"Day"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-am-logs",children:"AM Logs"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-pm-logs",children:"PM Logs"})]})}),e.jsx("tbody",{children:m.map((p,g)=>{console.log(` [PrintMyDTRRaw] Rendering day ${g}:`,{date:p.date,logsCount:p.logs.length,sampleLog:p.logs[0]});const j=p.logs.filter(N=>{const b=Zm(N.CHECKTIME||N.DATE||N.date),w=Fy(b);return w>=0&&w<12*60}),y=p.logs.filter(N=>{const b=Zm(N.CHECKTIME||N.DATE||N.date),w=Fy(b);return w>=12*60&&w<=23*60+59}),v=N=>N.length===0?"-":N.map(b=>Zm(b.CHECKTIME||b.DATE||b.date)||"-").join(", "),h=v(j),f=v(y);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:`border border-gray-300 px-2 py-2 text-center text-xs ${D8(p.date)?"weekend-day":""}`,children:A8(p.date)}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:h}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:f})]},g)})})]})}),e.jsxs("div",{className:"footer bg-gray-100 p-3 border border-gray-300",children:[e.jsx("p",{className:"mb-2",children:"I CERTIFY on my honor that the above is a true and correct report of the time logs recorded during the specified period."}),e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"signature-line",children:e.jsx("div",{className:"line",children:"_________________"})}),e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"mb-2"}),e.jsx("p",{className:"mb-2 text-right",children:"Verified as to the prescribed office hours."}),e.jsx("div",{className:"mb-2"}),e.jsxs("div",{className:"signature-line",children:[e.jsx("div",{className:"line",children:"_______________"}),e.jsx("div",{className:"label",children:"In Charge"})]})]})]})]})})}const No=t=>{if(!t)return null;if(t instanceof Date&&!Number.isNaN(t.getTime()))return new Date(t.getFullYear(),t.getMonth(),t.getDate());if(typeof t=="string"){const s=new Date(t);if(!Number.isNaN(s.getTime()))return new Date(s.getFullYear(),s.getMonth(),s.getDate());const r=t.split("-").map(n=>Number(n));if(r.length===3&&r.every(n=>!Number.isNaN(n))){const[n,a,l]=r;return new Date(n,a-1,l)}}return null},El=t=>{const s=No(t);if(!s)return"";const r=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),a=String(s.getDate()).padStart(2,"0");return`${r}-${n}-${a}`},Jm=t=>{const s=No(t);if(!s)return"";const r=String(s.getMonth()+1).padStart(2,"0"),n=String(s.getDate()).padStart(2,"0"),a=s.getFullYear();return`${r}/${n}/${a}`},$y=t=>{switch((t||"").toUpperCase()){case"APPROVED":return"bg-green-100 text-green-700";case"RETURNED":return"bg-yellow-100 text-yellow-700";case"CANCELLED":return"bg-red-100 text-red-700";case"FOR APPROVAL":default:return"bg-blue-100 text-blue-700"}},Xm=({photo:t,name:s})=>{const r=(s||"NA").split(" ").map(a=>a[0]).join("").slice(0,2).toUpperCase(),n=!!t&&(t.startsWith("data:")||t.startsWith("http"));return e.jsxs("div",{className:"relative group",title:s||"N/A",children:[n&&e.jsx("img",{src:t,alt:s||"Person",className:"w-8 h-8 rounded-full object-cover border-2 border-gray-200 hover:border-blue-400",onError:a=>{a.target.style.display="none";const l=a.target.nextElementSibling;l&&(l.style.display="flex")}}),e.jsx("div",{className:`w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-xs text-gray-600 border-2 border-gray-200 hover:border-blue-400 ${n?"hidden":""}`,children:r}),e.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-10",children:s||"N/A"})]})},kl=t=>{if(!t)return!1;if(t.isExpired)return!0;if(!t.expirydate)return!1;const s=new Date(t.expirydate).getTime();return Number.isNaN(s)?!1:Date.now()>s},L8=()=>{const{user:t}=Ts(),[s,r]=x.useState(!1),[n,a]=x.useState([]),[l,i]=x.useState(null),[o,c]=x.useState({dateFrom:"",dateTo:"",title:"",status:"All"}),[d,m]=x.useState(!1),[u,p]=x.useState(!1),[g,j]=x.useState(""),[y,v]=x.useState(""),[h,f]=x.useState(""),[N,b]=x.useState(""),[w,D]=x.useState([]),[S,C]=x.useState(!1),[T,_]=x.useState(null),[E,A]=x.useState([]),[L,F]=x.useState(""),[W,Y]=x.useState(!1),[q,J]=x.useState(null),O=x.useCallback(async()=>{var ee,ye,ve;if(l)return l;try{const we=(ve=(ye=(ee=(await oe.get("/pds-dtrchecker/me")).data)==null?void 0:ee.data)==null?void 0:ye.employee)==null?void 0:ve.objid;if(we)return i(we),we}catch(ue){console.error("Failed to resolve employee objid:",ue)}return null},[l]),M=x.useCallback(async()=>{var ee;r(!0);try{const ye={scope:"self"};o.status&&o.status!=="All"&&(ye.status=o.status),o.title&&(ye.title=o.title),o.dateFrom&&(ye.dateFrom=o.dateFrom),o.dateTo&&(ye.dateTo=o.dateTo);const ve=await oe.get("/dtr/employee-cdo/transactions",{params:ye}),ue=Array.isArray((ee=ve.data)==null?void 0:ee.data)?ve.data.data:[];a(ue),!l&&ue.length&&i(ue[0].emp_objid||null)}catch(ye){console.error("Failed to load CDO records:",ye),a([])}finally{r(!1)}},[o,l]);x.useEffect(()=>{M()},[M]);const k=x.useMemo(()=>n,[n]),I=x.useMemo(()=>k.reduce((ee,ye)=>{if(kl(ye)||(ye.cdostatus||"").toUpperCase()!=="APPROVED")return ee;const ve=ye.remainingCredits!=null?Number(ye.remainingCredits):Math.max((Number(ye.earnedcredit)||0)-(Number(ye.usedcredit)||0),0);return ee+Math.max(ve,0)},0),[k]),K=x.useMemo(()=>{if(!T)return 0;const ee=Number(T.earnedcredit)||0,ye=Number(T.usedcredit)||0;return kl(T)?0:Math.max(ee-ye,0)},[T]),z=x.useMemo(()=>E.map(ee=>({value:El(ee),label:Jm(ee)})),[E]),P=ee=>{const ye=Array.isArray(ee)?ee:ee?[ee]:[],ve=[],ue=new Set;ye.forEach(we=>{const De=No(we);if(De){const le=De.getTime();ue.has(le)||(ue.add(le),ve.push(De))}}),ve.sort((we,De)=>we.getTime()-De.getTime()),D(ve)},R=ee=>{D(ye=>ye.filter(ve=>El(ve)!==ee))},B=ee=>{const ye=Array.isArray(ee)?ee:ee?[ee]:[],ve=[],ue=new Set;ye.forEach(De=>{const le=No(De);if(le){const Ie=le.getTime();ue.has(Ie)||(ue.add(Ie),ve.push(le))}}),ve.sort((De,le)=>De.getTime()-le.getTime());const we=q?1:K>0?K:1;we>0&&ve.length>we&&ve.splice(we),A(ve)},U=ee=>{A(ye=>ye.filter(ve=>El(ve)!==ee))},G=async()=>{if(!await O()){alert("Unable to determine employee reference.");return}j(""),v(""),f(""),b(""),D([]),m(!0)},$=()=>{m(!1),p(!1)},X=async ee=>{var ue,we;ee.preventDefault();const ye=await O();if(!ye){alert("Employee information not available.");return}if(!g.trim()){alert("Please provide a title for the credit.");return}if(!y.trim()){alert("Please provide the purpose.");return}if(!w.length){alert("Please select at least one work date.");return}const ve=Array.from(new Set(w.map(De=>El(De)))).sort();p(!0);try{await oe.post("/dtr/employee-cdo/transactions",{emp_objid:ye,cdotitle:g.trim(),cdopurpose:y.trim(),cdodescription:h.trim()||null,cdoremarks:N.trim()||null,earnedcredit:ve.length,workdates:ve}),alert("CDO credit application submitted."),$(),M()}catch(De){console.error("Failed to apply CDO credit:",De),alert(((we=(ue=De.response)==null?void 0:ue.data)==null?void 0:we.message)||"Failed to apply CDO credit")}finally{p(!1)}},Q=ee=>{J(null),_(ee),A([]),F(""),C(!0)},Ne=()=>{C(!1),_(null),A([]),F(""),Y(!1),J(null)},V=async ee=>{var ve,ue;if(ee.preventDefault(),!T)return;if(kl(T)){alert("This CDO credit has expired and can no longer be used.");return}if(!E.length){alert("Please select at least one consume date.");return}if(!L.trim()){alert("Please provide a reason.");return}if(!q&&E.length>K){alert(`Only ${K} credit(s) remain for this CDO.`);return}const ye=Array.from(new Set(E.map(we=>El(we))));Y(!0);try{if(q){const we={reason:L.trim(),cdodates:ye.length?[ye[0]]:[]};await oe.put(`/dtr/employee-cdo/usedates/${q.id}`,we),alert("Consume record updated.")}else await oe.post(`/dtr/employee-cdo/transactions/${T.id}/consume`,{dates:ye,reason:L.trim()}),alert("Consume request submitted.");Ne(),M()}catch(we){console.error("Failed to consume CDO credits:",we),alert(((ue=(ve=we.response)==null?void 0:ve.data)==null?void 0:ue.message)||"Failed to consume CDO credits")}finally{Y(!1)}},re=x.useMemo(()=>w.map(ee=>({value:El(ee),label:Jm(ee)})),[w]),ne=(ee,ye)=>{c(ve=>({...ve,[ee]:ye}))},xe=()=>{c({dateFrom:"",dateTo:"",title:"",status:"All"})},me=(ee,ye)=>{if(!ee||Number(ee.isportal)!==1||(ee.cdodatestatus||"").toUpperCase()==="APPROVED")return;_(ye);const ue=No(ee.cdodate);A(ue?[ue]:[]),F(ee.reason||""),J(ee),C(!0)},Z=async ee=>{var ve,ue;if(!(!ee||Number(ee.isportal)!==1||(ee.cdodatestatus||"").toUpperCase()==="APPROVED")&&window.confirm("Cancel this consume record request?"))try{await oe.put(`/dtr/employee-cdo/usedates/${ee.id}/status`,{status:"Cancelled"}),alert("Consume record cancelled."),M()}catch(we){console.error("Failed to cancel consume record:",we),alert(((ue=(ve=we.response)==null?void 0:ve.data)==null?void 0:ue.message)||"Failed to cancel consume record")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-4 border-b flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"My CDO Credits"}),s&&e.jsx("span",{className:"text-sm text-gray-500",children:"Loading"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Available Credits: ",e.jsx("span",{className:"font-semibold text-gray-800",children:I})]})]}),e.jsx("button",{onClick:G,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-semibold rounded hover:bg-green-700",children:"Apply CDO Credit"})]}),e.jsx("div",{className:"px-4 py-4 border-b bg-gray-50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1",children:"Date From"}),e.jsx("input",{type:"date",value:o.dateFrom,onChange:ee=>ne("dateFrom",ee.target.value),className:"w-full px-3 py-2 border rounded-md text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1",children:"Date To"}),e.jsx("input",{type:"date",value:o.dateTo,onChange:ee=>ne("dateTo",ee.target.value),className:"w-full px-3 py-2 border rounded-md text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:o.title,onChange:ee=>ne("title",ee.target.value),className:"w-full px-3 py-2 border rounded-md text-sm",placeholder:"Search title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1",children:"Status"}),e.jsxs("select",{value:o.status,onChange:ee=>ne("status",ee.target.value),className:"w-full px-3 py-2 border rounded-md text-sm",children:[e.jsx("option",{value:"All",children:"All"}),e.jsx("option",{value:"For Approval",children:"For Approval"}),e.jsx("option",{value:"Approved",children:"Approved"}),e.jsx("option",{value:"Returned",children:"Returned"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:M,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Apply Filters"}),e.jsx("button",{onClick:xe,className:"px-4 py-2 border text-sm rounded hover:bg-gray-50",children:"Reset"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase w-12"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Reference Credit"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Title"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Earned Credits"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Consumed Credits"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Remaining Credits"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Created By"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.length?k.map(ee=>{const ye=ee.remainingCredits!=null?Number(ee.remainingCredits):Math.max((Number(ee.earnedcredit)||0)-(Number(ee.usedcredit)||0),0),ve=kl(ee),we=!((ee.cdostatus||"").toUpperCase()==="APPROVED")||ve||ye<=0||Number(ee.isconsume)===1,De=ee._expanded||!1;return e.jsxs(St.Fragment,{children:[e.jsxs("tr",{className:"align-top",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{type:"button",onClick:()=>{a(le=>le.map(Ie=>Ie.id===ee.id?{...Ie,_expanded:!Ie._expanded}:Ie))},className:"text-blue-600 hover:text-blue-800 transition-colors",title:De?"Collapse details":"Expand details",children:De?"":"+"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:ee.cdono}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsx("div",{className:"font-medium text-gray-800",children:ee.cdotitle||"N/A"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:ee.earnedcredit}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:ee.usedcredit}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:ve?e.jsxs("span",{className:"inline-flex items-center gap-1 text-red-600 font-semibold",children:["0 ",e.jsx("span",{className:"text-xs uppercase tracking-wide",children:"(Expired)"})]}):ye}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:Number(ee.isportal)===0&&(ee.createdByPhoto||ee.createdByName)?e.jsx(Xm,{photo:ee.createdByPhoto,name:ee.createdByName||"Creator"}):e.jsx("span",{className:"text-xs text-gray-500",children:"Portal"})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`inline-flex px-2.5 py-1 rounded-full text-xs font-semibold ${$y(ee.cdostatus)}`,children:ee.cdostatus||"For Approval"})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("button",{type:"button",onClick:()=>Q(ee),disabled:we,className:"px-3 py-1 rounded bg-green-600 text-white text-xs font-semibold hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Use Credits"})})]}),De&&e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-4 pb-4 bg-gray-50",children:ee.consumeEntries&&ee.consumeEntries.length?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 bg-white rounded",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Use Date"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Reason"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Created By"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:ee.consumeEntries.map(le=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:le.cdodate||""}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-700 whitespace-pre-wrap",children:le.reason||""}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-700",children:Number(le.isportal)===1?e.jsx("span",{className:"text-blue-600 font-semibold",children:"Portal"}):e.jsx(Xm,{photo:le.createdByPhoto,name:le.createdByName||"Creator"})}),e.jsx("td",{className:"px-3 py-2 text-sm",children:e.jsx("span",{className:`inline-flex px-2.5 py-1 rounded-full text-xs font-semibold ${$y(le.cdodatestatus)}`,children:le.cdodatestatus||"For Approval"})}),e.jsx("td",{className:"px-3 py-2 text-sm",children:Number(le.isportal)===1&&(!le.cdodatestatus||le.cdodatestatus.toUpperCase()!=="APPROVED")?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>me(le,ee),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit consume record",children:""}),e.jsx("button",{type:"button",onClick:()=>Z(le),className:"text-red-600 hover:text-red-800 transition-colors",title:"Cancel consume record",children:""})]}):null})]},le.id))})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"No consume records."})})})]},ee.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-4 py-6 text-center text-sm text-gray-500",children:"No CDO credits found."})})})]})})]}),d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 px-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Apply CDO Credit"}),e.jsxs("button",{onClick:$,className:"text-gray-400 hover:text-gray-600",children:[e.jsx("span",{className:"sr-only",children:"Close"}),""]})]}),e.jsxs("form",{onSubmit:X,className:"px-6 py-5 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",value:g,onChange:ee=>j(ee.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Purpose"}),e.jsx("input",{type:"text",value:y,onChange:ee=>v(ee.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Work Date(s)"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-3",children:[e.jsx("div",{className:"border rounded-md p-3 bg-white overflow-x-auto",children:e.jsx(vl,{mode:"multiple",selected:w,onSelect:P,weekStartsOn:1,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-1,toYear:new Date().getFullYear()+1,className:"min-w-[280px]"})}),e.jsxs("div",{className:"border rounded-md p-3 bg-gray-50 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Selected Dates"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[w.length," day(s)"]})]}),e.jsx("ul",{className:"space-y-1 max-h-48 overflow-y-auto text-sm",children:re.length>0?re.map(ee=>e.jsxs("li",{className:"flex items-center justify-between rounded border bg-white px-2 py-1",children:[e.jsx("span",{children:ee.label}),e.jsx("button",{type:"button",onClick:()=>R(ee.value),className:"text-red-600 text-xs hover:underline",children:"Remove"})]},ee.value)):e.jsx("li",{className:"text-xs text-gray-500",children:"No dates selected"})}),re.length>0&&e.jsx("button",{type:"button",onClick:()=>D([]),className:"mt-3 text-xs text-red-600 hover:underline self-start",children:"Clear all"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 border-t pt-4",children:[e.jsx("button",{type:"button",onClick:$,className:"px-4 py-2 rounded-md border border-gray-300 text-sm font-medium text-gray-600 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u||w.length===0,className:"px-4 py-2 rounded-md bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Submitting":"Submit Application"})]})]})]})}),S&&T&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 px-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Use CDO Credits"}),e.jsxs("button",{onClick:Ne,className:"text-gray-400 hover:text-gray-600",children:[e.jsx("span",{className:"sr-only",children:"Close"}),""]})]}),e.jsxs("form",{onSubmit:V,className:"px-6 py-5 space-y-4",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Reference:"})," ",T.cdono]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xm,{photo:T.employeePhoto,name:T.employeeName}),e.jsx("div",{className:"font-semibold text-gray-800",children:T.employeeName||"N/A"})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Remaining credits: ",Math.max(K-E.length,0)," / ",K]}),T.expirydate&&e.jsxs("div",{className:`text-xs font-semibold ${kl(T)?"text-red-600":"text-gray-500"}`,children:["Expiry: ",Jm(T.expirydate),kl(T)?" (Expired)":""]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"border rounded-md p-3 bg-white overflow-x-auto",children:e.jsx(vl,{mode:"multiple",selected:E,onSelect:B,weekStartsOn:1,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-1,toYear:new Date().getFullYear()+1,className:"min-w-[280px]"})}),e.jsxs("div",{className:"border rounded-md p-3 bg-gray-50 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Selected Dates"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[E.length," day(s)"]})]}),e.jsx("ul",{className:"space-y-1 max-h-48 overflow-y-auto text-sm",children:z.length>0?z.map(ee=>e.jsxs("li",{className:"flex items-center justify-between rounded border bg-white px-2 py-1",children:[e.jsx("span",{children:ee.label}),e.jsx("button",{type:"button",onClick:()=>U(ee.value),className:"text-red-600 text-xs hover:underline",children:"Remove"})]},ee.value)):e.jsx("li",{className:"text-xs text-gray-500",children:"No dates selected"})}),z.length>0&&e.jsx("button",{type:"button",onClick:()=>A([]),className:"mt-3 text-xs text-red-600 hover:underline self-start",children:"Clear all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Reason"}),e.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3,value:L,onChange:ee=>F(ee.target.value),required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-3 border-t pt-4",children:[e.jsx("button",{type:"button",onClick:Ne,className:"px-4 py-2 rounded-md border border-gray-300 text-sm font-medium text-gray-600 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:W||E.length===0||!L.trim(),className:"px-4 py-2 rounded-md bg-green-600 text-white text-sm font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:W?"Submitting":"Submit"})]})]})]})})]})},Uy=t=>{if(!t)return"";if(typeof t=="string"){const s=t.match(/(\d{2}):(\d{2})/);return s?`${s[1]}:${s[2]}`:""}return t instanceof Date&&!isNaN(t.getTime())?t.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}):""},P8=30*60*1e3,Hy=t=>{if(!t||!t.employee)return{valid:!1,message:"Please complete your Personal Data Sheet (PDS) to continue."};const s=t.employee,r={surname:"Last Name",firstname:"First Name",date_of_birth:"Birth Date",sex:"Gender",civil_status:"Civil Status"},n=[];for(const[a,l]of Object.entries(r))(!s[a]||String(s[a]).trim()==="")&&n.push(l);return n.length>0?{valid:!1,message:`Please fill in the following required fields in your PDS: ${n.join(", ")}`}:{valid:!0,message:""}},R8=()=>{const{user:t,loadingAuth:s,logout:r}=Ts(),n=ia(),[a,l]=x.useState(()=>localStorage.getItem("dtrActiveTab")||"dtr-check"),[i,o]=x.useState(()=>localStorage.getItem("dtrSelectedFilter")||"Today"),[c,d]=x.useState(()=>localStorage.getItem("dtrSelectedView")||"My Shift"),[m,u]=x.useState("full"),[p,g]=x.useState("leave-credits"),[j,y]=x.useState([]),[v,h]=x.useState(!1),[f,N]=x.useState(null),[b,w]=x.useState(!1),[D,S]=x.useState(null),[C,T]=x.useState([]),[_,E]=x.useState([]),[A,L]=x.useState([]),[F,W]=x.useState(!1),Y=x.useRef(),[q,J]=x.useState(!1),[O,M]=x.useState({currentSsn:"",newSsn:"",confirmSsn:""}),[k,I]=x.useState(""),[K,z]=x.useState(""),[P,R]=x.useState(!1),[B,U]=x.useState(!1),[G,$]=x.useState(null),[X,Q]=x.useState(!1),[Ne,V]=x.useState(!1),[re,ne]=x.useState(!0),[xe,me]=x.useState(""),[Z,ee]=x.useState(!1),[ye,ve]=x.useState(null),[ue,we]=x.useState(!1);x.useEffect(()=>{(async()=>{var Ge,ke,Re,Ke,Xe,Se,lt;if(!t||!(t.USERID||t.id)){$(null);return}try{Q(!0);const it=await oe.get("/pds-dtrchecker/me");console.log(" [DtrChecker] PDS response:",it.data),it.data.success&&((ke=(Ge=it.data.data)==null?void 0:Ge.media)!=null&&ke.photo)?(console.log(" [DtrChecker] PDS photo found, using as avatar"),console.log(" [DtrChecker] PDS photo type:",typeof it.data.data.media.photo),console.log(" [DtrChecker] PDS photo length:",(Re=it.data.data.media.photo)==null?void 0:Re.length),$(it.data.data.media.photo)):(console.log(" [DtrChecker] No PDS photo found, will use user.PHOTO"),console.log(" [DtrChecker] Response structure:",{success:it.data.success,hasData:!!it.data.data,hasMedia:!!((Ke=it.data.data)!=null&&Ke.media),hasPhoto:!!((Se=(Xe=it.data.data)==null?void 0:Xe.media)!=null&&Se.photo)}),$(null))}catch(it){((lt=it==null?void 0:it.response)==null?void 0:lt.status)===404?(console.log(" [DtrChecker] No PDS record found, will use user.PHOTO"),$(null)):(console.error(" [DtrChecker] Error fetching PDS photo:",it),$(null))}finally{Q(!1)}})()},[t]),x.useEffect(()=>{(async()=>{var Ge;if(!t||!(t.USERID||t.id)||s){ne(!1);return}try{ne(!0);const ke=await oe.get("/pds-dtrchecker/me");if(ke.data.success&&ke.data.data){const Re=Hy(ke.data.data);Re.valid?(V(!0),me("")):(V(!1),me(Re.message),l("my-pds"))}else V(!1),me("Please complete your Personal Data Sheet (PDS) to continue."),l("my-pds")}catch(ke){((Ge=ke==null?void 0:ke.response)==null?void 0:Ge.status)===404?(V(!1),me("Please complete your Personal Data Sheet (PDS) to continue."),l("my-pds")):(console.error("Error checking PDS completion:",ke),V(!0))}finally{ne(!1)}})()},[t,s]),x.useEffect(()=>{const ge=async()=>{var Re,Ke,Xe,Se,lt;if(s)return;if(!t||!(t.USERID||t.id)){ee(!1),ve(null);return}const ke=localStorage.getItem("authToken");if(!ke){console.warn("No auth token found, skipping admin access check"),ee(!1),ve(null);return}try{we(!0),console.log("Checking admin access with token:",ke?"Token present":"No token");const it=await oe.get("/auth/check-admin-access",{headers:{Authorization:`Bearer ${ke}`}});console.log("Admin access check response:",it.data),it.data.hasAdminAccess?(console.log(" Setting hasAdminAccess to TRUE, username:",it.data.username),ee(!0),ve(it.data.username)):(console.log(" Setting hasAdminAccess to FALSE"),ee(!1),ve(null))}catch(it){console.error("Error checking admin access:",it),console.error("Error response:",(Re=it.response)==null?void 0:Re.data),console.error("Error status:",(Ke=it.response)==null?void 0:Ke.status),console.error("Request config:",{url:(Xe=it.config)==null?void 0:Xe.url,method:(Se=it.config)==null?void 0:Se.method,headers:(lt=it.config)==null?void 0:lt.headers}),ee(!1),ve(null)}finally{we(!1)}},Ge=setTimeout(()=>{ge()},100);return()=>clearTimeout(Ge)},[t,s]),x.useEffect(()=>{console.log(" [hasAdminAccess State Changed]",{hasAdminAccess:Z,adminUsername:ye,user:t?{USERID:t.USERID||t.id,BADGENUMBER:t.BADGENUMBER}:null})},[Z,ye,t]),x.useEffect(()=>{localStorage.setItem("dtrActiveTab",a),console.log(" [DtrChecker] Active tab saved:",a)},[a]);const De=x.useMemo(()=>{if(i!=="This Month"&&i!=="Last Month")return[];const ge=new Date;let Ge,ke;i==="This Month"?(Ge=ge.getFullYear(),ke=ge.getMonth()+1):(Ge=ge.getFullYear(),ke=ge.getMonth(),ke===0&&(Ge--,ke=12));const Re=new Date(Ge,ke-1,1).toLocaleString("en-US",{month:"short"}),Ke=new Date(Ge,ke,0).getDate();return[{value:"full",label:`Full Month (${Re} 1-${Ke})`},{value:"first_half",label:`1st Half (${Re} 1-15)`},{value:"second_half",label:`2nd Half (${Re} 16-${Ke})`}]},[i]),le=(i==="This Month"||i==="Last Month")&&De.length>0;x.useEffect(()=>{u("full")},[i]),x.useEffect(()=>{localStorage.setItem("dtrSelectedFilter",i),console.log(" [DtrChecker] Selected filter saved:",i)},[i]),x.useEffect(()=>{localStorage.setItem("dtrSelectedView",c),console.log(" [DtrChecker] Selected view saved:",c)},[c]),x.useEffect(()=>{if(console.log(" [DtrChecker] User context changed:",{hasUser:!!t,userId:t==null?void 0:t.id,userUSERID:t==null?void 0:t.USERID,userName:t==null?void 0:t.NAME,name:t==null?void 0:t.name,loadingAuth:s}),!s&&!t){const ge=localStorage.getItem("authToken"),Ge=localStorage.getItem("authUser");if(ge&&Ge){console.log(" [DtrChecker] Found stored auth data, waiting for auth context to load...");return}else{console.log(" [DtrChecker] No user and no stored auth data - will redirect in 2 seconds");const ke=setTimeout(()=>{console.log(" [DtrChecker] Redirecting to login page after delay"),n("/login")},2e3);return()=>clearTimeout(ke)}}else if(t){const ge=t.id||t.USERID;console.log(` [DtrChecker] Will fetch data for USERID: ${ge}, User: ${t.NAME||t.name}`)}},[t,n,s]),x.useEffect(()=>{if(!t)return;const ge=()=>{Y.current&&clearTimeout(Y.current),Y.current=setTimeout(()=>{localStorage.getItem("authMethod");try{localStorage.removeItem("biometricScanningState"),localStorage.removeItem("fingerprintCaptureState"),localStorage.removeItem("biometricMatchState"),localStorage.removeItem("lastBiometricUser"),localStorage.removeItem("biometricSessionData"),localStorage.removeItem("biometricScore"),localStorage.removeItem("biometricConfidence"),localStorage.removeItem("lastFingerprintData"),localStorage.removeItem("biometricMatchHistory"),console.log(" Cleared biometric states due to session timeout")}catch(ke){console.warn(" Error clearing biometric states:",ke)}r(),n("/login")},P8)},Ge=["mousemove","mousedown","keydown","touchstart","scroll"];return Ge.forEach(ke=>{document.addEventListener(ke,ge,!0)}),ge(),()=>{Y.current&&clearTimeout(Y.current),Ge.forEach(ke=>{document.removeEventListener(ke,ge,!0)})}},[t,r,n]),x.useEffect(()=>{const ge=()=>{t&&(localStorage.setItem("dtrSessionActive","true"),localStorage.setItem("dtrSessionTimestamp",Date.now().toString()))},Ge=()=>{const ke=localStorage.getItem("dtrSessionActive"),Re=localStorage.getItem("dtrSessionTimestamp");if(ke==="true"&&Re){const Ke=Date.now()-parseInt(Re),Xe=60*60*1e3;if(Ke<Xe){console.log(" Restoring session after page refresh");return}else console.log(" Session expired due to inactivity"),localStorage.removeItem("dtrSessionActive"),localStorage.removeItem("dtrSessionTimestamp")}};return window.addEventListener("beforeunload",ge),window.addEventListener("pageshow",Ge),()=>{window.removeEventListener("beforeunload",ge),window.removeEventListener("pageshow",Ge)}},[t]),x.useEffect(()=>{(async()=>{var Ge,ke;if(!(a!=="201-files"||p!=="leave-credits")&&!(!t||!(t.USERID||t.id)))try{w(!0);const Re=await oe.get("/201-employees"),Ke=Array.isArray((Ge=Re.data)==null?void 0:Ge.data)?Re.data.data:Array.isArray(Re.data)?Re.data:[],Xe=String(t.USERID||t.id),Se=Ke.find(Nt=>String(Nt.dtruserid)===Xe);if(!Se){N(null),w(!1);return}const lt=await oe.get("/employee-designations",{params:{status:"all"}}),Pt=(Array.isArray((ke=lt.data)==null?void 0:ke.data)?lt.data.data:[]).find(Nt=>String(Nt.emp_objid)===String(Se.objid)&&String(Nt.ispresent)==="1");N(Pt||null)}catch{N(null)}finally{w(!1)}})()},[a,p,t]),x.useEffect(()=>{(async()=>{var Ge,ke;if(!(a!=="201-files"||p!=="locator"||!t||!(t.USERID||t.id)))try{h(!0);const Re=t.USERID||t.id,Ke=await oe.get("/201-employees"),Se=(Array.isArray((Ge=Ke.data)==null?void 0:Ge.data)?Ke.data.data:[]).find(Nt=>String(Nt.dtruserid)===String(Re));if(!Se||!Se.objid){y([]);return}const lt=await oe.get("/employee-locators",{params:{emp_objid:Se.objid}}),Pt=(Array.isArray((ke=lt.data)==null?void 0:ke.data)?lt.data.data:[]).sort((Nt,At)=>{const Ce=new Date(Nt.createddate||0);return new Date(At.createddate||0)-Ce});y(Pt)}catch(Re){console.error("Error fetching locator data:",Re),y([])}finally{h(!1)}})()},[a,p,t]),x.useEffect(()=>{(async()=>{var Ge,ke;if(t&&(t.id||t.USERID)){const Re=t.id||t.USERID;console.log(` [DtrChecker] Fetching shift schedule for USERID: ${Re}`);try{const Xe=(await oe.get(`/employees/${Re}/shift-schedule`)).data;if(console.log(` [DtrChecker] Shift schedule response for ${(Ge=Xe.employee)==null?void 0:Ge.NAME}`),Xe&&Xe.shiftSchedule){const Se=Xe.shiftSchedule;console.log(" [DtrChecker] Setting shift schedule:",{hasShiftSchedule:!!Se,shiftName:Se.SHIFTNAME,assignedShifts:((ke=Xe.assignedShifts)==null?void 0:ke.length)||0}),S({SHIFTNO:Se.SHIFTNO,SHIFTNAME:Se.SHIFTNAME,SHIFT_AMCHECKIN:Se.SHIFT_AMCHECKIN,SHIFT_AMCHECKIN_START:Se.SHIFT_AMCHECKIN_START,SHIFT_AMCHECKIN_END:Se.SHIFT_AMCHECKIN_END,SHIFT_AMCHECKOUT:Se.SHIFT_AMCHECKOUT,SHIFT_AMCHECKOUT_START:Se.SHIFT_AMCHECKOUT_START,SHIFT_AMCHECKOUT_END:Se.SHIFT_AMCHECKOUT_END,SHIFT_PMCHECKIN:Se.SHIFT_PMCHECKIN,SHIFT_PMCHECKIN_START:Se.SHIFT_PMCHECKIN_START,SHIFT_PMCHECKIN_END:Se.SHIFT_PMCHECKIN_END,SHIFT_PMCHECKOUT:Se.SHIFT_PMCHECKOUT,SHIFT_PMCHECKOUT_START:Se.SHIFT_PMCHECKOUT_START,SHIFT_PMCHECKOUT_END:Se.SHIFT_PMCHECKOUT_END,assignedShifts:Xe.assignedShifts||[]})}else console.log(" [DtrChecker] No shift schedule in response:",Xe),S(null)}catch(Ke){console.error(" [DtrChecker] Error fetching shift schedule:",Ke),S(null)}}})()},[t]),x.useEffect(()=>{(async()=>{var Ge;if(t&&(t.id||t.USERID)){const ke=t.id||t.USERID;console.log(` [DtrChecker] Fetching locator data for USERID: ${ke}`);try{const Re=await oe.get(`/locator/entries/${ke}`);T(Re.data||[]),console.log(` [DtrChecker] Loaded ${((Ge=Re.data)==null?void 0:Ge.length)||0} locator entries`)}catch(Re){console.error(" [DtrChecker] Error fetching locator data:",Re),T([])}}})()},[t]),Array.isArray(C)&&C.filter(ge=>String(ge.LOCUSERID)===String((t==null?void 0:t.id)||(t==null?void 0:t.USERID)));const Ie=async ge=>{var Ge,ke;ge.preventDefault(),I(""),z(""),R(!0);try{const Re=await oe.post("/auth/change-pin",{currentSsn:O.currentSsn,newPin:O.newSsn,confirmPin:O.confirmSsn});Re.data.success?(z("PIN changed successfully!"),M({currentSsn:"",newSsn:"",confirmSsn:""}),setTimeout(()=>{J(!1),z("")},2e3)):I(Re.data.message||"Failed to change PIN")}catch(Re){I(((ke=(Ge=Re.response)==null?void 0:Ge.data)==null?void 0:ke.message)||"Failed to change PIN. Please try again.")}finally{R(!1)}};return x.useEffect(()=>{const ge=Ge=>{B&&!Ge.target.closest(".user-dropdown")&&U(!1)};return document.addEventListener("mousedown",ge),()=>{document.removeEventListener("mousedown",ge)}},[B]),s||re?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:s?"Checking authentication...":"Verifying PDS completion..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 p-3 rounded-xl",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Employee Portal"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Your personal HR information center"})]})]}),e.jsx("div",{className:"hidden md:flex items-center space-x-4",children:e.jsxs("div",{className:"relative user-dropdown",children:[e.jsxs("button",{onClick:()=>U(!B),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 transition-all duration-200",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 truncate",children:(t==null?void 0:t.NAME)||(t==null?void 0:t.name)||(t==null?void 0:t.firstname)+" "+(t==null?void 0:t.lastname)||"Employee"}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:(t==null?void 0:t.TITLE)||(t==null?void 0:t.title)||"Employee"}),e.jsxs("div",{className:"text-xs text-gray-400 truncate",children:["ID: ",(t==null?void 0:t.USERID)||(t==null?void 0:t.userid)||(t==null?void 0:t.id)||"N/A"]})]}),e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-md overflow-hidden relative",children:(()=>{const ge=G||(t==null?void 0:t.PHOTO);console.log(" [DtrChecker] Avatar render - photoToUse:",!!ge,"pdsPhoto:",!!G,"user.PHOTO:",!!(t!=null&&t.PHOTO));const Ge=ge?typeof ge=="string"&&ge.startsWith("data:")?ge:`data:image/jpeg;base64,${ge}`:null;return console.log(" [DtrChecker] Avatar render - photoSrc:",!!Ge),Ge?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:Ge,alt:(t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"User",className:"w-full h-full object-cover rounded-xl",onError:ke=>{ke.target.style.display="none",ke.target.nextSibling&&(ke.target.nextSibling.style.display="flex")}}),e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-lg absolute inset-0",style:{display:"none"},children:((t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"U").charAt(0).toUpperCase()})]}):e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-lg",children:((t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"U").charAt(0).toUpperCase()})})()}),e.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${B?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),B&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[e.jsxs("button",{onClick:()=>{J(!0),U(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1 1 21 9z"})}),e.jsx("span",{children:"Change PIN"})]}),(t==null?void 0:t.privilege)!==void 0&&(t==null?void 0:t.privilege)!==null&&(t==null?void 0:t.privilege)===3&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:()=>{n("/hris-management"),U(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{children:"Admin Panel"})]})]}),Z&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:async()=>{var ge;try{U(!1);const Ge=(t==null?void 0:t.BADGENUMBER)||(t==null?void 0:t.username);try{console.log(" Attempting to create admin session from portal...");const ke=await oe.post("/auth/portal/admin-session");if(ke.data.success&&ke.data.token&&ke.data.user){const Re=ke.data.user,Ke=ke.data.token,Xe={...Re};Xe.USERID!==void 0&&Xe.id===void 0&&(Xe.id=Xe.USERID),localStorage.setItem("authToken",Ke),localStorage.setItem("authUser",JSON.stringify(Xe)),localStorage.setItem("authMethod","admin"),oe.defaults.headers.common.Authorization=`Bearer ${Ke}`,console.log(" Admin session created successfully, redirecting to HRIS Management"),setTimeout(()=>{window.location.href="/hris-management"},200);return}}catch(ke){console.warn(" Bridge authentication failed, falling back to login page:",ke),console.warn("Bridge error details:",((ge=ke.response)==null?void 0:ge.data)||ke.message)}sessionStorage.setItem("adminAccessRequest","true"),sessionStorage.setItem("adminAccessUsername",ye||""),sessionStorage.setItem("portalUsername",Ge||""),r(),setTimeout(()=>{window.location.href="/login?mode=admin"},200)}catch(Ge){console.error("Error in Admin Access flow:",Ge),U(!1)}},className:"w-full px-4 py-2 text-left text-sm text-indigo-700 hover:bg-indigo-50 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),e.jsx("span",{children:"Admin Access"})]})]}),e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:()=>{r(),U(!1),n("/login")},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),e.jsx("span",{children:"Logout"})]})]})]})})]})}),e.jsx("div",{className:"bg-white border-b border-gray-200 px-6",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>{if(!Ne){alert("Please complete your PDS first before accessing this feature.");return}l("dtr-check")},className:`px-6 py-3 text-sm font-semibold transition-all duration-200 border-b-2 ${a==="dtr-check"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"DTR Check"})]})}),e.jsx("button",{onClick:()=>l("my-pds"),className:`px-6 py-3 text-sm font-semibold transition-all duration-200 border-b-2 ${a==="my-pds"?"border-orange-500 text-orange-500":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{children:"My PDS"})]})}),e.jsx("button",{onClick:()=>{if(!Ne){alert("Please complete your PDS first before accessing this feature.");return}l("201-files")},className:`px-6 py-3 text-sm font-semibold transition-all duration-200 border-b-2 ${a==="201-files"?"border-green-600 text-green-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{children:"201 Files"})]})}),e.jsx("button",{onClick:()=>{if(!Ne){alert("Please complete your PDS first before accessing this feature.");return}l("payroll")},className:`px-6 py-3 text-sm font-semibold transition-all duration-200 border-b-2 ${a==="payroll"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xl font-bold",children:""}),e.jsx("span",{children:"Payroll"})]})})]})}),e.jsxs("main",{className:"flex-1 flex flex-col",children:[a==="dtr-check"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-3 sm:px-4 md:px-6 py-4 flex-shrink-0",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 md:gap-6",children:[D&&e.jsxs("div",{className:"w-full md:flex-1 md:min-w-0",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shift Schedule"}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-2 sm:p-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"bg-blue-500 p-1.5 rounded flex-shrink-0",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsx("div",{className:"min-w-0 flex-1 overflow-x-auto",children:e.jsxs("div",{className:"space-y-1.5 text-[11px] text-blue-800 min-w-max sm:min-w-0",children:[e.jsxs("div",{className:"grid gap-x-2 sm:gap-x-3 mb-2 pb-2 border-b border-blue-300 text-[10px] font-bold text-blue-900 uppercase",style:{gridTemplateColumns:"minmax(100px, 1fr) minmax(60px, 80px) minmax(100px, 120px)",minWidth:"280px"},children:[e.jsx("div",{className:"truncate",children:"Shift Name"}),e.jsx("div",{className:"truncate",children:"Mode"}),e.jsx("div",{className:"truncate",children:"Checktimes"})]}),(Array.isArray(D.assignedShifts)&&D.assignedShifts.length>0?D.assignedShifts:[{shiftName:D.SHIFTNAME||"Assigned Shift",shiftMode:D.SHIFT_AMCHECKIN&&D.SHIFT_PMCHECKOUT?"AMPM":D.SHIFT_AMCHECKIN?"AM":D.SHIFT_PMCHECKIN?"PM":"",checkIn:D.SHIFT_AMCHECKIN||D.SHIFT_PMCHECKIN,checkOut:D.SHIFT_PMCHECKOUT||D.SHIFT_AMCHECKOUT}]).map((ge,Ge)=>e.jsxs("div",{className:"grid gap-x-2 sm:gap-x-3 items-center text-xs font-semibold",style:{gridTemplateColumns:"minmax(100px, 1fr) minmax(60px, 80px) minmax(100px, 120px)",minWidth:"280px"},children:[e.jsx("div",{className:"truncate",children:ge.shiftName||"Shift"}),e.jsx("div",{className:"text-blue-600 truncate",children:ge.shiftMode||ge.period||"Mode"}),e.jsx("div",{className:"text-blue-900 truncate text-[10px] sm:text-xs",children:(Uy(ge.checkIn)||"")+"  "+(Uy(ge.checkOut)||"")})]},`${ge.shiftName||"shift"}-${ge.period||ge.shiftMode||Ge}`))]})})]})})]}),e.jsxs("div",{className:"w-full md:flex-1 md:max-w-[10rem]",children:[e.jsx("label",{htmlFor:"dateFilter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Date Range"}),e.jsxs("select",{id:"dateFilter",value:i,onChange:ge=>o(ge.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm bg-white",children:[e.jsx("option",{value:"Today",children:"Today"}),e.jsx("option",{value:"Last 2 Weeks",children:"Last 2 Weeks"}),e.jsx("option",{value:"This Month",children:"This Month"}),e.jsx("option",{value:"Last Month",children:"Last Month"})]})]}),e.jsxs("div",{className:"w-full md:flex-1 md:max-w-[15.68rem]",children:[e.jsx("label",{htmlFor:"periodFilter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Period"}),e.jsx("select",{id:"periodFilter",value:m,onChange:ge=>u(ge.target.value),disabled:!le,className:`w-full px-3 py-2 border rounded-lg text-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${le?"border-gray-300":"bg-gray-100 text-gray-500 cursor-not-allowed border-gray-200 focus:ring-0 focus:border-gray-200"}`,children:le?De.map(ge=>e.jsx("option",{value:ge.value,children:ge.label},ge.value)):e.jsx("option",{value:"full",children:"Not available for this range"})})]}),e.jsxs("div",{className:"w-full md:flex-1 md:max-w-xs",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"View Mode"}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>d("My Shift"),className:`flex-1 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 flex items-center justify-center space-x-1 sm:space-x-2 ${c==="My Shift"?"bg-gradient-to-r from-indigo-600 to-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("span",{className:"truncate",children:"My Shift"})]}),e.jsxs("button",{onClick:()=>d("Raw Logs"),className:`flex-1 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 flex items-center justify-center space-x-1 sm:space-x-2 ${c==="Raw Logs"?"bg-gradient-to-r from-indigo-600 to-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"truncate",children:"Raw Logs"})]})]})]}),e.jsx("div",{className:"flex justify-start md:justify-end items-end",children:e.jsx("button",{onClick:()=>W(!0),className:"w-10 h-10 sm:w-12 sm:h-12 bg-white text-blue-600 rounded-lg hover:bg-gray-50 flex items-center justify-center transition-all duration-200 border border-gray-300 flex-shrink-0",title:"Print DTR",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})})})]})}),e.jsx("div",{className:"flex-1 bg-white overflow-hidden",children:c==="My Shift"?e.jsx(zC,{user:t,selectedFilter:i,shiftSchedule:D,locatorData:C,selectedPeriod:m,onLogsProcessed:E}):e.jsx(a4,{user:t,selectedFilter:i,locatorData:C,selectedPeriod:m,onLogsProcessed:L})})]}),a==="my-pds"&&e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[!Ne&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-6 h-6 text-red-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-semibold",children:"PDS Completion Required"}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:xe}),e.jsx("p",{className:"text-red-700 text-sm mt-2",children:"You must complete these required fields before accessing other features."})]})]})}),e.jsx(o4,{onBack:()=>{if(!Ne){alert("Please complete your PDS first before accessing other features.");return}l("dtr-check")},onSave:async()=>{console.log("PDS saved successfully");try{const ge=await oe.get("/pds-dtrchecker/me");if(ge.data.success&&ge.data.data){const Ge=Hy(ge.data.data);Ge.valid?(V(!0),me("")):(V(!1),me(Ge.message))}}catch(ge){console.error("Error re-checking PDS after save:",ge)}}})]}),a==="201-files"&&e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"bg-white border-r border-gray-200 px-4 py-6 w-48 flex-shrink-0",children:e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("button",{onClick:()=>g("leave-credits"),className:`py-3 px-4 border-r-2 font-medium text-sm transition-colors text-left ${p==="leave-credits"?"border-indigo-500 text-indigo-600 bg-indigo-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:"My Leave Credits"}),e.jsx("button",{onClick:()=>g("leave"),className:`py-3 px-4 border-r-2 font-medium text-sm transition-colors text-left ${p==="leave"?"border-indigo-500 text-indigo-600 bg-indigo-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:"Leave"}),e.jsx("button",{onClick:()=>g("cdo-credits"),className:`py-3 px-4 border-r-2 font-medium text-sm transition-colors text-left ${p==="cdo-credits"?"border-indigo-500 text-indigo-600 bg-indigo-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:"CDO Credits"}),e.jsx("button",{onClick:()=>g("travel"),className:`py-3 px-4 border-r-2 font-medium text-sm transition-colors text-left ${p==="travel"?"border-indigo-500 text-indigo-600 bg-indigo-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:"Travel"}),e.jsx("button",{onClick:()=>g("locator"),className:`py-3 px-4 border-r-2 font-medium text-sm transition-colors text-left ${p==="locator"?"border-indigo-500 text-indigo-600 bg-indigo-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:"Locator"})]})}),e.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[p==="leave-credits"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Current Designation"}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:b?e.jsx("div",{className:"text-sm text-gray-500",children:"Loading designation..."}):f?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Designation"}),e.jsx("div",{className:"font-medium",children:f.rankname||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Position"}),e.jsx("div",{className:"font-medium",children:f.position||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Department"}),e.jsx("div",{className:"font-medium",children:f.departmentname||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Appointment"}),e.jsx("div",{className:"font-medium",children:f.appointmentname||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Appointment Date"}),e.jsx("div",{className:"font-medium",children:f.appointmentdate?String(f.appointmentdate).slice(0,10):"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Status"}),e.jsx("div",{children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Present"})})]})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"Not available"})})]}),e.jsx(c4,{})]}),p==="leave"&&e.jsx(yT,{}),p==="cdo-credits"&&e.jsx(L8,{}),p==="travel"&&e.jsx(j8,{}),p==="locator"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between border-b",children:[e.jsx("div",{className:"font-semibold",children:"My Locator Records"}),e.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-800",onClick:async()=>{var ge,Ge;h(!0);try{const ke=t.USERID||t.id,Re=await oe.get("/201-employees"),Xe=(Array.isArray((ge=Re.data)==null?void 0:ge.data)?Re.data.data:[]).find(Se=>String(Se.dtruserid)===String(ke));if(Xe!=null&&Xe.objid){const Se=await oe.get("/employee-locators",{params:{emp_objid:Xe.objid}}),it=(Array.isArray((Ge=Se.data)==null?void 0:Ge.data)?Se.data.data:[]).sort((Pt,Nt)=>{const At=new Date(Pt.createddate||0);return new Date(Nt.createddate||0)-At});y(it)}}catch(ke){console.error("Error refreshing locator data:",ke)}finally{h(!1)}},children:"Refresh"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Locator No."}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Destination"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Purpose"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Time Departure"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Time Arrival"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 text-sm",children:v?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-gray-500",children:"Loading"})}):(j||[]).length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-gray-500",children:"No locator records"})}):(j||[]).map(ge=>{const Ge=Ke=>{if(!Ke)return"";const Xe=String(Ke).slice(0,10);if(Xe.length===10&&Xe.includes("-")){const[Se,lt,it]=Xe.split("-");return`${lt}/${it}/${Se}`}return Xe},ke=Ke=>{if(!Ke)return"";const Xe=String(Ke);if(/^\d{2}:\d{2}$/.test(Xe))return Xe;if(/^\d{2}:\d{2}:\d{2}$/.test(Xe))return Xe.slice(0,5);if(Xe.includes("T")){const lt=Xe.match(/T(\d{2}:\d{2})/);if(lt)return lt[1]}if(Xe.includes(" ")||Xe.includes("T")){const lt=Xe.split(/[ T]/);if(lt.length>1&&/^\d{2}:\d{2}/.test(lt[1]))return lt[1].slice(0,5)}const Se=Xe.match(/^(\d{2}:\d{2})/);return Se?Se[1]:""},Re=(()=>{const Ke=(ge.locstatus||"").trim();return Ke==="Approved"?"bg-green-100 text-green-800":Ke==="Rejected"?"bg-red-100 text-red-800":Ke==="Returned"?"bg-blue-100 text-blue-800":Ke==="Cancelled"?"bg-gray-100 text-gray-800":Ke==="For Approval"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"})();return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:ge.locatorno||""}),e.jsx("td",{className:"px-4 py-2",children:Ge(ge.locatordate)}),e.jsx("td",{className:"px-4 py-2",children:ge.locdestination||""}),e.jsx("td",{className:"px-4 py-2 max-w-md truncate",title:ge.locpurpose||"",children:ge.locpurpose||""}),e.jsx("td",{className:"px-4 py-2",children:ke(ge.loctimedeparture)}),e.jsx("td",{className:"px-4 py-2",children:ke(ge.loctimearrival)}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${Re}`,children:ge.locstatus&&ge.locstatus.trim()||"For Approval"})})]},ge.objid)})})]})})]})})]})})]}),a==="payroll"&&e.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg shadow-lg p-8 text-white mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:" Payroll Information"}),e.jsx("p",{className:"text-purple-100",children:"Your Salary and Compensation Details"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Month"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"--"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Last Payslip"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"--"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Next Pay Date"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"--"})]})]}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-6 rounded",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-6 h-6 text-yellow-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Under Development"}),e.jsx("p",{className:"text-sm text-yellow-700 mb-4",children:"The Payroll module is currently under development. Soon you'll be able to:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm text-yellow-700 ml-4",children:[e.jsx("li",{children:"View your current and past payslips"}),e.jsx("li",{children:"Download payslip PDFs"}),e.jsx("li",{children:"View deductions breakdown (SSS, PhilHealth, Pag-IBIG, Tax)"}),e.jsx("li",{children:"Track loans and salary advances"}),e.jsx("li",{children:"View year-to-date earnings"}),e.jsx("li",{children:"Access BIR Form 2316 (Annual ITR)"}),e.jsx("li",{children:"View 13th month pay computation"})]}),e.jsxs("p",{className:"text-sm text-yellow-700 mt-4",children:[e.jsx("strong",{children:"Expected Release:"})," Integrated with DTR system for automatic computation"]})]})]})}),e.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-500 p-4 rounded mt-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("svg",{className:"w-5 h-5 text-purple-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-purple-700",children:[e.jsx("strong",{children:"Note:"})," Payroll calculations will be automatically based on your DTR attendance records to ensure accuracy."]})})]})})]})})]}),q&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Change Your PIN"}),e.jsx("button",{onClick:()=>{J(!1),M({currentSsn:"",newSsn:"",confirmSsn:""}),I(""),z("")},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Security Notice:"})," Your PIN is used to access your personal time records. Keep it secure and don't share it with others."]})]})}),e.jsxs("form",{onSubmit:Ie,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentSsn",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Current PIN"}),e.jsx("input",{type:"password",id:"currentSsn",value:O.currentSsn,onChange:ge=>M({...O,currentSsn:ge.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your current PIN",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newSsn",className:"block text-sm font-semibold text-gray-700 mb-2",children:"New PIN"}),e.jsx("input",{type:"password",id:"newSsn",value:O.newSsn,onChange:ge=>M({...O,newSsn:ge.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your new PIN",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmSsn",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm New PIN"}),e.jsx("input",{type:"password",id:"confirmSsn",value:O.confirmSsn,onChange:ge=>M({...O,confirmSsn:ge.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Confirm your new PIN",required:!0})]}),k&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-800 text-sm",children:k})}),K&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-green-800 text-sm",children:K})}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{J(!1),M({currentSsn:"",newSsn:"",confirmSsn:""}),I(""),z("")},className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:P,className:"flex-1 px-4 py-3 bg-gradient-to-r from-indigo-600 to-blue-600 text-white rounded-xl font-semibold hover:from-indigo-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center space-x-2",children:P?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Changing..."})]}):e.jsx("span",{children:"Change PIN"})})]})]})]})})}),F&&c==="My Shift"&&e.jsx(k8,{user:t,selectedFilter:i,selectedPeriod:m,processedLogs:_,shiftSchedule:D,onClose:()=>W(!1)}),F&&c==="Raw Logs"&&e.jsx(I8,{user:t,selectedFilter:i,selectedPeriod:m,logs:A,onClose:()=>W(!1)})]})},O8=t=>t&&typeof t=="string"?t.slice(0,10):null,F8=t=>{if(!t)return null;if(typeof t=="string"){const s=t.match(/(\d{2}):(\d{2})/);return s?`${s[1]}:${s[2]}`:null}return null},$8=t=>{if(!t)return"";const s=new Date(t);if(isNaN(s.getTime()))return t;const r=String(s.getDate()).padStart(2,"0"),n=s.toLocaleString("en-US",{month:"short"}).toUpperCase(),a=s.getFullYear(),l=s.toLocaleString("en-US",{weekday:"short"}).toUpperCase();return`${r}-${n}-${a}, ${l}`},U8=(t,s)=>{const r=[];let n=new Date(t);const a=new Date(s);for(;n<=a&&(r.push(n.toISOString().slice(0,10)),n.setDate(n.getDate()+1),!(r.length>1e3)););return r},By=t=>{const s=new Date(t);return s.getDay()===0||s.getDay()===6};function H8({logs:t=[],selectedEmployee:s,startDate:r,endDate:n}){const[a,l]=x.useState([]);x.useEffect(()=>{console.log("DEBUG: RawLogsView_Management logs:",t);const o={};t.forEach(m=>{const u=O8(m.CHECKTIME||m.checktime||m.CheckTime||m.DATE);u&&(o[u]||(o[u]=[]),o[u].push(m))});const d=U8(r,n).map(m=>{const u=o[m]||[],p=[],g=[];return u.forEach(j=>{const y=F8(j.CHECKTIME||j.checktime||j.CheckTime);if(!y)return;const[v]=y.split(":").map(Number);v<12?p.push({time:y}):g.push({time:y})}),{date:$8(m),dateStr:m,amLogs:p,pmLogs:g,isWeekend:By(m),remarks:By(m)?"Weekend":""}});l(d)},[t,r,n]);const i=(o,c)=>o?o.split("; ").map((d,m,u)=>e.jsxs("span",{style:d==="Weekend"||c?{color:"blue"}:{},children:[d,m<u.length-1&&"; "]},m)):null;return s?a.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No logs found for the selected date range."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Date"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"AM Logs"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"PM Logs"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Remarks"})]})}),e.jsx("tbody",{children:a.map((o,c)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:o.date}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:o.amLogs&&o.amLogs.length>0?o.amLogs.map((d,m)=>d.time).join(", "):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:o.pmLogs&&o.pmLogs.length>0?o.pmLogs.map((d,m)=>d.time).join(", "):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:i(o.remarks,o.isWeekend)})]},c))})]})}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Please select an employee to view time logs."})})}const B8="modulepreload",z8=function(t){return"/"+t},zy={},K2=function(s,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=z8(c),c in zy)return;zy[c]=!0;const d=c.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":B8,d||(u.as="script"),u.crossOrigin="",u.href=c,o&&u.setAttribute("nonce",o),document.head.appendChild(u),d)return new Promise((p,g)=>{u.addEventListener("load",p),u.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function l(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&l(o.reason);return s().catch(l)})};function q2(t){return[]}function V2(t,s){const r=t.reduce((o,c)=>o+(Number(c.LATE)||0),0),n=t.reduce((o,c)=>o+(Number(c.TOTAL_HOURS)||0),0),a=Array(s.length).fill(""),l=s.findIndex(o=>o.field==="LATE"),i=s.findIndex(o=>o.field==="TOTAL_HOURS");return l!==-1&&(a[l]=r),i!==-1&&(a[i]=n),a[0]="TOTALS:",a}function W8(t,s,r){if(!t||t.length===0)return;s||(s=Object.keys(t[0]).map(g=>({header:g,field:g})));const n=q2().map(p=>p.map(g=>`"${g}"`).join(",")),a=s.map(p=>`"${p.header}"`).join(","),l=t.map(p=>s.map(g=>{let j=p[g.field];return(typeof j>"u"||j===null)&&(j=""),`"${String(j).replace(/"/g,'""')}"`}).join(",")),i=V2(t,s).map(p=>`"${p}"`).join(","),c=[...n,a,...l,i].join(`
`),d=new Blob([c],{type:"text/csv"}),m=window.URL.createObjectURL(d),u=document.createElement("a");u.href=m,u.download="time_logs.csv",u.click(),window.URL.revokeObjectURL(m)}function Y8(t,s,r){!t||t.length===0||K2(()=>import("./xlsx-D_0l8YDs.js"),[]).then(n=>{s||(s=Object.keys(t[0]).map(p=>({header:p,field:p})));const a=q2(),l=t.map(u=>Object.fromEntries(s.map(p=>[p.header,u[p.field]??""]))),i=V2(t,s),o={};s.forEach((u,p)=>{o[u.header]=i[p]});const c=[...a.map(u=>{const p={};return u.forEach((g,j)=>{p[`_col${j}`]=g}),p}),...l,o],d=n.utils.json_to_sheet(c,{skipHeader:!1}),m=n.utils.book_new();n.utils.book_append_sheet(m,d,"Time Logs"),n.writeFile(m,"time_logs.xlsx")})}const K8=t=>{if(!t)return"";const s=String(t).trim(),n=s.split(/[T ]/)[0].match(/^(\d{4})-(\d{2})-(\d{2})$/);if(n){const[,l,i,o]=n,c=new Date(Date.UTC(Number(l),Number(i)-1,Number(o))),d=String(o).padStart(2,"0"),m=c.toLocaleString("en-US",{month:"short",timeZone:"UTC"}),u=c.getUTCFullYear(),p=c.toLocaleString("en-US",{weekday:"short",timeZone:"UTC"});return`${d}-${m}-${u}, ${p}`}const a=new Date(s);if(!Number.isNaN(a.getTime())){const l=String(a.getUTCDate()).padStart(2,"0"),i=a.toLocaleString("en-US",{month:"short",timeZone:"UTC"}),o=a.getUTCFullYear(),c=a.toLocaleString("en-US",{weekday:"short",timeZone:"UTC"});return`${l}-${i}-${o}, ${c}`}return s},q8=t=>{if(!t)return"N/A";const s=String(t).trim(),n=s.split(/[T ]/)[0].match(/^(\d{4})-(\d{2})-(\d{2})$/);if(n){const[,l,i,o]=n,d=new Date(Date.UTC(Number(l),Number(i)-1,Number(o))).toLocaleString("en-US",{weekday:"short",timeZone:"UTC"});return`${i}/${o}/${l}, ${d}`}const a=new Date(s);if(!Number.isNaN(a.getTime())){const l=String(a.getMonth()+1).padStart(2,"0"),i=String(a.getDate()).padStart(2,"0"),o=a.getFullYear(),c=a.toLocaleString("en-US",{weekday:"short"});return`${l}/${i}/${o}, ${c}`}return s},V8=(t="")=>{const s=String(t||"").trim();if(!s)return"NA";const r=s.split(/\s+/);if(r.length===1)return r[0].slice(0,2).toUpperCase();const n=r[0][0]||"",a=r[r.length-1][0]||"";return(n+a).toUpperCase()},mn=t=>{if(!t||t==="-")return"";const s=String(t).trim();if(!s)return"";const r=s.match(/^(\d{1,2}):(\d{2})(?::\d{2})?$/);if(r){const n=String(parseInt(r[1],10)).padStart(2,"0"),a=r[2];return`${n}:${a}`}return s},G8=t=>{if(!t)return"";if(/^\d{2}:\d{2}$/.test(t))return t;if(typeof t=="string"){const s=t.match(/T(\d{2}):(\d{2})/);if(s)return`${s[1]}:${s[2]}`;const r=t.match(/(\d{2}):(\d{2})/);if(r)return`${r[1]}:${r[2]}`}return""},_r=t=>{if(!t)return null;if(typeof t=="string"){if(/^\d{2}:\d{2}$/.test(t))return t;const s=t.match(/^(\d{2}):(\d{2})/);return s?`${s[1]}:${s[2]}`:G8(t)}if(t instanceof Date){const s=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0");return`${s}:${r}`}return null},Wy=t=>{if(!t||typeof t!="string")return 0;const[s,r]=t.split(":").map(Number);return s*60+r},Rc=(t,s,r=[])=>{const n=[{value:"",label:"-- Select Time --"}],a=new Set;let l=null,i=null;if(s)switch(t){case"am_checkin":l=_r(s.SHIFT_AMCHECKIN_START),i=_r(s.SHIFT_AMCHECKIN_END);break;case"am_checkout":l=_r(s.SHIFT_AMCHECKOUT_START),i=_r(s.SHIFT_AMCHECKOUT_END);break;case"pm_checkin":l=_r(s.SHIFT_PMCHECKIN_START),i=_r(s.SHIFT_PMCHECKIN_END);break;case"pm_checkout":l=_r(s.SHIFT_PMCHECKOUT_START),i=_r(s.SHIFT_PMCHECKOUT_END);break}const o=l?Wy(l):null,c=i?Wy(i):null;for(let u=0;u<24;u++)for(let p=0;p<60;p+=15){const g=String(u).padStart(2,"0"),j=String(p).padStart(2,"0"),y=`${g}:${j}`,v=u*60+p;o!==null&&c!==null?v>=o&&v<=c&&(a.add(y),n.push({value:y,label:y})):(a.add(y),n.push({value:y,label:y}))}r.forEach(u=>{u&&u.trim()&&!a.has(u)&&(a.add(u),n.push({value:u,label:u}))});const d=n[0],m=n.slice(1).sort((u,p)=>{const[g,j]=u.value.split(":").map(Number),[y,v]=p.value.split(":").map(Number);return g!==y?g-y:j-v});return[d,...m]},cx=({isOpen:t,onClose:s,employee:r,row:n,form:a,onChange:l,onSubmit:i,loading:o,saving:c,error:d,existingRecord:m,shiftSchedule:u})=>{var S,C,T,_;if(!t||!r||!n)return null;const p=(r==null?void 0:r.PHOTO)||(r==null?void 0:r.photo)||(r==null?void 0:r.PHOTOPATH)||(r==null?void 0:r.photoPath)||((S=r==null?void 0:r.RAW)==null?void 0:S.photo_path)||(r==null?void 0:r.photo_path)||"",g=(r==null?void 0:r.NAME)||(r==null?void 0:r.name)||((C=r==null?void 0:r.RAW)==null?void 0:C.fullname)||[r==null?void 0:r.LASTNAME,r==null?void 0:r.FIRSTNAME].filter(Boolean).join(", ")||"Employee";r!=null&&r.BADGENUMBER||r!=null&&r.BADGENO||r!=null&&r.badgeNo||(T=r==null?void 0:r.RAW)!=null&&T.badge_no,r!=null&&r.DEPARTMENT||r!=null&&r.department||(_=r==null?void 0:r.RAW)!=null&&_.department_name;const j=(n==null?void 0:n.normalizedDate)||(n==null?void 0:n.DATE_RAW)||(n==null?void 0:n.DATE)||(a==null?void 0:a.checktimedate)||"",y=K8(j),v=q8(j),h=(n==null?void 0:n.AM_CHECKIN)||(n==null?void 0:n.amCheckIn)||"-",f=(n==null?void 0:n.AM_CHECKOUT)||(n==null?void 0:n.amCheckOut)||"-",N=(n==null?void 0:n.PM_CHECKIN)||(n==null?void 0:n.pmCheckIn)||"-",b=(n==null?void 0:n.PM_CHECKOUT)||(n==null?void 0:n.pmCheckOut)||"-",w=(n==null?void 0:n.lateMinutes)||(n==null?void 0:n.LATEMINUTES)||(n==null?void 0:n.late_minutes)||0;[mn(h),mn(f),mn(N),mn(b)].filter(Boolean);const D=[{name:"am_checkin",label:"AM Check-In",currentValue:mn(h),options:Rc("am_checkin",u,[mn(h)].filter(Boolean))},{name:"am_checkout",label:"AM Check-Out",currentValue:mn(f),options:Rc("am_checkout",u,[mn(f)].filter(Boolean))},{name:"pm_checkin",label:"PM Check-In",currentValue:mn(N),options:Rc("pm_checkin",u,[mn(N)].filter(Boolean))},{name:"pm_checkout",label:"PM Check-Out",currentValue:mn(b),options:Rc("pm_checkout",u,[mn(b)].filter(Boolean))}];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-5xl max-h-[95vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between border-b px-6 py-4",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[p?e.jsx("img",{src:p,alt:g,className:"w-12 h-12 rounded-full object-cover border"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-sm font-semibold text-gray-600",children:V8(g)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:g}),e.jsx("p",{className:"text-sm text-gray-500",children:y||"N/A"})]})]}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-3xl font-bold leading-none",children:""})]}),e.jsxs("form",{onSubmit:i,className:"px-6 py-6 space-y-6",children:[e.jsxs("section",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Current Logs"}),e.jsx("div",{className:"bg-gray-50 border border-gray-300 rounded-lg p-4 overflow-x-auto",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-4 text-sm w-full",children:[e.jsxs("div",{className:"flex-shrink min-w-[120px] flex-[1.5]",children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase font-medium",children:"Log Date"}),e.jsx("div",{className:"text-sm md:text-base font-semibold text-blue-600 mt-1 break-words",children:v})]}),e.jsxs("div",{className:"flex-shrink border-l border-gray-300 pl-2 md:pl-4 min-w-[80px] flex-1",children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase font-medium",children:"AM-CheckIn"}),e.jsx("div",{className:"text-sm md:text-base font-medium text-gray-900 mt-1",children:h})]}),e.jsxs("div",{className:"flex-shrink border-l border-gray-300 pl-2 md:pl-4 min-w-[80px] flex-1",children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase font-medium",children:"AM-CheckOut"}),e.jsx("div",{className:"text-sm md:text-base font-medium text-gray-900 mt-1",children:f})]}),e.jsxs("div",{className:"flex-shrink border-l border-gray-300 pl-2 md:pl-4 min-w-[80px] flex-1",children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase font-medium",children:"PM-CheckIn"}),e.jsx("div",{className:"text-sm md:text-base font-medium text-gray-900 mt-1",children:N})]}),e.jsxs("div",{className:"flex-shrink border-l border-gray-300 pl-2 md:pl-4 min-w-[80px] flex-1",children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase font-medium",children:"PM-CheckOut"}),e.jsx("div",{className:"text-sm md:text-base font-medium text-gray-900 mt-1",children:b})]}),e.jsxs("div",{className:"flex-shrink border-l border-gray-300 pl-2 md:pl-4 min-w-[70px] flex-[0.8]",children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase font-medium",children:"Lates (minutes)"}),e.jsx("div",{className:"text-sm md:text-base font-medium mt-1",children:w>0?e.jsx("span",{className:"text-red-600 font-semibold",children:w}):e.jsx("span",{className:"text-gray-500",children:"0"})})]})]})})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Current Shift Schedule"}),u?e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-blue-600 uppercase font-medium mb-1",children:"Shift Name"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:u.SHIFTNAME||"Not Assigned"})]}),u.SHIFT_AMCHECKIN_START&&u.SHIFT_AMCHECKIN_END&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-blue-600 uppercase font-medium mb-1",children:"AM Check-In Window"}),e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[_r(u.SHIFT_AMCHECKIN_START)||"N/A"," - ",_r(u.SHIFT_AMCHECKIN_END)||"N/A"]})]}),u.SHIFT_AMCHECKOUT_START&&u.SHIFT_AMCHECKOUT_END&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-blue-600 uppercase font-medium mb-1",children:"AM Check-Out Window"}),e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[_r(u.SHIFT_AMCHECKOUT_START)||"N/A"," - ",_r(u.SHIFT_AMCHECKOUT_END)||"N/A"]})]}),u.SHIFT_PMCHECKIN_START&&u.SHIFT_PMCHECKIN_END&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-blue-600 uppercase font-medium mb-1",children:"PM Check-In Window"}),e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[_r(u.SHIFT_PMCHECKIN_START)||"N/A"," - ",_r(u.SHIFT_PMCHECKIN_END)||"N/A"]})]}),u.SHIFT_PMCHECKOUT_START&&u.SHIFT_PMCHECKOUT_END&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-blue-600 uppercase font-medium mb-1",children:"PM Check-Out Window"}),e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[_r(u.SHIFT_PMCHECKOUT_START)||"N/A"," - ",_r(u.SHIFT_PMCHECKOUT_END)||"N/A"]})]})]}),!u.SHIFTNAME&&e.jsx("div",{className:"mt-3 text-xs text-amber-600 italic",children:"Note: Time options are not filtered as no shift schedule is assigned."})]}):e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"text-sm text-amber-800",children:[e.jsx("span",{className:"font-medium",children:"No shift schedule assigned."}),e.jsx("span",{className:"ml-2 text-xs italic",children:"Time options will show all available times."})]})})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Override Check Times"}),m&&e.jsxs("span",{className:"text-xs font-medium text-blue-600",children:["Existing record status: ",m.fixstatus||"For Approval"]})]}),o?e.jsx("div",{className:"p-3 text-sm text-gray-500 bg-gray-50 rounded-lg",children:"Loading existing fix log..."}):e.jsx("div",{className:"flex items-end gap-4",children:D.map(E=>e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:E.name,className:"block text-sm font-medium text-gray-700 mb-1",children:E.label}),e.jsx("select",{id:E.name,name:E.name,value:a[E.name]||"",onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white",style:{color:a[E.name]&&a[E.name]===E.currentValue?"#2563eb":"#111827"},disabled:c,children:E.options.map(A=>{const L=A.value&&A.value===E.currentValue;return e.jsx("option",{value:A.value,style:{color:L?"#2563eb":"#111827"},children:A.label},A.value)})})]},E.name))}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"fix-remarks",className:"block text-sm font-medium text-gray-700 mb-1",children:"Remarks"}),e.jsx("textarea",{id:"fix-remarks",name:"remarks",value:a.remarks||"",onChange:l,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Provide reason or supporting notes...",disabled:c})]})]}),d&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:d}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-gray-200 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",disabled:c,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",disabled:c,children:c?"Saving...":m?"Update Fix Log":"Save Fix Log"})]})]})]})})},dx=t=>t?{hasAMCheckIn:!!t.SHIFT_AMCHECKIN,hasAMCheckOut:!!t.SHIFT_AMCHECKOUT,hasPMCheckIn:!!t.SHIFT_PMCHECKIN,hasPMCheckOut:!!t.SHIFT_PMCHECKOUT}:{hasAMCheckIn:!1,hasAMCheckOut:!1,hasPMCheckIn:!1,hasPMCheckOut:!1},Q8=t=>{if(!t)return"";const s=String(t).trim(),n=s.split(/[T ]/)[0].match(/^(\d{4})-(\d{2})-(\d{2})$/);if(n){const[,l,i,o]=n,c=new Date(Date.UTC(Number(l),Number(i)-1,Number(o))),d=String(o).padStart(2,"0"),m=c.toLocaleString("en-US",{month:"short",timeZone:"UTC"}),u=c.getUTCFullYear(),p=c.toLocaleString("en-US",{weekday:"short",timeZone:"UTC"});return`${d}-${m}-${u}, ${p}`}const a=new Date(s);if(!Number.isNaN(a.getTime())){const l=String(a.getUTCDate()).padStart(2,"0"),i=a.toLocaleString("en-US",{month:"short",timeZone:"UTC"}),o=a.getUTCFullYear(),c=a.toLocaleString("en-US",{weekday:"short",timeZone:"UTC"});return`${l}-${i}-${o}, ${c}`}return s},ma=t=>{if(!t||t==="-")return"";const s=String(t).trim();if(!s)return"";const r=s.match(/^(\d{1,2}):(\d{2})(?::\d{2})?$/);if(r){const n=String(parseInt(r[1],10)).padStart(2,"0"),a=r[2];return`${n}:${a}`}return s},Yy={emp_objid:"",checktimedate:"",am_checkin:"",am_checkout:"",pm_checkin:"",pm_checkout:"",remarks:""},G2=t=>{if(!t)return!1;const r=new Date(t).getDay();return r===0||r===6};function io(t){if(!t)return"";if(/^\d{2}:\d{2}$/.test(t))return t;const s=t.match(/(\d{2}):(\d{2})/);return s?`${s[1]}:${s[2]}`:""}function ss(t){if(!t)return"";if(/^\d{2}:\d{2}$/.test(t))return t;if(typeof t=="string"){const s=t.match(/T(\d{2}):(\d{2})/);if(s)return`${s[1]}:${s[2]}`;const r=t.match(/(\d{2}):(\d{2})/);if(r)return`${r[1]}:${r[2]}`}return""}function Oc(t){return ss(t)}const ru=t=>{if(!t)return 0;const s=ss(t);if(!s)return 0;const r=s.match(/^(\d{2}):/);return r?parseInt(r[1],10):0},Rs=t=>{if(!t)return"";if(t instanceof Date&&!Number.isNaN(t.getTime())){const s=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${s}-${r}-${n}`}if(typeof t=="object"&&t!==null){if(t.date)return Rs(t.date);if(t.CHECKTIME)return Rs(t.CHECKTIME);if(t.value)return Rs(t.value)}if(typeof t=="number"){const s=new Date(t);if(!Number.isNaN(s.getTime())){const r=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),a=String(s.getDate()).padStart(2,"0");return`${r}-${n}-${a}`}return""}if(typeof t=="string"){const s=t.trim();if(!s)return"";const r=s.match(/(\d{1,2})\/(\d{1,2})\/(\d{4})/);if(r){const[,l,i,o]=r;return`${o}-${l.padStart(2,"0")}-${i.padStart(2,"0")}`}const n=s.match(/(\d{4})\/(\d{1,2})\/(\d{1,2})/);if(n){const[,l,i,o]=n;return`${l}-${i.padStart(2,"0")}-${o.padStart(2,"0")}`}const a=s.split(/[ T]/)[0];return/^\d{4}-\d{2}-\d{2}$/.test(a)?a:""}return""},Qu=t=>{if(!t)return"";if(typeof t=="string"){const s=t.trim();if(!s)return"";const r=s.match(/^(\d{4})-(\d{2})-(\d{2})/);if(r)return`${r[1]}-${r[2]}-${r[3]}`;const n=s.match(/^(\d{4})-(\d{2})-(\d{2})[T\s]/);if(n)return`${n[1]}-${n[2]}-${n[3]}`;const a=s.match(/(\d{1,2})\/(\d{1,2})\/(\d{4})/);if(a){const[,l,i,o]=a;return`${o}-${l.padStart(2,"0")}-${i.padStart(2,"0")}`}}return""},Z8=t=>{if(!t)return"";if(t instanceof Date){const r=t.toISOString().match(/^(\d{4})-(\d{2})-(\d{2})/);if(r)return`${r[1]}-${r[2]}-${r[3]}`}if(typeof t=="string"){const s=t.trim();if(!s)return"";const r=s.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(r)return`${r[1]}-${r[2]}-${r[3]}`;const n=s.match(/^(\d{4})-(\d{2})-(\d{2})/);if(n)return`${n[1]}-${n[2]}-${n[3]}`}return Qu(t)},Ns=t=>{if(!t||typeof t!="string")return 0;const[s,r]=t.split(":").map(Number);return s*60+r},nu=(t,s)=>!t||!s?[null,null]:[Ns(t),Ns(s)],Ca=(t,s,r)=>{if(!t||s==null||r===null||r===void 0)return!1;const n=Ns(t);return n>=s&&n<=r},ux=(t,s,r,n)=>{if(!t||t.length===0)return{remarks:"",locators:[]};const a=r!=null?String(r):null,l=n!=null?String(n):null,i=t.filter(c=>{if(Rs(c.locatordate||c.LOCDATE)!==s||fr(c.locstatus||c.LOCSTATUS)!=="Approved")return!1;const u=l&&c.emp_objid!==void 0&&c.emp_objid!==null&&String(c.emp_objid)===l,p=a&&c.LOCUSERID!==void 0&&c.LOCUSERID!==null&&String(c.LOCUSERID)===a;return u||p});return{remarks:i.map(c=>`Locator (${c.LOCNO||c.locatorno||c.loc_no||"N/A"})`).filter(Boolean).join("; "),locators:i}},Q2=(t,s,r,n)=>{if(console.log(" [LEAVE REMARKS] getLeaveRemarksForDate called with:",{dateStr:s,userId:r,employeeObjId:n,leaveDataLength:t==null?void 0:t.length}),!t||t.length===0)return console.log(" [LEAVE REMARKS] No leave data available"),{remarks:"",leaveRecords:[]};const a=t.filter(o=>{if(fr(o.leavestatus||o.LEAVESTATUS||o.status)!=="Approved")return!1;if(o.leaveDates&&o.leaveDates.length>0&&o.leaveDates.some(g=>{const y=Rs(g.LEAVEDATE)===s,v=fi(o,r,n);return y&&v}))return console.log(" [LEAVE REMARKS] Found matching leave (new structure):",{leaveRefNo:o.LEAVEREFNO,leaveType:o.LeaveName,remarks:o.LEAVEREMARKS}),!0;const d=Rs(o.LEAVEDATE),m=d===s,u=fi(o,r,n);return console.log(" [LEAVE REMARKS] Checking leave (old structure):",{leaveDate:d,targetDate:s,leaveUserId:o.USERID,targetUserId:r,dateMatch:m,matchesEmployee:u,leaveType:o.LeaveName,leaveRefNo:o.LEAVEREFNO}),m&&u});if(a.length===0)return console.log(" [LEAVE REMARKS] No leaves found for date and user"),{remarks:"",leaveRecords:[]};const l=a.map(o=>({...o,type:"leave"})),i=l.map(o=>`Leave (${o.LEAVEREFNO||o.leaveno||"N/A"})`).join("; ");return console.log(" [LEAVE REMARKS] Final result:",{remarks:i,leaveRecords:l}),{remarks:i,leaveRecords:l}},J8=t=>{if(!t)return"";if(typeof t=="string"){const s=t.trim();if(/^\d{4}-\d{2}-\d{2}$/.test(s))return s;const r=s.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(r){const[,n,a,l]=r;return`${l}-${n.padStart(2,"0")}-${a.padStart(2,"0")}`}return Rs(s)}return Rs(t)},Z2=t=>{const s=new Set;if(!t)return s;const r=n=>{const a=J8(n);a&&s.add(a)};return Array.isArray(t.travelDates)&&t.travelDates.forEach(n=>{r(n&&typeof n=="object"?n.TRAVELDATE||n.traveldate:n)}),Array.isArray(t.travel_dates_array)&&t.travel_dates_array.forEach(r),Array.isArray(t.normalizedTravelDates)&&t.normalizedTravelDates.forEach(r),typeof t.travel_dates=="string"&&t.travel_dates.split(",").forEach(n=>r(n)),t.traveldate&&r(t.traveldate),t.TRAVELDATE&&r(t.TRAVELDATE),s},X8=t=>!t||typeof t!="string"?[]:t.split("|").map(s=>{var r;return(r=s.split(":")[0])==null?void 0:r.trim()}).filter(Boolean),J2=(t,s,r)=>{const n=s?String(s):null,a=r?String(r):null;return!!(n&&(t.emp_objid&&String(t.emp_objid)===n||t.employee_objid&&String(t.employee_objid)===n||t.EMP_OBJID&&String(t.EMP_OBJID)===n||Array.isArray(t.employees)&&t.employees.some(i=>String(i==null?void 0:i.objid)===n)||Array.isArray(t.participantEmpObjIds)&&t.participantEmpObjIds.some(i=>String(i)===n)||X8(t.employees_data).some(i=>String(i)===n))||a&&(t.USERID&&String(t.USERID)===a||t.createdby&&String(t.createdby)===a||Array.isArray(t.participantUserIds)&&t.participantUserIds.some(l=>String(l)===a)))},X2=(t,s,r,n)=>{if(!Array.isArray(t)||t.length===0)return{remarks:"",travelRecords:[]};const a=t.filter(o=>fr(o.travelstatus||o.status||o.TRAVELSTATUS)!=="Approved"||!J2(o,n,r)?!1:Z2(o).has(s));if(a.length===0)return{remarks:"",travelRecords:[]};const l=a.map(o=>({...o,type:"travel"}));return{remarks:l.map(o=>`Travel (${o.travelno||o.TRAVELNO||o.cdono||"N/A"})`).join("; "),travelRecords:l}},ml=t=>{if(!t)return"";const s=[t.HOLIDAYDATE,t.holidaydate,t.holiday_date,t.HolidayDate,t.date];for(const r of s)if(r){t.holidayname&&t.holidayname.includes("Christmas")&&console.log(" [HOLIDAY DATE DEBUG] Raw date value:",{holidayName:t.holidayname,rawValue:r,valueType:typeof r,isDate:r instanceof Date,valueString:String(r),valueISO:r instanceof Date?r.toISOString():"N/A"});const n=Z8(r);if(n)return t.holidayname&&t.holidayname.includes("Christmas")&&console.log(" [HOLIDAY DATE DEBUG] Normalized date:",{holidayName:t.holidayname,normalized:n}),n}return""},ja=t=>{if(!t)return"Holiday";const s=[t.HOLIDAYNAME,t.holidayname,t.holiday_name,t.HolidayName,t.description,t.name];for(const r of s)if(r&&String(r).trim()!=="")return String(r).trim();return"Holiday"},Un=t=>{const s=(t==null?void 0:t.ISRECURRING)??(t==null?void 0:t.isRecurring)??(t==null?void 0:t.is_recurring)??(t==null?void 0:t.isrecurring)??(t==null?void 0:t.recurring)??(t==null?void 0:t.IS_RECURRING);if(s==null)return!1;if(typeof s=="boolean")return s;if(typeof s=="number")return s===1;const r=String(s).trim().toLowerCase();return r?r==="1"||r==="true"||r==="yes"||r==="y":!1},eF=(t,s)=>{if(!t||t.length===0||!s)return[];const r=Qu(s);if(!r||r.length<10)return console.log(" [HOLIDAY DEBUG] Invalid targetDate:",{dateStr:s,targetDate:r}),[];const n=r.slice(5,10);console.log(" [HOLIDAY DEBUG] getHolidaysForDate called:",{dateStr:s,targetDate:r,targetMonthDay:n,totalHolidays:t.length,recurringHolidays:t.filter(l=>Un(l)).length});const a=t.filter(l=>{const i=l.HOLIDAYDATE||l.holidaydate||l.holiday_date||l.HolidayDate||l.date||"",o=ml(l);if(!o||o.length<10)return console.log(" [HOLIDAY DEBUG] Invalid holidayDate:",{holidayName:ja(l),rawHolidayDate:i,holidayDate:o}),!1;const c=Un(l);if(console.log(" [HOLIDAY DEBUG] Checking holiday:",{holidayName:ja(l),isRecurring:c,rawHolidayDate:i instanceof Date?i.toISOString():i,normalizedHolidayDate:o}),c){let d="";if(i){let u="";if(i instanceof Date){const g=i.getUTCFullYear(),j=String(i.getUTCMonth()+1).padStart(2,"0"),y=String(i.getUTCDate()).padStart(2,"0");u=`${g}-${j}-${y}`}else u=String(i).trim();const p=u.match(/^(\d{4})-(\d{2})-(\d{2})/);p?d=`${p[2]}-${p[3]}`:d=o.slice(5,10)}else d=o.slice(5,10);const m=d===n;return m?console.log(" [HOLIDAY DEBUG] Recurring holiday match:",{holidayName:ja(l),rawHolidayDate:i,normalizedHolidayDate:o,holidayMonthDay:d,targetDate:r,targetMonthDay:n}):console.log(" [HOLIDAY DEBUG] Recurring holiday no match:",{holidayName:ja(l),rawHolidayDate:i,normalizedHolidayDate:o,holidayMonthDay:d,targetDate:r,targetMonthDay:n}),m}return o===r});if(a.length===0){const l=t.filter(i=>Un(i));l.length>0&&console.log(" [HOLIDAY DEBUG] No holidays found for date:",{dateStr:s,targetDate:r,targetMonthDay:n,totalHolidays:t.length,recurringHolidaysCount:l.length,recurringHolidays:l.map(i=>{const o=i.HOLIDAYDATE||i.holidaydate||i.holiday_date||i.HolidayDate||i.date||"",c=ml(i);let d="";if(o){let m="";if(o instanceof Date){const p=o.getUTCFullYear(),g=String(o.getUTCMonth()+1).padStart(2,"0"),j=String(o.getUTCDate()).padStart(2,"0");m=`${p}-${g}-${j}`}else m=String(o).trim();const u=m.match(/^(\d{4})-(\d{2})-(\d{2})/);u?d=`${u[2]}-${u[3]}`:d=(c==null?void 0:c.slice(5,10))||"N/A"}else d=(c==null?void 0:c.slice(5,10))||"N/A";return{name:ja(i),rawDate:o instanceof Date?o.toISOString():o,normalizedDate:c,monthDay:d}})})}return a},tF=(t,s)=>{console.log(" [HOLIDAY DISPLAY] getHolidayDisplayForDate called:",{dateStr:s,holidayDataLength:(t==null?void 0:t.length)||0,holidayDataExists:!!t});const r=eF(t,s);if(console.log(" [HOLIDAY DISPLAY] Matching holidays found:",{dateStr:s,matchingCount:r.length,matchingHolidays:r.map(l=>({name:ja(l),date:ml(l),isRecurring:Un(l)}))}),r.length===0)return null;const n=r.map(ja).filter(Boolean),a=n.some(l=>typeof l=="string"&&l.toLowerCase().includes("work suspension"));return{records:r,names:n,display:a?"Work Suspension":n.join(", "),hasWorkSuspension:a}},mx=(t,s)=>{if(!t||!s)return{remarks:"",records:[]};const r=EN(t,s);if(!r||r.length===0)return{remarks:"",records:[]};const n=new Set,a=[];return r.forEach(l=>{if(!l)return;const o=`CDO(${l.displayRef||l.cdono||"CDO"})`;n.has(o)||(n.add(o),a.push(o))}),{remarks:a.join("; "),records:r}},Zu=(t,s,r)=>{if(!t||t.length===0||!s)return{fixLog:null,remarks:""};const n=r!=null?String(r):null,a=t.filter(d=>{if(Rs(d.checktimedate||d.CHECKTIMEDATE)!==s)return!1;const u=fr(d.fixstatus||d.FIXSTATUS);if(u!=="Approved"&&u!=="For Approval")return!1;const p=n&&d.emp_objid!==void 0&&d.emp_objid!==null&&String(d.emp_objid)===n;return!n||p});if(a.length===0)return{fixLog:null,remarks:""};const i=a.find(d=>fr(d.fixstatus||d.FIXSTATUS)==="Approved")||a[0],o=fr(i.fixstatus||i.FIXSTATUS);let c="";return o==="Approved"?c="LogsFixed":o==="For Approval"&&(c="FixOnProcess"),{fixLog:i,remarks:c}},ew=(t,s,r)=>{const{remarks:n}=Zu(t,s,r);return n},sF=(t,s,r,n,a,l,i)=>{if(!t)return{hasRemarks:!1,remarksText:""};const o=ux(n,t,s,r),c=Q2(a,t,s,r),d=X2(l,t,s,r),m=mx(i,t),u=o.locators&&o.locators.some(v=>{const h=fr(v.locstatus||v.LOCSTATUS);return h==="Approved"||h==="For Approval"}),p=c.leaveRecords&&c.leaveRecords.some(v=>{const h=fr(v.leavestatus||v.LEAVESTATUS||v.status);return h==="Approved"||h==="For Approval"}),g=d.travelRecords&&d.travelRecords.some(v=>{const h=fr(v.travelstatus||v.TRAVELSTATUS||v.status);return h==="Approved"||h==="For Approval"}),j=m.records&&m.records.length>0,y=[];return u&&o.remarks&&y.push(o.remarks),p&&c.remarks&&y.push(c.remarks),g&&d.remarks&&y.push(d.remarks),j&&m.remarks&&y.push(m.remarks),{hasRemarks:u||p||g||j,remarksText:y.join("; ")}},rF=({isOpen:t,onClose:s,leave:r,employees:n})=>{if(!t||!r)return null;const a=b=>{if(!b)return"";const w=String(b).trim();if(/^\d{4}-\d{2}-\d{2}$/.test(w)){const[S,C,T]=w.split("-");return`${C}/${T}/${S}`}if(/^\d{2}\/\d{2}\/\d{4}$/.test(w))return w;const D=new Date(w);if(!Number.isNaN(D.getTime())){const S=D.getFullYear(),C=String(D.getMonth()+1).padStart(2,"0"),T=String(D.getDate()).padStart(2,"0");return`${C}/${T}/${S}`}return w},l=()=>{const b=new Set;if(Array.isArray(r.leaveDates)&&r.leaveDates.length>0&&r.leaveDates.forEach(w=>{const D=(w==null?void 0:w.LEAVEDATE)||(w==null?void 0:w.leavedate)||w;D&&b.add(a(D))}),Array.isArray(r.details)&&r.details.length>0&&r.details.forEach(w=>{const D=(w==null?void 0:w.deducteddate)||(w==null?void 0:w.leavedate)||w;D&&b.add(a(D))}),typeof r.inclusivedates=="string"&&r.inclusivedates.trim()!==""&&r.inclusivedates.split(",").forEach(w=>{const D=w.trim();D&&b.add(a(D))}),b.size===0){const w=r.LEAVEDATE||r.leavedate||r.leaveDate||null;w&&b.add(a(w))}return Array.from(b)},i=r.leaveno||r.LEAVEREFNO||r.leaverefno||"N/A",o=r.leave_type_name||r.LeaveName||r.leavetype||"N/A",c=r.deductmode||r.mode||"N/A",d=fr(r.leavestatus||r.LEAVESTATUS||r.status),m=r.leavepurpose||r.LEAVEREMARKS||r.leaveremarks||"No purpose provided",u=r.inclusivedates||r.LEAVEDAYS||r.leaveDays||r.leavecredits||"N/A",p=getEmployeeNameForLocator(r.USERID||r.userid||r.user_id,n),g=r.created_by_employee_name||r.created_by_username||r.createdbyname||"N/A",j=r.approved_by_employee_name||r.approved_by_username||r.approvedbyname||"N/A",y=r.createddate||r.createdDate||r.created_at||null,v=r.approveddate||r.approvedDate||null,h=l(),f=b=>{if(!b)return"N/A";const w=new Date(b);return Number.isNaN(w.getTime())?a(b):a(w.toISOString().split("T")[0])},N=(()=>{switch(d){case"For Approval":return"bg-yellow-100 text-yellow-800";case"Approved":return"bg-green-100 text-green-800";case"Returned":return"bg-blue-100 text-blue-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})();return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Leave Information"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Reference Number: ",i]})]}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-3xl font-bold leading-none",children:""})]}),e.jsxs("div",{className:"px-6 py-6 space-y-8",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Employee"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:p||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Leave Type"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:o})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Mode"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:c})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-semibold ${N}`,children:d||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Leave Days / Credits"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:typeof u=="number"?u:String(u).trim()||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Created Date"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:y?f(y):"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Approved Date"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:v?f(v):"N/A"})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Inclusive Dates"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg min-h-[80px] text-gray-900",children:h.length>0?h.join(", "):"N/A"})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Reason / Purpose"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg min-h-[100px] text-gray-900 whitespace-pre-wrap",children:m})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Audit Trail"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Created By"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:g})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Approved By"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:j})]})]})]})]}),e.jsx("div",{className:"bg-gray-100 px-6 py-4 border-t border-gray-200 flex justify-end",children:e.jsx("button",{onClick:s,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 font-medium",children:"Close"})})]})})};function nF({isOpen:t,onClose:s,cdo:r}){if(!t||!r)return null;const n=b=>b==null?"N/A":String(b).trim()||"N/A",a=n(r.cdono||r.displayRef),l=n(r.entryStatus||"Approved"),i=n(r.date||r.cdodate),o=n(r.cdoTitle),c=n(r.cdoPurpose),d=n(r.cdoDescription),m=n(r.cdoRemarks),u=n(r.entryReason),p=n(r.employeeName),g=n(r.department),j=n(r.position),y=n(r.creditsEarned),v=n(r.creditsUsed),h=n(r.creditsUsedTotal),f=n(r.createdByName),N=n(r.approverName);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"CDO Information"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Reference: ",a]})]}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-3xl font-bold leading-none",children:""})]}),e.jsxs("div",{className:"px-6 py-6 space-y-8",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Employee"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:p})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Department"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:g})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Position"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:j})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Status"}),e.jsx("span",{className:"inline-flex px-3 py-1 rounded-full text-sm font-semibold bg-teal-100 text-teal-800",children:l})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"CDO Date"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:i})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"CDO Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Title"}),e.jsx("span",{className:"text-base text-gray-900",children:o})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Purpose"}),e.jsx("span",{className:"text-base text-gray-900 whitespace-pre-wrap",children:c})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Reason / Remarks"}),e.jsx("span",{className:"text-base text-gray-900 whitespace-pre-wrap",children:u!=="N/A"?u:m})]}),d!=="N/A"&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Description"}),e.jsx("span",{className:"text-base text-gray-900 whitespace-pre-wrap",children:d})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Credits"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-teal-700 mb-1",children:"Earned"}),e.jsx("span",{className:"text-lg font-semibold text-teal-900",children:y})]}),e.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-teal-700 mb-1",children:"Used (Entry)"}),e.jsx("span",{className:"text-lg font-semibold text-teal-900",children:v})]}),e.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-teal-700 mb-1",children:"Total Used"}),e.jsx("span",{className:"text-lg font-semibold text-teal-900",children:h})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"System Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Filed By"}),e.jsx("span",{className:"text-base text-gray-900",children:f})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Approved By"}),e.jsx("span",{className:"text-base text-gray-900",children:N})]})]})]})]}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 rounded-b-lg border-t border-gray-200 flex justify-end",children:e.jsx("button",{onClick:s,className:"px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors duration-200 font-medium",children:"Close"})})]})})}const aF=(t,s,r,n)=>au(t,s,r,n),fi=(t,s,r)=>{const n=r!=null?String(r):null,a=s!=null?String(s):null;return!!(n&&t.emp_objid!==void 0&&t.emp_objid!==null&&String(t.emp_objid)===n||a&&t.USERID!==void 0&&t.USERID!==null&&String(t.USERID)===a)},Ip=(t,s,r,n)=>!t||t.length===0?(console.log(" [HAS LEAVE] No leave data available"),!1):t.some(a=>{if(fr(a.leavestatus||a.LEAVESTATUS||a.status)!=="Approved")return!1;if(a.leaveDates&&a.leaveDates.length>0&&a.leaveDates.some(d=>{const u=Rs(d.LEAVEDATE)===s,p=fi(a,r,n);return u&&p}))return!0;const i=Rs(a.LEAVEDATE),o=fi(a,r,n);return i===s&&o}),lF=(t,s,r,n)=>!t||t.length===0?!1:t.some(a=>{if(a.leaveDates&&a.leaveDates.length>0&&a.leaveDates.some(d=>{const u=Rs(d.LEAVEDATE)===s,p=fi(a,r,n),g=a.LeaveName&&a.LeaveName.toLowerCase().includes("ob");return u&&p&&g}))return!0;const l=Rs(a.LEAVEDATE),i=a.LeaveName&&a.LeaveName.toLowerCase().includes("ob"),o=fi(a,r,n);return l===s&&o&&i}),au=(t,s,r,n)=>!Array.isArray(t)||t.length===0?!1:t.some(a=>fr(a.travelstatus||a.status||a.TRAVELSTATUS)!=="Approved"||!J2(a,n,r)?!1:Z2(a).has(s)),iF=t=>{const s=(t==null?void 0:t.assignedShifts)||[],r=n=>{const a=s.find(i=>(i.shiftMode||i.period||"").toUpperCase()===n),l=a==null?void 0:a.credits;return l!=null?Number(l):0};return{AM:r("AM"),PM:r("PM"),AMPM:r("AMPM")}},oF=(t,s,r,n,a=null)=>{const l=a?dx(a):{hasAMCheckIn:!1,hasAMCheckOut:!1,hasPMCheckIn:!1,hasPMCheckOut:!1},i=iF(a),o=l.hasAMCheckIn&&t&&t.trim()!=="",c=l.hasAMCheckOut&&s&&s.trim()!=="",d=l.hasPMCheckIn&&r&&r.trim()!=="",m=l.hasPMCheckOut&&n&&n.trim()!=="";if(l.hasAMCheckIn&&l.hasPMCheckOut&&!l.hasAMCheckOut&&!l.hasPMCheckIn){const h=Number(i.AMPM)||0,f=o?h/2:0,N=m?h/2:0;return Number((f+N).toFixed(2))}let p=0;const g=Number(i.AM)||0,j=Number(i.PM)||0,y=o&&c,v=d&&m;return o&&!c&&v||y&&!d&&m?(p=g+j,Number(p.toFixed(2))):!o&&c&&v||y&&d&&!m?(p=(g+j)/2,Number(p.toFixed(2))):o&&!c&&!d&&m?(p=g+j,Number(p.toFixed(2))):(y&&(p+=g),v&&(p+=j),Number(p.toFixed(2)))},cF=(t,s,r,n,a,l,i,o,c,d,m=null,u=null,p=null,g=null)=>{const j=G2(a),y=d&&d.length>0&&(()=>{const h=Qu(a);if(!h||h.length<10)return!1;const f=h.slice(5,10);return d.some(N=>{const b=N.HOLIDAYDATE||N.holidaydate||N.holiday_date||N.HolidayDate||N.date||"",w=ml(N);if(!w||w.length<10)return!1;if(Un(N)){let D="";if(b){let S="";if(b instanceof Date){const T=b.getUTCFullYear(),_=String(b.getUTCMonth()+1).padStart(2,"0"),E=String(b.getUTCDate()).padStart(2,"0");S=`${T}-${_}-${E}`}else S=String(b).trim();const C=S.match(/^(\d{4})-(\d{2})-(\d{2})/);C?D=`${C[2]}-${C[3]}`:D=w.slice(5,10)}else D=w.slice(5,10);return D===f}return w===h})})();if(aF(c,a,l,i))return 1;if(u){const h=mx(u,a);if(h.records&&h.records.length>0)return 1}if(p&&i){const{fixLog:h}=Zu(p,a,i);if(h&&fr(h.fixstatus||h.FIXSTATUS)==="Approved")return 1}if(g&&l&&i){const h=ux(g,a,l,i);if(h.locators&&h.locators.some(N=>fr(N.locstatus||N.LOCSTATUS)==="Approved"))return 1}const v=oF(t,s,r,n,m);return(j||y)&&v===0?0:Number(v)||0},dF=(t,s)=>{if(!t||!s)return[];const r=p=>String(p).padStart(2,"0"),n=p=>{const[g,j,y]=p.split("-").map(Number);return{year:g,month:j,day:y}},a=(p,g)=>new Date(Date.UTC(p,g,0)).getUTCDate(),l=n(t),i=n(s);if(!l.year||!i.year)return[];const o=[];let{year:c,month:d,day:m}=l;const u=()=>c<i.year?!0:c>i.year?!1:d<i.month?!0:d>i.month?!1:m<=i.day;for(;u();)o.push(`${c}-${r(d)}-${r(m)}`),m+=1,m>a(c,d)&&(m=1,d+=1,d>12&&(d=1,c+=1));return o},Fc=[{header:"DATE",field:"DATE"},{header:"AM-CHECKIN",field:"AM_CHECKIN"},{header:"AM-CHECKOUT",field:"AM_CHECKOUT"},{header:"PM-CHECKIN",field:"PM_CHECKIN"},{header:"PM-CHECKOUT",field:"PM_CHECKOUT"},{header:"LATE",field:"LATE"},{header:"DAYS",field:"DAYS"},{header:"REMARKS",field:"REMARKS"},{header:"ACTION",field:"ACTION"}];function uF(t,s,r,n,a,l,i,o,c,d,m,u){if(!s)return console.log(" No shift schedule found for processing"),[];const p=dx(s),g=(E,A,L,F,W)=>{if(!W)return[null,null];const Y=E?ss(E):null,q=A?ss(A):null;return Y&&q?nu(Y,q):L&&F?nu(L,F):[null,null]},[j,y]=g(s.SHIFT_AMCHECKIN_START,s.SHIFT_AMCHECKIN_END,"04:00","11:59",p.hasAMCheckIn),[v,h]=g(s.SHIFT_AMCHECKOUT_START,s.SHIFT_AMCHECKOUT_END,"11:00","12:30",p.hasAMCheckOut),[f,N]=g(s.SHIFT_PMCHECKIN_START,s.SHIFT_PMCHECKIN_END,"12:31","14:00",p.hasPMCheckIn),[b,w]=g(s.SHIFT_PMCHECKOUT_START,s.SHIFT_PMCHECKOUT_END,"14:01","23:59",p.hasPMCheckOut);console.log(" Time windows (minutes):",{amCheckInStartMin:j,amCheckInEndMin:y,amCheckOutStartMin:v,amCheckOutEndMin:h,pmCheckInStartMin:f,pmCheckInEndMin:N,pmCheckOutStartMin:b,pmCheckOutEndMin:w});const D={},S=i||{};t.forEach(E=>{const A=Rs(E.CHECKTIME||E.DATE||E.date);A&&(D[A]||(D[A]=[]),D[A].push(E))});const T=dF(d,m).map(E=>{const A=D[E]||[];let L="";if(p.hasAMCheckIn&&j!==null&&y!==null){const Ie=A.filter(ge=>{const Ge=ss(ge.CHECKTIME||ge.DATE||ge.date);return Ge&&Ca(Ge,j,y)}).sort((ge,Ge)=>Ns(ss(ge.CHECKTIME||ge.DATE||ge.date))-Ns(ss(Ge.CHECKTIME||Ge.DATE||Ge.date)));Ie.length>0&&(L=ss(Ie[0].CHECKTIME||Ie[0].DATE||Ie[0].date))}let F="";if(p.hasAMCheckOut&&v!==null&&h!==null){const Ie=A.filter(ge=>{const Ge=ss(ge.CHECKTIME||ge.DATE||ge.date);return Ge&&Ca(Ge,v,h)}).sort((ge,Ge)=>Ns(ss(ge.CHECKTIME||ge.DATE||ge.date))-Ns(ss(Ge.CHECKTIME||Ge.DATE||Ge.date)));Ie.length>0&&(F=ss(Ie[0].CHECKTIME||Ie[0].DATE||Ie[0].date))}let W="";if(p.hasPMCheckIn&&f!==null&&N!==null){const Ie=A.filter(ge=>{const Ge=ss(ge.CHECKTIME||ge.DATE||ge.date);return Ge&&Ca(Ge,f,N)}).sort((ge,Ge)=>Ns(ss(ge.CHECKTIME||ge.DATE||ge.date))-Ns(ss(Ge.CHECKTIME||Ge.DATE||Ge.date)));Ie.length>0&&(W=ss(Ie[0].CHECKTIME||Ie[0].DATE||Ie[0].date))}let Y="";if(p.hasPMCheckOut&&b!==null&&w!==null){const Ie=A.map(ge=>({...ge,_time:ss(ge.CHECKTIME||ge.DATE||ge.date),_date:Rs(ge.CHECKTIME||ge.DATE||ge.date)})).filter(ge=>ge._time&&Ca(ge._time,b,w)&&ge._date===E).sort((ge,Ge)=>Ns(Ge._time)-Ns(ge._time));Ie.length>0&&(Y=Ie[0]._time)}let q=0;if(p.hasAMCheckIn&&L&&s.SHIFT_AMCHECKIN){const Ie=Ns(ss(s.SHIFT_AMCHECKIN)),ge=Ns(L);ge>Ie&&(q+=ge-Ie)}if(p.hasPMCheckIn&&W&&s.SHIFT_PMCHECKIN){const Ie=Ns(ss(s.SHIFT_PMCHECKIN)),ge=Ns(W);ge>Ie&&(q+=ge-Ie)}if(p.hasAMCheckOut&&F&&s.SHIFT_AMCHECKOUT){const Ie=Ns(ss(s.SHIFT_AMCHECKOUT)),ge=Ns(F);if(ge<Ie){const Ge=Ie-ge;q+=Ge}}if(p.hasPMCheckOut&&Y&&s.SHIFT_PMCHECKOUT){const Ie=Ns(ss(s.SHIFT_PMCHECKOUT)),ge=Ns(Y);if(ge<Ie){const Ge=Ie-ge;q+=Ge}}const J=Number(cF(L,F,W,Y,E,o,c,n,a,l,s,S,u,r))||0,O=new Date(E),M=G2(E),k=Ip(n,E,o,c),I=au(a,E,o,c),K=ux(r,E,o,c),z=Q2(n,E,o,c),P=X2(a,E,o,c),R=mx(S,E),B=R.records||[],U=R.remarks||"",G=B.length>0,$=tF(l,E),X=($==null?void 0:$.records)||[],Q=($==null?void 0:$.names)||[],Ne=($==null?void 0:$.display)||"",V=!!($!=null&&$.hasWorkSuspension),re=Q.length>0,ne=[],xe=[L,F,W,Y].filter(Ie=>Ie&&Ie.trim()!=="").length,me=new Date;me.setHours(0,0,0,0);const Z=new Date(E);Z.setHours(0,0,0,0);const ee=Z>me,ye=Z.getTime()===me.getTime();console.log(" [ABSENT DEBUG] Processing date:",E,{hasLeave:k,hasTravel:I,hasHoliday:re,timeLogCount:xe,isFutureDate:ee,isCurrentDate:ye,currentDate:Z.toDateString(),today:me.toDateString(),timeLogs:{AM_CHECKIN:L||"empty",AM_CHECKOUT:F||"empty",PM_CHECKIN:W||"empty",PM_CHECKOUT:Y||"empty"}}),M?(ne.push("Weekend"),console.log(' [ABSENT DEBUG] Weekend detected, added "Weekend" remark')):(console.log(" [ABSENT DEBUG] Weekday analysis:",{timeLogCount:xe,hasLeave:k,hasTravel:I,hasHoliday:re,isFutureDate:ee,isCurrentDate:ye,currentDate:Z.toDateString(),today:me.toDateString(),timeLogs:{AM_CHECKIN:L||"empty",AM_CHECKOUT:F||"empty",PM_CHECKIN:W||"empty",PM_CHECKOUT:Y||"empty"}}),!k&&!I&&!re&&xe===0&&!ee&&!ye?(ne.push("Absent"),console.log(' [ABSENT DEBUG] ABSENT CONDITION MET - Added "Absent" remark')):console.log(" [ABSENT DEBUG] Absent condition NOT met:",{hasLeave:k?"YES - has leave":"NO",hasTravel:I?"YES - has travel":"NO",hasHoliday:re?"YES - has holiday":"NO",timeLogCount:`${xe} logs (need 0 for absent)`,isFutureDate:ee?"YES - future date":"NO",isCurrentDate:ye?"YES - current date":"NO",condition:`!hasLeave(${!k}) && !hasTravel(${!I}) && !hasHoliday(${!re}) && timeLogCount===0(${xe===0}) && !isFutureDate(${!ee}) && !isCurrentDate(${!ye})`})),console.log(" [ABSENT DEBUG] Final staticRemarks:",ne);const ve=[K.remarks,z.remarks,P.remarks,U].filter(Boolean),we=ve.length>0?"":ew(u,E,c),De=[...ne,...ve];we&&De.push(we),console.log(" [ABSENT DEBUG] Remarks combination for date",E,{staticRemarks:ne,dynamicRemarks:{locator:K.remarks||"empty",leave:z.remarks||"empty",travel:P.remarks||"empty",cdo:U||"empty"},allRemarks:De});let le="";return De.length>0&&(le=De.join("; ")),console.log(" [ABSENT DEBUG] Final remarks for date",E,":",le),console.log(" [ABSENT DEBUG] Leave/Travel check for date",E,{hasLeave:k,hasTravel:I,leaveDataLength:n==null?void 0:n.length,travelDataLength:a==null?void 0:a.length}),console.log(" [ABSENT DEBUG] Weekday analysis:",{date:E,timeLogCount:xe,hasLeave:k,hasTravel:I,hasHoliday:re,isFutureDate:O>me,currentDateObj:O,todayObj:me,currentDateString:O.toDateString(),todayString:me.toDateString(),comparison:`${O.getTime()} > ${me.getTime()} = ${O>me}`,timeLogs:{AM_CHECKIN:L||"empty",AM_CHECKOUT:F||"empty",PM_CHECKIN:W||"empty",PM_CHECKOUT:Y||"empty"}}),{DATE:Q8(E),DATE_RAW:E,AM_CHECKIN:L,AM_CHECKOUT:F,PM_CHECKIN:W,PM_CHECKOUT:Y,LATE:q,DAYS:J,REMARKS:le,REMARKS_DATA:{locatorRecords:K.locators||[],leaveRecords:z.leaveRecords||[],travelRecords:P.travelRecords||[],cdoRecords:B,holidayRecords:X,fixLogRecords:(()=>{const{fixLog:Ie}=Zu(u,E,c);return Ie?[Ie]:[]})()},isWeekend:M,hasHoliday:re,hasCdo:G,holidayNames:Q,holidayDisplay:Ne,cdoRemarks:U,hasWorkSuspension:V}}),_=xF(T,r,s);return gF(_,u,c)}const mF=t=>{if(console.log(" generateDepartureTimeOptions called with:",{shiftSchedule:t}),!t)return console.log(" No shift schedule, returning full 24 hours"),{hours:Array.from({length:24},(d,m)=>m.toString().padStart(2,"0")),minutes:Array.from({length:12},(d,m)=>(m*5).toString().padStart(2,"0"))};const s=t.SHIFT_AMCHECKIN_START||t.SHIFT_AMCHECKIN_START_TIME,r=t.SHIFT_PMCHECKOUT_END||t.SHIFT_PMCHECKOUT_END_TIME;if(console.log(" Departure time range:",{amCheckInStart:s,pmCheckOutEnd:r}),!s||!r)return console.log(" Missing time range, returning full 24 hours"),{hours:Array.from({length:24},(d,m)=>m.toString().padStart(2,"0")),minutes:Array.from({length:12},(d,m)=>(m*5).toString().padStart(2,"0"))};const n=ss(s),a=ss(r);if(console.log(" Extracted time strings:",{startTimeStr:n,endTimeStr:a}),!n||!a)return console.log(" Could not extract time strings, using full 24 hours"),{hours:Array.from({length:24},(d,m)=>m.toString().padStart(2,"0")),minutes:Array.from({length:12},(d,m)=>(m*5).toString().padStart(2,"0"))};const l=ru(n),i=ru(a);console.log(" Parsed hours for departure:",{startHour:l,endHour:i});const o=[];if(l<=i)for(let d=l;d<=i;d++)o.push(d.toString().padStart(2,"0"));else{for(let d=l;d<=23;d++)o.push(d.toString().padStart(2,"0"));for(let d=0;d<=i;d++)o.push(d.toString().padStart(2,"0"))}const c=Array.from({length:12},(d,m)=>(m*5).toString().padStart(2,"0"));return console.log(" Generated departure time options:",{hours:o,minutes:c}),{hours:o,minutes:c}},hF=t=>{if(console.log(" generateArrivalTimeOptions called with:",{shiftSchedule:t}),!t)return console.log(" No shift schedule, returning full 24 hours"),{hours:Array.from({length:24},(d,m)=>m.toString().padStart(2,"0")),minutes:Array.from({length:12},(d,m)=>(m*5).toString().padStart(2,"0"))};const s=t.SHIFT_AMCHECKIN_START||t.SHIFT_AMCHECKIN_START_TIME,r=t.SHIFT_PMCHECKOUT_END||t.SHIFT_PMCHECKOUT_END_TIME;if(console.log(" Arrival time range:",{amCheckInStart:s,pmCheckOutEnd:r}),!s||!r)return console.log(" Missing time range, returning full 24 hours"),{hours:Array.from({length:24},(d,m)=>m.toString().padStart(2,"0")),minutes:Array.from({length:12},(d,m)=>(m*5).toString().padStart(2,"0"))};const n=ss(s),a=ss(r);if(console.log(" Extracted time strings for arrival:",{startTimeStr:n,endTimeStr:a}),!n||!a)return console.log(" Could not extract time strings, using full 24 hours"),{hours:Array.from({length:24},(d,m)=>m.toString().padStart(2,"0")),minutes:Array.from({length:12},(d,m)=>(m*5).toString().padStart(2,"0"))};const l=ru(n),i=ru(a);console.log(" Parsed hours for arrival:",{startHour:l,endHour:i});const o=[];if(l<=i)for(let d=l;d<=i;d++)o.push(d.toString().padStart(2,"0"));else{for(let d=l;d<=23;d++)o.push(d.toString().padStart(2,"0"));for(let d=0;d<=i;d++)o.push(d.toString().padStart(2,"0"))}const c=Array.from({length:12},(d,m)=>(m*5).toString().padStart(2,"0"));return console.log(" Generated arrival time options:",{hours:o,minutes:c}),{hours:o,minutes:c}},pF=({isOpen:t,onClose:s,onSubmit:r,date:n,columnType:a,employee:l,shiftSchedule:i})=>{const[o,c]=x.useState({LOCNO:"",LOCUSERID:"",LOCDATE:"",LOCDESTINATION:"",LOCPURPOSE:"",LOCTIMEDEPARTURE:"",LOCTIMEARRIVAL:"",LOCENTRYBY:"1",LOCENTRYDATE:"",LOCSTATUS:"ACTIVE"}),[d,m]=x.useState(!1),[u,p]=x.useState({hours:Array.from({length:24},(Y,q)=>q.toString().padStart(2,"0")),minutes:Array.from({length:12},(Y,q)=>(q*5).toString().padStart(2,"0"))}),[g,j]=x.useState({hours:Array.from({length:24},(Y,q)=>q.toString().padStart(2,"0")),minutes:Array.from({length:12},(Y,q)=>(q*5).toString().padStart(2,"0"))}),[y,v]=x.useState(""),[h,f]=x.useState(null),[N,b]=x.useState(null),[w,D]=x.useState(!1),S=async(Y,q)=>{try{D(!0),console.log(" [LOCATOR FORM] Getting existing time logs for:",{userId:Y,locatorDate:q});const J=await oe.get("/dtr/logs/locator",{params:{userId:Y,date:q}});if(console.log(" [LOCATOR FORM] DTR logs response:",J.data),J.data&&J.data.length>0){const O=C(J.data,q,i);console.log(" [LOCATOR FORM] Processed logs:",O),b(O||null)}else console.log(" [LOCATOR FORM] No time logs found for this date"),b(null)}catch(J){console.error("Error getting existing time logs for locator:",J),b(null)}finally{D(!1)}},C=(Y,q,J)=>{if(!Y||Y.length===0)return null;console.log(" [LOCATOR FORM] Processing logs for date:",q),console.log(" [LOCATOR FORM] Raw logs:",Y),console.log(" [LOCATOR FORM] Shift schedule:",J);const O=Y.filter(re=>Rs(re.CHECKTIME||re.DATE||re.date)===q);if(O.length===0)return console.log(" [LOCATOR FORM] No logs found for date:",q),null;console.log(" [LOCATOR FORM] Logs for day:",O);const M=dx(J),k=(re,ne,xe,me,Z)=>{if(!Z)return[null,null];const ee=re?ss(re):null,ye=ne?ss(ne):null;return ee&&ye?nu(ee,ye):xe&&me?nu(xe,me):[null,null]},[I,K]=k(J==null?void 0:J.SHIFT_AMCHECKIN_START,J==null?void 0:J.SHIFT_AMCHECKIN_END,"04:00","11:59",M.hasAMCheckIn),[z,P]=k(J==null?void 0:J.SHIFT_AMCHECKOUT_START,J==null?void 0:J.SHIFT_AMCHECKOUT_END,"11:00","12:30",M.hasAMCheckOut),[R,B]=k(J==null?void 0:J.SHIFT_PMCHECKIN_START,J==null?void 0:J.SHIFT_PMCHECKIN_END,"12:31","14:00",M.hasPMCheckIn),[U,G]=k(J==null?void 0:J.SHIFT_PMCHECKOUT_START,J==null?void 0:J.SHIFT_PMCHECKOUT_END,"14:01","23:59",M.hasPMCheckOut);let $="";if(M.hasAMCheckIn&&I!==null&&K!==null){const re=O.filter(ne=>{const xe=ss(ne.CHECKTIME||ne.DATE||ne.date);return xe&&Ca(xe,I,K)}).sort((ne,xe)=>Ns(ss(ne.CHECKTIME||ne.DATE||ne.date))-Ns(ss(xe.CHECKTIME||xe.DATE||xe.date)));re.length>0&&($=ss(re[0].CHECKTIME||re[0].DATE||re[0].date))}let X="";if(M.hasAMCheckOut&&z!==null&&P!==null){const re=O.filter(ne=>{const xe=ss(ne.CHECKTIME||ne.DATE||ne.date);return xe&&Ca(xe,z,P)}).sort((ne,xe)=>Ns(ss(ne.CHECKTIME||ne.DATE||ne.date))-Ns(ss(xe.CHECKTIME||xe.DATE||xe.date)));re.length>0&&(X=ss(re[0].CHECKTIME||re[0].DATE||re[0].date))}let Q="";if(M.hasPMCheckIn&&R!==null&&B!==null){const re=O.filter(ne=>{const xe=ss(ne.CHECKTIME||ne.DATE||ne.date);return xe&&Ca(xe,R,B)}).sort((ne,xe)=>Ns(ss(ne.CHECKTIME||ne.DATE||ne.date))-Ns(ss(xe.CHECKTIME||xe.DATE||xe.date)));re.length>0&&(Q=ss(re[0].CHECKTIME||re[0].DATE||re[0].date))}let Ne="";if(M.hasPMCheckOut&&U!==null&&G!==null){const re=O.filter(ne=>{const xe=ss(ne.CHECKTIME||ne.DATE||ne.date);return xe&&Ca(xe,U,G)}).sort((ne,xe)=>Ns(ss(xe.CHECKTIME||xe.DATE||xe.date))-Ns(ss(ne.CHECKTIME||ne.DATE||ne.date)));re.length>0&&(Ne=ss(re[0].CHECKTIME||re[0].DATE||re[0].date))}const V={AM_CHECKIN:$,AM_CHECKOUT:X,PM_CHECKIN:Q,PM_CHECKOUT:Ne};return console.log(" [LOCATOR FORM] Final result:",V),V},T=async()=>{var Y,q,J;try{const O=new Date(n),M=O.getFullYear().toString().slice(-2),k=String(O.getMonth()+1).padStart(2,"0"),I=String(O.getDate()).padStart(2,"0"),K=`${M}${k}${I}`;console.log(" Generating locator number for:",{year:M,month:k,day:I,locatorDate:n}),console.log(" API call parameters:",{year:O.getFullYear(),month:O.getMonth()+1});const z=await oe.get("/locator/count",{params:{year:O.getFullYear(),month:O.getMonth()+1}});if(console.log(" Count response:",z),console.log(" Response data:",z.data),console.log(" Response status:",z.status),z.data&&z.data.success){const P=z.data.count||0,R=String(P+1).padStart(3,"0"),B=`${K}LE-${R}`;return console.log(` Generated locator number: ${B} (found ${P} existing records for ${M}-${k})`),B}else throw console.error(" API response not successful:",z.data),new Error(`API returned unsuccessful response: ${((Y=z.data)==null?void 0:Y.message)||"Unknown error"}`)}catch(O){console.error(" Error generating locator number:",O),console.error(" Error details:",(q=O.response)==null?void 0:q.data),console.error(" Error status:",(J=O.response)==null?void 0:J.status),console.error(" Error message:",O.message);const M=new Date(n),k=M.getFullYear().toString().slice(-2),I=String(M.getMonth()+1).padStart(2,"0"),K=String(M.getDate()).padStart(2,"0"),z=`${k}${I}${K}`,P=String(Math.floor(Date.now()/1e3)%1e3).padStart(3,"0"),R=`${z}LE-${P}`;return console.log(" Using fallback locator number:",R),R}};x.useEffect(()=>{if(console.log(" LocatorForm useEffect triggered:",{isOpen:t,employee:l,date:n,columnType:a,shiftSchedule:i}),t&&l&&n&&i){S(l.USERID,n);const Y=mF(i),q=hF(i);p(Y),j(q),console.log(" Generated time options for form:",{departureOptions:Y,arrivalOptions:q}),(async()=>{const O=await T();c({LOCNO:O,LOCUSERID:l.USERID,LOCDATE:n,LOCDESTINATION:"",LOCPURPOSE:"",LOCTIMEDEPARTURE:"",LOCTIMEARRIVAL:"",LOCENTRYBY:"1",LOCENTRYDATE:new Date().toISOString(),LOCSTATUS:"ACTIVE"})})(),v(""),f(null)}},[t,l,n,a,i]);const _=(Y,q)=>{c(J=>({...J,[Y]:q})),(Y==="LOCTIMEDEPARTURE"||Y==="LOCTIMEARRIVAL")&&v(""),f(null)},E=x.useCallback((Y,q,J)=>{const O=o[J]||"",[M,k]=O.split(":");let I=M||"",K=k||"";Y==="hours"?I=q:Y==="minutes"&&(K=q);let z="";I&&K?z=`${I}:${K}`:I?z=`${I}:`:K&&(z=`:${K}`),c(P=>({...P,[J]:z})),f(null)},[o]),A=x.useCallback(Y=>{if(!Y)return{hours:"",minutes:""};const[q,J]=Y.split(":");return{hours:q||"",minutes:J||""}},[]),L=async Y=>{if(Y.preventDefault(),!o.LOCUSERID){f("Employee is required.");return}if(!o.LOCDATE){f("Date is required.");return}if(!o.LOCDESTINATION){f("Destination is required.");return}if(!o.LOCPURPOSE){f("Purpose is required.");return}if(o.LOCTIMEDEPARTURE&&!/^\d{2}:\d{2}$/.test(o.LOCTIMEDEPARTURE)){v("Time departure must be in HH:MM format");return}if(o.LOCTIMEARRIVAL&&!/^\d{2}:\d{2}$/.test(o.LOCTIMEARRIVAL)){v("Time arrival must be in HH:MM format");return}m(!0),f(null),v("");const q={...o,LOCTIMEDEPARTURE:o.LOCTIMEDEPARTURE||null,LOCTIMEARRIVAL:o.LOCTIMEARRIVAL||null,LOCENTRYDATE:new Date().toISOString()};console.log(" Submitting locator data:",q);try{await r(q),s()}catch(J){console.error("Error saving locator entry:",J),f("Error saving locator entry")}finally{m(!1)}},F=A(o.LOCTIMEDEPARTURE),W=A(o.LOCTIMEARRIVAL);return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add Locator Entry"}),h&&e.jsx("div",{className:`mb-4 p-3 rounded-md ${h.includes("Error")||h.includes("already has")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:h}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("h4",{className:"text-md font-semibold text-blue-600 mb-3",children:["Existing Time Logs for ",n]}),w?e.jsx("div",{className:"text-center py-2",children:e.jsx("p",{className:"text-blue-500",children:"Loading time logs..."})}):N?e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-blue-600",children:"AM-CHECKIN"}),e.jsx("div",{className:"text-lg font-mono bg-white p-2 rounded border text-blue-600",children:N.AM_CHECKIN||"--:--"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-blue-600",children:"AM-CHECKOUT"}),e.jsx("div",{className:"text-lg font-mono bg-white p-2 rounded border text-blue-600",children:N.AM_CHECKOUT||"--:--"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-blue-600",children:"PM-CHECKIN"}),e.jsx("div",{className:"text-lg font-mono bg-white p-2 rounded border text-blue-600",children:N.PM_CHECKIN||"--:--"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-blue-600",children:"PM-CHECKOUT"}),e.jsx("div",{className:"text-lg font-mono bg-white p-2 rounded border text-blue-600",children:N.PM_CHECKOUT||"--:--"})]})]}):e.jsx("div",{className:"text-center py-2",children:e.jsx("p",{className:"text-blue-500",children:"No time logs found for this date"})})]}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Locator Number"}),e.jsx("input",{type:"text",value:o.LOCNO,onChange:Y=>_("LOCNO",Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",readOnly:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated: YY-MM-DD-seqno format"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Locator Date *"}),e.jsx("input",{type:"date",value:o.LOCDATE,onChange:Y=>_("LOCDATE",Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-700 cursor-not-allowed",readOnly:!0,required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically set based on selected row date"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee *"}),e.jsx("input",{type:"text",value:l?`${l.NAME} (${l.BADGENUMBER})`:"",className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-700 cursor-not-allowed",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination"}),e.jsx("textarea",{value:o.LOCDESTINATION,onChange:Y=>_("LOCDESTINATION",Y.target.value),placeholder:"Enter destination",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,maxLength:50}),e.jsx("div",{className:"mt-1 text-xs text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purpose"}),e.jsx("textarea",{value:o.LOCPURPOSE,onChange:Y=>_("LOCPURPOSE",Y.target.value),placeholder:"Enter purpose",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,maxLength:100}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[o.LOCPURPOSE.length,"/100 characters"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Departure"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"at"}),e.jsxs("select",{value:F.hours,onChange:Y=>E("hours",Y.target.value,"LOCTIMEDEPARTURE"),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"HH"}),u.hours.map(Y=>e.jsx("option",{value:Y,children:Y},Y))]}),e.jsx("span",{className:"text-gray-500",children:":"}),e.jsxs("select",{value:F.minutes,onChange:Y=>E("minutes",Y.target.value,"LOCTIMEDEPARTURE"),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"MM"}),u.minutes.map(Y=>e.jsx("option",{value:Y,children:Y},Y))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Arrival"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"at"}),e.jsxs("select",{value:W.hours,onChange:Y=>E("hours",Y.target.value,"LOCTIMEARRIVAL"),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"HH"}),g.hours.map(Y=>e.jsx("option",{value:Y,children:Y},Y))]}),e.jsx("span",{className:"text-gray-500",children:":"}),e.jsxs("select",{value:W.minutes,onChange:Y=>E("minutes",Y.target.value,"LOCTIMEARRIVAL"),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"MM"}),g.minutes.map(Y=>e.jsx("option",{value:Y,children:Y},Y))]})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Saving...":"Save Locator Entry"}),e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Cancel"})]})]})]})}):null},fr=t=>{if(!t)return"For Approval";const s=t.toString().trim();if(!s)return"For Approval";const r=s.toLowerCase();return r==="pending"||r==="for approval"?"For Approval":r==="approved"?"Approved":r==="returned"?"Returned":r==="cancelled"?"Cancelled":s.replace(/\b\w/g,n=>n.toUpperCase())},Ky=t=>{if(!t)return{date:"",time:"",minutes:null};const s=typeof t=="string"?t:String(t),r=Rs(s),n=io(s),a=n?Ns(n):null;return{date:r,time:n,minutes:a}},fF=(t,s)=>!Array.isArray(t)||!s?[]:t.filter(r=>fr(r.locstatus||r.LOCSTATUS)!=="Approved"?!1:Rs(r.locatordate||r.LOCDATE)===s).map(r=>{const n=r.loctimedeparture||r.locdeparture||r.LOCTIMEDEPARTURE,a=r.loctimearrival||r.locarrival||r.LOCTIMEARRIVAL,l=Ky(n),i=Ky(a);if(l.minutes===null&&i.minutes===null)return null;const o=Math.min(l.minutes??i.minutes??0,i.minutes??l.minutes??0),c=Math.max(l.minutes??i.minutes??0,i.minutes??l.minutes??0);return{raw:r,startMinutes:o,endMinutes:c,departureTime:l.time,arrivalTime:i.time}}).filter(Boolean),xF=(t,s,r)=>{if(!Array.isArray(t)||!s||!r)return t;const n={AM_CHECKIN:r.SHIFT_AMCHECKIN?Oc(r.SHIFT_AMCHECKIN):"",AM_CHECKOUT:r.SHIFT_AMCHECKOUT?Oc(r.SHIFT_AMCHECKOUT):"",PM_CHECKIN:r.SHIFT_PMCHECKIN?Oc(r.SHIFT_PMCHECKIN):"",PM_CHECKOUT:r.SHIFT_PMCHECKOUT?Oc(r.SHIFT_PMCHECKOUT):""},a={AM_CHECKIN:n.AM_CHECKIN?Ns(n.AM_CHECKIN):null,AM_CHECKOUT:n.AM_CHECKOUT?Ns(n.AM_CHECKOUT):null,PM_CHECKIN:n.PM_CHECKIN?Ns(n.PM_CHECKIN):null,PM_CHECKOUT:n.PM_CHECKOUT?Ns(n.PM_CHECKOUT):null},l=[{field:"AM_CHECKIN",scheduleKey:"AM_CHECKIN"},{field:"AM_CHECKOUT",scheduleKey:"AM_CHECKOUT"},{field:"PM_CHECKIN",scheduleKey:"PM_CHECKIN"},{field:"PM_CHECKOUT",scheduleKey:"PM_CHECKOUT"}];return t.map(i=>{if(!i||!i.DATE_RAW)return i;const o=fF(s,i.DATE_RAW);if(o.length===0)return i;const c={...i},d={...i.LOCATOR_BACKFILL||{}};return l.forEach(({field:m,scheduleKey:u})=>{const p=c[m],g=typeof p=="string"?p.trim():"",j=g!==""&&g!=="-",y=n[u],v=a[u];if(!y||v===null){d[m]=d[m]||!1;return}if(j){if(d[m]===!0)return;g===y?o.some(N=>N.startMinutes==null||N.endMinutes==null?!1:v>=N.startMinutes&&v<=N.endMinutes)?d[m]=!0:d[m]=d[m]||!1:d[m]=!1;return}o.some(f=>f.startMinutes==null||f.endMinutes==null?!1:v>=f.startMinutes&&v<=f.endMinutes)?(c[m]=y,d[m]=!0):d[m]=d[m]||!1}),c.LOCATOR_BACKFILL=d,c})},gF=(t,s,r)=>!Array.isArray(t)||!s||s.length===0?t:t.map(n=>{if(!n||!n.DATE_RAW||n.LOCATOR_BACKFILL&&(n.LOCATOR_BACKFILL.AM_CHECKIN||n.LOCATOR_BACKFILL.AM_CHECKOUT||n.LOCATOR_BACKFILL.PM_CHECKIN||n.LOCATOR_BACKFILL.PM_CHECKOUT))return n;const{fixLog:l}=Zu(s,n.DATE_RAW,r);if(!l)return n;const i=fr(l.fixstatus||l.FIXSTATUS);if(i!=="Approved")return{...n,FIX_LOG:l,FIX_LOG_STATUS:i};const o={...n},c={};return[{rowField:"AM_CHECKIN",fixLogField:"am_checkin"},{rowField:"AM_CHECKOUT",fixLogField:"am_checkout"},{rowField:"PM_CHECKIN",fixLogField:"pm_checkin"},{rowField:"PM_CHECKOUT",fixLogField:"pm_checkout"}].forEach(({rowField:m,fixLogField:u})=>{const p=l[u]||l[u.toUpperCase()]||"";if(p&&p.trim()!==""&&p!=="-"){const g=ss(p);g?(o[m]=g,c[m]=!0):c[m]=!1}else c[m]=!1}),o.FIX_LOG_BACKFILL=c,o.FIX_LOG=l,o.FIX_LOG_STATUS=i,o});function yF(){console.log(" [TIME LOGS] Component rendered"),ia();const{can:t,loading:s}=Vs(),r="manage-time-logs",n="manage-checktime",a=t(r,"read")||t(n,"read"),l=t(r,"create")||t(n,"create"),i=t(r,"update")||t(n,"update");t(r,"delete")||t(n,"delete");const c=t("dtr-fix-checktimes","create"),[d,m]=x.useState(""),[u,p]=x.useState("Shift Sched"),[g,j]=x.useState(()=>{const he=new Date,Ue=he.getFullYear(),ze=String(he.getMonth()+1).padStart(2,"0");return new Date(Ue,ze-1,1).toISOString().split("T")[0]}),[y,v]=x.useState(()=>{const he=new Date,Ue=he.getFullYear(),ze=String(he.getMonth()+1).padStart(2,"0");return new Date(Ue,ze,0).toISOString().split("T")[0]}),[h,f]=x.useState(null);console.log(" [TIME LOGS] Current selectedEmployee:",h);const[N,b]=x.useState([]),[w,D]=x.useState([]),[S,C]=x.useState(null),[T,_]=x.useState(null),[E,A]=x.useState([]),[L,F]=x.useState([]),[W,Y]=x.useState([]),[q,J]=x.useState([]),[O,M]=x.useState({}),[k,I]=x.useState([]),[K,z]=x.useState(!1),[P,R]=x.useState(null),U=x.useMemo(()=>{if(!S)return"STANDARD";if((Array.isArray(S.assignedShifts)?S.assignedShifts.map(ot=>(ot.shiftMode||ot.period||"").toString().toUpperCase()).filter(Boolean):[]).includes("AMPM"))return"AMPM";const Ue=!!S.SHIFT_AMCHECKIN,ze=!!S.SHIFT_AMCHECKOUT,ht=!!S.SHIFT_PMCHECKIN,st=!!S.SHIFT_PMCHECKOUT;return Ue&&st&&!ze&&!ht?"AMPM":"STANDARD"},[S])==="AMPM",[G,$]=x.useState(!1),[X,Q]=x.useState({date:"",columnType:"",employee:null}),[Ne,V]=x.useState(!1),[re,ne]=x.useState(null),[xe,me]=x.useState(Yy),[Z,ee]=x.useState(null),[ye,ve]=x.useState(!1),[ue,we]=x.useState(!1),[De,le]=x.useState(""),Ie=x.useRef();x.useEffect(()=>{if(!a)return;(async()=>{var Ue;try{const st=(((Ue=(await oe.get("/201-employees")).data)==null?void 0:Ue.data)||[]).map(ot=>{const vt=ot.surname?ot.surname.trim():"",bt=ot.firstname?ot.firstname.trim():"",dt=ot.middlename?ot.middlename.trim():"",It=ot.extension?ot.extension.trim():"",Et=[vt,bt&&(dt||It)?`${bt}`:bt].filter(Boolean),gt=bs(vt,bt,dt,It);return{USERID:ot.dtruserid||null,BADGENUMBER:ot.dtrbadgenumber||ot.idno||"",SSN:ot.idno||"",DEPARTMENT:ot.department_name||ot.departmentname||"",DEPARTMENT_ID:ot.deptid||null,POSITION:ot.position_title||ot.position||"",PHOTO:ot.photo_path||null,EMP_OBJID:ot.objid||null,RAW:ot,NAME:gt||ot.fullname||Et.join(" ").trim()||"Unnamed Employee"}});D(st),console.log(" [TIME LOGS] Employees (MySQL) loaded:",st.length)}catch(ze){console.error(" [TIME LOGS] Error loading employees from MySQL:",ze),D([])}})()},[a]),x.useEffect(()=>{if(!a)return;(async()=>{var Ue;if(!h){b([]);return}try{z(!0),console.log(" [TIME LOGS] Fetching logs for employee:",h.USERID,"from:",g,"to:",y);const ze=await oe.get(`/logs/${h.USERID}`,{params:{startDate:g,endDate:y}});b(ze.data||[]),console.log(" [TIME LOGS] Logs loaded:",(Ue=ze.data)==null?void 0:Ue.length)}catch(ze){console.error(" [TIME LOGS] Error loading logs:",ze),b([])}finally{z(!1)}})()},[h,g,y,a]),x.useEffect(()=>{console.log("DEBUG: logs:",N)},[N]),x.useEffect(()=>{console.log("DEBUG: locatorData:",E)},[E]),x.useEffect(()=>{if(!a)return;(async()=>{if(!(h!=null&&h.USERID)){C(null);return}try{z(!0),R(null),console.log(" Fetching shift schedule for USERID:",h.USERID);const Ue=await Du(h.USERID);console.log(" Extracted shift data:",Ue),C(Ue),_((Ue==null?void 0:Ue.employeeObjId)||null)}catch(Ue){console.error(" Error fetching shift schedule:",Ue),C(null),R("Failed to fetch shift schedule"),_(null)}finally{z(!1)}})()},[h==null?void 0:h.USERID,a]),x.useEffect(()=>{if(!a)return;(async()=>{var Ue;if(!T){A([]);return}try{const ze={emp_objid:T};g&&(ze.from=g),y&&(ze.to=y);const ht=await oe.get("/employee-locators",{params:ze}),st=((Ue=ht.data)==null?void 0:Ue.data)||ht.data||[];A(Array.isArray(st)?st:[]),console.log(" [TIME LOGS] Locator data (MySQL):",st.length)}catch(ze){A([]),console.error(" [TIME LOGS] Failed to fetch locator data from MySQL",ze)}})()},[T,g,y,a]),x.useEffect(()=>{if(!a)return;(async()=>{if(!T){F([]);return}try{console.log(" [TIME LOGS] Loading leave data for emp_objid:",T);const ze=(await oe.get(`/employee-leave-transactions/${T}`)).data||[],ht=(Array.isArray(ze)?ze:[]).map(st=>{const ot=[];Array.isArray(st.details)&&st.details.length>0&&st.details.forEach(dt=>{dt!=null&&dt.deducteddate&&ot.push({LEAVEDATE:dt.deducteddate,LEAVEDETAIL:dt.deductedcredit??null})}),typeof st.leave_dates=="string"&&st.leave_dates.trim()!==""&&st.leave_dates.split(",").forEach(dt=>{const It=dt.trim();It&&!ot.some(Et=>Rs(Et.LEAVEDATE)===Rs(It))&&ot.push({LEAVEDATE:It,LEAVEDETAIL:null})});const vt=fr(st.leavestatus||st.status),bt=ot.length>0?ot[0].LEAVEDATE:st.LEAVEDATE;return{...st,leavestatus:vt,status:vt,leaveDates:ot,LEAVEDATE:bt||null,LEAVEREFNO:st.LEAVEREFNO||st.leaveno||st.leaverefno||null,emp_objid:st.emp_objid??T,USERID:st.USERID??st.userid??st.user_id??null}});F(ht),console.log(" [TIME LOGS] Leave data (MySQL) loaded:",ht.length)}catch(Ue){console.error(" [TIME LOGS] Error loading leave data from MySQL:",Ue),F([])}})()},[T,a]),x.useEffect(()=>{if(!a)return;(async()=>{var Ue;if(!h&&!T){Y([]);return}try{const ze=h==null?void 0:h.USERID,ht=T;if(!ze&&!ht){Y([]);return}const ot=((Ue=(await oe.get("/employee-travels/transactions",{params:{participant:ze,emp_objid:ht}})).data)==null?void 0:Ue.data)||[];Y(Array.isArray(ot)?ot:[]),console.log(" [TIME LOGS] Travel data (MySQL) loaded:",Array.isArray(ot)?ot.length:0)}catch(ze){console.error(" [TIME LOGS] Error loading travel data from MySQL:",ze),Y([])}})()},[h,T,a]),x.useEffect(()=>{if(!a)return;(async()=>{var Ue;if(!T){I([]);return}try{const ze={emp_objid:T};g&&(ze.dateFrom=g),y&&(ze.dateTo=y);const ht=await oe.get("/dtr-fix-checktime",{params:ze}),st=((Ue=ht.data)==null?void 0:Ue.data)||ht.data||[];I(Array.isArray(st)?st:[]),console.log(" [TIME LOGS] Fix logs data loaded:",Array.isArray(st)?st.length:0)}catch(ze){console.error(" [TIME LOGS] Error loading fix logs data:",ze),I([])}})()},[T,g,y,a]),x.useEffect(()=>{if(!a)return;(async()=>{try{const Ue=new Date().getFullYear(),ze=await oe.get("/dtr-holidays");if(ze.data.success){const ht=Array.isArray(ze.data.data)?ze.data.data:[],st=ht.filter(vt=>{const bt=ml(vt);if(!bt)return Un(vt);const dt=bt.slice(0,4),It=Un(vt),gt=dt===String(Ue)||It;if(It){const Xt=vt.HOLIDAYDATE||vt.holidaydate||vt.holiday_date||vt.HolidayDate||vt.date||"";console.log(" [HOLIDAY LOAD] Recurring holiday processed:",{name:ja(vt),rawDate:Xt,normalizedDate:bt,monthDay:bt?bt.slice(5,10):"N/A",year:dt,currentYear:String(Ue),included:gt})}return gt});J(st);const ot=st.filter(vt=>Un(vt)).length;if(st.length>0){const vt=st[0];console.log(" [HOLIDAY DEBUG] Sample holiday object keys:",{keys:Object.keys(vt),isrecurring:vt.isrecurring,isRecurring:vt.isRecurring,ISRECURRING:vt.ISRECURRING,is_recurring:vt.is_recurring,recurring:vt.recurring,isHolidayRecurring:Un(vt)})}console.log(" Holiday data loaded from MySQL:",{total:st.length,rawTotal:ht.length,recurringCount:ot,currentYearCount:st.filter(vt=>{const bt=ml(vt);return bt&&bt.slice(0,4)===String(Ue)}).length})}else console.log(" Holiday API response not successful:",ze.data),J([])}catch(Ue){console.error(" Error loading holiday data:",Ue),J([])}})()},[a]),x.useEffect(()=>{if(!a)return;(async()=>{var Ue;if(!T){M({});return}try{const ze={includeEntries:1,emp_objid:T};g&&(ze.from=g),y&&(ze.to=y);const ht=await oe.get("/dtr/employee-cdo/transactions",{params:ze}),st=Array.isArray((Ue=ht.data)==null?void 0:Ue.data)&&ht.data.data||Array.isArray(ht.data)&&ht.data||[],ot=_N(st,{startDate:g,endDate:y,employeeObjId:T});M(ot),console.log(" [TIME LOGS] CDO usage entries loaded:",Object.keys(ot).length)}catch(ze){console.error(" [TIME LOGS] Error loading CDO data:",ze),M({})}})()},[T,g,y,a]),x.useEffect(()=>{console.log(" [TIME LOGS] Test useEffect - this should run on every render")},[]),x.useEffect(()=>{console.log(" [TIME LOGS] selectedEmployee dependency changed:",h)},[h]),x.useMemo(()=>Array.isArray(E)?E:[],[E]);const ge=x.useMemo(()=>!h||!S?[]:uF(N,S,E,L,W,q,O,h==null?void 0:h.USERID,T,g,y,k),[N,S,E,L,W,q,O,h,T,g,y,k]),Ge=x.useMemo(()=>{if(!d.trim())return w;const he=d.toLowerCase();return w.filter(Ue=>{const ze=typeof Ue.NAME=="string"?Ue.NAME.toLowerCase():"",ht=Ue.BADGENUMBER!==void 0&&Ue.BADGENUMBER!==null?String(Ue.BADGENUMBER).toLowerCase():"",st=Ue.SSN!==void 0&&Ue.SSN!==null?String(Ue.SSN).toLowerCase():"",ot=typeof Ue.DEPARTMENT=="string"?Ue.DEPARTMENT.toLowerCase():"";return ze.includes(he)||ht.includes(he)||st.includes(he)||ot.includes(he)})},[w,d]),ke=async he=>{if(f(he),_((he==null?void 0:he.EMP_OBJID)||null),m(""),R(null),he){const Ue=g||new Date().toISOString().split("T")[0],ze=y||new Date().toISOString().split("T")[0];g||j(Ue),y||v(ze)}},Re=(he,Ue)=>{if(he==="start")j(Ue);else if(he==="end")v(Ue);else if(he==="month"){xt(Ue);const ze=Mt(Ue);j(ze.startDate),v(ze.endDate)}if(h&&Ue){let ze,ht;if(he==="month"){const st=Mt(Ue);ze=st.startDate,ht=st.endDate}else ze=he==="start"?Ue:g,ht=he==="end"?Ue:y;ze&&ht&&(j(ze),v(ht))}},Ke=async he=>{if(!l&&!i){alert("You do not have permission to add locator entries.");return}try{z(!0),await oe.post("/locator",he);const Ue=await oe.get("/locator",{params:{employeeId:h.USERID,dateFrom:g,dateTo:y}});A(Ue.data.data||Ue.data||[])}catch(Ue){console.error("Error adding locator entry:",Ue),R("Failed to add locator entry")}finally{z(!1)}},Xe=(he,Ue)=>{if(!l&&!i){alert("You do not have permission to add locator entries.");return}const ze=Ue.replace(/_/g,"");Q({date:he,columnType:ze,employee:h}),$(!0)},Se=()=>{var he;return T||(h==null?void 0:h.EMP_OBJID)||(h==null?void 0:h.emp_objid)||(h==null?void 0:h.employee_objid)||(h==null?void 0:h.objid)||(h==null?void 0:h.OBJID)||((he=h==null?void 0:h.RAW)==null?void 0:he.objid)||null},lt=he=>he&&(Rs(he==null?void 0:he.DATE_RAW)||Rs(he==null?void 0:he.DATE)||Rs(he==null?void 0:he.date))||"",it=async(he,Ue)=>{if(!(!he||!Ue)){ve(!0);try{const{data:ze}=await oe.get("/dtr-fix-checktime",{params:{emp_objid:he,dateFrom:Ue,dateTo:Ue}}),ht=Array.isArray(ze==null?void 0:ze.data)?ze.data[0]:null;ht?(ee(ht),me(st=>({...st,am_checkin:ma(ht.am_checkin)||st.am_checkin,am_checkout:ma(ht.am_checkout)||st.am_checkout,pm_checkin:ma(ht.pm_checkin)||st.pm_checkin,pm_checkout:ma(ht.pm_checkout)||st.pm_checkout,remarks:ht.remarks||st.remarks||""}))):ee(null)}catch(ze){console.error("Error loading fix record:",ze),le("Failed to load existing fix log.")}finally{ve(!1)}}},Pt=he=>{if(!c){window.alert("You do not have permission to create fix time entries.");return}if(!h){window.alert("Please select an employee first.");return}const Ue=Se();if(!Ue){window.alert("Selected employee record is missing an ObjID required for Fix Time entry.");return}const ze=lt(he);if(!ze){window.alert("Selected log does not have a valid date.");return}ne({...he,normalizedDate:ze});const ht=(he==null?void 0:he.AM_CHECKIN)||(he==null?void 0:he.amCheckIn)||"-",st=(he==null?void 0:he.AM_CHECKOUT)||(he==null?void 0:he.amCheckOut)||"-",ot=(he==null?void 0:he.PM_CHECKIN)||(he==null?void 0:he.pmCheckIn)||"-",vt=(he==null?void 0:he.PM_CHECKOUT)||(he==null?void 0:he.pmCheckOut)||"-",bt=ht==="-"?"":ma(ht),dt=st==="-"?"":ma(st),It=ot==="-"?"":ma(ot),Et=vt==="-"?"":ma(vt);console.log(" [TimeLogsManagement] Setting form with Current Logs values:",{amCheckInRaw:ht,amCheckOutRaw:st,pmCheckInRaw:ot,pmCheckOutRaw:vt,amCheckInNormalized:bt,amCheckOutNormalized:dt,pmCheckInNormalized:It,pmCheckOutNormalized:Et,rowObject:he}),me({emp_objid:Ue,checktimedate:ze,am_checkin:bt,am_checkout:dt,pm_checkin:It,pm_checkout:Et,remarks:""}),ee(null),le(""),V(!0),it(Ue,ze)},Nt=()=>{V(!1),ne(null),ee(null),me(Yy),le(""),ve(!1),we(!1)},At=he=>{const{name:Ue,value:ze}=he.target;me(ht=>({...ht,[Ue]:ze}))},Ce=async he=>{var Ue,ze;if(he.preventDefault(),!xe.emp_objid||!xe.checktimedate){le("Employee ObjID and Fix Log Date are required.");return}try{we(!0),le("");const ht={emp_objid:xe.emp_objid,checktimedate:xe.checktimedate,am_checkin:xe.am_checkin||null,am_checkout:xe.am_checkout||null,pm_checkin:xe.pm_checkin||null,pm_checkout:xe.pm_checkout||null,remarks:xe.remarks||null,fixstatus:(Z==null?void 0:Z.fixstatus)||"For Approval"};Z!=null&&Z.fixid?await oe.put(`/dtr-fix-checktime/${Z.fixid}`,ht):await oe.post("/dtr-fix-checktime",ht),Nt()}catch(ht){console.error("Error saving fix log:",ht),le(((ze=(Ue=ht.response)==null?void 0:Ue.data)==null?void 0:ze.message)||"Failed to save fix log.")}finally{we(!1)}},Ze=()=>S&&S.SHIFTNAME?S.SHIFTNAME:h&&h.InheritDeptSchClass?`Shift #${h.InheritDeptSchClass}`:"No Schedule Assigned",fe=()=>S?e.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:["AM In: ",io(S.SHIFT_AMCHECKIN)," | AM Out: ",io(S.SHIFT_AMCHECKOUT)," | PM In: ",io(S.SHIFT_PMCHECKIN)," | PM Out: ",io(S.SHIFT_PMCHECKOUT)]}):null,Pe=(he,Ue)=>{if(!he||he.length===0||!Ue)return!1;const ze=Qu(Ue);if(!ze||ze.length<10)return!1;const ht=ze.slice(5,10);return he.some(st=>{const ot=st.HOLIDAYDATE||st.holidaydate||st.holiday_date||st.HolidayDate||st.date||"",vt=ml(st);if(!vt||vt.length<10)return!1;if(Un(st)){let bt="";if(ot){let dt="";if(ot instanceof Date){const Et=ot.getUTCFullYear(),gt=String(ot.getUTCMonth()+1).padStart(2,"0"),Xt=String(ot.getUTCDate()).padStart(2,"0");dt=`${Et}-${gt}-${Xt}`}else dt=String(ot).trim();const It=dt.match(/^(\d{4})-(\d{2})-(\d{2})/);It?bt=`${It[2]}-${It[3]}`:bt=vt.slice(5,10)}else bt=vt.slice(5,10);return bt===ht}return vt===ze})},Le=(he,Ue)=>{if(!Ue)return!1;const ze=he.AM_CHECKIN&&he.AM_CHECKIN.trim()!=="",ht=he.AM_CHECKOUT&&he.AM_CHECKOUT.trim()!=="",st=he.PM_CHECKIN&&he.PM_CHECKIN.trim()!=="",ot=he.PM_CHECKOUT&&he.PM_CHECKOUT.trim()!=="";return!ze||!ht||!st||!ot},ut=()=>{if(Ie.current){const he=Ie.current.innerHTML,Ue=window.open("","","height=700,width=900");Ue.document.write("<html><head><title>Print Time Logs</title>"),Ue.document.write("<style>table{border-collapse:collapse;width:100%;}th,td{border:1px solid #ccc;padding:8px;text-align:center;}th{background:#f3f4f6;} .header-info{margin-bottom:16px;} .footer-totals{font-weight:bold;background:#e0e7ff;}</style>"),Ue.document.write("</head><body>"),Ue.document.write(he),Ue.document.write("</body></html>"),Ue.document.close(),Ue.focus(),setTimeout(()=>Ue.print(),500)}},Be=ge.reduce((he,Ue)=>he+(Number(Ue.LATE)||0),0),mt=ge.reduce((he,Ue)=>he+(Number(Ue.DAYS)||0),0),[qe,Oe]=x.useState(!1),[He,Kt]=x.useState(null),rs=he=>{Kt(he),Oe(!0)},qt=()=>{Oe(!1),Kt(null)},[zt,xs]=x.useState(!1),[ms,Ut]=x.useState(null),[$t,Qt]=x.useState(!1),[gs,Yt]=x.useState(null),[os,Zt]=x.useState(!1),[Jt,es]=x.useState(null),be=he=>{Ut(he),xs(!0)},nt=()=>{xs(!1),Ut(null)},tt=he=>{Yt(he),Qt(!0)},ft=()=>{Qt(!1),Yt(null)},kt=he=>{he&&(es(he),Zt(!0))},_t=()=>{Zt(!1),es(null)},[cs,as]=x.useState(null),[_e,We]=x.useState({x:0,y:0}),ct=(he,Ue,ze,ht)=>{const st=he.target.getBoundingClientRect();We({x:st.left+st.width/2,y:st.top-10}),as({remark:Ue,type:ze,data:ht})},Ye=()=>{as(null)},[te,Me]=x.useState("monthly"),[rt,xt]=x.useState(()=>{const he=new Date,Ue=he.getFullYear(),ze=String(he.getMonth()+1).padStart(2,"0");return`${Ue}-${ze}`}),Mt=he=>{const[Ue,ze]=he.split("-"),ht=new Date(parseInt(Ue),parseInt(ze)-1,1),st=new Date(parseInt(Ue),parseInt(ze),0),ot=vt=>{const bt=vt.getFullYear(),dt=String(vt.getMonth()+1).padStart(2,"0"),It=String(vt.getDate()).padStart(2,"0");return`${bt}-${dt}-${It}`};return{startDate:ot(ht),endDate:ot(st)}},Ee=he=>{if(Me(he),he==="monthly"){const Ue=new Date,ze=Ue.getFullYear(),ht=String(Ue.getMonth()+1).padStart(2,"0"),st=`${ze}-${ht}`;xt(st);const ot=Mt(st);j(ot.startDate),v(ot.endDate)}else if(he==="range"){const ze=new Date().toISOString().split("T")[0];j(ze),v(ze)}};x.useEffect(()=>{if(te==="monthly"){const he=Mt(rt);j(he.startDate),v(he.endDate)}},[]);const[$e,et]=x.useState([]),Te=()=>{const he=[],Ue=new Date,ze=Ue.getFullYear(),ht=Ue.getMonth()+1;for(let st=ze;st>=ze-4;st--){const ot=st===ze?ht:12,vt=1;for(let bt=ot;bt>=vt;bt--){const dt=`${st}-${String(bt).padStart(2,"0")}`,It=new Date(st,bt-1,1).toLocaleDateString("en-US",{month:"long",year:"numeric"});he.push({year:st,month:bt,monthYear:dt,displayName:It})}}return he};return x.useEffect(()=>{const he=Te();et(he),console.log(" [TIME LOGS] Generated last 5 years months:",he)},[]),s?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 text-gray-600",children:"Loading permissions"})}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Employee"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:d,onChange:he=>m(he.target.value),placeholder:"Search by name, badge number, SSN, or department...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),d&&Ge.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Ge.map((he,Ue)=>e.jsx("div",{onClick:()=>ke(he),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200 last:border-b-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full overflow-hidden bg-gray-200 border border-gray-300 flex items-center justify-center text-sm font-semibold text-gray-600",children:he.PHOTO?e.jsx("img",{src:he.PHOTO,alt:he.NAME,className:"h-full w-full object-cover"}):e.jsx("span",{children:(he.NAME||"N/A").charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-gray-800",children:he.NAME}),e.jsx("span",{className:"text-xs text-gray-500",children:[he.DEPARTMENT||"No Department",he.POSITION].filter(Boolean).join("  ")})]})]})},he.USERID??he.EMP_OBJID??Ue))})]})]}),h&&e.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Selected Employee:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",h.NAME]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Badge Number:"})," ",h.BADGENUMBER]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Department:"})," ",h.DEPARTMENT||"No Department"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Position:"})," ",h.POSITION||"Not Assigned"]}),e.jsxs("div",{className:"md:col-span-4",children:[e.jsx("strong",{children:"Assigned Shift:"})," ",Ze(),fe()]})]})]}),P&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:P})}),e.jsx("div",{className:"mb-6",children:te==="range"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Filter Type"}),e.jsxs("select",{value:te,onChange:he=>Ee(he.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"range",children:"Date Range"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:g,onChange:he=>Re("start",he.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:y,onChange:he=>Re("end",he.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Filter Type"}),e.jsxs("select",{value:te,onChange:he=>Ee(he.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"range",children:"Date Range"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Month"}),e.jsx("select",{value:rt,onChange:he=>Re("month",he.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:$e.map(he=>e.jsx("option",{value:he.monthYear,children:he.displayName},he.monthYear))})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0 sm:space-x-6",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>p("Shift Sched"),className:`px-4 py-2 rounded-lg text-sm font-medium transition duration-200 ease-in-out ${u==="Shift Sched"?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Shift Sched"}),e.jsx("button",{onClick:()=>p("Raw Logs"),className:`px-4 py-2 rounded-lg text-sm font-medium transition duration-200 ease-in-out ${u==="Raw Logs"?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Raw Logs"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:ut,className:"px-4 py-2 rounded-lg text-sm font-medium bg-green-600 text-white hover:bg-green-700 shadow",disabled:!h||ge.length===0,children:"Print"}),e.jsx("button",{onClick:()=>W8(ge,Fc),className:"px-4 py-2 rounded-lg text-sm font-medium bg-yellow-500 text-white hover:bg-yellow-600 shadow",disabled:!h||ge.length===0,children:"Export CSV"}),e.jsx("button",{onClick:()=>Y8(ge,Fc),className:"px-4 py-2 rounded-lg text-sm font-medium bg-green-700 text-white hover:bg-green-800 shadow",disabled:!h||ge.length===0,children:"Export Excel"})]})]})]}),u==="Raw Logs"?e.jsx(H8,{logs:N,selectedEmployee:h,startDate:g,endDate:y}):e.jsxs("div",{ref:Ie,children:[K&&e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Loading shift schedule..."})}),!K&&h&&!S&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-yellow-800 mb-2",children:"No shift schedule assigned to this employee."}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Please assign a shift schedule to view time logs."})]}),!K&&h&&S&&ge.length>0?e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:e.jsxs("table",{className:"min-w-full table-auto border border-gray-300 shadow-sm",children:[e.jsx("thead",{className:"bg-gray-100 text-sm text-gray-700",children:e.jsx("tr",{children:Fc.map(he=>{const Ue=ze=>{switch(ze){case"DATE":return"w-32";case"AM_CHECKIN":case"AM_CHECKOUT":case"PM_CHECKIN":case"PM_CHECKOUT":return"w-20";case"LATE":return"w-16";case"DAYS":return"w-16";case"REMARKS":return"w-40";case"ACTION":return"w-32";default:return"w-auto"}};return e.jsx("th",{className:`border px-4 py-2 ${Ue(he.field)}`,children:he.header},he.field)})})}),e.jsx("tbody",{children:ge.map((he,Ue)=>e.jsx("tr",{className:`text-center text-sm ${he.isWeekend?"text-blue-600 bg-blue-50":""}`,children:Fc.map(ze=>{const ht=st=>{switch(st){case"DATE":return"w-32";case"AM_CHECKIN":case"AM_CHECKOUT":case"PM_CHECKIN":case"PM_CHECKOUT":return"w-20";case"LATE":return"w-16";case"DAYS":return"w-16";case"REMARKS":return"w-40";case"ACTION":return"w-32";default:return"w-auto"}};if(ze.field==="REMARKS"){const st=Array.isArray(he.holidayNames)?he.holidayNames:[],ot=he.holidayDisplay||(st.length>0?st.join(", "):"Holiday"),vt=he.hasHoliday&&ot;return e.jsxs("td",{className:`border px-4 py-2 text-left ${ht(ze.field)}`,children:[vt&&e.jsx("div",{className:"text-sm font-semibold text-red-600",children:ot}),he.REMARKS?e.jsx("div",{className:vt?"mt-1":void 0,children:he.REMARKS.split("; ").filter(Boolean).map((bt,dt,It)=>{var ys,js,Fr,Fs;const Et=bt.trim(),gt=Et.match(/^Locator \(([^)]+)\)$/),Xt=Et.match(/^Leave \(([^)]+)\)$/),Vt=Et.match(/^Travel \(([^)]+)\)$/),ts=Et.match(/^CDO\(([^)]+)\)$/i);if(gt){const ce=gt[1],de=(((ys=he.REMARKS_DATA)==null?void 0:ys.locatorRecords)||[]).find(Fe=>[Fe.LOCNO,Fe.locatorno,Fe.loc_no].some(pe=>pe!=null&&String(pe).trim()===ce));return e.jsxs("span",{children:[e.jsx("button",{onClick:()=>de&&rs(de),onMouseEnter:Fe=>ct(Fe,Et,"locator",de),onMouseLeave:Ye,className:"text-pink-600 hover:text-pink-800 underline cursor-pointer bg-transparent border-none p-0 text-left font-normal",style:{textDecoration:"underline",color:"#ec4899",cursor:"pointer"},title:"Click to view locator details",children:Et}),dt<It.length-1&&"; "]},dt)}if(Xt){const ce=Xt[1],je=((js=he.REMARKS_DATA)==null?void 0:js.leaveRecords)||[];let Fe=je.find(se=>[se.LEAVEREFNO,se.leaveno,se.leaverefno,se.LeaveRefNo,se.leave_refno,se.LEAVEID,se.leaveid].some(H=>H!=null&&String(H).trim()===ce));return Fe||(Fe=je.find(se=>se.leaveDates&&se.leaveDates.length>0?se.leaveDates.some(H=>Rs(H.LEAVEDATE)===he.DATE_RAW):Rs(se.LEAVEDATE||se.leavedate)===he.DATE_RAW)||null),!Fe&&je.length===1&&(Fe=je[0]),e.jsxs("span",{children:[e.jsx("button",{onClick:()=>Fe&&tt(Fe),onMouseEnter:se=>ct(se,Et,"leave",Fe),onMouseLeave:Ye,className:"text-purple-600 hover:text-purple-800 underline cursor-pointer bg-transparent border-none p-0 text-left font-normal",style:{textDecoration:"underline",color:"#7c3aed",cursor:"pointer"},title:"Click to view leave details",children:Et}),dt<It.length-1&&"; "]},dt)}if(Vt){const ce=Vt[1],de=(((Fr=he.REMARKS_DATA)==null?void 0:Fr.travelRecords)||[]).find(Fe=>[Fe.travelno,Fe.TRAVELNO,Fe.cdono,Fe.travel_no].some(pe=>pe!=null&&String(pe).trim()===ce));return e.jsxs("span",{children:[e.jsx("button",{onClick:()=>de&&be(de),onMouseEnter:Fe=>ct(Fe,Et,"travel",de),onMouseLeave:Ye,className:"text-green-600 hover:text-green-800 underline cursor-pointer bg-transparent border-none p-0 text-left font-normal",style:{textDecoration:"underline",color:"#16a34a",cursor:"pointer"},title:"Click to view travel details",children:Et}),dt<It.length-1&&"; "]},dt)}if(ts){const ce=ts[1],de=(((Fs=he.REMARKS_DATA)==null?void 0:Fs.cdoRecords)||[]).find(Fe=>[Fe==null?void 0:Fe.displayRef,Fe==null?void 0:Fe.cdono,Fe==null?void 0:Fe.CDONO].map(pe=>pe!=null?String(pe).trim():"").filter(Boolean).includes(String(ce).trim()))||null;return e.jsxs("span",{children:[e.jsx("button",{onClick:()=>de&&kt(de),onMouseEnter:Fe=>ct(Fe,Et,"cdo",de),onMouseLeave:Ye,className:"underline cursor-pointer bg-transparent border-none p-0 text-left font-normal",style:{textDecoration:"underline",color:"#0f766e",cursor:"pointer"},title:"Click to view CDO details",children:Et}),dt<It.length-1&&"; "]},dt)}const ps=ce=>ce==="Weekend"?"text-blue-600":ce==="Absent"?"text-orange-600":ce.toLowerCase().startsWith("locator")?"text-pink-600":ce.toLowerCase().includes("leave")?"text-purple-600":ce.toLowerCase().includes("travel")?"text-green-600":ce.toLowerCase().startsWith("cdo")?"text-teal-600":he.hasHoliday&&(he.holidayNames||[]).some(je=>je===ce)||ce.toLowerCase().includes("holiday")||ce.toLowerCase().includes("national")||ce.toLowerCase().includes("special")?"text-red-600":"text-gray-600";return e.jsxs("span",{className:ps(Et),children:[Et,dt<It.length-1&&"; "]},dt)})}):vt?null:e.jsx("span",{className:"text-gray-400",children:"-"})]},ze.field)}if(ze.field==="ACTION"){const st=Ip(L,he.DATE_RAW,h==null?void 0:h.USERID,T),ot=lF(L,he.DATE_RAW,h==null?void 0:h.USERID,T),vt=au(W,he.DATE_RAW,h==null?void 0:h.USERID,T);Pe(q,he.DATE_RAW);const bt=Le(he,S),dt=new Date(he.DATE_RAW),It=new Date;It.setHours(0,0,0,0),dt.setHours(0,0,0,0);const Et=dt>It;dt.getTime(),It.getTime();const gt=st||ot||vt,Xt=!bt;!he.AM_CHECKIN&&!he.AM_CHECKOUT&&!he.PM_CHECKIN&&he.PM_CHECKOUT;const Vt=Xt||gt;Vt||he.isWeekend;const{hasRemarks:ts}=sF(he.DATE_RAW,h==null?void 0:h.USERID,T,E,L,W,O),ys=!!ew(k,he.DATE_RAW,T),js=ts||ys,Fr=Et||Vt;return e.jsx("td",{className:`border px-4 py-2 ${ht(ze.field)}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[l||i?js?null:e.jsx("button",{onClick:()=>Xe(he.DATE_RAW,"AM_CHECKIN"),disabled:Fr,className:`inline-flex items-center justify-center w-8 h-8 rounded-full transition-colors duration-200 shadow-sm hover:shadow-md ${Fr?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-50 hover:bg-blue-100 text-gray-700"}`,title:Et?"Locator disabled for future dates":Vt?"Locator disabled - Complete logs or existing records":"Add Locator Entry",children:e.jsx("span",{className:"text-base",children:""})}):e.jsx("span",{className:"text-xs text-gray-400 italic",children:"No actions"}),c&&!js?e.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-50 hover:bg-blue-100 text-blue-600 hover:text-blue-800 transition-colors border border-blue-100 shadow-sm hover:shadow disabled:bg-gray-200 disabled:text-gray-400 disabled:cursor-not-allowed",title:"Fix Time",onClick:()=>Pt(he),disabled:s,children:e.jsx("span",{role:"img","aria-label":"Fix Time",children:""})}):null]})},ze.field)}return e.jsx("td",{className:`border px-4 py-2 ${ht(ze.field)}`,children:(()=>{var vt,bt;if(["AM_CHECKIN","AM_CHECKOUT","PM_CHECKIN","PM_CHECKOUT"].includes(ze.field)){if(U&&(ze.field==="AM_CHECKOUT"||ze.field==="PM_CHECKIN"))return e.jsx("span",{className:"text-gray-400",children:"-"});const It=he[ze.field]||"-",Et=Ip(L,he.DATE_RAW,h==null?void 0:h.USERID,T),gt=au(W,he.DATE_RAW,h==null?void 0:h.USERID,T),Xt=he.hasCdo||O&&O[he.DATE_RAW],Vt=Pe(q,he.DATE_RAW),ts=he.isWeekend,ps=!he.AM_CHECKIN&&!he.AM_CHECKOUT&&!he.PM_CHECKIN&&!he.PM_CHECKOUT,ys=new Date;ys.setHours(0,0,0,0);const js=new Date(he.DATE_RAW);js.setHours(0,0,0,0);const Fr=js>ys,Fs=js.getTime()===ys.getTime(),je=(he.REMARKS&&he.REMARKS.includes("Absent")||ps&&!Fr&&!Fs)&&!Et&&!gt&&!Vt;if(It!=="-"){const de=[];Et&&de.push(e.jsx("span",{className:"inline-block ml-1 px-1 py-0.5 text-xs bg-purple-100 text-purple-700 rounded font-semibold",title:"Leave",children:"Leave"},"leave")),gt&&de.push(e.jsx("span",{className:"inline-block ml-1 px-1 py-0.5 text-xs bg-green-100 text-green-700 rounded font-semibold",title:"Travel",children:"Travel"},"travel")),Xt&&de.push(e.jsx("span",{className:"inline-block ml-1 px-1 py-0.5 text-xs bg-teal-100 text-teal-700 rounded font-semibold",title:"CDO",children:"CDO"},"cdo")),ts&&de.push(e.jsx("span",{className:"inline-block ml-1 px-1 py-0.5 text-xs bg-blue-100 text-blue-700 rounded font-semibold",title:"Weekend",children:"Weekend"},"weekend"));const Fe=he.LOCATOR_BACKFILL&&he.LOCATOR_BACKFILL[ze.field]===!0,se=he.FIX_LOG_BACKFILL&&he.FIX_LOG_BACKFILL[ze.field]===!0;if(Fe&&de.push(e.jsx("span",{className:"text-xs",title:"Backfilled by Locator",role:"img","aria-label":"Backfilled by Locator",children:""},"locator")),se){const pe=((vt=he.FIX_LOG)==null?void 0:vt.approved_by_employee_name)||((bt=he.FIX_LOG)==null?void 0:bt.approvedByName)||"Unknown",H=pe!=="Unknown"?`Fixed by (${pe})`:"Fixed by Fix Log";de.push(e.jsx("span",{className:"text-xs",title:H,role:"img","aria-label":H,children:""},"fixlog"))}return e.jsxs("span",{className:"inline-flex items-center flex-wrap gap-1",children:[e.jsx("span",{className:"font-medium",children:It}),de]})}return Et?e.jsx("span",{className:"text-red-600 font-semibold",children:"Leave"}):gt?e.jsx("span",{className:"text-green-600 font-semibold",children:"Travel"}):Xt?e.jsx("span",{className:"text-gray-400 font-semibold",children:"CDO"}):Vt?e.jsx("span",{className:"text-gray-400 font-semibold",children:"Holiday"}):ts?e.jsx("span",{className:"text-blue-600 font-semibold",children:"Weekend"}):je?e.jsx("span",{className:"text-orange-600 font-semibold",children:"Absent"}):It}const ot=he[ze.field];return ot!=null&&ot!==""?ot:"-"})()},ze.field)})},Ue))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"footer-totals",children:[e.jsx("td",{colSpan:5,className:"border px-4 py-2 text-right",children:"TOTALS:"}),e.jsx("td",{className:"border px-4 py-2",children:Be}),e.jsx("td",{className:"border px-4 py-2",children:mt}),e.jsx("td",{className:"border px-4 py-2"}),e.jsx("td",{className:"border px-4 py-2"})]})})]})}):!K&&h&&S?e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-yellow-800",children:"No logs found for the selected date range."})}):!K&&!h?e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-gray-600",children:"Please select an employee to view their time logs."})}):null]}),e.jsx(pF,{isOpen:G,onClose:()=>$(!1),onSubmit:Ke,date:X.date,columnType:X.columnType,employee:X.employee,shiftSchedule:S}),e.jsx(cx,{isOpen:Ne,onClose:Nt,employee:h,row:re,form:xe,onChange:At,onSubmit:Ce,loading:ye,saving:ue,error:De,existingRecord:Z,shiftSchedule:S}),qe&&He&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-t-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Locator Details"}),e.jsxs("p",{className:"text-blue-100 mt-1",children:["Locator Number: ",He.LOCNO]})]}),e.jsx("button",{onClick:qt,className:"text-white hover:text-blue-200 transition-colors duration-200",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Employee"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:He.NAME||"Unknown Employee"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Date"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:He.LOCDATE?new Date(He.LOCDATE).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${He.LOCSTATUS==="ACTIVE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:He.LOCSTATUS||"N/A"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Location Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Destination"}),e.jsx("p",{className:"text-lg text-blue-900",children:He.LOCDESTINATION||"Not specified"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Purpose"}),e.jsx("p",{className:"text-lg text-blue-900",children:He.LOCPURPOSE||"Not specified"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Time Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-2",children:"Time Departure"}),e.jsx("p",{className:"text-lg font-mono text-green-900",children:He.LOCTIMEDEPARTURE?new Date(He.LOCTIMEDEPARTURE).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Not specified"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-2",children:"Time Arrival"}),e.jsx("p",{className:"text-lg font-mono text-green-900",children:He.LOCTIMEARRIVAL?new Date(He.LOCTIMEARRIVAL).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Not specified"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"System Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Entry By"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:getEmployeeNameForLocator(He.LOCENTRYBY,w)})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Entry Date"}),e.jsx("p",{className:"text-lg font-mono text-gray-900",children:He.LOCENTRYDATE?new Date(He.LOCENTRYDATE).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A"})]})]})]})]}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 rounded-b-lg border-t border-gray-200",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:qt,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 font-medium",children:"Close"})})})]})}),zt&&ms&&e.jsx(LN,{isOpen:zt,onClose:nt,travel:ms}),os&&Jt&&e.jsx(nF,{isOpen:os,onClose:_t,cdo:Jt}),e.jsx(rF,{isOpen:$t,onClose:ft,leave:gs,employees:w})]}):e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 text-gray-600",children:"You do not have permission to view time logs."})})}const bF={"For Approval":"bg-yellow-100 text-yellow-800",Approved:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800",Cancel:"bg-red-100 text-red-800"},qy={employeeSearch:"",dateFrom:"",dateTo:"",status:"All"},Vy={emp_objid:"",employeeName:"",checktimedate:"",am_checkin:"",am_checkout:"",pm_checkin:"",pm_checkout:"",remarks:""},vF=t=>{if(!t)return"N/A";const s=String(t).trim();if(!s)return"N/A";const r=s.match(/^(\d{4})-(\d{2})-(\d{2})(?:\s|T|$)/);if(r){const[,n,a,l]=r;return`${a}/${l}/${n}`}return s},eh=(t="")=>{const s=t.trim();if(!s)return"NA";const r=s.split(/\s+/);return r.length===1?r[0].slice(0,2).toUpperCase():(r[0][0]+r[r.length-1][0]).toUpperCase()},ha=t=>{if(!t||t==="-")return"";const s=String(t).trim();if(!s)return"";const r=s.match(/^(\d{1,2}):(\d{2})(?::\d{2})?$/);if(r){const n=String(parseInt(r[1],10)).padStart(2,"0"),a=r[2];return`${n}:${a}`}return s},jF=(t=[])=>{const s=[{value:"",label:"-- Select Time --"}],r=new Set;for(let l=0;l<24;l++)for(let i=0;i<60;i+=15){const o=String(l).padStart(2,"0"),c=String(i).padStart(2,"0"),d=`${o}:${c}`;r.add(d),s.push({value:d,label:d})}t.forEach(l=>{l&&l.trim()&&!r.has(l)&&(r.add(l),s.push({value:l,label:l}))});const n=s[0],a=s.slice(1).sort((l,i)=>{const[o,c]=l.value.split(":").map(Number),[d,m]=i.value.split(":").map(Number);return o!==d?o-d:c-m});return[n,...a]},NF=({status:t})=>{const s=bF[t]||"bg-gray-100 text-gray-800";return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s}`,children:t||"For Approval"})},wF=()=>{const{can:t,loading:s}=Vs(),r="dtr-fix-checktimes",n=t(r,"read");t(r,"create");const a=t(r,"update"),l=t(r,"delete"),i=t(r,"approve")||a,[o,c]=x.useState(qy),[d,m]=x.useState([]),[u,p]=x.useState(!0),[g,j]=x.useState(!1),[y,v]=x.useState(Vy),[h,f]=x.useState(null),[N,b]=x.useState(!1),[w,D]=x.useState(""),[S,C]=x.useState(!1),[T,_]=x.useState(null),[E,A]=x.useState(null),[L,F]=x.useState(""),[W,Y]=x.useState(!1),q=x.useCallback(async()=>{if(!n){m([]),p(!1);return}p(!0);try{const $={};o.employeeSearch&&($.search=o.employeeSearch),o.dateFrom&&($.dateFrom=o.dateFrom),o.dateTo&&($.dateTo=o.dateTo),o.status!=="All"&&($.status=o.status);const{data:X}=await oe.get("/dtr-fix-checktime",{params:$});m((X==null?void 0:X.data)||[])}catch($){console.error("Error fetching fix records:",$),m([])}finally{p(!1)}},[n,o.employeeSearch,o.dateFrom,o.dateTo,o.status]);x.useEffect(()=>{q()},[q]);const J=($,X)=>{c(Q=>({...Q,[$]:X}))},O=()=>{c(qy)},M=$=>{if(!a){window.alert("You do not have permission to edit fix logs.");return}f($);let X="";if($!=null&&$.checktimedate){const Q=String($.checktimedate).trim(),Ne=Q.match(/^(\d{4})-(\d{2})-(\d{2})/);Ne?X=Ne[0]:X=Q.split(/[T\s]/)[0]}v({emp_objid:($==null?void 0:$.emp_objid)||"",employeeName:($==null?void 0:$.employeeName)||"",checktimedate:X,am_checkin:ha(($==null?void 0:$.am_checkin)||""),am_checkout:ha(($==null?void 0:$.am_checkout)||""),pm_checkin:ha(($==null?void 0:$.pm_checkin)||""),pm_checkout:ha(($==null?void 0:$.pm_checkout)||""),remarks:($==null?void 0:$.remarks)||""}),D(""),j(!0)},k=()=>{j(!1),v(Vy),f(null),D("")},I=$=>{const{name:X,value:Q}=$.target;v(Ne=>({...Ne,[X]:Q}))},K=async $=>{var X,Q;if($.preventDefault(),!y.emp_objid||!y.checktimedate){D("Employee ObjID and Fix Log Date are required.");return}if(!h){D("Edit mode only. Cannot create new entries.");return}if(!a){window.alert("You do not have permission to update fix logs.");return}try{b(!0),D("");const Ne={emp_objid:y.emp_objid,checktimedate:y.checktimedate,am_checkin:y.am_checkin||null,am_checkout:y.am_checkout||null,pm_checkin:y.pm_checkin||null,pm_checkout:y.pm_checkout||null,remarks:y.remarks||null};h!=null&&h.fixid?await oe.put(`/dtr-fix-checktime/${h.fixid}`,Ne):await oe.post("/dtr-fix-checktime",Ne),k(),await q()}catch(Ne){console.error("Error saving fix log:",Ne),D(((Q=(X=Ne.response)==null?void 0:X.data)==null?void 0:Q.message)||"Failed to save fix log.")}finally{b(!1)}},z=async $=>{if(!l){window.alert("You do not have permission to delete fix logs.");return}if($!=null&&$.fixid&&window.confirm("Delete this fix log entry?"))try{await oe.delete(`/dtr-fix-checktime/${$.fixid}`),await q()}catch(X){console.error("Error deleting fix log:",X),window.alert("Failed to delete fix log.")}},P=async $=>{if(!i){window.alert("You do not have permission to approve fix logs.");return}$!=null&&$.fixid&&(_("approve"),A($),F(""),C(!0))},R=async $=>{if(!i){window.alert("You do not have permission to cancel fix logs.");return}$!=null&&$.fixid&&(_("cancel"),A($),F(""),C(!0))},B=()=>{C(!1),_(null),A(null),F("")},U=async()=>{if(!(!(E!=null&&E.fixid)||!T)){if(!i){window.alert(`You do not have permission to ${T} fix logs.`);return}if(!(T==="cancel"&&!L.trim()))try{Y(!0);const $={remarks:L.trim()||null};T==="approve"?await oe.put(`/dtr-fix-checktime/${E.fixid}/approve`,$):T==="cancel"&&await oe.put(`/dtr-fix-checktime/${E.fixid}/cancel`,$),B(),await q()}catch($){console.error(`Error ${T}ing fix log:`,$),window.alert(`Failed to ${T} fix log.`)}finally{Y(!1)}}},G=($,X)=>{switch($){case"edit":M(X);break;case"delete":z(X);break;case"approve":P(X);break;case"cancel":R(X);break;default:console.log("[DTR FIX LOG] Unknown action:",$,X)}};return s?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-white border border-dashed rounded-lg p-8 text-center text-gray-500",children:"Loading permissions..."})}):n?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Filters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee"}),e.jsx("input",{type:"text",value:o.employeeSearch,onChange:$=>J("employeeSearch",$.target.value),placeholder:"Search by name, badge, or ID",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date From"}),e.jsx("input",{type:"date",value:o.dateFrom,onChange:$=>J("dateFrom",$.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date To"}),e.jsx("input",{type:"date",value:o.dateTo,onChange:$=>J("dateTo",$.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:o.status,onChange:$=>J("status",$.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"All",children:"All"}),e.jsx("option",{value:"For Approval",children:"For Approval"}),e.jsx("option",{value:"Approved",children:"Approved"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"}),e.jsx("option",{value:"Cancel",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx("button",{onClick:q,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Apply Filters"}),e.jsx("button",{onClick:O,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Fix Logs"})}),u?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"Loading fix logs..."}):d.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No fix logs found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fix Log Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"AM-CheckIn"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"AM-CheckOut"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"PM-CheckIn"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"PM-CheckOut"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created By"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(($,X)=>{const Q=$.fixid??`${$.emp_objid||"emp"}-${$.checktimedate||X}`,Ne=$.employeeName||[$.LASTNAME,$.FIRSTNAME].filter(Boolean).join(", ")||"N/A",V=$.BADGENO||$.badgeno||$.badgeNo||"",re=$.PHOTOPATH||$.photopath||$.photo_path||$.photo||"",ne=or(re),xe=$.fixstatus||$.status||"For Approval";return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[ne?e.jsx("img",{src:ne,alt:Ne,className:"h-10 w-10 rounded-full object-cover border-2 border-gray-200",onError:me=>{me.target.style.display="none",me.target.nextSibling&&(me.target.nextSibling.style.display="flex")}}):null,e.jsx("div",{className:`h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-sm font-semibold text-gray-600 border-2 border-gray-200 ${ne?"hidden":""}`,children:eh(Ne)}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:Ne}),V&&e.jsx("div",{className:"text-xs text-gray-500",children:V})]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:vF($.checktimedate)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:$.am_checkin||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:$.am_checkout||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:$.pm_checkin||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:$.pm_checkout||"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center",children:[$.created_by_photo_path?e.jsx("img",{src:$.created_by_photo_path,alt:$.created_by_employee_name||$.created_by_name||$.createdByName||"Creator",className:"w-8 h-8 rounded-full object-cover border-2 border-gray-200 cursor-pointer",title:$.created_by_employee_name||$.created_by_name||$.createdByName||"Creator",onError:me=>{me.target.style.display="none",me.target.nextSibling&&(me.target.nextSibling.style.display="flex")}}):null,e.jsx("div",{className:`w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-xs text-gray-600 border-2 border-gray-200 cursor-pointer ${$.created_by_photo_path?"hidden":""}`,title:$.created_by_employee_name||$.created_by_name||$.createdByName||"Creator",children:eh($.created_by_employee_name||$.created_by_name||$.createdByName||"NA")})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(NF,{status:xe})}),e.jsx("td",{className:"px-4 py-3 text-center text-sm",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[xe==="For Approval"&&i&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>G("approve",$),className:"text-green-600 hover:text-green-800 transition-colors",title:"Approve",children:""}),e.jsx("button",{onClick:()=>G("cancel",$),className:"text-red-600 hover:text-red-800 transition-colors",title:"Cancel",children:""})]}),a&&e.jsx("button",{onClick:()=>G("edit",$),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit",children:""}),l&&e.jsx("button",{onClick:()=>G("delete",$),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete",children:""}),!a&&!l&&!(xe==="For Approval"&&i)&&e.jsx("span",{className:"text-xs text-gray-400",children:"No actions"})]})})]},Q)})})]})})]}),g&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between border-b px-6 py-4",children:[e.jsx("div",{className:"flex items-center gap-4 flex-1",children:(()=>{const $=h.PHOTOPATH||h.photopath||h.photo_path||"",X=$?or($):null,Q=h.employeeName||[h.LASTNAME,h.FIRSTNAME].filter(Boolean).join(", ")||"Employee";return e.jsxs(e.Fragment,{children:[X?e.jsx("img",{src:X,alt:Q,className:"w-12 h-12 rounded-full object-cover border-2 border-gray-200",onError:Ne=>{Ne.target.style.display="none",Ne.target.nextSibling&&(Ne.target.nextSibling.style.display="flex")}}):null,e.jsx("div",{className:`w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-sm font-semibold text-gray-600 border-2 border-gray-200 ${X?"hidden":""}`,children:eh(Q)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Edit Fix Log"}),e.jsx("p",{className:"text-sm text-gray-500",children:Q})]})]})})()}),e.jsx("button",{onClick:k,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold leading-none",children:""})]}),e.jsxs("form",{onSubmit:K,className:"px-6 py-6 space-y-4",children:[e.jsx("input",{type:"hidden",name:"emp_objid",value:y.emp_objid}),e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Fix Log Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"checktimedate",value:y.checktimedate,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:!a})]}),["am_checkin","am_checkout","pm_checkin","pm_checkout"].map($=>{const X=[ha(y.am_checkin),ha(y.am_checkout),ha(y.pm_checkin),ha(y.pm_checkout)].filter(Boolean),Q=jF(X);return e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:$.toUpperCase().replace("_","-")}),e.jsx("select",{name:$,value:y[$]||"",onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:!a,children:Q.map(Ne=>e.jsx("option",{value:Ne.value,children:Ne.label},Ne.value))})]},$)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remarks"}),e.jsx("textarea",{name:"remarks",value:y.remarks,onChange:I,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Add remarks or notes...",disabled:!a})]}),w&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:w}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-gray-200 pt-4",children:[e.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",disabled:N,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",disabled:N||!a,title:a?"":"You do not have permission to update fix logs",children:N?"Saving...":"Update"})]})]})]})}),S&&E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between border-b px-6 py-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:T==="approve"?"Approve Fix Log":"Cancel Fix Log"}),e.jsx("button",{onClick:B,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold leading-none",disabled:W,children:""})]}),e.jsxs("div",{className:"px-6 py-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Remarks ",T==="approve"?"(optional)":e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:L,onChange:$=>F($.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:T==="approve"?"Add approval remarks (optional)...":"Provide reason for cancellation...",disabled:W})]}),T==="cancel"&&!L.trim()&&e.jsx("p",{className:"text-sm text-red-600",children:"Please provide a reason for cancellation."})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-gray-200 px-6 py-4",children:[e.jsx("button",{type:"button",onClick:B,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",disabled:W,children:"Cancel"}),e.jsx("button",{type:"button",onClick:U,className:`px-4 py-2 rounded-lg text-white ${T==="approve"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"} disabled:bg-gray-400`,disabled:W||T==="cancel"&&!L.trim(),children:W?"Processing...":T==="approve"?"Approve":"Cancel"})]})]})})]}):e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-white border border-dashed rounded-lg p-8 text-center text-gray-500",children:"You do not have permission to view fix logs."})})},Gy=(t=0)=>{const s=Number.isFinite(t)?t:0;if(s<=0)return"0m";const r=Math.floor(s/60),n=Math.round(s%60);return r<=0?`${n}m`:n===0?`${r}h`:`${r}h ${n}m`},SF=t=>{if(!t)return"";const s=new Date(`${t}T00:00:00`);return Number.isNaN(s.getTime())?t:s.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})};function el(t){if(!t)return"";if(typeof t=="string"){const s=t.trim();if(!s)return"";const r=s.match(/T(\d{2}):(\d{2})/);if(r)return`${r[1]}:${r[2]}`;const n=s.match(/(\d{2}):(\d{2})/);if(n)return`${n[1]}:${n[2]}`}if(t instanceof Date&&!Number.isNaN(t.getTime())){const s=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0");return`${s}:${r}`}return""}function Gl(t){if(!t)return"";if(typeof t=="string"){const s=t.trim();if(!s)return"";const r=s.split(/[ T]/)[0];if(/^\d{4}-\d{2}-\d{2}$/.test(r))return r}if(t instanceof Date&&!Number.isNaN(t.getTime())){const s=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${s}-${r}-${n}`}return typeof t=="object"&&t!==null?Gl(t.date)||Gl(t.CHECKTIME)||Gl(t.DATE)||Gl(t.checktime):""}function vn(t){if(!t||typeof t!="string")return NaN;const[s,r]=t.split(":").map(Number);return Number.isNaN(s)||Number.isNaN(r)?NaN:s*60+r}function _F(t,s){if(!t||!s)return[null,null];const r=vn(t),n=vn(s);return Number.isNaN(r)||Number.isNaN(n)?[null,null]:[r,n]}function $c(t,s,r,n){const a=el(t)||r,l=el(s)||n;return _F(a,l)}function EF(t,s){if(!t||!s)return[];const r=[],n=new Date(`${t}T00:00:00`),a=new Date(`${s}T00:00:00`);if(Number.isNaN(n.getTime())||Number.isNaN(a.getTime()))return[];let l=new Date(n);for(;l<=a;)r.push(l.toISOString().slice(0,10)),l.setDate(l.getDate()+1);return r}function kF(t,s,r,n){const a=!!(t&&t.trim()),l=!!(s&&s.trim()),i=!!(r&&r.trim()),o=!!(n&&n.trim());return a&&l&&i&&o||a&&l&&o&&!i||a&&i&&o&&!l||a&&o?1:a&&l&&!i&&!o||!a&&!l&&i&&o||!a&&l&&i&&o||a&&l&&i&&!o||a&&!l&&i&&!o||!a&&l&&!i&&o?.5:0}function CF(t=[]){const s=t.map(r=>Gl((r==null?void 0:r.CHECKTIME)||(r==null?void 0:r.DATE)||(r==null?void 0:r.date))).filter(Boolean).sort();return s.length===0?{start:"",end:""}:{start:s[0],end:s[s.length-1]}}function AF(t=[],s,r,n){if(!Array.isArray(t))return{rows:[],totalLates:0,totalDays:0,rangeStart:"",rangeEnd:""};const a=CF(t),l=r||a.start||a.end||"",i=n||a.end||a.start||"";if(!l||!i)return{rows:[],totalLates:0,totalDays:0,rangeStart:"",rangeEnd:""};const[o,c]=$c(s==null?void 0:s.SHIFT_AMCHECKIN_START,s==null?void 0:s.SHIFT_AMCHECKIN_END,"04:00","11:30"),[d,m]=$c(s==null?void 0:s.SHIFT_AMCHECKOUT_START,s==null?void 0:s.SHIFT_AMCHECKOUT_END,"11:00","13:30"),[u,p]=$c(s==null?void 0:s.SHIFT_PMCHECKIN_START,s==null?void 0:s.SHIFT_PMCHECKIN_END,"12:31","15:00"),[g,j]=$c(s==null?void 0:s.SHIFT_PMCHECKOUT_START,s==null?void 0:s.SHIFT_PMCHECKOUT_END,"15:00","23:59"),y=vn(el(s==null?void 0:s.SHIFT_AMCHECKIN)),v=vn(el(s==null?void 0:s.SHIFT_PMCHECKIN)),h=vn(el(s==null?void 0:s.SHIFT_AMCHECKOUT)),f=vn(el(s==null?void 0:s.SHIFT_PMCHECKOUT)),N=t.reduce((C,T)=>{const _=Gl((T==null?void 0:T.CHECKTIME)||(T==null?void 0:T.DATE)||(T==null?void 0:T.date));return _&&(C[_]||(C[_]=[]),C[_].push(T)),C},{}),b=EF(l,i),w=[];let D=0,S=0;return b.forEach(C=>{var k,I,K,z;const T=N[C]||[],_=T.map(P=>{const R=el((P==null?void 0:P.CHECKTIME)||(P==null?void 0:P.DATE)||(P==null?void 0:P.date)),B=vn(R);return{time:R,minutes:B,raw:P}}).filter(P=>P.time&&!Number.isNaN(P.minutes)),E=_.filter(P=>o!==null&&c!==null?P.minutes>=o&&P.minutes<=c:P.minutes<12*60).sort((P,R)=>P.minutes-R.minutes),A=_.filter(P=>d!==null&&m!==null?P.minutes>=d&&P.minutes<=m:P.minutes>=11*60&&P.minutes<=15*60).sort((P,R)=>P.minutes-R.minutes),L=_.filter(P=>u!==null&&p!==null?P.minutes>=u&&P.minutes<=p:P.minutes>=12*60).sort((P,R)=>P.minutes-R.minutes),F=_.filter(P=>g!==null&&j!==null?P.minutes>=g&&P.minutes<=j:P.minutes>=12*60).sort((P,R)=>R.minutes-P.minutes),W=((k=E[0])==null?void 0:k.time)||"",Y=((I=A[0])==null?void 0:I.time)||"",q=((K=L[0])==null?void 0:K.time)||"",J=((z=F[0])==null?void 0:z.time)||"";let O=0;if(W&&Number.isFinite(y)){const P=vn(W);!Number.isNaN(P)&&P>y&&(O+=P-y)}if(q&&Number.isFinite(v)){const P=vn(q);!Number.isNaN(P)&&P>v&&(O+=P-v)}if(Y&&Number.isFinite(h)){const P=vn(Y);!Number.isNaN(P)&&P<h&&(O+=h-P)}if(J&&Number.isFinite(f)){const P=vn(J);!Number.isNaN(P)&&P<f&&(O+=f-P)}const M=kF(W,Y,q,J);w.push({date:C,displayDate:SF(C),amCheckIn:W||"",amCheckOut:Y||"",pmCheckIn:q||"",pmCheckOut:J||"",lateMinutes:Math.round(O),days:M,rawLogs:T}),D+=O,S+=M}),{rows:w,totalLates:Math.round(D),totalDays:Number(S.toFixed(2)),rangeStart:l,rangeEnd:i}}const tw=({isOpen:t,onClose:s,employee:r,monthLabel:n,periodLabel:a,logs:l=[],dateRange:i={startDate:"",endDate:""},shiftSchedule:o=null,loading:c=!1,error:d=null,onFixLog:m})=>{if(!t)return null;const u=r&&(bs(r.surname,r.firstname,r.middlename,r.extension)||r.name)||"",p=r?[r.department||r.DEPARTMENT,r.position||r.TITLE].filter(Boolean).join(" - "):"",{rows:g,totalLates:j,totalDays:y,rangeStart:v,rangeEnd:h}=x.useMemo(()=>AF(l,o,i==null?void 0:i.startDate,i==null?void 0:i.endDate),[l,o,i==null?void 0:i.startDate,i==null?void 0:i.endDate]),f=x.useMemo(()=>{const N=(i==null?void 0:i.startDate)||v,b=(i==null?void 0:i.endDate)||h;if(!N||!b)return"";const w=new Date(`${N}T00:00:00`),D=new Date(`${b}T00:00:00`);if(Number.isNaN(w.getTime())||Number.isNaN(D.getTime()))return"";const S=w.getMonth()===D.getMonth()&&w.getFullYear()===D.getFullYear(),C=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"});return S?`${C.format(w)}  ${D.getDate()}`:`${C.format(w)}  ${C.format(D)}`},[i,v,h]);return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-900 bg-opacity-60",onClick:s}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[r!=null&&r.photo_path||r!=null&&r.PHOTO?e.jsx("img",{src:r.photo_path||r.PHOTO,alt:u,className:"w-16 h-16 rounded-full object-cover border-2 border-indigo-200",onError:N=>{N.target.style.display="none"}}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-indigo-100 flex items-center justify-center text-2xl font-semibold text-indigo-600",children:(u==null?void 0:u.charAt(0))||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:u}),p&&e.jsx("p",{className:"text-sm text-gray-500",children:p}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[n||"Selected Period","  ",a||"Full Month"]})]})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors focus:outline-none","aria-label":"Close modal",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:c?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Loading time logs..."})]}):d?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center px-6",children:[e.jsx("p",{className:"text-sm text-red-600 font-medium mb-2",children:"Unable to load time logs"}),e.jsx("p",{className:"text-xs text-gray-500",children:d})]}):g.length===0?e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center px-6",children:e.jsx("p",{className:"text-sm text-gray-600",children:"No time logs found for the selected period."})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"AM Check-In"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"AM Check-Out"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"PM Check-In"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"PM Check-Out"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Lates"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Day"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(N=>{const b=!!m&&N.rawLogs.length>0;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:N.displayDate}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:N.amCheckIn}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:N.amCheckOut}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:N.pmCheckIn}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:N.pmCheckOut}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:Gy(N.lateMinutes)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:N.days||0}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsx("button",{type:"button",onClick:()=>b&&(m==null?void 0:m(N)),disabled:!b,className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-50 hover:bg-blue-100 text-blue-600 hover:text-blue-800 transition-colors border border-blue-100 shadow-sm hover:shadow disabled:bg-gray-200 disabled:text-gray-400 disabled:cursor-not-allowed",title:b?"Fix Time":"Fix Time unavailable",children:e.jsx("span",{role:"img","aria-label":"Fix Time",children:""})})})]},N.date)})}),e.jsx("tfoot",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-700",colSpan:5,children:"Totals"}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-indigo-700",children:Gy(j)}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-indigo-700",children:Number(y||0).toFixed(2)}),e.jsx("td",{className:"px-4 py-3"})]})})]})})})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Days Displayed"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:g.length})]}),f&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Range"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:f})]})]}),e.jsx("button",{onClick:s,className:"inline-flex items-center justify-center px-6 py-2.5 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Close"})]})]})]})},DF=t=>{if(!t)return null;const s=c=>{if(Number.isNaN(c.getTime()))return null;const d=c.getFullYear(),m=c.getMonth()+1;return{year:d,month:m,monthName:c.toLocaleString("en-US",{month:"long"}),shortMonth:c.toLocaleString("en-US",{month:"short"}),label:c.toLocaleString("en-US",{month:"long",year:"numeric"})}},r=new Date(t);if(!Number.isNaN(r.getTime()))return s(r);if(/^\d{4}-\d{2}$/.test(t)){const c=new Date(`${t}-01`);if(!Number.isNaN(c.getTime()))return s(c)}const n=t.trim(),a=n.match(/(19|20)\d{2}/),l=a?parseInt(a[0],10):new Date().getFullYear(),i=a?n.replace(a[0],"").trim():n,o=new Date(`${i} 1, ${l}`);return Number.isNaN(o.getTime())?null:s(o)},TF=({selectedMonth:t,processMode:s="recompute",onBack:r})=>{const[n,a]=x.useState([]),[l,i]=x.useState(""),[o,c]=x.useState([]),[d,m]=x.useState([]),[u,p]=x.useState("1"),[g,j]=x.useState("all"),[y,v]=x.useState([]),[h,f]=x.useState(new Set),[N,b]=x.useState(!1),[w,D]=x.useState(!0),[S,C]=x.useState(""),[T,_]=x.useState([]),[E,A]=x.useState(""),[L,F]=x.useState([]),[W,Y]=x.useState(new Set),[q,J]=x.useState(!1),[O,M]=x.useState({"1st Half":new Set,"Full Month":new Set,"2nd Half":new Set}),[k,I]=x.useState(!1),[K,z]=x.useState(!1),[P,R]=x.useState([]),[B,U]=x.useState(!1),[G,$]=x.useState(1),[X,Q]=x.useState(10),[Ne,V]=x.useState(0),[re,ne]=x.useState(null),[xe,me]=x.useState(!1),[Z,ee]=x.useState([]),[ye,ve]=x.useState({startDate:"",endDate:""}),[ue,we]=x.useState(null),[De,le]=x.useState(!1),[Ie,ge]=x.useState(""),[Ge,ke]=x.useState({monthLabel:"",periodLabel:""}),[Re,Ke]=x.useState(!1),[Xe,Se]=x.useState(null),[lt,it]=x.useState({emp_objid:"",checktimedate:"",am_checkin:"",am_checkout:"",pm_checkin:"",pm_checkout:"",remarks:""}),[Pt,Nt]=x.useState(null),[At,Ce]=x.useState(!1),[Ze,fe]=x.useState(!1),[Pe,Le]=x.useState("");x.useEffect(()=>{(async()=>{try{console.log(" Fetching employees from MySQL employees table...");const We=await oe.get("/201-employees");if(We.data.success&&We.data.data){const ct=We.data.data.map(Ye=>{const te=bs(Ye.surname,Ye.firstname,Ye.middlename,Ye.extension);return{...Ye,NAME:te||String(Ye.fullname||`${Ye.firstname||""} ${Ye.middlename||""} ${Ye.surname||""}`.trim()),BADGENUMBER:String(Ye.dtrbadgenumber||Ye.badgenumber||""),USERID:Ye.dtruserid||Ye.userid||Ye.objid,DEPARTMENT:String(Ye.department_name||Ye.department||""),TITLE:String(Ye.position_title||Ye.position||""),photo_path:Ye.photo_path||Ye.photo||null,PHOTO:Ye.photo_path||Ye.photo||null,Appointment:Ye.appointment_status||Ye.appointmentstatus||null,STATUS_ID:Ye.empstatusid??Ye.empstatid??Ye.statusid??null,STATUS:Ye.empstatus||Ye.employeestatus||null,objid:Ye.objid,idno:Ye.idno,surname:Ye.surname,firstname:Ye.firstname,middlename:Ye.middlename,extension:Ye.extension}});console.log(" Employees fetched from MySQL:",ct.length),F(ct)}else console.error(" Invalid response structure:",We.data),F([])}catch(We){console.error(" Error fetching employees from MySQL:",We),F([])}})()},[]),x.useEffect(()=>{(async()=>{try{console.log(" Fetching departments from ComputeAttendance API...");const We=await oe.get("/compute-attendance/departments");console.log(" Departments fetched:",We.data.length),a(We.data)}catch(We){console.error(" Error fetching departments:",We)}})()},[]),x.useEffect(()=>{const _e=async()=>{var ct;try{console.log(" Fetching employee status types...");const Ye=await oe.get("/201-employees/lookup/employeestatustypes");Array.isArray(Ye.data)?c(Ye.data):(ct=Ye.data)!=null&&ct.data?c(Ye.data.data):(console.warn(" Unexpected employee status response:",Ye.data),c([]))}catch(Ye){console.error(" Error fetching employee status types:",Ye),c([])}},We=async()=>{var ct;try{console.log(" Fetching appointment types from MySQL...");const Ye=await oe.get("/201-employees/lookup/appointmenttypes");Ye.data.success?(console.log(" Appointment types fetched:",Ye.data.data.length),m(Ye.data.data)):(ct=Ye.data)!=null&&ct.data?m(Ye.data.data):Array.isArray(Ye.data)?m(Ye.data):(console.warn(" Unexpected appointment types response:",Ye.data),m([]))}catch(Ye){console.error(" Error fetching appointment types:",Ye),m([])}};_e(),We()},[]),x.useEffect(()=>{if(S.trim()==="")_(y);else{const _e=y.filter(We=>String(We.NAME||"").toLowerCase().includes(S.toLowerCase())||String(We.BADGENUMBER||"").toLowerCase().includes(S.toLowerCase()));_(_e)}},[S,y]),x.useEffect(()=>{(l||u!=="all"||g!=="all")&&L.length>0?ut():(v([]),f(new Set),_([]),C(""))},[l,u,g,L]);const ut=async()=>{b(!0),v([]),f(new Set),_([]),C("");try{let _e=[...L];if(console.log(` Starting with ${_e.length} total employees`),l&&(_e=_e.filter(We=>We.DEPARTMENT===l),console.log(` After department filter (${l}): ${_e.length} employees`)),u!=="all"){const We=parseInt(u);_e=_e.filter(ct=>{const Ye=ct.STATUS_ID??ct.STATUS,te=Ye!=null?parseInt(Ye):null;return!Number.isNaN(We)&&te===We}),console.log(` After status filter (${u}): ${_e.length} employees`)}if(g!=="all"){const We=parseInt(g);_e=_e.filter(ct=>ct.Appointment===null||ct.Appointment===void 0?!1:parseInt(ct.Appointment)===We),console.log(` After appointment filter (${We}): ${_e.length} employees`)}console.log(" Final filtered employees:",_e.length),v(_e),_(_e)}catch(_e){console.error(" Error fetching department employees:",_e)}finally{b(!1)}},Be=x.useMemo(()=>DF(t),[t]),mt=(_e,We="full")=>{if(!_e)return{startDate:"",endDate:""};const ct=_e.year,Ye=String(_e.month).padStart(2,"0");let te,Me;if(We==="full"){te=`${ct}-${Ye}-01`;const rt=new Date(ct,_e.month,0).getDate();Me=`${ct}-${Ye}-${rt.toString().padStart(2,"0")}`}else if(We==="first")te=`${ct}-${Ye}-01`,Me=`${ct}-${Ye}-15`;else if(We==="second"){te=`${ct}-${Ye}-16`;const rt=new Date(ct,_e.month,0).getDate();Me=`${ct}-${Ye}-${rt.toString().padStart(2,"0")}`}return console.log(" Period range calculated:",{period:We,startDate:te,endDate:Me}),{startDate:te,endDate:Me}},qe=x.useCallback(async()=>{if(!Be||y.length===0){M({"1st Half":new Set,"Full Month":new Set,"2nd Half":new Set}),I(!1);return}try{z(!0);const _e=Be.monthName,We=Be.year,ct=y.map(te=>te.objid).filter(te=>te);if(ct.length===0){M({"1st Half":new Set,"Full Month":new Set,"2nd Half":new Set}),I(!1);return}console.log(" Checking all periods for ALL department employees:",{monthName:_e,computedYear:We,employeeCount:ct.length});const Ye=await oe.get("/compute-attendance/check-all-periods",{params:{computedmonth:_e,computedyear:We,emp_objids:ct.join(",")}});if(Ye.data.success){const te=Ye.data.periods||{},Me={"1st Half":new Set(te["1st Half"]||[]),"Full Month":new Set(te["Full Month"]||[]),"2nd Half":new Set(te["2nd Half"]||[])};M(Me),I(!1),console.log(" Period check completed for ALL employees:",{"1st Half":Me["1st Half"].size,"Full Month":Me["Full Month"].size,"2nd Half":Me["2nd Half"].size})}else M({"1st Half":new Set,"Full Month":new Set,"2nd Half":new Set}),I(!1)}catch(_e){console.error(" Error checking all periods:",_e),M({"1st Half":new Set,"Full Month":new Set,"2nd Half":new Set}),I(!1)}finally{z(!1)}},[Be,y]);x.useEffect(()=>{Be&&y.length>0?qe():(M({"1st Half":new Set,"Full Month":new Set,"2nd Half":new Set}),I(!1))},[Be,y,qe]),x.useEffect(()=>{A(""),f(new Set),v([])},[t]),x.useEffect(()=>{if(E&&y.length>0){const _e=y.filter(ct=>E==="full"?O["Full Month"].has(ct.objid):E==="first"?O["1st Half"].has(ct.objid):E==="second"?O["2nd Half"].has(ct.objid):!1),We=new Set(_e.map(ct=>ct.USERID));f(We),console.log(` Auto-selected ${We.size} employees with existing ${E} records`)}else E||f(new Set)},[E,y,O]);const Oe=()=>{if(!Be)return[{value:"full",label:"Full Month",disabled:!1},{value:"first",label:"1st Half",disabled:!1},{value:"second",label:"2nd Half",disabled:!1}];const _e=Be.shortMonth,We=new Date(Be.year,Be.month,0).getDate();return[{value:"full",label:`Full Month (${_e})`,disabled:!1},{value:"first",label:`1st Half (${_e} 1 - ${_e} 15)`,disabled:!1},{value:"second",label:`2nd Half (${_e} 16 - ${_e} ${We})`,disabled:!1}]},He=_e=>{console.log(" Department employee selection toggled:",_e);const We=new Set(h);We.has(_e)?(We.delete(_e),console.log(" Employee deselected:",_e)):(We.add(_e),console.log(" Employee selected:",_e)),f(We),console.log(" Total selected employees:",We.size)},Kt=()=>{console.log(" Select all department employees toggled");const _e=y.filter(Ye=>E==="full"?O["Full Month"].has(Ye.objid):E==="first"?O["1st Half"].has(Ye.objid):E==="second"?O["2nd Half"].has(Ye.objid):!1),We=new Set(_e.map(Ye=>Ye.USERID));if(We.size>0&&Array.from(We).every(Ye=>h.has(Ye))){console.log(" Deselecting all available employees");const Ye=new Set(h);We.forEach(te=>Ye.delete(te)),f(Ye)}else{console.log(" Selecting all available employees");const Ye=new Set(h);We.forEach(te=>Ye.add(te)),f(Ye)}},rs=()=>{console.log(" Select all filtered employees toggled");const _e=T.filter(Ye=>E==="full"?O["Full Month"].has(Ye.objid):E==="first"?O["1st Half"].has(Ye.objid):E==="second"?O["2nd Half"].has(Ye.objid):!1),We=new Set(_e.map(Ye=>Ye.USERID));if(We.size>0&&Array.from(We).every(Ye=>h.has(Ye))){console.log(" Deselecting all filtered employees");const Ye=new Set(h);We.forEach(te=>Ye.delete(te)),f(Ye)}else{console.log(" Selecting all available filtered employees");const Ye=new Set(h);We.forEach(te=>Ye.add(te)),f(Ye)}},qt=x.useMemo(()=>Array.from(h).sort().join(","),[h.size]),zt=x.useCallback(async()=>{var _e,We;try{if(U(!0),console.log(" Fetching computed DTR records for Recompute mode",{monthLabel:Be==null?void 0:Be.label,selectedPeriod:E,selectedEmployeesCount:h.size,departmentEmployeesCount:y.length}),!Be||!E){console.log(" Missing required parameters:",{selectedMonth:t,selectedPeriod:E}),R([]);return}if(h.size===0||y.length===0){console.log(" No employees selected or available"),R([]);return}const ct=Be.monthName,Ye=Be.year,Me={full:"Full Month",first:"1st Half",second:"2nd Half"}[E]||E;console.log(" Fetching for:",{monthName:ct,computedYear:Ye,periodValue:Me});const rt=Array.from(h),xt=y.filter($e=>rt.includes($e.USERID));console.log(" Processing employees:",xt.length,"out of",rt.length,"selected");const Mt=[];for(const $e of xt)try{console.log(` Fetching for employee: ${$e.NAME} (${$e.objid})`);const et=await oe.get(`/computed-dtr/employee/${$e.objid}`,{params:{computedmonth:ct,computedyear:Ye,period:Me}});if(et.data.success&&et.data.data&&et.data.data.length>0){const Te=et.data.data[0],he=await oe.get(`/computed-dtr/${Te.computeid}/details`);Mt.push({employeeId:$e.USERID,name:$e.NAME,department:$e.DEPARTMENT,position:$e.TITLE,photo_path:$e.photo_path||$e.PHOTO||null,objid:$e.objid,computeid:Te.computeid,lates:Te.total_lates||0,days:Te.total_days||0,netDays:Te.total_netdays||0,locatorsCount:0,leavesCount:Te.total_leaves||0,travelsCount:Te.total_travels||0,cdoCount:Te.total_cdo||0,computestatus:Te.computestatus,details:he.data.success?he.data.data:[],status:"Loaded from Database"}),console.log(` Added record for ${$e.NAME} with computeid: ${Te.computeid}`)}else console.log(` No computed DTR found for ${$e.NAME}`),Mt.push({employeeId:$e.USERID,name:$e.NAME,department:$e.DEPARTMENT,position:$e.TITLE,photo_path:$e.photo_path||$e.PHOTO||null,objid:$e.objid,status:"No computed DTR found"})}catch(et){console.error(` Error fetching computed DTR for employee ${$e.USERID}:`,et),Mt.push({employeeId:$e.USERID,name:$e.NAME,department:$e.DEPARTMENT,position:$e.TITLE,photo_path:$e.photo_path||$e.PHOTO||null,objid:$e.objid,status:"Error: "+(((We=(_e=et.response)==null?void 0:_e.data)==null?void 0:We.message)||et.message)})}R(Mt);const Ee=Mt.filter($e=>$e.computeid);console.log(" Computed DTR records fetched:",{total:Mt.length,withComputeId:Ee.length,withoutComputeId:Mt.length-Ee.length})}catch(ct){console.error(" Error fetching computed DTR records:",ct),R([])}finally{U(!1)}},[Be,E,qt,y]);x.useEffect(()=>{Be&&E&&h.size>0&&y.length>0?(console.log(" RecomputedDTRAttendance: Triggering fetchComputedDtrRecords",{monthLabel:Be.label,selectedPeriod:E,selectedEmployeesCount:h.size,departmentEmployeesCount:y.length,selectedEmployeesKey:qt}),zt()):(console.log(" RecomputedDTRAttendance: Clearing data - conditions not met"),R([]))},[Be,E,qt,y.length,zt]);const xs=async _e=>{if(!Be||!E)throw new Error("Please select month and period");if(!_e.objid||!_e.employeeId)throw new Error("Employee data is incomplete");console.log(" Recomputing attendance for employee:",_e.name,_e.employeeId);const{startDate:We,endDate:ct}=mt(Be,E),Ye=await oe.post("/compute-attendance/calculate",{userId:_e.employeeId,startDate:We,endDate:ct});if(!Ye.data.success)throw new Error(Ye.data.message||"Failed to calculate attendance");const te=Ye.data.data,Me=Be.monthName,rt=Be.year,Mt={full:"Full Month",first:"1st Half",second:"2nd Half"}[E]||E,Ee=await oe.get(`/computed-dtr/employee/${_e.objid}`,{params:{computedmonth:Me,computedyear:rt,period:Mt}}),$e=Ee.data.success&&Ee.data.data&&Ee.data.data.length>0?Ee.data.data[0]:null,et=te.dailyData||[],Te={emp_objid:_e.objid,batchid:null,computedmonth:Me,computedyear:rt,period:Mt,total_lates:te.totalLates||0,total_days:te.totalDays||0,total_netdays:te.netDays||0,total_cdo:te.cdoCount||0,total_travels:te.travelsCount||0,total_leaves:te.leavesCount||0,total_fixtimes:0,computeremarks:null,computestatus:($e==null?void 0:$e.computestatus)||"For Approval",details:et};$e?(await oe.put(`/computed-dtr/${$e.computeid}`,Te),console.log(` Updated computed DTR for employee ${_e.employeeId}`)):(await oe.post("/computed-dtr",Te),console.log(` Created computed DTR for employee ${_e.employeeId}`))},ms=async _e=>{var We,ct;try{U(!0),await xs(_e),await zt(),alert(`Successfully recomputed attendance for ${_e.name}`)}catch(Ye){console.error(" Error recomputing attendance:",Ye),alert("Error recomputing attendance: "+(((ct=(We=Ye.response)==null?void 0:We.data)==null?void 0:ct.message)||Ye.message))}finally{U(!1)}},Ut=async()=>{var ct,Ye;if(!Be||!E){alert("Please select month and period");return}const _e=Qt.filter(te=>te.computeid&&h.has(te.employeeId));if(_e.length===0){alert("No selected employees available for recomputation.");return}if(!window.confirm(`Recompute DTR for ${_e.length} selected employees?`))return;U(!0);const We={success:[],failed:[]};try{for(const Me of _e)try{await xs(Me),We.success.push(Me.name||Me.employeeId)}catch(rt){console.error(` Error recomputing ${Me.name}:`,rt),We.failed.push(`${Me.name||Me.employeeId}: ${rt.message||"Unknown error"}`)}await zt();let te="";We.success.length>0&&(te+=`Successfully recomputed ${We.success.length} employees.`),We.failed.length>0&&(te+=`
Failed: ${We.failed.length}.
${We.failed.join(`
`)}`),alert(te||"Recompute process completed.")}catch(te){console.error(" Error during bulk recompute:",te),alert("Error during bulk recompute: "+(((Ye=(ct=te.response)==null?void 0:ct.data)==null?void 0:Ye.message)||te.message))}finally{U(!1)}},$t=()=>{alert("Print Computed DTR is not yet implemented.")},Qt=P.filter(_e=>_e.computeid),gs=x.useMemo(()=>{const _e=Qt.reduce((We,ct)=>{const Ye=Number(ct.lates)||0,te=Number(ct.days)||0,Me=Number(ct.netDays)||0;return We.totalLates+=isNaN(Ye)?0:Ye,We.totalDays+=isNaN(te)?0:te,We.totalNetDays+=isNaN(Me)?0:Me,We.totalLocators+=Number(ct.locatorsCount)||0,We.totalLeaves+=Number(ct.leavesCount)||0,We.totalTravels+=Number(ct.travelsCount)||0,We.totalCdo+=Number(ct.cdoCount)||0,We},{totalLates:0,totalDays:0,totalNetDays:0,totalLocators:0,totalLeaves:0,totalTravels:0,totalCdo:0});return{totalLates:isNaN(_e.totalLates)?0:_e.totalLates,totalDays:isNaN(_e.totalDays)?0:_e.totalDays,totalNetDays:isNaN(_e.totalNetDays)?0:Math.round(_e.totalNetDays*1e4)/1e4,totalLocators:isNaN(_e.totalLocators)?0:_e.totalLocators,totalLeaves:isNaN(_e.totalLeaves)?0:_e.totalLeaves,totalTravels:isNaN(_e.totalTravels)?0:_e.totalTravels,totalCdo:isNaN(_e.totalCdo)?0:_e.totalCdo}},[Qt]),Yt=x.useMemo(()=>{const _e=(G-1)*X,We=_e+X;return Qt.slice(_e,We)},[Qt,G,X]);x.useEffect(()=>{const _e=Math.ceil(Qt.length/X);V(_e),G>_e&&_e>0&&$(1)},[Qt.length,X,G]),x.useEffect(()=>{$(1)},[Qt.length]);const os=async _e=>{if(!(!_e||!_e.employeeId))try{if(le(!0),ge(""),me(!0),ne(_e),we(_e.shiftSchedule||null),!Be||!E){ge("Please select a month and period to view logs."),ee([]);return}const{startDate:We,endDate:ct}=mt(Be,E);ve({startDate:We,endDate:ct});const Ye=_e.shiftSchedule?Promise.resolve(_e.shiftSchedule):_e.employeeId?Du(_e.employeeId):Promise.resolve(null),[te,Me]=await Promise.all([oe.get("/compute-attendance/time-logs",{params:{userId:_e.employeeId,startDate:We,endDate:ct}}),Ye]),rt=Array.isArray(te.data)?te.data:[];ee(rt),we(Me||_e.shiftSchedule||null);const xt=Be?Be.label:"";ke({monthLabel:xt,periodLabel:{full:"Full Month",first:"1st Half",second:"2nd Half"}[E]||E})}catch(We){console.error(" Error fetching details:",We),ge("Failed to load attendance details"),ee([]),we(null)}finally{le(!1)}},Zt=_e=>{if(!_e)return null;const We=_e.date||_e.DATE_RAW||_e.DATE||"";if(!We)return null;const ct=String(We).trim(),Ye=ct.match(/^(\d{4})-(\d{2})-(\d{2})/);if(Ye)return Ye[0];const te=new Date(ct);if(!Number.isNaN(te.getTime())){const Me=te.getFullYear(),rt=String(te.getMonth()+1).padStart(2,"0"),xt=String(te.getDate()).padStart(2,"0");return`${Me}-${rt}-${xt}`}return null},Jt=_e=>{if(!_e||_e==="-")return"";const We=String(_e).trim();if(!We)return"";const ct=We.match(/^(\d{1,2}):(\d{2})(?::\d{2})?$/);if(ct){const Ye=String(parseInt(ct[1],10)).padStart(2,"0"),te=ct[2];return`${Ye}:${te}`}return We},es=_e=>{!_e||!re||be(_e)},be=_e=>{if(!re){window.alert("Employee information is missing.");return}const We=re.objid;if(!We){window.alert("Employee ObjID is required for Fix Time entry.");return}const ct=Zt(_e);if(!ct){window.alert("Selected log does not have a valid date.");return}const Ye={normalizedDate:ct,AM_CHECKIN:_e.amCheckIn==="-"?"":_e.amCheckIn,AM_CHECKOUT:_e.amCheckOut==="-"?"":_e.amCheckOut,PM_CHECKIN:_e.pmCheckIn==="-"?"":_e.pmCheckIn,PM_CHECKOUT:_e.pmCheckOut==="-"?"":_e.pmCheckOut,lateMinutes:_e.lateMinutes||0};Se(Ye),it({emp_objid:We,checktimedate:ct,am_checkin:Jt(Ye.AM_CHECKIN),am_checkout:Jt(Ye.AM_CHECKOUT),pm_checkin:Jt(Ye.PM_CHECKIN),pm_checkout:Jt(Ye.PM_CHECKOUT),remarks:""}),Nt(null),Le(""),Ke(!0),nt(We,ct)},nt=async(_e,We)=>{if(!(!_e||!We)){Ce(!0);try{const{data:ct}=await oe.get("/dtr-fix-checktime",{params:{emp_objid:_e,dateFrom:We,dateTo:We}}),Ye=Array.isArray(ct==null?void 0:ct.data)?ct.data[0]:null;Ye?(Nt(Ye),it(te=>({...te,am_checkin:Jt(Ye.am_checkin)||te.am_checkin,am_checkout:Jt(Ye.am_checkout)||te.am_checkout,pm_checkin:Jt(Ye.pm_checkin)||te.pm_checkin,pm_checkout:Jt(Ye.pm_checkout)||te.pm_checkout,remarks:Ye.remarks||te.remarks||""}))):Nt(null)}catch(ct){console.error("Error loading fix record:",ct),Le("Failed to load existing fix log.")}finally{Ce(!1)}}},tt=_e=>{const{name:We,value:ct}=_e.target;it(Ye=>({...Ye,[We]:ct}))},ft=async _e=>{var We,ct;if(_e.preventDefault(),!lt.emp_objid||!lt.checktimedate){Le("Employee ObjID and Fix Log Date are required.");return}try{fe(!0),Le("");const Ye={emp_objid:lt.emp_objid,checktimedate:lt.checktimedate,am_checkin:lt.am_checkin||null,am_checkout:lt.am_checkout||null,pm_checkin:lt.pm_checkin||null,pm_checkout:lt.pm_checkout||null,remarks:lt.remarks||null,fixstatus:(Pt==null?void 0:Pt.fixstatus)||"For Approval"};if(Pt!=null&&Pt.fixid?await oe.put(`/dtr-fix-checktime/${Pt.fixid}`,Ye):await oe.post("/dtr-fix-checktime",Ye),kt(),re&&ye.startDate&&ye.endDate){const te=await oe.get("/compute-attendance/time-logs",{params:{userId:re.employeeId,startDate:ye.startDate,endDate:ye.endDate}}),Me=Array.isArray(te.data)?te.data:[];ee(Me)}}catch(Ye){console.error("Error saving fix log:",Ye),Le(((ct=(We=Ye.response)==null?void 0:We.data)==null?void 0:ct.message)||"Failed to save fix log.")}finally{fe(!1)}},kt=()=>{Ke(!1),Se(null),Nt(null),it({emp_objid:"",checktimedate:"",am_checkin:"",am_checkout:"",pm_checkin:"",pm_checkout:"",remarks:""}),Le(""),Ce(!1),fe(!1)},_t=async _e=>{var We,ct;if(!_e.computeid){alert("Cannot delete: No compute ID found");return}if(window.confirm(`Are you sure you want to delete the computed DTR for ${_e.name}?`))try{U(!0),await oe.delete(`/computed-dtr/${_e.computeid}`),R(Ye=>Ye.filter(te=>te.computeid!==_e.computeid)),await zt(),alert(`Successfully deleted computed DTR for ${_e.name}`)}catch(Ye){console.error(" Error deleting computed DTR:",Ye),alert("Error deleting computed DTR: "+(((ct=(We=Ye.response)==null?void 0:We.data)==null?void 0:ct.message)||Ye.message))}finally{U(!1)}},cs=_e=>{$(_e)},as=_e=>{Q(Number(_e)),$(1)};return e.jsx("div",{className:"p-6 min-h-screen bg-red-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto bg-white bg-opacity-95 p-6 rounded-lg shadow-sm",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h2",{className:"text-2xl font-bold text-green-700",children:"Recompute DTR"})}),e.jsxs("div",{className:"mb-4 text-sm text-gray-600 hidden",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:"Process Mode:"})," ",s||""," "," ",e.jsx("span",{className:"font-semibold text-gray-800",children:"Selected Month:"})," ",Be?Be.label:""]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Step 2: Filter Employees"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Department"}),e.jsxs("select",{value:l,onChange:_e=>i(_e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a department..."}),n.map(_e=>e.jsx("option",{value:_e,children:_e},_e))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment"}),e.jsxs("select",{value:g,onChange:_e=>j(_e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Appointments"}),d.map(_e=>e.jsx("option",{value:_e.id,children:_e.appointmentname},_e.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Status"}),e.jsxs("select",{value:u,onChange:_e=>p(_e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Statuses"}),o.map(_e=>e.jsx("option",{value:_e.empstatid||_e.id,children:_e.empstatname||_e.employeestatus},_e.empstatid||_e.id))]})]})]})]}),y.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Step 3: Select Period"}),K&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),e.jsx("span",{children:"Checking existing periods..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Period"}),e.jsxs("select",{value:E,onChange:_e=>A(_e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"",disabled:!0,children:"Select a Period"}),Oe().map(_e=>e.jsx("option",{value:_e.value,disabled:_e.disabled,style:_e.disabled?{color:"#9ca3af",backgroundColor:"#f3f4f6"}:{},children:_e.label},_e.value))]})]})]}),E&&y.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Step 4: Select Employees"}),e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("button",{type:"button",onClick:()=>D(_e=>!_e),className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-t-lg transition-colors",children:[e.jsxs("div",{className:"text-left",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Select Employees (",y.length," found)"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[h.size," of ",y.length," selected"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[w?"Hide":"Show",e.jsx("svg",{className:`w-4 h-4 transform transition-transform ${w?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),w&&e.jsxs("div",{className:"p-4 space-y-4",children:[N&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),e.jsx("span",{children:"Loading employees..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Employees"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:S,onChange:_e=>C(_e.target.value),placeholder:"Search by name or badge number...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),S&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Showing ",T.length," of ",y.length," employees"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"selectAllDepartment",checked:y.length>0&&y.filter(_e=>E==="full"?O["Full Month"].has(_e.objid):E==="first"?O["1st Half"].has(_e.objid):E==="second"?O["2nd Half"].has(_e.objid):!1).every(_e=>h.has(_e.USERID)),onChange:Kt,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"selectAllDepartment",className:"ml-2 text-sm font-medium text-gray-700",children:"Select All Available Employees"}),(()=>{const _e=E==="full"?y.filter(We=>!O["Full Month"].has(We.objid)).length:E==="first"?y.filter(We=>!O["1st Half"].has(We.objid)).length:E==="second"?y.filter(We=>!O["2nd Half"].has(We.objid)).length:0;return _e>0&&e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",_e," excluded)"]})})()]}),S&&T.length>0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"selectAllFiltered",checked:T.length>0&&T.every(_e=>h.has(_e.USERID)),onChange:rs,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"selectAllFiltered",className:"ml-2 text-sm font-medium text-gray-700",children:["Select Filtered (",T.length," employees)"]})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[h.size," selected"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-96 overflow-y-auto border border-gray-200 rounded-lg p-4",children:T.map(_e=>{let We=!1,ct="";return E==="full"?O["Full Month"].has(_e.objid)||(We=!0,ct="No existing Full Month record"):E==="first"?O["1st Half"].has(_e.objid)||(We=!0,ct="No existing 1st Half record"):E==="second"&&(O["2nd Half"].has(_e.objid)||(We=!0,ct="No existing 2nd Half record")),e.jsx("div",{className:`p-3 border rounded-lg transition-colors ${We?"border-gray-300 bg-gray-100 opacity-60 cursor-not-allowed":h.has(_e.USERID)?"border-blue-500 bg-blue-50 cursor-pointer":"border-gray-200 hover:border-gray-300 cursor-pointer"}`,onClick:()=>{We||He(_e.USERID)},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:!We&&h.has(_e.USERID),onChange:()=>{We||He(_e.USERID)},disabled:We,className:`h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded ${We?"cursor-not-allowed opacity-50":""}`}),e.jsxs("div",{className:"ml-3 flex-1 flex items-center space-x-2",children:[_e.photo_path&&e.jsx("img",{src:_e.photo_path,alt:_e.NAME,className:"w-8 h-8 rounded-full object-cover",onError:Ye=>{Ye.target.style.display="none"}}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:`text-sm font-medium ${We?"text-gray-500":"text-gray-900"}`,children:_e.NAME}),We&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-yellow-100 text-yellow-800 border border-yellow-200",title:ct||"Unavailable",children:ct||(E?"Excluded":"Computed")})]}),_e.DEPARTMENT&&_e.TITLE&&e.jsxs("p",{className:`text-xs ${We?"text-gray-400":"text-gray-500"}`,children:[_e.DEPARTMENT," - ",_e.TITLE]})]})]})]})},_e.USERID)})})]})]})]}),B&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading computed DTR records..."})]}),!B&&Qt.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 bg-white px-6 py-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Show:"}),e.jsxs("select",{value:X,onChange:_e=>as(_e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{className:"text-sm text-gray-500",children:"records"})]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(G-1)*X+1," to ",Math.min(G*X,Qt.length)," of ",Qt.length," entries"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:Ut,disabled:B||h.size===0||Qt.length===0,className:"inline-flex items-center px-4 py-2 border border-green-600 text-green-700 hover:bg-green-50 rounded-md text-sm font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:" Recompute All"}),e.jsx("button",{type:"button",onClick:$t,disabled:B||Qt.length===0,className:"inline-flex items-center px-3 py-1 border border-blue-600 text-blue-700 hover:bg-blue-50 rounded-md text-sm font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Print Computed DTR",children:""})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No."}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leaves"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Locators"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Travels"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CDO"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lates"}),e.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days"}),e.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Net Days"}),e.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[150px]",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Yt.map((_e,We)=>{const ct=(G-1)*X+We+1,Ye=[_e.department,_e.position].filter(Boolean).join(" - ")||"";return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:ct}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:_e.name||""}),e.jsx("div",{className:"text-xs text-gray-500",children:Ye})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-green-50 text-green-700 border border-green-200",children:_e.leavesCount??0})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-blue-50 text-blue-700 border border-blue-200",children:_e.locatorsCount??0})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-purple-50 text-purple-700 border border-purple-200",children:_e.travelsCount??0})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-orange-50 text-orange-700 border border-orange-200",children:_e.cdoCount??0})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:Math.round(Number(_e.lates||0))}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-sm text-gray-900",children:Number(_e.days)||0}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-xs text-gray-900 w-20",children:Number(_e.netDays??0).toFixed(4)}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-sm text-gray-900 min-w-[150px]",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>os(_e),className:"text-blue-600 hover:text-blue-800 transition-colors text-lg",title:"View Attendance",children:""}),e.jsx("button",{type:"button",onClick:async()=>{await ms(_e)},className:"text-green-600 hover:text-green-800 transition-colors text-lg disabled:opacity-50 disabled:cursor-not-allowed",title:"Recompute Attendance",disabled:B,children:""}),e.jsx("button",{type:"button",onClick:()=>_t(_e),className:"text-red-600 hover:text-red-800 transition-colors text-lg disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Attendance",disabled:B,children:""})]})})]},_e.computeid??_e.employeeId??ct)})}),e.jsx("tfoot",{className:"bg-gray-50 border-t-2 border-gray-300",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:"2",className:"px-6 py-4 text-sm font-bold text-gray-900",children:"TOTALS"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-green-50 text-green-700 border border-green-200",children:gs.totalLeaves})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-blue-50 text-blue-700 border border-blue-200",children:gs.totalLocators})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-purple-50 text-purple-700 border border-purple-200",children:gs.totalTravels})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-orange-50 text-orange-700 border border-orange-200",children:gs.totalCdo})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:Math.round(Number(gs.totalLates||0))}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:Number(gs.totalDays||0).toFixed(3)}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-xs font-semibold text-gray-900 w-20",children:Number(gs.totalNetDays||0).toFixed(4)}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-sm text-gray-900 min-w-[150px]"})]})})]})}),Qt.length>0&&e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>cs(1),disabled:G===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"First"}),e.jsx("button",{onClick:()=>cs(Math.max(1,G-1)),disabled:G===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,Ne)},(_e,We)=>{let ct;return Ne<=5||G<=3?ct=We+1:G>=Ne-2?ct=Ne-4+We:ct=G-2+We,e.jsx("button",{onClick:()=>cs(ct),className:`px-3 py-1 text-sm border rounded-md ${G===ct?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"}`,children:ct},ct)})}),e.jsx("button",{onClick:()=>cs(Math.min(Ne,G+1)),disabled:G===Ne,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"}),e.jsx("button",{onClick:()=>cs(Ne),disabled:G===Ne,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Last"})]})})]}),!B&&Qt.length===0&&E&&h.size>0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No computed DTR records found for the selected employees and period."})}),!B&&!E&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"Please select a period to view computed DTR records."})}),!B&&E&&h.size===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"Please select employees to view computed DTR records."})}),xe&&re&&e.jsx(tw,{isOpen:xe,onClose:()=>{me(!1),ne(null),ee([]),ve({startDate:"",endDate:""}),we(null),ge("")},employee:re,monthLabel:Ge.monthLabel,periodLabel:Ge.periodLabel,logs:Z,dateRange:ye,shiftSchedule:ue,loading:De,error:Ie,onFixLog:es}),e.jsx(cx,{isOpen:Re,onClose:kt,employee:re,row:Xe,form:lt,onChange:tt,onSubmit:ft,loading:At,saving:Ze,error:Pe,existingRecord:Pt,shiftSchedule:ue})]})})},sw=()=>{const{can:t,canAccessPage:s,isRootAdmin:r,loading:n}=Vs(),a=s("compute-attendance")||r,l=r||t("compute-attendance","read");r||t("compute-attendance","update"),r||t("compute-attendance","print"),r||t("fix-dtr-checktime","update");const i=r||t("compute-attendance","delete"),o=r||s("recomputed-dtr");r||t("recomputed-dtr","update");const[c,d]=x.useState([]),[m,u]=x.useState(""),[p,g]=x.useState([]),[j,y]=x.useState([]),[v,h]=x.useState("1"),[f,N]=x.useState("all"),[b,w]=x.useState(""),[D,S]=x.useState([]),[C,T]=x.useState(!1),[_,E]=x.useState([]),[A,L]=x.useState(new Set),[F,W]=x.useState(!1),[Y,q]=x.useState(!0),[J,O]=x.useState(""),[M,k]=x.useState([]),[I,K]=x.useState(""),[z,P]=x.useState(!1),[R,B]=x.useState(null),[U,G]=x.useState([]),[$,X]=x.useState({startDate:"",endDate:""}),[Q,Ne]=x.useState(null),[V,re]=x.useState(!1),[ne,xe]=x.useState(""),[me,Z]=x.useState({monthLabel:"",periodLabel:""}),[ee,ye]=x.useState(!1);if(!n&&!a)return e.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-6 text-red-700",children:"You do not have permission to access Compute Attendance."});const[ve,ue]=x.useState(null),[we,De]=x.useState({emp_objid:"",checktimedate:"",am_checkin:"",am_checkout:"",pm_checkin:"",pm_checkout:"",remarks:""}),[le,Ie]=x.useState(null),[ge,Ge]=x.useState(!1),[ke,Re]=x.useState(!1),[Ke,Xe]=x.useState(""),[Se,lt]=x.useState(1),[it,Pt]=x.useState(10),[Nt,At]=x.useState(0),[Ce,Ze]=x.useState([]),[fe,Pe]=x.useState(new Set),[Le,ut]=x.useState(!1),[Be,mt]=x.useState("compute"),[qe,Oe]=x.useState(!1),[He,Kt]=x.useState({"1st Half":new Set,"Full Month":new Set,"2nd Half":new Set}),[rs,qt]=x.useState(!1),[zt,xs]=x.useState(!1),ms=x.useMemo(()=>{const Ee=new Date,$e=Ee.getFullYear(),et=Ee.getMonth()+1,Te=[];for(let he=$e-2;he<=$e;he++){const Ue=he===$e?et:12;for(let ze=1;ze<=Ue;ze++){const st=new Date(he,ze-1,1).toLocaleString("en-US",{month:"long"}),ot=`${he}-${String(ze).padStart(2,"0")}-01`;Te.push({value:ot,label:`${st} ${he}`})}}return Te.sort((he,Ue)=>new Date(Ue.value)-new Date(he.value))},[]);x.useEffect(()=>{const Ee=new Date,$e=Ee.getFullYear(),et=Ee.getMonth()+1,Te=`${$e}-${String(et).padStart(2,"0")}-01`;w(Te)},[]),x.useEffect(()=>{(async()=>{try{console.log(" Fetching employees from MySQL employees table...");const $e=await oe.get("/201-employees");if($e.data.success&&$e.data.data){const et=$e.data.data.map(Te=>{const he=bs(Te.surname,Te.firstname,Te.middlename,Te.extension);return{...Te,NAME:he||String(Te.fullname||`${Te.firstname||""} ${Te.middlename||""} ${Te.surname||""}`.trim()),BADGENUMBER:String(Te.dtrbadgenumber||Te.badgenumber||""),USERID:Te.dtruserid||Te.userid||Te.objid,DEPARTMENT:String(Te.department_name||Te.department||""),TITLE:String(Te.position_title||Te.position||""),photo_path:Te.photo_path||Te.photo||null,PHOTO:Te.photo_path||Te.photo||null,Appointment:Te.appointment_status||Te.appointmentstatus||null,STATUS_ID:Te.empstatusid??Te.empstatid??Te.statusid??null,STATUS:Te.empstatus||Te.employeestatus||null,objid:Te.objid,idno:Te.idno,surname:Te.surname,firstname:Te.firstname,middlename:Te.middlename,extension:Te.extension}});console.log(" Employees fetched from MySQL:",et.length),Ze(et)}else console.error(" Invalid response structure:",$e.data),Ze([])}catch($e){console.error(" Error fetching employees from MySQL:",$e),Ze([])}})()},[]),x.useEffect(()=>{(async()=>{try{console.log(" Fetching departments from ComputeAttendance API...");const $e=await oe.get("/compute-attendance/departments");console.log(" Departments fetched:",$e.data.length),d($e.data)}catch($e){console.error(" Error fetching departments:",$e)}})()},[]),x.useEffect(()=>{const Ee=async()=>{var et;try{console.log(" Fetching employee status types...");const Te=await oe.get("/201-employees/lookup/employeestatustypes");Array.isArray(Te.data)?g(Te.data):(et=Te.data)!=null&&et.data?g(Te.data.data):(console.warn(" Unexpected employee status response:",Te.data),g([]))}catch(Te){console.error(" Error fetching employee status types:",Te),g([])}},$e=async()=>{var et;try{console.log(" Fetching appointment types from MySQL...");const Te=await oe.get("/201-employees/lookup/appointmenttypes");Te.data.success?(console.log(" Appointment types fetched:",Te.data.data.length),y(Te.data.data)):(et=Te.data)!=null&&et.data?y(Te.data.data):Array.isArray(Te.data)?y(Te.data):(console.warn(" Unexpected appointment types response:",Te.data),y([]))}catch(Te){console.error(" Error fetching appointment types:",Te),y([])}};Ee(),$e()},[]),x.useEffect(()=>{if(J.trim()==="")k(_);else{const Ee=_.filter($e=>String($e.NAME||"").toLowerCase().includes(J.toLowerCase())||String($e.BADGENUMBER||"").toLowerCase().includes(J.toLowerCase()));k(Ee)}},[J,_]),x.useEffect(()=>{(m||v!=="all"||f!=="all")&&Ce.length>0?Ut():(E([]),L(new Set),k([]),O(""))},[m,v,f,Ce]);const Ut=async()=>{W(!0),E([]),L(new Set),k([]),O("");try{let Ee=[...Ce];if(console.log(` Starting with ${Ee.length} total employees`),m&&(Ee=Ee.filter($e=>$e.DEPARTMENT===m),console.log(` After department filter (${m}): ${Ee.length} employees`)),v!=="all"){const $e=parseInt(v);Ee=Ee.filter(et=>{const Te=et.STATUS_ID??et.STATUS,he=Te!=null?parseInt(Te):null;return!Number.isNaN($e)&&he===$e}),console.log(` After status filter (${v}): ${Ee.length} employees`)}if(f!=="all"){const $e=parseInt(f);Ee=Ee.filter(et=>et.Appointment===null||et.Appointment===void 0?!1:parseInt(et.Appointment)===$e),console.log(` After appointment filter (${$e}): ${Ee.length} employees`)}console.log(" Final filtered employees:",Ee.length),E(Ee),k(Ee)}catch(Ee){console.error(" Error fetching department employees:",Ee)}finally{W(!1)}},$t=Ee=>{console.log(" Department employee selection toggled:",Ee);const $e=new Set(A);$e.has(Ee)?($e.delete(Ee),console.log(" Employee deselected:",Ee)):($e.add(Ee),console.log(" Employee selected:",Ee)),L($e),console.log(" Total selected employees:",$e.size)},Qt=()=>{console.log(" Select all department employees toggled");const Ee=_.filter(Te=>{if(I==="full")return!He["1st Half"].has(Te.objid)&&!He["Full Month"].has(Te.objid)&&!He["2nd Half"].has(Te.objid);if(I==="first"){const he=He["1st Half"].has(Te.objid);return Be==="compute"?!he:he}else if(I==="second"){const he=He["1st Half"].has(Te.objid),Ue=He["2nd Half"].has(Te.objid);return Be==="compute"?he&&!Ue:!Ue}return!fe.has(Te.objid)}),$e=new Set(Ee.map(Te=>Te.USERID));if($e.size>0&&Array.from($e).every(Te=>A.has(Te))){console.log(" Deselecting all available employees");const Te=new Set(A);$e.forEach(he=>Te.delete(he)),L(Te)}else{console.log(" Selecting all available employees");const Te=new Set(A);$e.forEach(he=>Te.add(he)),L(Te)}},gs=()=>{console.log(" Select all filtered employees toggled");const Ee=M.filter(Te=>{if(I==="full")return!He["1st Half"].has(Te.objid)&&!He["Full Month"].has(Te.objid)&&!He["2nd Half"].has(Te.objid);if(I==="first"){const he=He["1st Half"].has(Te.objid);return Be==="compute"?!he:he}else if(I==="second"){const he=He["1st Half"].has(Te.objid),Ue=He["2nd Half"].has(Te.objid);return Be==="compute"?he&&!Ue:!Ue}return!fe.has(Te.objid)}),$e=new Set(Ee.map(Te=>Te.USERID));if($e.size>0&&Array.from($e).every(Te=>A.has(Te))){console.log(" Deselecting all filtered employees");const Te=new Set(A);$e.forEach(he=>Te.delete(he)),L(Te)}else{console.log(" Selecting all available filtered employees (excluding disabled)");const Te=new Set(A);$e.forEach(he=>Te.add(he)),L(Te)}},Yt=(Ee,$e="full")=>{const[et,Te]=Ee.split("-");let he,Ue;if($e==="full"){he=`${et}-${Te}-01`;const ze=new Date(parseInt(et),parseInt(Te),0).getDate();Ue=`${et}-${Te}-${ze.toString().padStart(2,"0")}`}else if($e==="first")he=`${et}-${Te}-01`,Ue=`${et}-${Te}-15`;else if($e==="second"){he=`${et}-${Te}-16`;const ze=new Date(parseInt(et),parseInt(Te),0).getDate();Ue=`${et}-${Te}-${ze.toString().padStart(2,"0")}`}return console.log(" Period range calculated:",{period:$e,startDate:he,endDate:Ue}),{startDate:he,endDate:Ue}},os=async()=>{if(!b||!I){Pe(new Set);return}try{ut(!0);const[Ee,$e]=b.split("-"),Te=new Date(parseInt(Ee),parseInt($e)-1,1).toLocaleString("en-US",{month:"long"}),he=parseInt(Ee);console.log(" Checking computed DTR for:",{monthName:Te,computedYear:he,period:I});const Ue=await oe.get("/compute-attendance/check-computed-dtr",{params:{computedmonth:Te,computedyear:he,period:I}});if(Ue.data.success){const ze=new Set(Ue.data.empObjIds);Pe(ze),console.log(` Found ${ze.size} employees with computed DTR`)}else Pe(new Set)}catch(Ee){console.error(" Error fetching computed DTR:",Ee),Pe(new Set)}finally{ut(!1)}},Zt=async()=>{var Ee,$e;try{T(!0),console.log(" Calculating attendance for department:",m),console.log(" Selected month:",b),console.log(" Selected period:",I);const et=Array.from(A),Te=_.filter(st=>et.includes(st.USERID)),he=Te.filter(st=>{let ot=!1,vt="";if(I==="full"){const bt=He["1st Half"].has(st.objid),dt=He["Full Month"].has(st.objid),It=He["2nd Half"].has(st.objid);if(bt||dt||It){ot=!0;const Et=[];bt&&Et.push("1st Half"),dt&&Et.push("Full Month"),It&&Et.push("2nd Half"),vt=`has existing records: ${Et.join(", ")}`}}else if(I==="first"){const bt=He["1st Half"].has(st.objid);Be==="compute"?bt&&(ot=!0,vt="has existing 1st Half record"):bt||(ot=!0,vt="has no existing 1st Half record to recompute")}else if(I==="second"){const bt=He["1st Half"].has(st.objid),dt=He["2nd Half"].has(st.objid);Be==="compute"?(!bt||dt)&&(ot=!0,bt?dt&&(vt="has existing 2nd Half record"):vt="has no existing 1st Half record (2nd Half requires 1st Half)"):dt&&(ot=!0,vt="has existing 2nd Half record")}return ot&&console.log(` Skipping employee ${st.USERID} (${st.NAME}) - ${vt}`),!ot});console.log(" Current employees to process:",he.length,"out of",Te.length),console.log(" Filtered employees:",he.map(st=>({USERID:st.USERID,NAME:st.NAME})));const Ue=[],{startDate:ze,endDate:ht}=Yt(b,I);console.log(" Processing period range:",{startDate:ze,endDate:ht});for(let st=0;st<he.length;st++){const ot=he[st];console.log(` Processing employee ${st+1}/${he.length}:`,ot.USERID,ot.NAME);let vt={employeeId:ot.USERID,objid:ot.objid,name:ot.NAME,department:ot.DEPARTMENT,position:ot.TITLE,photo_path:ot.photo_path||ot.PHOTO||null,surname:ot.surname,firstname:ot.firstname,middlename:ot.middlename,extension:ot.extension,shiftSchedule:null,lates:0,days:0,netDays:0,equivalentDaysDeducted:0,locatorsCount:0,leavesCount:0,travelsCount:0,cdoCount:0,status:"Processing"};try{console.log(" Calling API for employee:",ot.USERID,ot.NAME);const bt=await oe.post("/compute-attendance/calculate",{userId:ot.USERID,startDate:ze,endDate:ht});if(console.log(" API response for employee:",ot.USERID,bt.data),bt.data.success){const dt=bt.data.data;vt={...vt,lates:dt.totalLates,days:dt.totalDays,netDays:dt.netDays,equivalentDaysDeducted:dt.equivalentDaysDeducted,locatorsCount:dt.locatorsCount,leavesCount:dt.leavesCount,travelsCount:dt.travelsCount,cdoCount:dt.cdoCount??0,shiftSchedule:bt.data.shiftSchedule||null,dailyData:dt.dailyData||[],status:"Calculated"},console.log(" Added attendance record:",vt)}else console.log(" API returned success: false for employee:",ot.USERID,bt.data),vt.status=bt.data.message||"API Error"}catch(bt){console.error(` Error calculating attendance for employee ${ot.USERID}:`,bt),vt.status="Error: "+((($e=(Ee=bt.response)==null?void 0:Ee.data)==null?void 0:$e.message)||bt.message)}Ue.push(vt),console.log(" Added attendance record for employee:",ot.USERID,vt)}S(Ue),console.log(" Department attendance data fetched:",Ue.length)}catch(et){console.error(" Error calculating department attendance:",et)}finally{T(!1)}},Jt=async()=>{var Ee,$e;try{if(T(!0),console.log(" Fetching computed DTR data for Recompute mode"),!b||!I){S([]);return}const[et,Te]=b.split("-"),Ue=new Date(parseInt(et),parseInt(Te)-1,1).toLocaleString("en-US",{month:"long"}),ze=parseInt(et),st={full:"Full Month",first:"1st Half",second:"2nd Half"}[I]||I,ot=Array.from(A),vt=_.filter(dt=>ot.includes(dt.USERID)),bt=[];for(const dt of vt)try{const It=await oe.get(`/computed-dtr/employee/${dt.objid}`,{params:{computedmonth:Ue,computedyear:ze,period:st}});if(It.data.success&&It.data.data&&It.data.data.length>0){const Et=It.data.data[0],gt=await oe.get(`/computed-dtr/${Et.computeid}/details`);bt.push({employeeId:dt.USERID,name:dt.NAME,department:dt.DEPARTMENT,position:dt.TITLE,photo_path:dt.photo_path||dt.PHOTO||null,objid:dt.objid,computeid:Et.computeid,lates:Et.total_lates||0,days:Et.total_days||0,netDays:Et.total_netdays||0,locatorsCount:0,leavesCount:Et.total_leaves||0,travelsCount:Et.total_travels||0,cdoCount:Et.total_cdo||0,computestatus:Et.computestatus,details:gt.data.success?gt.data.data:[],status:"Loaded from Database"})}else bt.push({employeeId:dt.USERID,name:dt.NAME,department:dt.DEPARTMENT,position:dt.TITLE,photo_path:dt.photo_path||dt.PHOTO||null,objid:dt.objid,status:"No computed DTR found"})}catch(It){console.error(` Error fetching computed DTR for employee ${dt.USERID}:`,It),bt.push({employeeId:dt.USERID,name:dt.NAME,department:dt.DEPARTMENT,position:dt.TITLE,photo_path:dt.photo_path||dt.PHOTO||null,objid:dt.objid,status:"Error: "+((($e=(Ee=It.response)==null?void 0:Ee.data)==null?void 0:$e.message)||It.message)})}S(bt),console.log(" Computed DTR data fetched:",bt.length)}catch(et){console.error(" Error fetching computed DTR data:",et),S([])}finally{T(!1)}},es=async()=>{var Ee,$e;try{if(!D||D.length===0){alert("No attendance data to process");return}if(!b||!I){alert("Please select month and period");return}const[et,Te]=b.split("-"),Ue=new Date(parseInt(et),parseInt(Te)-1,1).toLocaleString("en-US",{month:"long"}),ze=parseInt(et),st={full:"Full Month",first:"1st Half",second:"2nd Half"}[I]||I;T(!0);const ot=D.filter(Et=>Et.status==="Calculated"&&Et.days!==void 0);if(ot.length===0){alert("No successful attendance calculations to process"),T(!1);return}let vt=0,bt=0;for(const Et of ot)try{const gt=await oe.get(`/computed-dtr/employee/${Et.objid}`,{params:{computedmonth:Ue,computedyear:ze,period:st}}),Xt=gt.data.success&&gt.data.data&&gt.data.data.length>0?gt.data.data[0]:null,Vt=Et.dailyData||[],ts={emp_objid:Et.objid,batchid:null,computedmonth:Ue,computedyear:ze,period:st,total_lates:Et.lates||0,total_days:Et.days||0,total_netdays:Et.netDays||0,total_cdo:Et.cdoCount||0,total_travels:Et.travelsCount||0,total_leaves:Et.leavesCount||0,total_fixtimes:0,computeremarks:null,computestatus:"For Approval",details:Vt};Xt?(await oe.put(`/computed-dtr/${Xt.computeid}`,ts),console.log(` Updated computed DTR for employee ${Et.employeeId}`)):(await oe.post("/computed-dtr",ts),console.log(` Created computed DTR for employee ${Et.employeeId}`)),vt++}catch(gt){console.error(` Error processing attendance for employee ${Et.employeeId}:`,gt),bt++}alert(`Processed ${vt} employees successfully${bt>0?`. ${bt} errors occurred.`:"."}`),await os();const dt=new Set(ot.map(Et=>Et.objid)),It=D.filter(Et=>{const gt=dt.has(Et.objid);return gt&&console.log(` Removing ${Et.name} (${Et.employeeId}) from grid - already processed`),!gt});S(It),console.log(` Grid refreshed: ${It.length} employees remaining (${D.length-It.length} removed after processing)`)}catch(et){console.error(" Error processing attendance:",et),alert("Error processing attendance: "+((($e=(Ee=et.response)==null?void 0:Ee.data)==null?void 0:$e.message)||et.message))}finally{T(!1)}},be=x.useCallback(async()=>{if(!qe||!b||_.length===0){Kt({"1st Half":new Set,"Full Month":new Set,"2nd Half":new Set}),qt(!1);return}try{xs(!0);const[Ee,$e]=b.split("-"),Te=new Date(parseInt(Ee),parseInt($e)-1,1).toLocaleString("en-US",{month:"long"}),he=parseInt(Ee),Ue=_.map(ht=>ht.objid).filter(ht=>ht);if(Ue.length===0){Kt({"1st Half":new Set,"Full Month":new Set,"2nd Half":new Set}),qt(!1);return}console.log(" Checking all periods for ALL department employees:",{monthName:Te,computedYear:he,employeeCount:Ue.length});const ze=await oe.get("/compute-attendance/check-all-periods",{params:{computedmonth:Te,computedyear:he,emp_objids:Ue.join(",")}});if(ze.data.success){const ht=ze.data.periods||{},st={"1st Half":new Set(ht["1st Half"]||[]),"Full Month":new Set(ht["Full Month"]||[]),"2nd Half":new Set(ht["2nd Half"]||[])};Kt(st);const ot=_.filter(bt=>A.has(bt.USERID)).map(bt=>bt.objid).filter(bt=>bt);let vt=!1;for(const bt of ot){const dt=st["1st Half"].has(bt),It=st["Full Month"].has(bt),Et=st["2nd Half"].has(bt);if(dt&&It&&Et){vt=!0;break}}qt(vt),console.log(" Period check completed for ALL employees:",{"1st Half":st["1st Half"].size,"Full Month":st["Full Month"].size,"2nd Half":st["2nd Half"].size,isPeriodControlDisabled:vt})}else Kt({"1st Half":new Set,"Full Month":new Set,"2nd Half":new Set}),qt(!1)}catch(Ee){console.error(" Error checking all periods:",Ee),Kt({"1st Half":new Set,"Full Month":new Set,"2nd Half":new Set}),qt(!1)}finally{xs(!1)}},[qe,b,_,A]),nt=x.useCallback(async()=>{qt(!1)},[b,A,_,Be]);x.useEffect(()=>{b&&I?os():Pe(new Set)},[b,I]),x.useEffect(()=>{qe&&b&&_.length>0?be():(Kt({"1st Half":new Set,"Full Month":new Set,"2nd Half":new Set}),qt(!1))},[b,_,I,qe,Be,be]),x.useEffect(()=>{qe&&b&&A.size>0?nt():qt(!1)},[b,A,qe,Be,nt]),x.useEffect(()=>{},[He,qe,Be,I,A.size]),x.useEffect(()=>{if(qe&&I&&A.size>0){const Ee=new Set;let $e=0;A.forEach(et=>{const Te=_.find(Ue=>Ue.USERID===et);if(!Te){$e++;return}let he=!1;if(I==="full")he=He["1st Half"].has(Te.objid)||He["Full Month"].has(Te.objid)||He["2nd Half"].has(Te.objid);else if(I==="first"){const Ue=He["1st Half"].has(Te.objid);Be==="compute"?he=Ue:he=!Ue}else if(I==="second"){const Ue=He["1st Half"].has(Te.objid),ze=He["2nd Half"].has(Te.objid);Be==="compute"?he=!Ue||ze:he=ze}he?($e++,console.log(` Auto-deselected ${Te.NAME} - excluded for selected period`)):Ee.add(et)}),$e>0&&(console.log(` Auto-deselected ${$e} employees that are excluded for period ${I}`),L(Ee))}},[I,He,qe,_]),x.useEffect(()=>{qe&&b&&A.size>0&&I&&Be==="compute"?Zt():qe&&b&&A.size>0&&I&&Be==="recompute"&&Jt()},[b,A,I,Be,qe]),x.useEffect(()=>{Be==="compute"&&A.size===0&&(S([]),lt(1))},[A.size,Be]);const tt=x.useMemo(()=>{const Ee=D.reduce((Te,he)=>(Te.totalLates+=he.lates||0,Te.totalDays+=he.days||0,Te.equivalentDaysDeducted+=he.equivalentDaysDeducted||0,Te.totalCdo+=he.cdoCount||0,Te.totalLeaves+=he.leavesCount||0,Te.totalLocators+=he.locatorsCount||0,Te.totalTravels+=he.travelsCount||0,Te),{totalLates:0,totalDays:0,equivalentDaysDeducted:0,totalCdo:0,totalLeaves:0,totalLocators:0,totalTravels:0}),$e=Ee.totalLates/(8*60),et=Math.max(0,Ee.totalDays-$e);return{...Ee,netDays:Math.round(et*1e4)/1e4}},[D,A,Be]),ft=()=>{if(!b)return[{value:"full",label:"Full Month",disabled:!1},{value:"first",label:"1st Half",disabled:!1},{value:"second",label:"2nd Half",disabled:!1}];const[Ee,$e]=b.split("-"),Te=new Date(parseInt(Ee),parseInt($e)-1,1).toLocaleString("en-US",{month:"short"}),he=new Date(parseInt(Ee),parseInt($e),0).getDate();He["1st Half"].size>0,He["Full Month"].size>0,He["2nd Half"].size>0;let Ue,ze,ht;return Ue=!1,ze=!1,ht=!1,[{value:"full",label:`Full Month (${Te})`,disabled:Ue},{value:"first",label:`1st Half (${Te} 1 - ${Te} 15)`,disabled:ze},{value:"second",label:`2nd Half (${Te} 16 - ${Te} ${he})`,disabled:ht}]},kt=async()=>{if(!D||D.length===0){alert("No data to print");return}const Ee=window.open("","_blank","width=800,height=600"),et=ft().find(ze=>ze.value===I),Te=et?et.label:"Full Month",he=ms.find(ze=>ze.value===b);he&&he.label;const Ue=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Compute Attendance Report</title>
          <style>
            body { 
              font-family: Arial, sans-serif;
              font-size: 12px; 
              margin: 0;
              padding: 20px;
            }
            .print-header {
              text-align: center;
              margin-bottom: 20px;
              border-bottom: 2px solid #333;
              padding-bottom: 10px;
            }
            .print-logo {
              height: 60px;
              margin-bottom: 10px;
            }
            .print-title {
              font-size: 18px;
              font-weight: bold;
              margin-bottom: 5px;
            }
            .print-subtitle {
              font-size: 14px;
              color: #666;
              margin-bottom: 10px;
            }
            .print-period {
              font-size: 16px;
              font-weight: bold;
              color: #333;
              margin-bottom: 20px;
            }
            .print-table {
              width: 100%;
              border-collapse: collapse;
              margin-bottom: 20px;
            }
            .print-table th, 
            .print-table td { 
              border: 1px solid #333; 
              padding: 6px; 
              text-align: left; 
              font-size: 11px;
            }
            .print-table th { 
              background-color: #f0f0f0; 
              font-weight: bold; 
            }
            .print-footer {
              text-align: center;
              margin-top: 20px;
              font-size: 10px;
              color: #666;
              border-top: 1px solid #ccc;
              padding-top: 10px;
            }
            @page {
              margin: 0.5in;
            }
          </style>
        </head>
        <body>
          <div class="print-header">
            <div class="print-title">Human Resource Management Office</div>
            <div class="print-subtitle">Computed Attendance Report for the Period of ${Te}</div>
          </div>
          
          <table class="print-table">
            <thead>
              <tr>
                <th>ROW</th>
                <th>Employee</th>
                <th>Leaves</th>
                <th>Locators</th>
                <th>Travels</th>
                <th>CDO</th>
                <th>Lates</th>
                <th>Days</th>
                <th>Net Days</th>
              </tr>
            </thead>
            <tbody>
              ${D.map((ze,ht)=>{const st=[ze.department,ze.position].filter(Boolean).join(" - ")||"";return`
                  <tr>
                    <td>${ht+1}</td>
                    <td>
                      <div style="font-weight:600;color:#111827;">${ze.name||""}</div>
                      <div style="font-size:10px;color:#6b7280;">${st}</div>
                    </td>
                    <td>${ze.leavesCount||0}</td>
                    <td>${ze.locatorsCount||0}</td>
                    <td>${ze.travelsCount||0}</td>
                    <td>${ze.cdoCount||0}</td>
                    <td>${Math.round(Number(ze.lates||0))}</td>
                    <td>${ze.days??0}</td>
                    <td>${Number(ze.netDays??0).toFixed(4)}</td>
                  </tr>
                `}).join("")}
            </tbody>
          </table>
          
          <div class="print-footer">
            System Generated (${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}) By: ${localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).USERID:"Unknown"}
          </div>
        </body>
      </html>
    `;Ee.document.write(Ue),Ee.document.close(),Ee.onload=()=>{Ee.print(),Ee.close()}},_t=async Ee=>{var Ue,ze;if(!Ee||!Ee.employeeId)return;const $e=ms.find(ht=>ht.value===b),et=ft().find(ht=>ht.value===I);if(Z({monthLabel:$e?$e.label:"Selected Month",periodLabel:et?et.label:"Selected Period"}),B(Ee),G([]),X({startDate:"",endDate:""}),Ne(Ee.shiftSchedule||null),xe(""),P(!0),!b){xe("Please select a month to view attendance details.");return}const{startDate:Te,endDate:he}=Yt(b,I);X({startDate:Te,endDate:he}),re(!0);try{const ht=Ee.shiftSchedule?Promise.resolve(Ee.shiftSchedule):Ee.employeeId?Du(Ee.employeeId):Promise.resolve(null),[st,ot]=await Promise.all([oe.get("/compute-attendance/time-logs",{params:{userId:Ee.employeeId,startDate:Te,endDate:he}}),ht]),vt=Array.isArray(st.data)?st.data:[];G(vt),Ne(ot||Ee.shiftSchedule||null)}catch(ht){console.error(" Error loading time logs for modal:",ht),xe(((ze=(Ue=ht.response)==null?void 0:Ue.data)==null?void 0:ze.message)||ht.message||"Failed to load time logs.")}finally{re(!1)}},cs=()=>{P(!1),B(null),G([]),X({startDate:"",endDate:""}),Ne(null),xe("")},as=Ee=>{if(!Ee)return null;const $e=Ee.date||Ee.DATE_RAW||Ee.DATE||"";if(!$e)return null;const et=String($e).trim(),Te=et.match(/^(\d{4})-(\d{2})-(\d{2})/);if(Te)return Te[0];const he=new Date(et);if(!Number.isNaN(he.getTime())){const Ue=he.getFullYear(),ze=String(he.getMonth()+1).padStart(2,"0"),ht=String(he.getDate()).padStart(2,"0");return`${Ue}-${ze}-${ht}`}return null},_e=Ee=>{if(!Ee||Ee==="-")return"";const $e=String(Ee).trim();if(!$e)return"";const et=$e.match(/^(\d{1,2}):(\d{2})(?::\d{2})?$/);if(et){const Te=String(parseInt(et[1],10)).padStart(2,"0"),he=et[2];return`${Te}:${he}`}return $e},We=Ee=>{!Ee||!R||ct(Ee)},ct=Ee=>{if(!R){window.alert("Employee information is missing.");return}const $e=R.objid;if(!$e){window.alert("Employee ObjID is required for Fix Time entry.");return}const et=as(Ee);if(!et){window.alert("Selected log does not have a valid date.");return}const Te={normalizedDate:et,AM_CHECKIN:Ee.amCheckIn==="-"?"":Ee.amCheckIn,AM_CHECKOUT:Ee.amCheckOut==="-"?"":Ee.amCheckOut,PM_CHECKIN:Ee.pmCheckIn==="-"?"":Ee.pmCheckIn,PM_CHECKOUT:Ee.pmCheckOut==="-"?"":Ee.pmCheckOut,lateMinutes:Ee.lateMinutes||0};ue(Te),De({emp_objid:$e,checktimedate:et,am_checkin:_e(Te.AM_CHECKIN),am_checkout:_e(Te.AM_CHECKOUT),pm_checkin:_e(Te.PM_CHECKIN),pm_checkout:_e(Te.PM_CHECKOUT),remarks:""}),Ie(null),Xe(""),ye(!0),Ye($e,et)},Ye=async(Ee,$e)=>{if(!(!Ee||!$e)){Ge(!0);try{const{data:et}=await oe.get("/dtr-fix-checktime",{params:{emp_objid:Ee,dateFrom:$e,dateTo:$e}}),Te=Array.isArray(et==null?void 0:et.data)?et.data[0]:null;Te?(Ie(Te),De(he=>({...he,am_checkin:_e(Te.am_checkin)||he.am_checkin,am_checkout:_e(Te.am_checkout)||he.am_checkout,pm_checkin:_e(Te.pm_checkin)||he.pm_checkin,pm_checkout:_e(Te.pm_checkout)||he.pm_checkout,remarks:Te.remarks||he.remarks||""}))):Ie(null)}catch(et){console.error("Error loading fix record:",et),Xe("Failed to load existing fix log.")}finally{Ge(!1)}}},te=Ee=>{const{name:$e,value:et}=Ee.target;De(Te=>({...Te,[$e]:et}))},Me=async Ee=>{var $e,et;if(Ee.preventDefault(),!we.emp_objid||!we.checktimedate){Xe("Employee ObjID and Fix Log Date are required.");return}try{Re(!0),Xe("");const Te={emp_objid:we.emp_objid,checktimedate:we.checktimedate,am_checkin:we.am_checkin||null,am_checkout:we.am_checkout||null,pm_checkin:we.pm_checkin||null,pm_checkout:we.pm_checkout||null,remarks:we.remarks||null,fixstatus:(le==null?void 0:le.fixstatus)||"For Approval"};if(le!=null&&le.fixid?await oe.put(`/dtr-fix-checktime/${le.fixid}`,Te):await oe.post("/dtr-fix-checktime",Te),rt(),R&&$.startDate&&$.endDate){const he=await oe.get("/compute-attendance/time-logs",{params:{userId:R.employeeId,startDate:$.startDate,endDate:$.endDate}}),Ue=Array.isArray(he.data)?he.data:[];G(Ue)}}catch(Te){console.error("Error saving fix log:",Te),Xe(((et=($e=Te.response)==null?void 0:$e.data)==null?void 0:et.message)||"Failed to save fix log.")}finally{Re(!1)}},rt=()=>{ye(!1),ue(null),Ie(null),De({emp_objid:"",checktimedate:"",am_checkin:"",am_checkout:"",pm_checkin:"",pm_checkout:"",remarks:""}),Xe(""),Ge(!1),Re(!1)},xt=x.useMemo(()=>Be==="compute"?!A||A.size===0?[]:D.filter(Ee=>A.has(Ee.employeeId)):D,[Be,D,A]),Mt=x.useMemo(()=>{const Ee=(Se-1)*it,$e=Ee+it;return xt.slice(Ee,$e)},[xt,Se,it]);return x.useEffect(()=>{const Ee=Math.ceil(xt.length/it);At(Ee),Se>Ee&&Ee>0&&lt(1)},[xt.length,it,Se]),x.useEffect(()=>{lt(1)},[D]),e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Step 1: Select Month and Process Mode"}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Month"}),e.jsxs("select",{value:b,onChange:Ee=>w(Ee.target.value),disabled:qe,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:"Select a month..."}),ms.map(Ee=>e.jsx("option",{value:Ee.value,children:Ee.label},Ee.value))]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Process Mode"}),e.jsxs("select",{value:Be,onChange:Ee=>{mt(Ee.target.value),S([])},disabled:qe,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"compute",children:"Compute"}),e.jsx("option",{value:"recompute",children:"Recompute"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[(Be==="compute"&&l||Be==="recompute"&&o)&&e.jsx("button",{type:"button",onClick:()=>{Oe(!0)},disabled:!b||qe||Be==="compute"&&!l||Be==="recompute"&&!o,className:"px-6 py-2 bg-blue-600 text-white font-medium rounded-md shadow hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:"Proceed"}),qe&&e.jsx("button",{type:"button",onClick:()=>{Oe(!1),u(""),N("all"),h("1"),K(""),E([]),L(new Set),S([]),Kt({"1st Half":new Set,"Full Month":new Set,"2nd Half":new Set}),qt(!1)},className:"px-4 py-2 bg-gray-500 text-white font-medium rounded-md shadow hover:bg-gray-600 transition-colors",children:"Reset"})]})]}),!b&&e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Please select Month and Process Mode to continue"})]}),qe&&Be==="compute"&&a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Step 2: Filter Employees"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Department"}),e.jsxs("select",{value:m,onChange:Ee=>u(Ee.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a department..."}),c.map(Ee=>e.jsx("option",{value:Ee,children:Ee},Ee))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment"}),e.jsxs("select",{value:f,onChange:Ee=>N(Ee.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Appointments"}),j.map(Ee=>e.jsx("option",{value:Ee.id,children:Ee.appointmentname},Ee.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Status"}),e.jsxs("select",{value:v,onChange:Ee=>h(Ee.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Statuses"}),p.map(Ee=>e.jsx("option",{value:Ee.empstatid||Ee.id,children:Ee.empstatname||Ee.employeestatus},Ee.empstatid||Ee.id))]})]})]})]}),_.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Step 3: Select Period"}),zt&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),e.jsx("span",{children:"Checking existing periods..."})]}),rs?e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:"All periods already computed for selected employees"})}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Period"}),e.jsxs("select",{value:I,onChange:Ee=>K(Ee.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"",disabled:!0,children:"Select a Period"}),ft().map(Ee=>e.jsxs("option",{value:Ee.value,disabled:Ee.disabled,style:Ee.disabled?{color:"#9ca3af",backgroundColor:"#f3f4f6"}:{},children:[Ee.label," ",Ee.disabled?Be==="recompute"?"(No records)":"(Already computed)":""]},Ee.value))]})]})]})]}),qe&&I&&_.length>0&&Be==="compute"&&a&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Step 4: Select Employees"}),e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("button",{type:"button",onClick:()=>q(Ee=>!Ee),className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-t-lg transition-colors",children:[e.jsxs("div",{className:"text-left",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Select Employees (",_.length," found)"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[A.size," of ",_.length," selected"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[Y?"Hide":"Show",e.jsx("svg",{className:`w-4 h-4 transform transition-transform ${Y?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),Y&&e.jsxs("div",{className:"p-4 space-y-4",children:[F&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),e.jsx("span",{children:"Loading employees..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Employees"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:J,onChange:Ee=>O(Ee.target.value),placeholder:"Search by name or badge number...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),J&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Showing ",M.length," of ",_.length," employees"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"selectAllDepartment",checked:_.length>0&&_.filter(Ee=>{if(I==="full")return!He["1st Half"].has(Ee.objid)&&!He["Full Month"].has(Ee.objid)&&!He["2nd Half"].has(Ee.objid);if(I==="first"){const $e=He["1st Half"].has(Ee.objid);return Be==="compute"?!$e:$e}else if(I==="second"){const $e=He["1st Half"].has(Ee.objid),et=He["2nd Half"].has(Ee.objid);return Be==="compute"?$e&&!et:!et}return!fe.has(Ee.objid)}).every(Ee=>A.has(Ee.USERID)),onChange:Qt,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"selectAllDepartment",className:"ml-2 text-sm font-medium text-gray-700",children:"Select All Available Employees"}),(()=>{const Ee=_.filter($e=>{if(!I)return fe.has($e.objid);if(I==="full")return He["1st Half"].has($e.objid)||He["Full Month"].has($e.objid)||He["2nd Half"].has($e.objid);if(I==="first"){const et=He["1st Half"].has($e.objid),Te=He["Full Month"].has($e.objid);return et||Te}if(I==="second"){const et=He["1st Half"].has($e.objid),Te=He["2nd Half"].has($e.objid);return Be==="compute"&&!et||Te}return!1}).length;return Ee>0&&e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",Ee," excluded)"]})})()]}),J&&M.length>0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"selectAllFiltered",checked:M.length>0&&M.every(Ee=>A.has(Ee.USERID)),onChange:gs,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"selectAllFiltered",className:"ml-2 text-sm font-medium text-gray-700",children:["Select Filtered (",M.length," employees)"]})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[A.size," selected"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-96 overflow-y-auto border border-gray-200 rounded-lg p-4",children:M.map(Ee=>{let $e=!1,et="";if(I==="full"){const he=He["1st Half"].has(Ee.objid),Ue=He["Full Month"].has(Ee.objid),ze=He["2nd Half"].has(Ee.objid);if(he||Ue||ze){$e=!0;const ht=[];he&&ht.push("1st Half"),Ue&&ht.push("Full Month"),ze&&ht.push("2nd Half"),et=`Has existing records: ${ht.join(", ")}`}}else if(I==="first"){const he=He["1st Half"].has(Ee.objid),Ue=He["Full Month"].has(Ee.objid);Be==="compute"?(he||Ue)&&($e=!0,et=Ue?"Has existing Full Month record":"Has existing 1st Half record"):he||($e=!0,et="No existing 1st Half record to recompute")}else if(I==="second"){const he=He["1st Half"].has(Ee.objid),Ue=He["2nd Half"].has(Ee.objid);Be==="compute"?(!he||Ue)&&($e=!0,he?Ue&&(et="Has existing 2nd Half record"):et="No existing 1st Half record (2nd Half requires 1st Half)"):Ue&&($e=!0,et="Has existing 2nd Half record")}return fe.has(Ee.objid)&&!$e&&($e=!0,et="Already has computed DTR for this period"),e.jsx("div",{className:`p-3 border rounded-lg transition-colors ${$e?"border-gray-300 bg-gray-100 opacity-60 cursor-not-allowed":A.has(Ee.USERID)?"border-blue-500 bg-blue-50 cursor-pointer":"border-gray-200 hover:border-gray-300 cursor-pointer"}`,onClick:()=>{$e||$t(Ee.USERID)},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:!$e&&A.has(Ee.USERID),onChange:()=>{$e||$t(Ee.USERID)},disabled:$e,className:`h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded ${$e?"cursor-not-allowed opacity-50":""}`}),e.jsxs("div",{className:"ml-3 flex-1 flex items-center space-x-2",children:[Ee.photo_path&&e.jsx("img",{src:Ee.photo_path,alt:Ee.NAME,className:"w-8 h-8 rounded-full object-cover",onError:he=>{he.target.style.display="none"}}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:`text-sm font-medium ${$e?"text-gray-500":"text-gray-900"}`,children:Ee.NAME}),$e&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-yellow-100 text-yellow-800 border border-yellow-200",title:et||"Unavailable",children:et||(I?"Excluded":"Computed")})]}),Ee.DEPARTMENT&&Ee.TITLE&&e.jsxs("p",{className:`text-xs ${$e?"text-gray-400":"text-gray-500"}`,children:[Ee.DEPARTMENT," - ",Ee.TITLE]})]})]})]})},Ee.USERID)})}),J&&M.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsxs("p",{children:['No employees found matching "',J,'"']}),e.jsx("button",{onClick:()=>O(""),className:"mt-2 text-blue-600 hover:text-blue-800 text-sm underline",children:"Clear search"})]})]})]})]}),Be==="compute"&&a&&_.length===0&&!F&&m&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsxs("p",{children:["No employees found in ",m," with the selected status filter."]})}),C&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Computing attendance..."})]}),Be==="recompute"?o?qe?e.jsx(TF,{selectedMonth:b,processMode:Be,onBack:()=>{Oe(!1),K(""),L(new Set),E([])}}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"Please click Proceed to continue with the recompute process."})}):e.jsx("div",{className:"rounded-lg border border-yellow-200 bg-yellow-50 p-6 text-yellow-800",children:"You do not have permission to view recomputation."}):!C&&b&&I&&xt.length>0&&a&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[xt.length>0&&e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Show:"}),e.jsxs("select",{value:it,onChange:Ee=>{Pt(Number(Ee.target.value)),lt(1)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{className:"text-sm text-gray-500",children:"records"})]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(Se-1)*it+1," to ",Math.min(Se*it,xt.length)," of ",xt.length," entries"]})]}),qe&&I&&D.length>0&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{type:"button",onClick:es,disabled:!D||D.length===0||Be!=="compute",className:"inline-flex items-center gap-1.5 px-3 py-1 border border-green-600 text-green-700 hover:bg-green-50 rounded-md text-sm font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Process Attendance",children:["",e.jsx("span",{children:"Process"})]}),e.jsx("button",{type:"button",onClick:kt,disabled:!D||D.length===0,className:"inline-flex items-center px-3 py-1 border border-blue-600 text-blue-700 hover:bg-blue-50 rounded-md text-sm font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Print Computed DTR",children:""})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No."}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leaves"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Locators"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Travels"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CDO"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lates"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days"}),e.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Net Days"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Mt.map((Ee,$e)=>{const et=(Se-1)*it+$e+1,Te=[Ee.department,Ee.position].filter(Boolean).join(" - ")||"";return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:et}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:Ee.name||""}),e.jsx("div",{className:"text-xs text-gray-500",children:Te})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-green-50 text-green-700 border border-green-200",children:Ee.leavesCount??0})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-blue-50 text-blue-700 border border-blue-200",children:Ee.locatorsCount??0})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-purple-50 text-purple-700 border border-purple-200",children:Ee.travelsCount??0})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-orange-50 text-orange-700 border border-orange-200",children:Ee.cdoCount??0})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:Math.round(Number(Ee.lates||0))}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:Ee.days??0}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-xs text-gray-900 w-20",children:Number(Ee.netDays??0).toFixed(4)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>_t(Ee),className:"text-blue-600 hover:text-blue-800 transition-colors text-lg",title:"View Attendance",children:""}),i&&e.jsx("button",{type:"button",onClick:()=>console.log("Delete attendance for:",Ee.name),className:"text-red-600 hover:text-red-800 transition-colors text-lg",title:"Delete Attendance",children:""})]})})]},Ee.employeeId??et)})}),e.jsx("tfoot",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:"Totals"}),e.jsxs("td",{className:"px-6 py-3 text-sm text-gray-700",children:["Total Employees: ",xt.length]}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:tt.totalLeaves}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:tt.totalLocators}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:tt.totalTravels}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:tt.totalCdo}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:Math.round(Number(tt.totalLates||0))}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:tt.totalDays}),e.jsx("td",{className:"px-2 py-3 text-xs font-semibold text-gray-700 w-20",children:Number(tt.netDays??0).toFixed(4)}),e.jsx("td",{className:"px-6 py-3"})]})})]})}),xt.length>0&&e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>lt(1),disabled:Se===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"First"}),e.jsx("button",{onClick:()=>lt(Ee=>Math.max(1,Ee-1)),disabled:Se===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,Nt)},(Ee,$e)=>{let et;return Nt<=5||Se<=3?et=$e+1:Se>=Nt-2?et=Nt-4+$e:et=Se-2+$e,e.jsx("button",{onClick:()=>lt(et),className:`px-3 py-1 text-sm border rounded-md ${Se===et?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"}`,children:et},et)})}),e.jsx("button",{onClick:()=>lt(Ee=>Math.min(Nt,Ee+1)),disabled:Se===Nt,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"}),e.jsx("button",{onClick:()=>lt(Nt),disabled:Se===Nt,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Last"})]})})})]}),Be==="compute"&&!C&&b&&I&&A.size>0&&D.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No attendance data found for the selected parameters."})}),!b&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"Please select a month to compute attendance."})})]})}),e.jsx(tw,{isOpen:z,onClose:cs,employee:R,monthLabel:me.monthLabel,periodLabel:me.periodLabel,logs:U,dateRange:$,shiftSchedule:Q,loading:V,error:ne,onFixLog:We}),e.jsx(cx,{isOpen:ee,onClose:rt,employee:R,row:ve,form:we,onChange:te,onSubmit:Me,loading:ge,saving:ke,error:Ke,existingRecord:le,shiftSchedule:Q})]})},MF=()=>{const{canAccessPage:t,loading:s}=Vs(),[r,n]=x.useState("manage-logs"),a=!s&&t("dtr-fix-checktimes"),l=!s&&(t("compute-attendance")||t("recomputed-dtr"));return x.useEffect(()=>{s||(!a&&r==="fix-logs"||!l&&r==="compute-attendance")&&n("manage-logs")},[s,a,l,r]),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>n("manage-logs"),className:`px-6 py-3 text-sm font-semibold transition-all duration-200 border-b-2 ${r==="manage-logs"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:"Manage Logs"}),a&&e.jsx("button",{onClick:()=>n("fix-logs"),className:`px-6 py-3 text-sm font-semibold transition-all duration-200 border-b-2 ${r==="fix-logs"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:"Fix Logs"}),(s||l)&&e.jsx("button",{onClick:()=>n("compute-attendance"),className:`px-6 py-3 text-sm font-semibold transition-all duration-200 border-b-2 ${r==="compute-attendance"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:"Compute Attendance"})]})})}),e.jsxs("div",{children:[r==="manage-logs"&&e.jsx(yF,{}),r==="fix-logs"&&a&&e.jsx(wF,{}),r==="compute-attendance"&&l&&e.jsx(sw,{})]})]})},IF=(t,s)=>{if(!t)return"";const r=new Date(t);if(isNaN(r.getTime()))return t;const n=r.toLocaleString("en-US",{month:"long"}),a=r.getFullYear(),l=new Date(r.getFullYear(),r.getMonth()+1,0).getDate();switch(s){case"first_half":return`${n} 1-15, ${a}`;case"second_half":return`${n} 16-${l}, ${a}`;case"full":default:return`${n} ${a}`}},Qy=t=>{const r=new Date(t).getDay();return r===0||r===6},rw=t=>{if(!t)return"";if(typeof t=="string"){const s=t.match(/(\d{2}:\d{2})(?::\d{2})?/);return s?s[1]:t}return t},ur=t=>{if(!t||typeof t!="string")return 0;const s=rw(t),[r,n]=s.split(":").map(Number);return r*60+n},Gs=t=>{if(!t)return"";if(typeof t=="string"){const s=t.match(/(\d{2}:\d{2})(?::\d{2})?/);return s?s[1]:t}return t},Zy=(t,s)=>!t||!s?[null,null]:[ur(t),ur(s)],Jy=(t,s,r)=>{if(!t||!s||!r)return!1;const n=ur(t);return n>=s&&n<=r},Xy=(t,s)=>{const r=[],n=new Date(t),a=new Date(s);for(;n<=a;){const l=n.getFullYear(),i=String(n.getMonth()+1).padStart(2,"0"),o=String(n.getDate()).padStart(2,"0"),c=`${l}-${i}-${o}`;r.push(c),n.setDate(n.getDate()+1)}return r},LF=(t,s)=>{if(!t||!s)return null;const r=new Date(t),n=r.getFullYear(),a=r.getMonth();let l,i;switch(s){case"first_half":l=new Date(n,a,1),i=new Date(n,a,15);break;case"second_half":l=new Date(n,a,16),i=new Date(n,a+1,0);break;case"full":default:l=new Date(n,a,1),i=new Date(n,a+1,0);break}return{startDate:l,endDate:i,startDateStr:l.toISOString().split("T")[0],endDateStr:i.toISOString().split("T")[0]}},PF=t=>{if(!t)return null;const s=new Date(t),r=s.getFullYear(),n=s.getMonth(),a=new Date(r,n,1),l=new Date(r,n+1,0);return{startDate:a,endDate:l,startDateStr:a.toISOString().split("T")[0],endDateStr:l.toISOString().split("T")[0]}},eb=(t,s,r)=>{if(!r||r==="full")return!0;const n=parseInt(t.split("-")[2]);switch(r){case"first_half":return n>=1&&n<=15;case"second_half":return n>=16;default:return!0}};function RF({employee:t,selectedMonth:s,selectedPeriod:r="full",onClose:n}){const a=x.useRef(),{user:l}=Ts(),[i,o]=x.useState(!1),[c,d]=x.useState(null),[m,u]=x.useState([]),[p,g]=x.useState([]),[j,y]=x.useState({days:0,late:0}),[v,h]=x.useState(0),[f,N]=x.useState(0),[b,w]=x.useState(null),[D,S]=x.useState({lguDtrName:""});x.useEffect(()=>{(async()=>{try{const E=await oe.get("/company/info");E.data.success&&S(E.data.data)}catch(E){console.error("Error fetching company info:",E)}})()},[]),x.useEffect(()=>{const _=t==null?void 0:t.USERID;if(!_||!s){d(null),u([]),g([]),y({days:0,late:0}),h(0),N(0),o(!1);return}let E=!1;return(async()=>{console.log(" Starting data fetch for employee:",t.NAME),console.log(" Selected period:",r),o(!0),w(null);try{const L=await Du(_);if(E)return;console.log(" Extracted shift data:",L),d(L);const F=LF(s,r);if(!F)throw new Error("Invalid date range calculation");console.log(" Data range for period:",{period:r,startDate:F.startDateStr,endDate:F.endDateStr});const W=await oe.get(`/logs/${_}`,{params:{startDate:F.startDateStr,endDate:F.endDateStr}});if(E)return;const Y=Array.isArray(W.data)?W.data:[];u(Y);const q=PF(s);C(Y,L,q.startDate,q.endDate,r)}catch(L){E||(console.error(" Error fetching data:",L),w("Failed to fetch data. Please try again."))}finally{E||o(!1)}})(),()=>{E=!0}},[t==null?void 0:t.USERID,s,r]);const C=(_,E,A,L,F)=>{if(console.log(" Starting log processing..."),console.log(" Input data:",{logsCount:_.length,schedule:E,startDate:A,endDate:L,selectedPeriod:F}),!E){console.warn(" No shift schedule found, skipping processing");const U=Xy(A,L).map((G,$)=>{const X=Qy(G),Q=eb(G,s,F);return{day:$+1,date:G,amIn:"",amOut:"",pmIn:"",pmOut:"",late:"",undertime:"",undertimeHours:"",undertimeMinutes:"",days:"",remarks:Q?"No shift schedule assigned":"",isWeekend:X,isInPeriod:Q}});g(U),y({days:0,late:0}),h(0),N(0);return}const W=E!=null&&E.SHIFT_AMCHECKOUT_START?Gs(E.SHIFT_AMCHECKOUT_START):"11:00",Y=E!=null&&E.SHIFT_AMCHECKOUT_END?Gs(E.SHIFT_AMCHECKOUT_END):"12:30",q=E!=null&&E.SHIFT_PMCHECKIN_START?Gs(E.SHIFT_PMCHECKIN_START):"12:31",J=E!=null&&E.SHIFT_PMCHECKIN_END?Gs(E.SHIFT_PMCHECKIN_END):"14:00",[O,M]=Zy(W,Y),[k,I]=Zy(q,J);console.log(" Time windows:",{amCheckOutStart:W,amCheckOutEnd:Y,pmCheckInStart:q,pmCheckInEnd:J,amCheckOutStartMin:O,amCheckOutEndMin:M,pmCheckInStartMin:k,pmCheckInEndMin:I});const K=Xy(A,L);console.log(" Generated local date range for display:",K);const z=[];let P=0,R=0;for(let B=0;B<K.length;B++){const U=K[B],G=B+1,$=Qy(U),X=eb(U,s,F);let Q=[];X&&(Q=_.filter(ye=>{let ve="";return ye.CHECKTIME&&(ye.CHECKTIME.includes(" ")?ve=ye.CHECKTIME.split(" ")[0]:ye.CHECKTIME.includes("T")?ve=ye.CHECKTIME.split("T")[0]:ve=ye.CHECKTIME),(U==="2024-08-01"||U==="2024-08-02")&&console.log(` Date comparison for ${U}:`,{logDateStr:ve,dateStr:U,matches:ve===U,checktime:ye.CHECKTIME}),ve===U})),console.log(` Processing ${U} (Day ${G}) - In period: ${X}:`,Q.length,"logs"),Q.length>0&&console.log(" Sample day logs:",Q.map(ye=>({CHECKTIME:ye.CHECKTIME,extractedTime:rw(ye.CHECKTIME),extractedDate:ye.CHECKTIME?ye.CHECKTIME.split(" ")[0]:"N/A"})));let Ne="",V="",re="",ne="";if(Q.length>0){const ye=Q.filter(De=>{const le=Gs(De.CHECKTIME||De.DATE||De.date);return le&&ur(le)<720}).sort((De,le)=>ur(Gs(De.CHECKTIME||De.DATE||De.date))-ur(Gs(le.CHECKTIME||le.DATE||le.date)));ye.length>0&&(Ne=Gs(ye[0].CHECKTIME||ye[0].DATE||ye[0].date));const ve=Q.filter(De=>{const le=Gs(De.CHECKTIME||De.DATE||De.date);return le&&Jy(le,O,M)}).sort((De,le)=>ur(Gs(De.CHECKTIME||De.DATE||De.date))-ur(Gs(le.CHECKTIME||le.DATE||le.date)));ve.length>0&&(V=Gs(ve[0].CHECKTIME||ve[0].DATE||ve[0].date));const ue=Q.filter(De=>{const le=Gs(De.CHECKTIME||De.DATE||De.date);return le&&Jy(le,k,I)}).sort((De,le)=>ur(Gs(De.CHECKTIME||De.DATE||De.date))-ur(Gs(le.CHECKTIME||le.DATE||le.date)));ue.length>0&&(re=Gs(ue[0].CHECKTIME||ue[0].DATE||ue[0].date));const we=Q.filter(De=>{const le=Gs(De.CHECKTIME||De.DATE||De.date);return le&&ur(le)>I}).sort((De,le)=>ur(Gs(le.CHECKTIME||le.DATE||le.date))-ur(Gs(De.CHECKTIME||De.DATE||De.date)));we.length>0&&(ne=Gs(we[0].CHECKTIME||we[0].DATE||we[0].date))}console.log(` Properly grouped times for ${U}:`,{AM_CHECKIN:Ne,AM_CHECKOUT:V,PM_CHECKIN:re,PM_CHECKOUT:ne,totalLogs:Q.length});let xe=0;if(X&&E){if(Ne&&E.SHIFT_AMCHECKIN){const ye=ur(Gs(E.SHIFT_AMCHECKIN)),ve=ur(Ne);ve>ye&&(xe+=ve-ye)}if(re&&E.SHIFT_PMCHECKIN){const ye=ur(Gs(E.SHIFT_PMCHECKIN)),ve=ur(re);ve>ye&&(xe+=ve-ye)}}let me="";$?me="Weekend":X&&([Ne,V,re,ne].filter(ve=>ve&&ve.trim()!=="").length===0?me="Absent":xe>0&&(me=`Late ${xe} min`));const Z=[Ne,V,re,ne].filter(ye=>ye&&ye.trim()!=="").length,ee=X&&Z>0&&!$?1:0;z.push({day:G,date:U,amIn:X?Ne:"",amOut:X?V:"",pmIn:X?re:"",pmOut:X?ne:"",late:X&&xe>0?`${xe} min`:"",undertime:"",undertimeHours:"",undertimeMinutes:"",days:ee,remarks:me,isWeekend:$,isInPeriod:X}),X&&Z>0&&!$&&(P++,R+=xe)}console.log(" Final totals:",{totalDays:P,totalLate:R}),g(z),y({days:P,late:R}),h(0),N(0)},T=()=>{const _=a.current.innerHTML,A=new Date().toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),L=D.lguDtrName||"HRIS System",F=(l==null?void 0:l.id)||(l==null?void 0:l.USERID)||(l==null?void 0:l.username)||"System",W=window.open("","_blank");W.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>DTR Print</title>
          <style>
            @media print {
              @page {
                size: A4;
                margin: 8mm;
              }
              body { 
                margin: 0; 
                padding: 0; 
                font-family: Arial, sans-serif;
                font-size: 6px;
                line-height: 1.1;
              }
              .no-print { display: none !important; }
              
              /* Header Styles - Compact for space */
              .header { 
                text-align: center; 
                margin-bottom: 6px; 
                font-size: 10px;
              }
              .header h1 { 
                font-size: 12px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header h2 { 
                font-size: 11px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header h3 { 
                font-size: 10px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header p { 
                font-size: 8px; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              
              /* Specific header text styling - Font size 12px with bold month */
              .header .month-year {
                font-size: 10px !important;
                font-weight: normal;
                margin: 1px 0;
              }
              .header .month-year .bold-month {
                font-weight: bold !important;
              }
              .header .official-hours {
                font-size: 8px !important;
                font-weight: normal;
                margin: 1px 0;
              }
              .header .regular-days {
                font-size: 8px !important;
                font-weight: normal;
                margin: 1px 0;
              }
              
              /* Table Styles - 40% increase in row height from default */
              table { 
                border-collapse: collapse; 
                width: 100%; 
                font-size: 10px;
                margin-bottom: 8px;
                table-layout: fixed;
                height: auto;
              }
              th, td { 
                border: 0.5px solid #000; 
                padding: 2.8px 1px; /* 40% increase from 2px */
                text-align: center; 
                vertical-align: middle;
                font-size: 11px; /* 30% increase from 6px: 6px + 5px */
                line-height: 1.0;
                height: 14px; /* 40% increase from 10px */
              }
              th { 
                font-weight: bold; 
                background-color: #d3d3d3 !important; /* Light grey header */
                font-size: 11px; /* 30% increase from 6px: 6px + 5px */
                height: 16.8px; /* 40% increase from 12px */
              }
              
              /* Column widths for better A4 utilization */
              .col-day { width: 6%; }
              .col-am-arrival { width: 13%; }
              .col-am-departure { width: 13%; }
              .col-pm-arrival { width: 13%; }
              .col-pm-departure { width: 13%; }
              .col-undertime-hours { width: 6%; }
              .col-undertime-minutes { width: 6%; }
              .col-days { width: 7%; }
              .col-late { width: 7%; }
              
              /* Weekend day styling */
              .weekend-day {
                color: #0066cc !important; /* Blue color for weekends */
                font-weight: bold;
              }
              
              /* Footer Styles - Compact */
              .footer { 
                margin-top: 6px; 
                font-size: 8px;
                background-color: #f5f5f5 !important; /* Light grey footer */
                padding: 6px;
                border: 1px solid #ddd;
              }
              .footer p { 
                margin: 0 0 2px 0; 
                font-size: 8px;
                line-height: 1.1;
              }
              .footer p.text-right {
                text-align: right !important;
              }
              .footer .mb-2 {
                margin-bottom: 8px !important;
              }
              .signature-line { 
                margin-top: 4px; 
                text-align: right; 
              }
              .signature-line .line { 
                border-bottom: 1px solid #000; 
                display: inline-block; 
                width: 120px; 
              }
              .signature-line .label { 
                text-align: right !important; /* Right align the "In Charge" label */
                width: 100%; 
                margin-top: 1px; 
                font-size: 8px;
                padding-right: 0;
              }
              
              /* Employee signature line styling */
              .signature-line .employee-signature { 
                border-bottom: 1px solid #000; 
                display: inline-block; 
                width: 300px; 
                margin-top: 2px;
              }
              
              /* Fit to page container - No height restrictions */
              .print-container {
                height: auto;
                width: 100%;
                overflow: visible;
              }
              .table-container {
                height: auto;
                overflow: visible;
              }
              
              /* Totals row styling */
              .totals-row {
                background-color: #d3d3d3 !important; /* Light grey totals row */
                font-weight: bold;
                height: 16.8px; /* 40% increase from 12px to match header */
              }
              
              /* System-generated document footer */
              .system-footer {
                margin-top: 8px;
                padding-top: 4px;
                border-top: 1px solid #ddd;
                font-size: 7px;
                color: #666;
                text-align: center;
                line-height: 1.2;
              }
            }
          </style>
        </head>
        <body>
          <div class="print-container">
            ${_}
            <div class="system-footer">
              System-Generated Document  ${L} - Printed on: ${A}. Printed By: ${F}
            </div>
          </div>
        </body>
      </html>
    `),W.document.close(),W.onload=()=>{W.print(),W.close()}};return i?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{children:"Loading DTR data..."})]})})}):b?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-gray-700 mb-4",children:b}),e.jsx("button",{onClick:n,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"DTR Print Preview"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:T,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Print"}),e.jsx("button",{onClick:n,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})]})]}),e.jsxs("div",{ref:a,className:"print-content",children:[e.jsxs("div",{className:"header text-center mb-4",children:[e.jsx("h1",{className:"text-lg font-bold",children:"CIVIL SERVICE FORM NO. 48"}),e.jsx("div",{className:"mt-1"}),e.jsx("h2",{className:"text-lg font-bold",children:"DAILY TIME RECORD"}),e.jsx("h3",{className:"text-lg font-bold",children:t.NAME}),e.jsx("p",{className:"text-sm",children:"NAME"}),e.jsxs("p",{className:"text-lg month-year",children:["For the month of: ",e.jsx("span",{className:"bold-month",children:IF(s,r)})]}),e.jsx("p",{className:"text-sm official-hours",children:"Official hours for arrival and departure"}),e.jsx("p",{className:"text-sm regular-days",children:"Regular Days ________ Saturdays _____________"})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 mb-4",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-gray-300",children:[e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-day",children:"Day"}),e.jsx("th",{colSpan:"2",className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs",children:"AM"}),e.jsx("th",{colSpan:"2",className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs",children:"PM"}),e.jsx("th",{colSpan:"2",className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs",children:"Undertime"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-days",children:"Days"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-late",children:"Late"})]}),e.jsxs("tr",{className:"bg-gray-300",children:[e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-am-arrival",children:"Arrival"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-am-departure",children:"Departure"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-pm-arrival",children:"Arrival"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-pm-departure",children:"Departure"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-undertime-hours",children:"Hours"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-undertime-minutes",children:"Minutes"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium"})]})]}),e.jsx("tbody",{children:p.map((_,E)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:`border border-gray-300 px-2 py-2 text-center text-xs ${_.isWeekend?"weekend-day":""}`,children:_.day}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:_.amIn}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:_.amOut}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:_.pmIn}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:_.pmOut}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:_.undertimeHours}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:_.undertimeMinutes}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:_.days}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:_.late})]},E))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-300 font-semibold totals-row",children:[e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:"TOTAL"}),e.jsx("td",{colSpan:"4",className:"border border-gray-300 px-2 py-2 text-center text-xs"}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:v}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:f}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-bold",children:j.days}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-bold",children:j.late})]})})]})}),e.jsxs("div",{className:"footer bg-gray-100 p-3 border border-gray-300",children:[e.jsx("p",{className:"mb-2",children:"I CERTIFY on my honor that the above is a true and correct report of the hours and work performed, record of which was made daily at the time of arrival at and departure from office."}),e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"signature-line",children:e.jsx("div",{className:"line",children:"_________________"})}),e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"mb-2"}),e.jsx("p",{className:"mb-2 text-right",children:"Verified as to the prescribed office hours."}),e.jsx("div",{className:"mb-2"}),e.jsxs("div",{className:"signature-line",children:[e.jsx("div",{className:"line",children:"_______________"}),e.jsx("div",{className:"label",children:"In Charge"})]})]})]})]})})}const nw={1:"Regular",2:"Casual",3:"Co-Terminus",4:"Provisional",5:"Job Order (JO)",6:"Project Based (PB)",7:"Special Engaged (SE)",8:"Others"},hx=t=>{const s=parseInt(t);return nw[s]||"Unknown"},tb=()=>Object.entries(nw).map(([t,s])=>({id:parseInt(t),name:s})),OF=t=>{const s=parseInt(t);return{1:"Regular",2:"Casual",3:"Co-Terminus",4:"Provisional",5:"JO",6:"PB",7:"SE",8:"Others"}[s]||"Unknown"},FF=(t,s)=>{if(!t)return"";const r=new Date(t);if(isNaN(r.getTime()))return t;const n=r.toLocaleString("en-US",{month:"long"}),a=r.getFullYear(),l=new Date(r.getFullYear(),r.getMonth()+1,0).getDate();switch(s){case"first_half":return`${n} 1-15, ${a}`;case"second_half":return`${n} 16-${l}, ${a}`;case"full":default:return`${n} ${a}`}},$F=t=>{const r=new Date(t).getDay();return r===0||r===6},md=t=>{if(!t)return"";if(typeof t=="string"){const s=t.match(/(\d{2}:\d{2})(?::\d{2})?/);return s?s[1]:t}return t},Js=t=>{if(!t||typeof t!="string")return 0;const s=md(t),[r,n]=s.split(":").map(Number);return r*60+n},Qs=t=>{if(!t)return"";if(typeof t=="string"){const s=t.match(/(\d{2}:\d{2})(?::\d{2})?/);return s?s[1]:t}return t},sb=(t,s)=>!t||!s?[null,null]:[Js(t),Js(s)],rb=(t,s,r)=>{if(!t||!s||!r)return!1;const n=Js(t);return n>=s&&n<=r},UF=(t,s)=>{const r=[],n=new Date(t),a=new Date(s);for(;n<=a;){const l=n.getFullYear(),i=String(n.getMonth()+1).padStart(2,"0"),o=String(n.getDate()).padStart(2,"0"),c=`${l}-${i}-${o}`;r.push(c),n.setDate(n.getDate()+1)}return r},nb=(t,s)=>{if(!t||!s)return null;const r=new Date(t),n=r.getFullYear(),a=r.getMonth();let l,i;switch(s){case"first_half":l=new Date(n,a,1),i=new Date(n,a,15);break;case"second_half":l=new Date(n,a,16),i=new Date(n,a+1,0);break;case"full":default:l=new Date(n,a,1),i=new Date(n,a+1,0);break}return{startDate:l,endDate:i,startDateStr:t,endDateStr:i.toISOString().split("T")[0]}},HF=t=>{if(!t)return null;const s=new Date(t),r=s.getFullYear(),n=s.getMonth(),a=new Date(r,n,1),l=new Date(r,n+1,0);return{startDate:a,endDate:l,startDateStr:t,endDateStr:l.toISOString().split("T")[0]}},BF=(t,s,r)=>{if(!r||r==="full")return!0;const n=parseInt(t.split("-")[2]);switch(r){case"first_half":return n>=1&&n<=15;case"second_half":return n>=16;default:return!0}};function zF({department:t,selectedMonth:s,selectedPeriod:r="full",selectedStatus:n="active",selectedAppointment:a="all",selectedEmployees:l=new Set,departmentEmployees:i=[],onClose:o}){const c=x.useRef(),{user:d}=Ts(),[m,u]=x.useState(!1),[p,g]=x.useState({}),[j,y]=x.useState(null),[v,h]=x.useState(!1),[f,N]=x.useState({lguDtrName:""}),b=()=>{typeof o=="function"?o():console.warn("GenerateDTRPrint_Dept: onClose handler not provided")},w=l;x.useEffect(()=>{console.log(" GenerateDTRPrint_Dept Component Mounted/Updated:",{department:t,selectedMonth:s,selectedPeriod:r,selectedStatus:n,selectedAppointment:a,timestamp:new Date().toISOString()})},[t,s,r,n,a]),x.useEffect(()=>{(async()=>{try{const _=await oe.get("/company/info");_.data.success&&N(_.data.data)}catch(_){console.error("Error fetching company info:",_)}})()},[]),x.useEffect(()=>{s&&w.size>0&&D()},[t,s,r,w]);const D=async()=>{console.log(" Starting data fetch for selected employees..."),console.log(" Input parameters:",{department:t,selectedMonth:s,selectedPeriod:r,selectedStatus:n,selectedAppointment:a,selectedEmployeesCount:w.size}),u(!0),h(!0),y(null),g({});try{const T={};for(const _ of w){console.log(` Processing employee ID: ${_}`);const E=i.find(J=>J.USERID===parseInt(_));if(!E){console.warn(` Employee with ID ${_} not found in departmentEmployees`);continue}console.log(` Found employee: ${E.NAME}`);const A=await oe.get(`/employees/${E.USERID}/shift-schedule`),L=A.data.success?A.data.data:null;console.log(` Shift schedule for ${E.NAME}:`,L);const F=await oe.get(`/logs/${E.USERID}`,{params:{startDate:nb(s,r).startDateStr,endDate:nb(s,r).endDateStr}}),W=Array.isArray(F.data)?F.data:[];console.log(` Time logs for ${E.NAME}:`,W.length,"logs");const Y=HF(s),q=S(W,L,Y.startDate,Y.endDate,E.NAME,r);console.log(` Processed ${q.processed.length} days for ${E.NAME}`),T[E.USERID]={employee:E,shiftSchedule:L,logs:W,processed:q.processed,totals:q.totals,undertime:q.undertime}}console.log(" All employee data processed:",Object.keys(T).length,"employees"),g(T),h(!1)}catch(T){console.error(" Error fetching department data:",T),y(T.message||"Failed to load department data"),h(!1)}finally{u(!1)}},S=(T,_,E,A,L,F)=>{console.log(` Starting log processing for ${L}...`),console.log(" Input data:",{logsCount:T.length,schedule:_,startDate:E,endDate:A,selectedPeriod:F}),T.length>0&&console.log(" Sample log data:",{firstLog:T[0],lastLog:T[T.length-1],totalLogs:T.length});const W=UF(E,A);console.log(` Generated local date range for ${L}:`,{startDate:E,endDate:A,totalDays:W.length,firstDay:W[0],lastDay:W[W.length-1],fullRange:W});const Y=_!=null&&_.SHIFT_AMCHECKOUT_START?Qs(_.SHIFT_AMCHECKOUT_START):"11:00",q=_!=null&&_.SHIFT_AMCHECKOUT_END?Qs(_.SHIFT_AMCHECKOUT_END):"12:30",J=_!=null&&_.SHIFT_PMCHECKIN_START?Qs(_.SHIFT_PMCHECKIN_START):"12:31",O=_!=null&&_.SHIFT_PMCHECKIN_END?Qs(_.SHIFT_PMCHECKIN_END):"14:00",[M,k]=sb(Y,q),[I,K]=sb(J,O);console.log(" Time windows:",{amCheckOutStart:Y,amCheckOutEnd:q,pmCheckInStart:J,pmCheckInEnd:O,amCheckOutStartMin:M,amCheckOutEndMin:k,pmCheckInStartMin:I,pmCheckInEndMin:K});const z=[];let P=0,R=0,B=0;for(let U=0;U<W.length;U++){const G=W[U],$=U+1,X=$F(G),Q=BF(G,s,F);let Ne=[];Q&&(Ne=T.filter(ue=>{let we="";return ue.CHECKTIME&&(ue.CHECKTIME.includes(" ")?we=ue.CHECKTIME.split(" ")[0]:ue.CHECKTIME.includes("T")?we=ue.CHECKTIME.split("T")[0]:we=ue.CHECKTIME),(G==="2024-08-01"||G==="2024-08-02")&&console.log(` Date comparison for ${G} (${L}):`,{logDateStr:we,dateStr:G,matches:we===G,checktime:ue.CHECKTIME}),we===G})),console.log(` Processing ${G} (Day ${$}) for ${L} - In period: ${Q}:`,Ne.length,"logs"),Ne.length>0&&console.log(" Sample day logs:",Ne.map(ue=>({CHECKTIME:ue.CHECKTIME,extractedTime:md(ue.CHECKTIME),extractedDate:ue.CHECKTIME?ue.CHECKTIME.split(" ")[0]:"N/A"})));let V="",re="",ne="",xe="";if(Ne.length>0){const ue=Ne.filter(Ie=>{const ge=Qs(Ie.CHECKTIME||Ie.DATE||Ie.date);return ge&&Js(ge)<720}).sort((Ie,ge)=>Js(Qs(Ie.CHECKTIME||Ie.DATE||Ie.date))-Js(Qs(ge.CHECKTIME||ge.DATE||ge.date)));ue.length>0&&(V=Qs(ue[0].CHECKTIME||ue[0].DATE||ue[0].date));const we=Ne.filter(Ie=>{const ge=Qs(Ie.CHECKTIME||Ie.DATE||Ie.date);return ge&&rb(ge,M,k)}).sort((Ie,ge)=>Js(Qs(Ie.CHECKTIME||Ie.DATE||Ie.date))-Js(Qs(ge.CHECKTIME||ge.DATE||ge.date)));we.length>0&&(re=Qs(we[0].CHECKTIME||we[0].DATE||we[0].date));const De=Ne.filter(Ie=>{const ge=Qs(Ie.CHECKTIME||Ie.DATE||Ie.date);return ge&&rb(ge,I,K)}).sort((Ie,ge)=>Js(Qs(Ie.CHECKTIME||Ie.DATE||Ie.date))-Js(Qs(ge.CHECKTIME||ge.DATE||ge.date)));De.length>0&&(ne=Qs(De[0].CHECKTIME||De[0].DATE||De[0].date));const le=Ne.filter(Ie=>{const ge=Qs(Ie.CHECKTIME||Ie.DATE||Ie.date);return ge&&Js(ge)>K}).sort((Ie,ge)=>Js(Qs(ge.CHECKTIME||ge.DATE||ge.date))-Js(Qs(Ie.CHECKTIME||Ie.DATE||Ie.date)));le.length>0&&(xe=Qs(le[0].CHECKTIME||le[0].DATE||le[0].date))}console.log(` Properly grouped times for ${G} (${L}):`,{AM_CHECKIN:V,AM_CHECKOUT:re,PM_CHECKIN:ne,PM_CHECKOUT:xe,totalLogs:Ne.length});let me=0;if(Q&&_){if(V&&_.SHIFT_AMCHECKIN){const ue=Js(Qs(_.SHIFT_AMCHECKIN)),we=Js(V);we>ue&&(me+=we-ue)}if(ne&&_.SHIFT_PMCHECKIN){const ue=Js(Qs(_.SHIFT_PMCHECKIN)),we=Js(ne);we>ue&&(me+=we-ue)}}let Z=0;if(Q&&_){if(re&&_.SHIFT_AMCHECKOUT){const ue=md(_.SHIFT_AMCHECKOUT);Z+=Math.max(0,Js(ue)-Js(re))}if(xe&&_.SHIFT_PMCHECKOUT){const ue=md(_.SHIFT_PMCHECKOUT);Z+=Math.max(0,Js(ue)-Js(xe))}}let ee="";X?ee="Weekend":Q&&([V,re,ne,xe].filter(we=>we&&we.trim()!=="").length===0?ee="Absent":me>0&&(ee=`Late ${me} min`));const ye=[V,re,ne,xe].filter(ue=>ue&&ue.trim()!=="").length,ve=Q&&ye>0&&!X?1:0;z.push({day:$,date:G,amIn:Q?V:"",amOut:Q?re:"",pmIn:Q?ne:"",pmOut:Q?xe:"",late:Q&&me>0?`${me} min`:"",undertime:Q&&Z>0?`${Z} min`:"",undertimeHours:Q&&Z>0?Math.floor(Z/60):"",undertimeMinutes:Q&&Z>0?Z%60:"",days:ve,remarks:ee,isWeekend:X,isInPeriod:Q}),Q&&ye>0&&!X&&(P++,R+=me,B+=Z)}return console.log(" Final totals:",{totalDays:P,totalLate:R,totalUndertimeMinutes:B}),{processed:z,totals:{days:P,late:R},undertime:{hours:Math.floor(B/60),minutes:B%60}}},C=()=>{const T=c.current.innerHTML;new Date().toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),f.lguDtrName,d!=null&&d.id||d!=null&&d.USERID||d!=null&&d.username;const E=window.open("","_blank");E.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>DTR Print</title>
          <style>
            @media print {
              @page {
                size: A4;
                margin: 8mm;
              }
              body { 
                margin: 0; 
                padding: 0; 
                font-family: Arial, sans-serif;
                font-size: 6px;
                line-height: 1.1;
              }
              .no-print { display: none !important; }
              
              /* Page Break Controls - Each employee on separate page */
              .page-break {
                page-break-before: always;
                page-break-inside: avoid;
                break-before: page;
                break-inside: avoid;
              }
              
              /* First employee should not have page break before */
              .page-break:first-child {
                page-break-before: auto;
                break-before: auto;
              }
              
              /* Ensure each employee section stays together */
              .employee-dtr-section {
                page-break-inside: avoid;
                break-inside: avoid;
                min-height: 100vh;
                display: flex;
                flex-direction: column;
              }
              
              /* Header Styles - Compact for space */
              .header { 
                text-align: center; 
                margin-bottom: 6px; 
                font-size: 10px;
              }
              .header h1 { 
                font-size: 12px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header h2 { 
                font-size: 11px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header h3 { 
                font-size: 10px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header p { 
                font-size: 8px; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              
              /* Employee Name - Blue Color */
              .employee-name {
                color: #0066cc !important;
                font-weight: bold;
                font-size: 11px;
              }
              
              /* Weekend day styling */
              .weekend-day {
                color: #0066cc !important; /* Blue color for weekends */
                font-weight: bold;
              }
              
              /* Table Styles - 40% increase in row height from default */
              table { 
                border-collapse: collapse; 
                width: 100%; 
                font-size: 10px;
                margin-bottom: 8px;
                table-layout: fixed;
                height: auto;
              }
              th, td { 
                border: 0.5px solid #000; 
                padding: 2.8px 1px; /* 40% increase from 2px */
                text-align: center; 
                vertical-align: middle;
                font-size: 11px; /* 30% increase from 6px: 6px + 5px */
                line-height: 1.0;
                height: 14px; /* 40% increase from 10px */
              }
              th { 
                font-weight: bold; 
                background-color: #d3d3d3 !important; /* Light grey header */
                font-size: 11px; /* 30% increase from 6px: 6px + 5px */
                height: 16.8px; /* 40% increase from 12px */
              }
              
              /* Column widths for better A4 utilization */
              .col-day { width: 6%; }
              .col-am-arrival { width: 13%; }
              .col-am-departure { width: 13%; }
              .col-pm-arrival { width: 13%; }
              .col-pm-departure { width: 13%; }
              .col-undertime-hours { width: 6%; }
              .col-undertime-minutes { width: 6%; }
              .col-days { width: 7%; }
              .col-late { width: 7%; }
              
              /* Footer Styles - Compact */
              .footer { 
                margin-top: 6px; 
                font-size: 8px;
                background-color: #f5f5f5 !important; /* Light grey footer */
                padding: 6px;
                border: 1px solid #ddd;
              }
              .footer p { 
                margin: 0 0 2px 0; 
                font-size: 8px;
                line-height: 1.1;
              }
              .footer p.text-right {
                text-align: right !important;
              }
              .footer .mb-2 {
                margin-bottom: 8px !important;
              }
              .signature-line { 
                margin-top: 4px; 
                text-align: right; 
              }
              .signature-line .line { 
                border-bottom: 1px solid #000; 
                display: inline-block; 
                width: 120px; 
              }
              .signature-line .label { 
                text-align: right !important; /* Right align the "In Charge" label */
                width: 100%; 
                margin-top: 1px; 
                font-size: 8px;
                padding-right: 0;
              }
              
              /* Fit to page container - No height restrictions */
              .print-container {
                height: auto;
                width: 100%;
                overflow: visible;
              }
              .table-container {
                height: auto;
                overflow: visible;
              }
              
              /* Totals row styling */
              .totals-row {
                background-color: #d3d3d3 !important; /* Light grey totals row */
                font-weight: bold;
                height: 16.8px; /* 40% increase from 12px to match header */
              }
              
              /* System-generated document footer */
              .system-footer {
                margin-top: 8px;
                padding-top: 4px;
                border-top: 1px solid #ddd;
                font-size: 7px;
                color: #666;
                text-align: center;
                line-height: 1.2;
              }
            }
          </style>
        </head>
        <body>
          <div class="print-container">
            ${T}
          </div>
        </body>
      </html>
    `),E.document.close(),E.onload=()=>{E.print(),E.close()}};return console.log(" GenerateDTRPrint_Dept Render Debug:",{loading:m,error:j,processingData:v,departmentDataCount:Object.keys(p).length,selectedEmployeesCount:w.size,department:t,selectedMonth:s,selectedPeriod:r,selectedStatus:n,selectedAppointment:a}),console.log(m?" RENDER PATH: Loading state":j?" RENDER PATH: Error state":v?" RENDER PATH: Processing data state":" RENDER PATH: Report preview"),m?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{children:"Loading department employees..."})]})})}):j?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-gray-700 mb-4",children:j}),e.jsx("button",{onClick:b,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})]})}):v?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{children:"Processing employee data..."})]})})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["DTR Print Preview - ",t," (",w.size," employees)"]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:C,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Print"}),e.jsx("button",{onClick:b,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})]})]}),e.jsxs("div",{ref:c,children:[Object.keys(p).length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-600 mb-4",children:"No data available for the selected employees."}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Please check if:",e.jsxs("ul",{className:"list-disc list-inside mt-2",children:[e.jsx("li",{children:"Employees are selected"}),e.jsx("li",{children:"The selected month has data"}),e.jsx("li",{children:"The status filter is not too restrictive"})]})]})]}):Object.entries(p).map(([T,_])=>e.jsxs("div",{className:"mb-8 page-break employee-dtr-section",children:[e.jsxs("div",{className:"header text-center mb-4",children:[e.jsx("h1",{className:"text-lg font-bold",children:"CIVIL SERVICE FORM NO. 48"}),e.jsx("div",{className:"mt-1"}),e.jsx("h2",{className:"text-lg font-bold",children:"DAILY TIME RECORD"}),e.jsx("h3",{className:"text-lg font-bold employee-name",children:_.employee.NAME}),e.jsx("p",{className:"text-sm",children:"NAME"}),e.jsxs("p",{className:"text-lg month-year",children:["For the month of: ",e.jsx("span",{className:"bold-month",children:FF(s,r)})]}),e.jsx("p",{className:"text-sm official-hours",children:"Official hours for arrival and departure"}),e.jsx("p",{className:"text-sm regular-days",children:"Regular Days ________ Saturdays _____________"})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 mb-4",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-gray-300",children:[e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-day",children:"Day"}),e.jsx("th",{colSpan:"2",className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs",children:"AM"}),e.jsx("th",{colSpan:"2",className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs",children:"PM"}),e.jsx("th",{colSpan:"2",className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs",children:"Undertime"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-days",children:"Days"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-late",children:"Late"})]}),e.jsxs("tr",{className:"bg-gray-300",children:[e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-am-arrival",children:"Arrival"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-am-departure",children:"Departure"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-pm-arrival",children:"Arrival"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-pm-departure",children:"Departure"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-undertime-hours",children:"Hours"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-undertime-minutes",children:"Minutes"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium"})]})]}),e.jsx("tbody",{children:_.processed.map((E,A)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:`border border-gray-300 px-2 py-2 text-center text-xs ${E.isWeekend?"weekend-day":""}`,children:E.day}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:E.amIn}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:E.amOut}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:E.pmIn}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:E.pmOut}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:E.undertimeHours}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:E.undertimeMinutes}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:E.days}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:E.late})]},A))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-300 font-semibold totals-row",children:[e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:"TOTAL"}),e.jsx("td",{colSpan:"4",className:"border border-gray-300 px-2 py-2 text-center text-xs"}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:_.undertime.hours}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:_.undertime.minutes}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:_.totals.days}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:_.totals.late})]})})]})}),e.jsxs("div",{className:"footer mt-6 text-xs",children:[e.jsx("div",{className:"mb-2",children:"I CERTIFY on my honor that the above is a true and correct report of the hours and work performed, record of which was made daily at the time of arrival at and departure from office."}),e.jsx("div",{className:"mb-2"})," ",e.jsx("div",{className:"mb-2"})," ",e.jsx("div",{className:"signature-line",children:e.jsx("div",{className:"line",children:"_________________"})}),e.jsx("div",{className:"mb-2"})," ",e.jsx("div",{className:"mb-2"})," ",e.jsx("p",{className:"mb-2 text-right",children:"Verified as to the prescribed office hours."}),e.jsx("div",{className:"mb-2"})," ",e.jsxs("div",{className:"signature-line",children:[e.jsx("div",{className:"line",children:"_______________"}),e.jsx("div",{className:"label",children:"In Charge"})]})]}),e.jsxs("div",{className:"system-footer mt-4",children:["System-Generated Document  ",f.lguDtrName||"HRIS System"," - Printed on: ",new Date().toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),". Printed By: ",(d==null?void 0:d.id)||(d==null?void 0:d.USERID)||(d==null?void 0:d.username)||"System"]})]},T)),"//"]})]})})}const WF=()=>{const[t,s]=x.useState("individual"),[r,n]=x.useState(""),[a,l]=x.useState([]),[i,o]=x.useState([]),[c,d]=x.useState(null),[m,u]=x.useState([]),[p,g]=x.useState([]),[j,y]=x.useState([]),[v,h]=x.useState(""),[f,N]=x.useState(""),[b,w]=x.useState("full"),[D,S]=x.useState("all"),[C,T]=x.useState("all"),[_,E]=x.useState(!1),[A,L]=x.useState(!1),[F,W]=x.useState([]),[Y,q]=x.useState(new Set),[J,O]=x.useState(!1),[M,k]=x.useState(""),[I,K]=x.useState([]),z=x.useMemo(()=>{const U=new Date,G=U.getFullYear(),$=U.getMonth()+1,X=[];for(let Q=G-2;Q<=G;Q++){const Ne=Q===G?$:12;for(let V=1;V<=Ne;V++){const ne=new Date(Q,V-1,1).toLocaleString("en-US",{month:"long"}),xe=`${Q}-${String(V).padStart(2,"0")}-01`;X.push({value:xe,label:`${ne} ${Q}`})}}return X},[]),P=x.useMemo(()=>{if(!f)return[];const[U,G]=f.split("-").map(Number),$=new Date(U,G-1,1).toLocaleString("en-US",{month:"short"}),X=new Date(U,G,0).getDate();return[{value:"full",label:`Full Month (${$} 1-${X})`},{value:"first_half",label:`1st Half (${$} 1-15)`},{value:"second_half",label:`2nd Half (${$} 16-${X})`}]},[f]);x.useEffect(()=>{const U=new Date,G=U.getFullYear(),$=U.getMonth()+1,X=`${G}-${String($).padStart(2,"0")}-01`;N(X)},[]),x.useEffect(()=>{w("full")},[f]),x.useEffect(()=>{(async()=>{try{console.log(" Fetching employees from MySQL employees table...");const G=await oe.get("/201-employees");if(G.data.success&&G.data.data){const $=G.data.data.map(X=>{const Q=bs(X.surname,X.firstname,X.middlename,X.extension);return{...X,NAME:Q||String(X.fullname||`${X.firstname||""} ${X.middlename||""} ${X.surname||""}`.trim()),BADGENUMBER:String(X.dtrbadgenumber||X.badgenumber||""),USERID:X.dtruserid||X.userid||X.objid,DEPTNAME:String(X.department_name||X.department||""),POSITION:String(X.position_title||X.position||""),PHOTO:X.photo_path||X.photo||null,APPOINTMENT:X.appointment_status||X.appointmentstatus||null,APPOINTMENT_NAME:X.appointment_name||null,EMPSTATUS:X.empstatus||null,objid:X.objid,idno:X.idno,surname:X.surname,firstname:X.firstname,middlename:X.middlename,extension:X.extension}});console.log(" Employees fetched from MySQL:",$.length),l($)}else console.error(" Invalid response structure:",G.data),l([])}catch(G){console.error(" Error fetching employees from MySQL:",G),l([])}})()},[]),x.useEffect(()=>{if(r.trim()==="")o([]);else{const U=r.toLowerCase(),G=a.filter($=>{const X=String($.NAME||"").toLowerCase(),Q=String($.BADGENUMBER||"").toLowerCase();return X.includes(U)||Q.includes(U)});o(G.slice(0,10))}},[r,a]),x.useEffect(()=>{if(M.trim()==="")K(F);else{const U=M.toLowerCase(),G=F.filter($=>{const X=String($.NAME||"").toLowerCase(),Q=String($.BADGENUMBER||"").toLowerCase();return X.includes(U)||Q.includes(U)});K(G)}},[M,F]),x.useEffect(()=>{const U=async()=>{try{console.log(" Fetching departments from MySQL...");const X=await oe.get("/departments");X.data.success&&(console.log(" Departments fetched:",X.data.data.length),u(X.data.data))}catch(X){console.error(" Error fetching departments:",X)}},G=async()=>{try{console.log(" Fetching appointment types from MySQL...");const X=await oe.get("/201-employees/lookup/appointmenttypes");X.data.success&&(console.log(" Appointment types fetched:",X.data.data.length),g(X.data.data))}catch(X){console.error(" Error fetching appointment types:",X)}},$=async()=>{try{console.log(" Fetching employee status types from MySQL...");const X=await oe.get("/201-employees/lookup/employeestatustypes");X.data.success&&(console.log(" Employee status types fetched:",X.data.data.length),y(X.data.data))}catch(X){console.error(" Error fetching employee status types:",X)}};U(),G(),$()},[]),x.useEffect(()=>{t==="department"?v||C!=="all"?R():(W([]),q(new Set),K([]),k("")):(W([]),q(new Set),K([]),k(""))},[v,D,C,t]);const R=async()=>{O(!0),W([]),q(new Set),K([]),k("");try{let U=[...a];if(console.log(" DEBUG: Starting with all employees:",U.length),console.log(" DEBUG: Sample employee data:",U[0]),v){console.log(" DEBUG: Filtering by department:",v);const $=U.length;U=U.filter(X=>{const Q=X.DEPTNAME===v;return!Q&&U.indexOf(X)<5&&console.log(" DEBUG: Employee does not match department:",{name:X.NAME,deptName:X.DEPTNAME,expectedDept:v,matches:Q}),Q}),console.log(` DEBUG: Department filter: ${$} -> ${U.length}`)}if(D!=="all"){console.log(" DEBUG: Filtering by status:",D);const $=U.length,X=parseInt(D);U=U.filter(Q=>{const V=(Q.empstatus!==null&&Q.empstatus!==void 0?parseInt(Q.empstatus):null)===X;return!V&&U.indexOf(Q)<5&&console.log(" DEBUG: Employee does not match status:",{name:Q.NAME,empstatus:Q.empstatus,expectedStatus:X,matches:V}),V}),console.log(` DEBUG: Status filter: ${$} -> ${U.length}`)}if(C!=="all"){console.log(" DEBUG: Filtering by appointment:",C);const $=U.length,X=parseInt(C);U=U.filter(Q=>{if(Q.Appointment===null||Q.Appointment===void 0)return!1;const V=parseInt(Q.Appointment)===X;return!V&&U.indexOf(Q)<5&&console.log(" DEBUG: Employee does not match appointment:",{name:Q.NAME,appointment:Q.Appointment,expectedAppointment:X,matches:V}),V}),console.log(` DEBUG: Appointment filter: ${$} -> ${U.length}`)}W(U),K(U);const G=new Set(U.map($=>$.USERID));if(q(G),console.log(` Final result: ${U.length} employees for department: ${v}, status: ${D}, appointment: ${C}`),console.log(` Automatically selected all ${G.size} employees`),U.length>0)console.log(" DEBUG: Sample filtered employees:",U.slice(0,3));else{console.log(" DEBUG: No employees found after filtering");const $=[...new Set(a.map(V=>V.DEPTNAME))];console.log(" DEBUG: Available departments:",$.slice(0,10));const X=[...new Set(a.map(V=>V.privilege))];console.log(" DEBUG: Available privilege values:",X);const Q=[...new Set(a.map(V=>V.APPOINTMENT))];console.log(" DEBUG: Available appointments:",Q);const Ne=a[0];console.log(" DEBUG: Sample employee fields:",Object.keys(Ne)),console.log(" DEBUG: Sample employee appointment-related fields:",{APPOINTMENT:Ne.APPOINTMENT,Appointment:Ne.Appointment,appointment:Ne.appointment})}}catch(U){console.error("Error fetching department employees:",U),W([]),K([])}finally{O(!1)}},B=async U=>{console.log(" Employee selected:",U.NAME),d(U),n(""),o([])};return e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Generate DTR Report"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"individual",checked:t==="individual",onChange:U=>s(U.target.value),className:"mr-2"}),"Individual"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"department",checked:t==="department",onChange:U=>s(U.target.value),className:"mr-2"}),"Multiple"]})]})]}),t==="individual"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Employee"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:r,onChange:U=>n(U.target.value),placeholder:"Search by name or badge number...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.length>0&&!c&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:i.map(U=>e.jsxs("div",{onClick:()=>B(U),className:"px-4 py-3 hover:bg-gray-100 cursor-pointer border-b border-gray-200 last:border-b-0 flex items-center space-x-3",children:[e.jsxs("div",{className:"flex-shrink-0",children:[U.PHOTO?e.jsx("img",{src:U.PHOTO,alt:U.NAME,className:"w-10 h-10 rounded-full object-cover border border-gray-300",onError:G=>{G.target.style.display="none",G.target.nextSibling&&(G.target.nextSibling.style.display="flex")}}):null,e.jsx("div",{className:`w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 text-sm font-medium ${U.PHOTO?"hidden":""}`,children:U.NAME?U.NAME.charAt(0).toUpperCase():"?"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.NAME}),(U.DEPTNAME||U.POSITION)&&e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:[U.DEPTNAME,U.POSITION].filter(Boolean).join(" - ")})]})]},U.USERID))})]})]}),c&&e.jsx("div",{className:"mb-6 p-4 bg-white border border-gray-200 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-shrink-0",children:[c.PHOTO?e.jsx("img",{src:c.PHOTO,alt:c.NAME,className:"w-16 h-16 rounded-full object-cover border-2 border-gray-300",onError:U=>{U.target.style.display="none",U.target.nextSibling&&(U.target.nextSibling.style.display="flex")}}):null,e.jsx("div",{className:`w-16 h-16 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 text-xl font-medium border-2 border-gray-300 ${c.PHOTO?"hidden":""}`,children:c.NAME?c.NAME.charAt(0).toUpperCase():"?"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-1",children:c.NAME}),e.jsxs("div",{className:"space-y-1",children:[c.DEPTNAME&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Department:"})," ",c.DEPTNAME]}),c.POSITION&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Position:"})," ",c.POSITION]}),(c.APPOINTMENT_NAME||c.APPOINTMENT||c.Appointment||c.appointmentstatus)&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Appointment:"})," ",c.APPOINTMENT_NAME||hx(c.APPOINTMENT||c.Appointment||c.appointmentstatus)]}),!c.APPOINTMENT_NAME&&!c.APPOINTMENT&&!c.Appointment&&!c.appointmentstatus&&e.jsxs("p",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium",children:"Appointment:"})," N/A"]})]})]}),e.jsx("button",{onClick:()=>{d(null),n("")},className:"flex-shrink-0 px-3 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",title:"Clear selection",children:""})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Month"}),e.jsxs("select",{value:f,onChange:U=>N(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a month..."}),z.map(U=>e.jsx("option",{value:U.value,children:U.label},U.value))]})]}),f&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Period"}),e.jsx("select",{value:b,onChange:U=>w(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:P.map(U=>e.jsx("option",{value:U.value,children:U.label},U.value))})]}),c&&f&&e.jsx("button",{onClick:()=>E(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Generate Report"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Department"}),e.jsxs("select",{value:v,onChange:U=>h(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a department..."}),m.map(U=>e.jsx("option",{value:U.departmentshortname||U.DEPARTMENTSHORTNAME||U.departmentname||U.DEPTNAME,children:U.departmentshortname||U.DEPARTMENTSHORTNAME||U.departmentname||U.DEPTNAME},U.deptid||U.DEPTID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment"}),e.jsxs("select",{value:C,onChange:U=>T(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Appointments"}),p.map(U=>e.jsx("option",{value:U.id,children:U.appointmentname},U.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Status"}),e.jsxs("select",{value:D,onChange:U=>S(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),j.map(U=>e.jsx("option",{value:U.empstatid,children:U.empstatname},U.empstatid))]})]})]})}),e.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Month"}),e.jsxs("select",{value:f,onChange:U=>N(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"",children:"Select a month..."}),z.map(U=>e.jsx("option",{value:U.value,children:U.label},U.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Period"}),e.jsx("select",{value:b,onChange:U=>w(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:P.map(U=>e.jsx("option",{value:U.value,children:U.label},U.value))})]})]})}),(F.length>0||J)&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Select Employees ",v?`from ${v}`:""," (",F.length," found)"]}),J&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Loading employees..."})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Employees"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:M,onChange:U=>k(U.target.value),placeholder:"Search by name or badge number...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),M&&e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Showing ",I.length," of ",F.length," employees"]})]}),e.jsxs("div",{className:"mb-4 flex space-x-2",children:[e.jsxs("button",{onClick:()=>{const U=I.map(G=>G.USERID);q(new Set(U))},className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:["Select All (",I.length,")"]}),e.jsx("button",{onClick:()=>q(new Set),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Select None"}),Y.size>0&&e.jsxs("span",{className:"px-3 py-1 text-sm bg-green-100 text-green-700 rounded",children:[Y.size," selected"]})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg max-h-60 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 p-4",children:I.map(U=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded",children:[e.jsx("input",{type:"checkbox",id:`emp-${U.USERID}`,checked:Y.has(U.USERID),onChange:G=>{const $=new Set(Y);G.target.checked?$.add(U.USERID):$.delete(U.USERID),q($)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 flex-shrink-0"}),e.jsxs("label",{htmlFor:`emp-${U.USERID}`,className:"flex-1 cursor-pointer flex items-center space-x-3",children:[e.jsxs("div",{className:"flex-shrink-0",children:[U.PHOTO?e.jsx("img",{src:U.PHOTO,alt:U.NAME,className:"w-10 h-10 rounded-full object-cover border border-gray-300",onError:G=>{G.target.style.display="none",G.target.nextSibling&&(G.target.nextSibling.style.display="flex")}}):null,e.jsx("div",{className:`w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 text-sm font-medium border border-gray-300 ${U.PHOTO?"hidden":""}`,children:U.NAME?U.NAME.charAt(0).toUpperCase():"?"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm text-gray-900",children:U.NAME}),(U.DEPTNAME||U.POSITION)&&e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:[U.DEPTNAME,U.POSITION].filter(Boolean).join(" - ")})]})]})]},U.USERID))})})]}),Y.size>0&&f&&e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("button",{onClick:()=>L(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:["Generate Report (",Y.size," employees)"]})})]})]}),_&&c&&f&&e.jsx(RF,{employee:c,selectedMonth:f,selectedPeriod:b,onClose:()=>E(!1)}),A&&Y.size>0&&f&&e.jsx(zF,{department:v,selectedEmployees:Y,selectedMonth:f,selectedPeriod:b,selectedStatus:D,selectedAppointment:C,departmentEmployees:F,onClose:()=>L(!1)})]})})},YF=()=>{const{user:t}=Ts(),[s,r]=x.useState(""),[n,a]=x.useState("full");x.useEffect(()=>{a("full")},[s]);const[l,i]=x.useState("all"),[o,c]=x.useState("all"),[d,m]=x.useState("all"),[u,p]=x.useState([]),[g,j]=x.useState(!1),[y,v]=x.useState([]),[h,f]=x.useState([]),[N,b]=x.useState([]),[w,D]=x.useState({lguDtrName:"",lguHrmo:"",logoPreview:null}),[S,C]=x.useState(1),[T,_]=x.useState(10),[E,A]=x.useState(0),L=x.useMemo(()=>{const z=new Date,P=z.getFullYear(),R=z.getMonth()+1,B=[];for(let U=P-2;U<=P;U++){const G=U===P?R:12;for(let $=1;$<=G;$++){const Q=new Date(U,$-1,1).toLocaleString("en-US",{month:"long"}),Ne=`${U}-${String($).padStart(2,"0")}-01`;B.push({value:Ne,label:`${Q} ${U}`})}}return B.reverse()},[]),F=x.useMemo(()=>{if(!s)return[];const[z,P]=s.split("-").map(Number),R=new Date(z,P-1,1).toLocaleString("en-US",{month:"short"}),B=new Date(z,P,0).getDate();return[{value:"full",label:`Full Month (${R} 1-${B})`},{value:"first",label:`1st Half (${R} 1-15)`},{value:"second",label:`2nd Half (${R} 16-${B})`}]},[s]);x.useEffect(()=>{const z=new Date,P=z.getFullYear(),R=z.getMonth()+1,B=`${P}-${String(R).padStart(2,"0")}-01`;r(B)},[]),x.useEffect(()=>{(async()=>{try{const P=await oe.get("/company/info");P.data.success&&D({lguDtrName:P.data.data.lguDtrName||"",lguHrmo:P.data.data.lguHrmo||"",logoPreview:P.data.data.logoPreview||null});const R=await oe.get("/departments");if(R.data.success){const $=[...R.data.data||[]].sort((X,Q)=>{const Ne=(X.departmentshortname||"").toLowerCase(),V=(Q.departmentshortname||"").toLowerCase();return Ne.localeCompare(V)});v($)}const B=await oe.get("/201-employees/lookup/appointmenttypes");if(B.data.success){const $=[...B.data.data||[]].sort((X,Q)=>{const Ne=(X.appointmentname||"").toLowerCase(),V=(Q.appointmentname||"").toLowerCase();return Ne.localeCompare(V)});f($)}const U=await oe.get("/201-employees/lookup/employeestatustypes");if(U.data.success){const $=[...U.data.data||[]].sort((X,Q)=>{const Ne=(X.empstatname||X.employeestatus||"").toLowerCase(),V=(Q.empstatname||Q.employeestatus||"").toLowerCase();return Ne.localeCompare(V)});console.log(" Employee status types fetched:",$),b($)}else console.warn(" Employee status types response not successful:",U.data)}catch(P){console.error(" Error fetching lookup data:",P)}})()},[]);const W=async()=>{if(!s){p([]);return}try{j(!0);const[z,P]=s.split("-"),B=new Date(parseInt(z),parseInt(P)-1,1).toLocaleString("en-US",{month:"long"}),U=parseInt(z),$={full:"Full Month",first:"1st Half",second:"2nd Half"}[n]||n,X={computedmonth:B,computedyear:U,period:$};l!=="all"&&(X.department=l),o!=="all"&&(X.appointment=o),d!=="all"&&(X.status=d);const Q=await oe.get("/computed-dtr",{params:X});Q.data.success?p(Q.data.data||[]):p([])}catch(z){console.error(" Error fetching computed DTR data:",z),p([])}finally{j(!1)}};x.useEffect(()=>{s?W():p([])},[s,n,l,o,d]);const Y=z=>{const P=Number.isFinite(z)?Number(z):0,R=Math.floor(P/60),B=Math.round(P%60);return`${R.toString().padStart(2,"0")}:${B.toString().padStart(2,"0")}`},q=x.useMemo(()=>{const z=u.reduce((P,R)=>(P.totalLates+=Number(R.total_lates)||0,P.totalDays+=Number(R.total_days)||0,P.totalNetDays+=Number(R.total_netdays)||0,P.totalLeaves+=Number(R.total_leaves)||0,P.totalTravels+=Number(R.total_travels)||0,P.totalCdo+=Number(R.total_cdo)||0,P),{totalLates:0,totalDays:0,totalNetDays:0,totalLeaves:0,totalTravels:0,totalCdo:0});return{totalLates:isNaN(z.totalLates)?0:z.totalLates,totalDays:isNaN(z.totalDays)?0:z.totalDays,totalNetDays:isNaN(z.totalNetDays)?0:Math.round(z.totalNetDays*1e4)/1e4,totalLeaves:isNaN(z.totalLeaves)?0:z.totalLeaves,totalTravels:isNaN(z.totalTravels)?0:z.totalTravels,totalCdo:isNaN(z.totalCdo)?0:z.totalCdo}},[u]),J=x.useMemo(()=>{const z=(S-1)*T,P=z+T;return u.slice(z,P)},[u,S,T]);x.useEffect(()=>{const z=Math.ceil(u.length/T);A(z),S>z&&z>0&&C(1)},[u.length,T,S]),x.useEffect(()=>{C(1)},[u]);const O=z=>{C(z)},M=z=>{_(Number(z)),C(1)},k=()=>{var Ne,V,re,ne;if(!u||u.length===0){alert("No data to print");return}const z=s?((Ne=L.find(xe=>xe.value===s))==null?void 0:Ne.label)||s:"",P=((V=F.find(xe=>xe.value===n))==null?void 0:V.label)||n,R=l==="all"?"All Departments":((re=y.find(xe=>xe.departmentshortname===l))==null?void 0:re.departmentshortname)||l,B=o==="all"?"All Appointments":((ne=h.find(xe=>xe.id==o))==null?void 0:ne.appointmentname)||o,U=new Date().toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),G=w.lguDtrName||"HRIS System",$=(t==null?void 0:t.USERID)||(t==null?void 0:t.id)||(t==null?void 0:t.username)||"System",X=window.open("","_blank"),Q=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Computed Attendance Report</title>
          <style>
            @media print {
              @page { margin: 0.5in; }
            }
            body { 
              font-family: Arial, sans-serif; 
              margin: 0;
              padding: 20px;
            }
            .header {
              position: relative;
              margin-bottom: 20px;
              text-align: center;
              min-height: 80px;
            }
            .logo {
              position: absolute;
              left: 0;
              top: 0;
              max-width: 70px;
              max-height: 70px;
              z-index: 0;
              opacity: 0.4;
            }
            .header-text {
              position: relative;
              z-index: 1;
            }
            .hrmo-text {
              font-size: 22px;
              font-weight: bold;
              text-align: center;
              margin-bottom: 5px;
              color: #000;
            }
            .header-title {
              font-size: 18px;
              font-weight: bold;
              text-align: center;
              margin-bottom: 5px;
            }
            .month-period {
              text-align: center;
              margin-bottom: 10px;
              font-size: 14px;
            }
            .filters {
              margin-bottom: 15px;
              font-size: 12px;
              text-align: center;
            }
            .filters p {
              margin: 0;
              display: inline;
            }
            .filters p:first-child::after {
              content: " | ";
              margin: 0 10px;
            }
            table { 
              width: 100%; 
              border-collapse: collapse; 
              margin-top: 10px;
            }
            th { 
              border: 1px solid #000; 
              padding: 8px 6px; 
              text-align: center;
              background-color: #f3f4f6; 
              font-weight: bold;
              font-size: 11px;
            }
            td { 
              border: 1px solid #000; 
              padding: 4px 6px; 
              text-align: left; 
              font-size: 10px;
            }
            tfoot { 
              background-color: #e0e7ff; 
              font-weight: bold; 
            }
            .footer {
              margin-top: 20px;
              font-size: 11px;
              text-align: center;
              color: #666;
            }
          </style>
        </head>
        <body>
          <div class="header">
            ${w.logoPreview?`<img src="${w.logoPreview}" alt="Logo" class="logo" />`:""}
            <div class="header-text">
              <div class="hrmo-text">Human Resource Management Office</div>
              <div class="header-title">Computed Attendance Report</div>
              <div class="month-period">For the Month of <strong>${z}</strong>, <strong>${P}</strong></div>
              <div class="filters">
                <p><strong>Department:</strong> ${R}</p>
                <p><strong>Appointment:</strong> ${B}</p>
              </div>
            </div>
          </div>
          
          <table>
            <thead>
              <tr>
                <th style="width: 40px;">NO.</th>
                <th>Employee</th>
                <th style="width: 60px;">LEAVES</th>
                <th style="width: 60px;">LOCATORS</th>
                <th style="width: 60px;">TRAVELS</th>
                <th style="width: 50px;">CDO</th>
                <th style="width: 60px;">LATES</th>
                <th style="width: 60px;">DAYS</th>
                <th style="width: 70px;">NETDAYS</th>
              </tr>
            </thead>
            <tbody>
              ${u.map((xe,me)=>{const Z=bs(xe.surname,xe.firstname,xe.middlename,xe.extension)||"",ee=[xe.department_name,xe.position_title].filter(Boolean).join(" - ")||"";return`
                  <tr>
                    <td style="text-align: center;">${me+1}</td>
                    <td>${Z}<br><small style="font-size: 9px; color: #666;">${ee}</small></td>
                    <td style="text-align: center;">${xe.total_leaves||0}</td>
                    <td style="text-align: center;">0</td>
                    <td style="text-align: center;">${xe.total_travels||0}</td>
                    <td style="text-align: center;">${xe.total_cdo||0}</td>
                    <td style="text-align: center;">${Y(xe.total_lates||0)}</td>
                    <td style="text-align: center;">${Number(xe.total_days||0).toFixed(3)}</td>
                    <td style="text-align: center;">${Number(xe.total_netdays||0).toFixed(4)}</td>
                  </tr>
                `}).join("")}
            </tbody>
            <tfoot>
              <tr>
                <td colspan="2" style="text-align: center;"><strong>Totals</strong></td>
                <td style="text-align: center;">${q.totalLeaves}</td>
                <td style="text-align: center;">0</td>
                <td style="text-align: center;">${q.totalTravels}</td>
                <td style="text-align: center;">${q.totalCdo}</td>
                <td style="text-align: center;">${Math.round(Number(q.totalLates||0))}</td>
                <td style="text-align: center;">${Number(q.totalDays).toFixed(3)}</td>
                <td style="text-align: center;">${Number(q.totalNetDays).toFixed(4)}</td>
              </tr>
            </tfoot>
          </table>
          
          <div class="footer">
            System-Generated Document  ${G} - Printed on: ${U}, Printed by: ${$}
          </div>
        </body>
      </html>
    `;X.document.write(Q),X.document.close(),X.print()},I=()=>{var V;if(!u||u.length===0){alert("No data to export");return}const z=["NO.","Employee","Department/Position","LEAVES","LOCATORS","TRAVELS","CDO","LATES","DAYS","NETDAYS"],P=u.map((re,ne)=>{const xe=bs(re.surname,re.firstname,re.middlename,re.extension)||"",me=[re.department_name,re.position_title].filter(Boolean).join(" - ")||"";return[ne+1,xe,me,re.total_leaves||0,0,re.total_travels||0,re.total_cdo||0,Y(re.total_lates||0),Number(re.total_days||0).toFixed(3),Number(re.total_netdays||0).toFixed(4)]}),R=["Totals","","",q.totalLeaves,0,q.totalTravels,q.totalCdo,Y(q.totalLates),Number(q.totalDays).toFixed(3),Number(q.totalNetDays).toFixed(4)],U=[z.map(re=>`"${re}"`).join(","),...P.map(re=>re.map(ne=>`"${String(ne).replace(/"/g,'""')}"`).join(",")),R.map(re=>`"${String(re).replace(/"/g,'""')}"`).join(",")].join(`
`),G=new Blob([U],{type:"text/csv;charset=utf-8;"}),$=window.URL.createObjectURL(G),X=document.createElement("a");X.href=$;const Q=new Date().toISOString().split("T")[0],Ne=s&&((V=L.find(re=>re.value===s))==null?void 0:V.label.replace(/\s+/g,"_"))||"All";X.download=`Computed_Attendances_${Ne}_${Q}.csv`,X.click(),window.URL.revokeObjectURL($)},K=()=>{if(!u||u.length===0){alert("No data to export");return}K2(()=>import("./xlsx-D_0l8YDs.js"),[]).then(z=>{var $;const P=u.map((X,Q)=>{const Ne=bs(X.surname,X.firstname,X.middlename,X.extension)||"",V=[X.department_name,X.position_title].filter(Boolean).join(" - ")||"";return{"NO.":Q+1,Employee:Ne,"Department/Position":V,LEAVES:X.total_leaves||0,LOCATORS:0,TRAVELS:X.total_travels||0,CDO:X.total_cdo||0,LATES:Y(X.total_lates||0),DAYS:Number(X.total_days||0).toFixed(3),NETDAYS:Number(X.total_netdays||0).toFixed(4)}});P.push({"NO.":"Totals",Employee:"","Department/Position":"",LEAVES:q.totalLeaves,LOCATORS:0,TRAVELS:q.totalTravels,CDO:q.totalCdo,LATES:Y(q.totalLates),DAYS:Number(q.totalDays).toFixed(3),NETDAYS:Number(q.totalNetDays).toFixed(4)});const R=z.utils.json_to_sheet(P),B=z.utils.book_new();z.utils.book_append_sheet(B,R,"Computed Attendances");const U=new Date().toISOString().split("T")[0],G=s&&(($=L.find(X=>X.value===s))==null?void 0:$.label.replace(/\s+/g,"_"))||"All";z.writeFile(B,`Computed_Attendances_${G}_${U}.xlsx`)}).catch(z=>{console.error("Error exporting to Excel:",z),alert("Error exporting to Excel. Please make sure the xlsx package is installed.")})};return e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Computed Attendances Report"}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),e.jsxs("select",{value:s,onChange:z=>r(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Month"}),L.map(z=>e.jsx("option",{value:z.value,children:z.label},z.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Period"}),e.jsx("select",{value:n,onChange:z=>a(z.target.value),disabled:!s,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:F.map(z=>e.jsx("option",{value:z.value,children:z.label},z.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsxs("select",{value:l,onChange:z=>i(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Departments"}),y.map(z=>e.jsx("option",{value:z.departmentshortname,children:z.departmentshortname},z.deptid))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment"}),e.jsxs("select",{value:o,onChange:z=>c(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Appointments"}),h.map(z=>e.jsx("option",{value:z.id,children:z.appointmentname},z.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Status"}),e.jsxs("select",{value:d,onChange:z=>m(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),N.map(z=>e.jsx("option",{value:z.empstatid||z.id,children:z.empstatname||z.employeestatus||z.statusname},z.empstatid||z.id))]})]})]})}),!g&&u.length>0&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsxs("button",{onClick:k,className:"inline-flex items-center px-4 py-2 rounded-md bg-blue-600 text-white text-sm font-medium shadow hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",title:"Print Report",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print"]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"inline-flex items-center px-4 py-2 rounded-md bg-green-600 text-white text-sm font-medium shadow hover:bg-green-700 transition-colors",title:"Export Report",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export",e.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:I,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]}),e.jsxs("button",{onClick:K,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Excel"]})]})})]})]})}),g&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading computed attendance data..."})]}),!g&&u.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Show:"}),e.jsxs("select",{value:T,onChange:z=>M(z.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{className:"text-sm text-gray-500",children:"records"})]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(S-1)*T+1," to ",Math.min(S*T,u.length)," of ",u.length," entries"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>O(1),disabled:S===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"First"}),e.jsx("button",{onClick:()=>O(Math.max(1,S-1)),disabled:S===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,E)},(z,P)=>{let R;return E<=5||S<=3?R=P+1:S>=E-2?R=E-4+P:R=S-2+P,e.jsx("button",{onClick:()=>O(R),className:`px-3 py-1 text-sm border rounded-md ${S===R?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"}`,children:R},R)})}),e.jsx("button",{onClick:()=>O(Math.min(E,S+1)),disabled:S===E,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"}),e.jsx("button",{onClick:()=>O(E),disabled:S===E,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Last"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NO."}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"LEAVES"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"LOCATORS"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"TRAVELS"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CDO"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"LATES"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DAYS"}),e.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"NETDAYS"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:J.map((z,P)=>{const R=(S-1)*T+P+1,B=bs(z.surname,z.firstname,z.middlename,z.extension)||"",U=[z.department_name,z.position_title].filter(Boolean).join(" - ")||"";return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:R}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:B}),e.jsx("div",{className:"text-xs text-gray-500",children:U})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-green-50 text-green-700 border border-green-200",children:z.total_leaves||0})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-blue-50 text-blue-700 border border-blue-200",children:"0"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-purple-50 text-purple-700 border border-purple-200",children:z.total_travels||0})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-orange-50 text-orange-700 border border-orange-200",children:z.total_cdo||0})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:Math.round(Number(z.total_lates||0))}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:Number(z.total_days||0).toFixed(3)}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-xs text-gray-900 w-20",children:Number(z.total_netdays||0).toFixed(4)})]},z.computeid??P)})}),e.jsx("tfoot",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:"Totals"}),e.jsxs("td",{className:"px-6 py-3 text-sm text-gray-700",children:["Total Records: ",u.length]}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:q.totalLeaves}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:"0"}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:q.totalTravels}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:q.totalCdo}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:Math.round(Number(q.totalLates||0))}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:Number(q.totalDays).toFixed(3)}),e.jsx("td",{className:"px-2 py-3 text-xs font-semibold text-gray-700 w-20",children:Number(q.totalNetDays).toFixed(4)})]})})]})}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("button",{onClick:()=>O(1),disabled:S===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"First"}),e.jsx("button",{onClick:()=>O(Math.max(1,S-1)),disabled:S===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,E)},(z,P)=>{let R;return E<=5||S<=3?R=P+1:S>=E-2?R=E-4+P:R=S-2+P,e.jsx("button",{onClick:()=>O(R),className:`px-3 py-1 text-sm border rounded-md ${S===R?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"}`,children:R},R)})}),e.jsx("button",{onClick:()=>O(Math.min(E,S+1)),disabled:S===E,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"}),e.jsx("button",{onClick:()=>O(E),disabled:S===E,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Last"})]})})]}),!g&&u.length===0&&s&&e.jsx("div",{className:"text-center py-8 text-gray-500 bg-white rounded-lg border border-gray-200",children:e.jsx("p",{children:"No computed attendance records found for the selected filters."})}),!g&&!s&&e.jsx("div",{className:"text-center py-8 text-gray-500 bg-white rounded-lg border border-gray-200",children:e.jsx("p",{children:"Please select a month to view computed attendance records."})})]})})},aw="/assets/dallogo-DAPDGA6-.png",KF=()=>{const{user:t}=Ts(),[s,r]=x.useState([]),[n,a]=x.useState([]),[l,i]=x.useState([]),[o,c]=x.useState(!1),[d,m]=x.useState(!1),[u,p]=x.useState(1),[g,j]=x.useState(10),[y,v]=x.useState(0),[h,f]=x.useState(0),N=()=>new Date().toISOString().split("T")[0],b=()=>(new Date().getMonth()+1).toString(),[w,D]=x.useState({employee:"all",department:"all",dateFilterType:"month",dateFrom:N(),dateTo:N(),month:b(),year:new Date().getFullYear()}),S=async()=>{var k,I;c(!0);try{const K=new URLSearchParams;if(K.append("page",u),K.append("pageSize",g),w.employee!=="all"&&K.append("employeeSearch",w.employee),w.department,w.destination&&w.destination!=="all"&&K.append("destinationSearch",w.destination),w.dateFilterType==="range")w.dateFrom&&K.append("dateFrom",w.dateFrom),w.dateTo&&K.append("dateTo",w.dateTo);else if(w.dateFilterType==="month"){const P=new Date(w.year,w.month-1,1),R=new Date(w.year,w.month,0);K.append("dateFrom",P.toISOString().split("T")[0]),K.append("dateTo",R.toISOString().split("T")[0])}console.log("Current filters:",w),console.log("API params being sent:",K.toString());const z=await oe.get(`/locator?${K.toString()}`);console.log("Locator response:",z.data),r(z.data.data||[]),v(((k=z.data.pagination)==null?void 0:k.totalRecords)||0),f(((I=z.data.pagination)==null?void 0:I.totalPages)||0)}catch(K){console.error("Error fetching locator entries:",K)}finally{c(!1)}},C=async()=>{try{const k=new URLSearchParams;if(k.append("page",1),k.append("pageSize",1e4),console.log("Print function filters:",w),w.employee!=="all"&&k.append("employeeSearch",w.employee),w.department,w.destination&&w.destination!=="all"&&k.append("destinationSearch",w.destination),w.dateFilterType==="range")w.dateFrom&&k.append("dateFrom",w.dateFrom),w.dateTo&&k.append("dateTo",w.dateTo);else if(w.dateFilterType==="month"){const K=new Date(w.year,w.month-1,1),z=new Date(w.year,w.month,0);console.log("Print date calculation:",{year:w.year,month:w.month,startDate:K.toISOString().split("T")[0],endDate:z.toISOString().split("T")[0]}),k.append("dateFrom",K.toISOString().split("T")[0]),k.append("dateTo",z.toISOString().split("T")[0])}console.log("Print API params being sent:",k.toString());const I=await oe.get(`/locator?${k.toString()}`);return console.log("All locator entries for print:",I.data),I.data.data||[]}catch(k){return console.error("Error fetching all locator entries for print:",k),[]}},T=async()=>{try{const k=await oe.get("/employees");a(k.data||[])}catch(k){console.error("Error fetching employees:",k),a([])}},_=async()=>{try{const k=await oe.get("/departments");i(k.data.data||[])}catch(k){console.error("Error fetching departments:",k),i([])}};x.useEffect(()=>{S()},[w,u,g]),x.useEffect(()=>{T(),_()},[]);const E=(k,I)=>{D(K=>({...K,[k]:I})),p(1)},A=()=>{D({employee:"all",department:"all",dateFilterType:"month",dateFrom:N(),dateTo:N(),month:b(),year:new Date().getFullYear()}),p(1)},L=k=>{p(k)},F=k=>{j(k),p(1)},W=async()=>{m(!0);try{const k=await C();if(console.log("Print data:",k),console.log("Print data length:",k.length),!k||k.length===0){alert("No data to print"),m(!1);return}const I=window.open("","_blank","width=800,height=600"),K=`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Locator Entries Report</title>
            <style>
              body { 
                font-family: Arial, sans-serif;
                font-size: 12px; 
                margin: 0;
                padding: 20px;
              }
              .print-header {
                text-align: center;
                margin-bottom: 20px;
                border-bottom: 2px solid #333;
                padding-bottom: 10px;
              }
              .print-logo {
                height: 60px;
                margin-bottom: 10px;
              }
              .print-title {
                font-size: 18px;
                font-weight: bold;
                margin-bottom: 5px;
              }
              .print-subtitle {
                font-size: 14px;
                color: #666;
              }
              .print-table {
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 20px;
              }
              .print-table th, 
              .print-table td { 
                border: 1px solid #333; 
                padding: 6px; 
                text-align: left; 
                font-size: 11px;
              }
              .print-table th { 
                background-color: #f0f0f0; 
                font-weight: bold; 
              }
              .print-footer {
                text-align: center;
                margin-top: 20px;
                font-size: 10px;
                color: #666;
                border-top: 1px solid #ccc;
                padding-top: 10px;
              }
              @page {
                margin: 0.5in;
              }
            </style>
          </head>
          <body>
            <div class="print-header">
              <div class="print-title">Human Resource Management Office</div>
              <div class="print-subtitle">Locator Entries as of ${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}</div>
            </div>
            
            <table class="print-table">
              <thead>
                <tr>
                  <th>Locator Date</th>
                  <th>Locator No</th>
                  <th>Employee</th>
                  <th>Destination</th>
                  <th>Time Departed</th>
                  <th>Time Arrived</th>
                  <th>Purpose</th>
                </tr>
              </thead>
              <tbody>
                ${k.map(z=>`
                  <tr>
                    <td>${Y(z.LOCDATE||z.LOCATORDATE)}</td>
                    <td>${z.LOCNO||z.LOCATORID||"N/A"}</td>
                    <td>${z.NAME||q(z.LOCUSERID||z.USERID)}</td>
                    <td>${z.LOCDESTINATION||z.LOCATION||"N/A"}</td>
                    <td>${Y(z.LOCTIMEDEPARTURE)||"N/A"}</td>
                    <td>${Y(z.LOCTIMEARRIVAL)||"N/A"}</td>
                    <td>${z.LOCPURPOSE||"N/A"}</td>
                  </tr>
                `).join("")}
              </tbody>
            </table>
            
            <div class="print-footer">
              System Generated (${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}) By: ${(t==null?void 0:t.USERID)||"Unknown"}
            </div>
          </body>
        </html>
      `;I.document.write(K),I.document.close(),I.onload=()=>{I.print(),I.close(),m(!1)}}catch(k){console.error("Error during print:",k),m(!1)}},Y=k=>k?new Date(k).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A",q=k=>{const I=n.find(K=>K.USERID===k);return I?I.NAME:`User ID: ${k}`},J=()=>{const k=[];if(h<=5)for(let K=1;K<=h;K++)k.push(K);else{const K=Math.max(1,u-2),z=Math.min(h,K+5-1);for(let P=K;P<=z;P++)k.push(P)}return k},O=x.useMemo(()=>{const k=new Date,I=k.getFullYear(),K=k.getMonth()+1,z=w.year,P=[{value:"1",label:"January"},{value:"2",label:"February"},{value:"3",label:"March"},{value:"4",label:"April"},{value:"5",label:"May"},{value:"6",label:"June"},{value:"7",label:"July"},{value:"8",label:"August"},{value:"9",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}];return z===I?P.slice(0,K):P},[w.year]),M=x.useMemo(()=>{const k=new Date().getFullYear(),I=[];for(let K=k-2;K<=k;K++)I.push(K);return I},[]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"print-header",style:{display:"none"},children:[e.jsx("img",{src:aw,alt:"Logo",className:"print-logo"}),e.jsx("div",{className:"print-title",children:"Human Resource Management Office"}),e.jsxs("div",{className:"print-subtitle",children:["Locator Entries as of ",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Locator Entries Report"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Generate and print locator entries with filters"})]}),e.jsxs("button",{onClick:W,disabled:d||y===0,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),e.jsx("span",{children:d?"Printing...":"Print List"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 no-print",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"}),e.jsx("button",{onClick:A,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",children:"Clear Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee"}),e.jsxs("select",{value:w.employee,onChange:k=>E("employee",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Employees"}),n.map(k=>e.jsx("option",{value:k.USERID,children:k.NAME},k.USERID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsxs("select",{value:w.department,onChange:k=>E("department",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Departments"}),l.map(k=>e.jsx("option",{value:k.DEPTID,children:k.DEPTNAME},k.DEPTID))]})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Filter Type"}),e.jsxs("select",{value:w.dateFilterType,onChange:k=>E("dateFilterType",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"range",children:"Date Range"}),e.jsx("option",{value:"month",children:"By Month"})]})]}),w.dateFilterType==="range"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date From"}),e.jsx("input",{type:"date",value:w.dateFrom,onChange:k=>E("dateFrom",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date To"}),e.jsx("input",{type:"date",value:w.dateTo,onChange:k=>E("dateTo",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("div",{})," "]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),e.jsxs("select",{value:w.month,onChange:k=>E("month",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Months"}),O.map(k=>e.jsx("option",{value:k.value,children:k.label},k.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),e.jsx("select",{value:w.year,onChange:k=>E("year",parseInt(k.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:M.map(k=>e.jsx("option",{value:k,children:k},k))})]}),e.jsx("div",{})," "]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 no-print",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Locator Entries (",y," entries)"]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Show:"}),e.jsxs("select",{value:g,onChange:k=>F(parseInt(k.target.value)),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{className:"text-sm text-gray-700",children:"per page"})]}),o&&e.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[e.jsxs("svg",{className:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-sm",children:"Loading..."})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 print-table",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Locator Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Locator No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Destination"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time Departed"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time Arrived"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Purpose"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((k,I)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Y(k.LOCDATE||k.LOCATORDATE)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:k.LOCNO||k.LOCATORID||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.NAME||q(k.LOCUSERID||k.USERID)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.LOCDESTINATION||k.LOCATION||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Y(k.LOCTIMEDEPARTURE)||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Y(k.LOCTIMEARRIVAL)||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.LOCPURPOSE||"N/A"})]},k.LOCATORUID||k.LOCATORID||I))})]})}),h>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 no-print",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>L(u-1),disabled:u===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>L(u+1),disabled:u===h,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(u-1)*g+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(u*g,y)})," ","of ",e.jsx("span",{className:"font-medium",children:y})," results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>L(u-1),disabled:u===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),J().map(k=>e.jsx("button",{onClick:()=>L(k),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${k===u?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:k},k)),e.jsxs("button",{onClick:()=>L(u+1),disabled:u===h,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})]}),e.jsxs("div",{className:"print-footer",style:{display:"none"},children:["System Generated (",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),") By: ",(t==null?void 0:t.USERID)||"Unknown"]})]})},qF=()=>{const{user:t}=Ts(),[s,r]=x.useState(!1),[n,a]=x.useState(!1),[l,i]=x.useState(""),[o,c]=x.useState(""),[d,m]=x.useState([]),[u,p]=x.useState([]),[g,j]=x.useState({dtrCheckerDevice:null,loginBioDevice:null,enableDigitalPersona:!0,enableNetworkMachines:!0,autoDetectDevices:!0}),[y,v]=x.useState(!1),[h,f]=x.useState({digitalPersona:"unknown",networkMachines:"unknown"}),N=new DigitalPersonaHelper;x.useEffect(()=>{b(),D()},[]);const b=async()=>{try{r(!0);const E=await oe.get("/settings/kiosk-config");E.data.success&&j(E.data.config)}catch(E){console.error("Failed to load kiosk configuration:",E),c("Failed to load configuration")}finally{r(!1)}},w=async()=>{try{if(a(!0),c(""),g.enableDigitalPersona&&!g.loginBioDevice&&d.length>0)throw new Error("Please select a DigitalPersona device for biometric login");if(g.enableNetworkMachines&&!g.dtrCheckerDevice&&u.length>0)throw new Error("Please select a network machine for DTR checking");const E=await oe.post("/settings/kiosk-config",{config:g});if(E.data.success)i("Configuration saved successfully"),setTimeout(()=>i(""),3e3);else throw new Error(E.data.message||"Failed to save configuration")}catch(E){console.error("Failed to save configuration:",E),c(E.message||"Failed to save configuration")}finally{a(!1)}},D=async()=>{v(!0),i("Detecting available devices...");try{await S(),await C(),i("Device detection completed"),setTimeout(()=>i(""),3e3)}catch(E){console.error("Device detection error:",E),c("Device detection failed: "+E.message)}finally{v(!1)}},S=async()=>{try{console.log(" Detecting DigitalPersona devices...");const E=await N.getDevices();m(E),E.length>0?(f(A=>({...A,digitalPersona:"connected"})),console.log(` Found ${E.length} DigitalPersona device(s)`),!g.loginBioDevice&&E.length>0&&j(A=>({...A,loginBioDevice:E[0].serialNumber||E[0].name}))):(f(A=>({...A,digitalPersona:"not_found"})),console.log(" No DigitalPersona devices found"))}catch(E){throw console.error(" DigitalPersona detection failed:",E),f(A=>({...A,digitalPersona:"error"})),E}},C=async()=>{try{console.log(" Detecting network machines...");const E=await oe.get("/machines/network");if(E.data.success){const A=E.data.machines||[];p(A),A.length>0?(f(L=>({...L,networkMachines:"connected"})),console.log(` Found ${A.length} network machine(s)`),!g.dtrCheckerDevice&&A.length>0&&j(L=>({...L,dtrCheckerDevice:A[0].id}))):(f(L=>({...L,networkMachines:"not_found"})),console.log(" No network machines found"))}}catch(E){console.error(" Network machine detection failed:",E),f(A=>({...A,networkMachines:"error"}))}},T=async(E,A)=>{try{if(i(`Testing ${E} device...`),E==="digitalPersona"){if(d.find(F=>F.serialNumber===A||F.name===A))if((await N.checkDeviceStatus()).connected)i(" DigitalPersona device test successful");else throw new Error("Device not responding")}else if(E==="network"){const L=await oe.post("/machines/test-connection",{machineId:A});if(L.data.success)i(" Network machine test successful");else throw new Error(L.data.message||"Connection test failed")}setTimeout(()=>i(""),3e3)}catch(L){c(`Device test failed: ${L.message}`),setTimeout(()=>c(""),5e3)}},_=E=>{const A={connected:{color:"bg-green-100 text-green-800",text:"Connected"},not_found:{color:"bg-yellow-100 text-yellow-800",text:"Not Found"},error:{color:"bg-red-100 text-red-800",text:"Error"},unknown:{color:"bg-gray-100 text-gray-800",text:"Unknown"}},L=A[E]||A.unknown;return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L.color}`,children:L.text})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"DTR Checker Kiosk Settings"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Configure biometric devices for DTR checking and login authentication"})]}),e.jsx("button",{onClick:D,disabled:y,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:y?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Detecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Detect Devices"]})})]})}),l&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-green-800",children:l})})]})}),o&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:o})})]})}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Device Status Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-8 h-8 text-blue-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"DigitalPersona Devices"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[d.length," device(s) found"]})]})]}),_(h.digitalPersona)]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-8 h-8 text-green-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Network Machines"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[u.length," machine(s) found"]})]})]}),_(h.networkMachines)]})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"DigitalPersona Biometric Login"}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",checked:g.enableDigitalPersona,onChange:E=>j(A=>({...A,enableDigitalPersona:E.target.checked})),className:"form-checkbox h-4 w-4 text-blue-600 transition duration-150 ease-in-out"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Enable DigitalPersona"})]})]}),g.enableDigitalPersona&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Device for LoginBio Authentication"}),e.jsxs("select",{value:g.loginBioDevice||"",onChange:E=>j(A=>({...A,loginBioDevice:E.target.value})),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:d.length===0,children:[e.jsx("option",{value:"",children:d.length===0?"No DigitalPersona devices found":"Select a device"}),d.map((E,A)=>e.jsx("option",{value:E.serialNumber||E.name,children:E.name||E.serialNumber||`Device ${A+1}`},A))]})]}),g.loginBioDevice&&e.jsxs("button",{onClick:()=>T("digitalPersona",g.loginBioDevice),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Test Device"]})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Network Biometric Machines"}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",checked:g.enableNetworkMachines,onChange:E=>j(A=>({...A,enableNetworkMachines:E.target.checked})),className:"form-checkbox h-4 w-4 text-blue-600 transition duration-150 ease-in-out"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Enable Network Machines"})]})]}),g.enableNetworkMachines&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Machine for DTR Checker"}),e.jsxs("select",{value:g.dtrCheckerDevice||"",onChange:E=>j(A=>({...A,dtrCheckerDevice:E.target.value})),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:u.length===0,children:[e.jsx("option",{value:"",children:u.length===0?"No network machines found":"Select a machine"}),u.map(E=>e.jsxs("option",{value:E.id,children:[E.name," (",E.ip_address,")"]},E.id))]})]}),g.dtrCheckerDevice&&e.jsxs("button",{onClick:()=>T("network",g.dtrCheckerDevice),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Test Connection"]})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Global Settings"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",checked:g.autoDetectDevices,onChange:E=>j(A=>({...A,autoDetectDevices:E.target.checked})),className:"form-checkbox h-4 w-4 text-blue-600 transition duration-150 ease-in-out"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Auto-detect devices on startup"})]})})]}),e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Reset"}),e.jsx("button",{onClick:w,disabled:n,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Configuration"})]})})]})};function ab({employeeId:t,onSuccess:s,isModal:r=!1,portalUserMode:n=!1}){const{id:a}=Kj(),l=ia(),{user:i}=Ts(),[o,c]=x.useState(!1),[d,m]=x.useState([]),[u,p]=x.useState(null),[g,j]=x.useState(""),[y,v]=x.useState(""),[h,f]=x.useState(!1),[N,b]=x.useState(!1),[w,D]=x.useState(null),[S,C]=x.useState({}),[T,_]=x.useState(!1),[E,A]=x.useState([]),[L,F]=x.useState({BADGENUMBER:"",SSN:"",NAME:"",GENDER:"",TITLE:"",BIRTHDAY:"",HIREDDAY:"",STREET:"",DEFAULTDEPTID:"",privilege:0,Appointment:"",InheritDeptSchClass:"",status:"Activate",PAGER:null,CITY:null,STATE:null,ZIP:null,OPHONE:null,FPHONE:null,VERIFICATIONMETHOD:1,SECURITYFLAGS:null,ATT:1,INLATE:0,OUTEARLY:0,OVERTIME:1,SEP:1,HOLIDAY:1,MINZU:null,PASSWORD:null,LUNCHDURATION:1,MVerifyPass:null,Notes:null,InheritDeptSch:1,AutoSchPlan:1,MinAutoSchInterval:24,RegisterOT:1,InheritDeptRule:0,EMPRIVILEGE:0,CardNo:null,FaceGroup:0,AccGroup:1,UseAccGroupTZ:1,VerifyCode:0,Expires:0,ValidCount:0,ValidTimeBegin:null,ValidTimeEnd:null,TimeZone1:1,TimeZone2:0,TimeZone3:0}),[W,Y]=x.useState({}),[q,J]=x.useState(null),[O,M]=x.useState(4),[k,I]=x.useState(!1),[K,z]=x.useState(""),[P,R]=x.useState(""),B=t||a;x.useEffect(()=>{Ne(),Ge()},[]),x.useEffect(()=>{B&&B!=="new"&&re()},[B]),x.useEffect(()=>{if(N){M(4);const ke=setInterval(()=>{M(Re=>Re<=1?(clearInterval(ke),0):Re-1)},1e3);return()=>clearInterval(ke)}},[N]);const U=()=>{const ke=[],Re={NAME:"Name",BADGENUMBER:"Badge Number",SSN:"SSN",DEFAULTDEPTID:"Department",TITLE:"Position/Title",GENDER:"Gender",BIRTHDAY:"Birthday",HIREDDAY:"Hire Date",STREET:"Address",privilege:"Employment Status",PASSWORD:"Password",Appointment:"Appointment Type",InheritDeptSchClass:"Shift Schedule"};return B==="new"||!B?(Object.keys(L).forEach(Ke=>{if(L[Ke]&&L[Ke]!==""&&Ke!=="employmentStatus"){const Xe=Re[Ke]||Ke,Se=Q(Ke,L[Ke]);ke.push({name:Xe,value:Se})}}),u&&ke.push({name:"Photo",value:"Updated"})):(Object.keys(L).forEach(Ke=>{if(Ke==="PASSWORD"&&L[Ke]&&L[Ke].trim()!=="")ke.push({name:Re[Ke]||Ke,value:"Updated"});else if(Ke==="privilege"){const Xe=W[Ke]||0,Se=L[Ke]||0;if(Xe!=Se){const lt=Q(Ke,L[Ke]);ke.push({name:Re[Ke]||Ke,value:lt})}}else{if(Ke==="employmentStatus")return;if(W[Ke]!==L[Ke]&&L[Ke]!==""&&L[Ke]!==null&&L[Ke]!==void 0){const Xe=Re[Ke]||Ke,Se=Q(Ke,L[Ke]);ke.push({name:Xe,value:Se})}}}),u&&ke.push({name:"Photo",value:"Updated"})),console.log("Updated fields:",ke),console.log("Original data:",W),console.log("Current form data:",L),console.log("Is new employee:",B==="new"||!B),ke},G=ke=>{const Re=d.find(Ke=>Ke.DEPTID===ke);return Re?Re.DEPTNAME:"Unknown Department"},$=ke=>hx(ke),X=ke=>{const Re=E.find(Ke=>Ke.SHIFTNO===ke);return Re?Re.SHIFTNAME:"No Schedule"},Q=(ke,Re)=>{switch(ke){case"DEFAULTDEPTID":return G(Re);case"Appointment":return $(Re);case"InheritDeptSchClass":return X(Re);case"privilege":return Re>=0?"Active":"Inactive";case"BIRTHDAY":case"HIREDDAY":return Re?new Date(Re).toLocaleDateString():"Not set";case"GENDER":return Re==="M"?"Male":Re==="F"?"Female":Re;case"PASSWORD":return"Updated";default:return Re||"Not set"}},Ne=async()=>{try{const ke=await oe.get("/employees/departments");m(ke.data)}catch(ke){console.error("Error fetching departments:",ke)}},V=async ke=>{const{value:Re}=ke.target,Ke=Re.replace(/\D/g,"").slice(0,5);if(F(Xe=>({...Xe,BADGENUMBER:Ke})),C(Xe=>({...Xe,BADGENUMBER:""})),Ke&&(!B||B==="new"))try{const Xe=await oe.get("/employees/validate-unique",{params:{badgeNumber:Ke,currentUserId:B}});Xe.data.isValid||C(Se=>({...Se,BADGENUMBER:Xe.data.errors.badgeNumber||"Badge Number already exists"}))}catch(Xe){console.error("Error validating badge number:",Xe)}},re=async()=>{if(!(!B||B==="new")){c(!0);try{const Re=(await oe.get(`/employees/${B}`)).data;F({BADGENUMBER:Re.BADGENUMBER||"",SSN:Re.SSN||"",NAME:Re.NAME||"",DEFAULTDEPTID:Re.DEFAULTDEPTID||"",TITLE:Re.TITLE||"",GENDER:Re.GENDER||"",BIRTHDAY:Re.BIRTHDAY?Re.BIRTHDAY.split("T")[0]:"",HIREDDAY:Re.HIREDDAY?Re.HIREDDAY.split("T")[0]:"",STREET:Re.STREET||"",privilege:Re.privilege||"",employmentStatus:Re.privilege>=0?"Active":"Inactive",status:Re.privilege>=0?"Activate":"Deactivate",PASSWORD:Re.PASSWORD||"",Appointment:Re.Appointment||"",InheritDeptSchClass:Re.InheritDeptSchClass||""}),J(Re.privilege),Y(Re),Re.PHOTO&&v(Re.PHOTO)}catch(ke){console.error("Error fetching employee:",ke)}finally{c(!1)}}},ne=ke=>{const{name:Re,value:Ke}=ke.target;if(Re==="status"&&n){F(Xe=>({...Xe,status:Ke,privilege:Ke==="Deactivate"?-1:0}));return}F(Xe=>({...Xe,[Re]:Ke})),S[Re]&&C(Xe=>({...Xe,[Re]:""}))},xe=ke=>new Promise(Re=>{const Ke=document.createElement("canvas"),Xe=Ke.getContext("2d"),Se=new Image;Se.onload=()=>{Ke.width=Se.width,Ke.height=Se.height,Xe.drawImage(Se,0,0);const lt=Xe.getImageData(0,0,Ke.width,Ke.height),Pt=Ke.width*3,Nt=(4-Pt%4)%4,Ce=(Pt+Nt)*Ke.height,Ze=new Uint8Array(54+Ce),fe=new ArrayBuffer(54),Pe=new DataView(fe);Pe.setUint8(0,66),Pe.setUint8(1,77),Pe.setUint32(2,54+Ce,!0),Pe.setUint32(6,0,!0),Pe.setUint32(10,54,!0),Pe.setUint32(14,40,!0),Pe.setUint32(18,Ke.width,!0),Pe.setUint32(22,Ke.height,!0),Pe.setUint16(26,1,!0),Pe.setUint16(28,24,!0),Pe.setUint32(30,0,!0),Pe.setUint32(34,Ce,!0),Pe.setUint32(38,2835,!0),Pe.setUint32(42,2835,!0),Pe.setUint32(46,0,!0),Pe.setUint32(50,0,!0),Ze.set(new Uint8Array(fe),0);let Le=54;for(let ut=Ke.height-1;ut>=0;ut--){for(let Be=0;Be<Ke.width;Be++){const mt=(ut*Ke.width+Be)*4;Ze[Le++]=lt.data[mt+2],Ze[Le++]=lt.data[mt+1],Ze[Le++]=lt.data[mt]}for(let Be=0;Be<Nt;Be++)Ze[Le++]=0}Re(Ze)},Se.src=URL.createObjectURL(ke)}),me=ke=>{const Re=ke.target.files[0];if(Re){if(Re.size>2*1024*1024){ue("File Size Error","Photo must be less than 2MB.");return}if(!Re.type.startsWith("image/")){ue("File Type Error","Please select a valid image file.");return}const Ke=new FileReader;Ke.onload=Xe=>{j(Xe.target.result)},Ke.readAsDataURL(Re),F(Xe=>({...Xe,photo:Re}))}},Z=ke=>{const{value:Re}=ke.target,Ke=Re.replace(/\D/g,"").slice(0,4);F(Xe=>({...Xe,SSN:Ke})),C(Xe=>({...Xe,SSN:""}))},ee=()=>{var Ke,Xe;const ke={},Re=[];return console.log("=== VALIDATION DEBUG ==="),console.log("Form data:",L),console.log("Badge Number:",L.BADGENUMBER,"Length:",(Ke=L.BADGENUMBER)==null?void 0:Ke.length),console.log("SSN:",L.SSN,"Length:",(Xe=L.SSN)==null?void 0:Xe.length),console.log("Name:",L.NAME),console.log("Gender:",L.GENDER),console.log("Department:",L.DEFAULTDEPTID),L.BADGENUMBER?(L.BADGENUMBER.length<1||L.BADGENUMBER.length>5)&&(ke.BADGENUMBER="Badge Number must be 1-5 digits",Re.push("Badge Number (must be 1-5 digits)"),console.log("Badge Number validation failed: length")):(ke.BADGENUMBER="Badge Number is required",Re.push("Badge Number"),console.log("Badge Number validation failed: required")),L.SSN?L.SSN.length!==4&&(ke.SSN="SSN/PIN must be exactly 4 digits",Re.push("SSN/PIN (must be exactly 4 digits)"),console.log("SSN validation failed: length")):(ke.SSN="SSN/PIN is required",Re.push("SSN/PIN"),console.log("SSN validation failed: required")),L.NAME||(ke.NAME="Full Name is required",Re.push("Full Name"),console.log("Name validation failed")),L.GENDER||(ke.GENDER="Gender is required",Re.push("Gender"),console.log("Gender validation failed")),L.DEFAULTDEPTID||(ke.DEFAULTDEPTID="Department is required",Re.push("Department"),console.log("Department validation failed")),console.log("Validation errors:",ke),console.log("Missing fields:",Re),console.log("Validation passed:",Object.keys(ke).length===0),C(ke),Object.keys(ke).length===0},ye=()=>{const ke={};return L.NAME||(ke.NAME="Full Name is required"),L.DEFAULTDEPTID||(ke.DEFAULTDEPTID="Department is required"),C(ke),Object.keys(ke).length===0},ve=async ke=>{if(ke.preventDefault(),C({}),I(!1),z(""),R(""),!(B&&B!=="new"?ye():ee())){const Ke=[];B&&B!=="new"?(L.NAME||Ke.push("Full Name"),L.DEFAULTDEPTID||Ke.push("Department")):(L.BADGENUMBER?(L.BADGENUMBER.length<1||L.BADGENUMBER.length>5)&&Ke.push("Badge Number (1-5 digits)"):Ke.push("Badge Number"),L.SSN?L.SSN.length!==4&&Ke.push("SSN/PIN (4 digits)"):Ke.push("SSN/PIN"),L.NAME||Ke.push("Full Name"),L.GENDER||Ke.push("Gender"),L.DEFAULTDEPTID||Ke.push("Department"));const Xe=Ke.length>0?`Please fill in the following required fields: ${Ke.join(", ")}`:"Please fix the validation errors highlighted in red.";ue("Validation Error",Xe);return}if(!B||B==="new")try{const Ke=await oe.get("/employees/validate-unique",{params:{badgeNumber:L.BADGENUMBER,currentUserId:B}});if(!Ke.data.isValid){C(Ke.data.errors),ue("Validation Error","Please fix the validation errors highlighted in red.");return}}catch(Ke){console.error("Error validating badge number:",Ke),ue("Validation Error","Error validating badge number. Please try again.");return}c(!0);try{const Ke={BADGENUMBER:L.BADGENUMBER,SSN:L.SSN,NAME:L.NAME,GENDER:L.GENDER,TITLE:L.TITLE,BIRTHDAY:L.BIRTHDAY||null,HIREDDAY:L.HIREDDAY||null,STREET:L.STREET||null,DEFAULTDEPTID:L.DEFAULTDEPTID||null,privilege:L.privilege,Appointment:L.Appointment||null,InheritDeptSchClass:L.InheritDeptSchClass||1,PHOTO:u?await xe(u):null,PAGER:null,CITY:null,STATE:null,ZIP:null,OPHONE:null,FPHONE:null,VERIFICATIONMETHOD:1,SECURITYFLAGS:null,ATT:1,INLATE:0,OUTEARLY:0,OVERTIME:1,SEP:1,HOLIDAY:1,MINZU:null,PASSWORD:null,LUNCHDURATION:1,MVerifyPass:null,Notes:null,InheritDeptSch:1,AutoSchPlan:1,MinAutoSchInterval:24,RegisterOT:1,InheritDeptRule:0,EMPRIVILEGE:0,CardNo:null,FaceGroup:0,AccGroup:1,UseAccGroupTZ:1,VerifyCode:0,Expires:0,ValidCount:0,ValidTimeBegin:null,ValidTimeEnd:null,TimeZone1:1,TimeZone2:0,TimeZone3:0},Xe=B&&B!=="new"?await oe.put(`/employees/${B}`,Ke):await oe.post("/employees",Ke);console.log("Response received:",Xe.data,"Status:",Xe.status),console.log("Success condition met, calling showSuccess"),we()}catch(Ke){console.error("Error saving employee:",Ke),De(Ke)}finally{c(!1)}},ue=(ke,Re)=>{console.log("showError called:",ke,Re),z(ke),R(Re),I(!0),console.log("Error popup should be visible now")},we=()=>{console.log("showSuccess called");const ke={success:!0,isUpdate:B&&B!=="new",employeeName:L.NAME,updatedFields:U()};console.log("Setting success data:",ke),D(ke),b(!0),console.log("Success popup should be visible now")},De=ke=>{var Xe,Se;let Re="Save Failed",Ke="An unexpected error occurred while saving the employee.";if((Xe=ke.response)!=null&&Xe.data){const lt=ke.response.data;lt.errors&&typeof lt.errors=="object"?(C(lt.errors),Re="Validation Error",Ke="Please fix the validation errors highlighted in red."):(Se=lt.message)!=null&&Se.includes("duplicate")?lt.message.includes("BADGENUMBER")?(C(it=>({...it,BADGENUMBER:"Badge Number already exists"})),Re="Duplicate Badge Number",Ke="The badge number you entered already exists. Please use a different badge number."):lt.message.includes("SSN")?(C(it=>({...it,SSN:"SSN already exists"})),Re="Duplicate SSN",Ke="The SSN you entered already exists. Please use a different SSN."):(Re="Duplicate Entry",Ke=lt.message):lt.message&&(Re="Server Error",Ke=lt.message)}else(ke.code==="NETWORK_ERROR"||!ke.response)&&(Re="Network Error",Ke="Unable to connect to the server. Please check your internet connection and try again.");ue(Re,Ke)},le=()=>{F({BADGENUMBER:"",SSN:"",NAME:"",GENDER:"",TITLE:"",BIRTHDAY:"",HIREDDAY:"",STREET:"",DEFAULTDEPTID:"",privilege:0,Appointment:"",InheritDeptSchClass:"",PAGER:null,CITY:null,STATE:null,ZIP:null,OPHONE:null,FPHONE:null,VERIFICATIONMETHOD:1,SECURITYFLAGS:null,ATT:1,INLATE:0,OUTEARLY:0,OVERTIME:1,SEP:1,HOLIDAY:1,MINZU:null,PASSWORD:null,LUNCHDURATION:1,MVerifyPass:null,Notes:null,InheritDeptSch:1,AutoSchPlan:1,MinAutoSchInterval:24,RegisterOT:1,InheritDeptRule:0,EMPRIVILEGE:0,CardNo:null,FaceGroup:0,AccGroup:1,UseAccGroupTZ:1,VerifyCode:0,Expires:0,ValidCount:0,ValidTimeBegin:null,ValidTimeEnd:null,TimeZone1:1,TimeZone2:0,TimeZone3:0}),p(null),j(""),v(""),C({})},Ie=()=>{if(console.log("handleSuccessClose called"),b(!1),D(null),le(),r&&s){const ke={success:!0,isUpdate:B&&B!=="new",employeeName:L.NAME,updatedFields:U()};s(ke)}},ge=()=>{console.log("handleCancel called"),r&&s?s({success:!1,closeModal:!0}):l("/hris-management")},Ge=async()=>{try{const ke=await oe.get("/management/shiftschedules");A(ke.data||[])}catch(ke){console.error("Error fetching shift schedules:",ke)}};return r?e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:ve,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.BADGENUMBER?"text-red-600":"text-gray-700"}`,children:["Badge Number ",B&&B!=="new"?"":"*"]}),e.jsx("input",{type:"text",name:"BADGENUMBER",value:L.BADGENUMBER,onChange:V,required:!B||B==="new",disabled:B&&B!=="new",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${B&&B!=="new"?"bg-gray-100 cursor-not-allowed":""} ${S.BADGENUMBER?"border-red-500":"border-gray-300"}`,placeholder:"Enter badge number"}),S.BADGENUMBER&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.BADGENUMBER}),B&&B!=="new"&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Badge Number cannot be changed for existing employees"})]}),!n||n&&B==="new"?e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.SSN?"text-red-600":"text-gray-700"}`,children:["SSN/PIN ",B&&B!=="new"?"":"*"]}),e.jsx("input",{type:"text",name:"SSN",value:L.SSN,onChange:Z,required:!B||B==="new",disabled:!1,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.SSN?"border-red-500":"border-gray-300"}`,placeholder:"Enter SSN"}),S.SSN&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.SSN}),B&&B!=="new"&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"SSN/PIN can be updated for existing employees"})]}):null]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.NAME?"text-red-600":"text-gray-700"}`,children:["Full Name ",B&&B!=="new"?"":"*"]}),e.jsx("input",{type:"text",name:"NAME",value:L.NAME,onChange:ne,required:!B||B==="new",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.NAME?"border-red-500":"border-gray-300"}`,placeholder:"Enter full name"}),S.NAME&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.NAME})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Photo"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:g?e.jsx("img",{src:g,alt:"Photo preview",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-300"}):y?e.jsx("img",{src:y,alt:"Existing photo",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-300"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 border-2 border-gray-300 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:me,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"JPG, PNG or GIF. Max size 2MB."})]})]})]})]}),!n||n&&B==="new"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.GENDER?"text-red-600":"text-gray-700"}`,children:["Gender ",B&&B!=="new"?"":"*"]}),e.jsxs("select",{name:"GENDER",value:L.GENDER,onChange:ne,required:!B||B==="new",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.GENDER?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]}),S.GENDER&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.GENDER})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),e.jsx("input",{type:"date",name:"BIRTHDAY",value:L.BIRTHDAY,onChange:ne,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}):null,e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.DEFAULTDEPTID?"text-red-600":"text-gray-700"}`,children:["Department ",B&&B!=="new"?"":"*"]}),e.jsxs("select",{name:"DEFAULTDEPTID",value:L.DEFAULTDEPTID,onChange:ne,required:!B||B==="new",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.DEFAULTDEPTID?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select Department"}),d.map(ke=>e.jsx("option",{value:ke.DEPTID,children:ke.DEPTNAME},ke.DEPTID))]}),S.DEFAULTDEPTID&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.DEFAULTDEPTID})]}),!n||n&&B==="new"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Position/Title"}),e.jsx("input",{type:"text",name:"TITLE",value:L.TITLE,onChange:ne,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter position/title"})]}):null]})]}),!n||n&&B==="new"?e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Other Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hire Date"}),e.jsx("input",{type:"date",name:"HIREDDAY",value:L.HIREDDAY,onChange:ne,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("input",{type:"text",name:"STREET",value:L.STREET,onChange:ne,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter address"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment"}),e.jsxs("select",{name:"Appointment",value:L.Appointment,onChange:ne,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Appointment"}),tb().map(ke=>e.jsx("option",{value:ke.id,children:ke.name},ke.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shift Schedule"}),e.jsxs("select",{name:"InheritDeptSchClass",value:L.InheritDeptSchClass,onChange:ne,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Shift Schedule"}),E.map(ke=>e.jsx("option",{value:ke.SHIFTNO,children:ke.SHIFTNAME},ke.SHIFTNO))]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Privilege"}),e.jsxs("select",{name:"privilege",value:L.privilege,onChange:ne,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"0",children:"Regular Employee"}),e.jsx("option",{value:"1",children:"Supervisor"}),e.jsx("option",{value:"2",children:"Manager"}),e.jsx("option",{value:"3",children:"Admin"})]})]})})]}):null,n&&B&&B!=="new"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Status-"}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"status",value:"Activate",checked:L.status==="Activate",onChange:ne,className:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Activate"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"status",value:"Deactivate",checked:L.status==="Deactivate",onChange:ne,className:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Deactivate"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:ge,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:o?"Saving...":B&&B!=="new"?"Update Employee":"Create Employee"})]})]}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",style:{zIndex:99999},children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4 border-4 border-red-500",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center mb-2",children:K}),e.jsx("p",{className:"text-sm text-gray-600 text-center mb-6",children:P}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:()=>{I(!1),z(""),R("")},className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"OK"})})]})}),N&&w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",style:{zIndex:99999},children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4 border-4 border-green-500",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center mb-2",children:w.isUpdate?"Employee Updated Successfully!":"Employee Created Successfully!"}),e.jsx("p",{className:"text-sm text-gray-600 text-center mb-4",children:w.isUpdate?`The following information for ${w.employeeName} has been updated:`:`New employee ${w.employeeName} has been created with the following information:`}),w.updatedFields&&w.updatedFields.length>0&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:e.jsx("ul",{className:"space-y-1",children:w.updatedFields.map((ke,Re)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsxs("span",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:ke.name}),ke.value&&ke.value!=="Updated"&&e.jsxs("span",{className:"text-gray-600",children:[": ",ke.value]})]})]},Re))})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:Ie,className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Close"})})]})})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Employee"})}),e.jsx("div",{className:"bg-white",children:e.jsxs("form",{onSubmit:ve,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.BADGENUMBER?"text-red-600":"text-gray-700"}`,children:["Badge Number ",B&&B!=="new"?"":"*"]}),e.jsx("input",{type:"text",name:"BADGENUMBER",value:L.BADGENUMBER,onChange:V,required:!B||B==="new",disabled:B&&B!=="new",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${B&&B!=="new"?"bg-gray-100 cursor-not-allowed":""} ${S.BADGENUMBER?"border-red-500":"border-gray-300"}`,placeholder:"Enter badge number"}),S.BADGENUMBER&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.BADGENUMBER}),B&&B!=="new"&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Badge Number cannot be changed for existing employees"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.SSN?"text-red-600":"text-gray-700"}`,children:["SSN/PIN ",B&&B!=="new"?"":"*"]}),e.jsx("input",{type:"text",name:"SSN",value:L.SSN,onChange:Z,required:!B||B==="new",disabled:!1,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.SSN?"border-red-500":"border-gray-300"}`,placeholder:"Enter SSN"}),S.SSN&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.SSN}),B&&B!=="new"&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"SSN/PIN can be updated for existing employees"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.NAME?"text-red-600":"text-gray-700"}`,children:["Full Name ",B&&B!=="new"?"":"*"]}),e.jsx("input",{type:"text",name:"NAME",value:L.NAME,onChange:ne,required:!B||B==="new",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.NAME?"border-red-500":"border-gray-300"}`,placeholder:"Enter full name"}),S.NAME&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.NAME})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Photo"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md hover:border-gray-400 transition-colors",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsxs("label",{htmlFor:"photo-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[e.jsx("span",{children:"Upload a file"}),e.jsx("input",{id:"photo-upload",name:"photo",type:"file",accept:"image/*",onChange:me,className:"sr-only"})]}),e.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.GENDER?"text-red-600":"text-gray-700"}`,children:["Gender ",B&&B!=="new"?"":"*"]}),e.jsxs("select",{name:"GENDER",value:L.GENDER,onChange:ne,required:!B||B==="new",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.GENDER?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"M",children:"Male"}),e.jsx("option",{value:"F",children:"Female"})]}),S.GENDER&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.GENDER})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),e.jsx("input",{type:"date",name:"BIRTHDAY",value:L.BIRTHDAY,onChange:ne,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.DEFAULTDEPTID?"text-red-600":"text-gray-700"}`,children:["Department ",B&&B!=="new"?"":"*"]}),e.jsxs("select",{name:"DEFAULTDEPTID",value:L.DEFAULTDEPTID,onChange:ne,required:!B||B==="new",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.DEFAULTDEPTID?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select Department"}),d.map(ke=>e.jsx("option",{value:ke.DEPTID,children:ke.DEPTNAME},ke.DEPTID))]}),S.DEFAULTDEPTID&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.DEFAULTDEPTID})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Position/Title"}),e.jsx("input",{type:"text",name:"TITLE",value:L.TITLE,onChange:ne,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter position/title"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Other Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hire Date"}),e.jsx("input",{type:"date",name:"HIREDDAY",value:L.HIREDDAY,onChange:ne,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("input",{type:"text",name:"STREET",value:L.STREET,onChange:ne,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter address"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment"}),e.jsxs("select",{name:"Appointment",value:L.Appointment,onChange:ne,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Appointment"}),tb().map(ke=>e.jsx("option",{value:ke.id,children:ke.name},ke.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shift Schedule"}),e.jsxs("select",{name:"InheritDeptSchClass",value:L.InheritDeptSchClass,onChange:ne,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Shift Schedule"}),E.map(ke=>e.jsx("option",{value:ke.SHIFTNO,children:ke.SHIFTNAME},ke.SHIFTNO))]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Privilege"}),e.jsxs("select",{name:"privilege",value:L.privilege,onChange:ne,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"0",children:"User"}),e.jsx("option",{value:"1",children:"Enroller"}),e.jsx("option",{value:"2",children:"Manager"}),e.jsx("option",{value:"3",children:"Admin"})]})]})})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-200",children:e.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:o?"Saving...":B&&B!=="new"?"Update Employee":"Create Employee"})})]})})]})})})}function VF({onRefresh:t}){var Ze;const{can:s,loading:r}=Vs(),n="portal-users",a=x.useMemo(()=>({read:s(n,"read"),create:s(n,"create"),update:s(n,"update"),delete:s(n,"delete"),print:s(n,"print"),approve:s(n,"approve")}),[s]),{read:l,create:i,update:o,delete:c,print:d}=a,[m,u]=x.useState([]),[p,g]=x.useState(""),[j,y]=x.useState("all"),[v,h]=x.useState("all"),[f,N]=x.useState({}),[b,w]=x.useState([]),[D,S]=x.useState([]),[C,T]=x.useState(!1),[_,E]=x.useState(1),[A,L]=x.useState(10),[F,W]=x.useState(0),[Y,q]=x.useState(0),[J,O]=x.useState(!0),[M,k]=x.useState(!1),[I,K]=x.useState(null),[z,P]=x.useState(!1),[R,B]=x.useState({open:!1,mode:"create",employee:null}),[U,G]=x.useState({username:"",pin:"1234",emailaddress:"",status:1}),[$,X]=x.useState(!1),[Q,Ne]=x.useState(null),[V,re]=x.useState(!1),[ne,xe]=x.useState(""),[me,Z]=x.useState({}),ee=async(fe=1,Pe=30,Le="",ut="all",Be="all",mt="all",qe="all")=>{var Oe;try{O(!0);const He=await oe.get("/employees/paginated-with-shifts",{params:{page:fe,limit:Pe,search:Le.trim(),status:void 0,appointment:Be!=="all"?Be:void 0,department:mt!=="all"?mt:void 0,shiftSchedule:qe!=="all"?qe:void 0}}),{employees:Kt,total:rs,totalPages:qt}=He.data,xs=(Array.isArray(Kt)?Kt:[]).map(Ut=>{const{PORTAL_REGISTERED:$t,PORTAL_STATUS:Qt,PORTAL_USERPORTALID:gs,PORTAL_USERNAME:Yt,PORTAL_EMAIL:os,PORTAL_PIN:Zt,PORTAL_CREATEDDATE:Jt,PORTAL_UPDATEDDATE:es,PORTAL_EMP_OBJID:be,...nt}=Ut,tt=Zt!=null&&Zt!==""?String(Zt):Ut.portalPin!==void 0&&Ut.portalPin!==null&&Ut.portalPin!==""?String(Ut.portalPin):null;return{...nt,portalUsername:Ut.portalUsername??Ut.PORTAL_USERNAME??null,portalStatus:Qt!=null?Number(Qt):null,portalEmail:os??null,portalPin:tt,portalUserportalId:gs??null,portalEmpObjId:be??null}});u(xs),W(rs||0),q(qt||0);const ms={};xs.forEach(Ut=>{(Ut.SHIFTNAME||Ut.SHIFTNO)&&(ms[Ut.USERID]={SHIFTNAME:Ut.SHIFTNAME,SHIFTNO:Ut.SHIFTNO})}),N(ms)}catch(He){console.error("Error fetching employees:",He),console.error("Error response:",(Oe=He.response)==null?void 0:Oe.data),u([]),W(0),q(0)}finally{O(!1)}},ye=async()=>{try{const fe=await oe.get("/management/shiftschedules");w(fe.data||[])}catch(fe){console.error("Error fetching shift schedules:",fe)}},ve=async()=>{try{const fe=await oe.get("/employees/departments");S(fe.data||[])}catch(fe){console.error("Error fetching departments:",fe)}},ue=async fe=>{var Pe;try{re(!0),xe("");const Le=await oe.get(`/employees/${fe}/portal-profile`);Ne(((Pe=Le.data)==null?void 0:Pe.match)||null)}catch(Le){console.error("Error fetching portal employee match:",Le),Ne(null),xe("Unable to load employee profile.")}finally{re(!1)}};x.useEffect(()=>{ee(_,A,p,"all",j,"all",v)},[]),x.useEffect(()=>{ee(_,A,p,"all",j,"all",v)},[_,A,p,j,v]),x.useEffect(()=>{ve(),ye()},[]),x.useEffect(()=>{if(!m||m.length===0){console.log("[DTRPortalUsers Debug] Employees array empty after fetch.");return}},[m]);const we=()=>{k(!1),K(null)},De=fe=>{fe&&fe.success,k(!1),K(null),ee(_,A,p,"all",j,"all",v)},le=fe=>{if(!d){alert("You do not have permission to print portal users.");return}f[fe.USERID],hx(fe.Appointment);const Pe=window.open("","_blank"),Le=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Portal User Record - ${fe.NAME}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #f2f2f2; }
            .header { text-align: center; margin-bottom: 20px; }
            .photo-placeholder { width: 80px; height: 80px; background-color: #f0f0f0; border: 1px solid #ddd; display: flex; align-items: center; justify-content: center; color: #666; }
            @media print { .no-print { display: none; } }
          </style>
        </head>
        <body>
          <div class="header">
            <h2>Portal User Record</h2>
            <p><strong>Name:</strong> ${fe.NAME}</p>
            <p><strong>Badge Number:</strong> ${fe.BADGENUMBER}</p>
            <p><strong>DTR-ID:</strong> ${fe.USERID}</p>
            <p><strong>Department:</strong> ${fe.DEPTNAME||"No Department"}</p>
          </div>
          <table>
            <thead>
              <tr>
                <th>Field</th>
                <th>Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>DTR-ID</td>
                <td>${fe.USERID}</td>
              </tr>
              <tr>
                <td>Name</td>
                <td>${fe.NAME}</td>
              </tr>
              <tr>
                <td>Badge Number</td>
                <td>${fe.BADGENUMBER}</td>
              </tr>
              <tr>
                <td>Department</td>
                <td>${fe.DEPTNAME||"No Department"}</td>
              </tr>
            </tbody>
          </table>
        </body>
      </html>
    `;Pe.document.write(Le),Pe.document.close(),Pe.focus(),setTimeout(()=>Pe.print(),500)},Ie=(fe,Pe="create")=>{if(Pe==="create"&&!i){alert("You do not have permission to create portal users.");return}if(Pe==="edit"&&!o){alert("You do not have permission to update portal users.");return}const Le=fe==null?void 0:fe.portalPin,ut=Le!=null&&Le!==""?String(Le).replace(/\D/g,"").slice(0,6):"1234";B({open:!0,mode:Pe,employee:fe}),G({username:Pe==="edit"?fe.portalUsername||fe.BADGENUMBER||"":fe.BADGENUMBER||"",pin:ut,emailaddress:fe.portalEmail||"",status:fe.portalStatus!==void 0&&fe.portalStatus!==null?Number(fe.portalStatus):1}),Ne(null),xe(""),fe&&fe.USERID&&ue(fe.USERID)},ge=()=>{B({open:!1,mode:"create",employee:null}),G({username:"",pin:"1234",emailaddress:"",status:1}),Ne(null),xe(""),X(!1)},Ge=(fe,Pe)=>{if(fe==="pin"){const Le=(Pe||"").replace(/\D/g,"").slice(0,6);G(ut=>({...ut,pin:Le}));return}if(fe==="status"){const Le=Number(Pe)===1?1:0;G(ut=>({...ut,status:Le}));return}G(Le=>({...Le,[fe]:Pe}))},ke=async()=>{var Be,mt,qe,Oe;if(!R.employee)return;const fe=R.employee;if(R.mode==="edit"&&!o){alert("You do not have permission to update portal users.");return}if(R.mode==="create"&&!i){alert("You do not have permission to create portal users.");return}const Le=(U.pin||"").replace(/\D/g,"").slice(0,6)||"1234";if(Le.length<4||Le.length>6){alert("PIN must be between 4 and 6 digits.");return}const ut={username:((Be=U.username)==null?void 0:Be.trim())||null,pin:Le,emailaddress:((mt=U.emailaddress)==null?void 0:mt.trim())||null,status:Number(U.status)===1?1:0,dtrname:fe.NAME||null,emp_objid:(Q==null?void 0:Q.objid)||null};try{X(!0),R.mode==="edit"?await oe.put(`/employees/${fe.USERID}/portal`,ut):await oe.post(`/employees/${fe.USERID}/portal-register`,ut),alert("Portal account saved successfully."),ge(),ee(_,A,p,"all",j,"all",v)}catch(He){console.error("Error saving portal registration:",He),alert(((Oe=(qe=He.response)==null?void 0:qe.data)==null?void 0:Oe.message)||"Failed to save portal registration.")}finally{X(!1)}},Re=async fe=>{var Pe,Le;if(!c){alert("You do not have permission to delete portal users.");return}if(!fe.portalUsername){alert("This user does not have a portal account yet.");return}if(window.confirm(`Remove portal access for ${fe.NAME}?`))try{await oe.delete(`/employees/${fe.USERID}/portal`),alert("Portal account removed successfully."),ee(_,A,p,"all",j,"all",v)}catch(ut){console.error("Error deleting portal user:",ut),alert(((Le=(Pe=ut.response)==null?void 0:Pe.data)==null?void 0:Le.message)||"Failed to delete portal user.")}},Ke=fe=>fe.PHOTO?e.jsx("img",{src:fe.PHOTO,alt:fe.NAME,className:"w-10 h-10 rounded-full object-cover",onError:Pe=>{Pe.target.style.display="none",Pe.target.nextSibling.style.display="flex"}}):e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),Xe=fe=>{const Pe=Math.max(Y,1);E(Math.max(1,Math.min(fe,Pe)))},Se=()=>{Xe(_-1)},lt=()=>{Xe(_+1)},it=()=>{if(!i){alert("You do not have permission to create portal users.");return}P(!0)},Pt=fe=>{P(!1),fe&&fe.success&&ee(_,A,p,"all",j,"all",v)},Nt=x.useMemo(()=>m,[m]),At=fe=>{L(fe),E(1)},Ce=async fe=>{var mt,qe;if(!o){alert("You do not have permission to update portal users.");return}if(!fe.portalUsername){alert("This user does not have a portal account.");return}const Le=(Number(fe.portalStatus)===1?1:0)===1?0:1,ut=fe.portalPin!==void 0&&fe.portalPin!==null&&fe.portalPin!==""?String(fe.portalPin).replace(/\D/g,"").slice(0,6):null,Be={username:fe.portalUsername,pin:ut&&ut.length>=4?ut:"1234",emailaddress:fe.portalEmail||null,status:Le,dtrname:fe.NAME||null,emp_objid:fe.portalEmpObjId||null};Z(Oe=>({...Oe,[fe.USERID]:!0}));try{await oe.put(`/employees/${fe.USERID}/portal`,Be),u(Oe=>Oe.map(He=>He.USERID===fe.USERID?{...He,portalStatus:Le}:He))}catch(Oe){console.error("Error toggling portal status:",Oe),alert(((qe=(mt=Oe.response)==null?void 0:mt.data)==null?void 0:qe.message)||"Failed to update portal status.")}finally{Z(Oe=>{const He={...Oe};return delete He[fe.USERID],He})}};return r?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center text-gray-600",children:"Loading portal user permissions..."}):l?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:p,onChange:fe=>g(fe.target.value),placeholder:"Search by DTR-ID, badge number, name, or department...",className:"w-full sm:w-80 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),i&&e.jsx("div",{className:"flex-1 sm:flex-none",children:e.jsxs("button",{onClick:it,className:"px-6 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition duration-200 ease-in-out flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("span",{children:"Add New Portal User"})]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[J&&e.jsx("div",{className:"p-4 text-center",children:e.jsxs("div",{className:"inline-flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Loading portal users..."})]})}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",Nt.length," portal users"]}),e.jsx("span",{className:"text-xs text-gray-400",children:"Status & Department filters are not available in this view."})]})})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DTR Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DTR ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Badge Number"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Has Login"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Nt.length===0&&!J?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:p?"No portal users found matching your search.":"No portal users available."})}):Nt.map(fe=>{const Pe=!!fe.portalUsername;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[Ke(fe),e.jsx("div",{className:"font-semibold text-gray-900",children:fe.NAME})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:fe.USERID}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:fe.BADGENUMBER||""}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-sm font-medium ${fe.portalUsername?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-500"}`,children:fe.portalUsername||"No Portal Access"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:fe.portalUsername?o?e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:Number(fe.portalStatus)===1,onChange:()=>Ce(fe),disabled:!!me[fe.USERID]||$}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-emerald-500 transition-colors peer-checked:bg-emerald-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"}),e.jsx("span",{className:"ml-3 text-xs font-medium text-gray-700",children:Number(fe.portalStatus)===1?"Active":"Inactive"})]})}):e.jsx("div",{className:"text-center text-gray-500 text-sm",children:Number(fe.portalStatus)===1?"Active":"Inactive"}):e.jsx("div",{className:"text-center text-gray-400 text-sm",children:""})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-center",children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:(()=>{const Le=[];return i&&!Pe&&Le.push(e.jsx("button",{onClick:()=>Ie(fe,"create"),className:"px-2 py-1 text-emerald-600 hover:text-emerald-800",title:"Register Portal User",disabled:$,children:""},"create")),o&&Pe&&Le.push(e.jsx("button",{onClick:()=>Ie(fe,"edit"),className:"px-2 py-1 text-blue-600 hover:text-blue-800",title:"Edit Portal User",disabled:$,children:""},"edit")),d&&Le.push(e.jsx("button",{onClick:()=>le(fe),className:"px-2 py-1 text-green-600 hover:text-green-800",title:"Print Portal User",children:""},"print")),c&&Pe&&Le.push(e.jsx("button",{onClick:()=>Re(fe),className:"px-2 py-1 text-red-600 hover:text-red-800",title:"Delete Portal User",children:""},"delete")),Le.length===0?e.jsx("span",{className:"text-xs text-gray-400",children:"No actions"}):Le})()})})]},fe.USERID)})})]})}),Nt.length>0&&e.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-gray-700",children:"Rows per page"}),e.jsxs("select",{value:A,onChange:fe=>At(Number(fe.target.value)),className:"border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[Math.min((_-1)*A+1,F),"-",Math.min(_*A,F)," of ",F]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>Xe(1),disabled:_===1,className:"px-3 py-2 text-sm rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 disabled:opacity-40 disabled:cursor-not-allowed",children:"First"}),e.jsx("button",{onClick:Se,disabled:_===1,className:"px-3 py-2 text-sm rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 disabled:opacity-40 disabled:cursor-not-allowed",children:"Prev"}),e.jsxs("span",{className:"px-3 py-2 text-sm font-semibold text-gray-700",children:["Page ",_," of ",Math.max(Y,1)]}),e.jsx("button",{onClick:lt,disabled:_===Y||Y===0,className:"px-3 py-2 text-sm rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 disabled:opacity-40 disabled:cursor-not-allowed",children:"Next"}),e.jsx("button",{onClick:()=>Xe(Y),disabled:_===Y||Y===0,className:"px-3 py-2 text-sm rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 disabled:opacity-40 disabled:cursor-not-allowed",children:"Last"})]})]})})]}),i&&z&&e.jsx(ab,{isOpen:z,onClose:()=>P(!1),onSuccess:Pt,title:"Add New Portal User",initialFormData:{username:"",pin:"1234",emailaddress:"",status:1},departments:D,shiftSchedules:b,isSaving:!1}),o&&M&&I&&e.jsx(ab,{isOpen:M,onClose:we,onSuccess:De,title:`Edit Portal User: ${((Ze=m.find(fe=>fe.USERID===I))==null?void 0:Ze.NAME)||""}`,initialFormData:m.find(fe=>fe.USERID===I),departments:D,shiftSchedules:b,isSaving:!1}),R.open&&R.employee&&(R.mode==="edit"&&o||R.mode==="create"&&i)&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:R.mode==="edit"?"Edit Portal Account":"Register Portal Account"}),e.jsx("button",{onClick:ge,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Biometric User Details"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[R.employee.NAME,"  DTR ID ",R.employee.USERID]}),e.jsxs("div",{className:"mt-3 border border-gray-200 rounded-lg p-3 bg-gray-50",children:[V?e.jsx("div",{className:"text-sm text-gray-500",children:"Looking up employee profile"}):Q?e.jsxs("div",{className:"flex items-center gap-3",children:[Q.photo?e.jsx("img",{src:Q.photo,alt:Q.fullName||"Employee",className:"w-12 h-12 rounded-full object-cover border"}):Q.photo_path?e.jsx("img",{src:Q.photo_path,alt:Q.fullName||"Employee",className:"w-12 h-12 rounded-full object-cover border"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-white border flex items-center justify-center text-gray-400",children:e.jsx("span",{className:"text-xl",children:""})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Q.fullName||bs(Q.surname,Q.firstname,Q.middlename)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Employee OBJID: ",Q.objid]})]})]}):e.jsx("div",{className:"text-xs text-gray-500",children:"No matching HR record found for this DTR user."}),ne&&e.jsx("div",{className:"mt-2 text-xs text-red-600",children:ne})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Name"}),e.jsx("input",{type:"text",value:U.username,onChange:fe=>Ge("username",fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:text-gray-500 disabled:cursor-not-allowed",placeholder:"Enter portal username",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PIN"}),e.jsx("input",{type:"text",value:U.pin,onChange:fe=>{const Pe=fe.target.value.replace(/\D/g,"").slice(0,6);Ge("pin",Pe||"")},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"4-6 digit PIN"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:U.emailaddress,onChange:fe=>Ge("emailaddress",fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email address"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Portal User Status"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-xs font-semibold ${Number(U.status)===1?"text-blue-600":"text-gray-500"}`,children:Number(U.status)===1?"Active":"Inactive"}),e.jsx("button",{type:"button",onClick:()=>Ge("status",Number(U.status)===1?0:1),className:`relative inline-flex h-6 w-12 items-center rounded-full transition-colors ${Number(U.status)===1?"bg-blue-600":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition-transform ${Number(U.status)===1?"translate-x-6":"translate-x-1"}`})})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 px-6 py-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:ge,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"button",onClick:ke,disabled:$,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:$?"Saving...":"Save"})]})]})})]}):e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-red-100 p-6 text-center text-red-600",children:"You do not have permission to view portal users."})}const lb={dtruserid:"",dtrname:"",username:"",pin:"1234",emailaddress:"",status:1,emp_objid:null},ib=t=>t?t.fullName?t.fullName:bs(t.surname,t.firstname,t.middlename):"";function GF({open:t,mode:s,initialData:r,onClose:n,onSave:a}){const[l,i]=x.useState(lb),[o,c]=x.useState({loading:!1,error:"",match:null}),[d,m]=x.useState(!1),[u,p]=x.useState(null);x.useMemo(()=>s==="edit"?"Edit Portal User":"Add Portal User",[s]),x.useEffect(()=>{if(!t)return;const f={...lb,...r||{}};f.dtruserid=f.dtruserid?String(f.dtruserid):"",f.status=Number(f.status??1),f.pin=f.pin?String(f.pin):"1234",f.dtrname=f.dtrname||f.fullName||bs(f.surname,f.firstname,f.middlename),i(f),p(null)},[t,r]),x.useEffect(()=>{var b;if(!t)return;const f=(b=l.dtruserid)==null?void 0:b.trim();if(!f){c({loading:!1,error:"",match:null});return}let N=!1;return c(w=>({...w,loading:!0,error:""})),oe.get(`/employees/${f}/portal-profile`).then(w=>{if(N)return;const D=w.data||{},S=D.match||D.data||null;c({loading:!1,error:"",match:S}),p(S),S!=null&&S.objid&&i(C=>({...C,emp_objid:S.objid,dtrname:C.dtrname||ib(S)}))}).catch(w=>{var D,S;N||(console.error("[PortalEmployeeUserModal] Lookup failed:",w),c({loading:!1,error:((S=(D=w.response)==null?void 0:D.data)==null?void 0:S.message)||"Unable to retrieve employee profile.",match:null}),p(null))}),()=>{N=!0}},[t,l.dtruserid]);const g=(f,N)=>{if(f==="pin"){const b=N.replace(/\D/g,"").slice(0,6);i(w=>({...w,pin:b}));return}if(f==="dtruserid"){const b=N.replace(/\D/g,"");i(w=>({...w,dtruserid:b,emp_objid:s==="edit"?w.emp_objid:null}));return}if(f==="status"){i(b=>({...b,status:Number(N)===1?1:0}));return}i(b=>({...b,[f]:N}))},j=async f=>{if(f.preventDefault(),!l.dtruserid){alert("Please provide a DTR ID.");return}if(!l.username){alert("Please provide a username.");return}if(!l.pin){alert("Please provide a PIN.");return}try{m(!0),await a({...l,status:Number(l.status)===1?1:0})}finally{m(!1)}};if(!t)return null;const y=Number(l.status)===1?"Active":"Inactive",v=u?ib(u):l.dtrname||"Portal User",h=(u==null?void 0:u.photo)||null;return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 flex items-center justify-center px-4",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-lg shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[h?e.jsx("img",{src:h,alt:v,className:"w-14 h-14 rounded-full object-cover border border-gray-200"}):e.jsx("div",{className:"w-14 h-14 rounded-full bg-gray-200 border border-gray-300 flex items-center justify-center text-gray-600 text-base font-semibold",children:(v||"NA").split(/[ ,]+/).filter(Boolean).map(f=>f[0]).join("").slice(0,2).toUpperCase()||"NA"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:v}),e.jsx("p",{className:"text-sm text-gray-500",children:s==="edit"?"Update portal account information stored in sysusers_portal.":"Create a new portal account entry in sysusers_portal."})]})]}),e.jsx("button",{type:"button",onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close portal user modal",children:""})]}),e.jsxs("form",{onSubmit:j,className:"px-6 py-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["DTR ID ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:l.dtruserid,onChange:f=>g("dtruserid",f.target.value),placeholder:"Enter biometric user ID",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The DTR user identifier from the biometric system."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Portal User Name"}),e.jsx("input",{type:"text",value:l.dtrname||"",onChange:f=>g("dtrname",f.target.value),placeholder:"Portal display name (optional)",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:l.username,onChange:f=>g("username",f.target.value),placeholder:"Portal username",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm disabled:bg-gray-100 disabled:text-gray-500",disabled:s==="edit"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["PIN ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:l.pin,onChange:f=>g("pin",f.target.value),placeholder:"4-6 digit PIN",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:l.emailaddress||"",onChange:f=>g("emailaddress",f.target.value),placeholder:"name@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>g("status",Number(l.status)===1?0:1),className:`relative inline-flex h-7 w-14 items-center rounded-full transition-colors ${Number(l.status)===1?"bg-blue-600":"bg-gray-300"}`,"aria-pressed":Number(l.status)===1,"aria-label":"Toggle portal user status",children:e.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${Number(l.status)===1?"translate-x-7":"translate-x-1"}`})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:y})]})]})]}),o.loading&&e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 text-sm text-gray-500",children:"Looking up employee profile"}),!o.loading&&!o.match&&e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 text-sm text-gray-500",children:o.error||"No matching HR employee found for this DTR ID."}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?"Saving":"Save"})]})]})]})})}const QF=[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],Cl=(t={})=>t.surname||t.firstname||t.middlename?Ys({surname:t.surname||t.last_name,firstname:t.firstname||t.first_name,middlename:t.middlename||t.middle_name})||t.fullName||t.dtrname||"Unknown":t.dtrname||t.fullName||"Unknown";function ZF(){const{can:t,loading:s}=Vs(),r="portal-employee-users",n=x.useMemo(()=>({read:t(r,"read"),create:t(r,"create"),update:t(r,"update"),delete:t(r,"delete"),print:t(r,"print"),approve:t(r,"approve")}),[t]),{read:a,create:l,update:i,delete:o,print:c}=n,[d,m]=x.useState([]),[u,p]=x.useState(!1),[g,j]=x.useState(""),[y,v]=x.useState("all"),[h,f]=x.useState({open:!1,mode:"create",record:null}),[N,b]=x.useState({reset:!1,delete:!1}),[w,D]=x.useState({}),S=x.useCallback((I={})=>{const K=I.photo||I.photo_path||I.employee_photo;if(K)return e.jsx("img",{src:K,alt:Cl(I),className:"w-10 h-10 rounded-full object-cover border border-gray-200"});const z=(I.dtrname||Cl(I)||"NA").split(/[ ,]+/).filter(Boolean).map(P=>P[0]).join("").slice(0,2).toUpperCase();return e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 border border-gray-300 flex items-center justify-center text-gray-600 text-sm font-semibold",children:z||"NA"})},[]),C=x.useCallback(async()=>{var I;try{p(!0);const K=await oe.get("/portal-employee-users",{params:{search:g.trim()||void 0,status:y!=="all"?y:void 0}}),z=((I=K.data)==null?void 0:I.data)||K.data||{},P=z.users||z.rows||[],R=Array.isArray(P)?P:[];m(R)}catch(K){console.error("[PortalEmployeeUsers] Failed to load records:",K),m([])}finally{p(!1)}},[g,y]);x.useEffect(()=>{!s&&a&&C()},[C,s,a]);const T=()=>{if(!l){alert("You do not have permission to create portal employee users.");return}f({open:!0,mode:"create",record:null})},_=I=>{if(!i){alert("You do not have permission to update portal employee users.");return}f({open:!0,mode:"edit",record:I})},E=()=>{f({open:!1,mode:"create",record:null})},A=async I=>{var K,z;if(h.mode==="edit"){if(!i){alert("You do not have permission to update portal employee users.");return}}else if(!l){alert("You do not have permission to create portal employee users.");return}try{h.mode==="edit"&&h.record?await oe.put(`/portal-employee-users/${h.record.userportalid}`,I):await oe.post("/portal-employee-users",I),E(),await C()}catch(P){console.error("[PortalEmployeeUsers] Failed to save record:",P);const R=((z=(K=P.response)==null?void 0:K.data)==null?void 0:z.message)||"Unable to save portal user record.";alert(R)}},L=async I=>{var R,B;if(!i){alert("You do not have permission to update portal employee users.");return}if(!(I!=null&&I.userportalid)||!window.confirm(`Reset PIN for ${I.dtrname||Cl(I)}?`))return;const z=window.prompt("Enter the new PIN (4-6 digits):","");if(z===null)return;const P=z.replace(/\D/g,"");if(P.length<4||P.length>6){alert("PIN must be between 4 and 6 digits.");return}try{b(U=>({...U,reset:!0})),await oe.post(`/portal-employee-users/${I.userportalid}/reset-pin`,{pin:P}),alert("PIN has been reset successfully."),await C()}catch(U){console.error("[PortalEmployeeUsers] Failed to reset PIN:",U);const G=((B=(R=U.response)==null?void 0:R.data)==null?void 0:B.message)||"Unable to reset PIN.";alert(G)}finally{b(U=>({...U,reset:!1}))}},F=async I=>{var z,P;if(!o){alert("You do not have permission to delete portal employee users.");return}if(!(!(I!=null&&I.userportalid)||!window.confirm(`Delete portal user ${I.dtrname||Cl(I)}?`)))try{b(R=>({...R,delete:!0})),await oe.delete(`/portal-employee-users/${I.userportalid}`),await C()}catch(R){console.error("[PortalEmployeeUsers] Failed to delete user:",R);const B=((P=(z=R.response)==null?void 0:z.data)==null?void 0:P.message)||"Unable to delete portal user.";alert(B)}finally{b(R=>({...R,delete:!1}))}},W=I=>{if(!c){alert("You do not have permission to print portal employee users.");return}const K=Cl(I),z=window.open("","_blank","noopener,noreferrer");if(!z){alert("Please allow pop-ups to print.");return}const P=(()=>{const B=I.photo||I.photo_path||I.employee_photo;return B?`<img src="${B}" alt="Employee Photo" style="width: 96px; height: 96px; object-fit: cover; border-radius: 9999px; border: 1px solid #ddd;" />`:""})(),R=`
      <!DOCTYPE html>
      <html>
        <head>
          <meta charset="utf-8" />
          <title>Portal User Record - ${K}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 24px; color: #111827; }
            h1 { font-size: 20px; margin-bottom: 16px; }
            .header { display: flex; align-items: center; gap: 16px; margin-bottom: 24px; }
            .meta { font-size: 14px; color: #4B5563; }
            table { width: 100%; border-collapse: collapse; margin-top: 12px; }
            th, td { border: 1px solid #E5E7EB; padding: 10px; text-align: left; font-size: 14px; }
            th { background-color: #F3F4F6; color: #374151; }
          </style>
        </head>
        <body>
          <div class="header">
            ${P}
            <div>
              <h1>${K}</h1>
              <div class="meta">Portal User ID: ${I.userportalid||""}</div>
            </div>
          </div>
          <table>
            <tbody>
              <tr>
                <th>DTR ID</th>
                <td>${I.dtruserid||""}</td>
              </tr>
              <tr>
                <th>Username</th>
                <td>${I.username||""}</td>
              </tr>
              <tr>
                <th>Email</th>
                <td>${I.emailaddress||""}</td>
              </tr>
              <tr>
                <th>Status</th>
                <td>${Number(I.status)===1?"Active":"Inactive"}</td>
              </tr>
              <tr>
                <th>Created By</th>
                <td>${I.created_by_name||I.createdby||""}</td>
              </tr>
              <tr>
                <th>Created Date</th>
                <td>${I.createddate?new Date(I.createddate).toLocaleString():""}</td>
              </tr>
              <tr>
                <th>Updated Date</th>
                <td>${I.updateddate?new Date(I.updateddate).toLocaleString():""}</td>
              </tr>
            </tbody>
          </table>
        </body>
      </html>
    `;z.document.write(R),z.document.close(),z.focus(),z.print()},Y=I=>{j(I.target.value)},q=I=>{v(I.target.value)},J=x.useMemo(()=>d.length,[d.length]),O=x.useMemo(()=>h.open?h.mode==="edit"?i:l:!1,[h,l,i]),M=async I=>{var B,U;if(!i){alert("You do not have permission to update portal employee users.");return}if(!(I!=null&&I.userportalid))return;const z=(Number(I.status)===1?1:0)===1?0:1,P=I.pin!==void 0&&I.pin!==null&&I.pin!==""?String(I.pin).replace(/\D/g,"").slice(0,6):null,R={dtruserid:I.dtruserid,dtrname:I.dtrname,username:I.username,pin:P&&P.length>=4?P:void 0,emailaddress:I.emailaddress,status:z,emp_objid:I.emp_objid};D(G=>({...G,[I.userportalid]:!0}));try{await oe.put(`/portal-employee-users/${I.userportalid}`,R),m(G=>G.map($=>$.userportalid===I.userportalid?{...$,status:z}:$))}catch(G){console.error("[PortalEmployeeUsers] Failed to update status:",G);const $=((U=(B=G.response)==null?void 0:B.data)==null?void 0:U.message)||"Unable to update portal user status.";alert($)}finally{D(G=>{const $={...G};return delete $[I.userportalid],$})}},k=I=>{const K=I.created_by_photo||I.created_by_photo_path,z=I.created_by_name||I.created_by_username||"",P=z.trim().charAt(0)||"N",R="w-10 h-10 rounded-full border border-gray-300 flex items-center justify-center text-gray-500 text-sm font-semibold bg-gray-200";return K?e.jsx("img",{src:K,alt:z,title:z,className:"w-10 h-10 rounded-full object-cover border border-gray-200"}):e.jsx("div",{className:R,title:z,children:P.toUpperCase()})};return s?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center text-gray-600",children:"Loading portal employee permissions..."}):a?e.jsxs("div",{className:"h-full overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-5 px-6 bg-white border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Employee Portal Users"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage portal login credentials"})]}),l&&e.jsx("button",{type:"button",onClick:T,className:"inline-flex items-center px-4 py-2 rounded-md bg-blue-600 text-white text-sm font-medium shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"+ Add Portal User"})]}),e.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsx("div",{className:"flex items-center gap-3 w-full md:max-w-md",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"search",value:g,onChange:Y,placeholder:"Search by name, DTR ID, username, or email",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("span",{className:"absolute inset-y-0 left-3 flex items-center text-gray-400",children:""})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{htmlFor:"portal-status-filter",className:"text-sm text-gray-700",children:"Status"}),e.jsx("select",{id:"portal-status-filter",value:y,onChange:q,className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:QF.map(I=>e.jsx("option",{value:I.value,children:I.label},I.value))})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50 p-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"DTR ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Username"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Created By"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-sm text-gray-500",children:"Loading portal users"})}):d.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-sm text-gray-500",children:"No portal user records found."})}):d.map(I=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[S(I),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Cl(I)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Portal ID: ",I.userportalid||""]})]})]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:I.dtruserid||""}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:e.jsx("div",{className:"font-medium text-gray-900",children:I.username||""})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:k(I)}),e.jsx("td",{className:"px-4 py-4",children:i?e.jsx("div",{className:"flex items-center justify-start",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:Number(I.status)===1,onChange:()=>M(I),disabled:!!w[I.userportalid]}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-emerald-500 rounded-full peer peer-checked:bg-emerald-500 transition-colors"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"}),e.jsx("span",{className:"ml-3 text-xs font-medium text-gray-700",children:Number(I.status)===1?"Active":"Inactive"})]})}):e.jsx("div",{className:"text-sm text-gray-500",children:Number(I.status)===1?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-4 text-sm text-center",children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:(()=>{const K=[];return i&&K.push(e.jsx("button",{onClick:()=>L(I),className:"text-purple-600 hover:text-purple-800 transition-colors",title:"Reset PIN",disabled:N.reset,children:""},"reset")),i&&K.push(e.jsx("button",{onClick:()=>_(I),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit Portal User",children:""},"edit")),c&&K.push(e.jsx("button",{onClick:()=>W(I),className:"text-green-600 hover:text-green-800 transition-colors",title:"Print Portal User",children:""},"print")),o&&K.push(e.jsx("button",{onClick:()=>F(I),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete Portal User",disabled:N.delete,children:""},"delete")),K.length===0?e.jsx("span",{className:"text-xs text-gray-400",children:"No actions"}):K})()})})]},I.userportalid))})]})}),e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 text-sm text-gray-600",children:["Showing ",d.length===0?0:J," portal user",J===1?"":"s"]})]})}),O&&e.jsx(GF,{open:h.open,mode:h.mode,initialData:h.record,onClose:E,onSave:A})]}):e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-red-100 p-6 text-center text-red-600",children:"You do not have permission to view portal employee users."})}const JF=[{id:"biometric",label:"Biometric Users"},{id:"employee",label:"Employee Portal Users"}];function XF(){const[t,s]=x.useState("biometric"),r=x.useMemo(()=>JF.map(n=>({...n,isActive:n.id===t})),[t]);return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-4","aria-label":"Portal users tabs",children:r.map(n=>e.jsx("button",{type:"button",onClick:()=>s(n.id),className:`whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm transition-colors ${n.isActive?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:n.label},n.id))})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:t==="biometric"?e.jsx(VF,{}):e.jsx(ZF,{})})]})}const e7=()=>{const{user:t}=Ts(),[s,r]=x.useState([]),[n,a]=x.useState([]),[l,i]=x.useState([]),[o,c]=x.useState(!1),[d,m]=x.useState(!1),[u,p]=x.useState(1),[g,j]=x.useState(10),[y,v]=x.useState(0),[h,f]=x.useState(0),[N,b]=x.useState({privilege:"all",appointment:"all",department:"all",shiftSchedule:"all"}),w=async()=>{c(!0);try{const q=new URLSearchParams;q.append("page",u),q.append("limit",g),N.privilege!=="all"&&q.append("status",N.privilege),N.appointment!=="all"&&q.append("appointment",N.appointment),N.department!=="all"&&q.append("department",N.department),N.shiftSchedule!=="all"&&q.append("shiftSchedule",N.shiftSchedule);const J=await oe.get(`/employees/paginated-with-shifts?${q.toString()}`);r(J.data.employees||[]),v(J.data.total||0),f(Math.ceil((J.data.total||0)/g))}catch(q){console.error("Error fetching employees:",q)}finally{c(!1)}},D=async()=>{try{const q=new URLSearchParams;return q.append("limit","1000"),N.privilege!=="all"&&q.append("status",N.privilege),N.appointment!=="all"&&q.append("appointment",N.appointment),N.department!=="all"&&q.append("department",N.department),N.shiftSchedule!=="all"&&q.append("shiftSchedule",N.shiftSchedule),(await oe.get(`/employees/paginated-with-shifts?${q.toString()}`)).data.employees||[]}catch(q){return console.error("Error fetching all employees for print:",q),[]}},S=async()=>{try{const q=await oe.get("/departments");a(q.data.data||[])}catch(q){console.error("Error fetching departments:",q),a([])}},C=async()=>{try{const q=await oe.get("/management/shiftschedules");i(q.data||[])}catch(q){console.error("Error fetching shift schedules:",q),i([])}};x.useEffect(()=>{w()},[N,u,g]),x.useEffect(()=>{S(),C()},[]);const T=(q,J)=>{b(O=>({...O,[q]:J})),p(1)},_=()=>{b({privilege:"all",appointment:"all",department:"all",shiftSchedule:"all"}),p(1)},E=q=>{p(q)},A=q=>{j(q),p(1)},L=async()=>{m(!0);const q=await D();new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});const J=`
      @media print {
        .no-print { display: none !important; }
        
        /* Hide DTR Management sidebar and navigation */
        .fixed.inset-y-0.left-0.z-50,
        .fixed.inset-0.bg-gray-600,
        nav,
        header,
        .bg-white.shadow-sm.border-b,
        .flex.items-center.justify-between.px-6.py-4,
        .flex.items-center.space-x-4,
        .bg-white.rounded-xl.shadow-sm.border.border-gray-200.p-6:first-child,
        .flex.items-center.justify-between:first-child {
          display: none !important;
        }
        
        /* Reset main content margins for print */
        .flex-1.transition-all.duration-300 {
          margin-left: 0 !important;
        }
        
        /* Print-specific styles */
        body { 
          font-size: 12px; 
          margin: 0;
          padding: 0;
        }
        .print-header {
          display: block !important;
          text-align: center;
          margin-bottom: 20px;
          border-bottom: 2px solid #333;
          padding-bottom: 10px;
        }
        .print-logo {
          height: 60px;
          margin-bottom: 10px;
        }
        .print-title {
          font-size: 18px;
          font-weight: bold;
          margin-bottom: 5px;
        }
        .print-subtitle {
          font-size: 14px;
          color: #666;
        }
        .print-table {
          width: 100%;
          border-collapse: collapse;
          margin-bottom: 20px;
        }
        .print-table th, 
        .print-table td { 
          border: 1px solid #333; 
          padding: 6px; 
          text-align: left; 
          font-size: 11px;
        }
        .print-table th { 
          background-color: #f0f0f0; 
          font-weight: bold; 
        }
        .print-footer {
          display: block !important;
          text-align: center;
          margin-top: 20px;
          font-size: 10px;
          color: #666;
          border-top: 1px solid #ccc;
          padding-top: 10px;
        }
        @page {
          margin: 0.5in;
        }
      }
    `,O=document.createElement("style");O.textContent=J,document.head.appendChild(O);const M=s;r(q),setTimeout(()=>{window.print(),setTimeout(()=>{r(M),document.head.removeChild(O),m(!1)},1e3)},100)},F=q=>q>=0?"Active":"Inactive",W=q=>q>=0?"text-green-600 bg-green-100":"text-red-600 bg-red-100",Y=()=>{const q=[];if(h<=5)for(let O=1;O<=h;O++)q.push(O);else{const O=Math.max(1,u-2),M=Math.min(h,O+5-1);for(let k=O;k<=M;k++)q.push(k)}return q};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"print-header no-print",style:{display:"none"},children:[e.jsx("img",{src:aw,alt:"Logo",className:"print-logo"}),e.jsx("div",{className:"print-title",children:"Human Resource Management Office"}),e.jsxs("div",{className:"print-subtitle",children:["List as of ",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Employee List Report"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Generate and print employee list with filters"})]}),e.jsxs("button",{onClick:L,disabled:d||y===0,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),e.jsx("span",{children:d?"Printing...":"Print List"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 no-print",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"}),e.jsx("button",{onClick:_,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",children:"Clear Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:N.privilege,onChange:q=>T("privilege",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Employees"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment"}),e.jsxs("select",{value:N.appointment,onChange:q=>T("appointment",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Appointments"}),e.jsx("option",{value:"1",children:"Regular"}),e.jsx("option",{value:"2",children:"Casual"}),e.jsx("option",{value:"3",children:"Co-Terminus"}),e.jsx("option",{value:"4",children:"Provisional"}),e.jsx("option",{value:"5",children:"JO"}),e.jsx("option",{value:"6",children:"PB"}),e.jsx("option",{value:"7",children:"SE"}),e.jsx("option",{value:"8",children:"Others"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsxs("select",{value:N.department,onChange:q=>T("department",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Departments"}),n.map(q=>e.jsx("option",{value:q.DEPTID,children:q.DEPTNAME},q.DEPTID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shift Schedule"}),e.jsxs("select",{value:N.shiftSchedule,onChange:q=>T("shiftSchedule",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Schedules"}),l.map(q=>e.jsx("option",{value:q.SHIFTNO,children:q.SHIFTNAME},q.SHIFTNO))]})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 no-print",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Employee List (",y," employees)"]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Show:"}),e.jsxs("select",{value:g,onChange:q=>A(parseInt(q.target.value)),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{className:"text-sm text-gray-700",children:"per page"})]}),o&&e.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[e.jsxs("svg",{className:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-sm",children:"Loading..."})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 print-table",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Badge No."}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shift"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Appointment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(q=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:q.USERID}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:q.BADGENUMBER}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.NAME}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.TITLE||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.DEPTNAME||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.SHIFTNAME||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:OF(q.Appointment)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${W(q.privilege)}`,children:F(q.privilege)})})]},q.USERID))})]})}),h>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 no-print",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>E(u-1),disabled:u===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>E(u+1),disabled:u===h,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(u-1)*g+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(u*g,y)})," ","of ",e.jsx("span",{className:"font-medium",children:y})," results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>E(u-1),disabled:u===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),Y().map(q=>e.jsx("button",{onClick:()=>E(q),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${q===u?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:q},q)),e.jsxs("button",{onClick:()=>E(u+1),disabled:u===h,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})]}),e.jsxs("div",{className:"print-footer no-print",style:{display:"none"},children:["System Generated (",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),") By: ",(t==null?void 0:t.USERID)||"Unknown"]})]})},t7=()=>{const[t,s]=x.useState([]),[r,n]=x.useState([]),[a,l]=x.useState(null),[i,o]=x.useState(0),[c,d]=x.useState([]),[m,u]=x.useState(!1),[p,g]=x.useState(""),[j,y]=x.useState(!1),[v,h]=x.useState(null),[f,N]=x.useState(!1),[b,w]=x.useState(!1),[D,S]=x.useState(null),[C,T]=x.useState(!1),[_,E]=x.useState(""),[A,L]=x.useState("all"),[F,W]=x.useState([]),[Y,q]=x.useState(0),[J,O]=x.useState(!1),[M,k]=x.useState(""),[I,K]=x.useState(0),[z,P]=x.useState(null),R=x.useRef(null),B=["Right Thumb","Right Index","Right Middle","Right Ring","Right Little","Left Thumb","Left Index","Left Middle","Left Ring","Left Little"],U=async Z=>{var ee;try{const ye=await oe.get(`/bio-enroll/enrollment-progress/${Z}`);if(ye.data.success){const ve=ye.data;if(console.log(" Status:",ve.status),ve.status==="initializing"||ve.status==="capturing")g(" DigitalPersona enrollment window is active"),k("Follow the instructions in the enrollment window...");else if(ve.status==="complete"||ve.status==="captured"){console.log(" All samples captured - showing confirmation"),console.log(" Template data:",{hasTemplateBase64:!!ve.templateBase64,samplesCollected:ve.samplesCollected,avgQuality:ve.avgQuality,userName:ve.userName}),R.current&&(console.log(" Stopping progress polling - enrollment complete"),clearInterval(R.current),R.current=null);const ue=ve.detectedFinger||ve.fingerId,we={enrollmentId:Z,userId:ve.userId,fingerId:ue,name:ve.userName,templateBase64:ve.templateBase64,samplesCollected:ve.samplesCollected||3,avgQuality:ve.avgQuality||95,qualityScores:ve.qualityScores||[95,95,95],templateSize:ve.templateSize};console.log(" Setting capturedTemplate:",we),console.log(" Detected finger:",B[ue]),S(we),o(ue),K(ve.samplesCollected||3),g(` ${B[ue]} captured successfully!`),k(`Template size: ${ve.templateSize} bytes | Quality: ${ve.avgQuality||95}%`),u(!1),console.log(" Showing save confirmation modal..."),T(!0)}else ve.status==="error"&&(R.current&&(clearInterval(R.current),R.current=null),u(!1),g(` Enrollment failed: ${ve.error||"Unknown error"}`),k(""),K(0))}else console.log(" Progress not found - stopping polling"),R.current&&(clearInterval(R.current),R.current=null)}catch(ye){((ee=ye.response)==null?void 0:ee.status)===404?(console.log(" Progress not found (404) - stopping polling"),R.current&&(clearInterval(R.current),R.current=null)):console.warn("Progress polling error:",ye.message)}};x.useEffect(()=>()=>{R.current&&(clearInterval(R.current),R.current=null)},[]),x.useEffect(()=>{(async()=>{try{console.log(" Initializing bio enrollment system...");const ee=await oe.get("/bio-enroll/health");if(ee.data.success){if(y(!0),O(!0),ee.data.deviceInfo){h(ee.data.deviceInfo);const ye=ee.data.deviceInfo.model||ee.data.deviceInfo.name,ve=ee.data.deviceInfo.serialNumber;g(` ${ye} ready${ve!=="Unknown"?` (SN: ${ve})`:""}`),console.log(" Device detected:",ye)}else g(" Bio enrollment system ready (No device detected)"),console.log(" No device information available");console.log(" Bio enrollment system initialized successfully"),console.log("   SDK Ready:",ee.data.sdkReady)}else g(" Bio enrollment system not available")}catch(ee){console.error("Failed to initialize bio enrollment system:",ee),g(" Failed to initialize bio enrollment system"),y(!1),O(!1)}})(),G()},[]),x.useEffect(()=>{$()},[_,A,t]);const G=async()=>{try{N(!0);const Z=await oe.get("/biometric/employees-bio-status");s(Z.data.employees||[])}catch(Z){console.error("Error fetching employees:",Z),s([])}finally{N(!1)}},$=()=>{let Z=t;_&&(Z=Z.filter(ee=>{var ye,ve;return((ye=ee.NAME)==null?void 0:ye.toLowerCase().includes(_.toLowerCase()))||((ve=ee.BADGENUMBER)==null?void 0:ve.toLowerCase().includes(_.toLowerCase()))})),A!=="all"&&(Z=Z.filter(ee=>A==="enrolled"?ee.BIO_COUNT>0:A==="not-enrolled"?ee.BIO_COUNT===0:!0)),n(Z)},X=async Z=>{try{const ee=await oe.get(`/biometric/enrolled-fingers/${Z}`);d(ee.data.fingers||[])}catch(ee){console.error("Error fetching enrolled fingers:",ee),d([])}},Q=async Z=>{l(Z),await X(Z.USERID),o(0),w(!0)},Ne=()=>{w(!1),l(null),d([]),g(" Reader ready"),G()},V=async()=>{if(D)try{R.current&&(console.log(" Stopping progress polling before save"),clearInterval(R.current),R.current=null),g(" Saving enrollment to database..."),k("Please wait..."),console.log(" Saving captured template to database...");const Z=await oe.post("/bio-enroll/save-enrollment",D);if(Z.data.success)console.log(" Enrollment saved successfully:",Z.data),g(" Fingerprint enrolled and saved successfully!"),k(`Saved with FUID: ${Z.data.fuid}`),T(!1),S(null),P(null),await X(a.USERID),setTimeout(()=>{K(0),k(""),g(" Ready for next enrollment."),G()},2e3);else throw new Error(Z.data.message||"Failed to save enrollment")}catch(Z){console.error("Error saving enrollment:",Z),g(` Failed to save enrollment: ${Z.message}`),k(""),T(!1),S(null),P(null),R.current&&(clearInterval(R.current),R.current=null)}},re=()=>{console.log(" User stopped active enrollment"),R.current&&(clearInterval(R.current),R.current=null,console.log(" Progress polling stopped")),u(!1),P(null),K(0),k(""),T(!1),S(null),g(" Enrollment cancelled by user during capture process."),console.log(" Enrollment process stopped and states reset"),setTimeout(()=>{g("Ready for enrollment.")},3e3)},ne=()=>{console.log(" User cancelled enrollment after capture"),R.current&&(console.log(" Stopping progress polling - enrollment cancelled"),clearInterval(R.current),R.current=null),T(!1),S(null),P(null),K(0),k(""),g(" Enrollment cancelled. Template not saved."),setTimeout(()=>{g(" Ready for enrollment.")},2e3)},xe=async Z=>{if(a&&window.confirm(`Delete ${B[Z]} enrollment?

This will permanently remove this fingerprint from the system.`))try{console.log(` Deleting finger ${Z} for user ${a.USERID}...`),g(` Deleting ${B[Z]}...`),(await oe.delete(`/biometric/delete-finger/${a.USERID}/${Z}`)).data.success&&(console.log(` ${B[Z]} deleted successfully`),g(` ${B[Z]} deleted successfully`),await X(a.USERID),await G(),setTimeout(()=>{g(" Ready for enrollment")},2e3))}catch(ee){console.error("Delete error:",ee),g(` Failed to delete fingerprint: ${ee.message}`)}},me=async()=>{if(!a||!J){g(" No employee selected or bio enrollment system not available");return}if(m){console.warn(" Enrollment already in progress, ignoring duplicate call");return}try{R.current&&(clearInterval(R.current),R.current=null),u(!0),K(0),g(" Opening DigitalPersona enrollment window..."),k("The enrollment window will appear shortly..."),console.log(" Enrollment state set - using DPFP.Gui UI Support"),console.log(" Starting bio enrollment process..."),console.log("   Employee:",a.NAME,"(ID:",a.USERID,")"),console.log("   Finger:",B[i],"(ID:",i,")");const Z=await oe.post("/bio-enroll/enroll-finger",{userId:a.USERID,fingerId:i});if(Z.data.success&&Z.data.enrollmentId){console.log(" Enrollment started:",Z.data),console.log(" Setting up progress polling for enrollment ID:",Z.data.enrollmentId);const ee=Z.data.enrollmentId;P(ee),u(!0),R.current=setInterval(()=>{U(ee)},500),console.log(" Progress polling interval set up for ID:",ee)}else throw new Error(Z.data.message||"Enrollment failed to start")}catch(Z){console.error("Enhanced enrollment error:",Z),g(` Enrollment failed: ${Z.message}`),k(""),K(0),u(!1),R.current&&(clearInterval(R.current),R.current=null)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Enroll Employee Biometric"}),e.jsx("p",{className:"text-gray-600",children:"Manage employee fingerprints for web login authentication"})]}),e.jsx("div",{className:`mb-6 p-4 rounded-lg ${j?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${j?"bg-green-500 animate-pulse":"bg-yellow-500"}`}),e.jsx("span",{className:`font-medium ${j?"text-green-800":"text-yellow-800"}`,children:p||"Initializing..."})]})}),e.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Search by name or badge number...",value:_,onChange:Z=>E(Z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("div",{children:e.jsxs("select",{value:A,onChange:Z=>L(Z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Employees"}),e.jsx("option",{value:"enrolled",children:"With Bio Login"}),e.jsx("option",{value:"not-enrolled",children:"No Bio Login"})]})})]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:["Showing ",r.length," of ",t.length," employees"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:f?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"inline-block w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading employees..."})]}):r.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"No employees found"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Badge Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(Z=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Z.BADGENUMBER}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Z.NAME}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:Z.BIO_COUNT>0?e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),Z.BIO_COUNT," finger",Z.BIO_COUNT>1?"s":""]}):e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"No bio login"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("button",{onClick:()=>Q(Z),disabled:!j,className:`inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-all ${j?"bg-blue-600 text-white hover:bg-blue-700 shadow hover:shadow-lg transform hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:"Enroll biometric",children:[e.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})}),"Enroll"]})})]},Z.USERID))})]})})}),b&&a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Enroll Biometric"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[a.BADGENUMBER," - ",a.NAME]})]}),e.jsx("button",{onClick:Ne,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:m,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-blue-900",children:"Department:"})," ",e.jsx("span",{className:"text-blue-800",children:a.DEPTNAME||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-blue-900",children:"Enrolled Fingers:"})," ",e.jsxs("span",{className:"text-blue-800",children:[c.length,"/10"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-blue-900",children:"Status:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs ${c.length>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.length>0?"Has Bio Login":"No Bio Login"})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-4 text-center",children:"DigitalPersona Biometric Enrollment"}),c.length>0&&e.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg border-2 border-green-200",children:[e.jsxs("h5",{className:"text-sm font-semibold text-green-800 mb-3 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Enrolled Fingers (",c.length,"/10)"]}),e.jsx("div",{className:"space-y-2",children:c.map(Z=>e.jsxs("div",{className:"flex items-center justify-between bg-green-50 p-3 rounded-lg border border-green-200",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"text-sm font-medium text-green-800",children:B[Z]})}),e.jsx("button",{onClick:()=>xe(Z),disabled:m,className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:`Delete ${B[Z]} enrollment`,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},Z))}),e.jsx("p",{className:"mt-3 text-xs text-gray-500 text-center",children:"Click the delete icon to remove a finger enrollment"})]}),!m&&e.jsx("div",{className:"mb-6 bg-blue-50 p-4 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"How it works:"}),e.jsx("p",{className:"text-xs text-blue-700",children:"The DigitalPersona SDK will automatically detect which finger you place on the scanner. Simply place any finger on the device when the enrollment window appears, and the system will identify and enroll it for you."})]})]})}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("svg",{className:`w-24 h-24 mx-auto mb-4 ${m?"text-blue-500 animate-pulse":"text-gray-400"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})}),e.jsx("p",{className:"text-sm text-gray-600",children:m?"Follow the instructions in the DigitalPersona enrollment window":"Click the button below to start enrollment"})]}),m&&e.jsx("div",{className:"mb-6 bg-blue-50 border-2 border-blue-400 p-6 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"inline-block w-20 h-20 bg-blue-500 rounded-full flex items-center justify-center animate-pulse",children:e.jsx("span",{className:"text-4xl",children:""})})}),e.jsx("p",{className:"text-lg font-bold text-blue-800 mb-2",children:"DigitalPersona Enrollment Window Active"}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"A separate enrollment window has appeared. Please follow the on-screen instructions to complete fingerprint enrollment."}),e.jsxs("div",{className:"bg-white p-3 rounded border border-blue-200 mb-3",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:e.jsx("strong",{children:"Instructions:"})}),e.jsxs("ul",{className:"text-xs text-left text-gray-600 space-y-1",children:[e.jsx("li",{children:" Place your finger on the scanner when prompted"}),e.jsx("li",{children:" Follow the visual feedback in the enrollment window"}),e.jsx("li",{children:" The SDK will guide you through multiple samples"}),e.jsx("li",{children:" Keep the window in focus until completion"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 italic",children:M})]})}),m?e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:me,disabled:!0,className:"w-full py-4 px-6 rounded-lg font-semibold text-white bg-gray-400 cursor-not-allowed",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-3"}),"Enrolling..."]})}),e.jsx("button",{onClick:re,className:"w-full py-3 px-6 rounded-lg font-medium text-red-600 bg-red-50 hover:bg-red-100 border-2 border-red-200 transition-all",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel Enrollment"]})})]}):e.jsx("button",{onClick:me,disabled:!j,className:`w-full py-4 px-6 rounded-lg font-semibold text-white transition-all ${j?"bg-blue-600 hover:bg-blue-700 shadow-lg hover:shadow-xl transform hover:scale-105":"bg-gray-400 cursor-not-allowed"}`,children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})}),"Start Enrollment"]})}),e.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200 text-center",children:e.jsx("p",{className:"text-sm font-medium text-gray-700",children:p})})]})]})}),C&&D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-2xl w-full p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Fingerprint Captured Successfully!"}),e.jsx("p",{className:"text-gray-600",children:"All 3 samples have been captured. Review and confirm to save."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Capture Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Employee:"}),e.jsx("span",{className:"ml-2 font-medium",children:a==null?void 0:a.NAME})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Finger:"}),e.jsx("span",{className:"ml-2 font-medium",children:B[i]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Badge Number:"}),e.jsx("span",{className:"ml-2 font-medium",children:a==null?void 0:a.BADGENUMBER})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Samples Captured:"}),e.jsx("span",{className:"ml-2 font-medium text-green-600",children:(D==null?void 0:D.samplesCollected)||3})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Template Size:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[(D==null?void 0:D.templateSize)||0," bytes"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Quality:"}),e.jsxs("span",{className:"ml-2 font-medium text-green-600",children:[(D==null?void 0:D.avgQuality)||95,"%"]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:ne,className:"flex-1 py-3 px-6 rounded-lg font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 transition-all",children:"Discard"}),e.jsx("button",{onClick:V,className:"flex-1 py-3 px-6 rounded-lg font-medium text-white bg-green-600 hover:bg-green-700 shadow-lg hover:shadow-xl transition-all",children:"Save Enrollment"})]})]})})]})]})})]})},In=t=>{if(!t)return"";const s=String(t);return s.length>=5?s.slice(0,5):s},Al=t=>{if(!t)return;const s=String(t).trim();return s.startsWith("data:")?s:`data:image/jpeg;base64,${s}`},th=(t,s)=>{const r=(t||"").trim(),n=(s||"").trim(),a=r?r.charAt(0).toUpperCase():"",l=n?n.charAt(0).toUpperCase():"";return a+l||""},s7=()=>{const{can:t,loading:s}=Vs(),r="dtr-assign-shift",n=t(r,"read"),a=t(r,"create"),l=t(r,"update"),i=t(r,"delete"),[o,c]=x.useState([]),[d,m]=x.useState({}),[u,p]=x.useState({}),[g,j]=x.useState(""),[y,v]=x.useState(!0),[h,f]=x.useState([]),[N,b]=x.useState(!1),[w,D]=x.useState(null),[S,C]=x.useState(null),[T,_]=x.useState(!1),[E,A]=x.useState({}),[L,F]=x.useState(""),[W,Y]=x.useState(!1),[q,J]=x.useState({shiftid:"",shiftids:[]});x.useEffect(()=>{if(s)return;if(!n){c([]),p({}),f([]),v(!1);return}(async()=>{var G,$,X;v(!0);try{const[Q,Ne,V]=await Promise.all([oe.get("/201-employees"),oe.get("/dtr-shifts"),oe.get("/dtr-assigned-shifts")]),re=(((G=Q.data)==null?void 0:G.data)||[]).map(me=>({objid:me.objid,surname:me.surname||"",firstname:me.firstname||"",middlename:me.middlename||"",extension:me.extension||"",fullname:me.fullname||"",photo_path:me.photo_path||null}));c(re),f((($=Ne.data)==null?void 0:$.data)||[]);const xe=(((X=V.data)==null?void 0:X.data)||[]).reduce((me,Z)=>{const ee=Z.emp_objid;return me[ee]||(me[ee]=[]),me[ee].push(Z),me},{});p(xe)}catch(Q){console.error("Init failed",Q)}finally{v(!1)}})()},[s,n]);const O=x.useMemo(()=>{const U=(g||"").toLowerCase();return(o||[]).filter(G=>{const $=bs(G.surname,G.firstname,G.middlename,G.extension).toLowerCase(),X=(G.fullname||"").toLowerCase();return $.includes(U)||X.includes(U)})},[o,g]),M=async U=>{if(!n)return;const G=U.objid;if(m($=>({...$,[G]:!$[G]})),!u[G])try{const $=await oe.get(`/dtr-assigned-shifts?emp_objid=${encodeURIComponent(G)}`);p(X=>{var Q;return{...X,[G]:((Q=$.data)==null?void 0:Q.data)||[]}})}catch($){console.error("Load assignments failed",$)}},k=async()=>{var U;if(n)try{const X=(((U=(await oe.get("/dtr-assigned-shifts")).data)==null?void 0:U.data)||[]).reduce((Q,Ne)=>{const V=Ne.emp_objid;return Q[V]||(Q[V]=[]),Q[V].push(Ne),Q},{});p(X)}catch(G){console.error("Refresh all assignments failed",G)}},I=async()=>{var U,G;if(!a){alert("You do not have permission to assign shifts.");return}if(!L){alert("Please select a shift to assign");return}if(confirm("Assign this shift to all employees without this shift?")){Y(!0);try{await oe.post("/dtr-assigned-shifts/bulk-assign",{shiftid:Number(L)}),await k(),alert("Bulk assign completed")}catch($){console.error("Bulk assign failed",$),alert(((G=(U=$==null?void 0:$.response)==null?void 0:U.data)==null?void 0:G.message)||"Bulk assign failed")}finally{Y(!1)}}},K=U=>{if(!a){alert("You do not have permission to assign shifts.");return}D(U),C(null),J({shiftid:"",shiftids:[]}),b(!0)},z=(U,G)=>{if(!l){alert("You do not have permission to update shift assignments.");return}D(U),C(G),J({shiftid:G.shiftid||"",shiftids:[]}),b(!0)},P=async()=>{if(w){if(S&&!l){alert("You do not have permission to update shift assignments.");return}if(!S&&!a){alert("You do not have permission to assign shifts.");return}if(S){if(!q.shiftid){alert("Please select a shift");return}}else if((Array.isArray(q.shiftids)?q.shiftids:[]).length===0){alert("Please select at least one shift");return}_(!0);try{if(S)await oe.put(`/dtr-assigned-shifts/${S.objid}`,{shiftid:Number(q.shiftid),emp_objid:w.objid});else{const G=Array.isArray(q.shiftids)?q.shiftids:[];for(const $ of G)await oe.post("/dtr-assigned-shifts",{emp_objid:w.objid,shiftid:Number($)})}const U=await oe.get(`/dtr-assigned-shifts?emp_objid=${encodeURIComponent(w.objid)}`);p(G=>{var $;return{...G,[w.objid]:(($=U.data)==null?void 0:$.data)||[]}}),b(!1)}catch(U){console.error("Save failed",U),alert("Failed to save")}finally{_(!1)}}},R=async(U,G)=>{if(!i){alert("You do not have permission to delete shift assignments.");return}if(confirm("Delete this assignment?"))try{await oe.delete(`/dtr-assigned-shifts/${G.objid}`);const $=await oe.get(`/dtr-assigned-shifts?emp_objid=${encodeURIComponent(U.objid)}`);p(X=>{var Q;return{...X,[U.objid]:((Q=$.data)==null?void 0:Q.data)||[]}})}catch($){console.error("Delete failed",$),alert("Failed to delete")}},B=async(U,G)=>{if(!l){alert("You do not have permission to update shift assignments.");return}const $=G.objid;A(X=>({...X,[$]:!0}));try{const X=Number(G.is_used)===1?0:1;await oe.put(`/dtr-assigned-shifts/${$}`,{is_used:X,emp_objid:U.objid,shiftid:G.shiftid});const Q=await oe.get(`/dtr-assigned-shifts?emp_objid=${encodeURIComponent(U.objid)}`);p(Ne=>{var V;return{...Ne,[U.objid]:((V=Q.data)==null?void 0:V.data)||[]}})}catch(X){console.error("Toggle is_used failed",X),alert("Failed to update In-Used")}finally{A(X=>({...X,[$]:!1}))}};return s?e.jsx("div",{className:"bg-white border border-dashed rounded-lg p-8 text-center text-gray-500",children:"Loading permissions..."}):n?e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("h2",{className:"text-xl font-semibold",children:"Assign Shift"})}),e.jsx("div",{className:"bg-white p-3 rounded-md shadow mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Employee Search"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",placeholder:"Type name",value:g,onChange:U=>j(U.target.value),disabled:!n})]}),e.jsxs("div",{className:"md:col-span-2 flex items-end gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Assign To All"}),e.jsxs("select",{className:"mt-1 w-full border rounded px-3 py-2",value:L,onChange:U=>F(U.target.value),disabled:!a,children:[e.jsx("option",{value:"",children:"Select shift"}),h.map(U=>e.jsxs("option",{value:U.id,children:[U.shiftname," (",U.shifttimemode,") ",In(U.shift_checkin)," - ",In(U.shift_checkout)]},U.id))]})]}),a&&e.jsx("button",{className:"h-10 px-4 rounded bg-blue-600 text-white disabled:opacity-60",disabled:W||!L,onClick:I,children:W?"Assigning":"Assign To All"})]})]})}),y?e.jsx("div",{className:"text-gray-500",children:"Loading"}):e.jsx("div",{className:"bg-white rounded-lg shadow",children:(O||[]).map(U=>{const G=bs(U.surname,U.firstname,U.middlename,U.extension),$=!!d[U.objid],X=u[U.objid]||[],Q=X.filter(V=>Number(V.is_used)===1),Ne=Q.length>0?Q:X;return e.jsxs("div",{className:"border-b",children:[e.jsxs("div",{className:"sticky top-0 bg-gray-50 px-4 py-3 flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>M(U),className:"inline-flex items-center justify-center w-6 h-6 border rounded-full text-sm text-gray-600 hover:bg-gray-100","aria-label":$?"Collapse details":"Expand details",children:$?"-":"+"}),e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center text-xs font-semibold text-gray-600",children:Al(U.photo_path)?e.jsx("img",{src:Al(U.photo_path),alt:"",className:"w-full h-full object-cover"}):e.jsx("span",{children:th(U.surname,U.firstname)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:G}),Ne.length>0&&e.jsxs("div",{className:"mt-0.5 flex items-center gap-2 flex-wrap text-xs",children:[e.jsx("span",{className:"text-green-700 font-semibold",children:"Active:"}),Ne.map(V=>e.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full border ${Number(V.is_used)===1?"border-green-300 text-green-800 bg-green-50":"border-red-300 text-red-600 bg-red-50"}`,children:[V.shiftname," (",V.shifttimemode,") ",In(V.shift_checkin)," - ",In(V.shift_checkout)]},V.objid))]})]}),a&&e.jsx("button",{className:"ml-2 inline-flex items-center px-3 py-1.5 rounded bg-blue-600 text-white text-sm font-medium hover:bg-blue-700",title:"Assign Shift",onClick:()=>K(U),children:"Assign Shift"})]}),$&&e.jsx("div",{className:"px-4 py-3 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Shift Name"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Period"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Check-in"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Check-out"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"In-Used"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Assigned By"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:X.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-3 py-4 text-center text-gray-500",children:"No assignments"})}):X.map(V=>{var re,ne,xe,me;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:V.shiftname}),e.jsx("td",{className:"px-3 py-2",children:V.shifttimemode}),e.jsx("td",{className:"px-3 py-2",children:In(V.shift_checkin)}),e.jsx("td",{className:"px-3 py-2",children:In(V.shift_checkout)}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex rounded-full border overflow-hidden text-xs",children:[e.jsx("button",{className:`px-3 py-1 ${Number(V.is_used)===1?"bg-green-600 text-white":"bg-white text-gray-700"} disabled:opacity-60`,onClick:()=>{Number(V.is_used)!==1&&l&&B(U,V)},disabled:!!E[V.objid]||!l,children:"Yes"}),e.jsx("button",{className:`px-3 py-1 border-l ${Number(V.is_used)===0?"bg-gray-600 text-white":"bg-white text-gray-700"} disabled:opacity-60`,onClick:()=>{Number(V.is_used)!==0&&l&&B(U,V)},disabled:!!E[V.objid]||!l,children:"No"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("div",{className:"w-7 h-7 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center text-[10px] font-semibold text-gray-600 cursor-pointer",title:V.createdby_employee_name||V.createdby_username||"Unknown user",children:Al(V.createdby_photo_path)?e.jsx("img",{src:Al(V.createdby_photo_path),alt:"",className:"w-full h-full object-cover"}):e.jsx("span",{children:th(((ne=(re=V.createdby_employee_name)==null?void 0:re.split(","))==null?void 0:ne[0])||"",((me=(xe=V.createdby_employee_name)==null?void 0:xe.split(","))==null?void 0:me[1])||"")})})}),e.jsxs("td",{className:"px-3 py-2",children:[l&&e.jsx("button",{className:"inline-flex items-center justify-center rounded-full text-blue-600 hover:text-blue-800 transition-colors",onClick:()=>z(U,V),title:"Edit",children:""}),i&&e.jsx("button",{className:"ml-1 inline-flex items-center justify-center rounded-full text-red-600 hover:text-red-800 transition-colors",onClick:()=>R(U,V),title:"Delete",children:""})]})]},V.objid)})})]})})]},U.objid)})}),N&&w&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:S?"Edit Assignment":"Assign Shift"}),e.jsx("button",{className:"text-gray-500",onClick:()=>b(!1),children:""})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center text-sm font-semibold text-gray-600",children:Al(w.photo_path)?e.jsx("img",{src:Al(w.photo_path),alt:"",className:"w-full h-full object-cover"}):e.jsx("span",{children:th(w.surname,w.firstname)})}),e.jsx("div",{className:"font-medium",children:bs(w.surname,w.firstname,w.middlename,w.extension)})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:S?e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Shift"}),e.jsxs("select",{className:"mt-1 w-full border rounded px-3 py-2",value:q.shiftid,onChange:U=>J(G=>({...G,shiftid:U.target.value})),children:[e.jsx("option",{value:"",children:"Select a shift"}),h.map(U=>e.jsxs("option",{value:U.id,children:[U.shiftname," (",U.shifttimemode,") ",In(U.shift_checkin)," - ",In(U.shift_checkout)]},U.id))]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Select Shifts"}),e.jsx("div",{className:"mt-2 max-h-64 overflow-auto border rounded p-2",children:h.map(U=>{const $=new Set((u[w==null?void 0:w.objid]||[]).map(Q=>String(Q.shiftid))).has(String(U.id)),X=(q.shiftids||[]).includes(String(U.id));return e.jsxs("label",{className:`flex items-center gap-2 py-1 ${$?"opacity-60 cursor-not-allowed":"cursor-pointer"}`,children:[e.jsx("input",{type:"checkbox",checked:X,disabled:$,onChange:Q=>{J(Ne=>{const V=new Set(Ne.shiftids||[]);return Q.target.checked?V.add(String(U.id)):V.delete(String(U.id)),{...Ne,shiftids:Array.from(V)}})}}),e.jsxs("span",{className:"text-sm",children:[U.shiftname," (",U.shifttimemode,") ",In(U.shift_checkin)," - ",In(U.shift_checkout),$?" (Already assigned)":""]})]},U.id)})})]})}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{className:"px-4 py-2 rounded border",onClick:()=>b(!1),children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-60",disabled:T,onClick:P,children:T?"Saving":"Save"})]})]})})]}):e.jsx("div",{className:"bg-white border border-dashed rounded-lg p-8 text-center text-gray-500",children:"You do not have permission to view or assign shifts."})},r7=({canViewShifts:t,canAssignShift:s,initialTab:r="shifts"})=>{const{can:n,loading:a}=Vs(),l="dtr-shifts",i="dtr-assign-shift",o=n(l,"read"),c=n(l,"create"),d=n(l,"update"),m=n(l,"delete"),u=n(l,"print"),p=typeof t=="boolean"?t:o,g=typeof s=="boolean"?s:n(i,"read"),[j,y]=x.useState([]),[v,h]=x.useState(!0),[f,N]=x.useState(""),[b,w]=x.useState(!1),[D,S]=x.useState(null),[C,T]=x.useState(!1),[_,E]=x.useState({shiftname:"",shifttimemode:"AM"}),A=x.useCallback(()=>r==="assign"&&g?"assign":r==="shifts"&&p||p?"shifts":g?"assign":"shifts",[r,g,p]),[L,F]=x.useState(()=>A());x.useEffect(()=>{const G=A();F($=>$===G?$:G)},[A]);const W=G=>{if(!G)return"";const $=String(G);return $.length>=5?$.slice(0,5):$},Y=({name:G,value:$,onChange:X})=>{const Q=W($),[Ne,V]=Q?Q.split(":"):["",""],re=Array.from({length:24},(Z,ee)=>String(ee).padStart(2,"0")),ne=Array.from({length:60},(Z,ee)=>String(ee).padStart(2,"0")),xe=Z=>X({target:{name:G,value:`${Z.target.value||"00"}:${V||"00"}`}}),me=Z=>X({target:{name:G,value:`${Ne||"00"}:${Z.target.value||"00"}`}});return e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"mt-1 w-full border rounded px-3 py-2",value:Ne,onChange:xe,"aria-label":`${G}-hours`,children:[e.jsx("option",{value:"",children:"HH"}),re.map(Z=>e.jsx("option",{value:Z,children:Z},Z))]}),e.jsx("span",{className:"self-center text-gray-500",children:":"}),e.jsxs("select",{className:"mt-1 w-full border rounded px-3 py-2",value:V,onChange:me,"aria-label":`${G}-minutes`,children:[e.jsx("option",{value:"",children:"MM"}),ne.map(Z=>e.jsx("option",{value:Z,children:Z},Z))]})]})},q=x.useCallback(async()=>{var G;if(p){h(!0);try{const $=await oe.get("/dtr-shifts");y(((G=$.data)==null?void 0:G.data)||[])}catch($){console.error($)}finally{h(!1)}}},[p]);x.useEffect(()=>{p?q():(y([]),h(!1))},[p,q]);const J=x.useMemo(()=>(j||[]).filter(G=>(G.shiftname||"").toLowerCase().includes((f||"").toLowerCase())),[j,f]),O=()=>{if(!c){alert("You do not have permission to create shifts.");return}S(null),E({shiftname:"",shifttimemode:"AM",shift_checkin:"08:00",shift_checkin_start:"",shift_checkin_end:"",shift_checkout:"",shift_checkout_start:"",shift_checkout_end:"",is_ot:!1,credits:""}),w(!0)},M=G=>{if(!d){alert("You do not have permission to update shifts.");return}S(G),E({...G,shift_checkin:W(G.shift_checkin),shift_checkin_start:W(G.shift_checkin_start),shift_checkin_end:W(G.shift_checkin_end),shift_checkout:W(G.shift_checkout),shift_checkout_start:W(G.shift_checkout_start),shift_checkout_end:W(G.shift_checkout_end)}),w(!0)},k=G=>E($=>({...$,[G.target.name]:G.target.value})),I=G=>E($=>({...$,[G.target.name]:W(G.target.value)})),K=async()=>{var G;if(D&&!d){alert("You do not have permission to update shifts.");return}if(!D&&!c){alert("You do not have permission to create shifts.");return}if(!((G=_.shiftname)!=null&&G.trim())){alert("Shift Name is required");return}T(!0);try{const $=String(_.shifttimemode||"AM").toUpperCase(),Q={..._,shifttimemode:["AM","PM","AMPM"].includes($)?$:"AM"};D?await oe.put(`/dtr-shifts/${D.id}`,Q):await oe.post("/dtr-shifts",Q),w(!1),q()}catch($){console.error("Save shift error",$),alert("Failed to save shift")}finally{T(!1)}},z=async G=>{if(!m){alert("You do not have permission to delete shifts.");return}if(confirm("Delete this shift?"))try{await oe.delete(`/dtr-shifts/${G.id}`),q()}catch($){console.error($),alert("Delete failed")}},P=G=>{if(!G)return"";const $=String(G);return $.length>=5?$.slice(0,5):$},R=G=>`px-4 py-2 text-sm font-semibold border-b-2 transition-colors duration-150 ${L===G?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,B=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"DTR Shifts"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{value:f,onChange:G=>N(G.target.value),placeholder:"Search shift name",className:"px-3 py-2 border rounded text-sm",disabled:!p}),c&&e.jsx("button",{className:"px-3 py-2 bg-blue-600 text-white rounded",onClick:O,children:"+ Add Shift"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Shift Name"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Mode"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Check-in"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Check-in Start"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Check-in End"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Check-out"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Check-out Start"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Check-out End"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"OT"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Credits"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v?e.jsx("tr",{children:e.jsx("td",{colSpan:11,className:"px-4 py-8 text-center text-gray-500",children:"Loading"})}):J.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:11,className:"px-4 py-8 text-center text-gray-500",children:"No records"})}):J.map(G=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:G.shiftname}),e.jsx("td",{className:"px-4 py-2",children:G.shifttimemode}),e.jsx("td",{className:"px-4 py-2",children:P(G.shift_checkin)}),e.jsx("td",{className:"px-4 py-2",children:P(G.shift_checkin_start)}),e.jsx("td",{className:"px-4 py-2",children:P(G.shift_checkin_end)}),e.jsx("td",{className:"px-4 py-2",children:P(G.shift_checkout)}),e.jsx("td",{className:"px-4 py-2",children:P(G.shift_checkout_start)}),e.jsx("td",{className:"px-4 py-2",children:P(G.shift_checkout_end)}),e.jsx("td",{className:"px-4 py-2",children:G.is_ot?"Yes":"No"}),e.jsx("td",{className:"px-4 py-2",children:G.credits!=null&&G.credits!==""?Number(G.credits).toFixed(1):""}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[d&&e.jsx("button",{onClick:()=>M(G),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit Shift",children:""}),u&&e.jsx("button",{onClick:()=>{console.log("Print shift:",G)},className:"text-green-600 hover:text-green-800 transition-colors",title:"Print Shift",children:""}),m&&e.jsx("button",{onClick:()=>z(G),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete Shift",children:""}),!d&&!u&&!m&&e.jsx("span",{className:"text-xs text-gray-400",children:"No actions available"})]})})]},G.id))})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-3xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:D?"Edit Shift":"Add Shift"}),e.jsx("button",{className:"text-gray-500",onClick:()=>w(!1),children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Shift Name"}),e.jsx("input",{name:"shiftname",className:"mt-1 w-full border rounded px-3 py-2",value:_.shiftname||"",onChange:k})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Mode (AM/PM)"}),e.jsxs("select",{name:"shifttimemode",className:"mt-1 w-full border rounded px-3 py-2",value:_.shifttimemode||"AM",onChange:k,children:[e.jsx("option",{value:"AM",children:"AM"}),e.jsx("option",{value:"PM",children:"PM"}),e.jsx("option",{value:"AMPM",children:"AMPM"})]})]}),e.jsxs("div",{className:"md:col-span-3 bg-gray-50 border rounded p-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Check-in Window"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Check-in"}),e.jsx(Y,{name:"shift_checkin",value:_.shift_checkin,onChange:I})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Check-in Start"}),e.jsx(Y,{name:"shift_checkin_start",value:_.shift_checkin_start,onChange:I})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Check-in End"}),e.jsx(Y,{name:"shift_checkin_end",value:_.shift_checkin_end,onChange:I})]})]})]}),e.jsxs("div",{className:"md:col-span-3 bg-gray-50 border rounded p-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Check-out Window"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Check-out"}),e.jsx(Y,{name:"shift_checkout",value:_.shift_checkout,onChange:I})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Check-out Start"}),e.jsx(Y,{name:"shift_checkout_start",value:_.shift_checkout_start,onChange:I})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Check-out End"}),e.jsx(Y,{name:"shift_checkout_end",value:_.shift_checkout_end,onChange:I})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Is OT"}),e.jsx("input",{type:"checkbox",name:"is_ot",className:"mt-2",checked:!!_.is_ot,onChange:G=>E($=>({...$,is_ot:G.target.checked}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Credits"}),e.jsx("input",{type:"number",step:"0.1",min:"0",name:"credits",className:"mt-1 w-full border rounded px-3 py-2",value:_.credits||"",onChange:k})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{className:"px-4 py-2 rounded border",onClick:()=>w(!1),children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-60",onClick:K,disabled:C,children:C?"Saving":"Save"})]})]})})]}),U=p||g;return e.jsxs("div",{className:"p-6",children:[U&&e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"flex flex-wrap gap-4",children:[p&&e.jsx("button",{type:"button",className:R("shifts"),onClick:()=>F("shifts"),children:"Shifts"}),g&&e.jsx("button",{type:"button",className:R("assign"),onClick:()=>F("assign"),children:"Assign Shift"})]})}),a&&e.jsx("div",{className:"bg-white border border-dashed rounded-lg p-8 text-center text-gray-500",children:"Loading permissions..."}),!a&&L==="shifts"&&p&&B(),!a&&L==="assign"&&g&&e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsx(s7,{})}),!a&&!U&&e.jsx("div",{className:"bg-white border border-dashed rounded-lg p-8 text-center text-gray-500",children:"You do not have access to view or assign shifts."})]})},n7=({status:t})=>{const s=t===1?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",r=t===1?"Active":"Inactive";return e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${s}`,children:r})},a7=({isRecurring:t})=>{const s=t?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800",r=t?"Yes":"No";return e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${s}`,children:r})},l7=({isOpen:t,onClose:s,onSaved:r,initial:n,canCreate:a,canUpdate:l})=>{const[i,o]=x.useState(!1),[c,d]=x.useState([]),[m,u]=x.useState({holidayname:"",holidaycategory:"Local",holidaytype:"",holidaydesc:"",holidaydate:"",isrecurring:!1,status:1});x.useEffect(()=>{t&&((async()=>{var y;try{const v=await oe.get("/dtr-holidays/types");d(((y=v.data)==null?void 0:y.data)||[])}catch(v){console.error("Failed to load holiday types",v)}})(),u(n?{holidayname:n.holidayname||"",holidaycategory:n.holidaycategory||"Local",holidaytype:n.holidaytype||"",holidaydesc:n.holidaydesc||"",holidaydate:n.holidaydate?String(n.holidaydate).slice(0,10):"",isrecurring:n.isrecurring===1,status:n.status!==void 0?n.status:1}:{holidayname:"",holidaycategory:"Local",holidaytype:"",holidaydesc:"",holidaydate:"",isrecurring:!1,status:1}))},[t,n]);const p=j=>{j.target.type==="checkbox"?u(y=>({...y,[j.target.name]:j.target.checked})):u(y=>({...y,[j.target.name]:j.target.value}))},g=async()=>{var j;if(n!=null&&n.id&&!l){alert("You do not have permission to update holidays.");return}if(!(n!=null&&n.id)&&!a){alert("You do not have permission to create holidays.");return}if(!((j=m.holidayname)!=null&&j.trim())){alert("Holiday name is required");return}if(!m.holidaycategory){alert("Category is required");return}if(!m.holidaytype){alert("Holiday type is required");return}if(!m.holidaydate){alert("Holiday date is required");return}o(!0);try{const y={...m,isrecurring:m.isrecurring?1:0,status:m.status?1:0};n!=null&&n.id?await oe.put(`/dtr-holidays/${n.id}`,y):await oe.post("/dtr-holidays",y),r==null||r(),s()}catch(y){console.error("Failed to save holiday",y),alert("Failed to save holiday")}finally{o(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:n!=null&&n.id?"Edit Holiday":"Add Holiday"}),e.jsx("button",{className:"text-gray-500",onClick:s,children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Holiday Name"}),e.jsx("input",{name:"holidayname",className:"mt-1 w-full border rounded px-3 py-2",value:m.holidayname,onChange:p})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Category"}),e.jsxs("select",{name:"holidaycategory",className:"mt-1 w-full border rounded px-3 py-2",value:m.holidaycategory,onChange:p,children:[e.jsx("option",{value:"Local",children:"Local"}),e.jsx("option",{value:"National",children:"National"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Holiday Type"}),e.jsxs("select",{name:"holidaytype",className:"mt-1 w-full border rounded px-3 py-2",value:m.holidaytype,onChange:p,children:[e.jsx("option",{value:"",children:"Select type..."}),c.map(j=>e.jsx("option",{value:j.id,children:j.typesname},j.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Holiday Date"}),e.jsx("input",{name:"holidaydate",type:"date",className:"mt-1 w-full border rounded px-3 py-2",value:m.holidaydate,onChange:p})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Description"}),e.jsx("textarea",{name:"holidaydesc",className:"mt-1 w-full border rounded px-3 py-2",rows:3,value:m.holidaydesc,onChange:p})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Is Recurring"}),e.jsx("input",{type:"checkbox",name:"isrecurring",className:"mt-2",checked:m.isrecurring,onChange:p})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Status"}),e.jsxs("select",{name:"status",className:"mt-1 w-full border rounded px-3 py-2",value:m.status,onChange:p,children:[e.jsx("option",{value:1,children:"Active"}),e.jsx("option",{value:0,children:"Inactive"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{className:"px-4 py-2 rounded border",onClick:s,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-60",onClick:g,disabled:i,children:i?"Saving":"Save"})]})]})}):null},i7=({isOpen:t,onClose:s,onSaved:r,initial:n,canCreate:a,canUpdate:l})=>{const[i,o]=x.useState(!1),[c,d]=x.useState({typesname:""});x.useEffect(()=>{t&&d(n?{typesname:n.typesname||""}:{typesname:""})},[t,n]);const m=p=>d(g=>({...g,[p.target.name]:p.target.value})),u=async()=>{var p;if(n!=null&&n.id&&!l){alert("You do not have permission to update holiday types.");return}if(!(n!=null&&n.id)&&!a){alert("You do not have permission to create holiday types.");return}if(!((p=c.typesname)!=null&&p.trim())){alert("Type name is required");return}o(!0);try{n!=null&&n.id?await oe.put(`/dtr-holidays/types/${n.id}`,c):await oe.post("/dtr-holidays/types",c),r==null||r(),s()}catch(g){console.error("Failed to save holiday type",g),alert("Failed to save holiday type")}finally{o(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:n!=null&&n.id?"Edit Holiday Type":"Add Holiday Type"}),e.jsx("button",{className:"text-gray-500",onClick:s,children:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Type Name"}),e.jsx("input",{name:"typesname",className:"mt-1 w-full border rounded px-3 py-2",value:c.typesname,onChange:m})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{className:"px-4 py-2 rounded border",onClick:s,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-60",onClick:u,disabled:i,children:i?"Saving":"Save"})]})]})}):null},o7=()=>{const{can:t,loading:s}=Vs(),r="dtr-holidays",n=t(r,"read"),a=t(r,"create"),l=t(r,"update"),i=t(r,"delete"),[o,c]=x.useState("holidays"),[d,m]=x.useState([]),[u,p]=x.useState([]),[g,j]=x.useState(!0),[y,v]=x.useState(""),[h,f]=x.useState(!1),[N,b]=x.useState(!1),[w,D]=x.useState(null),[S,C]=x.useState(null),T=async()=>{var M;if(n)try{const k=await oe.get("/dtr-holidays");m(((M=k.data)==null?void 0:M.data)||[])}catch(k){console.error("Failed to load holidays",k)}},_=async()=>{var M;if(n)try{const k=await oe.get("/dtr-holidays/types");p(((M=k.data)==null?void 0:M.data)||[])}catch(k){console.error("Failed to load holiday types",k)}};x.useEffect(()=>{if(!n||s)return;(async()=>{j(!0),await Promise.all([T(),_()]),j(!1)})()},[n,s]);const E=x.useMemo(()=>{const M=(y||"").toLowerCase();return(d||[]).filter(k=>{const I=(k.holidayname||"").toLowerCase(),K=(k.holidaycategory||"").toLowerCase(),z=(k.holiday_type_name||"").toLowerCase();return I.includes(M)||K.includes(M)||z.includes(M)})},[d,y]),A=x.useMemo(()=>{const M=(y||"").toLowerCase();return(u||[]).filter(k=>(k.typesname||"").toLowerCase().includes(M))},[u,y]),L=()=>{if(!a){alert("You do not have permission to create holidays.");return}D(null),f(!0)},F=M=>{if(!l){alert("You do not have permission to update holidays.");return}D(M),f(!0)},W=()=>{if(!a){alert("You do not have permission to create holiday types.");return}C(null),b(!0)},Y=M=>{if(!l){alert("You do not have permission to update holiday types.");return}C(M),b(!0)},q=async M=>{if(!i){alert("You do not have permission to delete holidays.");return}if(confirm("Delete this holiday?"))try{await oe.delete(`/dtr-holidays/${M.id}`),T()}catch(k){console.error("Failed to delete holiday",k),alert("Failed to delete holiday")}},J=async M=>{var k,I;if(!i){alert("You do not have permission to delete holiday types.");return}if(confirm("Delete this holiday type?"))try{await oe.delete(`/dtr-holidays/types/${M.id}`),_()}catch(K){console.error("Failed to delete holiday type",K),alert(((I=(k=K==null?void 0:K.response)==null?void 0:k.data)==null?void 0:I.message)||"Failed to delete holiday type")}},O=M=>{if(!M)return"";try{const k=new Date(M);if(isNaN(k.getTime()))return M;const I=String(k.getMonth()+1).padStart(2,"0"),K=String(k.getDate()).padStart(2,"0"),z=k.getFullYear();return`${I}/${K}/${z}`}catch{return M}};return s?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 text-gray-600",children:"Loading permissions"})}):n?e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsx("div",{className:"px-6",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>c("holidays"),className:`py-4 px-1 border-b-2 font-medium text-sm ${o==="holidays"?"border-blue-600 text-blue-700":"border-transparent text-gray-500"}`,children:"Holidays"}),e.jsx("button",{onClick:()=>c("types"),className:`py-4 px-1 border-b-2 font-medium text-sm ${o==="types"?"border-blue-600 text-blue-700":"border-transparent text-gray-500"}`,children:"Holiday Types"})]})})}),o==="holidays"&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4 flex items-end gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Search holiday"}),e.jsx("input",{className:"w-full px-3 py-2 border rounded text-sm",value:y,onChange:M=>v(M.target.value),placeholder:"Search by name, category, or type..."})]}),a?e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:L,children:"+ Add Holiday"}):e.jsx("span",{className:"text-xs text-gray-400 italic pb-2",children:"No create permission"})]}),g?e.jsx("div",{className:"text-center py-10",children:"Loading"}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Holiday Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Recurring"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Created By"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-4 py-8 text-center text-gray-500",children:"No holidays found"})}):E.map(M=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:M.holidayname}),e.jsx("td",{className:"px-4 py-2",children:M.holidaycategory}),e.jsx("td",{className:"px-4 py-2",children:M.holiday_type_name||""}),e.jsx("td",{className:"px-4 py-2",children:M.holidaydate?O(M.holidaydate):""}),e.jsx("td",{className:"px-4 py-2",children:M.holidaydesc||""}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(a7,{isRecurring:M.isrecurring===1})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(n7,{status:M.status})}),e.jsx("td",{className:"px-4 py-2",children:M.createdby_photo?e.jsx("img",{src:M.createdby_photo,alt:"creator",className:"w-8 h-8 rounded-full object-cover mx-auto cursor-pointer",title:M.createdby_employee_name||M.createdby_username||"Unknown user"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 mx-auto cursor-pointer",title:M.createdby_employee_name||M.createdby_username||"Unknown user"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[l&&e.jsx("button",{className:"text-blue-600 hover:text-blue-800 transition-colors",onClick:()=>F(M),title:"Edit Holiday",children:""}),i&&e.jsx("button",{className:"text-red-600 hover:text-red-800 transition-colors",onClick:()=>q(M),title:"Delete Holiday",children:""}),!l&&!i&&e.jsx("span",{className:"text-xs text-gray-400 italic",children:"No actions"})]})})]},M.id))})]})})]}),o==="types"&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4 flex items-end gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Search type"}),e.jsx("input",{className:"w-full px-3 py-2 border rounded text-sm",value:y,onChange:M=>v(M.target.value),placeholder:"Search by type name..."})]}),a?e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:W,children:"+ Add Holiday Type"}):e.jsx("span",{className:"text-xs text-gray-400 italic pb-2",children:"No create permission"})]}),g?e.jsx("div",{className:"text-center py-10",children:"Loading"}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-gray-500",children:"No holiday types found"})}):A.map(M=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:M.id}),e.jsx("td",{className:"px-4 py-2",children:M.typesname}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[l&&e.jsx("button",{className:"text-blue-600 hover:text-blue-800 transition-colors",onClick:()=>Y(M),title:"Edit Holiday Type",children:""}),i&&e.jsx("button",{className:"text-red-600 hover:text-red-800 transition-colors",onClick:()=>J(M),title:"Delete Holiday Type",children:""}),!l&&!i&&e.jsx("span",{className:"text-xs text-gray-400 italic",children:"No actions"})]})})]},M.id))})]})})]}),e.jsx(l7,{isOpen:h,onClose:()=>f(!1),onSaved:T,initial:w,canCreate:a,canUpdate:l}),e.jsx(i7,{isOpen:N,onClose:()=>b(!1),onSaved:_,initial:S,canCreate:a,canUpdate:l})]}):e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 text-gray-600",children:"You do not have permission to view holidays."})})},c7=t=>t.split(/\n|,/).map(s=>s.trim()).filter(Boolean),hl=t=>{var s;return!(t instanceof Date)||Number.isNaN((s=t==null?void 0:t.getTime)==null?void 0:s.call(t))?null:new Date(t.getFullYear(),t.getMonth(),t.getDate())},Dl=t=>{const s=hl(t);if(!s)return"";const r=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),a=String(s.getDate()).padStart(2,"0");return`${r}-${n}-${a}`},sh=t=>{const s=hl(t);if(!s)return"";const r=String(s.getMonth()+1).padStart(2,"0"),n=String(s.getDate()).padStart(2,"0"),a=s.getFullYear();return`${r}/${n}/${a}`},d7=t=>{if(!t)return null;if(typeof t=="string"){const s=t.split("-").map(n=>Number(n));if(s.length===3&&s.every(n=>!Number.isNaN(n))){const[n,a,l]=s;return hl(new Date(n,a-1,l))}const r=new Date(t);return Number.isNaN(r.getTime())?null:hl(r)}return t instanceof Date?hl(t):null},ob=({photo:t,name:s})=>{if(t)return e.jsx("img",{src:t,alt:s||"Employee",className:"w-10 h-10 rounded-full object-cover border"});const r=s?s.split(" ").map(n=>n[0]).join("").slice(0,2).toUpperCase():"NA";return e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-sm font-semibold text-gray-600 border",children:r})},Tl=({photo:t,name:s})=>{const r=(s||"NA").split(" ").map(a=>a[0]).join("").slice(0,2).toUpperCase(),n=!!t&&(t.startsWith("data:")||t.startsWith("http"));return e.jsxs("div",{className:"relative group",title:s||"N/A",children:[n&&e.jsx("img",{src:t,alt:s||"Person",className:"w-8 h-8 rounded-full object-cover border-2 border-gray-200 hover:border-blue-400",onError:a=>{a.target.style.display="none";const l=a.target.nextElementSibling;l&&(l.style.display="flex")}}),e.jsx("div",{className:`w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-xs text-gray-600 border-2 border-gray-200 hover:border-blue-400 ${n?"hidden":""}`,children:r}),e.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-10",children:s||"N/A"})]})},cb=t=>{switch((t||"").toUpperCase()){case"APPROVED":return"bg-green-100 text-green-700";case"RETURNED":return"bg-yellow-100 text-yellow-700";case"CANCELLED":return"bg-red-100 text-red-700";case"FOR APPROVAL":default:return"bg-blue-100 text-blue-700"}},db=t=>(t||"").toUpperCase()==="FOR APPROVAL",Ml=t=>{if(!t)return!1;if(t.isExpired)return!0;if(!t.expirydate)return!1;const s=new Date(t.expirydate).getTime();return Number.isNaN(s)?!1:Date.now()>s},ub={emp_objid:"",cdotitle:"",cdopurpose:"",cdodescription:"",cdoremarks:"",earnedcredit:1,workdatesInput:""},mb={cdo_id:"",reason:"",cdodateremarks:"",cdodatesInput:""},u7=()=>{const{can:t,loading:s}=Vs(),r="dtr-cdo",n=x.useMemo(()=>({read:t(r,"read"),create:t(r,"create"),update:t(r,"update"),delete:t(r,"delete"),print:t(r,"print"),approve:t(r,"approve"),return:t(r,"return"),cancel:t(r,"cancel")}),[t]),{read:a,create:l,update:i,delete:o,print:c,approve:d,return:m,cancel:u}=n,[p,g]=x.useState("transactions"),[j,y]=x.useState(!1),[v,h]=x.useState([]),[f,N]=x.useState(""),[b,w]=x.useState(""),[D,S]=x.useState(!1),[C,T]=x.useState(null),[_,E]=x.useState(ub),[A,L]=x.useState(!1),[F,W]=x.useState(null),[Y,q]=x.useState(mb),[J,O]=x.useState([]),[M,k]=x.useState([]),[I,K]=x.useState(!1),[z,P]=x.useState(""),[R,B]=x.useState(!1),[U,G]=x.useState(null),[$,X]=x.useState(!1),[Q,Ne]=x.useState({}),[V,re]=x.useState(!1),[ne,xe]=x.useState(null),[me,Z]=x.useState([]),[ee,ye]=x.useState(""),[ve,ue]=x.useState(!1),[we,De]=x.useState({open:!1,action:null,record:null}),[le,Ie]=x.useState(""),ge=x.useMemo(()=>({loadCdo:async(be=0)=>{var nt;y(!0);try{const tt=await oe.get("/dtr/employee-cdo/transactions");h(Array.isArray((nt=tt.data)==null?void 0:nt.data)?tt.data.data:[])}catch(tt){console.error("Failed to load CDO records:",tt),tt.code==="ECONNABORTED"&&be<1?setTimeout(()=>ge.loadCdo(be+1),1e3):h([])}finally{y(!1)}}}),[]);x.useEffect(()=>{!s&&a&&ge.loadCdo()},[ge,s,a]);const Ge=async()=>{var be,nt,tt;if(!I){K(!0);try{const ft=await oe.get("/201-employees"),_t=(Array.isArray((be=ft.data)==null?void 0:be.data)&&ft.data.data||Array.isArray((nt=ft.data)==null?void 0:nt.rows)&&ft.data.rows||Array.isArray((tt=ft.data)==null?void 0:tt.result)&&ft.data.result||Array.isArray(ft.data)&&ft.data||[]).map(cs=>{const as=ke(cs);return as?{...as,raw:cs}:null}).filter(Boolean).sort((cs,as)=>cs.name.localeCompare(as.name));k(_t),X(!0)}catch(ft){console.error("Failed to load employees:",ft),k([])}finally{K(!1)}}},ke=be=>{if(!be)return null;const nt=String(be.objid||be.OBJID||be.emp_objid||be.EMP_OBJID||"").trim(),tt=String(be.badge||be.badgenumber||be.BADGENUMBER||be.badge_number||"").trim(),ft=(be.surname||be.SURNAME||be.lastName||"").trim(),kt=(be.firstname||be.FIRSTNAME||be.firstName||"").trim(),_t=(be.middlename||be.MIDDLENAME||be.middleName||"").trim(),cs=(be.extension||be.EXTENSION||be.nameExtension||"").trim(),We=(ft&&kt?bs(ft,kt,_t,cs):(be.name||be.NAME||be.fullname||be.FULLNAME||"").trim())||ft||kt||nt||tt||"Employee",ct=be.position||be.POSITION||be.jobtitle||be.JOBTITLE||"",Ye=be.department||be.DEPARTMENT||be.office||be.OFFICE||"",te=be.photo||be.photo_path||be.PHOTO||be.PHOTO_PATH||be.profilephoto||"",Me=[ft,kt,_t,cs,tt,nt,be.fullname||be.FULLNAME||"",be.name||be.NAME||""].filter(Boolean).join(" ").toLowerCase().replace(/\s+/g," ").trim();return{objid:nt,badge:tt,name:We,position:ct,department:Ye,photo:te,searchKey:Me}},Re=(be=null)=>{if(be){if(!i){alert("You do not have permission to update CDO records.");return}}else if(!l){alert("You do not have permission to create CDO records.");return}if($||Ge(),T(be),be){const tt=(Array.isArray(be.workdates)?be.workdates:[]).map(d7).filter(Boolean);tt.sort((kt,_t)=>kt.getTime()-_t.getTime()),O(tt),E({emp_objid:be.emp_objid||"",cdotitle:be.cdotitle||"",cdopurpose:be.cdopurpose||"",cdodescription:be.cdodescription||"",cdoremarks:be.cdoremarks||""});const ft=ke({objid:be.emp_objid,OBJID:be.emp_objid,badge:be.badgenumber,BADGENUMBER:be.badgenumber,name:be.employeeName,NAME:be.employeeName,position:be.position,POSITION:be.position,department:be.department,DEPARTMENT:be.department,photo:be.employeePhoto,PHOTO:be.employeePhoto});P((ft==null?void 0:ft.name)||""),G(ft?{...ft,raw:be}:null)}else O([]),E(ub),P(""),G(null);S(!0)},Ke=(be=null)=>{if(be){if(!i){alert("You do not have permission to update consume records.");return}}else if(!l){alert("You do not have permission to create consume records.");return}W(be),q(be?{cdo_id:be.cdo_id||"",reason:be.reason||"",cdodateremarks:be.cdodateremarks||"",cdodatesInput:be.cdodate||""}:mb),L(!0)},Xe=()=>{S(!1),T(null),O([]),P(""),G(null),B(!1)},Se=()=>{L(!1),W(null)},lt=async be=>{var ft,kt;if(be.preventDefault(),C){if(!i){alert("You do not have permission to update CDO records.");return}}else if(!l){alert("You do not have permission to create CDO records.");return}if(!_.emp_objid){alert("Please select an employee.");return}const nt=Array.from(new Set(J.map(_t=>Dl(_t)).filter(Boolean))).sort();if(nt.length===0){alert("Please select at least one work date.");return}const tt={emp_objid:_.emp_objid,cdotitle:_.cdotitle,cdopurpose:_.cdopurpose,cdodescription:_.cdodescription,cdoremarks:_.cdoremarks,earnedcredit:nt.length,workdates:nt};try{C?(await oe.put(`/dtr/employee-cdo/transactions/${C.id}`,tt),alert("CDO record updated successfully")):(await oe.post("/dtr/employee-cdo/transactions",tt),alert("CDO record created successfully")),Xe(),O([]),ge.loadCdo()}catch(_t){console.error("Failed to save CDO record:",_t),alert(((kt=(ft=_t.response)==null?void 0:ft.data)==null?void 0:kt.message)||"Failed to save CDO record")}},it=async be=>{var tt,ft;if(be.preventDefault(),F){if(!i){alert("You do not have permission to update consume records.");return}}else if(!l){alert("You do not have permission to create consume records.");return}const nt={cdo_id:Y.cdo_id,reason:Y.reason,cdodateremarks:Y.cdodateremarks,cdodates:c7(Y.cdodatesInput)};try{F?(await oe.put(`/dtr/employee-cdo/usedates/${F.id}`,nt),alert("Used CDO record updated successfully")):(await oe.post("/dtr/employee-cdo/usedates",nt),alert("Used CDO record created successfully")),Se(),ge.loadCdo()}catch(kt){console.error("Failed to save used CDO record:",kt),alert(((ft=(tt=kt.response)==null?void 0:tt.data)==null?void 0:ft.message)||"Failed to save used CDO record")}},Pt=async(be,nt,tt)=>{var ft,kt;if(nt==="Approved"&&!d){alert("You do not have permission to approve CDO records.");return}if(nt==="Returned"&&!m){alert("You do not have permission to return CDO records.");return}if(nt==="Cancelled"&&!u){alert("You do not have permission to cancel CDO records.");return}try{await oe.put(`/dtr/employee-cdo/transactions/${be}/status`,{status:nt,remarks:tt}),ge.loadCdo()}catch(_t){console.error("Failed to update status:",_t),alert(((kt=(ft=_t.response)==null?void 0:ft.data)==null?void 0:kt.message)||"Failed to update status")}},Nt=async(be,nt)=>{var tt,ft;if(nt==="Approved"&&!d){alert("You do not have permission to approve consume records.");return}if(nt==="Returned"&&!m){alert("You do not have permission to return consume records.");return}if(nt==="Cancelled"&&!u){alert("You do not have permission to cancel consume records.");return}try{await oe.put(`/dtr/employee-cdo/usedates/${be}/status`,{status:nt}),ge.loadCdo()}catch(kt){console.error("Failed to update used status:",kt),alert(((ft=(tt=kt.response)==null?void 0:tt.data)==null?void 0:ft.message)||"Failed to update status")}},At=async be=>{var nt,tt;if(!o){alert("You do not have permission to delete consume records.");return}if(window.confirm("Delete this used CDO record?"))try{await oe.delete(`/dtr/employee-cdo/usedates/${be}`),ge.loadCdo()}catch(ft){console.error("Failed to delete used record:",ft),alert(((tt=(nt=ft.response)==null?void 0:nt.data)==null?void 0:tt.message)||"Failed to delete record")}},Ce=be=>{if(!c){alert("You do not have permission to print CDO records.");return}be!=null&&be.id&&window.open(`/api/dtr/employee-cdo/transactions/${be.id}`,"_blank","noopener")},Ze=async be=>{var nt,tt;if(!o){alert("You do not have permission to delete CDO records.");return}if(be!=null&&be.id&&window.confirm("Delete this CDO record?"))try{await oe.delete(`/dtr/employee-cdo/transactions/${be.id}`),ge.loadCdo()}catch(ft){console.error("Failed to delete CDO record:",ft),alert(((tt=(nt=ft.response)==null?void 0:nt.data)==null?void 0:tt.message)||"Failed to delete CDO record")}},fe=(be,nt)=>{if(be==="approve"&&!d){alert("You do not have permission to approve CDO records.");return}if(be==="return"&&!m){alert("You do not have permission to return CDO records.");return}if(be==="cancel"&&!u){alert("You do not have permission to cancel CDO records.");return}Ie((nt==null?void 0:nt.cdoremarks)||""),De({open:!0,action:be,record:nt})},Pe=()=>{De({open:!1,action:null,record:null}),Ie("")},Le=async()=>{const{action:be,record:nt}=we;if(!be||!(nt!=null&&nt.id))return;const ft={approve:"Approved",return:"Returned",cancel:"Cancelled"}[be];if(!ft){Pe();return}if(!le.trim()){alert("Please enter remarks before proceeding.");return}try{await Pt(nt.id,ft,le.trim()),Pe()}catch(kt){console.error("Failed to update CDO status:",kt)}},ut=be=>{Ne(nt=>({...nt,[be]:!nt[be]}))},Be=be=>{if(!l){alert("You do not have permission to consume CDO credits.");return}if(be){if(Ml(be)){alert("This CDO credit has expired and can no longer be used.");return}xe(be),Z([]),ye(""),re(!0)}},mt=()=>{re(!1),xe(null),Z([]),ye(""),ue(!1)},qe=be=>{const nt=Array.isArray(be)?be:be?[be]:[],tt=[],ft=new Set;nt.forEach(_t=>{const cs=hl(_t);if(cs){const as=cs.getTime();ft.has(as)||(ft.add(as),tt.push(cs))}}),tt.sort((_t,cs)=>_t.getTime()-cs.getTime());const kt=Qt;kt>0&&tt.length>kt&&tt.splice(kt),Z(tt)},Oe=be=>{Z(nt=>nt.filter(tt=>Dl(tt)!==be))},He=async be=>{var tt,ft;if(be.preventDefault(),!l){alert("You do not have permission to consume CDO credits.");return}if(!ne)return;if(Ml(ne)){alert("This CDO credit has expired and can no longer be used.");return}if(!me.length){alert("Please select at least one consume date.");return}if(!ee.trim()){alert("Please provide a reason for consuming credits.");return}if(me.length>Qt){alert(`Only ${Qt} credit(s) remain for this CDO.`);return}const nt=Array.from(new Set(me.map(kt=>Dl(kt))));if(!nt.length){alert("Invalid consume dates.");return}ue(!0);try{await oe.post(`/dtr/employee-cdo/transactions/${ne.id}/consume`,{dates:nt,reason:ee.trim()}),alert("Consume request recorded."),mt(),ge.loadCdo()}catch(kt){console.error("Failed to consume CDO credits:",kt),alert(((ft=(tt=kt.response)==null?void 0:tt.data)==null?void 0:ft.message)||"Failed to consume CDO credits")}finally{ue(!1)}},Kt=be=>{if(!c){alert("You do not have permission to print consume records.");return}be!=null&&be.id&&window.open(`/api/dtr/employee-cdo/usedates/${be.id}`,"_blank","noopener")},rs=be=>{const nt=(be||[]).map(tt=>hl(tt)).filter(Boolean);nt.sort((tt,ft)=>tt.getTime()-ft.getTime()),O(nt)},qt=be=>{O(nt=>nt.filter(tt=>Dl(tt)!==be))},zt=x.useMemo(()=>J.map(be=>{const nt=Dl(be);return nt?{value:nt,label:sh(be)}:null}).filter(Boolean),[J]),xs=x.useMemo(()=>{const be=Array.isArray(M)?M:[];if(!z)return be.slice(0,10);const nt=z.toLowerCase().trim();return nt?be.filter(tt=>{var ft;return(ft=tt.searchKey)==null?void 0:ft.includes(nt)}).slice(0,10):be.slice(0,10)},[z,M]);x.useEffect(()=>{if(!D||!_.emp_objid)return;const be=(M||[]).find(nt=>String(nt.objid)===String(_.emp_objid));be&&(G(be),P(be.name))},[D,_.emp_objid,M]);const ms=be=>{if(!be)return;const nt=ke(be.raw||be);nt&&(E(tt=>({...tt,emp_objid:nt.objid})),G({...nt,raw:be.raw||be}),P(nt.name),B(!1))},Ut=x.useMemo(()=>v.filter(be=>(be.cdostatus||"").toUpperCase()==="APPROVED"),[v]),$t=x.useMemo(()=>me.map(be=>({value:Dl(be),label:sh(be)})),[me]),Qt=x.useMemo(()=>{if(!ne)return 0;const be=Number(ne.earnedcredit)||0,nt=Number(ne.usedcredit)||0;return Ml(ne)?0:Math.max(be-nt,0)},[ne]),gs=x.useMemo(()=>Math.max(Qt-me.length,0),[Qt,me]),Yt=x.useMemo(()=>{let be=[...v];if(f.trim()){const nt=f.toLowerCase().trim();be=be.filter(tt=>(tt.employeeName||"").toLowerCase().includes(nt))}return b&&(be=be.filter(nt=>(nt.cdostatus||"For Approval").toUpperCase()===b.toUpperCase())),be},[v,f,b]),os=x.useMemo(()=>{let be=[...Ut];if(f.trim()){const nt=f.toLowerCase().trim();be=be.filter(tt=>(tt.employeeName||"").toLowerCase().includes(nt))}if(b){const nt=b.toUpperCase();be=be.map(tt=>{if(!tt.consumeEntries||!Array.isArray(tt.consumeEntries)||tt.consumeEntries.length===0)return nt==="APPROVED"?tt:null;const ft=tt.consumeEntries.filter(kt=>(kt.cdodatestatus||"For Approval").toUpperCase()===nt);return ft.length===0?null:{...tt,consumeEntries:ft}}).filter(Boolean)}return be},[Ut,f,b]),Zt=D&&(C&&i||!C&&l),Jt=A&&(F&&i||!F&&l),es=V&&l;return s?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center text-gray-600",children:"Loading permissions..."}):a?e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"bg-white border-b px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:"Compensating Day-Off (CDO)"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage CDO credits and usage submissions."})]}),e.jsx("div",{className:"flex space-x-3",children:p==="transactions"&&l&&e.jsx("button",{type:"button",onClick:()=>Re(),className:"inline-flex items-center px-4 py-2 rounded-md bg-blue-600 text-white text-sm font-medium shadow hover:bg-blue-700",children:"+ New CDO"})})]}),e.jsxs("div",{className:"bg-gray-50 border-b px-6 py-3 flex space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>g("transactions"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${p==="transactions"?"bg-white text-blue-600 shadow border border-blue-200":"text-gray-600 hover:text-gray-900"}`,children:"Credit Transactions"}),e.jsx("button",{type:"button",onClick:()=>g("used"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${p==="used"?"bg-white text-blue-600 shadow border border-blue-200":"text-gray-600 hover:text-gray-900"}`,children:"Used Credits"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:[p==="transactions"&&e.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-5 border-b bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2.5",children:"Search Employee"}),e.jsx("input",{type:"text",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 py-2.5 px-3",placeholder:"Search by employee name...",value:f,onChange:be=>N(be.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2.5",children:"Status"}),e.jsxs("select",{className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 py-2.5 px-3",value:b,onChange:be=>w(be.target.value),children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"For Approval",children:"For Approval"}),e.jsx("option",{value:"Approved",children:"Approved"}),e.jsx("option",{value:"Returned",children:"Returned"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]})]}),(f||b)&&e.jsx("div",{className:"mt-4",children:e.jsx("button",{type:"button",onClick:()=>{N(""),w("")},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Clear Filters"})})]}),e.jsxs("div",{className:"px-4 py-4 border-b flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"CDO Credits"}),j&&e.jsx("span",{className:"text-sm text-gray-500",children:"Loading..."})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"CDO No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Title"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Purpose"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Credit(s)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Created By"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Action"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[Yt.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-6 text-center text-sm text-gray-500",children:v.length===0?"No CDO records found.":"No CDO records match the filters."})}),Yt.map(be=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:be.cdono}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Tl,{photo:be.employeePhoto,name:be.employeeName}),e.jsx("div",{children:e.jsx("div",{className:"font-medium text-gray-800",children:be.employeeName||"N/A"})})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:be.cdotitle}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:be.cdopurpose}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:be.earnedcredit}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:be.createdByName||be.createdByPhoto?e.jsx(Tl,{photo:be.createdByPhoto,name:be.createdByName||"Creator"}):""}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`inline-flex px-2.5 py-1 rounded-full text-xs font-semibold ${cb(be.cdostatus)}`,children:be.cdostatus||"For Approval"})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[db(be.cdostatus)&&e.jsxs(e.Fragment,{children:[d&&e.jsx("button",{onClick:()=>fe("approve",be),className:"text-green-600 hover:text-green-800 transition-colors",title:"Approve CDO",children:""}),Number(be.isportal)===1&&m&&e.jsx("button",{onClick:()=>fe("return",be),className:"text-orange-600 hover:text-orange-800 transition-colors",title:"Return CDO",children:""}),u&&e.jsx("button",{onClick:()=>fe("cancel",be),className:"text-red-600 hover:text-red-800 transition-colors",title:"Cancel CDO",children:""})]}),i&&e.jsx("button",{onClick:()=>Re(be),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit CDO",children:""}),c&&e.jsx("button",{onClick:()=>Ce(be),className:"text-green-600 hover:text-green-800 transition-colors",title:"Print CDO",children:""}),o&&e.jsx("button",{onClick:()=>Ze(be),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete CDO",children:""})]})})]},be.id))]})]})})]}),p==="used"&&e.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-5 border-b bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2.5",children:"Search Employee"}),e.jsx("input",{type:"text",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 py-2.5 px-3",placeholder:"Search by employee name...",value:f,onChange:be=>N(be.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2.5",children:"Status"}),e.jsxs("select",{className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 py-2.5 px-3",value:b,onChange:be=>w(be.target.value),children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"For Approval",children:"For Approval"}),e.jsx("option",{value:"Approved",children:"Approved"}),e.jsx("option",{value:"Returned",children:"Returned"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]})]}),(f||b)&&e.jsx("div",{className:"mt-4",children:e.jsx("button",{type:"button",onClick:()=>{N(""),w("")},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Clear Filters"})})]}),e.jsx("div",{className:"px-4 py-4 border-b flex justify-between items-center",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Used Credits"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase w-12"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Reference Credit"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Earned Credits"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Consume Credits"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Remaining Credits"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:os.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-sm text-gray-500",children:Ut.length===0?"No approved CDO records found.":"No records match the filters."})}):os.map(be=>{const nt=!!Q[be.id],tt=be.remainingCredits!=null?Number(be.remainingCredits):Math.max((Number(be.earnedcredit)||0)-(Number(be.usedcredit)||0),0),ft=Ml(be),kt=ft||tt<=0||Number(be.isconsume)===1;return e.jsxs(St.Fragment,{children:[e.jsxs("tr",{className:"align-top",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{type:"button",onClick:()=>ut(be.id),className:"text-blue-600 hover:text-blue-800 transition-colors",title:nt?"Collapse details":"Expand details",children:nt?"":"+"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:be.cdono}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Tl,{photo:be.employeePhoto,name:be.employeeName}),e.jsx("div",{children:e.jsx("div",{className:"font-medium text-gray-800",children:be.employeeName||"N/A"})})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:be.earnedcredit}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:be.usedcredit}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:ft?e.jsxs("span",{className:"inline-flex items-center gap-1 text-red-600 font-semibold",children:["0 ",e.jsx("span",{className:"text-xs uppercase tracking-wide",children:"(Expired)"})]}):tt}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[l&&e.jsx("button",{type:"button",onClick:()=>Be(be),disabled:kt,className:"px-3 py-1 rounded bg-green-600 text-white text-xs font-semibold hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Consume CDO"}),c&&e.jsx("button",{type:"button",onClick:()=>Ce(be),className:"text-green-600 hover:text-green-800 transition-colors",title:"Print CDO",children:""}),o&&e.jsx("button",{type:"button",onClick:()=>Ze(be),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete CDO",children:""})]})})]}),nt&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 pb-4 bg-gray-50",children:be.consumeEntries&&be.consumeEntries.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 bg-white rounded",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Use Date"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Reason"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Created By"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:be.consumeEntries.map(_t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:_t.cdodate||""}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-700 whitespace-pre-wrap",children:_t.reason||""}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-700",children:Number(_t.isportal)===1?e.jsx("span",{className:"text-blue-600 font-semibold",children:"Portal"}):e.jsx(Tl,{photo:_t.createdByPhoto,name:_t.createdByName||"Creator"})}),e.jsx("td",{className:"px-3 py-2 text-sm",children:e.jsx("span",{className:`inline-flex px-2.5 py-1 rounded-full text-xs font-semibold ${cb(_t.cdodatestatus)}`,children:_t.cdodatestatus||"For Approval"})}),e.jsx("td",{className:"px-3 py-2 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[db(_t.cdodatestatus)&&e.jsxs(e.Fragment,{children:[d&&e.jsx("button",{type:"button",onClick:()=>Nt(_t.id,"Approved"),className:"text-green-600 hover:text-green-800 transition-colors",title:"Approve Consume Record",children:""}),Number(_t.isportal)===1&&m&&e.jsx("button",{type:"button",onClick:()=>Nt(_t.id,"Returned"),className:"text-orange-600 hover:text-orange-800 transition-colors",title:"Return Consume Record",children:""}),u&&e.jsx("button",{type:"button",onClick:()=>Nt(_t.id,"Cancelled"),className:"text-red-600 hover:text-red-800 transition-colors",title:"Cancel Consume Record",children:""})]}),i&&e.jsx("button",{type:"button",onClick:()=>Ke({..._t,cdo_id:be.id}),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit Consume Record",children:""}),c&&e.jsx("button",{type:"button",onClick:()=>Kt(_t),className:"text-green-600 hover:text-green-800 transition-colors",title:"Print Consume Record",children:""}),o&&e.jsx("button",{type:"button",onClick:()=>At(_t.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete Consume Record",children:""})]})})]},_t.id))})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"No consume records found."})})})]},be.id)})})]})})]})]}),Zt&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 px-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full",children:[e.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:C?"Edit CDO Record":"New CDO Record"}),e.jsxs("button",{onClick:Xe,className:"text-gray-400 hover:text-gray-600",children:[e.jsx("span",{className:"sr-only",children:"Close"}),""]})]}),e.jsxs("form",{onSubmit:lt,className:"px-6 py-5 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Employee"}),e.jsxs("div",{className:"mt-2 relative",children:[e.jsx("input",{type:"text",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 pr-10",value:z,onChange:be=>{P(be.target.value),B(!0),$||Ge()},onFocus:()=>{B(!0),$||Ge()},onBlur:()=>{setTimeout(()=>B(!1),150)},placeholder:"Search employee by name, badge number, or ObjID"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:I?e.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-400",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}):e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),R&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",children:I?e.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"Loading employees..."}):xs.length>0?xs.map(be=>e.jsx("button",{type:"button",onClick:()=>ms(be),className:"w-full px-4 py-2 text-left text-sm hover:bg-blue-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ob,{photo:be.photo,name:be.name}),e.jsx("div",{children:e.jsx("div",{className:"font-medium text-gray-800",children:be.name||"Unnamed Employee"})})]})},be.objid||be.badge||be.name)):e.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No employees found."})})]}),e.jsx("div",{className:"mt-3",children:U?e.jsx("div",{className:"rounded-md border border-blue-100 bg-blue-50 px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ob,{photo:U.photo,name:U.name}),e.jsx("div",{className:"text-sm font-semibold text-blue-900",children:U.name||"Selected Employee"})]})}):e.jsx("div",{className:"rounded-md border border-dashed border-gray-300 px-4 py-3 text-sm text-gray-500",children:"No employee selected."})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:_.cdotitle,onChange:be=>E(nt=>({...nt,cdotitle:be.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Purpose"}),e.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3,value:_.cdopurpose,onChange:be=>E(nt=>({...nt,cdopurpose:be.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Work Date(s)"}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"border rounded-md p-3 bg-white",children:e.jsx(vl,{mode:"multiple",selected:J,onSelect:rs,weekStartsOn:1,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-1,toYear:new Date().getFullYear()+1})}),e.jsxs("div",{className:"border rounded-md p-3 bg-gray-50 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Selected Dates"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[zt.length," day(s)"]})]}),e.jsx("ul",{className:"space-y-1 max-h-48 overflow-y-auto text-sm",children:zt.length>0?zt.map(be=>e.jsxs("li",{className:"flex items-center justify-between rounded border bg-white px-2 py-1",children:[e.jsx("span",{children:be.label}),e.jsx("button",{type:"button",onClick:()=>qt(be.value),className:"text-red-600 text-xs hover:underline",children:"Remove"})]},be.value)):e.jsx("li",{className:"text-xs text-gray-500",children:"No dates selected"})}),zt.length>0&&e.jsx("button",{type:"button",onClick:()=>O([]),className:"mt-3 text-xs text-red-600 hover:underline self-start",children:"Clear all"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Earned Credits"}),e.jsx("input",{type:"number",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:zt.length}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Calculated based on selected work date(s)."})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 border-t pt-4",children:[e.jsx("button",{type:"button",onClick:Xe,className:"px-4 py-2 rounded-md border border-gray-300 text-sm font-medium text-gray-600 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:zt.length===0,className:"px-4 py-2 rounded-md bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:C?"Update":"Create"})]})]})]})}),Jt&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 px-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full",children:[e.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:F?"Edit Consume Record":"Log Used Credit"}),e.jsxs("button",{onClick:Se,className:"text-gray-400 hover:text-gray-600",children:[e.jsx("span",{className:"sr-only",children:"Close"}),""]})]}),e.jsxs("form",{onSubmit:it,className:"px-6 py-5 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CDO Reference"}),e.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:Y.cdo_id,onChange:be=>q(nt=>({...nt,cdo_id:be.target.value})),readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Reason"}),e.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:Y.reason,onChange:be=>q(nt=>({...nt,reason:be.target.value})),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Remarks"}),e.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3,value:Y.cdodateremarks,onChange:be=>q(nt=>({...nt,cdodateremarks:be.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CDO Dates (one per line or comma separated)"}),e.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3,value:Y.cdodatesInput,onChange:be=>q(nt=>({...nt,cdodatesInput:be.target.value}))})]}),e.jsxs("div",{className:"flex justify-end space-x-3 border-t pt-4",children:[e.jsx("button",{type:"button",onClick:Se,className:"px-4 py-2 rounded-md border border-gray-300 text-sm font-medium text-gray-600 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-md bg-green-600 text-white text-sm font-medium hover:bg-green-700",children:F?"Update":"Create"})]})]})]})}),es&&ne&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 px-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Consume CDO"}),e.jsxs("button",{onClick:mt,className:"text-gray-400 hover:text-gray-600",children:[e.jsx("span",{className:"sr-only",children:"Close"}),""]})]}),e.jsxs("form",{onSubmit:He,className:"px-6 py-5 space-y-4",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Reference:"})," ",ne.cdono]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Tl,{photo:ne.employeePhoto,name:ne.employeeName}),e.jsx("div",{className:"font-semibold text-gray-800",children:ne.employeeName||"N/A"})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Remaining credits: ",gs," / ",Qt]}),ne.expirydate&&e.jsxs("div",{className:`text-xs font-semibold ${Ml(ne)?"text-red-600":"text-gray-500"}`,children:["Expiry: ",sh(ne.expirydate),Ml(ne)?" (Expired)":""]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"border rounded-md p-3 bg-white overflow-x-auto",children:e.jsx(vl,{mode:"multiple",selected:me,onSelect:qe,weekStartsOn:1,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-1,toYear:new Date().getFullYear()+1,className:"min-w-[280px]"})}),e.jsxs("div",{className:"border rounded-md p-3 bg-gray-50 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Selected Dates"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[me.length," day(s)"]})]}),e.jsx("ul",{className:"space-y-1 max-h-48 overflow-y-auto text-sm",children:$t.length>0?$t.map(be=>e.jsxs("li",{className:"flex items-center justify-between rounded border bg-white px-2 py-1",children:[e.jsx("span",{children:be.label}),e.jsx("button",{type:"button",onClick:()=>Oe(be.value),className:"text-red-600 text-xs hover:underline",children:"Remove"})]},be.value)):e.jsx("li",{className:"text-xs text-gray-500",children:"No dates selected"})}),$t.length>0&&e.jsx("button",{type:"button",onClick:()=>Z([]),className:"mt-3 text-xs text-red-600 hover:underline self-start",children:"Clear all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Reason"}),e.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3,value:ee,onChange:be=>ye(be.target.value),required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-3 border-t pt-4",children:[e.jsx("button",{type:"button",onClick:mt,className:"px-4 py-2 rounded-md border border-gray-300 text-sm font-medium text-gray-600 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:ve||me.length===0||!ee.trim(),className:"px-4 py-2 rounded-md bg-green-600 text-white text-sm font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:ve?"Saving":"Save Consume Request"})]})]})]})}),we.open&&we.record&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 px-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Confirm Action"}),e.jsxs("button",{onClick:Pe,className:"text-gray-400 hover:text-gray-600",children:[e.jsx("span",{className:"sr-only",children:"Close"}),""]})]}),e.jsxs("div",{className:"px-6 py-4 space-y-4 text-sm text-gray-700",children:[e.jsxs("div",{children:["Are you sure you want to ",we.action==="approve"?"approve":we.action==="return"?"return":"cancel"," this CDO record?"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Reference:"})," ",we.record.cdono]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Tl,{photo:we.record.employeePhoto,name:we.record.employeeName}),e.jsx("div",{className:"font-semibold text-gray-800",children:we.record.employeeName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1",children:"Remarks"}),e.jsx("textarea",{className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,value:le,onChange:be=>Ie(be.target.value),placeholder:"Enter remarks",required:!0})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:Pe,className:"px-4 py-2 border rounded hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"button",onClick:Le,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Confirm"})]})]})})]}):e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-red-100 p-6 text-center text-red-600",children:"You do not have permission to view CDO records."})},rh=t=>{if(t===!0)return!0;if(t===!1)return!1;if(typeof t=="number")return t===1;const s=String(t??"").trim().toLowerCase();return s?["1","true","yes","y","present","current","active"].includes(s):!1},nh=t=>{if(!t)return[];if(Array.isArray(t))return t;if(typeof t=="object"){const s=["data","items","rows","list","results"];for(const r of s)if(Array.isArray(t[r]))return t[r];return Object.values(t)}return[]},Vi=(...t)=>{for(const s of t){if(s==null)continue;const r=Array.isArray(s)?s.find(Boolean):s;if(r!=null&&String(r).trim()!=="")return r}return""},m7=t=>{if(!t)return{lastName:"",firstName:"",middleName:""};const s=String(t).split(",").map(o=>o.trim()),r=s[0]||"",a=(s[1]||"").split(" ").filter(Boolean),l=a[0]||"",i=a.slice(1).join(" ")||"";return{lastName:r,firstName:l,middleName:i}},h7=t=>{if(!t)return"";const s=typeof t=="string"?t.trim():t;if(typeof s=="string"){const r=s.match(/\d{4}-\d{2}-\d{2}/);if(r)return r[0];const n=s.match(/\d{2}\/\d{2}\/\d{4}/);if(n)return`${n[0].slice(6,10)}-${n[0].slice(0,2)}-${n[0].slice(3,5)}`}try{const r=new Date(s);if(Number.isNaN(r.getTime()))return"";const n=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),l=String(r.getDate()).padStart(2,"0");return`${n}-${a}-${l}`}catch{return""}},Gi="201-employees-with-pds",Qi="201-employees",p7=()=>{const{can:t,loading:s}=Vs(),r=t(Gi,"read")||t(Qi,"read"),n=t(Gi,"create")||t(Qi,"create"),a=t(Gi,"update")||t(Qi,"update"),l=t(Gi,"delete")||t(Qi,"delete"),i=t(Gi,"print")||t(Qi,"print"),[o,c]=x.useState([]),[d,m]=x.useState(!0),[u,p]=x.useState(""),[g,j]=x.useState(""),[y,v]=x.useState(""),[h,f]=x.useState(""),[N,b]=x.useState(""),[w,D]=x.useState(null),[S,C]=x.useState(!1),[T,_]=x.useState(!1),[E,A]=x.useState([]),[L,F]=x.useState(null),W=x.useCallback(async()=>{var P;if(!r){c([]),m(!1);return}m(!0);try{const R=await oe.get("/201-employees-with-pds"),B=Array.isArray((P=R.data)==null?void 0:P.data)?R.data.data:Array.isArray(R.data)?R.data:[];c(B)}catch(R){console.error("Failed to load employees with PDS",R)}finally{m(!1)}},[r]);x.useEffect(()=>{s||W()},[W,s]),x.useEffect(()=>{if(s||!r)return;(async()=>{var R;try{const B=await oe.get("/201-employees/lookup/civil-statuses"),G=(Array.isArray((R=B.data)==null?void 0:R.data)?B.data.data:Array.isArray(B.data)?B.data:[]).map($=>({id:($==null?void 0:$.id)??($==null?void 0:$.ID)??($==null?void 0:$.value)??($==null?void 0:$.civil_status),label:($==null?void 0:$.civil_status)||($==null?void 0:$.label)||($==null?void 0:$.value)||""})).filter($=>$.label);A(G)}catch(B){console.error("Failed to load civil status options",B),A([])}})()},[s,r]);const Y=x.useMemo(()=>(o||[]).map((P,R)=>{const B=[P.designations,P.employeeDesignations,P.employee_designations,P.Designations,P.empdesignations].map(nh).flat(),U=[P.appointments,P.employeeAppointments,P.employee_appointments,P.Appointments].map(nh).flat(),G=[P.assignedShifts,P.employeeAssignedShifts,P.employee_assignedshifts,P.AssignedShifts,P.assigned_shift,P.shifts].map(nh).flat(),$=B.find(ye=>rh(ye==null?void 0:ye.ispresent)),X=U.find(ye=>rh(ye==null?void 0:ye.ispresent)),Q=G.find(ye=>rh(ye==null?void 0:ye.is_used)),Ne=B.length>0?B[0]:null,V=U.length>0?U[0]:null,re=G.length>0?G[0]:null,ne=Vi($==null?void 0:$.rankname,$==null?void 0:$.designationname,$==null?void 0:$.rank_name,$==null?void 0:$.designation,$==null?void 0:$.position,Ne==null?void 0:Ne.rankname,Ne==null?void 0:Ne.designationname,Ne==null?void 0:Ne.rank_name,Ne==null?void 0:Ne.designation,Ne==null?void 0:Ne.position,P.presentDesignation,P.presentdesignation,P.designation,P.rankname,P.rank_name,P.position),xe=Vi($==null?void 0:$.position,Ne==null?void 0:Ne.position,P.position,P.presentPosition),me=Vi($==null?void 0:$.departmentname,$==null?void 0:$.department,$==null?void 0:$.department_name,$==null?void 0:$.deptname,Ne==null?void 0:Ne.departmentname,Ne==null?void 0:Ne.department,Ne==null?void 0:Ne.department_name,Ne==null?void 0:Ne.deptname,P.department,P.departmentname,P.deptname,P.department_name),Z=Vi(X==null?void 0:X.appointmentstatus,X==null?void 0:X.appointmentname,X==null?void 0:X.appointment_status,X==null?void 0:X.appointment,X==null?void 0:X.name,V==null?void 0:V.appointmentstatus,V==null?void 0:V.appointmentname,V==null?void 0:V.appointment_status,V==null?void 0:V.appointment,V==null?void 0:V.name,P.appointment,P.appointmentstatus,P.appointmentname,P.appointment_status,P.appointmenttype),ee=Vi(Q==null?void 0:Q.shiftname,Q==null?void 0:Q.shift_name,Q==null?void 0:Q.shiftSchedule,Q==null?void 0:Q.shift_schedule,Q==null?void 0:Q.shiftdescription,Q==null?void 0:Q.shift_description,Q==null?void 0:Q.shift,re==null?void 0:re.shiftname,re==null?void 0:re.shift_name,re==null?void 0:re.shiftSchedule,re==null?void 0:re.shift_schedule,re==null?void 0:re.shiftdescription,re==null?void 0:re.shift_description,re==null?void 0:re.shift,P.shiftSchedule,P.shiftname,P.shift,P.shift_schedule,P.shift_sched,P.shift_description);return{...P,presentDesignationName:ne,positionName:xe,departmentName:me,appointmentName:Z,shiftDisplay:ee}}),[o]),q=x.useMemo(()=>{const P=new Set,R=new Set,B=new Set;return Y.forEach(U=>{U.positionName&&U.positionName.trim()&&P.add(U.positionName.trim()),U.departmentName&&U.departmentName.trim()&&R.add(U.departmentName.trim()),U.appointmentName&&U.appointmentName.trim()&&B.add(U.appointmentName.trim())}),{titles:Array.from(P).sort(),departments:Array.from(R).sort(),appointments:Array.from(B).sort()}},[Y]),J=x.useMemo(()=>{const P=(u||"").toLowerCase();return Y.filter(R=>{const B=to(R.fullname||""),U=!P||B.toLowerCase().includes(P),G=!g||(R.positionName||"").trim()===g,$=!y||(R.departmentName||"").trim()===y,X=!h||(R.appointmentName||"").trim()===h,Q=!N||N==="locked"&&R.ispdsentrylock===1||N==="unlocked"&&(R.ispdsentrylock===0||!R.ispdsentrylock);return U&&G&&$&&X&&Q})},[Y,u,g,y,h,N]),O={surname:"",firstname:"",middlename:"",extension:"",birthdate:"",birth_place:"",gender:"",civilstatus:"",height:"",weight:"",bloodtype:"",gsis:"",pagibig:"",philhealth:"",sss:"",tin:"",telephone:"",mobileno:"",email:"",agency_no:""},[M,k]=x.useState(O),I=P=>{if(!a){alert("You do not have permission to update employee records.");return}D(P),k({surname:P.surname||"",firstname:P.firstname||"",middlename:P.middlename||"",extension:P.extension||"",birthdate:h7(P.birthdate_iso||P.birthdate||P.birthdate_raw||P.birthdateOriginal||""),birth_place:P.birth_place||P.birthplace||"",gender:P.gender||"",civilstatus:P.civilstatus||P.civil_status||"",height:P.height||"",weight:P.weight||"",bloodtype:P.bloodtype||P.blood_type||"",gsis:P.gsis||"",pagibig:P.pagibig||"",philhealth:P.philhealth||"",sss:P.sss||"",tin:P.tin||"",telephone:P.telephone||P.telno||"",mobileno:P.mobileno||P.mobilenumber||"",email:P.email||P.emailaddress||"",agency_no:P.agency_no||P.agencyno||""}),C(!0)},K=async(P,R)=>{var B,U;if(!a){alert("You do not have permission to update employee records.");return}F(P),c(G=>G.map($=>$.objid===P?{...$,ispdsentrylock:R?1:0}:$));try{await oe.put(`/201-employees-with-pds/${P}/toggle-lock-pds`,{isLocked:R}),await W()}catch(G){console.error("Error toggling PDS lock:",G),await W(),alert(((U=(B=G.response)==null?void 0:B.data)==null?void 0:U.message)||"Failed to toggle PDS lock. Please try again.")}finally{F(null)}},z=async()=>{if(w&&!a){alert("You do not have permission to update employee records.");return}if(!w&&!n){alert("You do not have permission to create employee records.");return}_(!0);try{w?await oe.put(`/201-employees-with-pds/${w.objid}`,M):await oe.post("/201-employees-with-pds",M),C(!1),W()}catch(P){console.error("Save error",P),alert("Failed to save")}finally{_(!1)}};return s?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-white border border-dashed rounded-lg p-8 text-center text-gray-500",children:"Loading permissions..."})}):r?e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Employee"}),e.jsx("input",{value:u,onChange:P=>p(P.target.value),placeholder:"Search by name",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsxs("select",{value:g,onChange:P=>j(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!r,children:[e.jsx("option",{value:"",children:"All Titles"}),q.titles.map(P=>e.jsx("option",{value:P,children:P},P))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),e.jsxs("select",{value:y,onChange:P=>v(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!r,children:[e.jsx("option",{value:"",children:"All Departments"}),q.departments.map(P=>e.jsx("option",{value:P,children:P},P))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appointment"}),e.jsxs("select",{value:h,onChange:P=>f(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!r,children:[e.jsx("option",{value:"",children:"All Appointments"}),q.appointments.map(P=>e.jsx("option",{value:P,children:P},P))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lock Status"}),e.jsxs("select",{value:N,onChange:P=>b(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!r,children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"locked",children:"Locked"}),e.jsx("option",{value:"unlocked",children:"Unlocked"})]})]})]}),(u||g||y||h||N)&&e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsx("button",{onClick:()=>{p(""),j(""),v(""),f(""),b("")},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Clear Filters"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Employee"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Designation"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Title"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Department"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Appointment"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Shift Schedules"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Lock PDS"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"Loading"})}):J.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"No records"})}):J.map(P=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:(()=>{const R=to(P.fullname||""),{lastName:B,firstName:U}=m7(R),G=[B,U].filter(Boolean).join(", ")||R||"Employee",$=[P.departmentName||"",P.positionName||""].filter(Boolean).join(" - ");return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200 border border-gray-300 flex items-center justify-center",children:P.photo_path?e.jsx("img",{src:P.photo_path,alt:G,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-[10px] text-gray-500 px-2 text-center",children:"No Photo"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-semibold text-gray-900 truncate",children:G}),$&&e.jsx("div",{className:"text-xs text-gray-500 truncate",children:$})]})]})})()}),e.jsx("td",{className:"px-4 py-2",children:P.presentDesignationName||""}),e.jsx("td",{className:"px-4 py-2",children:P.positionName||""}),e.jsx("td",{className:"px-4 py-2",children:P.departmentName||""}),e.jsx("td",{className:"px-4 py-2",children:P.appointmentName||""}),e.jsx("td",{className:"px-4 py-2",children:(()=>{const R=String(P.shiftDisplay||"").split(",").map(B=>B.trim()).filter(Boolean);return R.length?e.jsx("div",{className:"flex flex-col gap-1",children:R.map((B,U)=>e.jsx("span",{className:"text-sm text-gray-700",children:B},`${B}-${U}`))}):""})()}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:P.ispdsentrylock===1,onChange:R=>K(P.objid,R.target.checked),disabled:L===P.objid||!a,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed"})]})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[a&&e.jsx("button",{onClick:()=>I(P),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit Employee",children:""}),i&&e.jsx("button",{onClick:()=>alert("Print functionality not yet implemented"),className:"text-green-600 hover:text-green-800 transition-colors",title:"Print",children:""}),l&&e.jsx("button",{onClick:()=>alert("Delete functionality not yet implemented"),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete",children:""}),!a&&!i&&!l&&e.jsx("span",{className:"text-xs text-gray-400",children:"No actions available"})]})})]},P.objid))})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-4xl p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center",children:w!=null&&w.photo_path?e.jsx("img",{src:w.photo_path,alt:to(w.fullname||"")||"Employee",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-gray-500 text-xs text-center px-2",children:"No Photo"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-500",children:w?"Edit Employee":"Add Employee"}),e.jsx("div",{className:"text-lg font-semibold text-gray-800",children:M.surname||M.firstname||w!=null&&w.surname||w!=null&&w.firstname?Ys({surname:M.surname||(w==null?void 0:w.surname),firstname:M.firstname||(w==null?void 0:w.firstname),middlename:M.middlename||(w==null?void 0:w.middlename)})||"Employee":to((w==null?void 0:w.fullname)||"")||"Employee"}),e.jsx("div",{className:"text-sm text-gray-500",children:M.agency_no||(w==null?void 0:w.agency_no)||""})]})]}),e.jsx("button",{className:"text-gray-500",onClick:()=>C(!1),children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"ID No (Agency No)"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:M.agency_no,onChange:P=>k(R=>({...R,agency_no:P.target.value}))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Last Name"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:M.surname,onChange:P=>k(R=>({...R,surname:P.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"First Name"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:M.firstname,onChange:P=>k(R=>({...R,firstname:P.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Middle Name"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:M.middlename,onChange:P=>k(R=>({...R,middlename:P.target.value}))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Birth Date"}),e.jsx("input",{type:"date",className:"mt-1 w-full border rounded px-3 py-2",value:M.birthdate,onChange:P=>k(R=>({...R,birthdate:P.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Birth Place"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:M.birth_place,onChange:P=>k(R=>({...R,birth_place:P.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Gender"}),e.jsxs("select",{className:"mt-1 w-full border rounded px-3 py-2",value:M.gender,onChange:P=>k(R=>({...R,gender:P.target.value})),children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Civil Status"}),e.jsxs("select",{className:"mt-1 w-full border rounded px-3 py-2",value:M.civilstatus,onChange:P=>k(R=>({...R,civilstatus:P.target.value})),children:[e.jsx("option",{value:"",children:"Select status"}),E.map(P=>e.jsx("option",{value:P.label,children:P.label},P.id||P.label))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Height (cm)"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:M.height,onChange:P=>k(R=>({...R,height:P.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Weight (kg)"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:M.weight,onChange:P=>k(R=>({...R,weight:P.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Blood Type"}),e.jsxs("select",{className:"mt-1 w-full border rounded px-3 py-2",value:M.bloodtype,onChange:P=>k(R=>({...R,bloodtype:P.target.value})),children:[e.jsx("option",{value:"",children:"Select blood type"}),e.jsx("option",{value:"A+",children:"A+"}),e.jsx("option",{value:"A-",children:"A-"}),e.jsx("option",{value:"B+",children:"B+"}),e.jsx("option",{value:"B-",children:"B-"}),e.jsx("option",{value:"AB+",children:"AB+"}),e.jsx("option",{value:"AB-",children:"AB-"}),e.jsx("option",{value:"O+",children:"O+"}),e.jsx("option",{value:"O-",children:"O-"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"GSIS"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:M.gsis,onChange:P=>k(R=>({...R,gsis:P.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"PAG-IBIG"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:M.pagibig,onChange:P=>k(R=>({...R,pagibig:P.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"PHILHEALTH"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:M.philhealth,onChange:P=>k(R=>({...R,philhealth:P.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"SSS"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:M.sss,onChange:P=>k(R=>({...R,sss:P.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"TIN"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:M.tin,onChange:P=>k(R=>({...R,tin:P.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Telephone"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:M.telephone,onChange:P=>k(R=>({...R,telephone:P.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Mobile No"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:M.mobileno,onChange:P=>k(R=>({...R,mobileno:P.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:M.email,onChange:P=>k(R=>({...R,email:P.target.value}))})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{className:"px-4 py-2 rounded border",onClick:()=>C(!1),children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-60",onClick:z,disabled:T||(w?!a:!n),children:T?"Saving":"Save"})]})]})})]}):e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-white border border-dashed rounded-lg p-8 text-center text-gray-500",children:"You do not have permission to view Employees with PDS."})})},hb=({formData:t,children:s=[],education:r=[],displayValue:n,formatDate:a,employeeMedia:l=[]})=>{Array.from({length:60},(o,c)=>c+1);const i=o=>{if(!o)return"";if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(o))return o;try{const c=new Date(o);if(isNaN(c.getTime()))return console.log("Invalid child birth date:",o),o;const d=(c.getMonth()+1).toString().padStart(2,"0"),m=c.getDate().toString().padStart(2,"0"),u=c.getFullYear();return`${d}/${m}/${u}`}catch(c){return console.log("Child birth date formatting error:",c,"for date:",o),o}};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          @media print {
            @page {
              size: 8.5in 13in;
              margin: 0.25in;
            }
            body {
              margin: 0;
              padding: 0;
              font-size: 9px;
              line-height: 1.1;
            }
            .pds-table {
              border-collapse: collapse !important;
              font-size: 8px !important;
              line-height: 1.0 !important;
            }
            .pds-table td {
              padding: 2px 3px !important;
              border: 1px solid #000 !important;
              vertical-align: top !important;
              white-space: normal !important;
              word-wrap: break-word !important;
              overflow-wrap: break-word !important;
            }
            .field-label {
              font-weight: normal !important;
              background-color: #f8f8f8 !important;
            }
            .field-value {
              background-color: white !important;
            }
            .section-title {
              background-color: #e0e0e0 !important;
              font-weight: bold !important;
              text-align: center !important;
            }
            .no-page-break {
              page-break-inside: avoid !important;
            }
            .checkbox {
              font-size: 12px !important;
              font-weight: bold !important;
              color: #000 !important;
              display: inline-block !important;
              margin-right: 3px !important;
            }
          }
        `}),e.jsxs("div",{className:"no-page-break",style:{width:"100%",maxWidth:"8.5in",margin:"0 auto",padding:"0.25in",fontSize:"10px",lineHeight:"1.3",fontFamily:"Arial, sans-serif",backgroundColor:"white",color:"black"},children:[e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"17%"}}),e.jsx("col",{style:{width:"9%"}}),e.jsx("col",{style:{width:"9%"}}),e.jsx("col",{style:{width:"16%"}}),e.jsx("col",{style:{width:"5%"}}),e.jsx("col",{style:{width:"9%"}}),e.jsx("col",{style:{width:"7%"}}),e.jsx("col",{style:{width:"9%"}}),e.jsx("col",{style:{width:"9%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{style:{height:"15px"},children:e.jsxs("td",{colSpan:"9",className:"pds-header-main",style:{textAlign:"left",fontSize:"8px",padding:"10px 0"},children:["CS Form No. 212 - Revised 2017",e.jsx("br",{})]})}),e.jsx("tr",{style:{height:"70px"},children:e.jsx("td",{colSpan:"9",className:"pds-header-main",style:{topcellborder:"transparent",textAlign:"center",verticalAlign:"middle",fontWeight:"bold",fontSize:"22px",padding:"10px 0"},children:"PERSONAL DATA SHEET"})}),e.jsx("tr",{children:e.jsxs("td",{colSpan:"9",className:"warning-text",style:{fontSize:"12px",padding:"8px 0",fontWeight:"normal"},children:["WARNING: Ang misrepresentation made in the Personal Data Sheet and the Work Experience Sheet shall cause the filing of  administrative/criminal case/s against the person concerned.",e.jsx("br",{}),e.jsx("br",{})," READ THE ATTACHED GUIDE TO FILLING OUT THE PERSONAL DATA SHEET (PDS) BEFORE ACCOMPLISHING THE PDS FORM",e.jsx("br",{})]})}),e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"filling-guidelines",style:{fontSize:"10px",padding:"8px 0"},children:"Print legibly. Tick appropriate []xes () and use separate sheet if necessary. Indicate N/A if not applicable. DO NOT 1. CS ID No [ ] (Do not fill up. For CSC use only)"})}),e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"I. PERSONAL INFORMATION"})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",children:"2. SURNAME"}),e.jsx("td",{className:"field-value",colSpan:"8",style:{textAlign:"left",verticalAlign:"middle"},children:n(t.surname)})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",children:"FIRST NAME"}),e.jsx("td",{className:"field-value",colspan:"4",style:{textAlign:"left",verticalAlign:"middle"},children:n(t.firstname)}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"left",verticalAlign:"middle"},children:"NAME EXTENSION (JR.,SR)"}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"left",verticalAlign:"middle"},children:n(t.name_extension)})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{textAlign:"left",verticalAlign:"middle"},children:"MIDDLE NAME"}),e.jsx("td",{className:"field-value",colSpan:"8",style:{textAlign:"left",verticalAlign:"middle"},children:n(t.middlename)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"3. DATE OF BIRTH (mm/dd/yyyy)"}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle",whiteSpace:"normal",wordWrap:"break-word"},children:n(t.date_of_birth)}),e.jsx("td",{className:"field-label",colspan:"2",rowspan:"2",children:"16. CITIZENSHIP"}),e.jsxs("td",{className:"field-value",rowspan:"2",children:[e.jsx("span",{className:"checkbox",children:t.citizenship_filipino?"":""})," Filipino"]}),e.jsxs("td",{className:"field-value",colspan:"3",children:[e.jsx("span",{className:"checkbox",children:t.citizenship_dual?"":""})," Dual Citizenship"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"4. PLACE OF BIRTH"}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.place_of_birth)}),e.jsxs("td",{className:"field-value",children:[e.jsx("span",{className:"checkbox",children:t.dual_citizenship_type==="by birth"?"":""})," by birth"]}),e.jsxs("td",{className:"field-value",colspan:"2",children:[e.jsx("span",{className:"checkbox",children:(()=>{console.log("=== DUAL CITIZENSHIP DEBUG ==="),console.log("dual_citizenship_type:",t.dual_citizenship_type),console.log("Type of dual_citizenship_type:",typeof t.dual_citizenship_type),console.log("citizenship_dual:",t.citizenship_dual),console.log("citizenship_filipino:",t.citizenship_filipino),console.log("dual_citizenship_country:",t.dual_citizenship_country),console.log("All formData keys:",Object.keys(t));const o=t.dual_citizenship_type==="by naturalization"||t.dual_citizenship_type==="naturalization"||t.dual_citizenship_type==="By Naturalization"||t.dual_citizenship_type==="NATURALIZATION"||t.dual_citizenship_type&&t.dual_citizenship_type.toLowerCase().includes("naturalization"),c=t.citizenship_dual===!0||t.citizenship_dual==="true"||t.citizenship_dual===1,d=t.dual_citizenship_country&&t.dual_citizenship_country.toLowerCase().includes("naturalization"),m=o||c&&d;return console.log("Is naturalization (any variation):",o),console.log("Has dual citizenship:",c),console.log("Has naturalization in country:",d),console.log("Final result:",m),console.log("Final checkbox result:",m?"":""),m?"":""})()})," by naturalization"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"5. SEX"}),e.jsxs("td",{className:"field-value",colSpan:"2",children:[e.jsxs("span",{className:"checkbox-field",children:[e.jsx("span",{className:"checkbox",children:t.sex==="Male"?"":""})," Male"]}),e.jsxs("span",{className:"checkbox-field",style:{marginLeft:"20px"},children:[e.jsx("span",{className:"checkbox",children:t.sex==="Female"?"":""})," Female"]})]}),e.jsx("td",{className:"field-value",colspan:"2",children:"If holder of dual citizenship, please indicate the details."}),e.jsx("td",{className:"field-value",colSpan:"4",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.dual_citizenship_country)||"N/A"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowSpan:"4",children:"6. CIVIL STATUS"}),e.jsx("td",{className:"field-value",rowSpan:"4",children:e.jsxs("div",{className:"civil-status-layout",children:[e.jsxs("div",{children:[e.jsx("span",{className:"checkbox",children:t.civil_status==="Single"?"":""})," Single"]}),e.jsxs("div",{children:[e.jsx("span",{className:"checkbox",children:t.civil_status==="Widowed"?"":""})," Widowed"]}),e.jsxs("div",{children:[e.jsx("span",{className:"checkbox",children:t.civil_status==="Other/s"?"":""})," Other/s"]})]})}),e.jsx("td",{className:"field-value",rowSpan:"4",children:e.jsxs("div",{className:"civil-status-layout",children:[e.jsxs("div",{children:[e.jsx("span",{className:"checkbox",children:t.civil_status==="Married"?"":""})," Married"]}),e.jsxs("div",{children:[e.jsx("span",{className:"checkbox",children:t.civil_status==="Separated"?"":""})," Separated"]})]})}),e.jsx("td",{className:"field-label",rowspan:"6",children:"17. RESIDENTIAL ADDRESS"}),e.jsx("td",{className:"field-value",colSpan:"3",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_house_block_lot)}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_street)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",verticalAlign:"middle"},children:"House/Block/Lot No"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"Street"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-value",colspan:"3",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_subdivision_village)}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_barangay)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Subdivision/Village"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Barangay"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"7. HEIGHT (m)"}),e.jsx("td",{className:"field-value",colSpan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.height)}),e.jsx("td",{className:"field-value",colspan:"3",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_city_municipality)}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_province)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",children:"8. WEIGHT (kg)"}),e.jsx("td",{className:"field-value",colSpan:"2",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.weight)}),e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"City/Municipality"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Province"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"ZIP CODE"}),e.jsx("td",{className:"field-value",colspan:"5",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_zip_code)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",children:"9. BLOOD TYPE"}),e.jsx("td",{className:"field-value",colspan:"2",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.blood_type)}),e.jsx("td",{className:"field-label",rowspan:"6",children:"18. PERMANENT ADDRESS"}),e.jsx("td",{className:"field-value",colspan:"3",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.permanent_house_block_lot)}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.permanent_street)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"House/Block/Lot No"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Street"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",children:"10. GSIS ID NO."}),e.jsx("td",{className:"field-value",colspan:"2",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.gsis)}),e.jsx("td",{className:"field-value",colspan:"3",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.permanent_subdivision_village)}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.permanent_barangay)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Subdivision/Village"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Barangay"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"11. PAG-IBIG ID NO."}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.pagibig)}),e.jsx("td",{className:"field-value",colspan:"3",style:{textAlign:"center",fverticalAlign:"middle"},children:n(t.permanent_city_municipality)}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.permanent_province)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",children:"12. PHILHEALTH NO."}),e.jsx("td",{className:"field-value",colspan:"2",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.philhealth)}),e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"City/Municipality"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Province"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"ZIP CODE"}),e.jsx("td",{className:"field-value",colspan:"5",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.permanent_zip_code)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"13. SSS NO."}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.sss)}),e.jsx("td",{className:"field-label",children:"19. TELEPHONE NO."}),e.jsx("td",{className:"field-value",colSpan:"5",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.telephone)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"14. TIN NO."}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.tin)}),e.jsx("td",{className:"field-label",children:"20. MOBILE NO."}),e.jsx("td",{className:"field-value",colSpan:"5",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.mobile)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"15. AGENCY EMPLOYEE NO."}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.agency_no)}),e.jsx("td",{className:"field-label",children:"21. E-MAIL ADDRESS (if any)"}),e.jsx("td",{className:"field-value",colSpan:"5",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.email)})]})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"19.5%"}}),e.jsx("col",{style:{width:"17%"}}),e.jsx("col",{style:{width:"15.5%"}}),e.jsx("col",{style:{width:"30.5%"}}),e.jsx("col",{style:{width:"21.5%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"II. FAMILY BACKGROUND"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"22. SPOUSE'S SURNAME"}),e.jsx("td",{className:"field-value",COLSPAN:"2",children:n(t.spouse_surname)}),e.jsx("td",{className:"field-label",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:"23. NAME OF CHILD"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:"DATE OF BIRTH"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"FIRST NAME"}),e.jsx("td",{className:"field-value",children:n(t.spouse_firstname)}),e.jsxs("td",{className:"field-value",style:{borderLeft:"1px solid #000",borderRight:"1px solid #000"},children:["Name of Extension: ",n(t.spouse_extension)]}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>0?n(s[0].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>0?i(s[0].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"MIDDLE NAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.spouse_middlename)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>1?n(s[1].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>1?i(s[1].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"OCCUPATION"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.spouse_occupation)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>2?n(s[2].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>2?i(s[2].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"EMPLOYER/BUSINESS NAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.spouse_employer_business_name)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>3?n(s[3].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>3?i(s[3].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"BUSINESS ADDRESS"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.spouse_business_address)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>4?n(s[4].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>4?i(s[4].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"TELEPHONE NO."}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.spouse_telephone)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>5?n(s[5].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>5?i(s[5].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"24. FATHER'S SURNAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.father_surname)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>6?n(s[6].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>6?i(s[6].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"FIRST NAME"}),e.jsx("td",{className:"field-value",children:n(t.father_firstname)}),e.jsxs("td",{className:"field-value",style:{borderLeft:"1px solid #000",borderRight:"1px solid #000"},children:["Name of Extension: ",n(t.father_extension)]}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>7?n(s[7].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>7?i(s[7].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"MIDDLE NAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.father_middlename)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>8?n(s[8].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>8?i(s[8].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"25. MOTHER'S MAIDEN NAME"}),e.jsx("td",{className:"field-value",colspan:"2"}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>9?n(s[9].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>9?i(s[9].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"SURNAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.mother_firstname)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>10?n(s[10].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>10?i(s[10].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"FIRST NAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.mother_middlename)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>11?n(s[11].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>11?i(s[11].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"MIDDLE NAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.mother_surname)}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:"(Continue on separate sheet if necessary)"})]})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"19%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"8%"}}),e.jsx("col",{style:{width:"8%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"9%"}}),e.jsx("col",{style:{width:"13%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"III. EDUCATIONAL BACKGROUND"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",style:{verticalAlign:"middle"},children:"26. LEVEL"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",borderbottom:"transparent"},children:"NAME OF SCHOOL"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"BASIC EDUCATION/DEGREE/ COURSE"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"PERIOD OF ATTENDANCE"}),e.jsxs("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["HIGHEST LEVEL/UNITS EARNED",e.jsx("br",{}),"(if not graduated)"]}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"YEAR GRADUATED"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"SCHOLARSHIP/ HONORS"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{borderTop:"transparent"},children:"(Write in full)"}),e.jsx("td",{className:"field-label",style:{borderTop:"transparent"},children:"(Write in full)"}),e.jsx("td",{className:"field-label",children:"FROM"}),e.jsx("td",{className:"field-label",children:"TO"})]}),r.length>0?(()=>{const o=["Elementary","Secondary","Vocational/Trade Course","College","Graduate Studies"];return[...r].sort((d,m)=>{const u=n(d.level)||"",p=n(m.level)||"",g=o.indexOf(u),j=o.indexOf(p);return g!==-1&&j!==-1?g-j:g!==-1?-1:j!==-1?1:0}).slice(0,10).map((d,m)=>{const u=v=>{if(!v)return"";if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(v))return v;try{const h=new Date(v);if(isNaN(h.getTime()))return console.log("Invalid date:",v),v;const f=(h.getMonth()+1).toString().padStart(2,"0"),N=h.getDate().toString().padStart(2,"0"),b=h.getFullYear();return`${f}/${N}/${b}`}catch(h){return console.log("Date formatting error:",h,"for date:",v),v}},p=v=>{if(!v||v==="N/A")return"N/A";try{if(/^\d{4}$/.test(v.toString()))return v.toString();const h=new Date(v);return isNaN(h.getTime())?"N/A":h.getFullYear().toString()}catch{return"N/A"}},g=n(d.honor_received)||"",[j="",y=""]=g.split("|").map(v=>v.trim());return e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:n(d.level)}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:n(d.school_name)}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:n(d.course)}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:(()=>{const v=n(d.from);return console.log("FROM Column Debug:",{rawValue:d.from,displayValue:v,isNA:v==="N/A",formatted:v==="N/A"?v:u(v)}),v==="N/A"?v:u(v)})()}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:(()=>{const v=n(d.to);return console.log("TO Column Debug:",{rawValue:d.to,displayValue:v,isNA:v==="N/A",formatted:v==="N/A"?v:u(v)}),v==="N/A"?v:u(v)})()}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:n(d.highest_level)}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p(n(d.year_graduated))}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:j||y})]},m)})})():Array.from({length:10},(o,c)=>e.jsx("tr",{children:e.jsx("td",{colSpan:"8"})},c))]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word",marginTop:"0.2in"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"18.5%"}}),e.jsx("col",{style:{width:"46.5%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"25%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"left",verticalAlign:"middle",height:"20px"},children:"(Continue on separate sheet if necessary)"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:"SIGNATURE"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:(()=>{console.log("All formData keys:",Object.keys(t)),console.log("formData object:",t),console.log("employeeMedia array:",l);const o=["signature_path","signature","signature_image","signature_file","employee_signature","signature_url"];let c=null;for(const d of o)if(t[d]){c=t[d],console.log(`Found signature field in formData: ${d} = ${c}`);break}if(!c&&l&&l.length>0){console.log("Checking employeeMedia array for signature...");for(const d of l)if(console.log("Media item:",d),d.signature_path){c=d.signature_path,console.log(`Found signature in employeeMedia: ${d.signature_path}`);break}}return console.log("Signature Path Debug:",{signature_path:t.signature_path,type:typeof t.signature_path,exists:!!t.signature_path,foundField:c,employeeMediaLength:l?l.length:0}),c?e.jsx("img",{src:c,alt:"Signature",style:{maxWidth:"100%",maxHeight:"40px",objectFit:"contain",border:"1px solid #ccc"},onError:d=>{console.error("Image load error:",d),console.error("Failed to load signature image:",c)},onLoad:()=>{console.log("Signature image loaded successfully:",c)}}):(console.log("No signature path provided"),console.log("To add signature:"),console.log("1. Fetch employee_media data with signature_path field"),console.log("2. Pass it as employeeMedia prop to PdsPrintPage1 component"),console.log("3. Or add signature_path directly to formData object"),e.jsxs("div",{style:{color:"#999",fontSize:"8px",textAlign:"center",border:"1px dashed #ccc",padding:"5px",backgroundColor:"#f9f9f9"},children:[e.jsx("div",{children:"No signature data found"}),e.jsx("div",{style:{fontSize:"6px",marginTop:"2px"},children:"Add employeeMedia prop with signature_path"})]}))})()}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:"DATE"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:n(t.date_accomplished)||""})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"right",verticalAlign:"middle",height:"20px"},children:" CS FORM 212 (Revised 2017), Page 1 of 4"})})]})]})]})]})},pb=({formData:t,civilServiceEligibility:s=[],workExperience:r=[],displayValue:n,formatDate:a,displayYesNo:l})=>{const i=o=>{if(!o||o===""||o==="0000-00-00")return"N/A";if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(o))return o;try{const c=new Date(o);if(isNaN(c.getTime()))return console.log("Invalid date:",o),"N/A";const d=(c.getMonth()+1).toString().padStart(2,"0"),m=c.getDate().toString().padStart(2,"0"),u=c.getFullYear();return`${d}/${m}/${u}`}catch(c){return console.log("Date formatting error:",c,"for date:",o),"N/A"}};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          @media print {
            @page {
              size: 8.5in 13in;
              margin: 0.25in;
            }
            body {
              margin: 0;
              padding: 0;
              font-size: 9px;
              line-height: 1.1;
            }
            .pds-table {
              border-collapse: collapse !important;
              font-size: 8px !important;
              line-height: 1.0 !important;
            }
            .pds-table td {
              padding: 2px 3px !important;
              border: 1px solid #000 !important;
              vertical-align: top !important;
              white-space: normal !important;
              word-wrap: break-word !important;
              overflow-wrap: break-word !important;
            }
            .field-label {
              font-weight: normal !important;
              background-color: #f8f8f8 !important;
            }
            .field-value {
              background-color: white !important;
            }
            .section-title {
              background-color: #e0e0e0 !important;
              font-weight: bold !important;
              text-align: center !important;
            }
            .no-page-break {
              page-break-inside: avoid !important;
            }
            .checkbox {
              font-size: 12px !important;
              font-weight: bold !important;
              color: #000 !important;
              display: inline-block !important;
              margin-right: 3px !important;
            }
          }
        `}),e.jsxs("div",{className:"no-page-break",style:{width:"100%",maxWidth:"8.5in",margin:"0 auto",padding:"0.25in",fontSize:"10px",lineHeight:"1.3",fontFamily:"Arial, sans-serif",backgroundColor:"white",color:"black"},children:[e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"20%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"20%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"20%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"IV. CIVIL SERVICE ELIGIBILITY"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"CAREER SERVICE/ RA 1080 (BOARD/ BAR) UNDER SPECIAL LAWS/ CES/ CSEE BARANGAY ELIGIBILITY / DRIVER'S LICENSE"}),e.jsxs("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["RATING ",e.jsx("br",{}),"(if Applicable)"]}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"DATE OF EXAMINATION/ CONFERMENT"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"PLACE OF EXAMINATION / CONFERMENT"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"LICENSE NUMBER (if applicatble)"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"NUMBER"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"DATE OF VALIDITY"})]}),(()=>{const o=[];let c=!1;for(let d=0;d<9;d++){const m=s[d]||{},u=s[d]!==void 0&&m!==null,p=!u&&!c;p&&(c=!0),o.push(e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:u?n(m.eligibility_type):p?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?n(m.rating):p?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?i(m.date_of_examination):p?"N/A":""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:u?n(m.place_of_examination):p?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?n(m.license_number):p?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?i(m.date_of_validity):p?"N/A":""})]},d))}return o})(),e.jsx("tr",{children:e.jsx("td",{colspan:"6",style:{textAlign:"center",verticalAlign:"middle",color:"red"},children:"(Continue on separate sheet if necessary)"})})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"18%"}}),e.jsx("col",{style:{width:"18%"}}),e.jsx("col",{style:{width:"20%"}}),e.jsx("col",{style:{width:"12%"}}),e.jsx("col",{style:{width:"12%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"8%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"V. WORK EXPERIENCE"})}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"8",children:"(Include private employment.  Start from your recent work) Description of duties should be indicated in the attached Work Experience sheet."})}),e.jsxs("tr",{children:[e.jsxs("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["28 INCLUSIVE DATES ",e.jsx("br",{}),"(mm/dd/yyyy)"]}),e.jsxs("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["POSITION TITLE ",e.jsx("br",{}),"(Write in full/Do not abbreviate)"]}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"DEPARTMENT / AGENCY / OFFICE / COMPANY   (Write in full/Do not abbreviate)"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"MONTHLY SALARY"}),e.jsxs("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["SALARY/ JOB/ PAY GRADE ",e.jsx("br",{}),'(if applicable)& STEP  (Format "00-0")/ INCREMENT']}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"STATUS OF APPOINTMENT"}),e.jsxs("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["GOV'T SERVICE ",e.jsx("br",{}),"(Y/ N)"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"From"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"To"}),e.jsx("td",{className:"field-label"}),e.jsx("td",{className:"field-label"}),e.jsx("td",{className:"field-label"}),e.jsx("td",{className:"field-label"}),e.jsx("td",{className:"field-label"}),e.jsx("td",{className:"field-label"})]}),(()=>{const o=[];let c=!1;for(let d=0;d<28;d++){const m=d>=0?d-0:-1,u=m>=0?r[m]||{}:{},p=m>=0&&r[m]!==void 0&&u!==null,g=!p&&!c&&d>=0;g&&(c=!0),o.push(e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?i(u.date_from):g?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?u.is_present?"Present":i(u.date_to):g?"N/A":""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:p?n(u.position_title):g?"N/A":""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:p?n(u.department_agency_company):g?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?n(u.monthly_salary):g?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?n(u.salary_grade_step):g?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?n(u.status_of_appointment):g?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?l(u.government_service):g?"N/A":""})]},d))}return o})(),e.jsx("tr",{children:e.jsx("td",{colspan:"8",style:{textAlign:"center",verticalAlign:"middle",color:"red"},children:"(Continue on separate sheet if necessary)"})})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word",marginTop:"0.2in"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"18.5%"}}),e.jsx("col",{style:{width:"46.5%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"25%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"left",verticalAlign:"middle",height:"20px"},children:"(Continue on separate sheet if necessary)"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:"SIGNATURE"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:e.jsx("div",{style:{color:"#999",fontSize:"8px",textAlign:"center",border:"1px dashed #ccc",padding:"5px",backgroundColor:"#f9f9f9"},children:e.jsx("div",{children:"Signature area"})})}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:"DATE"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:n(t.date_accomplished)||""})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"right",verticalAlign:"middle",height:"20px"},children:" CS FORM 212 (Revised 2017), Page 2 of 4"})})]})]})]})]})},fb=({voluntaryWork:t=[],trainings:s=[],skills:r=[],recognitions:n=[],memberships:a=[],displayValue:l,formatDate:i,formData:o={}})=>{const c=d=>{if(!d||d===""||d==="0000-00-00")return"N/A";if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(d))return d;try{const m=new Date(d);if(isNaN(m.getTime()))return console.log("Invalid date:",d),"N/A";const u=(m.getMonth()+1).toString().padStart(2,"0"),p=m.getDate().toString().padStart(2,"0"),g=m.getFullYear();return`${u}/${p}/${g}`}catch(m){return console.log("Date formatting error:",m,"for date:",d),"N/A"}};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          @media print {
            @page {
              size: 8.5in 13in;
              margin: 0.25in;
            }
            body {
              margin: 0;
              padding: 0;
              font-size: 9px;
              line-height: 1.1;
            }
            .pds-table {
              border-collapse: collapse !important;
              font-size: 8px !important;
              line-height: 1.0 !important;
            }
            .pds-table td {
              padding: 2px 3px !important;
              border: 1px solid #000 !important;
              vertical-align: top !important;
              white-space: normal !important;
              word-wrap: break-word !important;
              overflow-wrap: break-word !important;
            }
            .field-label {
              font-weight: normal !important;
              background-color: #f8f8f8 !important;
            }
            .field-value {
              background-color: white !important;
            }
            .section-title {
              background-color: #e0e0e0 !important;
              font-weight: bold !important;
              text-align: center !important;
            }
            .no-page-break {
              page-break-inside: avoid !important;
            }
            .checkbox {
              font-size: 12px !important;
              font-weight: bold !important;
              color: #000 !important;
              display: inline-block !important;
              margin-right: 3px !important;
            }
          }
        `}),e.jsxs("div",{className:"no-page-break",style:{width:"100%",maxWidth:"8.5in",margin:"0 auto",padding:"0.25in",fontSize:"10px",lineHeight:"1.3",fontFamily:"Arial, sans-serif",backgroundColor:"white",color:"black"},children:[e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"50%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"30%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"VI. VOLUNTARY WORK OR INVOLVEMENT IN CIVIC/NON-GOVERNMENT/PEOPLE/VOLUNTARY ORGANIZATION/S"})}),e.jsxs("tr",{children:[e.jsxs("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["29. NAME & ADDRESS OF ORGANIZATION ",e.jsx("br",{})," (Write in full)"]}),e.jsxs("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["INCLUSIVE DATES ",e.jsx("br",{}),"(mm/dd/yyyy)"]}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"NUMBER OF HOURS"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"POSITION/NATURE OF WORK"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"From"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"To"})]}),Array.from({length:7},(d,m)=>{const u=t[m]||{},p=t[m]!==void 0&&u!==null;return e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:p?l(u.organization_name_address):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?c(u.date_from):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?c(u.date_to):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?l(u.number_of_hours):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?l(u.position_nature_of_work):""})]},m)}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"5",style:{textAlign:"center",verticalAlign:"middle",color:"red"},children:"(Continue on separate sheet if necessary)"})})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"40%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"20%"}}),e.jsx("col",{style:{width:"30%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsxs("td",{colSpan:"6",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:["VII. LEARNING AND DEVELOPMENT (L&D) INTERVENTIONS/TRAINING PROGRAMS ATTENDED",e.jsx("br",{})]})}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colSpan:"6",children:"Start from the most recent L&D/training program and include only the relevant L&D/training taken for the last five (5) years for Division Chief/Executive/Managerial positions)"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"30. TITLE OF LEARNING AND DEVELOPMENT INTERVENTIONS/TRAINING PROGRAMS"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"INCLUSIVE DATES OF ATTENDANCE"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"NUMBER OF HOURS"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"Type of LD (Managerial/ Supervisory/Technical/etc)"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:" CONDUCTED/ SPONSORED BY"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"From"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"To"})]}),Array.from({length:21},(d,m)=>{const u=s[m]||{},p=s[m]!==void 0&&u!==null;return e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:p?l(u.training_title):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?c(u.date_from):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?c(u.date_to):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:p?l(u.number_of_hours):""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:p?l(u.type_of_ld):""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:p?l(u.conducted_sponsored_by):""})]},m)}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"6",style:{textAlign:"center",verticalAlign:"middle",color:"red"},children:"(Continue on separate sheet if necessary)"})})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"30%"}}),e.jsx("col",{style:{width:"50%"}}),e.jsx("col",{style:{width:"20%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"VIII. OTHER INFORMATION"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"31. SPECIAL SKILLS and HOBBIES"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"32. NON-ACADEMIC DISTINCTIONS / RECOGNITION"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"33. MEMBERSHIP IN ASSOCIATION/ORGANIZATION"})]}),Array.from({length:10},(d,m)=>{const u=r[m]||{},p=n[m]||{},g=a[m]||{},j=r[m]!==void 0&&u!==null,y=n[m]!==void 0&&p!==null,v=a[m]!==void 0&&g!==null;return e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:j?l(u.skill_hobby):""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:y?l(p.recognition):""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:v?l(g.organization):""})]},m)}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",verticalAlign:"middle",color:"red"},children:"(Continue on separate sheet if necessary)"})})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word",marginTop:"0.2in"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"18.5%"}}),e.jsx("col",{style:{width:"46.5%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"25%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"left",verticalAlign:"middle",height:"20px"},children:"(Continue on separate sheet if necessary)"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:"SIGNATURE"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:e.jsx("div",{style:{color:"#999",fontSize:"8px",textAlign:"center",border:"1px dashed #ccc",padding:"5px",backgroundColor:"#f9f9f9"},children:e.jsx("div",{children:"Signature area"})})}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:"DATE"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:l(o.date_accomplished)||""})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"right",verticalAlign:"middle",height:"20px"},children:" CS FORM 212 (Revised 2017), Page 3 of 4"})})]})]})]})]})},xb=({declarations:t={},references:s=[],governmentIds:r=[],signatureData:n="",photoData:a="",thumbmarkData:l="",dateAccomplished:i="",displayValue:o,displayYesNo:c,formatDate:d,formData:m={}})=>{var u,p,g,j;return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          @media print {
            @page {
              size: 8.5in 13in;
              margin: 0.25in;
            }
            body {
              margin: 0;
              padding: 0;
              font-size: 9px;
              line-height: 1.1;
            }
            .pds-table {
              border-collapse: collapse !important;
              font-size: 8px !important;
              line-height: 1.0 !important;
            }
            .pds-table td {
              padding: 2px 3px !important;
              border: 1px solid #000 !important;
              vertical-align: top !important;
              white-space: normal !important;
              word-wrap: break-word !important;
              overflow-wrap: break-word !important;
            }
            .field-label {
              font-weight: normal !important;
              background-color: #f8f8f8 !important;
            }
            .field-value {
              background-color: white !important;
            }
            .section-title {
              background-color: #e0e0e0 !important;
              font-weight: bold !important;
              text-align: center !important;
            }
            .no-page-break {
              page-break-inside: avoid !important;
            }
            .checkbox {
              font-size: 12px !important;
              font-weight: bold !important;
              color: #000 !important;
              display: inline-block !important;
              margin-right: 3px !important;
            }
            .yes-no-box {
              font-size: 20px !important;
              font-weight: bold !important;
              color: #000 !important;
              display: inline-block !important;
              margin-right: 8px !important;
              width: 20px !important;
              height: 20px !important;
              text-align: center !important;
              line-height: 18px !important;
              border: 2px solid #000 !important;
              background-color: #fff !important;
              vertical-align: middle !important;
            }
            .checkbox-large {
              width: 20px !important;
              height: 20px !important;
              border: 2px solid #000 !important;
              background-color: #fff !important;
              display: inline-block !important;
              margin-right: 8px !important;
              vertical-align: middle !important;
              position: relative !important;
            }
            .checkbox-large.checked::after {
              content: 'X' !important;
              position: absolute !important;
              top: 50% !important;
              left: 50% !important;
              transform: translate(-50%, -50%) !important;
              font-size: 16px !important;
              font-weight: 900 !important;
              color: #000 !important;
              z-index: 10 !important;
              display: block !important;
              line-height: 1 !important;
              text-shadow: none !important;
            }
            .checkbox-large.checked {
              background-color: #f0f0f0 !important;
              border: 3px solid #000 !important;
            }
            .photo-box {
              border: 1px solid #000;
              padding: 5px;
              display: inline-block;
            }
          }
        `}),e.jsxs("div",{className:"no-page-break",style:{width:"100%",maxWidth:"8.5in",margin:"0 auto",padding:"0.25in",fontSize:"10px",lineHeight:"1.3",fontFamily:"Arial, sans-serif",backgroundColor:"white",color:"black"},children:[e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.01in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"50%"}}),e.jsx("col",{style:{width:"25%"}}),e.jsx("col",{style:{width:"25%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"IX. DECLARATIONS"})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"34. Are you related by consanguinity or affinity to the appointing or recommending authority, or to the chief of bureau or office or to the person who has immediate supervision over you in the Office, Bureau or Department where you will be apppointed,  "}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"}}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"}})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"a. within the third degree?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{className:"checkbox-large",style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.third_degree?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.third_degree?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{className:"checkbox-large",style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.third_degree&&t.third_degree!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.third_degree&&t.third_degree!==void 0?"":""})," NO"]})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"b. within the fourth degree? (for Local Government Unit - Career Employees)"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.fourth_degree?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.fourth_degree?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.fourth_degree&&t.fourth_degree!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.fourth_degree&&t.fourth_degree!==void 0?"":""})," NO"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:" "}),e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:o(t.thirtyfour_b_details)}),e.jsx("td",{})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"35. a. Have you ever been found guilty of any administrative offense?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.thirtyfive_a?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.thirtyfive_a?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.thirtyfive_a&&t.thirtyfive_a!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.thirtyfive_a&&t.thirtyfive_a!==void 0?"":""})," NO"]})]}),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{}),e.jsx("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:o(t.thirtyfive_a_details)})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"b. Have you been criminally charged before any court?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.criminally_charged?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.criminally_charged?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.criminally_charged&&t.criminally_charged!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.criminally_charged&&t.criminally_charged!==void 0?"":""})," NO"]})]}),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"BIf YES, give details: "})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{}),e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",o(t.thirtyfive_datefiled)]}),e.jsx("td",{})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{}),e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Status of Case/s: ",o(t.thirtyfive_statuses)]}),e.jsx("td",{})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"36. Have you ever been convicted of any crime or violation of any law, decree, ordinance or regulation?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.convicted?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.convicted?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.convicted&&t.convicted!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.convicted&&t.convicted!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",o(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"37. Have you ever been separated from the service in any of the following modes?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.separated_service?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.separated_service?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.separated_service&&t.separated_service!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.separated_service&&t.separated_service!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",o(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"38. a. Have you ever been a candidate in a national or local election held within the last year?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.candidate?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.candidate?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.candidate&&t.candidate!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.candidate&&t.candidate!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",o(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"b. Have you resigned from the government service during the three (3)-month period before the last election to promote/actively campaign for a national or local candidate?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.candidate?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.candidate?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.candidate&&t.candidate!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.candidate&&t.candidate!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",o(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"39. Have you acquired the status of an immigrant or permanent resident of another country?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.indigenous_group?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.indigenous_group?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.indigenous_group&&t.indigenous_group!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.indigenous_group&&t.indigenous_group!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",o(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"40. Pursuant to: (a) Indigenous People's Act (RA 8371); (b) Magna Carta for Disabled Persons (RA 7277); and (c) Solo Parents Welfare Act of 2000 (RA 8972), please answer the following items:"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.pwd?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.pwd?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.pwd&&t.pwd!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.pwd&&t.pwd!==void 0?"":""})," NO"]})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"a. Are you a member of any indigenous group?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.indigenous_group?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.indigenous_group?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.indigenous_group&&t.indigenous_group!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.indigenous_group&&t.indigenous_group!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",o(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"b. Are you a person with disability?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.indigenous_group?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.indigenous_group?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.indigenous_group&&t.indigenous_group!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.indigenous_group&&t.indigenous_group!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",o(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"c. Are you a solo parent??"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.indigenous_group?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.indigenous_group?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.indigenous_group&&t.indigenous_group!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.indigenous_group&&t.indigenous_group!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",o(t.fourth_degree_details)]})})]})]}),e.jsxs("table",{className:"pds-table",style:{marginTop:"3px",tableLayout:"fixed",width:"100%"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"40%"}}),e.jsx("col",{style:{width:"23%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"18%"}})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"left",verticalAlign:"middle",height:"30px",fontSize:"11px"},children:"41. REFERENCES  (Person not related by consanguinity or affinity to applicant /appointee)"}),e.jsx("td",{className:"field-label",rowspan:"5",style:{textAlign:"center",verticalAlign:"middle",height:"30px"},children:e.jsx("div",{style:{border:"1px solid #000",height:"120px",width:"90px",margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f9f9f9"},children:a?e.jsx("img",{src:a,alt:"Employee Photo",style:{maxWidth:"85px",maxHeight:"115px",objectFit:"cover"}}):e.jsxs("div",{style:{color:"#999",fontSize:"10px",textAlign:"center"},children:["Photo",e.jsx("br",{}),"(Passport Size)"]})})})]}),Array.from({length:3},(y,v)=>{const h=s[v]||{},f=s[v]!==void 0&&h!==null;return e.jsxs("tr",{style:{height:"40px"},children:[e.jsx("td",{className:"field-value",style:{textAlign:"left",verticalAlign:"middle"},children:f?o(h.reference_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"left",verticalAlign:"middle"},children:f?o(h.reference_address):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:f?o(h.reference_tel_no):""})]},v)}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"justify",verticalAlign:"middle"},children:"42. I declare under oath that I have personally accomplished this Personal Data Sheet which is a true, correct and complete statement pursuant to the provisions of pertinent laws, rules and regulations of the Republic of the Philippines. I authorize the agency head/authorized representative to verify/validate the contents stated herein. I agree that any misrepresentation made in this document and its attachments shall cause the filing of administrative/criminal case/s against me."})})]})]}),e.jsxs("table",{className:"pds-table",style:{marginTop:"3px",tableLayout:"fixed",width:"100%"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"12%"}}),e.jsx("col",{style:{width:"12%"}}),e.jsx("col",{style:{width:"46%"}}),e.jsx("col",{style:{width:"25%"}})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsxs("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"30px",fontSize:"9px"},children:["Government Issued ID   ",e.jsx("br",{}),"(i.e.Passport, GSIS, SSS, PRC, Driver's License, etc.)"]}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"30px",fontSize:"8px"},children:"PLEASE INDICATE ID Number and Date of Issuance"}),e.jsx("td",{className:"field-label",rowspan:"4",style:{textAlign:"center",verticalAlign:"middle",height:"30px"},children:e.jsx("div",{style:{border:"1px solid #000",height:"80px",width:"200px",margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f9f9f9"},children:n?e.jsx("img",{src:n,alt:"Signature",style:{maxWidth:"190px",maxHeight:"75px",objectFit:"contain"}}):e.jsx("div",{style:{color:"#999",fontSize:"10px",textAlign:"center"},children:"Signature"})})}),e.jsx("td",{className:"field-label",rowspan:"6",style:{textAlign:"center",verticalAlign:"middle",height:"30px"},children:e.jsx("div",{style:{border:"1px solid #000",height:"144px",width:"144px",margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f9f9f9"},children:l?e.jsx("img",{src:l,alt:"Thumbmark",style:{maxWidth:"140px",maxHeight:"140px",objectFit:"contain"}}):e.jsxs("div",{style:{color:"#999",fontSize:"10px",textAlign:"center"},children:["Thumbmark",e.jsx("br",{}),'(2" x 2")']})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle",height:"30px",fontSize:"10px"},children:"Government Issued ID:"}),e.jsx("td",{className:"field-value",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle",height:"40px",fontSize:"9px"},children:r.length>0?o((u=r[0])==null?void 0:u.government_issued_id):"_____"})]}),e.jsx("tr",{}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle",height:"30px",fontSize:"10px"},children:"ID/License/Passport No.:"}),e.jsx("td",{className:"field-value",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle",height:"40px",fontSize:"9px"},children:r.length>0?o((p=r[0])==null?void 0:p.id_number):"_____"})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"9px",fontSize:"9px"},children:"Signature (Sign inside the box)"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle",height:"30px",fontSize:"10px"},children:"Date/Place of Issuance:"}),e.jsxs("td",{className:"field-value",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle",height:"40px",fontSize:"9px"},children:[r.length>0?d((g=r[0])==null?void 0:g.date_issued):"____"," / ",r.length>0?o((j=r[0])==null?void 0:j.place_of_issuance):"_________________"]}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"20px",fontSize:"9px"},children:o(i)||"_________________"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"15x"},children:" Date Accomplished"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"15px"},children:"Right Thumbmark"})]})]})]}),e.jsx("table",{className:"pds-table",style:{marginTop:"3px"},children:e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{className:"field-label",style:{padding:"10px",textAlign:"left",verticalAlign:"top",fontSize:"10px"},children:"SUBSCRIBED AND SWORN to before me this ___________________________, affiant exhibiting his/her validly issued government ID as indicated above."})}),e.jsx("tr",{children:e.jsx("td",{style:{padding:"20px",textAlign:"center",verticalAlign:"top",borderBottom:"1px solid #000"},children:e.jsx("div",{style:{border:"0px solid #000",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"3px"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{style:{fontWeight:"bold",fontSize:"12px"},children:"____insert here the municipal mayor's name__________________"}),e.jsx("div",{style:{fontSize:"10px",marginTop:"3px"},children:"Person Administering Oath"})]})})})})]})}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.01in",whiteSpace:"normal",wordWrap:"break-word",marginTop:"0.01n"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"18.5%"}}),e.jsx("col",{style:{width:"46.5%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"25%"}})]}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"right",verticalAlign:"middle",height:"20px"},children:" CS FORM 212 (Revised 2017), Page 4 of 4"})})})]})]})]})},f7=({formData:t,children:s=[],education:r=[],civilServiceEligibility:n=[],workExperience:a=[],voluntaryWork:l=[],trainings:i=[],skills:o=[],recognitions:c=[],memberships:d=[],declarations:m={},references:u=[],governmentIds:p=[],signatureData:g="",photoData:j="",thumbmarkData:y="",dateAccomplished:v="",pageNumber:h=null})=>{const f=S=>!S||S===""||S===null||S===void 0||S==="0000-00-00"?"N/A":S,N=S=>{if(!S||S===""||S==="0000-00-00")return"N/A";try{return new Date(S).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return f(S)}},b=S=>S===!0||S==="true"||S===1?"YES":S===!1||S==="false"||S===0?"NO":"N/A",w=`
    @media print {
      @page {
        size: legal;
        margin: 0.5in;
      }
      
      body {
        font-family: Arial, sans-serif;
        font-size: 9pt;
        line-height: 1.2;
        margin: 0;
        padding: 0;
      }
      
      .page-break {
        page-break-after: always;
      }
      
      .no-page-break {
        page-break-inside: avoid;
      }
      
      .pds-container {
        width: 100%;
        max-width: none;
      }
      
      .pds-header {
        text-align: center;
        font-weight: bold;
        font-size: 10pt;
        margin-bottom: 20px;
        border-bottom: 2px solid black;
        padding-bottom: 10px;
      }
      
      .pds-header-main {
        text-align: center;
        margin-bottom: 20px;
      }
      
      .form-number {
        font-size: 10pt;
        font-weight: bold;
      }
      
      .form-revision {
        font-size: 9pt;
        font-weight: normal;
      }
      
      .form-title {
        font-size: 16pt;
        font-weight: bold;
        margin: 10px 0;
        text-transform: uppercase;
      }
      
      .warning-text {
        font-size: 9pt;
        margin: 10px 0;
        text-align: left;
      }
      
      .instructions-text {
        font-size: 9pt;
        margin: 10px 0;
        text-align: left;
        font-weight: normal;
      }
      
      .filling-guidelines {
        font-size: 9pt;
        margin: 10px 0;
        text-align: left;
      }
      
      .checkbox-field {
        display: inline-flex;
        align-items: center;
        gap: 5px;
      }
      
      .checkbox-group {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 5px;
      }
      
      .checked-box {
        color: black;
      }
      
      .unchecked-box {
        color: black;
      }
      
      .other-field {
        margin-top: 5px;
        font-size: 8pt;
      }
      
      .citizenship-fields {
        display: flex;
        flex-direction: column;
        gap: 5px;
      }
      
      .dual-citizenship-details {
        margin-top: 10px;
        font-size: 8pt;
      }
      
      .checkbox {
        font-family: Arial, sans-serif;
        font-size: 12pt;
      }
      
      .pds-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 15px;
        font-size: 9pt;
      }
      
      .pds-table td, .pds-table th {
        border: 1px solid black;
        padding: 3px 4px;
        vertical-align: top;
      }
      
      .pds-table th {
        background-color: #f0f0f0;
        font-weight: bold;
        text-align: left;
      }
      
      .field-label {
        font-weight: bold;
        background-color: #f8f8f8;
        width: 25%;
      }
      
      .field-value {
        width: 75%;
      }
      
      .section-title {
        font-weight: bold;
        font-size: 10pt;
        background-color: #e0e0e0;
        text-align: center;
        padding: 5px;
        border: 1px solid black;
      }
      
      .yes-no-box {
        width: 20px;
        height: 15px;
        display: inline-block;
        border: 1px solid black;
        margin: 0 5px;
        text-align: center;
        padding-top: 1px;
      }
      
      .signature-box {
        width: 300px;
        height: 80px;
        border: 1px solid black;
        display: inline-block;
        margin: 5px;
      }
      
      .photo-box {
        width: 140px;
        height: 180px;
        border: 1px solid black;
        display: inline-block;
        text-align: center;
        padding: 5px;
      }
      
      .page-number {
        text-align: center;
        font-size: 8pt;
        margin-top: 20px;
      }
    }
    
    @media screen {
      body {
        font-family: Arial, sans-serif;
        font-size: 9pt;
        line-height: 1.2;
        margin: 20px;
      }
      
      .pds-container {
        width: 100%;
        max-width: 100%;
      }
      
      .pds-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 15px;
        font-size: 9pt;
      }
      
      .pds-table td, .pds-table th {
        border: 1px solid black;
        padding: 3px 4px;
        vertical-align: top;
      }
      
      .pds-table th {
        background-color: #f0f0f0;
        font-weight: bold;
        text-align: left;
      }
      
      .field-label {
        font-weight: bold;
        background-color: #f8f8f8;
        width: 25%;
      }
      
      .field-value {
        width: 75%;
      }
      
      .section-title {
        font-weight: bold;
        font-size: 10pt;
        background-color: #e0e0e0;
        text-align: center;
        padding: 5px;
        border: 1px solid black;
      }
      
      .pds-header-main {
        text-align: center;
        margin-bottom: 20px;
      }
      
      .form-number {
        font-size: 10pt;
        font-weight: bold;
      }
      
      .form-revision {
        font-size: 9pt;
        font-weight: normal;
      }
      
      .form-title {
        font-size: 16pt;
        font-weight: bold;
        margin: 10px 0;
        text-transform: uppercase;
      }
      
      .warning-text {
        font-size: 9pt;
        margin: 10px 0;
        text-align: left;
      }
      
      .instructions-text {
        font-size: 9pt;
        margin: 10px 0;
        text-align: left;
        font-weight: normal;
      }
      
      .filling-guidelines {
        font-size: 9pt;
        margin: 10px 0;
        text-align: left;
      }
      
      .checkbox-field {
        display: inline-flex;
        align-items: center;
        gap: 5px;
      }
      
      .checkbox-group {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 5px;
      }
      
      .checked-box {
        color: black;
      }
      
      .unchecked-box {
        color: black;
      }
      
      .other-field {
        margin-top: 5px;
        font-size: 8pt;
      }
      
      .citizenship-fields {
        display: flex;
        flex-direction: column;
        gap: 5px;
      }
      
      .dual-citizenship-details {
        margin-top: 10px;
        font-size: 8pt;
      }
      
      .checkbox {
        font-family: Arial, sans-serif;
        font-size: 12pt;
      }
      
      .civil-status-layout {
        display: flex;
        flex-direction: column;
        gap: 3px;
      }
      
      .civil-status-left {
        display: inline-block;
        width: 45%;
      }
      
      .civil-status-right {
        display: inline-block;
        width: 45%;
        margin-left: 10%;
      }
      
      .citizenship-layout {
        display: flex;
        flex-direction: column;
        gap: 3px;
      }
      
      .citizenship-main {
        display: inline-flex;
        align-items: center;
        gap: 10px;
      }
      
      .dual-citizenship-sub {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        margin-left: 20px;
      }
      
      .citizenship-instruction {
        font-size: 8pt;
        margin-top: 5px;
      }
      
      .citizenship-country {
        font-size: 8pt;
        margin-top: 2px;
      }
      
      .address-label-left {
        font-weight: bold;
        background-color: #f8f8f8;
        width: 25%;
      }
      
      .address-field-left {
        width: 25%;
      }
      
      .address-label-right {
        font-weight: bold;
        background-color: #f8f8f8;
        width: 25%;
      }
      
      .address-field-right {
        width: 25%;
      }
      
      .citizenship-span {
        vertical-align: top;
        height: 100%;
      }
      
      .residential-address-span {
        vertical-align: top;
        height: 100%;
      }
      
      .residential-address-layout {
        display: flex;
        flex-direction: column;
        gap: 2px;
        font-size: 8pt;
      }
      
      .address-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1px;
      }
      
      .address-label {
        font-weight: bold;
        font-size: 7pt;
        min-width: 60px;
      }
      
      .address-value {
        flex: 1;
        font-size: 8pt;
        margin-left: 5px;
      }
      
      .residential-address-header {
        vertical-align: top;
        display: flex;
        flex-direction: column;
        gap: 2px;
      }
      
      .zip-label-in-header {
        font-weight: bold;
        font-size: 8pt;
        text-align: center;
        margin-top: 5px;
      }
      
      .address-label-col4 {
        font-weight: bold;
        font-size: 8pt;
        text-align: center;
      }
      
      .address-label-col5 {
        font-weight: bold;
        font-size: 8pt;
        text-align: center;
      }
      
      .residential-address-content {
        vertical-align: top;
      }
      
      .zip-value-cell {
        font-weight: bold;
        text-align: center;
        vertical-align: middle;
      }
      
      .row-number {
        font-weight: bold;
        text-align: center;
        width: 30px;
        background-color: #f8f8f8;
      }
    }
  `,D=S=>{switch(S){case 1:return e.jsx(hb,{formData:t,children:s,education:r,displayValue:f,formatDate:N});case 2:return e.jsx(pb,{formData:t,civilServiceEligibility:n,workExperience:a,displayValue:f,formatDate:N,displayYesNo:b});case 3:return e.jsx(fb,{voluntaryWork:l,trainings:i,skills:o,recognitions:c,memberships:d,displayValue:f,formatDate:N});case 4:return e.jsx(xb,{declarations:m,references:u,governmentIds:p,signatureData:g,photoData:j,thumbmarkData:y,dateAccomplished:v,displayValue:f,displayYesNo:b,formatDate:N});default:return e.jsxs(e.Fragment,{children:[e.jsx(hb,{formData:t,children:s,education:r,displayValue:f,formatDate:N}),e.jsx("div",{className:"page-break"}),e.jsx(pb,{formData:t,civilServiceEligibility:n,workExperience:a,displayValue:f,formatDate:N,displayYesNo:b}),e.jsx("div",{className:"page-break"}),e.jsx(fb,{voluntaryWork:l,trainings:i,skills:o,recognitions:c,memberships:d,displayValue:f,formatDate:N}),e.jsx("div",{className:"page-break"}),e.jsx(xb,{declarations:m,references:u,governmentIds:p,signatureData:g,photoData:j,thumbmarkData:y,dateAccomplished:v,displayValue:f,displayYesNo:b,formatDate:N})]})}};return e.jsxs("div",{className:"pds-container",children:[e.jsx("style",{children:w}),D(h)]})},Uc="201-pds",x7=({isOpen:t,onClose:s,selectedEmployee:r,onSave:n})=>{const{can:a,loading:l}=Vs(),i=a(Uc,"read"),o=a(Uc,"create"),c=a(Uc,"update"),d=a(Uc,"print"),m=r!=null&&r.hasPDS?c:o,u=!m||l,[p,g]=x.useState(1),[j,y]=x.useState(!1),[v,h]=x.useState({}),[f,N]=x.useState(0),[b,w]=x.useState([]),[D,S]=x.useState(!1),[C,T]=x.useState(!1),[_,E]=x.useState({dtruserid:"",badgenumber:"",cs_id_no:"",surname:"",firstname:"",middlename:"",name_extension:"",date_of_birth:"",place_of_birth:"",sex:"",civil_status:"",height:"",height_unit:"m",weight:"",weight_unit:"kg",blood_type:"",gsis:"",pagibig:"",philhealth:"",sss:"",tin:"",agency_no:"",citizenship_filipino:!0,citizenship_dual:!1,dual_citizenship_type:"",dual_citizenship_country:"",residential_house_block_lot:"",residential_street:"",residential_subdivision_village:"",residential_barangay:"",residential_city_municipality:"",residential_province:"",residential_zip_code:"",permanent_same_as_residential:!1,permanent_house_block_lot:"",permanent_street:"",permanent_subdivision_village:"",permanent_barangay:"",permanent_city_municipality:"",permanent_province:"",permanent_zip_code:"",telephone:"",mobile:"",email:"",spouse_surname:"",spouse_firstname:"",spouse_middlename:"",spouse_extension:"",spouse_occupation:"",spouse_employer_business_name:"",spouse_business_address:"",spouse_telephone:"",father_surname:"",father_firstname:"",father_middlename:"",father_extension:"",mother_surname:"",mother_firstname:"",mother_middlename:""}),[A,L]=x.useState([{full_name:"",date_of_birth:""}]),[F,W]=x.useState([{level:"Elementary",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Secondary",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Vocational/Trade Course",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"College",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Graduate Studies",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""}]),[Y,q]=x.useState([{eligibility_type:"",rating:"",date_of_examination:"",place_of_examination:"",license_number:"",date_of_validity:""}]),[J,O]=x.useState([{date_from:"",date_to:"",position_title:"",department_agency_company:"",monthly_salary:"",salary_grade_step:"",status_of_appointment:"",government_service:"",is_present:!1}]),M=["Elementary","Secondary","Vocational/Trade Course","College","Graduate Studies"],k=ce=>{if(!ce)return"";if(ce instanceof Date&&!Number.isNaN(ce.getTime())){const Fe=ce.getFullYear(),se=String(ce.getMonth()+1).padStart(2,"0"),pe=String(ce.getDate()).padStart(2,"0");return`${Fe}-${se}-${pe}`}const je=String(ce).trim();if(!je)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(je))return je;const de=je.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(de){const[,Fe,se,pe]=de;return`${pe}-${Fe.padStart(2,"0")}-${se.padStart(2,"0")}`}return""},I=ce=>{if(!ce)return"";if(/^\d{4}$/.test(String(ce)))return String(ce);try{const je=new Date(ce);return Number.isNaN(je.getTime())?"":String(je.getFullYear())}catch{return""}},K=(ce=[])=>{const je=new Map((ce||[]).filter(Boolean).map(de=>[de.level,de]));return M.map(de=>{const Fe=je.get(de)||{};return{level:de,school_name:Fe.school_name||"",degree_course:Fe.degree_course||Fe.course||"",period_from:k(Fe.period_from||Fe.from||""),period_to:k(Fe.period_to||Fe.to||""),highest_level_units:Fe.highest_level_units||Fe.highest_level||"",year_graduated:I(Fe.year_graduated||""),scholarship_honors:Fe.scholarship_honors||Fe.honor_received||""}})},[z,P]=x.useState([{organization_name_address:"",date_from:"",date_to:"",number_of_hours:"",position_nature_of_work:""}]),[R,B]=x.useState([{training_title:"",date_from:"",date_to:"",number_of_hours:"",type_of_ld:"",conducted_sponsored_by:""}]),[U,G]=x.useState([{skill_hobby:""}]),[$,X]=x.useState([{recognition:""}]),[Q,Ne]=x.useState([{organization:""}]),[V,re]=x.useState({third_degree:!1,fourth_degree:!1,fourth_degree_details:"",guilty_admin:!1,guilty_admin_details:"",thirtyfive_b:!1,thirtyfive_datefiled:"",thirtyfive_statuses:"",convicted:!1,convicted_details:"",separated_service:!1,separated_service_details:"",candidate:!1,candidate_details:"",resigned_campaign:!1,resigned_campaign_details:"",immigrant:!1,immigrant_country:"",indigenous_group:!1,indigenous_group_details:"",pwd:!1,pwd_id_no:"",solo_parent:!1,solo_parent_id_no:""}),[ne,xe]=x.useState([{reference_name:"",reference_address:"",reference_tel_no:""}]),[me,Z]=x.useState([{government_issued_id:"",id_number:"",date_issued:"",place_of_issuance:"",status:"active"}]),[ee,ye]=x.useState(!1),[ve,ue]=x.useState(!1),[we,De]=x.useState(""),[le,Ie]=x.useState({value:"",unit:"",convertedValue:""}),[ge,Ge]=x.useState(""),[ke,Re]=x.useState(""),[Ke,Xe]=x.useState(""),[Se,lt]=x.useState(""),[it,Pt]=x.useState([]),[Nt,At]=x.useState([]),[Ce,Ze]=x.useState([]),[fe,Pe]=x.useState(!1);x.useEffect(()=>{console.log(" [PDS] Eligibility types state updated:",Ce.length,"items"),console.log(" [PDS] Eligibility types array:",Ce),Ce.length>0?(console.log(" [PDS] First few eligibility types:",Ce.slice(0,3)),console.log(" [PDS] Sample eligibility type structure:",Ce[0])):console.log(" [PDS] No eligibility types loaded")},[Ce]);const Le=()=>{console.log(" [PDS] Resetting form state for new session"),E({dtruserid:"",badgenumber:"",surname:"",firstname:"",middlename:"",extension:"",date_of_birth:"",place_of_birth:"",sex:"",civil_status:"",height:"",weight:"",blood_type:"",gsis:"",pagibig:"",philhealth:"",sss:"",tin:"",agency_no:"",residential_house_block_lot:"",residential_street:"",residential_subdivision_village:"",residential_barangay:"",residential_city_municipality:"",residential_province:"",residential_zip_code:"",permanent_same_as_residential:!1,permanent_house_block_lot:"",permanent_street:"",permanent_subdivision_village:"",permanent_barangay:"",permanent_city_municipality:"",permanent_province:"",permanent_zip_code:"",telephone:"",mobile:"",email:"",spouse_surname:"",spouse_firstname:"",spouse_middlename:"",spouse_extension:"",spouse_occupation:"",employer_business_name:"",business_address:"",spouse_telephone_no:"",father_surname:"",father_firstname:"",father_middlename:"",father_extension:"",mother_surname:"",mother_firstname:"",mother_middlename:"",citizenship_filipino:!0,citizenship_dual:!1,dual_citizenship_type:"",dual_citizenship_country:""}),L([{full_name:"",date_of_birth:""}]),W([{level:"Elementary",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Secondary",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Vocational/Trade Course",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"College",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Graduate Studies",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""}]),xe([{reference_name:"",reference_address:"",reference_tel_no:""}]),q([]),O([]),P([]),B([]),G([]),Z([{government_issued_id:"",id_number:"",date_issued:"",place_of_issuance:"",status:"active"}]),re({third_degree:!1,fourth_degree:!1,guilty_admin:!1,thirtyfive_b:!1,convicted:!1,separated_service:!1,candidate:!1,resigned_campaign:!1,immigrant:!1,indigenous_group:!1,pwd:!1,solo_parent:!1,fourth_degree_details:"",guilty_admin_details:"",thirtyfive_datefiled:"",thirtyfive_statuses:"",separated_service_details:"",candidate_details:"",resigned_campaign_details:"",immigrant_country:"",indigenous_group_details:"",pwd_id_no:"",solo_parent_id_no:"",authorized_government:!1,authorized_government_details:""}),g(1),ye(!1),Ie({value:"",unit:"",convertedValue:""}),ue(!1),De(""),N(0),w([]),S(!1),Ge(""),Xe(""),Re(""),h({}),y(!1),console.log(" [PDS] Form state reset completed")};x.useEffect(()=>{!t||l||!i||mt()},[t,l,i]),x.useEffect(()=>{t||(console.log(" [PDS] Modal closed, resetting form state"),Le())},[t]),x.useEffect(()=>()=>{console.log(" [PDS] Component unmounting, cleaning up state"),Le()},[]);const ut=()=>{if(!i){alert("You do not have permission to load lookup data.");return}console.log(" [PDS] Retrying lookup data fetch..."),mt()};x.useEffect(()=>{r&&(console.log(" [PDS] Selected employee changed, resetting form state first"),Le(),i&&setTimeout(()=>{r.hasPDS?(console.log(" [PDS] Loading existing PDS data for employee:",r.dtruserid),Be(r.dtruserid)):(console.log(" [PDS] Creating new PDS for employee:",r.dtruserid),E(ce=>({...ce,dtruserid:r.dtruserid,badgenumber:r.badgenumber}))),It(r.dtruserid)},100))},[r,i]),x.useEffect(()=>{!i||Object.keys(_).length===0||(r!=null&&r.dtruserid?It(r.dtruserid):dt())},[i,_,ne,me,F,Y,J,A,ee,r]);const Be=async ce=>{if(i)try{y(!0);const de=(await oe.get(`/201-employees/pds/${ce}`)).data.data;console.log(" [PDS] Received children data from API:",de.children),console.log(" [PDS] Received employee data from API:",{date_of_birth:de.employee.date_of_birth,place_of_birth:de.employee.place_of_birth,sex:de.employee.sex,birthdate:de.employee.birthdate,birthplace:de.employee.birthplace,gender:de.employee.gender});const Fe=Object.fromEntries(Object.entries(de.employee).map(([pe,H])=>{if(H==null)return[pe,""];if(pe==="date_of_birth"&&H){const ie=new Date(H);if(!isNaN(ie.getTime())){const ae=ie.toISOString().split("T")[0];return console.log(` [PDS] Converting date: ${H} -> ${ae}`),[pe,ae]}}return[pe,H]}));E(pe=>({...pe,...Fe,dtruserid:r.dtruserid,badgenumber:r.badgenumber})),console.log(" [PDS] FormData after setting:",{date_of_birth:Fe.date_of_birth,place_of_birth:Fe.place_of_birth,sex:Fe.sex});const se=Number(de.employee.pdscompleprogress)||0;if(N(se),console.log(" [PDS] Loaded completeness progress:",se),de.children&&de.children.length>0){const pe=de.children.map(H=>({full_name:H.full_name||"",date_of_birth:H.date_of_birth||""}));L(pe),console.log(" [PDS] Loaded children:",pe)}else L([{full_name:"",date_of_birth:""}]),console.log(" [PDS] No children data found, using default empty row");if(de.education&&de.education.length>0?W(K(de.education)):W(K([])),de.eligibility&&de.eligibility.length>0&&q(de.eligibility),de.workExperience&&de.workExperience.length>0){console.log(" Received work experience data:",de.workExperience);const pe=de.workExperience.map(H=>{const ie=H.is_present===!0||H.is_present===1||H.is_present==="true"||H.ispresent===!0||H.ispresent===1||H.ispresent==="true";return{...H,is_present:ie,date_to:ie&&(!H.date_to||H.date_to==="0"||H.date_to==="0000-00-00"||H.date_to==="")?new Date().toISOString().split("T")[0]:H.date_to}});O(pe)}if(de.voluntaryWork&&de.voluntaryWork.length>0&&(console.log(" Received voluntary work data:",de.voluntaryWork),P(de.voluntaryWork)),de.trainings&&de.trainings.length>0&&(console.log(" Received trainings data:",de.trainings),B(de.trainings)),de.skills&&de.skills.length>0&&(console.log(" Received skills data:",de.skills),G(de.skills)),de.recognitions&&de.recognitions.length>0&&(console.log(" Received recognitions data:",de.recognitions),X(de.recognitions)),de.memberships&&de.memberships.length>0&&(console.log(" Received memberships data:",de.memberships),Ne(de.memberships)),de.references&&de.references.length>0&&(console.log(" Received references data:",de.references),xe(de.references)),de.governmentIds&&de.governmentIds.length>0&&(console.log(" Received government IDs data:",de.governmentIds),Z(de.governmentIds)),de.declarations&&Object.keys(de.declarations).length>0){console.log(" Received declarations data:",de.declarations);const pe=ie=>ie===!0||ie==="true"||ie===1||ie==="1",H={third_degree:pe(de.declarations.third_degree),fourth_degree:pe(de.declarations.fourth_degree),fourth_degree_details:de.declarations.fourth_degree_details||"",guilty_admin:pe(de.declarations.guilty_admin),guilty_admin_details:de.declarations.guilty_admin_details||"",thirtyfive_b:pe(de.declarations.criminally_charged),thirtyfive_datefiled:k(de.declarations.criminally_charged_date),thirtyfive_statuses:de.declarations.criminally_charged_status||"",convicted:pe(de.declarations.convicted),convicted_details:de.declarations.convicted_details||"",separated_service:pe(de.declarations.separated_service),separated_service_details:de.declarations.separated_service_details||"",candidate:pe(de.declarations.candidate),candidate_details:de.declarations.candidate_details||"",resigned_campaign:pe(de.declarations.resigned_campaign),resigned_campaign_details:de.declarations.resigned_campaign_details||"",immigrant:pe(de.declarations.immigrant),immigrant_country:de.declarations.immigrant_country||"",indigenous_group:pe(de.declarations.indigenous_group),indigenous_group_details:de.declarations.indigenous_group_details||"",pwd:pe(de.declarations.pwd),pwd_id_no:de.declarations.pwd_id_no||"",solo_parent:pe(de.declarations.solo_parent),solo_parent_id_no:de.declarations.solo_parent_id_no||""};console.log(" Mapped declarations data:",H),console.log(" thirtyfive_datefiled value:",H.thirtyfive_datefiled),console.log(" thirtyfive_statuses value:",H.thirtyfive_statuses),re(H)}de.media&&Object.keys(de.media).length>0?(console.log(" Received media data:",de.media),de.media.signature&&de.media.signature.trim()!==""?(console.log(" Loading saved signature, length:",de.media.signature.length),Ge(de.media.signature)):console.log(" No signature data or empty string"),de.media.photo&&de.media.photo.trim()!==""?(console.log(" Loading saved photo, length:",de.media.photo.length),Xe(de.media.photo)):console.log(" No photo data or empty string"),de.media.thumb&&de.media.thumb.trim()!==""?(console.log(" Loading saved thumbmark, length:",de.media.thumb.length),lt(de.media.thumb)):console.log(" No thumbmark data or empty string"),de.media.date_accomplished&&(console.log(" Loading date accomplished:",de.media.date_accomplished),Re(de.media.date_accomplished))):console.log(" No media data received or empty object"),console.log(" Loaded existing PDS data for employee:",ce)}catch(je){console.error("Error fetching PDS data:",je)}finally{y(!1)}},mt=async()=>{var ce,je,de,Fe,se;if(i)try{console.log(" [PDS] Fetching lookup data..."),Pe(!0),console.log(" [PDS] API base URL:",oe.defaults.baseURL),console.log(" [PDS] API headers:",oe.defaults.headers),console.log(" [PDS] Starting API calls...");const[pe,H,ie]=await Promise.all([oe.get("/201-employees/lookup/blood-types"),oe.get("/201-employees/lookup/civil-statuses"),oe.get("/201-employees/eligibility-types")]);console.log(" [PDS] Blood types response:",pe.data),console.log(" [PDS] Civil statuses response:",H.data),console.log(" [PDS] Eligibility types response:",ie.data),console.log(" [PDS] Blood types data structure:",{hasData:!!pe.data.data,dataLength:(ce=pe.data.data)==null?void 0:ce.length,success:pe.data.success}),console.log(" [PDS] Civil statuses data structure:",{hasData:!!H.data.data,dataLength:(je=H.data.data)==null?void 0:je.length,success:H.data.success}),console.log(" [PDS] Eligibility types data structure:",{hasData:!!ie.data.data,dataLength:(de=ie.data.data)==null?void 0:de.length,success:ie.data.success}),Pt(pe.data.data),At(H.data.data),Ze(ie.data.data),console.log(" [PDS] Lookup data loaded successfully"),console.log(" [PDS] Eligibility types set:",ie.data.data.length,"items")}catch(pe){console.error(" [PDS] Error fetching lookup data:",pe),console.error(" [PDS] Error details:",((Fe=pe.response)==null?void 0:Fe.data)||pe.message),console.error(" [PDS] Error status:",(se=pe.response)==null?void 0:se.status),console.error(" [PDS] Error config:",pe.config),console.log(" [PDS] Lookup data fetch failed - will retry or show empty dropdowns"),console.error(" [PDS] Failed to load lookup data from HR201 database tables:"),console.error("  - blood_types table"),console.error("  - civilstatus table"),console.error("  - eligibilitytypes table"),console.error("Please ensure these tables exist and have data in the HR201 database.")}finally{Pe(!1)}},qe=ce=>{if(!m)return;const{name:je,value:de,type:Fe,checked:se}=ce.target,pe=de||"";if(Fe==="text"||Fe==="email"||Fe==="tel"||Fe==="textarea"&&pe){const H=ws(je,pe);H.valid?v[je]&&h(ie=>({...ie,[je]:""})):h(ie=>({...ie,[je]:H.error}))}E(je==="citizenship_dual"?H=>({...H,[je]:se,dual_citizenship_type:se?H.dual_citizenship_type:"",dual_citizenship_country:se?H.dual_citizenship_country:"",citizenship:"Filipino"}):H=>({...H,[je]:Fe==="checkbox"?se:pe})),je==="permanent_same_as_residential"&&se&&E(H=>({...H,permanent_house_block_lot:H.residential_house_block_lot,permanent_street:H.residential_street,permanent_subdivision_village:H.residential_subdivision_village,permanent_barangay:H.residential_barangay,permanent_city_municipality:H.residential_city_municipality,permanent_province:H.residential_province,permanent_zip_code:H.residential_zip_code})),je==="civil_status"&&de==="Single"&&E(H=>({...H,spouse_surname:"",spouse_firstname:"",spouse_middlename:"",spouse_extension:"",spouse_occupation:"",spouse_employer_business_name:"",spouse_business_address:"",spouse_telephone:""})),v[je]&&Fe!=="text"&&Fe!=="email"&&Fe!=="tel"&&h(H=>({...H,[je]:""}))},Oe=()=>{L(ce=>[...ce,{full_name:"",date_of_birth:""}])},He=ce=>{A.length>1&&L(je=>je.filter((de,Fe)=>Fe!==ce))},Kt=(ce,je,de)=>{console.log(` [PDS] updateChild: index=${ce}, field=${je}, value=${de}`),L(Fe=>Fe.map((se,pe)=>{if(pe===ce){const H={...se,[je]:de};return console.log(` [PDS] Updated child ${ce}:`,H),H}return se}))},rs=(ce,je,de)=>{W(Fe=>K(Fe).map((H,ie)=>ie===ce?{...H,[je]:de}:H)),console.log(` [PDS] Updated education ${ce} (${je}):`,de)},qt=()=>{q(ce=>[...ce,{eligibility_type:"",rating:"",date_of_examination:"",place_of_examination:"",license_number:"",date_of_validity:""}])},zt=ce=>{Y.length>1&&q(je=>je.filter((de,Fe)=>Fe!==ce))},xs=(ce,je,de)=>{q(Fe=>Fe.map((se,pe)=>pe===ce?{...se,[je]:de}:se))},ms=()=>{O(ce=>[...ce,{date_from:"",date_to:"",position_title:"",department_agency_company:"",monthly_salary:"",salary_grade_step:"",status_of_appointment:"",government_service:"",is_present:!1}])},Ut=ce=>{J.length>1&&O(je=>je.filter((de,Fe)=>Fe!==ce))},$t=(ce,je,de)=>{O(Fe=>{let se=Fe.map((pe,H)=>{if(H===ce){const ie={...pe,[je]:de};if(je==="is_present"&&de===!0){const Ae=new Date().toISOString().split("T")[0];ie.date_to=Ae}return ie}return pe});return je==="is_present"&&de===!0&&(se=se.map((pe,H)=>H===ce?{...pe,is_present:!0,date_to:se[H].date_to}:{...pe,is_present:!1})),se.sort((pe,H)=>pe.is_present===!0&&H.is_present!==!0?-1:pe.is_present!==!0&&H.is_present===!0?1:pe.date_to&&H.date_to?new Date(H.date_to)-new Date(pe.date_to):0),se})},Qt=()=>{P(ce=>[...ce,{organization_name_address:"",date_from:"",date_to:"",number_of_hours:"",position_nature_of_work:""}])},gs=ce=>{P(je=>{const de=je.filter((Fe,se)=>se!==ce);return de.length===0?[{organization_name_address:"",date_from:"",date_to:"",number_of_hours:"",position_nature_of_work:""}]:de})},Yt=(ce,je,de)=>{P(Fe=>Fe.map((se,pe)=>pe===ce?{...se,[je]:de}:se))},os=()=>{B(ce=>[...ce,{training_title:"",date_from:"",date_to:"",number_of_hours:"",type_of_ld:"",conducted_sponsored_by:""}])},Zt=ce=>{R.length>1&&B(je=>je.filter((de,Fe)=>Fe!==ce))},Jt=(ce,je,de)=>{B(Fe=>Fe.map((se,pe)=>pe===ce?{...se,[je]:de}:se))},es=()=>{G(ce=>[...ce,{skill_hobby:""}])},be=ce=>{U.length>1&&G(je=>je.filter((de,Fe)=>Fe!==ce))},nt=(ce,je)=>{G(de=>de.map((Fe,se)=>se===ce?{skill_hobby:je}:Fe))},tt=()=>{X(ce=>[...ce,{recognition:""}])},ft=ce=>{$.length>1&&X(je=>je.filter((de,Fe)=>Fe!==ce))},kt=(ce,je)=>{X(de=>de.map((Fe,se)=>se===ce?{recognition:je}:Fe))},_t=()=>{Ne(ce=>[...ce,{organization:""}])},cs=ce=>{Q.length>1&&Ne(je=>je.filter((de,Fe)=>Fe!==ce))},as=(ce,je)=>{Ne(de=>de.map((Fe,se)=>se===ce?{organization:je}:Fe))},_e=ce=>{if(!m)return;const{name:je,value:de,type:Fe,checked:se}=ce.target;let pe=de;if(je==="thirtyfive_datefiled"&&de){const H=de.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(H){const[,ie,ae,Ae]=H,Je=`${Ae}-${ie.padStart(2,"0")}-${ae.padStart(2,"0")}`;pe=Je,console.log(" Date conversion:",de,"",Je)}else console.log(" Invalid date format:",de)}re(H=>({...H,[je]:Fe==="checkbox"?se:pe}))},We=(ce,je,de=[])=>{m&&re(Fe=>{const se={...Fe,[ce]:je};return!je&&Array.isArray(de)&&de.forEach(pe=>{pe&&(se[pe]="")}),se})},ct=()=>{ne.length<3&&xe(ce=>[...ce,{reference_name:"",reference_address:"",reference_tel_no:""}])},Ye=ce=>{xe(je=>{const de=je.filter((Fe,se)=>se!==ce);return de.length===0?[{reference_name:"",reference_address:"",reference_tel_no:""}]:de})},te=(ce,je,de)=>{xe(Fe=>Fe.map((se,pe)=>pe===ce?{...se,[je]:de}:se))},Me=()=>{me.length===0||!me[0].government_issued_id?Z([{government_issued_id:"",id_number:"",date_issued:"",place_of_issuance:"",status:"active"}]):(ye(!0),Z([{government_issued_id:"",id_number:"",date_issued:"",place_of_issuance:"",status:"active",originalData:me[0]}]))},rt=()=>{var de,Fe,se,pe;const ce=me[0];if(!((de=ce.government_issued_id)!=null&&de.trim())||!((Fe=ce.id_number)!=null&&Fe.trim())||!((se=ce.date_issued)!=null&&se.trim())||!((pe=ce.place_of_issuance)!=null&&pe.trim())){alert("Please fill in all fields (43.1, 43.2, 43.3, and 43.4) before accepting the change.");return}const je=ce.originalData;if(je&&!(ce.government_issued_id!==je.government_issued_id||ce.id_number!==je.id_number||ce.date_issued!==je.date_issued||ce.place_of_issuance!==je.place_of_issuance)){alert("No changes detected. Please modify at least one field before accepting the change.");return}Z([{government_issued_id:ce.government_issued_id,id_number:ce.id_number,date_issued:ce.date_issued,place_of_issuance:ce.place_of_issuance,status:"active"}]),ye(!1)},xt=()=>{var je;const ce=(je=me[0])==null?void 0:je.originalData;ce&&Z([ce]),ye(!1)},Mt=(ce,je,de)=>{Z(Fe=>Fe.map((se,pe)=>pe===ce?{...se,[je]:de}:se))},Ee=ce=>{De(ce),Ie({value:"",unit:ce==="height"?"ft":"lbs",convertedValue:""}),ue(!0)},$e=()=>{ue(!1),De(""),Ie({value:"",unit:"",convertedValue:""})},et=(ce,je)=>{Ie(de=>({...de,[ce]:je,convertedValue:""}))},Te=(ce,je)=>{const de=parseFloat(ce)||0;switch(je){case"ft":return(de*.3048).toFixed(2);case"cm":return(de/100).toFixed(2);case"in":return(de*.0254).toFixed(2);default:return ce}},he=(ce,je)=>{const de=parseFloat(ce)||0;switch(je){case"lbs":return(de*.453592).toFixed(1);case"g":return(de/1e3).toFixed(1);default:return ce}},Ue=()=>{if(!le.value||!le.unit)return;let ce="";we==="height"?ce=Te(le.value,le.unit):we==="weight"&&(ce=he(le.value,le.unit)),Ie(je=>({...je,convertedValue:ce}))},ze=()=>{le.convertedValue&&(we==="height"?E(ce=>({...ce,height:le.convertedValue})):we==="weight"&&E(ce=>({...ce,weight:le.convertedValue})),$e())},ht=(ce,je,de,Fe=.9)=>new Promise((se,pe)=>{const H=document.createElement("canvas"),ie=H.getContext("2d"),ae=new Image;ae.onload=()=>{let{width:Je,height:Qe}=ae;const pt=de==="jpeg"?600:400;if(de==="jpeg"){const $s=Je/Qe;Math.abs($s-.78)>.1&&($s>.78?Je=Qe*.78:Qe=Je/.78)}Je>pt&&(Qe=Qe*pt/Je,Je=pt),Qe>pt*1.3&&(Je=Je*pt*1.3/Qe,Qe=pt*1.3),H.width=Je,H.height=Qe,de==="jpeg"&&(ie.fillStyle="white",ie.fillRect(0,0,Je,Qe)),ie.drawImage(ae,0,0,Je,Qe);let jt=Fe,wt,Ft=0;const ns=20;do{wt=H.toDataURL(`image/${de}`,jt);const $s=(wt.split(",")[1]?wt.split(",")[1].length:0)*.75/1024;if($s<=je){console.log(` Image resized successfully: ${$s.toFixed(2)}KB (target: ${je}KB), quality: ${jt}`);break}jt-=.05,Ft++}while(jt>.1&&Ft<ns);Ft>=ns&&console.warn(` Could not compress image below ${je}KB, using lowest quality available`),se(wt)};const Ae=URL.createObjectURL(ce);ae.onerror=()=>{URL.revokeObjectURL(Ae),pe(new Error("Failed to load image"))},ae.addEventListener("load",()=>{URL.revokeObjectURL(Ae)},{once:!0}),ae.addEventListener("error",()=>{URL.revokeObjectURL(Ae)},{once:!0}),ae.src=Ae}),st=async ce=>{if(!m)return;const je=ce.target.files[0];if(je)try{const de=await ht(je,150,"jpeg",.8);Xe(de)}catch(de){console.error("Error resizing photo:",de);const Fe=new FileReader;Fe.onloadend=()=>{Xe(Fe.result)},Fe.readAsDataURL(je)}},ot=async ce=>{if(!m)return;const je=ce.target.files[0];if(je)try{const de=await ht(je,150,"png",.9);lt(de)}catch(de){console.error("Error resizing thumbmark:",de);const Fe=new FileReader;Fe.onloadend=()=>{lt(Fe.result)},Fe.readAsDataURL(je)}},vt=async ce=>{if(!m)return;const je=ce.target.files[0];if(je)try{const de=await ht(je,150,"png",.9);Ge(de)}catch(de){console.error("Error resizing signature:",de);const Fe=new FileReader;Fe.onloadend=()=>{Ge(Fe.result)},Fe.readAsDataURL(je)}},bt=()=>{const ce={};return!_.surname&&!_.firstname&&(ce.surname="At least surname or first name is required"),h(ce),Object.keys(ce).length===0},dt=()=>{const ce=[];return[{key:"surname",label:"Surname"},{key:"firstname",label:"First Name"},{key:"middlename",label:"Middle Name"},{key:"date_of_birth",label:"Date of Birth"},{key:"place_of_birth",label:"Place of Birth"},{key:"sex",label:"Sex"},{key:"civil_status",label:"Civil Status"},{key:"height",label:"Height"},{key:"weight",label:"Weight"},{key:"blood_type",label:"Blood Type"},{key:"gsis",label:"GSIS ID No."},{key:"pagibig",label:"PAG-IBIG ID No."},{key:"philhealth",label:"PhilHealth No."},{key:"sss",label:"SSS No."},{key:"tin",label:"TIN"},{key:"agency_no",label:"Agency Employee No."}].forEach(pe=>{(!_[pe.key]||_[pe.key]==="")&&ce.push({section:"Personal Information",field:pe.label,key:pe.key})}),[{key:"residential_province",label:"Residential Province"},{key:"residential_city_municipality",label:"Residential City/Municipality"},{key:"residential_barangay",label:"Residential Barangay"},{key:"residential_zip_code",label:"Residential ZIP Code"},{key:"residential_subdivision_village",label:"Residential Subdivision/Village"},{key:"residential_street",label:"Residential Street"},{key:"permanent_province",label:"Permanent Province"},{key:"permanent_city_municipality",label:"Permanent City/Municipality"},{key:"permanent_barangay",label:"Permanent Barangay"},{key:"permanent_zip_code",label:"Permanent ZIP Code"},{key:"permanent_subdivision_village",label:"Permanent Subdivision/Village"},{key:"permanent_street",label:"Permanent Street"}].forEach(pe=>{(!_[pe.key]||_[pe.key]==="")&&ce.push({section:"Address",field:pe.label,key:pe.key})}),[{key:"telephone",label:"Telephone"},{key:"mobile",label:"Mobile"},{key:"email",label:"Email"}].forEach(pe=>{(!_[pe.key]||_[pe.key]==="")&&ce.push({section:"Contact Information",field:pe.label,key:pe.key})}),_.civil_status&&_.civil_status!=="Single"&&[{key:"spouse_surname",label:"Spouse Surname"},{key:"spouse_firstname",label:"Spouse First Name"},{key:"spouse_middlename",label:"Spouse Middle Name"},{key:"spouse_occupation",label:"Spouse Occupation"}].forEach(H=>{(!_[H.key]||_[H.key]==="")&&ce.push({section:"Spouse Information",field:H.label,key:H.key})}),[{key:"father_surname",label:"Father Surname"},{key:"father_firstname",label:"Father First Name"},{key:"father_middlename",label:"Father Middle Name"},{key:"mother_surname",label:"Mother Surname"},{key:"mother_firstname",label:"Mother First Name"},{key:"mother_middlename",label:"Mother Middle Name"}].forEach(pe=>{(!_[pe.key]||_[pe.key]==="")&&ce.push({section:"Family Background",field:pe.label,key:pe.key})}),(!A||A.length===0||!A.some(pe=>pe.full_name&&pe.full_name.trim()!==""||pe.date_of_birth&&pe.date_of_birth.trim()!==""))&&ce.push({section:"Family Background",field:"Children Information",key:"children"}),!F||F.length===0?ce.push({section:"Education",field:"Education Information",key:"education"}):F.some(H=>H.school_name&&typeof H.school_name=="string"&&H.school_name.trim()!==""&&H.degree_course&&typeof H.degree_course=="string"&&H.degree_course.trim()!==""&&H.period_from&&typeof H.period_from=="string"&&H.period_from.trim()!==""&&H.period_to&&typeof H.period_to=="string"&&H.period_to.trim()!==""&&H.highest_level_units&&typeof H.highest_level_units=="string"&&H.highest_level_units.trim()!==""&&H.year_graduated&&H.year_graduated.toString().trim()!=="")||ce.push({section:"Education",field:"Education Information (Complete row required)",key:"education"}),(!Y||Y.length===0||!Y.some(pe=>pe.eligibility_type&&pe.eligibility_type.trim()!==""||pe.rating&&pe.rating.trim()!==""))&&ce.push({section:"Eligibility",field:"Civil Service Eligibility",key:"eligibility"}),(!J||J.length===0||!J.some(pe=>pe.position_title&&pe.position_title.trim()!==""||pe.department_name&&pe.department_name.trim()!==""))&&ce.push({section:"Work Experience",field:"Work Experience",key:"workExperience"}),(!ne||ne.length<3||ne.filter(pe=>pe.reference_name&&pe.reference_name.trim()!=="").length<3)&&ce.push({section:"References",field:"Character References (3 required)",key:"references"}),(!me||me.length===0||!me.some(pe=>pe.government_issued_id&&pe.government_issued_id.trim()!==""))&&ce.push({section:"Government IDs",field:"Government Issued ID",key:"governmentIds"}),w(ce),ce},It=async ce=>{if(i)try{if(!ce)return;console.log(" [PDS] Fetching missing fields for employee:",ce);const je=await oe.get(`/201-employees/missing-fields/${ce}`);if(je.data.success){const{missingFields:de,totalMissing:Fe}=je.data;console.log(" [PDS] Received missing fields from API:",{totalMissing:Fe,missingFields:de});const se=[];Object.keys(de).forEach(pe=>{Object.keys(de[pe]).forEach(H=>{de[pe][H].forEach(ie=>{se.push({...ie,page:parseInt(pe),section:H})})})}),w(se)}else console.warn(" [PDS] API returned unsuccessful response for missing fields"),dt()}catch(je){console.error(" [PDS] Error fetching missing fields from API:",je),dt()}},Et=ce=>{try{if(console.log(" [PDS] Attempting to focus on field:",ce),ce.focusSelector==="education-section"&&p!==1){console.log(" [PDS] Education section is on page 1, switching to page 1"),g(1),setTimeout(()=>{gt(ce)},500);return}let je=null;const de=[`#${ce.focusSelector}`,`[name="${ce.focusSelector}"]`,`input[name*="${ce.focusSelector}"]`,`select[name*="${ce.focusSelector}"]`,`textarea[name*="${ce.focusSelector}"]`,`[id*="${ce.focusSelector}"]`];for(const Fe of de)if(je=document.querySelector(Fe),je)break;je?gt(ce):ce.page&&ce.page!==p?(console.log(` [PDS] Switching to page ${ce.page} for field: ${ce.field}`),g(ce.page),setTimeout(()=>{gt(ce)},500)):gt(ce)}catch(je){console.error(" [PDS] Error focusing on field:",je)}},gt=ce=>{try{const je=[`#${ce.focusSelector}`,`[name="${ce.focusSelector}"]`,`input[name*="${ce.focusSelector}"]`,`select[name*="${ce.focusSelector}"]`,`textarea[name*="${ce.focusSelector}"]`,`[id*="${ce.focusSelector}"]`];let de=null;for(const Fe of je)if(de=document.querySelector(Fe),de)break;de?(de.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),de.style.backgroundColor="#fef3c7",setTimeout(()=>{de.style.backgroundColor=""},2e3),setTimeout(()=>{if(de.focus&&de.focus(),!de.focus&&de.querySelector){const Fe=de.querySelector("input, select, textarea");Fe&&Fe.focus&&Fe.focus()}},500),console.log(" [PDS] Successfully focused on field:",ce.field)):console.warn(" [PDS] Could not find element for field:",ce.field,"selectors tried:",je)}catch(je){console.error(" [PDS] Error in focusElement:",je)}},Xt=()=>{if(!d){alert("You do not have permission to print PDS records.");return}const ce=p;console.log(" [PDS Print] Current active page:",ce);const de={1:1,2:2,3:3,4:4}[ce]||1,Fe=`/201-employees/print/${r==null?void 0:r.dtruserid}?page=${de}`;window.open(Fe,"_blank")},Vt=()=>{const ce={};let je=!1;if(Object.keys(_).forEach(de=>{const Fe=_[de];if(typeof Fe=="string"&&Fe.trim()){const se=ws(de,Fe);se.valid||(ce[de]=se.error,je=!0)}}),A.forEach((de,Fe)=>{if(de.full_name){const se=ws("children_full_name",de.full_name);se.valid||(ce[`children_${Fe}_full_name`]=se.error,je=!0)}}),F.forEach((de,Fe)=>{if(de.school_name){const se=ws("education_school_name",de.school_name);se.valid||(ce[`education_${Fe}_school_name`]=se.error,je=!0)}if(de.degree_course){const se=ws("education_degree_course",de.degree_course);se.valid||(ce[`education_${Fe}_degree_course`]=se.error,je=!0)}if(de.highest_level_units){const se=ws("education_highest_level_units",de.highest_level_units);se.valid||(ce[`education_${Fe}_highest_level_units`]=se.error,je=!0)}if(de.scholarship_honors){const se=ws("education_scholarship_honors",de.scholarship_honors);se.valid||(ce[`education_${Fe}_scholarship_honors`]=se.error,je=!0)}}),_.spouse_surname){const de=ws("spouse_surname",_.spouse_surname);de.valid||(ce.spouse_surname=de.error,je=!0)}if(_.spouse_firstname){const de=ws("spouse_firstname",_.spouse_firstname);de.valid||(ce.spouse_firstname=de.error,je=!0)}if(_.spouse_middlename){const de=ws("spouse_middlename",_.spouse_middlename);de.valid||(ce.spouse_middlename=de.error,je=!0)}if(_.spouse_extension){const de=ws("spouse_extension",_.spouse_extension);de.valid||(ce.spouse_extension=de.error,je=!0)}if(_.spouse_occupation){const de=ws("spouse_occupation",_.spouse_occupation);de.valid||(ce.spouse_occupation=de.error,je=!0)}if(_.spouse_employer_business_name){const de=ws("spouse_employer_business_name",_.spouse_employer_business_name);de.valid||(ce.spouse_employer_business_name=de.error,je=!0)}if(_.spouse_business_address){const de=ws("spouse_business_address",_.spouse_business_address);de.valid||(ce.spouse_business_address=de.error,je=!0)}if(_.spouse_telephone){const de=ws("spouse_telephone",_.spouse_telephone);de.valid||(ce.spouse_telephone=de.error,je=!0)}if(je){h(Fe=>({...Fe,...ce}));const de=Object.keys(ce).map(Fe=>ON(Fe)).join(", ");return alert(`Please fix the following field(s) that exceed character limits:

${de}

Please reduce the text length for these fields before saving.`),!1}return!0},ts=async(ce=!1)=>{var je;if(!m){alert("You do not have permission to save this PDS.");return}if(!(p===1&&!bt())){if(!Vt()){y(!1);return}y(!0);try{console.log(" [PDS] Education data being saved:",F),console.log(" [PDS] FormData being sent:",{dtruserid:_.dtruserid,date_of_birth:_.date_of_birth,place_of_birth:_.place_of_birth,sex:_.sex,blood_type:_.blood_type});const de=ae=>{if(!ae||ae==="")return null;if(/^\d{4}-\d{2}-\d{2}$/.test(ae))return ae;const Ae=ae.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(Ae){const[,Je,Qe,pt]=Ae;return`${pt}-${Je.padStart(2,"0")}-${Qe.padStart(2,"0")}`}return console.log(" Invalid date format for database:",ae),null},Fe=ae=>ae?1:0,se=(ae,Ae)=>{if(!ae||Ae==null)return null;if(typeof Ae=="string"){const Je=Ae.trim();return Je.length?Je:null}return Ae},pe={third_degree:Fe(V.third_degree),fourth_degree:Fe(V.fourth_degree),fourth_degree_details:se(V.fourth_degree,V.fourth_degree_details),guilty_admin:Fe(V.guilty_admin),guilty_admin_details:se(V.guilty_admin,V.guilty_admin_details),criminally_charged:Fe(V.thirtyfive_b),criminally_charged_date:V.thirtyfive_b?de(V.thirtyfive_datefiled):null,criminally_charged_status:se(V.thirtyfive_b,V.thirtyfive_statuses),convicted:Fe(V.convicted),convicted_details:se(V.convicted,V.convicted_details),separated_service:Fe(V.separated_service),separated_service_details:se(V.separated_service,V.separated_service_details),candidate:Fe(V.candidate),candidate_details:se(V.candidate,V.candidate_details),resigned_campaign:Fe(V.resigned_campaign),resigned_campaign_details:se(V.resigned_campaign,V.resigned_campaign_details),immigrant:Fe(V.immigrant),immigrant_country:se(V.immigrant,V.immigrant_country),indigenous_group:Fe(V.indigenous_group),indigenous_group_details:se(V.indigenous_group,V.indigenous_group_details),pwd:Fe(V.pwd),pwd_id_no:se(V.pwd,V.pwd_id_no),solo_parent:Fe(V.solo_parent),solo_parent_id_no:se(V.solo_parent,V.solo_parent_id_no)},H={employee:{..._,objid:r==null?void 0:r.objid},children:A.filter(ae=>ae.full_name||ae.date_of_birth),education:F,civil_service_eligibility:Y.filter(ae=>ae.eligibility_type),work_experience:J.filter(ae=>ae.position_title||ae.department_agency_company),voluntary_work:z.filter(ae=>ae.organization_name_address||ae.position_nature_of_work),trainings:R.filter(ae=>ae.training_title||ae.conducted_sponsored_by),skills:U.filter(ae=>ae.skill_hobby),recognitions:$.filter(ae=>ae.recognition),memberships:Q.filter(ae=>ae.organization),declarations:pe,references:ne.filter(ae=>ae.reference_name),government_ids:me.filter(ae=>ae.government_issued_id||ae.id_number),is_replacing_gov_id:ee,signature_data:ge,date_accomplished:ke,photo_data:Ke,thumbmark_data:Se,is_draft:ce};console.log(" [PDS] Declarations data being sent:",pe),console.log(" [PDS] Date field value being sent:",pe.criminally_charged_date);const ie=await oe.post("/201-employees/pds",H);if(alert(ce?"PDS draft saved successfully! You can continue editing later.":"PDS saved successfully!"),ie.data.progress!==void 0){const ae=Number(ie.data.progress)||0;N(ae),console.log(" [PDS] Updated completeness progress:",ae)}n&&n()}catch(de){console.error("Error saving PDS:",de);let Fe="Failed to save PDS";const se=(je=de==null?void 0:de.response)==null?void 0:je.data,pe=(se==null?void 0:se.message)||(de==null?void 0:de.message)||"";if(pe.includes("Data too long")||pe.includes("ER_DATA_TOO_LONG")){const H=pe.match(/column ['"]([^'"]+)['"]/i)||pe.match(/for column ['"]([^'"]+)['"]/i);if(H){const ie=H[1];Fe=`Failed to save PDS: The field "${{surname:"Surname",firstname:"First Name",middlename:"Middle Name",extension:"Name Extension",birthplace:"Place of Birth",gsis:"GSIS ID No.",pagibig:"PAG-IBIG ID No.",philhealth:"PhilHealth No.",sss:"SSS No.",tin:"TIN No.",agency_no:"Agency Employee No.",telephone:"Telephone No.",mobile:"Mobile No.",email:"E-mail Address"}[ie]||ie}" exceeds the maximum character limit. Please reduce the text length and try again.`}else Fe="Failed to save PDS: One or more fields exceed the maximum character limit. Please check your entries and reduce text length where necessary."}else se!=null&&se.error?Fe=`Failed to save PDS: ${se.error}`:pe&&(Fe=`Failed to save PDS: ${pe}`);alert(Fe)}finally{y(!1)}}},ps=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-blue-100 text-blue-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"I"}),"PERSONAL INFORMATION"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1. CS ID No"}),e.jsx("input",{type:"text",name:"cs_id_no",value:_.cs_id_no,onChange:qe,placeholder:"(Do not fill up. For CSC use only)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100",disabled:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["2. SURNAME ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"surname",value:_.surname,onChange:qe,maxLength:Ct("surname"),disabled:u,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${v.surname?"border-red-500":"border-gray-300"} ${u?"bg-gray-100 cursor-not-allowed":""}`,required:!0}),v.surname&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.surname})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["2.1. FIRST NAME ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"firstname",value:_.firstname,onChange:qe,maxLength:Ct("firstname"),disabled:u,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${v.firstname?"border-red-500":"border-gray-300"} ${u?"bg-gray-100 cursor-not-allowed":""}`,required:!0}),v.firstname&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.firstname})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"2.2. MIDDLE NAME"}),e.jsx("input",{type:"text",name:"middlename",value:_.middlename,onChange:qe,maxLength:Ct("middlename"),disabled:u,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${u?"bg-gray-100 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"2.3. NAME EXTENSION (JR., SR)"}),e.jsx("input",{type:"text",name:"name_extension",value:_.name_extension,onChange:qe,placeholder:"Jr., Sr., III",maxLength:Ct("name_extension"),disabled:u,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${u?"bg-gray-100 cursor-not-allowed":""}`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"3. DATE OF BIRTH"}),e.jsx("input",{type:"date",name:"date_of_birth",value:_.date_of_birth,onChange:qe,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"4. PLACE OF BIRTH"}),e.jsx("input",{type:"text",name:"place_of_birth",value:_.place_of_birth,onChange:qe,maxLength:Ct("place_of_birth"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["5. SEX ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"sex",value:"Male",checked:_.sex==="Male",onChange:qe,className:"mr-2"}),"Male"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"sex",value:"Female",checked:_.sex==="Female",onChange:qe,className:"mr-2"}),"Female"]})]}),v.sex&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.sex})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["6. CIVIL STATUS ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"civil_status",value:_.civil_status,onChange:qe,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${v.civil_status?"border-red-500":"border-gray-300"}`,required:!0,children:[e.jsx("option",{value:"",children:"Select Status"}),fe?e.jsx("option",{disabled:!0,children:"Loading civil statuses..."}):Nt.length>0?Nt.map(ce=>e.jsx("option",{value:ce.civil_status,children:ce.civil_status},ce.id)):e.jsx("option",{disabled:!0,children:"No civil status data available"})]}),v.civil_status&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.civil_status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"7. HEIGHT (meters)"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"number",step:"0.01",name:"height",value:_.height,onChange:qe,placeholder:"1.75",min:"0.01",max:"3.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:()=>Ee("height"),className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Height Converter",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter height in meters (m)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"8. WEIGHT (kilograms)"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"number",step:"0.1",name:"weight",value:_.weight,onChange:qe,placeholder:"70",min:"1",max:"500",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:()=>Ee("weight"),className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Weight Converter",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter weight in kilograms (kg)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"9. BLOOD TYPE"}),e.jsxs("select",{name:"blood_type",value:_.blood_type,onChange:qe,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Blood Type"}),fe?e.jsx("option",{disabled:!0,children:"Loading blood types..."}):it.length>0?it.map(ce=>e.jsx("option",{value:ce.blood_type,children:ce.blood_type},ce.id)):e.jsx("option",{disabled:!0,children:"No blood type data available"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"10. GSIS ID NO."}),e.jsx("input",{type:"text",name:"gsis",value:_.gsis,onChange:qe,maxLength:Ct("gsis"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"11. PAG-IBIG ID NO."}),e.jsx("input",{type:"text",name:"pagibig",value:_.pagibig,onChange:qe,maxLength:Ct("pagibig"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"12. PHILHEALTH NO."}),e.jsx("input",{type:"text",name:"philhealth",value:_.philhealth,onChange:qe,maxLength:Ct("philhealth"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"13. SSS NO."}),e.jsx("input",{type:"text",name:"sss",value:_.sss,onChange:qe,maxLength:Ct("sss"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"14. TIN NO."}),e.jsx("input",{type:"text",name:"tin",value:_.tin,onChange:qe,maxLength:Ct("tin"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"15. AGENCY EMPLOYEE NO."}),e.jsx("input",{type:"text",name:"agency_no",value:_.agency_no,onChange:qe,maxLength:Ct("agency_no"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"16. CITIZENSHIP"}),e.jsxs("div",{className:"flex space-x-6 mb-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"citizenship_filipino",checked:!0,disabled:!0,className:"mr-2 bg-gray-300"}),e.jsx("span",{className:"text-gray-600",children:"Filipino (Default)"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"citizenship_dual",checked:_.citizenship_dual,onChange:qe,className:"mr-2"}),"Dual Citizenship"]})]}),_.citizenship_dual&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("select",{name:"dual_citizenship_type",value:_.dual_citizenship_type,onChange:qe,className:"px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"by_birth",children:"By Birth"}),e.jsx("option",{value:"by_naturalization",children:"By Naturalization"})]}),e.jsx("input",{name:"dual_citizenship_country",value:_.dual_citizenship_country,onChange:qe,placeholder:"Country",maxLength:Ct("dual_citizenship_country"),className:"px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"17. RESIDENTIAL ADDRESS"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.1 House/Block/Lot No."}),e.jsx("input",{name:"residential_house_block_lot",value:_.residential_house_block_lot,onChange:qe,placeholder:"Enter house/block/lot number",maxLength:Ct("residential_house_block_lot"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.2 Street"}),e.jsx("input",{name:"residential_street",value:_.residential_street,onChange:qe,placeholder:"Enter street name",maxLength:Ct("residential_street"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.3 Subdivision/Village"}),e.jsx("input",{name:"residential_subdivision_village",value:_.residential_subdivision_village,onChange:qe,placeholder:"Enter subdivision or village name",maxLength:Ct("residential_subdivision_village"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.4 Barangay"}),e.jsx("input",{name:"residential_barangay",value:_.residential_barangay,onChange:qe,placeholder:"Enter barangay name",maxLength:Ct("residential_barangay"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.5 City/Municipality"}),e.jsx("input",{name:"residential_city_municipality",value:_.residential_city_municipality,onChange:qe,placeholder:"Enter city or municipality",maxLength:Ct("residential_city_municipality"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.6 Province"}),e.jsx("input",{name:"residential_province",value:_.residential_province,onChange:qe,placeholder:"Enter province",maxLength:Ct("residential_province"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.7 ZIP CODE"}),e.jsx("input",{name:"residential_zip_code",value:_.residential_zip_code,onChange:qe,placeholder:"Enter ZIP code",maxLength:Ct("residential_zip_code"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"18. PERMANENT ADDRESS"}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"permanent_same_as_residential",checked:_.permanent_same_as_residential,onChange:qe,className:"mr-2"}),"Same as Residential Address"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.1 House/Block/Lot No."}),e.jsx("input",{name:"permanent_house_block_lot",value:_.permanent_house_block_lot,onChange:qe,placeholder:"Enter house/block/lot number",maxLength:Ct("permanent_house_block_lot"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.2 Street"}),e.jsx("input",{name:"permanent_street",value:_.permanent_street,onChange:qe,placeholder:"Enter street name",maxLength:Ct("permanent_street"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.3 Subdivision/Village"}),e.jsx("input",{name:"permanent_subdivision_village",value:_.permanent_subdivision_village,onChange:qe,placeholder:"Enter subdivision or village name",maxLength:Ct("permanent_subdivision_village"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.4 Barangay"}),e.jsx("input",{name:"permanent_barangay",value:_.permanent_barangay,onChange:qe,placeholder:"Enter barangay name",maxLength:Ct("permanent_barangay"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.5 City/Municipality"}),e.jsx("input",{name:"permanent_city_municipality",value:_.permanent_city_municipality,onChange:qe,placeholder:"Enter city or municipality",maxLength:Ct("permanent_city_municipality"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.6 Province"}),e.jsx("input",{name:"permanent_province",value:_.permanent_province,onChange:qe,placeholder:"Enter province",maxLength:Ct("permanent_province"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.7 ZIP CODE"}),e.jsx("input",{name:"permanent_zip_code",value:_.permanent_zip_code,onChange:qe,placeholder:"Enter ZIP code",maxLength:Ct("permanent_zip_code"),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"19. TELEPHONE NO."}),e.jsx("input",{type:"text",name:"telephone",value:_.telephone,onChange:qe,maxLength:Ct("telephone"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"20. MOBILE NO."}),e.jsx("input",{type:"text",name:"mobile",value:_.mobile,onChange:qe,maxLength:Ct("mobile"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"21. E-MAIL ADDRESS"}),e.jsx("input",{type:"email",name:"email",value:_.email,onChange:qe,maxLength:Ct("email"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-green-100 text-green-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"II"}),"FAMILY BACKGROUND"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"22. SPOUSE'S INFORMATION"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.1 Surname"}),e.jsx("input",{name:"spouse_surname",value:_.spouse_surname,onChange:qe,placeholder:"Enter surname",maxLength:Ct("spouse_surname"),disabled:_.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${_.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.2 First Name"}),e.jsx("input",{name:"spouse_firstname",value:_.spouse_firstname,onChange:qe,placeholder:"Enter first name",maxLength:Ct("spouse_firstname"),disabled:_.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${_.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.3 Middle Name"}),e.jsx("input",{name:"spouse_middlename",value:_.spouse_middlename,onChange:qe,placeholder:"Enter middle name",maxLength:Ct("spouse_middlename"),disabled:_.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${_.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.4 Extension"}),e.jsx("input",{name:"spouse_extension",value:_.spouse_extension,onChange:qe,placeholder:"Enter extension (Jr., Sr., III, etc.)",maxLength:Ct("spouse_extension"),disabled:_.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${_.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.5 Occupation"}),e.jsx("input",{name:"spouse_occupation",value:_.spouse_occupation,onChange:qe,placeholder:"Enter occupation",maxLength:Ct("spouse_occupation"),disabled:_.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${_.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.6 Employer/Business Name"}),e.jsx("input",{name:"spouse_employer_business_name",value:_.spouse_employer_business_name,onChange:qe,placeholder:"Enter employer or business name",maxLength:Ct("spouse_employer_business_name"),disabled:_.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${_.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.7 Business Address"}),e.jsx("input",{name:"spouse_business_address",value:_.spouse_business_address,onChange:qe,placeholder:"Enter business address",maxLength:Ct("spouse_business_address"),disabled:_.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${_.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.8 Telephone"}),e.jsx("input",{name:"spouse_telephone",value:_.spouse_telephone,onChange:qe,placeholder:"Enter telephone number",maxLength:Ct("spouse_telephone"),disabled:_.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${_.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]})]})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"23. CHILDREN"}),A.map((ce,je)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[3fr_1fr_auto] gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsx("input",{name:`children[${je}].full_name`,maxLength:Ct("children_full_name"),value:ce.full_name,onChange:de=>Kt(je,"full_name",de.target.value),placeholder:"Enter child's full name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),e.jsx("input",{name:`children[${je}].date_of_birth`,type:"date",value:ce.date_of_birth,onChange:de=>Kt(je,"date_of_birth",de.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsx("div",{className:"flex items-end justify-center",children:e.jsx("button",{type:"button",onClick:()=>He(je),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors w-12",title:"Remove child",children:e.jsx("svg",{className:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},je)),e.jsx("button",{type:"button",onClick:Oe,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Child"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"24. FATHER'S INFORMATION"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"24.1 Surname"}),e.jsx("input",{name:"father_surname",value:_.father_surname,onChange:qe,placeholder:"Enter father's surname",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"24.2 First Name"}),e.jsx("input",{name:"father_firstname",value:_.father_firstname,onChange:qe,placeholder:"Enter father's first name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"24.4 Extension"}),e.jsx("input",{name:"father_extension",value:_.father_extension,onChange:qe,placeholder:"Enter extension (Jr., Sr., III, etc.)",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"24.3 Middle Name"}),e.jsx("input",{name:"father_middlename",value:_.father_middlename,onChange:qe,placeholder:"Enter father's middle name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"25. MOTHER'S MAIDEN NAME"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"25.1 Surname"}),e.jsx("input",{name:"mother_surname",value:_.mother_surname,onChange:qe,placeholder:"Enter mother's maiden surname",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"25.2 First Name"}),e.jsx("input",{name:"mother_firstname",value:_.mother_firstname,onChange:qe,placeholder:"Enter mother's first name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"25.3 Middle Name"}),e.jsx("input",{name:"mother_middlename",value:_.mother_middlename,onChange:qe,placeholder:"Enter mother's middle name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]})]})]})]}),e.jsxs("section",{id:"education-section",className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-purple-100 text-purple-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"III"}),"EDUCATIONAL BACKGROUND"]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"26. EDUCATION LEVELS"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 table-fixed",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left w-[10%]",children:"LEVEL"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left w-[20%]",children:"NAME OF SCHOOL"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left w-[15%]",children:"DEGREE/COURSE"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left w-[12%]",children:"PERIOD"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left w-[13%]",children:"HIGHEST LEVEL/UNITS"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left w-[10%]",children:"YEAR GRADUATED"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left w-[20%]",children:"SCHOLARSHIP/HONORS"})]})}),e.jsx("tbody",{children:K(F).map((ce,je)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:ce.level}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`education[${je}].school_name`,value:ce.school_name,onChange:de=>rs(je,"school_name",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`education[${je}].degree_course`,value:ce.degree_course,onChange:de=>rs(je,"degree_course",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("input",{name:`education[${je}].period_from`,type:"date",value:ce.period_from,onChange:de=>rs(je,"period_from",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"From"}),e.jsx("input",{name:`education[${je}].period_to`,type:"date",value:ce.period_to,onChange:de=>rs(je,"period_to",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"To"})]})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`education[${je}].highest_level_units`,value:ce.highest_level_units,onChange:de=>rs(je,"highest_level_units",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`education[${je}].year_graduated`,type:"number",value:ce.year_graduated,onChange:de=>rs(je,"year_graduated",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",min:"1900",max:"2100"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`education[${je}].scholarship_honors`,value:ce.scholarship_honors,onChange:de=>rs(je,"scholarship_honors",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})})]},je))})]})}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"(Continue on separate sheet if necessary)"})]})]})]}),ys=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-orange-100 text-orange-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"IV"}),"CIVIL SERVICE ELIGIBILITY"]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"27. ELIGIBILITY RECORDS"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"ELIGIBILITY TYPE"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"RATING"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"DATE OF EXAMINATION"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"PLACE OF EXAMINATION"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"LICENSE NUMBER"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"DATE OF VALIDITY"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"ACTION"})]})}),e.jsx("tbody",{children:Y.map((ce,je)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsxs("select",{name:`civil_service_eligibility[${je}].eligibility_type`,value:ce.eligibility_type,onChange:de=>xs(je,"eligibility_type",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Eligibility Type"}),fe?e.jsx("option",{value:"",disabled:!0,children:"Loading eligibility types..."}):Ce.length>0?Ce.map(de=>e.jsx("option",{value:de.careertypes,children:de.careertypes},de.id)):e.jsx("option",{value:"",disabled:!0,children:"No eligibility types available"})]})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${je}].rating`,value:ce.rating,onChange:de=>xs(je,"rating",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${je}].date_of_examination`,type:"date",value:ce.date_of_examination,onChange:de=>xs(je,"date_of_examination",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${je}].place_of_examination`,value:ce.place_of_examination,onChange:de=>xs(je,"place_of_examination",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${je}].license_number`,value:ce.license_number,onChange:de=>xs(je,"license_number",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${je}].date_of_validity`,type:"date",value:ce.date_of_validity,onChange:de=>xs(je,"date_of_validity",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("button",{type:"button",onClick:()=>zt(je),className:"p-2 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors",title:"Remove eligibility",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},je))})]})}),e.jsx("button",{type:"button",onClick:qt,className:"mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Eligibility"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"(Continue on separate sheet if necessary)"})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-red-100 text-red-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"V"}),"WORK EXPERIENCE"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"(Include private employment. Start from your recent work) Description of duties should be indicated in the attached Work Experience sheet."}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"28. WORK HISTORY"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"DATE FROM"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"DATE TO / PRESENT"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"POSITION TITLE"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"DEPARTMENT/AGENCY/COMPANY"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"MONTHLY SALARY"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"SALARY/GRADE/STEP"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"STATUS OF APPOINTMENT"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"GOV'T SERVICE"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"ACTION"})]})}),e.jsx("tbody",{children:J.map((ce,je)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`work_experience[${je}].date_from`,type:"date",value:ce.date_from,onChange:de=>$t(je,"date_from",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsxs("td",{className:"border border-gray-300 px-4 py-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{name:`work_experience[${je}].date_to`,type:"date",value:ce.is_present===!0?ce.date_to||new Date().toISOString().split("T")[0]:ce.date_to&&ce.date_to!=="0"&&ce.date_to!=="0000-00-00"?ce.date_to:"",onChange:de=>$t(je,"date_to",de.target.value),disabled:ce.is_present===!0,className:"w-full px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100 disabled:text-gray-500"}),(ce.is_present===!0||!J.some((de,Fe)=>Fe!==je&&de.is_present===!0))&&e.jsxs("label",{className:"flex items-center text-sm whitespace-nowrap",children:[e.jsx("input",{type:"checkbox",checked:ce.is_present===!0,onChange:de=>$t(je,"is_present",de.target.checked),className:"mr-1"}),"Present"]})]}),ce.is_present===!0&&e.jsx("div",{className:"text-sm font-medium text-blue-600 mt-1",children:"Present"})]}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`work_experience[${je}].position_title`,value:ce.position_title,onChange:de=>$t(je,"position_title",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`work_experience[${je}].department_agency_company`,value:ce.department_agency_company,onChange:de=>$t(je,"department_agency_company",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`work_experience[${je}].monthly_salary`,type:"number",step:"0.01",value:ce.monthly_salary,onChange:de=>$t(je,"monthly_salary",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`work_experience[${je}].salary_grade_step`,value:ce.salary_grade_step,onChange:de=>$t(je,"salary_grade_step",de.target.value),placeholder:"00-0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsxs("select",{name:`work_experience[${je}].status_of_appointment`,value:ce.status_of_appointment,onChange:de=>$t(je,"status_of_appointment",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"Permanent",children:"Permanent"}),e.jsx("option",{value:"Casual",children:"Casual"}),e.jsx("option",{value:"Contract",children:"Contract"}),e.jsx("option",{value:"Job Order",children:"Job Order"}),e.jsx("option",{value:"Provisionary",children:"Provisionary"}),e.jsx("option",{value:"Temporary",children:"Temporary"})]})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:`work_experience[${je}].government_service`,value:"Y",checked:ce.government_service==="Y",onChange:de=>$t(je,"government_service",de.target.value),className:"mr-1"}),"Y"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:`work_experience[${je}].government_service`,value:"N",checked:ce.government_service==="N",onChange:de=>$t(je,"government_service",de.target.value),className:"mr-1"}),"N"]})]})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("button",{type:"button",onClick:()=>Ut(je),className:"p-2 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors",title:"Remove work experience",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},je))})]})}),e.jsx("button",{type:"button",onClick:ms,className:"mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Work Experience"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"(Continue on separate sheet if necessary)"})]})]})]}),js=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-teal-100 text-teal-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"VI"}),"VOLUNTARY WORK OR INVOLVEMENT IN CIVIC/NON-GOVERNMENT/PEOPLE/VOLUNTARY ORGANIZATION/S"]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"29. VOLUNTARY WORK RECORDS"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"NAME & ADDRESS OF ORGANIZATION"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"FROM"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"TO"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"NUMBER OF HOURS"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"POSITION/NATURE OF WORK"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"ACTION"})]})}),e.jsx("tbody",{children:z.map((ce,je)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("textarea",{value:ce.organization_name_address,onChange:de=>Yt(je,"organization_name_address",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",rows:"2"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"date",value:ce.date_from,onChange:de=>Yt(je,"date_from",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"date",value:ce.date_to,onChange:de=>Yt(je,"date_to",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"number",step:"0.5",value:ce.number_of_hours,onChange:de=>Yt(je,"number_of_hours",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:ce.position_nature_of_work,onChange:de=>Yt(je,"position_nature_of_work",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("button",{type:"button",onClick:()=>gs(je),className:"p-2 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors",title:"Remove voluntary work",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},je))})]})}),e.jsx("button",{type:"button",onClick:Qt,className:"mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Voluntary Work"})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-indigo-100 text-indigo-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"VII"}),"LEARNING AND DEVELOPMENT (L&D) INTERVENTIONS/TRAINING PROGRAMS ATTENDED"]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"30. TRAINING RECORDS"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"(Start from the most recent L&D/training program and include only the relevant L&D/training taken for the last five (5) years for Division Chief/Executive/Managerial positions)"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"TITLE OF TRAINING"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"FROM"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"TO"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"NUMBER OF HOURS"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"TYPE OF L&D"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"CONDUCTED/SPONSORED BY"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"ACTION"})]})}),e.jsx("tbody",{children:R.map((ce,je)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:ce.training_title,onChange:de=>Jt(je,"training_title",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"date",value:ce.date_from,onChange:de=>Jt(je,"date_from",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"date",value:ce.date_to,onChange:de=>Jt(je,"date_to",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"number",step:"0.5",value:ce.number_of_hours,onChange:de=>Jt(je,"number_of_hours",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:ce.type_of_ld,onChange:de=>Jt(je,"type_of_ld",de.target.value),placeholder:"e.g. Managerial, Technical",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:ce.conducted_sponsored_by,onChange:de=>Jt(je,"conducted_sponsored_by",de.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("button",{type:"button",onClick:()=>Zt(je),className:"p-2 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors",title:"Remove training",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},je))})]})}),e.jsx("button",{type:"button",onClick:os,className:"mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Training"})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-pink-100 text-pink-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"VIII"}),"OTHER INFORMATION"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"31. SPECIAL SKILLS AND HOBBIES"}),U.map((ce,je)=>e.jsxs("div",{className:"flex space-x-2 mb-2",children:[e.jsx("input",{type:"text",value:ce.skill_hobby,onChange:de=>nt(je,de.target.value),placeholder:"e.g. Computer Programming, Playing Guitar",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("button",{type:"button",onClick:()=>be(je),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Remove skill/hobby",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},je)),e.jsx("button",{type:"button",onClick:es,className:"mt-2 w-full px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm",children:"Add Skill/Hobby"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"32. NON-ACADEMIC DISTINCTIONS/RECOGNITION"}),$.map((ce,je)=>e.jsxs("div",{className:"flex space-x-2 mb-2",children:[e.jsx("input",{type:"text",value:ce.recognition,onChange:de=>kt(je,de.target.value),placeholder:"e.g. Best Employee Award 2023",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("button",{type:"button",onClick:()=>ft(je),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Remove recognition",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},je)),e.jsx("button",{type:"button",onClick:tt,className:"mt-2 w-full px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm",children:"Add Recognition"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"33. MEMBERSHIP IN ASSOCIATION/ORGANIZATION"}),Q.map((ce,je)=>e.jsxs("div",{className:"flex space-x-2 mb-2",children:[e.jsx("input",{type:"text",value:ce.organization,onChange:de=>as(je,de.target.value),placeholder:"e.g. Philippine Computer Society",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("button",{type:"button",onClick:()=>cs(je),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Remove membership",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},je)),e.jsx("button",{type:"button",onClick:_t,className:"mt-2 w-full px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm",children:"Add Membership"})]})]})]})]}),Fr=()=>{const ce=St.useRef(null),[je,de]=St.useState(!1),Fe=St.useRef(null),se=()=>{const jt=ce.current;if(jt){const wt=jt.getContext("2d");wt.clearRect(0,0,jt.width,jt.height),wt.fillStyle="white",wt.fillRect(0,0,jt.width,jt.height),wt.strokeStyle="black",wt.fillStyle="white",wt.lineWidth=2,wt.lineCap="round",wt.lineJoin="round",wt.globalCompositeOperation="source-over",console.log(" Canvas force reset - stroke style:",wt.strokeStyle)}};St.useEffect(()=>{const jt=ce.current;if(jt){const wt=jt.getContext("2d");wt.strokeStyle="black",wt.fillStyle="white",wt.lineWidth=2,wt.lineCap="round",wt.lineJoin="round",wt.globalCompositeOperation="source-over",wt.fillRect(0,0,jt.width,jt.height),console.log(" Canvas initialized with stroke style:",wt.strokeStyle)}},[]),St.useEffect(()=>{const jt=ce.current;if(jt&&ge){const wt=jt.getContext("2d"),Ft=new Image;Ft.onload=()=>{wt.clearRect(0,0,jt.width,jt.height),wt.fillStyle="#ffffff",wt.fillRect(0,0,jt.width,jt.height),wt.drawImage(Ft,0,0,jt.width,jt.height),wt.strokeStyle="black",wt.fillStyle="white",wt.lineWidth=2,wt.lineCap="round",wt.lineJoin="round",wt.globalCompositeOperation="source-over"},Ft.src=ge}},[ge]),St.useEffect(()=>()=>{Fe.current&&clearTimeout(Fe.current)},[]);const pe=jt=>{const wt=ce.current,Ft=wt.getBoundingClientRect(),ns=wt.width/Ft.width,ks=wt.height/Ft.height;return jt.touches&&jt.touches[0]?{x:(jt.touches[0].clientX-Ft.left)*ns,y:(jt.touches[0].clientY-Ft.top)*ks}:{x:(jt.clientX-Ft.left)*ns,y:(jt.clientY-Ft.top)*ks}},H=jt=>{jt.preventDefault(),Fe.current&&clearTimeout(Fe.current);const Ft=ce.current.getContext("2d"),ns=pe(jt);Ft.strokeStyle="black",Ft.fillStyle="white",Ft.lineWidth=2,Ft.lineCap="round",Ft.lineJoin="round",Ft.globalCompositeOperation="source-over",console.log(" Starting new stroke with style:",Ft.strokeStyle),Ft.beginPath(),Ft.moveTo(ns.x,ns.y),de(!0)},ie=jt=>{if(!je)return;jt.preventDefault();const Ft=ce.current.getContext("2d"),ns=pe(jt);Ft.strokeStyle!=="black"&&(Ft.strokeStyle="black",Ft.lineWidth=2,Ft.lineCap="round",Ft.lineJoin="round",Ft.globalCompositeOperation="source-over"),Ft.lineTo(ns.x,ns.y),Ft.stroke()},ae=jt=>{const wt=document.createElement("canvas"),Ft=wt.getContext("2d"),ns=400,ks=150;wt.width=ns,wt.height=ks,Ft.fillStyle="white",Ft.fillRect(0,0,ns,ks),Ft.drawImage(jt,0,0,ns,ks);let $s=.9,Rt,Tt=0;const Ve=20;do{Rt=wt.toDataURL("image/png",$s);const br=(Rt.split(",")[1]?Rt.split(",")[1].length:0)*.75/1024;if(br<=150){console.log(` Signature compressed successfully: ${br.toFixed(2)}KB, quality: ${$s}`);break}$s-=.05,Tt++}while($s>.1&&Tt<Ve);return Tt>=Ve&&console.warn(" Could not compress signature below 150KB, using lowest quality available"),Rt},Ae=jt=>{jt.preventDefault(),je&&(de(!1),Fe.current&&clearTimeout(Fe.current),Fe.current=setTimeout(()=>{Je()},1e3))},Je=()=>{const jt=ce.current;if(jt){const wt=ae(jt);Ge(wt),console.log(" Signature auto-saved")}},Qe=()=>{Fe.current&&clearTimeout(Fe.current),Je()},pt=()=>{const jt=ce.current,wt=jt.getContext("2d");Fe.current&&clearTimeout(Fe.current),wt.clearRect(0,0,jt.width,jt.height),wt.fillStyle="white",wt.fillRect(0,0,jt.width,jt.height),wt.strokeStyle="black",wt.fillStyle="white",wt.lineWidth=2,wt.lineCap="round",wt.lineJoin="round",wt.globalCompositeOperation="source-over",console.log(" Canvas cleared and stroke style reset to:",wt.strokeStyle),Ge("")};return e.jsxs("div",{className:"border border-gray-300 rounded-lg p-4",children:[e.jsx("canvas",{ref:ce,width:400,height:150,className:"border border-gray-300 bg-white cursor-crosshair",onMouseDown:H,onMouseMove:ie,onMouseUp:Ae,onMouseLeave:Ae,onTouchStart:H,onTouchMove:ie,onTouchEnd:Ae,style:{touchAction:"none",backgroundColor:"white",display:"block"}}),e.jsxs("div",{className:"mt-2 flex space-x-2",children:[e.jsx("button",{type:"button",onClick:Qe,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Save Signature"}),e.jsx("button",{type:"button",onClick:pt,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Clear Signature"}),e.jsx("button",{type:"button",onClick:se,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Reset Canvas"})]})]})},Fs=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-yellow-100 text-yellow-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"IX"}),"DECLARATIONS"]}),e.jsx("p",{className:"text-sm text-gray-700 mb-6 italic",children:"Please answer the following questions with complete honesty. Any misrepresentation made in this document may cause the filing of administrative/criminal case/s against you."}),e.jsx("div",{className:"mb-6 p-4 bg-gray-50 border-l-4 border-blue-500",children:e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"34. Are you related by consanguinity or affinity to the appointing or recommending authority, or to the chief of bureau or office or to the person who has immediate supervision over you in the Office, Bureau or Department where you will be appointed,"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"a. within the third degree?"}),e.jsx("div",{children:e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"third_degree",value:"true",checked:V.third_degree===!0,onChange:()=>We("third_degree",!0),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"third_degree",value:"false",checked:V.third_degree===!1,onChange:()=>We("third_degree",!1),className:"mr-2"}),"NO"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"b. within the fourth degree? (for Local Government Unit - Career Employees)"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"fourth_degree",value:"true",checked:V.fourth_degree===!0,onChange:()=>We("fourth_degree",!0,["fourth_degree_details"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"fourth_degree",value:"false",checked:V.fourth_degree===!1,onChange:()=>We("fourth_degree",!1,["fourth_degree_details"]),className:"mr-2"}),"NO"]})]}),V.fourth_degree&&e.jsx("input",{type:"text",name:"fourth_degree_details",value:V.fourth_degree_details,onChange:_e,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"35a. Have you ever been found guilty of any administrative offense?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"guilty_admin",value:"true",checked:V.guilty_admin===!0,onChange:()=>We("guilty_admin",!0,["guilty_admin_details"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"guilty_admin",value:"false",checked:V.guilty_admin===!1,onChange:()=>We("guilty_admin",!1,["guilty_admin_details"]),className:"mr-2"}),"NO"]})]}),V.guilty_admin&&e.jsx("input",{type:"text",name:"guilty_admin_details",value:V.guilty_admin_details,onChange:_e,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"35b. Have you been criminally charged before any court?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfive_b",value:"true",checked:V.thirtyfive_b===!0,onChange:()=>We("thirtyfive_b",!0,["thirtyfive_datefiled","thirtyfive_statuses"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfive_b",value:"false",checked:V.thirtyfive_b===!1,onChange:()=>We("thirtyfive_b",!1,["thirtyfive_datefiled","thirtyfive_statuses"]),className:"mr-2"}),"NO"]})]}),V.thirtyfive_b&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsx("input",{type:"date",name:"thirtyfive_datefiled",value:V.thirtyfive_datefiled||"",onChange:_e,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("input",{type:"text",name:"thirtyfive_statuses",value:V.thirtyfive_statuses,onChange:_e,placeholder:"Status of Case/s:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"36. Have you ever been convicted of any crime or violation of any law, decree, ordinance or regulation by any court or tribunal?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"convicted",value:"true",checked:V.convicted===!0,onChange:()=>We("convicted",!0,["convicted_details"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"convicted",value:"false",checked:V.convicted===!1,onChange:()=>We("convicted",!1,["convicted_details"]),className:"mr-2"}),"NO"]})]}),V.convicted&&e.jsx("input",{type:"text",name:"convicted_details",value:V.convicted_details,onChange:_e,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"37. Have you ever been separated from the service in any of the following modes: resignation, retirement, dropped from the rolls, dismissal, termination, end of term, finished contract or phased out (abolition) in the public or private sector?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"separated_service",value:"true",checked:V.separated_service===!0,onChange:()=>We("separated_service",!0,["separated_service_details"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"separated_service",value:"false",checked:V.separated_service===!1,onChange:()=>We("separated_service",!1,["separated_service_details"]),className:"mr-2"}),"NO"]})]}),V.separated_service&&e.jsx("input",{type:"text",name:"separated_service_details",value:V.separated_service_details,onChange:_e,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"38a. Have you ever been a candidate in a national or local election held within the last year (except Barangay election)?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"candidate",value:"true",checked:V.candidate===!0,onChange:()=>We("candidate",!0,["candidate_details"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"candidate",value:"false",checked:V.candidate===!1,onChange:()=>We("candidate",!1,["candidate_details"]),className:"mr-2"}),"NO"]})]}),V.candidate&&e.jsx("input",{type:"text",name:"candidate_details",value:V.candidate_details,onChange:_e,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"38b. Have you resigned from the government service during the three (3)-month period before the last election to promote/actively campaign for a national or local candidate?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"resigned_campaign",value:"true",checked:V.resigned_campaign===!0,onChange:()=>We("resigned_campaign",!0,["resigned_campaign_details"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"resigned_campaign",value:"false",checked:V.resigned_campaign===!1,onChange:()=>We("resigned_campaign",!1,["resigned_campaign_details"]),className:"mr-2"}),"NO"]})]}),V.resigned_campaign&&e.jsx("input",{type:"text",name:"resigned_campaign_details",value:V.resigned_campaign_details,onChange:_e,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"39. Have you acquired the status of an immigrant or permanent resident of another country?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"immigrant",value:"true",checked:V.immigrant===!0,onChange:()=>We("immigrant",!0,["immigrant_country"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"immigrant",value:"false",checked:V.immigrant===!1,onChange:()=>We("immigrant",!1,["immigrant_country"]),className:"mr-2"}),"NO"]})]}),V.immigrant&&e.jsx("input",{type:"text",name:"immigrant_country",value:V.immigrant_country,onChange:_e,placeholder:"If YES, give details (country):",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]})]}),e.jsx("div",{className:"mb-6 p-4 bg-gray-50 border-l-4 border-blue-500",children:e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"40. Pursuant to: (a) Indigenous People's Act (RA 8371); (b) Magna Carta for Disabled Persons (RA 7277); and (c) Solo Parents Welfare Act of 2000 (RA 8972), please answer the following items:"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"a. Are you a member of any indigenous group?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"indigenous_group",value:"true",checked:V.indigenous_group===!0,onChange:()=>We("indigenous_group",!0,["indigenous_group_details"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"indigenous_group",value:"false",checked:V.indigenous_group===!1,onChange:()=>We("indigenous_group",!1,["indigenous_group_details"]),className:"mr-2"}),"NO"]})]}),V.indigenous_group&&e.jsx("input",{type:"text",name:"indigenous_group_details",value:V.indigenous_group_details,onChange:_e,placeholder:"If YES, please specify:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"b. Are you a person with disability?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"pwd",value:"true",checked:V.pwd===!0,onChange:()=>We("pwd",!0,["pwd_id_no"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"pwd",value:"false",checked:V.pwd===!1,onChange:()=>We("pwd",!1,["pwd_id_no"]),className:"mr-2"}),"NO"]})]}),V.pwd&&e.jsx("input",{type:"text",name:"pwd_id_no",value:V.pwd_id_no,onChange:_e,placeholder:"If YES, please specify ID No:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"c. Are you a solo parent?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"solo_parent",value:"true",checked:V.solo_parent===!0,onChange:()=>We("solo_parent",!0,["solo_parent_id_no"]),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"solo_parent",value:"false",checked:V.solo_parent===!1,onChange:()=>We("solo_parent",!1,["solo_parent_id_no"]),className:"mr-2"}),"NO"]})]}),V.solo_parent&&e.jsx("input",{type:"text",name:"solo_parent_id_no",value:V.solo_parent_id_no,onChange:_e,placeholder:"If YES, please specify ID No:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"bg-purple-100 text-purple-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"X"}),"CHARACTER REFERENCES"]}),e.jsxs("span",{className:"text-sm font-normal text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:[ne.filter(ce=>ce.reference_name&&ce.reference_name.trim()!=="").length,"/3 Required"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"41. REFERENCES (Person not related by consanguinity or affinity to applicant /appointee)"}),e.jsx("div",{className:"space-y-4",children:ne.map((ce,je)=>{const de=ce.reference_name&&ce.reference_name.trim()!=="";return e.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border rounded-lg ${de?"border-green-300 bg-green-50":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"41.1 Name"}),e.jsx("input",{type:"text",value:ce.reference_name,onChange:Fe=>te(je,"reference_name",Fe.target.value),placeholder:"Enter full name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"41.2 Address"}),e.jsx("input",{type:"text",value:ce.reference_address,onChange:Fe=>te(je,"reference_address",Fe.target.value),placeholder:"Enter complete address",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"41.3 Tel. No."}),e.jsx("input",{type:"text",value:ce.reference_tel_no,onChange:Fe=>te(je,"reference_tel_no",Fe.target.value),placeholder:"Enter telephone number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"button",onClick:()=>Ye(je),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Remove reference",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})]},je)})}),e.jsx("button",{type:"button",onClick:ct,disabled:ne.length>=3,className:`mt-4 px-4 py-2 rounded-lg ${ne.length>=3?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,children:ne.length>=3?"Maximum 3 References":"Add Reference"})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-gray-100 text-gray-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"XI"}),"OATH & DECLARATION"]}),e.jsx("div",{className:"bg-gray-50 border border-gray-300 rounded-lg p-6 mb-6",children:e.jsxs("p",{className:"text-sm text-gray-800 leading-relaxed",children:[e.jsx("strong",{children:"42. DECLARATION:"})," I declare under oath that I have personally accomplished this Personal Data Sheet which is a true, correct and complete statement pursuant to the provisions of pertinent laws, rules and regulations of the Republic of the Philippines. I authorize the agency head/authorized representative to verify/validate the contents stated herein. I agree that any misrepresentation made in this document and its attachments shall cause the filing of administrative/criminal case/s against me."]})})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"bg-cyan-100 text-cyan-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"XII"}),"GOVERNMENT ISSUED ID"]}),me.length>0&&me[0].government_issued_id&&!ee&&e.jsxs("span",{className:"text-sm font-normal text-green-600 bg-green-100 px-3 py-1 rounded-full",children:[" Active ID: ",me[0].government_issued_id]}),ee&&e.jsx("span",{className:"text-sm font-normal text-orange-600 bg-orange-100 px-3 py-1 rounded-full",children:" Replacing ID - Fill all fields to accept changes"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"43. GOVERNMENT ISSUED ID"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"(i.e. Passport, GSIS, SSS, PRC, Driver's License, etc.) PLEASE INDICATE ID Number and Date of Issuance"}),e.jsx("div",{className:"space-y-4",children:me.map((ce,je)=>e.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-5 gap-4 p-4 border rounded-lg ${ee?"border-orange-300 bg-orange-50":"border-gray-200 bg-white"}`,children:[e.jsx("input",{type:"text",value:ce.government_issued_id,onChange:de=>Mt(je,"government_issued_id",de.target.value),placeholder:"43.1 Government Issued ID",className:`px-3 py-2 border rounded-lg ${ee?"border-orange-300 focus:border-orange-500":"border-gray-300"}`,required:ee}),e.jsx("input",{type:"text",value:ce.id_number,onChange:de=>Mt(je,"id_number",de.target.value),placeholder:"43.2 ID Number",className:`px-3 py-2 border rounded-lg ${ee?"border-orange-300 focus:border-orange-500":"border-gray-300"}`,required:ee}),e.jsx("input",{type:"date",value:ce.date_issued,onChange:de=>Mt(je,"date_issued",de.target.value),placeholder:"43.3 Date Issued",className:`px-3 py-2 border rounded-lg ${ee?"border-orange-300 focus:border-orange-500":"border-gray-300"}`,required:ee}),e.jsx("input",{type:"text",value:ce.place_of_issuance,onChange:de=>Mt(je,"place_of_issuance",de.target.value),placeholder:"43.4 Place of Issuance",className:`px-3 py-2 border rounded-lg ${ee?"border-orange-300 focus:border-orange-500":"border-gray-300"}`,required:ee})]},je))}),e.jsx("div",{className:"mt-4 flex space-x-3",children:ee?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:rt,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Change Government ID"}),e.jsx("button",{type:"button",onClick:xt,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Cancel"})]}):e.jsx("button",{type:"button",onClick:Me,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:me.length>0&&me[0].government_issued_id?"Replace Government ID":"Add Government ID"})})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-rose-100 text-rose-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"XIII"}),"SIGNATURE, PHOTO & THUMBMARK"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{id:"signature-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"44. EMPLOYEE SIGNATURE"}),ge&&e.jsx("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Signature loaded from saved record"]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Draw your signature below or upload an image"}),e.jsx(Fr,{}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Or Upload Signature Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:vt,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),ge&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Signature Preview:"}),e.jsx("img",{src:ge,alt:"Signature",className:"border border-gray-300 rounded-lg max-w-full h-32 object-contain"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Accomplished"}),e.jsx("input",{id:"date-accomplished",type:"date",value:ke,onChange:ce=>Re(ce.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{id:"photo-section",className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"PHOTO (3.5cm x 4.5cm)"}),Ke&&e.jsx("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Photo loaded from saved record"]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Upload passport-size photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:st,className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-3"}),Ke&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Photo Preview:"}),e.jsx("img",{src:Ke,alt:"Employee",className:"border border-gray-300 rounded-lg w-32 h-40 object-cover"})]})]}),e.jsxs("div",{id:"thumbmark-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"RIGHT THUMBMARK"}),Se&&e.jsx("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Thumbmark loaded from saved record"]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Upload right thumbmark image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:ot,className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-3"}),Se&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Thumbmark Preview:"}),e.jsx("img",{src:Se,alt:"Thumbmark",className:"border border-gray-300 rounded-lg w-24 h-24 object-contain"})]})]})]})]})]})]});return t?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-7xl w-full mx-4 my-8 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-indigo-700 rounded-t-lg shadow-lg px-6 py-4 flex justify-between items-center z-10",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-1",children:[r!=null&&r.hasPDS?" Edit":" Add"," Personal Data Sheet (PDS)"]}),e.jsxs("p",{className:"text-blue-100 text-sm",children:["CS Form No. 212 (Revised 2017) - ",(r==null?void 0:r.name)||"Employee"]})]}),e.jsx("button",{onClick:s,className:"text-white hover:text-gray-200 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),!fe&&it.length===0&&Nt.length===0&&Ce.length===0&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mx-6 mt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:"Lookup Data Not Available"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Unable to load data from HR201 database tables"})]})]}),e.jsx("button",{onClick:ut,className:"bg-yellow-600 text-white px-3 py-1 rounded text-sm hover:bg-yellow-700 transition-colors",children:"Retry"})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"PDS Pages"}),e.jsx("div",{className:"flex space-x-2",children:[1,2,3,4].map(ce=>e.jsxs("button",{onClick:()=>g(ce),className:`px-4 py-2 rounded-lg font-medium ${p===ce?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Page ",ce," "]},ce))})]})}),e.jsxs("div",{className:"px-6 py-3 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"PDS Completeness"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[(typeof f=="number"?f:0).toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${(f||0)>=80?"bg-green-500":(f||0)>=50?"bg-yellow-500":(f||0)>=25?"bg-orange-500":"bg-red-500"}`,style:{width:`${f||0}%`}})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(f||0)<25?"Just getting started":(f||0)<50?"Making progress":(f||0)<80?"Almost there!":(f||0)<100?"Nearly complete!":"Complete!"}),b.length>0&&e.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("svg",{className:"w-4 h-4 text-yellow-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("span",{className:"text-sm font-medium text-yellow-800",children:["Missing Fields (",b.length,")"]})]}),e.jsx("div",{className:`overflow-y-auto ${D?"max-h-64":"max-h-32"}`,children:e.jsxs("div",{className:"space-y-1",children:[(D?b:b.slice(0,10)).map((ce,je)=>e.jsxs("div",{className:"text-xs text-yellow-700 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-2 flex-shrink-0"}),e.jsxs("span",{className:"font-medium",children:[ce.section,":"]}),e.jsx("button",{onClick:()=>Et(ce),className:"ml-1 text-blue-600 hover:text-blue-800 hover:underline cursor-pointer transition-colors duration-200",title:`Click to focus on ${ce.field} field`,children:ce.field})]},je)),b.length>10&&e.jsx("div",{className:"flex justify-center pt-2",children:e.jsx("button",{onClick:()=>S(!D),className:"text-xs text-blue-600 hover:text-blue-800 hover:underline cursor-pointer transition-colors duration-200 font-medium",children:D?`Show Less (showing ${b.length} of ${b.length})`:`Show More (${b.length-10} more fields)`})})]})})]}),b.length===0&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"All required fields completed! "})]})})]}),e.jsxs("div",{className:"min-h-screen",children:[p===1&&ps(),p===2&&ys(),p===3&&js(),p===4&&Fs()]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex space-x-3",children:p>1&&e.jsx("button",{onClick:()=>g(p-1),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:" Previous Page"})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>ts(!1),disabled:j||!m||l,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",title:m?"":"You do not have permission to save PDS records",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:"Save"})]})}),e.jsx("button",{onClick:s,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 border border-gray-300",type:"button",children:"Close"}),e.jsxs("button",{onClick:Xt,disabled:!d||l,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",title:d?"":"You do not have permission to print PDS records",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),e.jsx("span",{children:"Print PDS"})]}),p<4&&e.jsx("button",{onClick:()=>g(p+1),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Next Page "})]})]})})]})]}),ve&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:we==="height"?"Height Converter":"Weight Converter"}),e.jsx("button",{onClick:$e,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),we==="height"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Convert height to meters"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value"}),e.jsx("input",{type:"number",value:le.value,onChange:ce=>et("value",ce.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"5",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsxs("select",{value:le.unit,onChange:ce=>et("unit",ce.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"ft",children:"Feet (ft)"}),e.jsx("option",{value:"cm",children:"Centimeters (cm)"}),e.jsx("option",{value:"in",children:"Inches (in)"})]})]})]}),e.jsx("button",{onClick:Ue,disabled:!le.value||!le.unit,className:"w-full px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Convert to Meters"}),le.convertedValue&&e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800",children:e.jsxs("strong",{children:["Result: ",le.convertedValue," meters"]})})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Convert weight to kilograms"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value"}),e.jsx("input",{type:"number",value:le.value,onChange:ce=>et("value",ce.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"150",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsxs("select",{value:le.unit,onChange:ce=>et("unit",ce.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"lbs",children:"Pounds (lbs)"}),e.jsx("option",{value:"g",children:"Grams (g)"})]})]})]}),e.jsx("button",{onClick:Ue,disabled:!le.value||!le.unit,className:"w-full px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Convert to Kilograms"}),le.convertedValue&&e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800",children:e.jsxs("strong",{children:["Result: ",le.convertedValue," kilograms"]})})})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:$e,className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:ze,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",disabled:!le.convertedValue,children:"Apply to Form"})]})]})})]}):null},g7=()=>{const[t,s]=x.useState([]),[r,n]=x.useState(!0),[a,l]=x.useState(null),[i,o]=x.useState(""),[c,d]=x.useState(null),[m,u]=x.useState(!1),[p,g]=x.useState(null),[j,y]=x.useState(1),[v,h]=x.useState(10);x.useEffect(()=>{w(),D()},[]);const f=F=>{g({dtruserid:F.DTRuserID,badgenumber:F.BadgeNumber,name:F.NAME,department:F.Department,hasPDS:F.hasPDS}),u(!0)},N=()=>{u(!1),g(null)},b=()=>{w(),D()},w=async()=>{try{n(!0);const F=await oe.get("/201-employees/dtr-employees");s(F.data.data||[]),l(null),console.log(" Loaded employees from:",F.data.source),console.log(" PDS Count:",F.data.pdsCount)}catch(F){console.error("Error fetching employees:",F),l("Failed to load employees from DTR database")}finally{n(!1)}},D=async()=>{try{const F=await oe.get("/201-employees/stats");d(F.data.data)}catch(F){console.error("Error fetching stats:",F)}},S=t.filter(F=>{var Y,q,J,O;if(!i)return!0;const W=i.toLowerCase();return((Y=F.NAME)==null?void 0:Y.toLowerCase().includes(W))||((q=F.BadgeNumber)==null?void 0:q.toString().includes(W))||((J=F.DTRuserID)==null?void 0:J.toString().includes(W))||((O=F.Department)==null?void 0:O.toLowerCase().includes(W))}),C=Math.ceil(S.length/v),T=(j-1)*v,_=T+v,E=S.slice(T,_);x.useEffect(()=>{y(1)},[i,v]);const A=F=>{F>=1&&F<=C&&y(F)},L=F=>{h(Number(F.target.value))};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading employees from HR201..."})]})}):a?e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:e.jsxs("div",{className:"flex",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-red-700",children:a})})]})}):e.jsxs("div",{className:"space-y-6",children:[c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Records"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.total})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.active})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Male"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c.male})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:""})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Female"}),e.jsx("p",{className:"text-2xl font-bold text-pink-600",children:c.female})]}),e.jsx("div",{className:"w-12 h-12 bg-pink-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:""})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex-1 max-w-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Employee"}),e.jsx("input",{type:"text",value:i,onChange:F=>o(F.target.value),placeholder:"Search by name, badge number, DTR User ID, or department...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsx("div",{className:"ml-4 flex space-x-3",children:e.jsxs("button",{onClick:w,className:"px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"Refresh"})]})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",S.length," of ",t.length," employees"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Records per page:"}),e.jsxs("select",{value:v,onChange:L,className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DTR User ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Badge Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Has PDS"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completeness"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500",children:i?"No employees match your search":"No employees found"})}):E.map(F=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:F.DTRuserID})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:F.BadgeNumber||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:F.NAME})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:F.Department||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${F.hasPDS?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:F.hasPDS?" Yes":" No"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:F.hasPDS?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${F.pdscompleprogress>=80?"bg-green-500":F.pdscompleprogress>=50?"bg-yellow-500":F.pdscompleprogress>=25?"bg-orange-500":"bg-red-500"}`,style:{width:`${F.pdscompleprogress||0}%`}})}),e.jsxs("span",{className:"text-xs text-gray-600 font-medium",children:[Math.round(F.pdscompleprogress||0),"%"]})]}):e.jsx("span",{className:"text-xs text-gray-400",children:"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>f(F),className:`transition-colors ${F.hasPDS?"text-green-600 hover:text-green-800":"text-blue-600 hover:text-blue-800"}`,title:F.hasPDS?"Edit PDS":"Add PDS",children:F.hasPDS?"":""})})})]},F.DTRuserID))})]})}),S.length>0&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>A(j-1),disabled:j===1,className:`relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md ${j===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Previous"}),e.jsx("button",{onClick:()=>A(j+1),disabled:j===C,className:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md ${j===C?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:T+1})," to"," ",e.jsx("span",{className:"font-medium",children:_>S.length?S.length:_})," ","of ",e.jsx("span",{className:"font-medium",children:S.length})," results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>A(j-1),disabled:j===1,className:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium ${j===1?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),Array.from({length:C},(F,W)=>W+1).map(F=>F===1||F===C||F>=j-1&&F<=j+1?e.jsx("button",{onClick:()=>A(F),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${j===F?"z-10 bg-green-50 border-green-500 text-green-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:F},F):F===j-2||F===j+2?e.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."},F):null),e.jsxs("button",{onClick:()=>A(j+1),disabled:j===C,className:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium ${j===C?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})]}),e.jsx(x7,{isOpen:m,onClose:N,selectedEmployee:p,onSave:b})]})},y7=({filters:t,onFilterChange:s,ranks:r,appointments:n,onCreate:a,canCreate:l})=>e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:t.search,onChange:i=>s("search",i.target.value),placeholder:"Search employee name",className:"px-3 py-2 border rounded"}),e.jsxs("select",{value:t.rankId,onChange:i=>s("rankId",i.target.value),className:"px-3 py-2 border rounded",children:[e.jsx("option",{value:"",children:"All Designation"}),(r||[]).map(i=>e.jsx("option",{value:i.rankid,children:i.rankname},i.rankid))]}),e.jsxs("select",{value:t.appointmentId,onChange:i=>s("appointmentId",i.target.value),className:"px-3 py-2 border rounded",children:[e.jsx("option",{value:"",children:"All Appointments"}),(n||[]).map(i=>e.jsx("option",{value:i.id,children:i.appointmentname},i.id))]}),e.jsx("div",{className:"flex items-center justify-end gap-2",children:l&&e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Create Designation"})})]})}),gb=({src:t,name:s})=>t?e.jsx("img",{src:t,alt:s,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-sm text-gray-600",children:(s||"NA").split(" ").map(r=>r[0]).join("").substring(0,2)}),b7=()=>{const{can:t}=Vs(),[s,r]=x.useState("designations"),[n,a]=x.useState({search:"",rankId:"",appointmentId:""}),[l,i]=x.useState([]),[o,c]=x.useState([]),[d,m]=x.useState([]),[u,p]=x.useState([]),[g,j]=x.useState(!1),[y,v]=x.useState(!1),[h,f]=x.useState(null),[N,b]=x.useState(!1),[w,D]=x.useState([]),[S,C]=x.useState(""),[T,_]=x.useState({emp_objid:"",designationid:"",position:"",jobdescription:"",appointmentdate:"",appointmentstatus:"",assigneddept:"",plantillano:"",salarygrade:"",gradeincrement:"",salary:""}),[E,A]=x.useState({}),L=async(O,M,k=[])=>{var I;try{console.log("[Designation Toggle] handleTogglePresent start",{recordId:O.objid,nextValue:M,siblingCount:k==null?void 0:k.length,ispresent:O.ispresent});const K=M?{ispresent:1,emp_objid:O.emp_objid}:{ispresent:0};if(console.log("[Designation Toggle] sending payload",K),M){await oe.put(`/employee-designations/${O.objid}`,K);const z=(k||[]).filter(P=>P.objid!==O.objid&&String(P.ispresent)==="1");z.length>0&&await Promise.all(z.map(P=>oe.put(`/employee-designations/${P.objid}`,{ispresent:0})))}else await oe.put(`/employee-designations/${O.objid}`,{ispresent:0});await W("all")}catch(K){console.error("Failed to update designation status",((I=K==null?void 0:K.response)==null?void 0:I.data)||K),alert("Failed to update designation status")}console.log("[Designation Toggle] handleTogglePresent end")},F=async()=>{var I;const[O,M,k]=await Promise.all([oe.get("/employee-designations/ranks"),oe.get("/employee-designations/appointment-types"),oe.get("/departments")]);i(Array.isArray(O.data)?O.data:[]),c(Array.isArray(M.data)?M.data:[]),m(Array.isArray(k.data)?k.data:((I=k.data)==null?void 0:I.data)||[])},W=async(O="active",M=null)=>{var k;j(!0);try{const I=M??n,{search:K,rankId:z,appointmentId:P}=I,R=await oe.get("/employee-designations",{params:{status:O,search:K,rankId:z,appointmentId:P}});p(((k=R.data)==null?void 0:k.data)||[])}finally{j(!1)}},Y=(O,M)=>{a(k=>{const I={...k,[O]:M};return W("all",I),I})};x.useEffect(()=>{F(),W("all"),(async()=>{var O;try{const M=await oe.get("/201-employees");D(((O=M.data)==null?void 0:O.data)||[])}catch{}})()},[]),x.useEffect(()=>{if(h){const O=h.gradeincrement??"",M=O===""?"":String(O).padStart(2,"0");_(I=>({...I,emp_objid:h.emp_objid||h.employee_objid||"",designationid:h.rankid||"",position:h.position||"",appointmentstatus:h.appointmentid||"",appointmentdate:h.appointmentdate?String(h.appointmentdate).slice(0,10):"",assigneddept:h.assigneddept||h.deptid||"",plantillano:h.plantillano||"",salarygrade:h.salarygrade||"",gradeincrement:M,dailywage:h.dailywage??"",salary:h.salary??"",jobdescription:h.jobdescription||""}));const k=bs(h.surname,h.firstname,h.middlename);C(k)}},[h]);const q=x.useMemo(()=>{const O=new Map;return u.forEach(M=>{const k=M.emp_objid;O.has(k)||O.set(k,{employee:M,records:[]}),O.get(k).records.push(M)}),Array.from(O.values())},[u]),J=O=>{A(M=>({...M,[O]:!M[O]}))};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsx("div",{className:"px-6",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>{r("designations"),W("all")},className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="designations"?"border-green-600 text-green-700":"border-transparent text-gray-500"}`,children:"Designations"}),e.jsx("button",{onClick:()=>{r("records"),W("all")},className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="records"?"border-green-600 text-green-700":"border-transparent text-gray-500"}`,children:"Designation Records"})]})})}),e.jsx(y7,{filters:n,onFilterChange:Y,ranks:l,appointments:o,onCreate:()=>{f(null),C(""),_({emp_objid:"",designationid:"",position:"",jobdescription:"",appointmentdate:"",appointmentstatus:"",assigneddept:"",plantillano:"",salarygrade:"",gradeincrement:"",dailywage:"",salary:""}),v(!0)},canCreate:t("201-designation","create")}),g?e.jsx("div",{className:"text-center py-10",children:"Loading..."}):s==="designations"?q.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow p-6 text-center text-gray-500",children:"No designation records found."}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-1 py-2 w-10"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Department"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Position"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Appointment"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q.map(({employee:O,records:M})=>{const k=!!E[O.emp_objid],I=M.find(z=>Number(z.ispresent)===1)||null,K=!I;return e.jsxs(St.Fragment,{children:[e.jsxs("tr",{className:"bg-white",children:[e.jsx("td",{className:"px-1 py-2 w-10 text-center",children:e.jsx("button",{type:"button",onClick:()=>J(O.emp_objid),className:"inline-flex items-center justify-center w-6 h-6 border rounded-full text-sm text-gray-600 hover:bg-gray-100","aria-label":k?"Collapse details":"Expand details",children:k?"-":"+"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(gb,{src:O.photo_path,name:Ys(O)}),e.jsx("div",{className:"text-sm text-gray-800 font-medium",children:Ys(O)})]})}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:K?"No Designation":(I==null?void 0:I.departmentname)||"-"}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:K?"No Designation":(I==null?void 0:I.position)||"-"}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:K?"No Designation":(I==null?void 0:I.appointmentname)||"-"})]}),k&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"bg-gray-50 px-4 py-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Designation"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Position"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Department"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Appointment"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Salary Grade"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(z=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm",children:z.rankname||"-"}),e.jsx("td",{className:"px-4 py-2 text-sm",children:z.position||"-"}),e.jsx("td",{className:"px-4 py-2 text-sm",children:z.departmentname||"-"}),e.jsx("td",{className:"px-4 py-2 text-sm",children:z.appointmentname||"-"}),e.jsx("td",{className:"px-4 py-2 text-sm",children:z.salarygrade?(()=>{const P=z.gradeincrement;if(!(P!=null&&String(P).trim()!==""))return`${z.salarygrade}`;const B=String(P).padStart(2,"0");return`${z.salarygrade}-${B}`})():"-"}),e.jsx("td",{className:"px-4 py-2 text-sm",children:e.jsxs("label",{className:`inline-flex items-center ${Number(z.ispresent)===1,"cursor-pointer"}`,children:[e.jsxs("span",{className:"relative inline-flex items-center",children:[e.jsx("input",{type:"checkbox",checked:Number(z.ispresent)===1,disabled:M.length<=1&&Number(z.ispresent)===1,onChange:P=>L(z,P.target.checked,M),className:"sr-only peer","aria-label":`Mark ${z.rankname||"designation"} as active`}),e.jsx("span",{className:"w-11 h-6 bg-gray-200 rounded-full transition-colors peer-focus:outline-none peer-checked:bg-green-500"}),e.jsx("span",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform transform peer-checked:translate-x-5"})]}),e.jsx("span",{className:"ml-3 text-xs uppercase tracking-wide text-gray-500",children:"Present"})]})}),e.jsx("td",{className:"px-4 py-2 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",title:"View","aria-label":"View",onClick:()=>{f(z),b(!0),v(!0)},className:"text-indigo-600 hover:text-indigo-900 p-1 rounded",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{d:"M12 5c-7.633 0-11 6.5-11 7s3.367 7 11 7 11-6.5 11-7-3.367-7-11-7zm0 12c-3.314 0-6-2.239-6-5s2.686-5 6-5 6 2.239 6 5-2.686 5-6 5zm0-8a3 3 0 100 6 3 3 0 000-6z"})})}),t("201-designation","update")&&e.jsx("button",{type:"button",title:"Edit","aria-label":"Edit",onClick:()=>{f(z),b(!1),v(!0)},className:"text-blue-600 hover:text-blue-900 p-1 rounded",children:""})]})})]},z.objid))})]})})})})]},O.emp_objid)})})]})}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Photo"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Designation"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Position"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Department"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Appointment"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(O=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:e.jsx(gb,{src:O.photo_path,name:Ys(O)})}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-800",children:Ys(O)}),e.jsx("td",{className:"px-4 py-2 text-sm",children:O.rankname||"-"}),e.jsx("td",{className:"px-4 py-2 text-sm",children:O.position||"-"}),e.jsx("td",{className:"px-4 py-2 text-sm",children:O.departmentname||"-"}),e.jsx("td",{className:"px-4 py-2 text-sm",children:O.appointmentname||"-"}),e.jsx("td",{className:"px-4 py-2 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${String(O.ispresent)==="1"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:String(O.ispresent)==="1"?"Present":"Not Present"})}),e.jsx("td",{className:"px-4 py-2 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",title:"View","aria-label":"View",onClick:()=>{f(O),b(!0),v(!0)},className:"text-indigo-600 hover:text-indigo-900 p-1 rounded",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{d:"M12 5c-7.633 0-11 6.5-11 7s3.367 7 11 7 11-6.5 11-7-3.367-7-11-7zm0 12c-3.314 0-6-2.239-6-5s2.686-5 6-5 6 2.239 6 5-2.686 5-6 5zm0-8a3 3 0 100 6 3 3 0 000-6z"})})}),t("201-designation","update")&&e.jsx("button",{type:"button",title:"Edit","aria-label":"Edit",onClick:()=>{f(O),b(!1),v(!0)},className:"text-blue-600 hover:text-blue-900 p-1 rounded",children:""})]})})]},O.objid))})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4",children:[e.jsxs("div",{className:"px-6 py-4 border-b flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:N?"View Designation":h?"Edit Designation":"Add Designation"}),e.jsx("button",{type:"button",onClick:()=>v(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:S,onChange:O=>{C(O.target.value),_(M=>({...M,emp_objid:""}))},placeholder:"Type employee name to search...",className:`w-full px-3 py-2 border rounded ${h||N?"bg-gray-100 cursor-not-allowed":""}`,disabled:!!h||N}),S&&!T.emp_objid&&e.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[w.filter(O=>Ys(O).toLowerCase().includes(S.toLowerCase())).slice(0,10).map(O=>{var k;const M=Ys(O);return e.jsxs("div",{onClick:()=>{_(I=>({...I,emp_objid:O.objid})),C(M)},className:"px-3 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0 flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-200 flex-shrink-0",children:O.photo_path?e.jsx("img",{src:O.photo_path,alt:"Employee",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500 text-xs",children:((k=O.firstname)==null?void 0:k.charAt(0))||"?"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:M})})]},O.objid)}),w.filter(O=>Ys(O).toLowerCase().includes(S.toLowerCase())).length===0&&e.jsx("div",{className:"px-3 py-2 text-gray-500",children:"No employees found"})]})]}),T.emp_objid&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200 flex-shrink-0",children:(()=>{var M;const O=w.find(k=>k.objid===T.emp_objid);return O!=null&&O.photo_path?e.jsx("img",{src:O.photo_path,alt:"Selected Employee",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500 text-lg font-medium",children:((M=O==null?void 0:O.firstname)==null?void 0:M.charAt(0))||"?"})})()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-green-800",children:" Selected Employee"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:(()=>{const O=w.find(M=>M.objid===T.emp_objid);return O?Ys(O):"Unknown Employee"})()}),e.jsxs("div",{className:"text-sm text-gray-600",children:["DTR User ID: ",(()=>{const O=w.find(M=>M.objid===T.emp_objid);return(O==null?void 0:O.dtruserid)||"-"})()]})]}),!h&&!N&&e.jsx("button",{type:"button",onClick:()=>{_(O=>({...O,emp_objid:""})),C("")},className:"text-gray-400 hover:text-gray-600 text-sm",children:" Clear"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Designation"}),e.jsxs("select",{value:T.designationid,onChange:O=>_(M=>({...M,designationid:O.target.value})),className:"w-full px-3 py-2 border rounded",disabled:N,children:[e.jsx("option",{value:"",children:"Select"}),(l||[]).map(O=>e.jsx("option",{value:O.rankid,children:O.rankname},O.rankid))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appointment Status"}),e.jsxs("select",{value:T.appointmentstatus,onChange:O=>_(M=>({...M,appointmentstatus:O.target.value})),className:"w-full px-3 py-2 border rounded",disabled:N,children:[e.jsx("option",{value:"",children:"Select"}),(o||[]).map(O=>e.jsx("option",{value:O.id,children:O.appointmentname},O.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appointment Date"}),e.jsx("input",{type:"date",value:T.appointmentdate,onChange:O=>_(M=>({...M,appointmentdate:O.target.value})),className:"w-full px-3 py-2 border rounded",disabled:N})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),e.jsx("input",{type:"text",value:T.position,onChange:O=>_(M=>({...M,position:O.target.value})),className:"w-full px-3 py-2 border rounded",disabled:N})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assigned Department"}),e.jsxs("select",{value:T.assigneddept,onChange:O=>_(M=>({...M,assigneddept:O.target.value})),className:"w-full px-3 py-2 border rounded",disabled:N,children:[e.jsx("option",{value:"",children:"Select"}),(d||[]).map(O=>{const M=O.deptid,k=O.departmentshortname||O.departmentname||"Unnamed Department";return e.jsx("option",{value:M,children:k},M)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plantilla No."}),e.jsx("input",{type:"text",value:T.plantillano,onChange:O=>_(M=>({...M,plantillaNo:O.target.value,plantillano:O.target.value})),className:"w-full px-3 py-2 border rounded",disabled:N})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salary Grade"}),e.jsxs("select",{value:T.salarygrade||"",onChange:O=>_(M=>({...M,salarygrade:O.target.value})),className:"w-full px-3 py-2 border rounded",disabled:N,children:[e.jsx("option",{value:"",children:"Select"}),Array.from({length:33},(O,M)=>M+1).map(O=>e.jsx("option",{value:O,children:O},O))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Step (Increment)"}),e.jsxs("select",{value:T.gradeincrement||"",onChange:O=>_(M=>({...M,gradeincrement:O.target.value})),className:"w-full px-3 py-2 border rounded",disabled:N,children:[e.jsx("option",{value:"",children:"Select"}),Array.from({length:9},(O,M)=>String(M+1).padStart(2,"0")).map(O=>e.jsx("option",{value:O,children:O},O))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Daily Wage"}),e.jsx("input",{type:"number",step:"0.01",value:T.dailywage||"",onChange:O=>_(M=>({...M,dailywage:O.target.value})),className:"w-full px-3 py-2 border rounded",disabled:N})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salary"}),e.jsx("input",{type:"number",step:"0.01",value:T.salary,onChange:O=>_(M=>({...M,salary:O.target.value})),className:"w-full px-3 py-2 border rounded",disabled:N})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Description"}),e.jsx("div",{className:"border rounded",children:e.jsx(W1,{value:T.jobdescription||"",onChange:O=>_(M=>({...M,jobdescription:O})),modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],["link"],["clean"]]},formats:["header","bold","italic","underline","strike","list","bullet","indent","align","link"],placeholder:"Enter job description...",style:{minHeight:"120px"},readOnly:N})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>{v(!1),b(!1)},className:"px-4 py-2 rounded border",children:N?"Close":"Cancel"}),!N&&(h?t("201-designation","update"):t("201-designation","create"))&&e.jsx("button",{type:"button",onClick:async()=>{if(!T.emp_objid||!T.designationid||!T.appointmentstatus)return;const O={emp_objid:T.emp_objid,rankid:T.designationid,position:T.position,appointmentid:T.appointmentstatus?parseInt(T.appointmentstatus,10):null,appointmentdate:T.appointmentdate||null,assigneddept:T.assigneddept||null,plantillano:T.plantillano||null,salarygrade:T.salarygrade?parseInt(T.salarygrade,10):null,gradeincrement:T.gradeincrement?parseInt(T.gradeincrement,10):null,dailywage:T.dailywage===""||T.dailywage==null?null:parseFloat(T.dailywage),salary:T.salary===""||T.salary==null?null:parseFloat(T.salary),jobdescription:T.jobdescription||null};try{h?await oe.put(`/employee-designations/${h.objid}`,{rankid:O.rankid,position:O.position,appointmentid:O.appointmentid,dailywage:O.dailywage,salary:O.salary,assigneddept:O.assigneddept,jobdescription:O.jobdescription}):await oe.post("/employee-designations",O),v(!1),W("active")}catch(M){console.error("Save failed",M)}},className:"px-4 py-2 rounded bg-indigo-600 text-white",children:"Save"})]})]})]})})]})},v7=({initialTab:t="employees",canViewEmployees:s=!1,canViewPds:r=!1,canViewDesignation:n=!1})=>{const a=x.useMemo(()=>[{id:"employees",label:"Employees",visible:s,render:()=>e.jsx(p7,{})},{id:"pds",label:"PDS",visible:r,render:()=>e.jsx(g7,{})},{id:"designation",label:"Designation",visible:n,render:()=>e.jsx(b7,{})}],[n,s,r]),l=x.useMemo(()=>{const m=a.filter(p=>p.visible);return m.length===0?null:(m.find(p=>p.id===t)||m[0]).id},[t,a]),[i,o]=x.useState(l);if(x.useEffect(()=>{o(m=>m===l?m:l)},[l]),!l)return e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-white border border-dashed rounded-lg p-8 text-center text-gray-500",children:"You currently do not have access to any employees, PDS, or designation modules."})});const c=m=>`px-4 py-2 text-sm font-semibold border-b-2 transition-colors duration-150 ${i===m?"border-green-600 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"}`,d=a.find(m=>m.id===i&&m.visible);return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsx("nav",{className:"flex flex-wrap gap-4",children:a.filter(m=>m.visible).map(m=>e.jsx("button",{type:"button",className:c(m.id),onClick:()=>o(m.id),children:m.label},m.id))})}),e.jsx("div",{className:"mt-4",children:d?d.render():e.jsx("div",{className:"bg-white border border-dashed rounded-lg p-8 text-center text-gray-500",children:"The selected tab is not available."})})]})},j7=()=>{var ct,Ye;const{user:t}=Ts(),{can:s,loading:r}=Vs(),n="201-leave",a=s(n,"read"),l=s(n,"create"),i=s(n,"update"),o=s(n,"delete"),c=s(n,"approve"),d=s(n,"return"),m=s(n,"cancel"),u=s(n,"print"),[p,g]=x.useState([]),[j,y]=x.useState([]),[v,h]=x.useState([]),[f,N]=x.useState(!0),[b,w]=x.useState(!1),[D,S]=x.useState(""),[C,T]=x.useState(""),[_,E]=x.useState(!1),[A,L]=x.useState(!1),[F,W]=x.useState("add"),[Y,q]=x.useState(null),[J,O]=x.useState(null),[M,k]=x.useState({leavetypeid:"",deductmode:"Leave",leavepurpose:"",selectedDates:[],status:"For Approval",deductedcredit:0,inclusivedates:0,leavecharging:"",leaveremarks:""}),[I,K]=x.useState([]),[z,P]=x.useState({selectedQuestionId:null,answer:""}),[R,B]=x.useState([]),[U,G]=x.useState("leave-information"),[$,X]=x.useState([]),[Q,Ne]=x.useState({dateFrom:"",dateTo:"",status:"",searchEmployee:"",leavetypeid:""}),[V,re]=x.useState(!1),[ne,xe]=x.useState(null),[me,Z]=x.useState({text:"",type:""}),[ee,ye]=x.useState([]),[ve,ue]=x.useState([]),[we,De]=x.useState(!1),[le,Ie]=x.useState(null),[ge,Ge]=x.useState(!1),[ke,Re]=x.useState(""),[Ke,Xe]=x.useState(""),[Se,lt]=x.useState(null),[it,Pt]=x.useState({open:!1,transaction:null}),[Nt,At]=x.useState(""),[Ce,Ze]=x.useState(!1),[fe,Pe]=x.useState(null),[Le,ut]=x.useState(!1),Be=(te,Me="success")=>{Z({text:te,type:Me}),setTimeout(()=>Z({text:"",type:""}),5e3)},[mt,qe]=x.useState({dateFrom:"",dateTo:"",status:"",leavetypeid:""}),Oe=({label:te,value:Me,options:rt=[],onSelect:xt,placeholder:Mt="Select an option",required:Ee=!1,className:$e=""})=>{const[et,Te]=x.useState(!1),[he,Ue]=x.useState(""),[ze,ht]=x.useState(null),st=Array.isArray(rt)?rt.filter(dt=>dt&&typeof dt=="object"&&dt.value&&dt.label):[];x.useEffect(()=>{if(Me&&st.length>0){const dt=st.find(It=>It.value===Me);ht(dt||null)}else ht(null)},[Me,st]);const ot=st.filter(dt=>{try{return!dt||!dt.label||typeof dt.label!="string"?!1:dt.label.toLowerCase().includes(he.toLowerCase())}catch(It){return console.error("Error filtering option:",It,dt),!1}});x.useEffect(()=>{const dt=It=>{et&&!It.target.closest(".enhanced-dropdown")&&(Te(!1),Ue(""))};return document.addEventListener("mousedown",dt),()=>{document.removeEventListener("mousedown",dt)}},[et]);const vt=dt=>{try{if(!dt||typeof xt!="function"){console.error("Invalid option or onSelect function:",dt,xt);return}ht(dt),xt(dt.value),Te(!1),Ue("")}catch(It){console.error("Error selecting option:",It,dt)}},bt=()=>{Te(!et),et||Ue("")};return e.jsxs("div",{className:`enhanced-dropdown ${$e}`,children:[te&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[te,Ee&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{onClick:bt,className:`w-full px-3 py-2 border border-gray-300 rounded-md cursor-pointer bg-white flex items-center justify-between ${et?"ring-2 ring-blue-500 border-blue-500":"hover:border-gray-400"} transition-colors duration-200`,children:[e.jsx("span",{className:ze?"text-gray-900":"text-gray-500",children:ze?ze.label:Mt}),e.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${et?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),et&&e.jsxs("div",{className:"absolute z-[70] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b border-gray-200",children:e.jsx("input",{type:"text",value:he,onChange:dt=>Ue(dt.target.value),placeholder:"Search...",className:"w-full px-2 py-1 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 text-gray-900",autoFocus:!0})}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:ot.length>0?ot.map(dt=>!dt||!dt.value||!dt.label?(console.warn("Invalid option found:",dt),null):e.jsx("div",{className:`px-3 py-2 text-sm cursor-pointer transition-colors duration-150 ${(ze==null?void 0:ze.value)===dt.value?"bg-blue-50 text-blue-900 font-medium":"text-gray-900 hover:bg-gray-50"}`,onClick:()=>vt(dt),children:dt.label},dt.value)):e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:st.length===0?"No options available":"No options found"})})]})]})]})};x.useEffect(()=>{if(!a)return;console.log(" Component mounted, fetching data..."),rs(),qt(),zt();const te=new Date,Me=new Date(te.getFullYear(),te.getMonth(),1),rt=new Date(te.getFullYear(),te.getMonth()+1,0);Ne({dateFrom:Me.toISOString().split("T")[0],dateTo:rt.toISOString().split("T")[0],status:"",searchEmployee:"",leavetypeid:""})},[a]);const He=x.useCallback(async()=>{if(a)try{N(!0);const te=new URLSearchParams;Q.dateFrom&&te.append("dateFrom",Q.dateFrom),Q.dateTo&&te.append("dateTo",Q.dateTo),Q.status&&te.append("status",Q.status),Q.leavetypeid&&te.append("leavetypeid",Q.leavetypeid);const Me=await oe.get(`/employee-leave-transactions/all?${te.toString()}`);console.log("All transactions response:",Me.data),X(Me.data)}catch(te){console.error("Error fetching all transactions:",te)}finally{N(!1)}},[a,Q.dateFrom,Q.dateTo,Q.status,Q.leavetypeid]);x.useEffect(()=>{U==="leave-transactions"&&a&&He()},[U,a,He]);const Kt=x.useMemo(()=>{let te=Array.isArray($)?[...$]:[];if(Q.searchEmployee&&Q.searchEmployee.trim()){const Me=Q.searchEmployee.toLowerCase().trim();te=te.filter(rt=>Ys(rt).toLowerCase().includes(Me))}return te},[$,Q.searchEmployee]),rs=async()=>{if(a)try{N(!0);const te=await oe.get("/employee-leave-transactions");g(te.data)}catch(te){console.error("Error fetching employees:",te),Be("Error fetching employees","error")}finally{N(!1)}},qt=async()=>{var te;if(a)try{const Me=await oe.get("/departments");y(((te=Me.data)==null?void 0:te.data)||Me.data||[])}catch(Me){console.error("Error fetching departments:",Me),y([])}},zt=async()=>{var te,Me;if(a)try{console.log(" Fetching leave types..."),console.log(" API base URL:",oe.defaults.baseURL);const rt=await oe.get("/leave-types");console.log(" Leave types response:",rt.data),console.log(" Response status:",rt.status);const xt=rt.data.success?rt.data.data:rt.data;console.log(" Processed leave types:",xt),console.log(" First leave type structure:",xt==null?void 0:xt[0]),console.log(" Available fields:",xt!=null&&xt[0]?Object.keys(xt[0]):"No data"),h(xt||[])}catch(rt){console.error(" Error fetching leave types:",rt),console.error(" Error details:",(te=rt.response)==null?void 0:te.data),console.error(" Error status:",(Me=rt.response)==null?void 0:Me.status),h([])}},xs=async te=>{try{console.log(" Fetching questions for leave type:",te);const Me=await oe.get(`/leave-types/${te}/questions`);if(console.log(" Questions response:",Me.data),Me.data.success){const rt=Me.data.data||[];K(rt),rt.length===1?P({selectedQuestionId:rt[0].objid,answer:""}):P({selectedQuestionId:null,answer:""})}else K([]),P({selectedQuestionId:null,answer:""})}catch(Me){console.error(" Error fetching questions:",Me),K([]),P({selectedQuestionId:null,answer:""})}},ms=async te=>{if(a)try{const Me=await oe.get(`/employee-leave-transactions/${te}`);B(Me.data)}catch(Me){console.error("Error fetching employee transactions:",Me),Be("Error fetching employee transactions","error")}},Ut=te=>!te||te.length===0?"N/A":te.map(Me=>new Date(Me.deducteddate).toLocaleDateString("en-US",{month:"short",day:"numeric"})).join(", "),$t=te=>{switch(te){case"For Approval":return"bg-yellow-100 text-yellow-800";case"Approved":return"bg-green-100 text-green-800";case"Returned":return"bg-blue-100 text-blue-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Qt=te=>{S(te.target.value)},gs=te=>{T(te||"")},Yt=x.useMemo(()=>p.filter(te=>{const Me=!!(te.designation_objid||te.current_designation_id),rt=te.appointment_canleave??te.canleave??null,xt=rt==null?null:Number(rt);if(!Me||xt!==null&&xt!==1)return!1;const Mt=te.employee_name||"",Ee=te.employee_id||"",$e=Mt.toLowerCase().includes(D.toLowerCase())||Ee.toLowerCase().includes(D.toLowerCase()),et=te.assigned_dept_id??te.assigneddept??null,Te=!C||et!=null&&String(et)===String(C);return $e&&Te}),[p,C,D]),os=async(te,Me,rt=null)=>{if(te==="add"&&!l){alert("You do not have permission to create leave transactions.");return}if(te==="edit"&&!i){alert("You do not have permission to update leave transactions.");return}if(te==="view"&&!a){alert("You do not have permission to view leave transactions.");return}if(W(te),q(Me),O(rt),te==="add")re(!1),k({leavetypeid:"",deductmode:"Leave",leavepurpose:"",selectedDates:[],status:"For Approval",deductedcredit:0,inclusivedates:0,leavecharging:"",leaveremarks:""}),ye([]),ue([]);else if(te==="edit"&&rt){re(!0),xe(rt),k({leavetypeid:rt.leavetypeid,deductmode:rt.deductmode,leavepurpose:rt.leavepurpose,selectedDates:rt.details?rt.details.map(xt=>xt.deducteddate):[],status:rt.status,deductedcredit:rt.deductedcredit,inclusivedates:rt.inclusivedates,leavecharging:rt.leavecharging||"VL",leaveremarks:rt.leaveremarks||""});try{const xt=(rt.details||[]).map(Mt=>new Date(Mt.deducteddate));ye(xt),ue((rt.details||[]).map(Mt=>String(Mt.deducteddate).slice(0,10)))}catch{}rt.leavetypeid&&await xs(rt.leavetypeid),rt.questionAnswer&&P({selectedQuestionId:rt.questionAnswer.questionId,answer:rt.questionAnswer.answer})}else te==="view"&&ms(Me.emp_objid);L(!0)};x.useEffect(()=>{const te=(ee||[]).filter(Boolean).map(Me=>{const rt=Me.getFullYear(),xt=String(Me.getMonth()+1).padStart(2,"0"),Mt=String(Me.getDate()).padStart(2,"0");return`${rt}-${xt}-${Mt}`});k(Me=>({...Me,selectedDates:Array.from(new Set([...(Me.selectedDates||[]).filter(rt=>!ve.includes(rt)),...te])),inclusivedates:te.length,deductedcredit:te.length*1})),ue(te)},[ee]);const Zt=x.useCallback(async(te,Me,rt,xt,Mt=null)=>{var Ee;if(!te||!Me||!xt||xt.length===0){Pe(null);return}try{ut(!0);const $e=await oe.post("/employee-leave-transactions/validate",{emp_objid:te,leavetypeid:Me,deductedcredit:rt,selectedDates:xt,exclude_transaction_objid:Mt});$e.data&&$e.data.success!==!1?$e.data.valid?Pe(null):Pe({valid:!1,error:$e.data.error||"Validation failed"}):Pe({valid:!1,error:((Ee=$e.data)==null?void 0:Ee.error)||"Validation failed"})}catch($e){console.error("Error validating leave limits:",$e),Pe(null)}finally{ut(!1)}},[]);x.useEffect(()=>{var te,Me;A&&(Y!=null&&Y.emp_objid)&&M.leavetypeid&&((te=M.selectedDates)==null?void 0:te.length)>0?Zt(Y.emp_objid,M.leavetypeid,M.deductedcredit||M.inclusivedates||0,M.selectedDates,V&&(ne!=null&&ne.objid)?ne.objid:null):(!M.leavetypeid||((Me=M.selectedDates)==null?void 0:Me.length)===0)&&Pe(null)},[M.leavetypeid,M.selectedDates,M.deductedcredit,Y==null?void 0:Y.emp_objid,A,V,ne==null?void 0:ne.objid,Zt]);const Jt=te=>{k(Me=>{const rt=(Me.selectedDates||[]).filter(Mt=>Mt!==te),xt=Math.max(0,rt.length);return{...Me,selectedDates:rt,inclusivedates:xt,deductedcredit:xt*1}}),ve.includes(te)&&(ye(Me=>Me.filter(rt=>{const xt=rt.getFullYear(),Mt=String(rt.getMonth()+1).padStart(2,"0"),Ee=String(rt.getDate()).padStart(2,"0");return`${xt}-${Mt}-${Ee}`!==te})),ue(Me=>Me.filter(rt=>rt!==te)))},es=()=>{L(!1),q(null),O(null),re(!1),xe(null),k({leavetypeid:"",deductmode:"Leave",leavepurpose:"",selectedDates:[],status:"For Approval",deductedcredit:0,inclusivedates:0}),K([]),P({selectedQuestionId:null,answer:""}),B([]),Pe(null)},be=te=>{const{name:Me,value:rt}=te.target;k(xt=>({...xt,[Me]:rt}))},nt=async()=>{if(F==="add"&&!l){alert("You do not have permission to create leave transactions.");return}if(F==="edit"&&!i){alert("You do not have permission to update leave transactions.");return}try{if(w(!0),F==="add"){const te={emp_objid:Y.emp_objid,leavetypeid:M.leavetypeid,deductmode:M.deductmode,leavepurpose:M.leavepurpose,selectedDates:M.selectedDates,deductedcredit:M.deductedcredit,inclusivedates:M.inclusivedates,status:M.status,createdby:t.USERID,leavecharging:M.leavecharging||"VL",leaveremarks:M.leaveremarks||null,questionAnswers:z.selectedQuestionId&&z.answer?z:null};await oe.post("/employee-leave-transactions",te),Be("Leave transaction created successfully")}else if(F==="edit"){const te={leavetypeid:M.leavetypeid,deductmode:M.deductmode,leavepurpose:M.leavepurpose,selectedDates:M.selectedDates,deductedcredit:M.deductedcredit,inclusivedates:M.inclusivedates,status:M.status,approvedby:M.status==="Approved"?t.USERID:null,approveddate:M.status==="Approved"?new Date().toISOString():null,leavecharging:M.leavecharging||"VL",leaveremarks:M.leaveremarks||null,questionAnswers:z.selectedQuestionId&&z.answer?z:null};await oe.put(`/employee-leave-transactions/${J.objid}`,te),Be("Leave transaction updated successfully")}es(),U==="leave-information"?rs():He()}catch(te){console.error("Error saving transaction:",te),Be("Error saving transaction","error")}finally{w(!1)}},tt=async te=>{if(!o){alert("You do not have permission to delete leave transactions.");return}if(window.confirm("Are you sure you want to delete this transaction?"))try{await oe.delete(`/employee-leave-transactions/${te}`),Be("Transaction deleted successfully"),U==="leave-information"?rs():He()}catch(Me){console.error("Error deleting transaction:",Me),Be("Error deleting transaction","error")}},ft=(te,Me=null)=>{if(Me==="approve"&&!c){alert("You do not have permission to approve leave transactions.");return}if(Me==="return"&&!d){alert("You do not have permission to return leave transactions.");return}if(!a){alert("You do not have permission to view leave transactions.");return}Ie(te),Re(te.leavecharging||"VL"),Xe(te.leaveremarks||""),lt(Me),De(!0)},kt=()=>{De(!1),Ie(null),Re(""),Xe(""),lt(null)},_t=async()=>{var te,Me;if(it.transaction){if(!m){alert("You do not have permission to cancel leave transactions.");return}if(!Nt||Nt.trim()===""){Be("Leave remarks are required to cancel","error");return}try{Ze(!0);const rt={leavetypeid:it.transaction.leavetypeid,deductmode:it.transaction.deductmode||"Leave",leavepurpose:it.transaction.leavepurpose,selectedDates:it.transaction.details?it.transaction.details.map(xt=>xt.deducteddate||xt.leavedate):[],deductedcredit:it.transaction.deductedcredit,inclusivedates:it.transaction.inclusivedates,status:"Cancelled",leavecharging:it.transaction.leavecharging,leaveremarks:Nt.trim(),questionAnswers:it.transaction.questionAnswer?{selectedQuestionId:it.transaction.questionAnswer.questionId,answer:it.transaction.questionAnswer.answer}:null};window.confirm("Are you sure you want to cancel this leave?")&&(await oe.put(`/employee-leave-transactions/${it.transaction.objid}`,rt),Be("Leave transaction cancelled successfully","success"),Pt({open:!1,transaction:null}),At(""),U==="leave-information"?rs():He())}catch(rt){console.error("Error cancelling transaction:",rt),Be(((Me=(te=rt.response)==null?void 0:te.data)==null?void 0:Me.error)||"Error cancelling transaction","error")}finally{Ze(!1)}}},cs=async te=>{var Me,rt;if(te==="Approved"&&!c){alert("You do not have permission to approve leave transactions.");return}if(te==="Returned"&&!d){alert("You do not have permission to return leave transactions.");return}if(le){if(te==="Approved"&&(!ke||!Ke)){Be("Leave Charging and Leave Remarks are required before approval","error");return}try{Ge(!0);const xt={leavetypeid:le.leavetypeid,deductmode:le.deductmode||"Leave",leavepurpose:le.leavepurpose,selectedDates:le.details?le.details.map(Mt=>Mt.deducteddate||Mt.leavedate):[],deductedcredit:le.deductedcredit,inclusivedates:le.inclusivedates,status:te,leavecharging:ke,leaveremarks:Ke,questionAnswers:le.questionAnswer?{selectedQuestionId:le.questionAnswer.questionId,answer:le.questionAnswer.answer}:null};await oe.put(`/employee-leave-transactions/${le.objid}`,xt),Be(`Leave transaction ${te.toLowerCase()} successfully`,"success"),kt(),U==="leave-information"?rs():He()}catch(xt){console.error("Error updating transaction status:",xt),Be(((rt=(Me=xt.response)==null?void 0:Me.data)==null?void 0:rt.error)||"Error updating transaction status","error")}finally{Ge(!1)}}},as=te=>{switch(te){case"For Approval":return"bg-yellow-100 text-yellow-800";case"Approved":return"bg-green-100 text-green-800";case"Returned":return"bg-blue-100 text-blue-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},_e=te=>new Date(te).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),We=R.filter(te=>{const Me=!mt.dateFrom||new Date(te.deductdate)>=new Date(mt.dateFrom),rt=!mt.dateTo||new Date(te.deductdate)<=new Date(mt.dateTo),xt=!mt.status||te.status===mt.status,Mt=!mt.leavetypeid||te.leavetypeid===mt.leavetypeid;return Me&&rt&&xt&&Mt});return f?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):r?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsx("p",{className:"text-gray-600",children:"Loading permissions"})})}):a?e.jsxs("div",{className:"p-6",children:[me.text&&e.jsx("div",{className:`mb-4 p-4 rounded-md ${me.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:me.type==="success"?e.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium",children:me.text})})]})}),e.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[e.jsx("button",{onClick:()=>G("leave-information"),className:`px-6 py-3 font-medium ${U==="leave-information"?"border-b-2 border-green-500 text-green-600":"text-gray-500 hover:text-gray-700"}`,children:"Information"}),e.jsx("button",{onClick:()=>{G("leave-transactions"),He()},className:`px-6 py-3 font-medium ${U==="leave-transactions"?"border-b-2 border-green-500 text-green-600":"text-gray-500 hover:text-gray-700"}`,children:"Transactions"})]}),U==="leave-information"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Employee"}),e.jsx("input",{type:"text",value:D,onChange:Qt,placeholder:"Search by name or ID...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>E(!_),className:"w-full px-3 py-2 text-left border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white flex items-center justify-between",children:[e.jsx("span",{children:C?(()=>{const te=j.find(xt=>String(xt.deptid||xt.DEPTID)===String(C));if(!te)return"All Departments";const Me=te.departmentshortname||te.DEPARTMENTSHORTNAME||"",rt=te.departmentname||te.DEPARTMENTNAME||"";return Me?`${Me} (${rt})`:rt})():"All Departments"}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${_?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),_&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>E(!1)}),e.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:[e.jsx("button",{type:"button",onClick:()=>{gs(""),E(!1)},className:`w-full px-3 py-2 text-left hover:bg-gray-100 ${C?"":"bg-blue-50"}`,children:"All Departments"}),j&&Array.isArray(j)&&j.map(te=>{const Me=te.departmentshortname||te.DEPARTMENTSHORTNAME||"",rt=te.departmentname||te.DEPARTMENTNAME||"",xt=te.deptid||te.DEPTID,Mt=String(C)===String(xt);return e.jsx("button",{type:"button",onClick:()=>{gs(String(xt)),E(!1)},className:`w-full px-3 py-2 text-left hover:bg-gray-100 ${Mt?"bg-blue-50":""}`,children:Me?`${Me} (${rt})`:rt},xt)})]})]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"VL Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SL Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Filed Leaves"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Approved Leaves"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Yt.map(te=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex-shrink-0 h-10 w-10",children:[or(te.photo_path)?e.jsx("img",{src:or(te.photo_path),alt:Ys(te),className:"h-10 w-10 rounded-full object-cover",onError:Me=>{Me.target.style.display="none",Me.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 font-medium",style:{display:or(te.photo_path)?"none":"flex"},children:te.employee_name.split(" ").map(Me=>Me[0]).join("").substring(0,2).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:te.employee_name}),te.designation_objid&&te.department_name&&te.position_title?e.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[te.department_name," - ",te.position_title]}):te.designation_objid&&te.department_name?e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:te.department_name}):te.designation_objid&&te.position_title?e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:te.position_title}):null]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.vl_balance||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.sl_balance||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.filed_leaves||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.approved_leaves||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2 items-center",children:[l&&e.jsx("button",{onClick:()=>os("add",te),className:"text-green-600 hover:text-green-900",title:"Add Leave Transaction",children:""}),a&&e.jsx("button",{onClick:()=>os("view",te),className:"text-purple-600 hover:text-purple-900",title:"View All Transactions",children:""}),!l&&!a&&e.jsx("span",{className:"text-xs text-gray-400 italic",children:"No actions"})]})})]},te.emp_objid))})]})})}),A&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"relative w-full max-w-4xl bg-white rounded-lg shadow-xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:or(Y==null?void 0:Y.photo_path)?e.jsx("img",{src:or(Y.photo_path),alt:Ys(Y||{}),className:"w-full h-full object-cover"}):null}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[F==="add"&&"Add Leave Transaction",F==="edit"&&"Edit Leave Transaction",F==="view"&&"View Leave Transactions"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[Y==null?void 0:Y.employee_name," ",Y!=null&&Y.employee_id?` ${Y.employee_id}`:""]})]})]}),e.jsx("button",{onClick:es,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200 p-1 rounded-full hover:bg-gray-100",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),F==="view"?e.jsxs("div",{children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[or(Y==null?void 0:Y.photo_path)?e.jsx("img",{src:or(Y.photo_path),alt:Y.employee_name,className:"h-16 w-16 rounded-full object-cover"}):e.jsx("div",{className:"h-16 w-16 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 text-lg font-medium",children:Ys(Y||{}).split(" ").map(te=>te[0]).join("").substring(0,2)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:Ys(Y||{})}),e.jsx("p",{className:"text-gray-600",children:Y==null?void 0:Y.employee_id})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date From"}),e.jsx("input",{type:"date",value:mt.dateFrom,onChange:te=>qe(Me=>({...Me,dateFrom:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date To"}),e.jsx("input",{type:"date",value:mt.dateTo,onChange:te=>qe(Me=>({...Me,dateTo:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:mt.status,onChange:te=>qe(Me=>({...Me,status:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"For Approval",children:"For Approval"}),e.jsx("option",{value:"Approved",children:"Approved"}),e.jsx("option",{value:"Returned",children:"Returned"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leave Type"}),e.jsxs("select",{value:mt.leavetypeid,onChange:te=>qe(Me=>({...Me,leavetypeid:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[e.jsx("option",{value:"",children:"All Leave Types"}),v&&Array.isArray(v)&&v.map(te=>e.jsx("option",{value:te.leaveid,children:te.leavetypename},te.leaveid))]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leave No."}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leave Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Purpose"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Credits"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:We.map(te=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.leaveno||""}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_e(te.deductdate)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.leave_type_name||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:te.leavepurpose}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.inclusivedates}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.deductedcredit}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${as(te.status)}`,children:te.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2 items-center",children:[i&&e.jsx("button",{onClick:()=>os("edit",Y,te),className:"px-2 py-1 text-blue-600 hover:text-blue-800",title:"Edit",children:""}),u&&e.jsx("button",{onClick:()=>gp(te,Y||{employee_name:te.employee_name,emp_objid:te.emp_objid,department_name:te.department_name,position_title:te.position_title,salary:te.salary,vl_balance:te.vl_balance??te.leave_vl_balance??(Y==null?void 0:Y.vl_balance)??(Y==null?void 0:Y.leave_vl_balance)??null,sl_balance:te.sl_balance??te.leave_sl_balance??(Y==null?void 0:Y.sl_balance)??(Y==null?void 0:Y.leave_sl_balance)??null}),className:"px-2 py-1 text-green-600 hover:text-green-800",title:"Print Leave Application",children:""}),o&&e.jsx("button",{onClick:()=>tt(te.objid),className:"px-2 py-1 text-red-600 hover:text-red-800 ml-1",title:"Delete",children:""}),!i&&!o&&!u&&e.jsx("span",{className:"text-xs text-gray-400 italic",children:"No actions"})]})})]},te.objid))})]})})]}):e.jsx("div",{children:e.jsxs("form",{onSubmit:te=>{te.preventDefault(),nt()},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(Oe,{label:"Leave Type",value:M.leavetypeid,options:v&&Array.isArray(v)?v.map(te=>(console.log(" Mapping leave type:",te),{value:te.leaveid,label:`${te.leavetype||"Unknown Leave Type"} (${te.leavecode||"N/A"})`,hasQuestions:te.hasquestion===1||te.hasquestion===!0})):[],onSelect:te=>{try{const Me=v.find(xt=>xt.leaveid===te),rt=(Me==null?void 0:Me.leavecharging)||"VL";k(xt=>({...xt,leavetypeid:te,leavecharging:rt})),Me&&(Me.hasquestion===1||Me.hasquestion===!0)?xs(te):(K([]),P({selectedQuestionId:null,answer:""}))}catch(Me){console.error("Error setting leave type:",Me)}},placeholder:"Select Leave Type",required:!0}),fe&&!fe.valid&&e.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-400 mt-0.5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-sm text-red-800",children:fe.error})]})}),Le&&e.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"Validating leave limits..."})]}),e.jsx("div",{children:I.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Questions"}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:I.map((te,Me)=>e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("input",{type:"radio",id:`question-${te.objid}`,name:"leave-question",checked:z.selectedQuestionId===te.objid,onChange:rt=>{rt.target.checked&&P({selectedQuestionId:te.objid,answer:""})},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("label",{htmlFor:`question-${te.objid}`,className:"block text-xs font-medium text-gray-700 mb-1 cursor-pointer",children:[Me+1,". ",te.question]}),z.selectedQuestionId===te.objid&&e.jsx("textarea",{value:z.answer,onChange:rt=>{P(xt=>({...xt,answer:rt.target.value}))},rows:2,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",placeholder:"Answer..."})]})]})},te.objid))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(Oe,{label:"Deduct Mode",value:M.deductmode,options:[{value:"Leave",label:"Leave"},{value:"Absent",label:"Absent"},{value:"Lates",label:"Lates"}],onSelect:te=>k(Me=>({...Me,deductmode:te})),placeholder:"Select Deduct Mode"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leave Purpose"}),e.jsx("textarea",{name:"leavepurpose",value:M.leavepurpose,onChange:be,rows:3,maxLength:100,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",placeholder:"Enter leave purpose..."}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[M.leavepurpose.length,"/100 characters"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Dates"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(vl,{mode:"multiple",selected:ee,onSelect:ye,weekStartsOn:1,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-1,toYear:new Date().getFullYear()+1})}),e.jsxs("div",{className:"border rounded p-3 bg-gray-50 max-h-64 overflow-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Selected Dates"}),e.jsxs("span",{className:"text-xs text-gray-600",children:["Total: ",(M.selectedDates||[]).length]})]}),e.jsxs("ul",{className:"space-y-1 text-sm",children:[(M.selectedDates||[]).sort().map(te=>{const Me=te.slice(5,7),rt=te.slice(8,10),xt=te.slice(0,4),Mt=`${Me}/${rt}/${xt}`;return e.jsxs("li",{className:"flex items-center justify-between bg-white rounded border px-2 py-1",children:[e.jsx("span",{children:Mt}),e.jsx("button",{type:"button",onClick:()=>Jt(te),className:"text-red-600 text-xs",children:"Remove"})]},te)}),!(M.selectedDates||[]).length&&e.jsx("li",{className:"text-xs text-gray-500",children:"No dates selected"})]})]})]})]}),F==="edit"&&e.jsx(Oe,{label:"Status",value:M.status,options:[{value:"For Approval",label:"For Approval"},{value:"Approved",label:"Approved"},{value:"Returned",label:"Returned"},{value:"Cancelled",label:"Cancelled"}],onSelect:te=>k(Me=>({...Me,status:te})),placeholder:"Select Status"}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:es,className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b||!M.leavetypeid||M.selectedDates.length===0||fe&&!fe.valid,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:b?"Saving...":F==="add"?"Create Transaction":"Update Transaction"})]})]})})]})})})]}),U==="leave-transactions"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2.5",children:"Search Employee"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Search by employee name...",value:Q.searchEmployee,onChange:te=>Ne(Me=>({...Me,searchEmployee:te.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2.5",children:"Date From"}),e.jsx("input",{type:"date",value:Q.dateFrom,onChange:te=>Ne(Me=>({...Me,dateFrom:te.target.value})),className:"w-full px-3 py-2.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2.5",children:"Date To"}),e.jsx("input",{type:"date",value:Q.dateTo,onChange:te=>Ne(Me=>({...Me,dateTo:te.target.value})),min:Q.dateFrom||void 0,className:"w-full px-3 py-2.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2.5",children:"Leave Type"}),e.jsxs("select",{value:Q.leavetypeid,onChange:te=>Ne(Me=>({...Me,leavetypeid:te.target.value})),className:"w-full px-3 py-2.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[e.jsx("option",{value:"",children:"All Leave Types"}),v.map(te=>{const Me=te.leavetype||te.leavetypename||te.leave_type_name||te.leave_type||te.name||"",rt=te.leavecode||te.leave_code||"",xt=Me?rt?`${Me} (${rt})`:Me:rt||"Unknown",Mt=te.leaveid||te.objid||"";return e.jsx("option",{value:Mt,children:xt},Mt)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2.5",children:"Status"}),e.jsxs("select",{value:Q.status,onChange:te=>Ne(Me=>({...Me,status:te.target.value})),className:"w-full px-3 py-2.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"For Approval",children:"For Approval"}),e.jsx("option",{value:"Approved",children:"Approved"}),e.jsx("option",{value:"Returned",children:"Returned"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]})]}),(Q.searchEmployee||Q.dateFrom||Q.dateTo||Q.status||Q.leavetypeid)&&e.jsx("div",{className:"mt-4",children:e.jsx("button",{type:"button",onClick:()=>{const te=new Date,Me=new Date(te.getFullYear(),te.getMonth(),1),rt=new Date(te.getFullYear(),te.getMonth()+1,0);Ne({dateFrom:Me.toISOString().split("T")[0],dateTo:rt.toISOString().split("T")[0],status:"",searchEmployee:"",leavetypeid:""})},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Clear Filters"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leave No."}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leave Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inclusive Date(s)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created By"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Kt.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-6 text-center text-sm text-gray-500",children:$.length===0?"No leave transactions found.":"No transactions match the filters."})}):Kt.map(te=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex-shrink-0 h-10 w-10",children:[te.photo_path?e.jsx("img",{src:or(te.photo_path),alt:Ys(te),className:"h-10 w-10 rounded-full object-cover",onError:Me=>{Me.target.style.display="none",Me.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 font-medium",style:{display:te.photo_path?"none":"flex"},children:Ys(te).split(" ").map(Me=>Me[0]).join("").substring(0,2).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:Ys(te)}),te.designation_objid&&te.department_name&&te.position_title?e.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[te.department_name," - ",te.position_title]}):te.designation_objid&&te.department_name?e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:te.department_name}):te.designation_objid&&te.position_title?e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:te.position_title}):null]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.leaveno||""}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[te.leave_type_name," (",te.leavecode,")"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Ut(te.details)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${$t(te.status)}`,children:te.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:te.isportal===1?e.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"Portal"}):e.jsx("div",{className:"h-8 w-8",children:te.created_by_photo_path?e.jsx("img",{src:te.created_by_photo_path,alt:te.created_by_employee_name||te.created_by_username||"",className:"h-8 w-8 rounded-full object-cover",title:te.created_by_employee_name||te.created_by_username||"",onError:Me=>{Me.target.style.display="none",Me.target.nextSibling.style.display="flex"}}):e.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 text-xs font-medium",children:(()=>{if(te.created_by_surname&&te.created_by_firstname)return`${te.created_by_surname.charAt(0)}${te.created_by_firstname.charAt(0)}`;if(te.created_by_employee_name){const Me=te.created_by_employee_name.split(",").map(rt=>rt.trim());if(Me.length>=2){const rt=Me[0],xt=Me[1].split(" ")[0];return`${rt.charAt(0)}${xt.charAt(0)}`}}return te.created_by_username?te.created_by_username.substring(0,2).toUpperCase():"??"})()})})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex gap-2 items-center",children:[te.status==="For Approval"&&c&&e.jsx("button",{onClick:()=>ft(te,"approve"),className:"px-2 py-1 text-green-600 hover:text-green-800",title:"Approve",children:""}),te.status==="For Approval"&&d&&e.jsx("button",{onClick:()=>ft(te,"return"),className:"px-2 py-1 text-orange-600 hover:text-orange-800",title:"Return",children:""}),(te.status==="For Approval"||te.status==="Returned"||te.status==="Approved")&&m&&e.jsx("button",{onClick:()=>Pt({open:!0,transaction:te}),className:"px-2 py-1 text-red-600 hover:text-red-800",title:"Cancel Leave",children:""}),u&&e.jsx("button",{onClick:()=>gp(te,{employee_name:te.employee_name,emp_objid:te.emp_objid,department_name:te.department_name,position_title:te.position_title,salary:te.salary,vl_balance:te.vl_balance??te.leave_vl_balance??null,sl_balance:te.sl_balance??te.leave_sl_balance??null}),className:"px-2 py-1 text-green-600 hover:text-green-800",title:"Print Leave Application",children:""}),o&&e.jsx("button",{onClick:()=>tt(te.objid),className:"px-2 py-1 text-red-600 hover:text-red-800",title:"Delete Transaction",children:""}),!(te.status==="For Approval"&&(c||d)||(te.status==="For Approval"||te.status==="Returned"||te.status==="Approved")&&m||o||u)&&e.jsx("span",{className:"text-xs text-gray-400 italic",children:"No actions"})]})})]},te.objid))})]})})})]}),we&&le&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"relative w-full max-w-2xl bg-white rounded-lg shadow-xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:le.photo_path?e.jsx("img",{src:or(le.photo_path),alt:le.employee_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-300",children:e.jsx("span",{className:"text-gray-600 text-sm font-medium",children:(ct=le.employee_name)==null?void 0:ct.split(" ").map(te=>te[0]).join("").substring(0,2)})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"View Leave Transaction"}),e.jsx("div",{className:"text-sm text-gray-600",children:le.employee_name})]})]}),e.jsx("button",{onClick:kt,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200 p-1 rounded-full hover:bg-gray-100",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-4",children:"Leave Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leave No."}),e.jsx("div",{className:"text-sm text-gray-900",children:le.leaveno||""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leave Type"}),e.jsxs("div",{className:"text-sm text-gray-900",children:[le.leave_type_name||"",le.leavecode&&` (${le.leavecode})`]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leave Dates"}),e.jsx("div",{className:"text-sm text-gray-900",children:le.details&&le.details.length>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:le.details.map((te,Me)=>{const rt=te.deducteddate||te.leavedate;if(!rt)return null;const xt=rt.slice(5,7),Mt=rt.slice(8,10),Ee=rt.slice(0,4);return e.jsxs("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:[xt,"/",Mt,"/",Ee]},Me)})}):e.jsx("span",{className:"text-gray-400",children:"No dates"})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purpose"}),e.jsx("div",{className:"text-sm text-gray-900",children:le.leavepurpose||""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created By"}),e.jsx("div",{className:"text-sm text-gray-900",children:le.isportal===1?e.jsx("span",{className:"text-blue-600 font-medium",children:"Portal"}):le.created_by_employee_name?le.created_by_employee_name:le.created_by_username?le.created_by_username:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("div",{children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${as(le.status)}`,children:le.status})})]})]})]}),le.status==="For Approval"&&Se!=="return"&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-4",children:"Approval Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Leave Charging ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:ke,onChange:te=>Re(te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",required:!0,children:[e.jsx("option",{value:"VL",children:"VL"}),e.jsx("option",{value:"SL",children:"SL"}),e.jsx("option",{value:"ND",children:"ND"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Leave Remarks ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:Ke,onChange:te=>Xe(te.target.value),rows:3,placeholder:"Enter remarks for this leave application...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",required:!0})]})]})]}),Se==="return"&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-orange-800 mb-4",children:"Return Leave Transaction"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Leave Remarks ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:Ke,onChange:te=>Xe(te.target.value),rows:4,placeholder:"Enter the reason for returning this leave transaction...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 text-gray-900",required:!0})]})]}),(le.approved_by_employee_name||le.questionAnswer)&&Se!=="return"&&e.jsxs("div",{className:"space-y-4 mb-6",children:[le.approved_by_employee_name&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Approved By"}),e.jsx("div",{className:"text-sm text-gray-900",children:le.approved_by_employee_name})]}),le.questionAnswer&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question & Answer"}),e.jsxs("div",{className:"text-sm text-gray-900",children:[e.jsx("div",{className:"font-medium mb-1",children:le.questionAnswer.questionText||""}),e.jsx("div",{className:"text-gray-600",children:le.questionAnswer.answer||""})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:kt,className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Close"}),Se==="approve"&&le.status==="For Approval"&&c&&e.jsx("button",{type:"button",onClick:()=>{window.confirm("Are you sure you want to approve this leave transaction? This will deduct the leave credits from the employee's balance.")&&cs("Approved")},disabled:ge,className:"px-6 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:ge?"Updating...":"Approve"}),Se==="return"&&le.status==="For Approval"&&d&&e.jsx("button",{type:"button",onClick:()=>{window.confirm("Are you sure you want to return this leave transaction?")&&cs("Returned")},disabled:ge,className:"px-6 py-2 text-sm font-medium text-white bg-orange-600 border border-transparent rounded-md hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:ge?"Updating...":"Return"})]})]})})}),m&&it.open&&it.transaction&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"relative w-full max-w-2xl bg-white rounded-lg shadow-xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:it.transaction.photo_path?e.jsx("img",{src:or(it.transaction.photo_path),alt:it.transaction.employee_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-300",children:e.jsx("span",{className:"text-gray-600 text-sm font-medium",children:(Ye=it.transaction.employee_name)==null?void 0:Ye.split(" ").map(te=>te[0]).join("").substring(0,2)})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Cancel Leave Transaction"}),e.jsx("div",{className:"text-sm text-gray-600",children:it.transaction.employee_name})]})]}),e.jsx("button",{onClick:()=>{Pt({open:!1,transaction:null}),At("")},className:"text-red-400 hover:text-red-600 transition-colors duration-200 p-1 rounded-full hover:bg-red-50",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-4",children:"Leave Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leave No."}),e.jsx("div",{className:"text-sm text-gray-900",children:it.transaction.leaveno||""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leave Type"}),e.jsxs("div",{className:"text-sm text-gray-900",children:[it.transaction.leave_type_name||"",it.transaction.leavecode&&` (${it.transaction.leavecode})`]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leave Dates"}),e.jsx("div",{className:"text-sm text-gray-900",children:it.transaction.details&&it.transaction.details.length>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:it.transaction.details.map((te,Me)=>{const rt=te.deducteddate||te.leavedate;if(!rt)return null;const xt=rt.slice(5,7),Mt=rt.slice(8,10),Ee=rt.slice(0,4);return e.jsxs("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:[xt,"/",Mt,"/",Ee]},Me)})}):e.jsx("span",{className:"text-gray-400",children:"No dates"})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purpose"}),e.jsx("div",{className:"text-sm text-gray-900",children:it.transaction.leavepurpose||""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created By"}),e.jsx("div",{className:"text-sm text-gray-900",children:it.transaction.isportal===1?e.jsx("span",{className:"text-blue-600 font-medium",children:"Portal"}):it.transaction.created_by_employee_name?it.transaction.created_by_employee_name:it.transaction.created_by_username?it.transaction.created_by_username:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("div",{children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${as(it.transaction.status)}`,children:it.transaction.status})})]})]})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-red-800 mb-4",children:"Cancel Leave Transaction"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Leave Remarks ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:Nt,onChange:te=>At(te.target.value),rows:4,placeholder:"Enter the reason for cancelling this leave transaction...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-900",required:!0})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>{Pt({open:!1,transaction:null}),At("")},className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Close"}),e.jsx("button",{type:"button",onClick:_t,disabled:Ce,className:"px-6 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:Ce?"Cancelling...":"Cancel Leave"})]})]})})})]}):e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsx("p",{className:"text-gray-600",children:"You do not have permission to view leave transactions."})})})},N7=()=>{var O;const{user:t}=Ts(),{can:s,loading:r}=Vs(),[n,a]=x.useState([]),[l,i]=x.useState(!0),[o,c]=x.useState(null),[d,m]=x.useState(""),[u,p]=x.useState(!1),[g,j]=x.useState("add"),[y,v]=x.useState(null),[h,f]=x.useState({total_earned_vl:"",total_earned_sl:"",balance_vl:"",balance_sl:""}),[N,b]=x.useState(!1),w=s("201-leave-credits","read")||s("201-leave","read"),D=s("201-leave-credits","create")||s("201-leave","create"),S=s("201-leave-credits","update")||s("201-leave","update"),C=s("201-leave-credits","delete")||s("201-leave","delete"),T=async()=>{if(w)try{i(!0);const M=await oe.get("/employee-leave-records");M.data.success?a(M.data.employees):c("Failed to fetch employees")}catch(M){console.error("Error fetching employees:",M),c("Failed to fetch employees")}finally{i(!1)}};x.useEffect(()=>{w&&T()},[w]);const E=n.filter(M=>{if(!!!M.designation_objid)return!1;const I=M.appointment_canleave,K=I==null?null:Number(I);return!(K!==null&&K!==1)}).filter(M=>{const k=Ys(M)||"",I=M.employee_id||"",K=d.toLowerCase();return k.toLowerCase().includes(K)||I.toLowerCase().includes(K)}),A=(M,k)=>{if(k==="add"&&!D){alert("You do not have permission to add leave credits.");return}if(k==="edit"&&!S){alert("You do not have permission to update leave credits.");return}v(M),j(k),f(k==="add"?{total_earned_vl:M.total_earned_vl||"",total_earned_sl:M.total_earned_sl||"",balance_vl:"",balance_sl:""}:{total_earned_vl:M.total_earned_vl||"",total_earned_sl:M.total_earned_sl||"",balance_vl:M.balance_vl||"",balance_sl:M.balance_sl||""}),p(!0)},L=()=>{p(!1),v(null),f({total_earned_vl:"",total_earned_sl:"",balance_vl:"",balance_sl:""})},F=M=>{const{name:k,value:I}=M.target;f(K=>({...K,[k]:I}))},W=()=>{const M=[];return g==="add"&&((!h.balance_vl||h.balance_vl<0)&&M.push("Balance VL must be a positive number"),(!h.balance_sl||h.balance_sl<0)&&M.push("Balance SL must be a positive number")),h.total_earned_vl<0&&M.push("Total Earned VL must be a positive number"),h.total_earned_sl<0&&M.push("Total Earned SL must be a positive number"),M},Y=async()=>{if(g==="add"&&!D){alert("You do not have permission to create leave credits.");return}if(g==="edit"&&!S){alert("You do not have permission to update leave credits.");return}const M=W();if(M.length>0){alert(M.join(`
`));return}try{if(b(!0),g==="add"){const k={emp_objid:y.emp_objid,balance_vl:parseFloat(h.balance_vl),balance_sl:parseFloat(h.balance_sl),total_earned_vl:parseFloat(h.total_earned_vl),total_earned_sl:parseFloat(h.total_earned_sl),updated_by:t.user_objid};await oe.post("/employee-leave-records",k),alert("Leave record created successfully!")}else{const k={balance_vl:parseFloat(h.balance_vl),balance_sl:parseFloat(h.balance_sl),total_earned_vl:parseFloat(h.total_earned_vl),total_earned_sl:parseFloat(h.total_earned_sl),updated_by:t.user_objid};await oe.put(`/employee-leave-records/${y.leave_objid}`,k),alert("Leave record updated successfully!")}L(),T()}catch(k){console.error("Error saving leave record:",k),alert("Failed to save leave record. Please try again.")}finally{b(!1)}},q=async M=>{if(!C){alert("You do not have permission to delete leave credits.");return}if(window.confirm(`Are you sure you want to delete the leave record for ${Ys(M)}?`))try{await oe.delete(`/employee-leave-records/${M.leave_objid}`),alert("Leave record deleted successfully!"),T()}catch(k){console.error("Error deleting leave record:",k),alert("Failed to delete leave record. Please try again.")}},J=M=>M?parseFloat(M).toFixed(3):"0.000";return r?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"bg-white shadow rounded-lg p-6 text-gray-600",children:"Loading permissions"})}):w?l?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:e.jsx("p",{children:o})})]})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",placeholder:"Search employees by name or ID...",value:d,onChange:M=>m(M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})})}),e.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Earned VL"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Earned SL"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance VL"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance SL"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Updated By"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(M=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex-shrink-0 h-10 w-10",children:[or(M.photo_path)?e.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:or(M.photo_path),alt:Ys(M),onError:k=>{k.target.style.display="none",k.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 font-medium",style:{display:or(M.photo_path)?"none":"flex"},children:Ys(M).split(" ").map(k=>k[0]).join("").substring(0,2).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:Ys(M)}),M.designation_objid&&M.department_name&&M.position_title?e.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[M.department_name," - ",M.position_title]}):M.designation_objid&&M.department_name?e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:M.department_name}):M.designation_objid&&M.position_title?e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:M.position_title}):null]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:J(M.total_earned_vl)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:J(M.total_earned_sl)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:J(M.balance_vl)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:J(M.balance_sl)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:M.updatedby&&(M.updated_by_employee_name||M.updated_by_username)?e.jsxs("div",{className:"h-8 w-8",children:[M.updated_by_photo_path?e.jsx("img",{src:M.updated_by_photo_path,alt:`${M.updated_by_employee_name||M.updated_by_username||""}`,className:"h-8 w-8 rounded-full object-cover cursor-pointer",title:(()=>{if(M.updated_by_surname&&M.updated_by_firstname){const k=M.updated_by_middlename?` ${M.updated_by_middlename.charAt(0)}.`:"";return`${M.updated_by_surname}, ${M.updated_by_firstname}${k}`}return M.updated_by_employee_name?M.updated_by_employee_name:M.updated_by_username||"Unknown"})(),onError:k=>{k.target.style.display="none",k.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`h-8 w-8 rounded-full bg-gray-300 items-center justify-center ${M.updated_by_photo_path?"hidden":"flex"}`,title:(()=>{if(M.updated_by_surname&&M.updated_by_firstname){const k=M.updated_by_middlename?` ${M.updated_by_middlename.charAt(0)}.`:"";return`${M.updated_by_surname}, ${M.updated_by_firstname}${k}`}return M.updated_by_employee_name?M.updated_by_employee_name:M.updated_by_username||"Unknown"})(),children:e.jsx("span",{className:"text-gray-600 text-xs font-medium",children:(()=>{if(M.updated_by_surname&&M.updated_by_firstname)return`${M.updated_by_surname.charAt(0)}${M.updated_by_firstname.charAt(0)}`;if(M.updated_by_employee_name){const k=M.updated_by_employee_name.split(",").map(I=>I.trim());if(k.length>=2){const I=k[0],K=k[1].split(" ")[0];return`${I.charAt(0)}${K.charAt(0)}`}}return M.updated_by_username?M.updated_by_username.substring(0,2).toUpperCase():"??"})()})})]}):e.jsx("span",{className:"text-gray-400",children:""})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("div",{className:"flex space-x-2 items-center",children:M.has_leave_record?e.jsxs(e.Fragment,{children:[S&&e.jsx("button",{onClick:()=>A(M,"edit"),className:"px-2 py-1 text-blue-600 hover:text-blue-800",title:"Edit Leave Record",children:""}),C&&e.jsx("button",{onClick:()=>q(M),className:"px-2 py-1 text-red-600 hover:text-red-800",title:"Delete Leave Record",children:""}),!S&&!C&&e.jsx("span",{className:"text-xs text-gray-400 italic",children:"View only"})]}):D?e.jsx("button",{onClick:()=>A(M,"add"),className:"text-green-600 hover:text-green-900",title:"Add Leave Record",children:""}):e.jsx("span",{className:"text-xs text-gray-400 italic",children:"No actions"})})})]},M.emp_objid))})]})}),E.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No employees found matching your search criteria."})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:g==="add"?"Add Leave Record":"Edit Leave Record"}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Employee Information"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[or(y==null?void 0:y.photo_path)?e.jsx("img",{className:"h-12 w-12 rounded-full object-cover",src:or(y==null?void 0:y.photo_path),alt:y==null?void 0:y.name}):e.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 font-medium",children:(O=y==null?void 0:y.name)==null?void 0:O.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:y==null?void 0:y.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",y==null?void 0:y.employee_id]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"Total Earned Credits"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Earned VL"}),e.jsx("input",{type:"number",name:"total_earned_vl",value:h.total_earned_vl,onChange:F,step:"0.001",min:"0",max:"9999.999",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Earned SL"}),e.jsx("input",{type:"number",name:"total_earned_sl",value:h.total_earned_sl,onChange:F,step:"0.001",min:"0",max:"9999.999",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-green-900 mb-3",children:"Leave Balances"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"VL"}),e.jsx("input",{type:"number",name:"balance_vl",value:h.balance_vl,onChange:F,step:"0.001",min:"0",max:"9999.999",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SL"}),e.jsx("input",{type:"number",name:"balance_sl",value:h.balance_sl,onChange:F,step:"0.001",min:"0",max:"9999.999",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:L,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),e.jsx("button",{onClick:Y,disabled:N,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:N?"Saving...":"Save"})]})]})})})]}):e.jsx("div",{className:"bg-white shadow rounded-lg p-6 text-center text-gray-600",children:"You do not have permission to view leave credits."})},w7=()=>{const[t,s]=x.useState([]),[r,n]=x.useState(!1),[a,l]=x.useState(!1),[i,o]=x.useState(null),[c,d]=x.useState(""),[m,u]=x.useState(null),[p,g]=x.useState(""),[j,y]=x.useState({leavecode:"",leavetype:"",leavedescription:"",coverage:"",annualentitlement:"",accrual:"",cycle:"",isconverttocash:!1,hasquestion:!1}),[v,h]=x.useState({}),[f,N]=x.useState(""),[b,w]=x.useState(!1),[D,S]=x.useState(!1),[C,T]=x.useState(null),[_,E]=x.useState([]),{can:A,loading:L}=Vs(),F="201-leave",W=A(F,"read"),Y=A(F,"create"),q=A(F,"update"),J=A(F,"delete"),O=A(F,"print"),M=Y||q||J;x.useEffect(()=>{W&&k()},[W]);const k=async()=>{if(W)try{n(!0);const ne=await oe.get("/leave-types");ne.data.success&&s(ne.data.data)}catch(ne){console.error("Error fetching leave types:",ne),I("Failed to fetch leave types","error")}finally{n(!1)}},I=(ne,xe="success")=>{N(ne),w(!0),setTimeout(()=>w(!1),3e3)},K=ne=>{const{name:xe,value:me,type:Z,checked:ee}=ne.target;y(ye=>({...ye,[xe]:Z==="checkbox"?ee:me})),v[xe]&&h(ye=>({...ye,[xe]:""}))},z=()=>{const ne={};return j.leavecode.trim()?j.leavecode.length>10&&(ne.leavecode="Leave code must be 10 characters or less"):ne.leavecode="Leave code is required",j.leavetype.trim()?j.leavetype.length>25&&(ne.leavetype="Leave type must be 25 characters or less"):ne.leavetype="Leave type is required",h(ne),Object.keys(ne).length===0},P=()=>{if(!Y){alert("You do not have permission to create leave types.");return}l(!0)},R=async ne=>{var xe,me;if(ne.preventDefault(),i&&!q){alert("You do not have permission to update leave types.");return}if(!i&&!Y){alert("You do not have permission to create leave types.");return}if(z())try{n(!0),i?(await oe.put(`/leave-types/${i.leaveid}`,j)).data.success&&(I("Leave type updated successfully"),k(),G()):(await oe.post("/leave-types",j)).data.success&&(I("Leave type created successfully"),k(),G())}catch(Z){console.error("Error saving leave type:",Z);const ee=((me=(xe=Z.response)==null?void 0:xe.data)==null?void 0:me.message)||"Failed to save leave type";I(ee,"error")}finally{n(!1)}},B=ne=>{if(!q){alert("You do not have permission to update leave types.");return}o(ne),y({leavecode:ne.leavecode||"",leavetype:ne.leavetype||"",leavedescription:ne.leavedescription||"",coverage:ne.coverage||"",annualentitlement:ne.annualentitlement||"",accrual:ne.accrual||"",cycle:ne.cycle||"",isconverttocash:ne.isconverttocash===1,hasquestion:ne.hasquestion===1}),l(!0)},U=async ne=>{if(!J){alert("You do not have permission to delete leave types.");return}if(window.confirm(`Are you sure you want to delete "${ne.leavetype}"? This will also delete all associated questions.`))try{n(!0),(await oe.delete(`/leave-types/${ne.leaveid}`)).data.success&&(I("Leave type deleted successfully"),k())}catch(xe){console.error("Error deleting leave type:",xe),I("Failed to delete leave type","error")}finally{n(!1)}},G=()=>{l(!1),o(null),y({leavecode:"",leavetype:"",leavedescription:"",coverage:"",annualentitlement:"",accrual:"",cycle:"",isconverttocash:!1,hasquestion:!1}),h({})},$=async ne=>{if(!W){alert("You do not have permission to view leave type questions.");return}try{T(ne),n(!0);const xe=await oe.get(`/leave-types/${ne.leaveid}/questions`);xe.data.success&&(E(xe.data.data),S(!0))}catch(xe){console.error("Error fetching questions:",xe),I("Failed to fetch questions","error")}finally{n(!1)}},X=()=>{S(!1),T(null),E([]),g(""),u(null)},Q=async()=>{if(!Y){alert("You do not have permission to add questions.");return}if(!p.trim()){I("Question text is required","error");return}try{if(n(!0),(await oe.post(`/leave-types/${C.leaveid}/questions`,{question:p.trim()})).data.success){I("Question added successfully"),g("");const xe=await oe.get(`/leave-types/${C.leaveid}/questions`);xe.data.success&&E(xe.data.data),k()}}catch(ne){console.error("Error adding question:",ne),I("Failed to add question","error")}finally{n(!1)}},Ne=async ne=>{if(!q){alert("You do not have permission to update questions.");return}try{if(n(!0),(await oe.put(`/leave-types/questions/${ne.objid}`,{question:p.trim()})).data.success){I("Question updated successfully"),g(""),u(null);const me=await oe.get(`/leave-types/${C.leaveid}/questions`);me.data.success&&E(me.data.data),k()}}catch(xe){console.error("Error updating question:",xe),I("Failed to update question","error")}finally{n(!1)}},V=async ne=>{if(!J){alert("You do not have permission to delete questions.");return}if(window.confirm("Are you sure you want to delete this question?"))try{if(n(!0),(await oe.delete(`/leave-types/questions/${ne.objid}`)).data.success){I("Question deleted successfully");const me=await oe.get(`/leave-types/${C.leaveid}/questions`);me.data.success&&E(me.data.data),k()}}catch(xe){console.error("Error deleting question:",xe),I("Failed to delete question","error")}finally{n(!1)}},re=t.filter(ne=>ne.leavecode.toLowerCase().includes(c.toLowerCase())||ne.leavetype.toLowerCase().includes(c.toLowerCase())||ne.leavedescription&&ne.leavedescription.toLowerCase().includes(c.toLowerCase()));return L?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsx("p",{className:"text-gray-600",children:"Loading permissions"})})}):W?e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:Y?e.jsx("button",{onClick:P,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Add Leave Type"}):e.jsx("span",{className:"text-sm text-gray-500",children:"No permission to add leave types"})}),b&&e.jsx("div",{className:`mb-4 p-4 rounded-md ${f.includes("error")||f.includes("Failed")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:f}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search leave types...",value:c,onChange:ne=>d(ne.target.value),className:"w-full max-w-md px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leave Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leave Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Annual Entitlement"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Accrual"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Has Question"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):re.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No leave types found"})}):re.map(ne=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:ne.leavecode}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ne.leavetype}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:ne.leavedescription||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ne.annualentitlement||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ne.accrual||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:ne.hasquestion?"Yes":"No"}),e.jsx("button",{onClick:()=>$(ne),className:"ml-2 text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed",title:ne.hasquestion?"Manage Questions":"Add Questions",disabled:!W,children:ne.hasquestion?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[q&&e.jsx("button",{onClick:()=>B(ne),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit Leave Type",children:""}),O&&e.jsx("button",{onClick:()=>{console.log("Print leave type:",ne)},className:"text-green-600 hover:text-green-800 transition-colors",title:"Print Leave Type",children:""}),J&&e.jsx("button",{onClick:()=>U(ne),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete Leave Type",children:""}),!q&&!O&&!J&&e.jsx("span",{className:"text-xs text-gray-400",children:"No actions available"})]})})]},ne.leaveid))})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:i?"Edit Leave Type":"Add Leave Type"}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leave Code *"}),e.jsx("input",{type:"text",name:"leavecode",value:j.leavecode,onChange:K,maxLength:"10",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${v.leavecode?"border-red-500":"border-gray-300"}`}),v.leavecode&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.leavecode})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leave Type *"}),e.jsx("input",{type:"text",name:"leavetype",value:j.leavetype,onChange:K,maxLength:"25",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${v.leavetype?"border-red-500":"border-gray-300"}`}),v.leavetype&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.leavetype})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"leavedescription",value:j.leavedescription,onChange:K,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Coverage"}),e.jsx("textarea",{name:"coverage",value:j.coverage,onChange:K,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Annual Entitlement"}),e.jsx("input",{type:"number",name:"annualentitlement",value:j.annualentitlement,onChange:K,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Accrual"}),e.jsx("input",{type:"number",step:"0.001",name:"accrual",value:j.accrual,onChange:K,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cycle"}),e.jsx("input",{type:"number",name:"cycle",value:j.cycle,onChange:K,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"isconverttocash",checked:j.isconverttocash,onChange:K,className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Convert to Cash"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"hasquestion",checked:j.hasquestion,onChange:K,className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Has Question"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:G,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:r?"Saving...":i?"Update":"Create"})]})]})]})}),D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:[C!=null&&C.hasquestion?"Questions for":"Add Questions to"," ",C==null?void 0:C.leavetype]}),e.jsx("button",{onClick:X,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter question text...",value:p,onChange:ne=>g(ne.target.value),disabled:!M,className:`flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${M?"border-gray-300":"bg-gray-100 cursor-not-allowed border-gray-200"}`}),e.jsxs("button",{onClick:m?()=>Ne(m):Q,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!(m?q:Y),children:[m?"Update":"Add"," Question"]}),m&&q&&e.jsx("button",{onClick:()=>{u(null),g("")},className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"Cancel"})]}),!M&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You do not have permission to modify questions."})]}),e.jsx("div",{className:"space-y-2",children:_.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:C!=null&&C.hasquestion?"No questions found for this leave type.":"No questions added yet. Add your first question below."}):_.map(ne=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[e.jsx("span",{className:"text-sm text-gray-900 flex-1",children:ne.question}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[q&&e.jsx("button",{onClick:()=>{u(ne),g(ne.question)},className:"px-2 py-1 text-blue-600 hover:text-blue-800",title:"Edit",children:""}),J&&e.jsx("button",{onClick:()=>V(ne),className:"px-2 py-1 text-red-600 hover:text-red-800 ml-1",title:"Delete",children:""}),!q&&!J&&e.jsx("span",{className:"text-xs text-gray-400 italic",children:"View only"})]})]},ne.objid))}),e.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t",children:e.jsx("button",{onClick:X,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Close"})})]})})]}):e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsx("p",{className:"text-gray-600",children:"You do not have permission to view leave types."})})})},S7=()=>{const[t,s]=x.useState("transactions"),{can:r,canAccessPage:n,loading:a}=Vs();x.useEffect(()=>{const m=localStorage.getItem("201-leaves-active-tab");m&&["transactions","credits","types"].includes(m)&&s(m)},[]);const l=x.useMemo(()=>[{key:"transactions",label:"Leave Transactions",componentId:"201-leave-transactions",fallbackComponentId:"201-leave",component:e.jsx(j7,{})},{key:"credits",label:"Leave Credits",componentId:"201-leave-credits",fallbackComponentId:"201-leave",component:e.jsx(N7,{})},{key:"types",label:"Leave Types",componentId:"201-leave-types",fallbackComponentId:"201-leave",component:e.jsx(w7,{})}],[]),i=m=>[m.componentId,m.fallbackComponentId].filter(Boolean).some(p=>p?r(p,"read")||n(p):!1),o=l.filter(i),c=o.find(m=>m.key===t),d=m=>{o.some(u=>u.key===m)&&(s(m),localStorage.setItem("201-leaves-active-tab",m))};return x.useEffect(()=>{if(o.length&&!c){const m=o[0];s(m.key),localStorage.setItem("201-leaves-active-tab",m.key)}},[o,c,t]),a?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsx("p",{className:"text-gray-600",children:"Loading permissions"})})}):o.length?e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsx("div",{className:"px-6",children:e.jsx("div",{className:"flex space-x-8",children:o.map(m=>e.jsx("button",{onClick:()=>d(m.key),className:`py-4 px-1 border-b-2 font-medium text-sm ${t===m.key?"border-blue-600 text-blue-700":"border-transparent text-gray-500"}`,children:m.label},m.key))})})}),c&&e.jsx("div",{className:"mt-4",children:c.component})]}):e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsx("p",{className:"text-gray-600",children:"You do not have permission to view any leave tabs."})})})},yb=({status:t})=>{const s=t==="Approved"?"bg-green-100 text-green-800":t==="Returned"?"bg-yellow-100 text-yellow-800":t==="Cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800";return e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${s}`,children:t})},_7=({isOpen:t,onClose:s,onSaved:r,initial:n,emp:a})=>{const[l,i]=x.useState(!1),o=f=>{if(!f)return"";const N=String(f);if(/^\d{2}:\d{2}$/.test(N))return N;if(/^\d{2}:\d{2}:\d{2}$/.test(N))return N.slice(0,5);if(N.includes("T")){const w=N.match(/T(\d{2}:\d{2})/);if(w)return w[1]}if(N.includes(" ")||N.includes("T")){const w=N.split(/[ T]/);if(w.length>1&&/^\d{2}:\d{2}/.test(w[1]))return w[1].slice(0,5)}const b=N.match(/^(\d{2}:\d{2})/);return b?b[1]:""},[c,d]=x.useState(()=>({emp_objid:(n==null?void 0:n.emp_objid)||(a==null?void 0:a.objid)||"",locpurpose:(n==null?void 0:n.locpurpose)||"",locatordate:n!=null&&n.locatordate?String(n.locatordate).slice(0,10):"",locdestination:(n==null?void 0:n.locdestination)||"",loctimedeparture:o(n==null?void 0:n.loctimedeparture),loctimearrival:o(n==null?void 0:n.loctimearrival),locstatus:(n==null?void 0:n.locstatus)||"For Approval"})),m=f=>{if(!f)return{hours:"",minutes:""};const N=String(f).match(/(\d{2}):(\d{2})/);if(N)return{hours:N[1],minutes:N[2]};if(f.includes("T")){const b=String(f).match(/T(\d{2}):(\d{2})/);if(b)return{hours:b[1],minutes:b[2]}}return{hours:"",minutes:""}},u=m(c.loctimedeparture),p=m(c.loctimearrival),g=Array.from({length:24},(f,N)=>N.toString().padStart(2,"0")),j=Array.from({length:60},(f,N)=>N.toString().padStart(2,"0")),y=(f,N,b)=>{d(w=>{const D=w[f]||"",C={...m(D),[N]:b};if(C.hours&&C.minutes){const T=`${C.hours}:${C.minutes}`;return{...w,[f]:T}}else{if(!C.hours&&!C.minutes)return{...w,[f]:""};{const T=C.hours&&C.minutes?`${C.hours}:${C.minutes}`:"";return{...w,[f]:T}}}})};x.useEffect(()=>{t&&d({emp_objid:(n==null?void 0:n.emp_objid)||(a==null?void 0:a.objid)||"",locpurpose:(n==null?void 0:n.locpurpose)||"",locatordate:n!=null&&n.locatordate?String(n.locatordate).slice(0,10):"",locdestination:(n==null?void 0:n.locdestination)||"",loctimedeparture:o(n==null?void 0:n.loctimedeparture),loctimearrival:o(n==null?void 0:n.loctimearrival),locstatus:(n==null?void 0:n.locstatus)||"For Approval"})},[t,n,a]);const v=f=>d(N=>({...N,[f.target.name]:f.target.value})),h=async()=>{if(!c.emp_objid||!c.locpurpose||!c.locatordate||!c.loctimedeparture||!c.loctimearrival){alert("Please fill required fields");return}i(!0);try{const f={locpurpose:c.locpurpose,locatordate:c.locatordate,locdestination:c.locdestination,loctimedeparture:c.loctimedeparture,loctimearrival:c.loctimearrival};n!=null&&n.objid?await oe.put(`/employee-locators/${n.objid}`,f):await oe.post("/employee-locators",{emp_objid:c.emp_objid,...f}),r==null||r(),s()}catch(f){console.error("Failed to save locator",f),alert("Failed to save locator")}finally{i(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:a!=null&&a.photo?e.jsx("img",{src:a.photo,alt:(a==null?void 0:a.name)||"Employee",className:"w-full h-full object-cover"}):null}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:n!=null&&n.objid?"Edit Locator":"Add Locator"}),a!=null&&a.name?e.jsx("div",{className:"text-sm text-gray-600",children:a.name}):null]})]}),e.jsx("button",{className:"text-gray-500",onClick:s,children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Locator Date"}),e.jsx("input",{name:"locatordate",type:"date",className:"mt-1 w-full border rounded px-3 py-2",value:c.locatordate,onChange:v})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Destination"}),e.jsx("input",{name:"locdestination",className:"mt-1 w-full border rounded px-3 py-2",value:c.locdestination,onChange:v})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Time Departure"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("select",{value:u.hours,onChange:f=>y("loctimedeparture","hours",f.target.value),className:"flex-1 border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"HH"}),g.map(f=>e.jsx("option",{value:f,children:f},f))]}),e.jsx("span",{className:"text-gray-500",children:":"}),e.jsxs("select",{value:u.minutes,onChange:f=>y("loctimedeparture","minutes",f.target.value),className:"flex-1 border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"MM"}),j.map(f=>e.jsx("option",{value:f,children:f},f))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Time Arrival"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("select",{value:p.hours,onChange:f=>y("loctimearrival","hours",f.target.value),className:"flex-1 border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"HH"}),g.map(f=>e.jsx("option",{value:f,children:f},f))]}),e.jsx("span",{className:"text-gray-500",children:":"}),e.jsxs("select",{value:p.minutes,onChange:f=>y("loctimearrival","minutes",f.target.value),className:"flex-1 border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"MM"}),j.map(f=>e.jsx("option",{value:f,children:f},f))]})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Purpose"}),e.jsx("textarea",{name:"locpurpose",className:"mt-1 w-full border rounded px-3 py-2",rows:1,value:c.locpurpose,onChange:v})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{className:"px-4 py-2 rounded border",onClick:s,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-60",onClick:h,disabled:l,children:l?"Saving":"Save"})]})]})}):null},E7=({isOpen:t,onClose:s,onApprove:r,locatorNo:n})=>{const[a,l]=x.useState(""),[i,o]=x.useState(!1);x.useEffect(()=>{t&&l("")},[t]);const c=async()=>{if(!a.trim()){alert("Please enter remarks");return}o(!0);try{await r(a),s()}catch(d){console.error("Approve failed",d),alert("Failed to approve locator")}finally{o(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Approve Locator"}),e.jsx("button",{className:"text-gray-500",onClick:s,children:""})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Are you sure you want to approve locator ",e.jsx("strong",{children:n}),"?"]}),e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Remarks"}),e.jsx("textarea",{className:"w-full border rounded px-3 py-2",rows:3,value:a,onChange:d=>l(d.target.value),placeholder:"Enter remarks..."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{className:"px-4 py-2 rounded border",onClick:s,disabled:i,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded bg-green-600 text-white disabled:opacity-60",onClick:c,disabled:i,children:i?"Approving":"Approve"})]})]})}):null},k7=()=>{const{user:t}=Ts(),{can:s}=Vs(),[r,n]=x.useState("info"),[a,l]=x.useState([]),[i,o]=x.useState([]),[c,d]=x.useState([]),[m,u]=x.useState(""),[p,g]=x.useState(!0),[j,y]=x.useState(""),[v,h]=x.useState(""),[f,N]=x.useState(""),[b,w]=x.useState(""),[D,S]=x.useState(!1),[C,T]=x.useState(null),[_,E]=x.useState(null),[A,L]=x.useState(!1),[F,W]=x.useState(null),Y=async re=>{try{const ne=new Map,xe=re.map(async Z=>{var ee;try{const ve=(((ee=(await oe.get("/employee-locators",{params:{emp_objid:Z.objid}})).data)==null?void 0:ee.data)||[]).length;return{objid:Z.objid,count:ve}}catch(ye){return console.error(`Failed to load count for employee ${Z.objid}`,ye),{objid:Z.objid,count:0}}});(await Promise.all(xe)).forEach(({objid:Z,count:ee})=>{ne.set(Z,ee)}),z(ne)}catch(ne){console.error("Failed to load locator counts",ne)}},q=async()=>{var re;try{g(!0);const xe=((re=(await oe.get("/201-employees")).data)==null?void 0:re.data)||[];o(xe),l([]),await Y(xe)}catch(ne){console.error("Failed to load locators",ne)}finally{g(!1)}},J=async()=>{var re;g(!0);try{const xe=(((re=(await oe.get("/employee-locators")).data)==null?void 0:re.data)||[]).sort((me,Z)=>new Date(Z.locatordate)-new Date(me.locatordate));d(xe)}catch(ne){console.error("Failed to load transactions",ne)}finally{g(!1)}};x.useEffect(()=>{q()},[]),x.useEffect(()=>{r==="tx"&&J()},[r]);const[O,M]=x.useState(new Set),[k,I]=x.useState(new Map),[K,z]=x.useState(new Map),P=x.useMemo(()=>(i||[]).filter(ne=>m?(ne.fullname||bs(ne.surname,ne.firstname,ne.middlename)).toLowerCase().includes(m.toLowerCase()):!0).map(ne=>({employee:{objid:ne.objid,name:ne.fullname||bs(ne.surname,ne.firstname,ne.middlename),photo:ne.photo_path||null},items:k.get(ne.objid)||[]})),[i,k,m]),R=async re=>{var ne;try{const me=(((ne=(await oe.get("/employee-locators",{params:{emp_objid:re}})).data)==null?void 0:ne.data)||[]).length;z(Z=>new Map(Z).set(re,me))}catch(xe){console.error("Failed to refresh locator count",xe),z(me=>new Map(me).set(re,0))}},B=async re=>{var xe;const ne=new Set(O);if(ne.has(re)){ne.delete(re),M(ne);return}if(ne.add(re),M(ne),!k.has(re))try{const Z=(((xe=(await oe.get("/employee-locators",{params:{emp_objid:re}})).data)==null?void 0:xe.data)||[]).sort((ee,ye)=>new Date(ye.locatordate)-new Date(ee.locatordate));I(ee=>new Map(ee).set(re,Z)),z(ee=>new Map(ee).set(re,Z.length))}catch(me){console.error("Failed to load employee locators",me),I(Z=>new Map(Z).set(re,[])),z(Z=>new Map(Z).set(re,0))}},U=re=>{E({objid:re.employee.objid,name:re.employee.name,photo:re.employee.photo}),T(null),S(!0)},G=re=>{E({objid:re.emp_objid}),T(re),S(!0)},$=re=>{W(re),L(!0)},X=async re=>{var ne;if(F)try{if(await oe.put(`/employee-locators/${F.objid}`,{locstatus:"Approved",locremarks:re}),r==="info"){const xe=F.emp_objid;if(await R(xe),k.has(xe)){const Z=(((ne=(await oe.get("/employee-locators",{params:{emp_objid:xe}})).data)==null?void 0:ne.data)||[]).sort((ee,ye)=>new Date(ye.locatordate)-new Date(ee.locatordate));I(ee=>new Map(ee).set(xe,Z)),z(ee=>new Map(ee).set(xe,Z.length))}}else J()}catch(xe){throw console.error("Approve failed",xe),xe}},Q=re=>{if(!re)return"";const ne=String(re).slice(0,10);if(ne.length===10&&ne.includes("-")){const[xe,me,Z]=ne.split("-");return`${me}/${Z}/${xe}`}return ne},Ne=re=>{if(!re)return"";const ne=String(re);if(/^\d{2}:\d{2}$/.test(ne))return ne;if(/^\d{2}:\d{2}:\d{2}$/.test(ne))return ne.slice(0,5);if(ne.includes("T")){const me=ne.match(/T(\d{2}:\d{2})/);if(me)return me[1]}if(ne.includes(" ")||ne.includes("T")){const me=ne.split(/[ T]/);if(me.length>1&&/^\d{2}:\d{2}/.test(me[1]))return me[1].slice(0,5)}const xe=ne.match(/^(\d{2}:\d{2})/);return xe?xe[1]:""},V=x.useMemo(()=>{let re=[...c];if(j.trim()){const ne=j.toLowerCase().trim();re=re.filter(xe=>{var Z,ee;return(((Z=xe.employee)==null?void 0:Z.name)||((ee=xe.employee)==null?void 0:ee.fullname)||xe.employee_name||"").toLowerCase().includes(ne)})}return v&&(re=re.filter(ne=>String(ne.locatordate||"").slice(0,10)>=v)),f&&(re=re.filter(ne=>String(ne.locatordate||"").slice(0,10)<=f)),b&&(re=re.filter(ne=>(ne.locstatus||"For Approval").toUpperCase()===b.toUpperCase())),re},[c,j,v,f,b]);return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsx("div",{className:"px-6",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>{n("info")},className:`py-4 px-1 border-b-2 font-medium text-sm ${r==="info"?"border-green-600 text-green-700":"border-transparent text-gray-500"}`,children:"Employee Locators"}),e.jsx("button",{onClick:()=>{n("tx")},className:`py-4 px-1 border-b-2 font-medium text-sm ${r==="tx"?"border-green-600 text-green-700":"border-transparent text-gray-500"}`,children:"Transactions"})]})})}),r==="info"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Search employee name"}),e.jsx("input",{type:"text",value:m,onChange:re=>u(re.target.value),placeholder:"e.g. Dela Cruz, Juan",className:"w-full px-3 py-2 border rounded text-sm"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>u(m),className:"px-4 py-2 bg-indigo-600 text-white rounded text-sm",children:"Filter"}),m&&e.jsx("button",{className:"px-4 py-2 border rounded text-sm",onClick:()=>u(""),children:"Clear"})]})]})}),p?e.jsx("div",{className:"text-center py-10",children:"Loading..."}):P.length===0?e.jsx("div",{className:"text-center py-10 text-gray-500",children:"No employees found."}):e.jsx("div",{className:"space-y-4",children:P.map((re,ne)=>e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>B(re.employee.objid),className:"inline-flex items-center justify-center w-6 h-6 border rounded-full text-sm text-gray-600 hover:bg-gray-100","aria-label":O.has(re.employee.objid)?"Collapse details":"Expand details",children:O.has(re.employee.objid)?"-":"+"}),e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:re.employee.photo?e.jsx("img",{src:re.employee.photo,alt:"emp",className:"w-full h-full object-cover"}):null}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:re.employee.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[K.get(re.employee.objid)||0," record",(K.get(re.employee.objid)||0)!==1?"s":""]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:s("201-locator","create")&&e.jsxs("button",{onClick:()=>U(re),className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:[e.jsx("span",{children:""})," Add"]})})]}),O.has(re.employee.objid)&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Locator No."}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Locator Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Destination"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Purpose"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Created By"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 text-sm",children:(k.get(re.employee.objid)||[]).map(xe=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:xe.locatorno||""}),e.jsx("td",{className:"px-4 py-2",children:Q(xe.locatordate)||""}),e.jsx("td",{className:"px-4 py-2 max-w-xs whitespace-pre-wrap break-words",title:xe.locdestination,children:xe.locdestination||""}),e.jsx("td",{className:"px-4 py-2 max-w-xs whitespace-pre-wrap break-words",title:xe.locpurpose,children:xe.locpurpose||""}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(yb,{status:xe.locstatus||"For Approval"})}),e.jsx("td",{className:"px-4 py-2",children:xe.createdby_photo_path?e.jsx("img",{src:xe.createdby_photo_path,alt:xe.createdby_name||"Creator",className:"w-8 h-8 rounded-full object-cover",title:xe.createdby_name||""}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200",title:xe.createdby_name||""})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s("201-locator","update")&&e.jsx("button",{className:"text-blue-600 hover:text-blue-800 transition-colors",onClick:()=>G(xe),title:"Edit Locator",children:""}),s("201-locator","delete")&&e.jsx("button",{className:"text-red-600 hover:text-red-800 transition-colors",onClick:async()=>{var me;if(window.confirm("Delete this locator?"))try{await oe.delete(`/employee-locators/${xe.objid}`);const Z=xe.emp_objid;if(k.has(Z)){const ye=(((me=(await oe.get("/employee-locators",{params:{emp_objid:Z}})).data)==null?void 0:me.data)||[]).sort((ve,ue)=>new Date(ue.locatordate)-new Date(ve.locatordate));I(ve=>new Map(ve).set(Z,ye)),z(ve=>new Map(ve).set(Z,ye.length))}else await R(Z)}catch(Z){console.error("Delete failed",Z),alert("Delete failed")}},title:"Delete Locator",children:""})]})})]},xe.objid))})]})})]},ne))})]}),r==="tx"&&e.jsx("div",{className:"mt-4",children:p?e.jsx("div",{className:"text-center py-10",children:"Loading"}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-4 py-5 border-b bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2.5",children:"Search Employee"}),e.jsx("input",{type:"text",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 py-2.5 px-3",placeholder:"Search by employee name...",value:j,onChange:re=>y(re.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2.5",children:"Date From"}),e.jsx("input",{type:"date",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 py-2.5 px-3",value:v,onChange:re=>h(re.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2.5",children:"Date To"}),e.jsx("input",{type:"date",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 py-2.5 px-3",value:f,onChange:re=>N(re.target.value),min:v||void 0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2.5",children:"Status"}),e.jsxs("select",{className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 py-2.5 px-3",value:b,onChange:re=>w(re.target.value),children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"For Approval",children:"For Approval"}),e.jsx("option",{value:"Approved",children:"Approved"}),e.jsx("option",{value:"Returned",children:"Returned"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]})]}),(j||v||f||b)&&e.jsx("div",{className:"mt-4",children:e.jsx("button",{type:"button",onClick:()=>{y(""),h(""),N(""),w("")},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Clear Filters"})})]}),e.jsx("div",{className:"p-4 flex items-center justify-between border-b",children:e.jsx("div",{className:"font-semibold",children:"Locator Transactions"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Locator No."}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Locator Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Destination"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Purpose"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Time Departure - Arrival"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Created By"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 text-sm",children:V.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-4 py-6 text-center text-sm text-gray-500",children:c.length===0?"No locator transactions found.":"No transactions match the filters."})}):V.map(re=>{var ne,xe,me,Z;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-200",children:(ne=re.employee)!=null&&ne.photo_path||re.employee_photo_path?e.jsx("img",{src:((xe=re.employee)==null?void 0:xe.photo_path)||re.employee_photo_path,alt:"emp",className:"w-full h-full object-cover"}):null}),e.jsx("div",{children:((me=re.employee)==null?void 0:me.name)||((Z=re.employee)==null?void 0:Z.fullname)||re.employee_name||""})]})}),e.jsx("td",{className:"px-4 py-2",children:re.locatorno||""}),e.jsx("td",{className:"px-4 py-2",children:Q(re.locatordate)||""}),e.jsx("td",{className:"px-4 py-2 max-w-xs whitespace-pre-wrap break-words",title:re.locdestination,children:re.locdestination||""}),e.jsx("td",{className:"px-4 py-2 max-w-xs whitespace-pre-wrap break-words",title:re.locpurpose,children:re.locpurpose||""}),e.jsx("td",{className:"px-4 py-2",children:(()=>{const ee=Ne(re.loctimedeparture),ye=Ne(re.loctimearrival);return ee!==""&&ye!==""?`${ee}-${ye}`:ee!==""?ee:ye!==""?ye:""})()}),e.jsx("td",{className:"px-4 py-2",children:re.isportal===1||re.isPortal===1?e.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"Portal"}):re.createdby_photo_path?e.jsx("img",{src:re.createdby_photo_path,alt:re.createdby_name||"Creator",className:"w-8 h-8 rounded-full object-cover",title:re.createdby_name||""}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200",title:re.createdby_name||""})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(yb,{status:re.locstatus||"For Approval"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s("201-locator","update")&&re.locstatus!=="Approved"&&e.jsx("button",{className:"text-green-600 hover:text-green-800 transition-colors",onClick:()=>$(re),title:"Approve Locator",children:""}),s("201-locator","update")&&e.jsx("button",{className:"text-blue-600 hover:text-blue-800 transition-colors",onClick:()=>{var ee,ye,ve;E({objid:re.emp_objid,name:((ee=re.employee)==null?void 0:ee.name)||((ye=re.employee)==null?void 0:ye.fullname)||re.employee_name,photo:((ve=re.employee)==null?void 0:ve.photo_path)||re.employee_photo_path}),T(re),S(!0)},title:"Edit Locator",children:""}),s("201-locator","delete")&&e.jsx("button",{className:"text-red-600 hover:text-red-800 transition-colors",onClick:async()=>{if(window.confirm("Delete this locator?"))try{await oe.delete(`/employee-locators/${re.objid}`),J()}catch(ee){console.error("Delete failed",ee),alert("Delete failed")}},title:"Delete Locator",children:""})]})})]},re.objid)})})]})})]})})}),e.jsx(_7,{isOpen:D,onClose:()=>S(!1),onSaved:async()=>{var ne;const re=(_==null?void 0:_.objid)||(C==null?void 0:C.emp_objid);if(re&&await R(re),r==="info"){if(re)try{const me=(((ne=(await oe.get("/employee-locators",{params:{emp_objid:re}})).data)==null?void 0:ne.data)||[]).sort((Z,ee)=>new Date(ee.locatordate)-new Date(Z.locatordate));I(Z=>new Map(Z).set(re,me)),z(Z=>new Map(Z).set(re,me.length))}catch(xe){console.error("Failed to refresh employee locators",xe)}}else await J()},initial:C,emp:_}),e.jsx(E7,{isOpen:A,onClose:()=>{L(!1),W(null)},onApprove:X,locatorNo:(F==null?void 0:F.locatorno)||""})]})},C7=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg shadow-lg p-8 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Payroll Dashboard"}),e.jsx("p",{className:"text-purple-100",children:"Overview of payroll operations and statistics"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Payroll"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:" 0.00"})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Employees Paid"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"0"})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"For Approval"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:"0"})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Processing"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"0"})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Payroll Module - Coming Soon"}),e.jsxs("div",{className:"space-y-3 text-gray-600",children:[e.jsx("p",{children:"The Payroll module is currently under development. Features will include:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Automated salary computation based on DTR"}),e.jsx("li",{children:"Deductions management (SSS, PhilHealth, Pag-IBIG, Tax)"}),e.jsx("li",{children:"Payslip generation and distribution"}),e.jsx("li",{children:"Government mandatory reports (BIR, SSS, etc.)"}),e.jsx("li",{children:"Loans and advances tracking"}),e.jsx("li",{children:"13th month pay computation"}),e.jsx("li",{children:"Payroll history and audit trail"}),e.jsx("li",{children:"Bank integration for salary transfer"})]})]})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Note:"})," This module will be fully integrated with the DTR system to ensure accurate salary calculations based on attendance records."]})})]})})]}),A7=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg shadow-lg p-8 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Payroll Processing"}),e.jsx("p",{className:"text-purple-100",children:"Process and compute employee salaries"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Payroll Processing Workflow"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-bold",children:"1"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Attendance Verification"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Verify and finalize DTR records for the payroll period"})]}),e.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-bold",children:"2"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Salary Computation"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Calculate gross pay based on rate and attendance"})]}),e.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-bold",children:"3"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Deductions Processing"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Apply mandatory deductions and contributions"})]}),e.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-bold",children:"4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Net Pay Calculation"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Compute final take-home pay"})]}),e.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-bold",children:"5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Payslip Generation"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate and distribute payslips to employees"})]}),e.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-bold",children:"6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Payment Distribution"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Release payments via bank transfer or cash"})]}),e.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:" Current Payroll Period"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Start Date:"})," Not set"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"End Date:"})," Not set"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pay Date:"})," Not set"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{className:"text-gray-400",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:" Payroll Summary"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Employees:"})," 0"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Gross Pay:"}),"  0.00"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Deductions:"}),"  0.00"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Net Pay:"}),"  0.00"]})]})]})]}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-yellow-700",children:[e.jsx("strong",{children:"Development Status:"})," Payroll processing functionality is under development and will be available in the next system update."]})})]})})]}),D7=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg shadow-lg p-8 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Payroll Reports"}),e.jsx("p",{className:"text-indigo-100",children:"Generate and view payroll-related reports"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Payroll Register"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Complete list of all employee salaries for a period"}),e.jsx("button",{className:"w-full px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Employee Payslips"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Individual payslips with earnings and deductions"}),e.jsx("button",{className:"w-full px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"BIR Reports"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Tax reports for BIR submission (2316, Alphalist)"}),e.jsx("button",{className:"w-full px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"SSS Report"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Social Security contributions report"}),e.jsx("button",{className:"w-full px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"PhilHealth Report"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Health insurance contributions report"}),e.jsx("button",{className:"w-full px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Pag-IBIG Report"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"HDMF contributions report"}),e.jsx("button",{className:"w-full px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-pink-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-pink-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"13th Month Pay"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Annual 13th month pay computation"}),e.jsx("button",{className:"w-full px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Loans & Advances"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Employee loans and salary advances report"}),e.jsx("button",{className:"w-full px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Payroll History"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Historical payroll records and audit trail"}),e.jsx("button",{className:"w-full px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Report Templates"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"All payroll reports will be available for export in multiple formats:"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("span",{className:"px-4 py-2 bg-red-100 text-red-700 rounded-full text-sm font-medium",children:"PDF"}),e.jsx("span",{className:"px-4 py-2 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:"Excel (XLSX)"}),e.jsx("span",{className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:"CSV"}),e.jsx("span",{className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-full text-sm font-medium",children:"Print"})]})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Integration:"})," Payroll reports will automatically pull data from the DTR system and employee 201 files for accurate calculations."]})})]})})]}),T7=()=>{const{user:t}=Ts(),[s,r]=x.useState({lguDtrName:"DTR Management System",lguName:"",lguType:"Municipal",lguAddress:"",lguContact:"",lguEmail:"",lguFbUrl:"",lguMayor:"",lguHrmo:"",lguTreasurer:"",lguBursar:""}),[n,a]=x.useState(!1),[l,i]=x.useState(!1),[o,c]=x.useState(""),[d,m]=x.useState(""),[u,p]=x.useState(null),[g,j]=x.useState(""),[y,v]=x.useState(null),[h,f]=x.useState(""),[N,b]=x.useState(null),[w,D]=x.useState(""),[S,C]=x.useState(null),[T,_]=x.useState(""),[E,A]=x.useState(null),[L,F]=x.useState(""),W=[{value:"Municipal",label:"Municipal"},{value:"Province",label:"Province"},{value:"National",label:"National"}];x.useEffect(()=>{Y()},[]);const Y=async()=>{a(!0);try{const k=await oe.get("/company/info");k.data.success&&(r(k.data.data),k.data.data.logoPreview&&j(k.data.data.logoPreview),k.data.data.mayorEsigPreview&&f(k.data.data.mayorEsigPreview),k.data.data.hrmoEsigPreview&&D(k.data.data.hrmoEsigPreview),k.data.data.treasurerEsigPreview&&_(k.data.data.treasurerEsigPreview),k.data.data.bursarEsigPreview&&F(k.data.data.bursarEsigPreview))}catch(k){console.error("Error fetching company info:",k),r({lguDtrName:"",lguName:"",lguType:"Municipal",lguAddress:"",lguContact:"",lguEmail:"",lguFbUrl:"",lguMayor:"",lguHrmo:"",lguTreasurer:"",lguBursar:""})}finally{a(!1)}},q=(k,I)=>{r(K=>({...K,[k]:I}))},J=(k,I)=>{if(!k)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(k.type)){m("Please upload a valid image file (JPEG, PNG, GIF, or WebP)");return}if(k.size>5*1024*1024){m("File size must be less than 5MB");return}m("");const z=new FileReader;z.onload=P=>{const R=P.target.result;switch(I){case"logo":p(k),j(R),c("Logo will be resized to 200x200 pixels and compressed to max 50KB");break;case"mayorEsig":v(k),f(R),c("E-signature will be resized to 300x200 pixels and compressed to max 100KB");break;case"hrmoEsig":b(k),D(R),c("E-signature will be resized to 300x200 pixels and compressed to max 100KB");break;case"treasurerEsig":C(k),_(R),c("E-signature will be resized to 300x200 pixels and compressed to max 100KB");break;case"bursarEsig":A(k),F(R),c("E-signature will be resized to 300x200 pixels and compressed to max 100KB");break}},z.readAsDataURL(k)},O=k=>{switch(k){case"logo":p(null),j("");break;case"mayorEsig":v(null),f("");break;case"hrmoEsig":b(null),D("");break;case"treasurerEsig":C(null),_("");break;case"bursarEsig":A(null),F("");break}},M=async()=>{var k,I;i(!0),m(""),c("");try{const K=new FormData;Object.keys(s).forEach(P=>{K.append(P,s[P])}),u&&K.append("logo",u),y&&K.append("mayorEsig",y),N&&K.append("hrmoEsig",N),S&&K.append("treasurerEsig",S),E&&K.append("bursarEsig",E);const z=await oe.put("/company/info",K,{headers:{"Content-Type":"multipart/form-data"}});z.data.success?(c("Company information updated successfully!"),p(null),v(null),b(null),C(null),A(null)):m(z.data.message||"Failed to update company information")}catch(K){console.error("Error updating company info:",K),m(((I=(k=K.response)==null?void 0:k.data)==null?void 0:I.message)||"Failed to update company information")}finally{i(!1)}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-600",children:"Loading company information..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Company Information"}),e.jsx("p",{className:"text-gray-600",children:"Manage LGU details and organization information"})]}),o&&e.jsx("div",{className:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded",children:o}),d&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:d}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Organization Details"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["DTR System Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.lguDtrName,onChange:k=>q("lguDtrName",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter DTR system name...",disabled:l,maxLength:25}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will be displayed as the main title in the application header (max 25 characters)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["LGU Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.lguName,onChange:k=>q("lguName",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter LGU name...",disabled:l,maxLength:50})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["LGU Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:s.lguType,onChange:k=>q("lguType",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:l,children:W.map(k=>e.jsx("option",{value:k.value,children:k.label},k.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.lguAddress,onChange:k=>q("lguAddress",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter complete address...",disabled:l,maxLength:50})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Number"}),e.jsx("input",{type:"text",value:s.lguContact,onChange:k=>q("lguContact",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter contact number...",disabled:l,maxLength:20})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:s.lguEmail,onChange:k=>q("lguEmail",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address...",disabled:l,maxLength:25})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Facebook URL"}),e.jsx("input",{type:"url",value:s.lguFbUrl,onChange:k=>q("lguFbUrl",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter Facebook page URL...",disabled:l,maxLength:250})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"LGU Signatories"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mayor Name"}),e.jsx("input",{type:"text",value:s.lguMayor,onChange:k=>q("lguMayor",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter mayor's name...",disabled:l,maxLength:50})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mayor's E-Signature"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:h?e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:h,alt:"Mayor E-Signature Preview",className:"max-h-20 max-w-full object-contain mx-auto mb-2"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("label",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 cursor-pointer",children:["Change",e.jsx("input",{type:"file",accept:"image/*",onChange:k=>J(k.target.files[0],"mayorEsig"),className:"hidden",disabled:l})]}),e.jsx("button",{onClick:()=>O("mayorEsig"),className:"px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",disabled:l,children:"Remove"})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),e.jsxs("label",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 cursor-pointer",children:["Upload E-Signature",e.jsx("input",{type:"file",accept:"image/*",onChange:k=>J(k.target.files[0],"mayorEsig"),className:"hidden",disabled:l})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"HRMO Name"}),e.jsx("input",{type:"text",value:s.lguHrmo,onChange:k=>q("lguHrmo",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter HRMO name...",disabled:l,maxLength:50})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"HRMO's E-Signature"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:w?e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:w,alt:"HRMO E-Signature Preview",className:"max-h-20 max-w-full object-contain mx-auto mb-2"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("label",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 cursor-pointer",children:["Change",e.jsx("input",{type:"file",accept:"image/*",onChange:k=>J(k.target.files[0],"hrmoEsig"),className:"hidden",disabled:l})]}),e.jsx("button",{onClick:()=>O("hrmoEsig"),className:"px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",disabled:l,children:"Remove"})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),e.jsxs("label",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 cursor-pointer",children:["Upload E-Signature",e.jsx("input",{type:"file",accept:"image/*",onChange:k=>J(k.target.files[0],"hrmoEsig"),className:"hidden",disabled:l})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Treasurer Name"}),e.jsx("input",{type:"text",value:s.lguTreasurer,onChange:k=>q("lguTreasurer",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter treasurer's name...",disabled:l,maxLength:50})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Treasurer's E-Signature"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:T?e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:T,alt:"Treasurer E-Signature Preview",className:"max-h-20 max-w-full object-contain mx-auto mb-2"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("label",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 cursor-pointer",children:["Change",e.jsx("input",{type:"file",accept:"image/*",onChange:k=>J(k.target.files[0],"treasurerEsig"),className:"hidden",disabled:l})]}),e.jsx("button",{onClick:()=>O("treasurerEsig"),className:"px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",disabled:l,children:"Remove"})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),e.jsxs("label",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 cursor-pointer",children:["Upload E-Signature",e.jsx("input",{type:"file",accept:"image/*",onChange:k=>J(k.target.files[0],"treasurerEsig"),className:"hidden",disabled:l})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bursar Name"}),e.jsx("input",{type:"text",value:s.lguBursar,onChange:k=>q("lguBursar",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter bursar's name...",disabled:l,maxLength:50})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bursar's E-Signature"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:L?e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:L,alt:"Bursar E-Signature Preview",className:"max-h-20 max-w-full object-contain mx-auto mb-2"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("label",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 cursor-pointer",children:["Change",e.jsx("input",{type:"file",accept:"image/*",onChange:k=>J(k.target.files[0],"bursarEsig"),className:"hidden",disabled:l})]}),e.jsx("button",{onClick:()=>O("bursarEsig"),className:"px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",disabled:l,children:"Remove"})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),e.jsxs("label",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 cursor-pointer",children:["Upload E-Signature",e.jsx("input",{type:"file",accept:"image/*",onChange:k=>J(k.target.files[0],"bursarEsig"),className:"hidden",disabled:l})]})]})})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"LGU Logo"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:g?e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:g,alt:"Logo Preview",className:"max-h-40 max-w-full object-contain mx-auto mb-4"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("label",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 cursor-pointer text-sm",children:["Change Logo",e.jsx("input",{type:"file",accept:"image/*",onChange:k=>J(k.target.files[0],"logo"),className:"hidden",disabled:l})]}),e.jsx("button",{onClick:()=>O("logo"),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm",disabled:l,children:"Remove"})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-20 h-20 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsxs("label",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 cursor-pointer text-sm",children:["Upload Logo",e.jsx("input",{type:"file",accept:"image/*",onChange:k=>J(k.target.files[0],"logo"),className:"hidden",disabled:l})]})]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Recommended size: 200x200 pixels, max 2MB"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:M,disabled:l,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Saving...":"Save Changes"})})]})};function M7(){const{can:t,loading:s}=Vs(),r="departments",n=t(r,"read"),a=t(r,"create"),l=t(r,"update"),i=t(r,"delete"),[o,c]=x.useState([]),[d,m]=x.useState(!1),[u,p]=x.useState(!1),[g,j]=x.useState(!1),[y,v]=x.useState(null),[h,f]=x.useState({departmentname:"",departmentshortname:"",parentdept:0,isdepartment:1,emp_objid:null,officehead:"",accountcode:""}),[N,b]=x.useState(""),[w,D]=x.useState(new Set),S=x.useRef(!1),[C,T]=x.useState(""),[_,E]=x.useState([]),[A,L]=x.useState(null),[F,W]=x.useState([]),[Y,q]=x.useState(!1),J=ue=>{const we=Xe=>Xe==null||Number(Xe)===1?1:0,De=Number(ue.deptid??ue.DEPTID??0),le=ue.departmentname??ue.DEPARTMENTNAME??ue.DEPTNAME??"",Ie=ue.departmentshortname??ue.DEPARTMENTSHORTNAME??"",ge=Number(ue.superdeptid??ue.SUPDEPTID??0)||0,Ge=Number(ue.parentdept??ue.PARENTDEPT??0)||0,ke=we(ue.isdepartment??ue.ISDEPARTMENT),Re=ue.emp_objid??ue.EMP_OBJID??null,Ke=ue.officehead??ue.OFFICEHEAD??null;return{deptid:De,departmentname:le,departmentshortname:Ie,superdeptid:ge,parentdept:Ge,isdepartment:ke,emp_objid:Re,officehead:Ke}},O=ue=>{const we=Number(ue.parentdept||0),De=Number(ue.superdeptid||0);return we&&we!==ue.deptid?we:De&&De!==ue.deptid?De:0},M=()=>{var we;const ue=o.find(De=>De.deptid===1);return ue?ue.deptid:((we=o[0])==null?void 0:we.deptid)??0},k=ue=>{if(!ue)return"";const we=(ue.firstname||"").trim(),De=(ue.middlename||"").trim(),le=(ue.surname||"").trim();let Ie=we;if(De){const ge=De.charAt(0).toUpperCase()+".";Ie+=` ${ge}`}return le&&(Ie+=` ${le}`),Ie.trim()},I=x.useCallback(async()=>{var ue;try{q(!0),console.log(" [DEPARTMENTS] Fetching employees for search...");const we=await oe.get("/201-employees");console.log(" [DEPARTMENTS] Employees API response:",we.data);const De=((ue=we.data)==null?void 0:ue.data)||we.data||[];console.log(" [DEPARTMENTS] Loaded employees:",De.length),W(De)}catch(we){console.error(" [DEPARTMENTS] Error fetching employees:",we),W([])}finally{q(!1)}},[]);x.useEffect(()=>{if(!C.trim()){E([]);return}if(F.length===0){E([]);return}const ue=C.toLowerCase(),we=F.filter(De=>{const le=String(De.surname||"").toLowerCase(),Ie=String(De.firstname||"").toLowerCase(),ge=String(De.middlename||"").toLowerCase(),Ge=bs(De.surname,De.firstname,De.middlename).toLowerCase(),ke=String(De.dtrbadgenumber||De.badgenumber||De.BadgeNumber||"").toLowerCase(),Re=String(De.dtruserid||De.DTRuserID||"").toLowerCase(),Ke=String(De.idno||"").toLowerCase();return Ge.includes(ue)||le.includes(ue)||Ie.includes(ue)||ge.includes(ue)||ke.includes(ue)||Re.includes(ue)||Ke.includes(ue)});E(we.slice(0,10))},[C,F]);const K=ue=>{L(ue);const we=k(ue);f(De=>({...De,emp_objid:ue.objid,officehead:we})),T(""),E([])},z=()=>{L(null),f(ue=>({...ue,emp_objid:null,officehead:""})),T("")},P=x.useCallback(async()=>{if(!n){c([]);return}try{m(!0),console.log(" [DEPARTMENTS] Fetching departments...");const ue=await oe.get("/departments");if(console.log(" [DEPARTMENTS] API Response:",ue.data),ue.data&&ue.data.success&&ue.data.data){const we=ue.data.data.map(J);c(we),D(new Set),S.current=!1,console.log(" [DEPARTMENTS] Loaded departments:",we.length)}else console.log(" [DEPARTMENTS] No data in response"),c([])}catch(ue){console.error(" [DEPARTMENTS] Error fetching departments:",ue),c([])}finally{m(!1)}},[n]);x.useEffect(()=>{s||P()},[s,P]),x.useEffect(()=>{s||!n||F.length===0&&I()},[s,n,F.length,I]);const R=ue=>{const we=new Map,De=[];return ue.forEach(le=>{we.set(le.deptid,{...le,children:[]})}),ue.forEach(le=>{const Ie=we.get(le.deptid);if(!Ie)return;const ge=O(le);if(!ge)De.push(Ie);else{const Ge=we.get(ge);Ge?Ge.children.push(Ie):De.push(Ie)}}),De},B=(ue,we)=>ue.map(De=>{var ge,Ge;const le=De.children?B(De.children,we):[];return(we?((ge=De.departmentname)==null?void 0:ge.toLowerCase().includes(we.toLowerCase()))||((Ge=De.departmentshortname)==null?void 0:Ge.toLowerCase().includes(we.toLowerCase())):!0)||le.length>0?{...De,children:le}:null}).filter(Boolean),U=ue=>{const we=new Set(w);we.has(ue)?we.delete(ue):we.add(ue),D(we)},G=ue=>{const we=O(ue);if(!we)return"None";const De=o.find(le=>le.deptid===we);return De?De.departmentname:"Unknown"},$=ue=>{if(ue.emp_objid&&F.length>0){const we=F.find(De=>De.objid===ue.emp_objid);if(we)return k(we)}return ue.officehead||""},X=(ue,we=0)=>{const De=ue.children&&ue.children.length>0,le=w.has(ue.deptid),Ie={paddingLeft:`${we*24}px`},ge=we<=0,Ge=Number(ue.isdepartment)===1,ke=Ge?"Department":"Unit",Re=!ge;return e.jsxs(St.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-200",children:[e.jsx("td",{className:"px-4 py-3 text-center",children:De?e.jsx("button",{onClick:()=>U(ue.deptid),className:"w-6 h-6 flex items-center justify-center text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded transition-colors",children:le?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):e.jsx("div",{className:"w-6 h-6"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",style:Ie,children:[e.jsx("div",{className:"flex items-center mr-2",children:Array.from({length:we},(Ke,Xe)=>e.jsx("div",{className:"w-6 h-px bg-gray-300 mr-2"},Xe))}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center text-white font-bold text-sm mr-3 ${Ge?"bg-gradient-to-r from-blue-500 to-indigo-600":"bg-gradient-to-r from-emerald-500 to-teal-600"}`,children:ue.departmentname.charAt(0).toUpperCase()}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:ue.departmentname}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold uppercase tracking-wide ${Ge?"bg-blue-100 text-blue-700":"bg-emerald-100 text-emerald-700"}`,children:ke})]})})]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:ue.departmentshortname||""}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:G(ue)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:$(ue)}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[l&&e.jsx("button",{type:"button",onClick:()=>xe(ue),className:"text-blue-600 hover:text-blue-800 transition-colors",title:`Edit ${ke}`,children:""}),i&&e.jsx("button",{type:"button",onClick:()=>ne(ue.deptid),disabled:!Re,className:`transition-colors ${Re?"text-red-600 hover:text-red-800":"text-gray-300 cursor-not-allowed"}`,title:Re?`Delete ${ke}`:"Cannot delete top-level records",children:""})]})})]}),De&&le&&e.jsx(e.Fragment,{children:ue.children.map(Ke=>X(Ke,we+1))})]},ue.deptid)},Q=ue=>{const{name:we,value:De,type:le,checked:Ie}=ue.target,ge=new Set(["parentdept","isdepartment"]);let Ge=De;le==="checkbox"&&(Ge=Ie?1:0),f(ke=>({...ke,[we]:ge.has(we)?Number(Ge):Ge}))},Ne=ue=>{T(ue.target.value)},V=async ue=>{var we,De,le,Ie;if(ue.preventDefault(),!a){alert("You do not have permission to create departments.");return}try{m(!0);const ge={departmentname:(we=h.departmentname)==null?void 0:we.trim(),departmentshortname:((De=h.departmentshortname)==null?void 0:De.trim())||null,superdeptid:null,parentdept:Number(h.parentdept)||0,isdepartment:Number(h.isdepartment)===1?1:0,emp_objid:h.emp_objid||null,officehead:((le=h.officehead)==null?void 0:le.trim())||null,accountcode:((Ie=h.accountcode)==null?void 0:Ie.trim())||null},Ge=await oe.post("/departments",ge);Ge.data.success?(alert("Department added successfully!"),p(!1),f({departmentname:"",departmentshortname:"",parentdept:M(),isdepartment:1,emp_objid:null,officehead:"",accountcode:""}),L(null),T(""),E([]),P()):alert("Error adding department: "+Ge.data.message)}catch(ge){console.error("Error adding department:",ge),alert("Error adding department. Please try again.")}finally{m(!1)}},re=async ue=>{var we,De,le,Ie;if(ue.preventDefault(),!l){alert("You do not have permission to update departments.");return}try{m(!0);const ge={departmentname:(we=h.departmentname)==null?void 0:we.trim(),departmentshortname:((De=h.departmentshortname)==null?void 0:De.trim())||null,superdeptid:null,parentdept:Number(h.parentdept)||0,isdepartment:Number(h.isdepartment)===1?1:0,emp_objid:h.emp_objid||null,officehead:((le=h.officehead)==null?void 0:le.trim())||null,accountcode:((Ie=h.accountcode)==null?void 0:Ie.trim())||null},Ge=await oe.put(`/departments/${y.deptid}`,ge);Ge.data.success?(alert("Department updated successfully!"),j(!1),v(null),f({departmentname:"",departmentshortname:"",parentdept:M(),isdepartment:1,emp_objid:null,officehead:"",accountcode:""}),L(null),T(""),E([]),P()):alert("Error updating department: "+Ge.data.message)}catch(ge){console.error("Error updating department:",ge),alert("Error updating department. Please try again.")}finally{m(!1)}},ne=async ue=>{if(!i){alert("You do not have permission to delete departments.");return}if(window.confirm("Are you sure you want to delete this department?"))try{m(!0);const we=await oe.delete(`/departments/${ue}`);we.data.success?(alert("Department deleted successfully!"),P()):alert("Error deleting department: "+we.data.message)}catch(we){console.error("Error deleting department:",we),alert("Error deleting department. Please try again.")}finally{m(!1)}},xe=async ue=>{var De;if(!l){alert("You do not have permission to update departments.");return}v(ue),F.length===0&&await I();let we=null;if(ue.emp_objid&&(we=F.find(le=>le.objid===ue.emp_objid),!we))try{const le=await oe.get("/201-employees");we=(((De=le.data)==null?void 0:De.data)||le.data||[]).find(ge=>ge.objid===ue.emp_objid)}catch(le){console.error("Error loading employee:",le)}L(we),T(""),E([]),f({departmentname:ue.departmentname||"",departmentshortname:ue.departmentshortname||"",parentdept:O(ue)||0,isdepartment:ue.isdepartment??1,emp_objid:ue.emp_objid||null,officehead:ue.officehead||"",accountcode:ue.accountcode||""}),j(!0)},me=()=>{p(!1),j(!1),v(null),L(null),T(""),E([]),f({departmentname:"",departmentshortname:"",parentdept:M(),isdepartment:1,emp_objid:null,officehead:"",accountcode:""})},Z=()=>{f(ue=>({...ue,isdepartment:ue.isdepartment===1?0:1}))},ee=async()=>{if(!a){alert("You do not have permission to create departments.");return}f({departmentname:"",departmentshortname:"",parentdept:M(),isdepartment:1,emp_objid:null,officehead:"",accountcode:""}),L(null),T(""),E([]),F.length===0&&await I(),p(!0)},ye=R(o),ve=B(ye,N);return x.useEffect(()=>{if(!S.current&&ve.length>0){const ue=new Set,we=De=>{De.forEach(le=>{le.children&&le.children.length>0&&(ue.add(le.deptid),we(le.children))})};we(ve),D(ue),S.current=!0}},[ve]),s?e.jsx("div",{className:"bg-white border border-dashed rounded-lg p-8 text-center text-gray-500",children:"Loading permissions..."}):n?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:N,onChange:ue=>b(ue.target.value),placeholder:"Search departments...",className:"w-full sm:w-80 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!n})}),a&&e.jsxs("button",{onClick:ee,className:"px-6 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition duration-200 ease-in-out flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("span",{children:"Add Department"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[d&&e.jsx("div",{className:"p-4 text-center",children:e.jsxs("div",{className:"inline-flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Loading departments..."})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-12",children:e.jsx("svg",{className:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Short Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parent Department"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Head of Office"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ve.length===0&&!d?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:N?"No departments found matching your search.":"No departments available."})}):ve.map(ue=>X(ue))})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Records"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:o.filter(ue=>Number(ue.isdepartment)===1).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Departments"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:o.filter(ue=>Number(ue.isdepartment)===0).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Units"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:o.filter(ue=>O(ue)===0).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Top-Level Entries"})]})]})}),u&&a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add New Department"}),e.jsx("button",{onClick:me,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:V,className:"p-6 space-y-4 overflow-y-auto max-h-[calc(90vh-120px)]",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department Name *"}),e.jsx("input",{type:"text",name:"departmentname",value:h.departmentname,onChange:Q,required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter department name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Name"}),e.jsx("input",{type:"text",name:"departmentshortname",value:h.departmentshortname,onChange:Q,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:10,placeholder:"Optional short code"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Department"}),e.jsxs("select",{name:"parentdept",value:h.parentdept,onChange:Q,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.length===0&&e.jsx("option",{value:0,children:"None"}),o.map(ue=>e.jsx("option",{value:ue.deptid,children:ue.departmentname},ue.deptid))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Employee"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:C,onChange:Ne,placeholder:Y?"Loading employees...":"Search by name, badge number, or DTR ID...",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:Y}),Y&&e.jsx("div",{className:"absolute right-3 top-2.5",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})}),_.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:_.map(ue=>{const we=k(ue)||"Unnamed Employee",De=ue.photo_path||null;return e.jsxs("div",{onClick:()=>K(ue),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200 last:border-b-0 flex items-center gap-3",children:[De?e.jsx("img",{src:De,alt:we,className:"w-10 h-10 rounded-full object-cover border border-gray-200",onError:le=>{le.target.style.display="none";const Ie=le.target.nextElementSibling;Ie&&(Ie.style.display="flex")}}):null,e.jsx("div",{className:`w-10 h-10 rounded-full bg-gray-200 border border-gray-200 flex items-center justify-center text-xs text-gray-600 ${De?"hidden":""}`,children:we.split(" ").map(le=>le[0]).join("").substring(0,2).toUpperCase()}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"font-medium text-sm text-gray-900",children:we})})]},ue.objid)})})]}),A&&e.jsx("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[A.photo_path?e.jsx("img",{src:A.photo_path,alt:k(A),className:"w-10 h-10 rounded-full object-cover border border-gray-200",onError:ue=>{ue.target.style.display="none";const we=ue.target.nextElementSibling;we&&(we.style.display="flex")}}):null,e.jsx("div",{className:`w-10 h-10 rounded-full bg-gray-200 border border-gray-200 flex items-center justify-center text-xs text-gray-600 ${A.photo_path?"hidden":""}`,children:k(A).split(" ").map(ue=>ue[0]).join("").substring(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Selected Employee:"}),e.jsx("div",{className:"font-medium text-sm text-gray-900",children:k(A)})]})]}),e.jsx("button",{type:"button",onClick:z,className:"text-red-600 hover:text-red-800 text-sm",children:"Clear"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Office Head"}),e.jsx("input",{type:"text",name:"officehead",value:h.officehead,onChange:Q,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Office head name (auto-filled when employee selected)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Code"}),e.jsx("input",{type:"text",name:"accountcode",value:h.accountcode,onChange:Q,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Account code for payroll (future feature)"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Record Type"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-xs font-semibold tracking-wide ${Number(h.isdepartment)===1?"text-blue-600":"text-emerald-600"}`,children:Number(h.isdepartment)===1?"Department":"Unit"}),e.jsx("button",{type:"button",onClick:Z,className:`relative inline-flex h-7 w-14 items-center rounded-full transition-colors ${Number(h.isdepartment)===1?"bg-blue-600":"bg-gray-300"}`,"aria-pressed":Number(h.isdepartment)===1,"aria-label":"Toggle department type",children:e.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${Number(h.isdepartment)===1?"translate-x-7":"translate-x-1"}`})})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:d,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Adding...":"Add Department"}),e.jsx("button",{type:"button",onClick:me,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"})]})]})]})}),g&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Department"}),e.jsx("button",{onClick:me,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:re,className:"p-6 space-y-4 overflow-y-auto max-h-[calc(90vh-120px)]",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department Name *"}),e.jsx("input",{type:"text",name:"departmentname",value:h.departmentname,onChange:Q,required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter department name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Name"}),e.jsx("input",{type:"text",name:"departmentshortname",value:h.departmentshortname,onChange:Q,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:10,placeholder:"Optional short code"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Department"}),e.jsxs("select",{name:"parentdept",value:h.parentdept,onChange:Q,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:0,children:"None"}),o.filter(ue=>ue.deptid!==(y==null?void 0:y.deptid)).map(ue=>e.jsx("option",{value:ue.deptid,children:ue.departmentname},ue.deptid))]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Employee"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:C,onChange:Ne,placeholder:Y?"Loading employees...":"Search by name, badge number, or DTR ID...",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:Y}),Y&&e.jsx("div",{className:"absolute right-3 top-2.5",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})}),_.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:_.map(ue=>{const we=k(ue)||"Unnamed Employee",De=ue.photo_path||null;return e.jsxs("div",{onClick:()=>K(ue),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200 last:border-b-0 flex items-center gap-3",children:[De?e.jsx("img",{src:De,alt:we,className:"w-10 h-10 rounded-full object-cover border border-gray-200",onError:le=>{le.target.style.display="none";const Ie=le.target.nextElementSibling;Ie&&(Ie.style.display="flex")}}):null,e.jsx("div",{className:`w-10 h-10 rounded-full bg-gray-200 border border-gray-200 flex items-center justify-center text-xs text-gray-600 ${De?"hidden":""}`,children:we.split(" ").map(le=>le[0]).join("").substring(0,2).toUpperCase()}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"font-medium text-sm text-gray-900",children:we})})]},ue.objid)})})]}),A&&e.jsx("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[A.photo_path?e.jsx("img",{src:A.photo_path,alt:k(A),className:"w-10 h-10 rounded-full object-cover border border-gray-200",onError:ue=>{ue.target.style.display="none";const we=ue.target.nextElementSibling;we&&(we.style.display="flex")}}):null,e.jsx("div",{className:`w-10 h-10 rounded-full bg-gray-200 border border-gray-200 flex items-center justify-center text-xs text-gray-600 ${A.photo_path?"hidden":""}`,children:k(A).split(" ").map(ue=>ue[0]).join("").substring(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Selected Employee:"}),e.jsx("div",{className:"font-medium text-sm text-gray-900",children:k(A)})]})]}),e.jsx("button",{type:"button",onClick:z,className:"text-red-600 hover:text-red-800 text-sm",children:"Clear"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Office Head"}),e.jsx("input",{type:"text",name:"officehead",value:h.officehead,onChange:Q,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Office head name (auto-filled when employee selected)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Code"}),e.jsx("input",{type:"text",name:"accountcode",value:h.accountcode,onChange:Q,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Account code for payroll (future feature)"})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Record Type"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-xs font-semibold tracking-wide ${Number(h.isdepartment)===1?"text-blue-600":"text-emerald-600"}`,children:Number(h.isdepartment)===1?"Department":"Unit"}),e.jsx("button",{type:"button",onClick:Z,className:`relative inline-flex h-7 w-14 items-center rounded-full transition-colors ${Number(h.isdepartment)===1?"bg-blue-600":"bg-gray-300"}`,"aria-pressed":Number(h.isdepartment)===1,"aria-label":"Toggle department type",children:e.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${Number(h.isdepartment)===1?"translate-x-7":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:d,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Updating...":"Update Department"}),e.jsx("button",{type:"button",onClick:me,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"})]})]})]})})]}):e.jsx("div",{className:"bg-white border border-dashed rounded-lg p-8 text-center text-gray-500",children:"You do not have permission to view departments."})}const I7=()=>{const[t,s]=x.useState([]),[r,n]=x.useState({}),[a,l]=x.useState(!1),[i,o]=x.useState(null),[c,d]=x.useState(!1),[m,u]=x.useState(!1),[p,g]=x.useState([]),[j,y]=x.useState(!1),[v,h]=x.useState({currentStep:"",totalSteps:0,currentStepNumber:0,percentage:0,message:"",details:"",logsProcessed:0,totalLogs:0,errors:[]}),[f,N]=x.useState(null),[b,w]=x.useState({startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[D,S]=x.useState({}),[C,T]=x.useState(!1),[_,E]=x.useState({currentStep:"",percentage:0,message:"",details:"",logsFound:0,logsProcessed:0,logsSaved:0,errors:[]}),[A,L]=x.useState(null),[F,W]=x.useState(!1),[Y,q]=x.useState({currentStep:"",percentage:0,message:"",details:"",totalMachines:0,processedMachines:0,currentMachine:"",machineResults:[],errors:[],currentMachineProgress:0,currentMachineStep:"",currentMachineDetails:"",logsFound:0,logsProcessed:0,logsSaved:0}),[J,O]=x.useState(null),[M,k]=x.useState(!1),[I,K]=x.useState({id:"",name:"",connectionType:1,ipAddress:"",serialPort:1,port:4370,baudrate:115200,commPassword:0,machine:""}),[z,P]=x.useState(!1),[R,B]=x.useState(null),[U,G]=x.useState(!1),[$,X]=x.useState(!1),[Q,Ne]=x.useState(null),[V,re]=x.useState({id:"",name:"",connectionType:1,ipAddress:"",serialPort:1,port:4370,baudrate:115200,commPassword:0,machine:""}),[ne,xe]=x.useState(!1),[me,Z]=x.useState(null),[ee,ye]=x.useState(!1),ve=x.useRef(null),[ue,we]=x.useState(!1),De=async()=>{try{console.log("Fetching device info...");const Ce=await oe.get("/machines/device-info",{timeout:6e4});if(console.log("Device info response:",Ce.data),Ce.data.success){const Ze={};Ce.data.data.forEach(fe=>{Ze[fe.machineId]=fe}),S(Ze),console.log("Device info map:",Ze)}}catch(Ce){console.error("Error fetching device info:",Ce)}};x.useEffect(()=>{De();const Ce=setInterval(De,3e4);return()=>clearInterval(Ce)},[]),x.useEffect(()=>(le(),ge(),()=>{ve.current&&clearInterval(ve.current)}),[]);const le=async()=>{try{l(!0);const Ce=await oe.get("/machines");Ce.data.success&&s(Ce.data.data)}catch(Ce){console.error("Error fetching machines:",Ce)}finally{l(!1)}},Ie=async()=>{try{const Ce=await oe.get("/machines/status/all");if(Ce.data.success){const Ze={};Ce.data.data.forEach(fe=>{Ze[fe.id]=fe}),n(Ze)}}catch(Ce){console.error("Error fetching machine statuses:",Ce)}},ge=()=>{Ie(),ve.current=setInterval(()=>{Ie()},3e4)},Ge=Ce=>{const Ze=r[Ce];return Ze||{status:"checking",pingTime:null,errorMessage:null}},ke=Ce=>{const Ze=Ge(Ce.ID);return Ze.status==="checking"?e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Checking..."}):Ze.status==="online"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Online"}),Ze.pingTime&&e.jsxs("span",{className:"text-xs text-gray-500",children:[Ze.pingTime,"ms"]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"Offline"}),Ze.pingTime&&Ze.pingTime>1e3&&e.jsxs("span",{className:"text-xs text-red-500",title:`High latency: ${Ze.pingTime}ms`,children:[Ze.pingTime,"ms"]}),Ze.errorMessage&&e.jsx("span",{className:"text-xs text-red-500",title:Ze.errorMessage,children:"Error"})]})},Re=async Ce=>{try{console.log("Starting preview logs for machine:",Ce),y(!0),T(!0),E({currentStep:"Starting",percentage:0,message:"Initializing preview process...",details:"",logsFound:0,logsProcessed:0,logsSaved:0,errors:[]}),L(null);const Ze=new EventSource(`/api/machines/${Ce}/manual-fetch?startDate=${b.startDate}&endDate=${b.endDate}`);window.currentEventSource=Ze,Ze.onopen=()=>{console.log("SSE connection opened for preview logs")},Ze.onmessage=fe=>{var Pe,Le,ut,Be,mt,qe;try{const Oe=JSON.parse(fe.data);if(console.log("[FRONTEND] Received SSE data for preview:",Oe),Oe.type==="connected"){console.log("Connected to preview logs process");return}if(Oe.type==="complete"){console.log("[FRONTEND] Preview complete event received:",Oe),console.log("[FRONTEND] Full data object:",JSON.stringify(Oe,null,2)),console.log("[FRONTEND] Data.data:",Oe.data),console.log("[FRONTEND] New logs count:",(Pe=Oe.data)==null?void 0:Pe.newLogs),console.log("[FRONTEND] Logs array length:",(ut=(Le=Oe.data)==null?void 0:Le.logs)==null?void 0:ut.length),console.log("[FRONTEND] Duplicates count:",(Be=Oe.data)==null?void 0:Be.duplicates),console.log("[FRONTEND] Skipped count:",(mt=Oe.data)==null?void 0:mt.skipped),console.log("[FRONTEND] Unregistered employees:",(qe=Oe.data)==null?void 0:qe.unregisteredEmployees),L(Oe),Oe.data&&Oe.data.logs&&(g(Oe.data.logs),console.log("Preview logs set:",Oe.data.logs)),E(He=>({...He,currentStep:"Completed",message:Oe.message,percentage:100,errors:[]})),y(!1),Ze.close(),window.currentEventSource=null;return}if(Oe.type==="error"){console.error("[FRONTEND] Preview error event received:",Oe),L({success:!1,message:Oe.message}),E(He=>({...He,currentStep:"Error",message:Oe.message,percentage:100,errors:[Oe.message]})),y(!1),Ze.close(),window.currentEventSource=null;return}if(Oe.type==="progress"){console.log("[FRONTEND] Progress event received:",Oe),E(He=>({...He,...Oe,errors:Oe.errors||He.errors||[]}));return}if(Oe.error)throw new Error(Oe.error);console.log("[FRONTEND] Regular update received:",Oe),E(He=>({...He,...Oe,errors:Oe.errors||He.errors||[]}))}catch(Oe){console.error("Error parsing SSE data:",Oe)}},Ze.onerror=fe=>{console.error("SSE error for preview logs:",fe),E(Pe=>({...Pe,errors:[...Pe.errors,"Connection error occurred"]})),Ze.close()}}catch(Ze){console.error("Error previewing logs:",Ze),L({success:!1,message:Ze.message}),E(fe=>({...fe,message:"Preview failed!"}))}},Ke=async Ce=>{try{console.log("Starting fetch logs for machine:",Ce),y(!0),u(!0),h({currentStep:"Starting",totalSteps:0,currentStepNumber:0,percentage:0,message:"Initializing fetch process...",details:"",logsProcessed:0,totalLogs:0,errors:[]}),N(null);const Ze=new EventSource(`/api/machines/${Ce}/sync-sse?startDate=${b.startDate}&endDate=${b.endDate}&saveToDatabase=true`);window.currentEventSource=Ze,Ze.onopen=()=>{console.log("SSE connection opened for fetch logs")},Ze.onmessage=fe=>{try{const Pe=JSON.parse(fe.data);if(console.log("[FRONTEND] Received SSE data for fetch:",Pe),Pe.type==="connected"){console.log("Connected to fetch logs process");return}if(Pe.type==="complete"){console.log("[FRONTEND] Fetch complete event received:",Pe),N(Pe),Pe.data&&Pe.data.logs&&g(Pe.data.logs),h(Le=>({...Le,currentStep:"Completed",message:Pe.message,percentage:100,errors:[]})),y(!1),Ze.close(),window.currentEventSource=null;return}if(Pe.type==="error"){console.log("[FRONTEND] Fetch error event received:",Pe),N({success:!1,message:Pe.message}),h(Le=>({...Le,errors:[...Le.errors||[],Pe.message]})),y(!1),Ze.close(),window.currentEventSource=null;return}if(Pe.type==="progress"){console.log("[FRONTEND] Fetch progress event received:",Pe),h(Le=>({...Le,...Pe,errors:Pe.errors||Le.errors||[]}));return}if(Pe.error)throw new Error(Pe.error);console.log("[FRONTEND] Fetch regular update received:",Pe),h(Le=>({...Le,...Pe,errors:Pe.errors||Le.errors||[]}))}catch(Pe){console.error("Error parsing SSE data:",Pe)}},Ze.onerror=fe=>{console.error("SSE error for fetch logs:",fe),h(Pe=>({...Pe,errors:[...Pe.errors||[],"Connection error occurred"]})),y(!1),Ze.close(),window.currentEventSource=null}}catch(Ze){console.error("Error fetching logs:",Ze),N({success:!1,message:Ze.message}),h(fe=>({...fe,message:"Fetch failed!"})),y(!1)}},Xe=async()=>{try{y(!0),W(!0),q({currentStep:"Initializing",percentage:0,message:"Starting bulk fetch process...",details:"Preparing to fetch logs from all online machines",totalMachines:0,processedMachines:0,currentMachine:"",machineResults:[],errors:[],currentMachineProgress:0,currentMachineStep:"",currentMachineDetails:"",logsFound:0,logsProcessed:0,logsSaved:0}),O(null);const Ce=new EventSource(`/api/machines/sync-all-sse?startDate=${b.startDate}&endDate=${b.endDate}&saveToDatabase=true`);window.currentEventSource=Ce,Ce.onopen=()=>{console.log("SSE connection opened for fetch all logs")},Ce.onmessage=Ze=>{try{const fe=JSON.parse(Ze.data);if(console.log("[FRONTEND] Received SSE data for fetch all:",fe),fe.type==="connected"){console.log("Connected to fetch all logs process");return}if(fe.type==="complete"){console.log("[FRONTEND] Fetch all complete event received:",fe),O(fe),q(Pe=>({...Pe,currentStep:"Completed",message:fe.message,percentage:100,errors:[]})),y(!1),Ce.close(),window.currentEventSource=null;return}if(fe.type==="error"){console.log("[FRONTEND] Fetch all error event received:",fe),O({success:!1,message:fe.message}),q(Pe=>({...Pe,currentStep:"Error",message:fe.message,percentage:100,errors:[fe.message]})),y(!1),Ce.close(),window.currentEventSource=null;return}if(fe.type==="progress"){console.log("[FRONTEND] Fetch all progress event received:",fe),console.log("[FRONTEND] logsFound:",fe.logsFound),console.log("[FRONTEND] logsProcessed:",fe.logsProcessed),console.log("[FRONTEND] currentMachine:",fe.currentMachine),q(Pe=>({...Pe,...fe,errors:fe.errors||Pe.errors||[]}));return}if(fe.error)throw new Error(fe.error);console.log("[FRONTEND] Fetch all regular update received:",fe),q(Pe=>({...Pe,...fe,errors:fe.errors||Pe.errors||[]}))}catch(fe){console.error("Error parsing SSE data:",fe)}},Ce.onerror=Ze=>{console.error("SSE error for fetch all logs:",Ze),q(fe=>({...fe,errors:[...fe.errors||[],"Connection error occurred"]})),y(!1),Ce.close(),window.currentEventSource=null}}catch(Ce){console.error("Error fetching all logs:",Ce),O({success:!1,message:Ce.message}),q(Ze=>({...Ze,message:"Fetch all failed!"})),y(!1)}},Se=async()=>{var Ce,Ze;if(!I.ipAddress||!I.port){B({success:!1,message:"Please enter IP address and port"});return}P(!0),B(null);try{const fe=await oe.post("/machines/test-connection",{ipAddress:I.ipAddress,port:I.port,password:I.password});B({success:fe.data.success,message:fe.data.message,pingTime:fe.data.pingTime})}catch(fe){B({success:!1,message:((Ze=(Ce=fe.response)==null?void 0:Ce.data)==null?void 0:Ze.message)||"Connection test failed"})}finally{P(!1)}},lt=async()=>{var Ce,Ze,fe,Pe;if(!I.name||!I.ipAddress||!I.id||!I.machine){alert("Please fill in all required fields");return}if(I.machine.length!==3){alert("Machine number must be exactly 3 digits");return}G(!0);try{const Le=await oe.post("/machines",I);Le.data.success?(alert("Machine registered successfully!"),k(!1),K({id:"",name:"",connectionType:1,ipAddress:"",serialPort:1,port:4370,baudrate:115200,commPassword:0,machine:""}),B(null),le()):alert("Failed to register machine: "+Le.data.message)}catch(Le){if((Ze=(Ce=Le.response)==null?void 0:Ce.data)!=null&&Ze.conflicts){const ut=Le.response.data.conflicts;alert(`Registration failed: The following fields already exist: ${ut.join(", ")}. Please use different values.`)}else alert("Error registering machine: "+(((Pe=(fe=Le.response)==null?void 0:fe.data)==null?void 0:Pe.message)||Le.message))}finally{G(!1)}},it=async()=>{var Ce,Ze;if(!V.name||!V.ipAddress||!V.id||!V.machine){alert("Please fill in all required fields");return}if(V.machine.length!==3){alert("Machine number must be exactly 3 digits");return}ye(!0);try{const fe=await oe.put(`/machines/${Q.ID}`,V);fe.data.success?(alert("Machine updated successfully!"),X(!1),Ne(null),re({id:"",name:"",connectionType:1,ipAddress:"",serialPort:1,port:4370,baudrate:115200,commPassword:0,machine:""}),Z(null),le()):alert("Failed to update machine: "+fe.data.message)}catch(fe){alert("Error updating machine: "+(((Ze=(Ce=fe.response)==null?void 0:Ce.data)==null?void 0:Ze.message)||fe.message))}finally{ye(!1)}},Pt=async()=>{var Ce,Ze;if(!V.ipAddress||!V.port){Z({success:!1,message:"Please enter IP address and port"});return}xe(!0),Z(null);try{const fe=await oe.post("/machines/test-connection",{ipAddress:V.ipAddress,port:V.port,password:V.commPassword});Z({success:fe.data.success,message:fe.data.message,pingTime:fe.data.pingTime})}catch(fe){Z({success:!1,message:((Ze=(Ce=fe.response)==null?void 0:Ce.data)==null?void 0:Ze.message)||"Connection test failed"})}finally{xe(!1)}},Nt=Ce=>{Ne(Ce),re({id:Ce.ID.toString(),name:Ce.MachineAlias,connectionType:Ce.ConnectType,ipAddress:Ce.IP,serialPort:Ce.SerialPort,port:Ce.Port,baudrate:Ce.Baudrate,commPassword:Ce.CommPassword,machine:Ce.MachineNumber.toString().padStart(3,"0")}),Z(null),X(!0)},At=async Ce=>{var Ze,fe;try{we(!0);const Pe=await oe.post(`/machines/${Ce}/sync-time`);Pe.data.success?alert(`Time synchronized successfully for ${Pe.data.machineName}!`):alert("Failed to sync time: "+Pe.data.message)}catch(Pe){alert("Error syncing time: "+(((fe=(Ze=Pe.response)==null?void 0:Ze.data)==null?void 0:fe.message)||Pe.message))}finally{we(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Biometric Machine Management"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>k(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center space-x-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("span",{children:"Register Machine"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Real-time monitoring active"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Date Range"}),e.jsx("button",{onClick:Xe,disabled:j,className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",title:"Fetch logs from all online machines",children:j?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Fetching All..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),e.jsx("span",{children:"Fetch All Logs"})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),e.jsx("input",{type:"date",value:b.startDate,onChange:Ce=>w({...b,startDate:Ce.target.value}),className:"mt-1 block border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),e.jsx("input",{type:"date",value:b.endDate,onChange:Ce=>w({...b,endDate:Ce.target.value}),className:"mt-1 block border border-gray-300 rounded-md px-3 py-2"})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Machine Alias"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IP Address"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Port"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Face Print"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Finger Print"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Log Count"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(Ce=>{var Ze,fe,Pe;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Ce.MachineAlias}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ce.IP}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ce.Port}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:((Ze=D[Ce.ID])==null?void 0:Ze.faceCount)||0})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:((fe=D[Ce.ID])==null?void 0:fe.fingerprintCount)||0})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:((Pe=D[Ce.ID])==null?void 0:Pe.logCount)||0})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ke(Ce)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Nt(Ce),className:"bg-yellow-600 text-white p-2 rounded-lg hover:bg-yellow-700 transition-colors",title:"Edit machine information",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>At(Ce.ID),disabled:ue||Ge(Ce.ID).status!=="online",className:"bg-orange-600 text-white p-2 rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Sync PC time to biometric machine",children:ue?e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("button",{onClick:()=>Re(Ce.ID),disabled:j||Ge(Ce.ID).status!=="online",className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Preview logs from machine (read-only)",children:e.jsxs("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("button",{onClick:()=>Ke(Ce.ID),disabled:j||Ge(Ce.ID).status!=="online",className:"bg-green-600 text-white p-2 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Fetch logs and save to database",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})})]})})]},Ce.ID)})})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:f?"Sync Complete":"Syncing Logs"}),e.jsx("button",{onClick:()=>{u(!1),y(!1),window.currentEventSource&&(window.currentEventSource.close(),window.currentEventSource=null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:`p-4 rounded-lg ${f.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-3 ${f.success?"bg-green-100":"bg-red-100"}`,children:f.success?e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium ${f.success?"text-green-800":"text-red-800"}`,children:f.success?"Sync Completed Successfully":"Sync Failed"}),e.jsx("p",{className:"text-sm text-gray-600",children:f.message})]})]}),f.success&&f.data&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Logs:"}),e.jsx("span",{className:"font-medium",children:f.data.totalLogs})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"New Logs:"}),e.jsx("span",{className:"font-medium text-green-600",children:f.data.saved})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Duplicates:"}),e.jsx("span",{className:"font-medium text-orange-600",children:f.data.duplicates})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Processed:"}),e.jsx("span",{className:"font-medium",children:f.data.processed})]})]}),f.data.saved>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("button",{onClick:()=>d(!0),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.jsxs("span",{children:["View Saved Logs (",f.data.saved,")"]})]})})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:v.currentStep}),e.jsx("span",{className:"text-sm text-gray-500",children:v.logsFound>0?`${v.logsProcessed}/${v.logsFound}`:"Processing..."})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:v.logsFound>0?`${Math.min(v.logsProcessed/v.logsFound*100,100)}%`:"0%"}})}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:v.message}),v.details&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:v.details})]})]}),v.logsFound>0&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Logs:"}),e.jsx("span",{className:"font-medium",children:v.logsFound})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Processed:"}),e.jsx("span",{className:"font-medium",children:v.logsProcessed})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Saved:"}),e.jsx("span",{className:"font-medium text-green-600",children:v.logsSaved||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Progress:"}),e.jsxs("span",{className:"font-medium",children:[Math.round(v.logsProcessed/v.logsFound*100),"%"]})]})]})})]}),e.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{u(!1),y(!1),window.currentEventSource&&(window.currentEventSource.close(),window.currentEventSource=null)},className:`px-6 py-2 rounded-lg font-medium transition-colors ${f?"bg-gray-600 text-white hover:bg-gray-700":"bg-red-600 text-white hover:bg-red-700"}`,children:f?"Close":"Cancel"})})]})}),C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:A?"Preview Complete":"Previewing Logs"}),e.jsx("button",{onClick:()=>{T(!1),y(!1),window.currentEventSource&&(window.currentEventSource.close(),window.currentEventSource=null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),A?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:`p-4 rounded-lg ${A.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-3 ${A.success?"bg-green-100":"bg-red-100"}`,children:A.success?e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium ${A.success?"text-green-800":"text-red-800"}`,children:A.success?"Preview Completed":"Preview Failed"}),e.jsx("p",{className:"text-sm text-gray-600",children:A.message})]})]}),A.success&&A.data&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Logs:"}),e.jsx("span",{className:"font-medium",children:A.data.totalLogs})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"New Logs:"}),e.jsx("span",{className:"font-medium text-green-600",children:A.data.newLogs})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Duplicates:"}),e.jsx("span",{className:"font-medium text-orange-600",children:A.data.duplicates})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Skipped:"}),e.jsx("span",{className:"font-medium text-gray-600",children:A.data.skipped})]})]}),A.data.newLogs>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("button",{onClick:()=>d(!0),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.jsxs("span",{children:["View New Logs (",A.data.newLogs,")"]})]})})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:_.currentStep}),e.jsx("span",{className:"text-sm text-gray-500",children:_.logsFound>0?`${_.logsProcessed}/${_.logsFound}`:"Processing..."})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:_.logsFound>0?`${Math.min(_.logsProcessed/_.logsFound*100,100)}%`:"0%"}})}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:_.message}),_.details&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:_.details})]})]}),_.logsFound>0&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Logs:"}),e.jsx("span",{className:"font-medium",children:_.logsFound})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Processed:"}),e.jsx("span",{className:"font-medium",children:_.logsProcessed})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"New Logs:"}),e.jsx("span",{className:"font-medium text-green-600",children:_.logsSaved||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Progress:"}),e.jsxs("span",{className:"font-medium",children:[Math.round(_.logsProcessed/_.logsFound*100),"%"]})]})]})})]}),e.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{T(!1),y(!1),window.currentEventSource&&(window.currentEventSource.close(),window.currentEventSource=null)},className:`px-6 py-2 rounded-lg font-medium transition-colors ${A?"bg-gray-600 text-white hover:bg-gray-700":"bg-red-600 text-white hover:bg-red-700"}`,children:A?"Close":"Cancel"})})]})}),F&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:J?"Fetch All Complete":"Fetching All Logs"}),e.jsx("button",{onClick:()=>{W(!1),y(!1),window.currentEventSource&&(window.currentEventSource.close(),window.currentEventSource=null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),J?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:`p-4 rounded-lg ${J.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-3 ${J.success?"bg-green-100":"bg-red-100"}`,children:J.success?e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium ${J.success?"text-green-800":"text-red-800"}`,children:J.success?"Fetch All Completed":"Fetch All Failed"}),e.jsx("p",{className:"text-sm text-gray-600",children:J.message})]})]}),J.success&&J.data&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Machines:"}),e.jsx("span",{className:"font-medium",children:J.data.totalMachines})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Online Machines:"}),e.jsx("span",{className:"font-medium text-green-600",children:J.data.onlineMachines})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Logs Found:"}),e.jsx("span",{className:"font-medium",children:J.data.totalLogs})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"New Logs Saved:"}),e.jsx("span",{className:"font-medium text-green-600",children:J.data.totalSaved})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Duplicates:"}),e.jsx("span",{className:"font-medium text-orange-600",children:J.data.totalDuplicates})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Offline Machines:"}),e.jsx("span",{className:"font-medium text-red-600",children:J.data.offlineMachines})]})]}),J.data.results&&J.data.results.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Machine Results:"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:J.data.results.map((Ce,Ze)=>e.jsxs("div",{className:`p-2 rounded text-xs ${Ce.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:Ce.machineAlias}),e.jsx("span",{className:Ce.success?"text-green-600":"text-red-600",children:Ce.success?"":""})]}),Ce.success?e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Ce.totalLogs||0," logs found, ",Ce.saved||0," new logs, ",Ce.duplicates||0," duplicates"]}):e.jsx("div",{className:"text-xs text-red-600 mt-1",children:Ce.error||"Failed to process"})]},Ze))})]})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:Y.currentStep}),e.jsx("span",{className:"text-sm text-gray-500",children:Y.totalMachines>0?`${Y.processedMachines||0}/${Y.totalMachines} machines`:"Initializing..."})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-purple-600 h-3 rounded-full transition-all duration-500 ease-out",style:{width:`${Math.min(Y.percentage||0,100)}%`}})}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:Y.message}),Y.details&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Y.details}),Y.currentMachine&&Y.logsFound>0&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded border",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs text-blue-700 font-medium",children:Y.currentMachine}),e.jsxs("span",{className:"text-xs text-blue-600",children:[Y.logsProcessed||0,"/",Y.logsFound||0]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:Y.logsFound>0?`${Math.min(Y.logsProcessed/Y.logsFound*100,100)}%`:"0%"}})}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs text-gray-600",children:Y.currentMachineStep||"Processing logs..."}),Y.currentMachineDetails&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Y.currentMachineDetails})]})]}),Y.currentMachine&&(!Y.logsFound||Y.logsFound===0)&&e.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded border",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-blue-700 font-medium",children:["Current: ",Y.currentMachine]}),e.jsxs("span",{className:"text-xs text-blue-600",children:[Y.currentMachineProgress||0,"%"]})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"text-xs text-blue-600",children:Y.currentMachineStep||""}),Y.currentMachineDetails&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Y.currentMachineDetails})]})]})]})]}),Y.machineResults&&Y.machineResults.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Machine Results:"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:Y.machineResults.map((Ce,Ze)=>e.jsxs("div",{className:`p-2 rounded text-xs ${Ce.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:Ce.machineAlias}),e.jsx("span",{className:Ce.success?"text-green-600":"text-red-600",children:Ce.success?"":""})]}),Ce.success?e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Ce.totalLogs||0," logs found, ",Ce.saved||0," new logs, ",Ce.duplicates||0," duplicates"]}):e.jsx("div",{className:"text-xs text-red-600 mt-1",children:Ce.error||"Failed to process"})]},Ze))})]})]}),e.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{W(!1),y(!1),window.currentEventSource&&(window.currentEventSource.close(),window.currentEventSource=null)},className:`px-6 py-2 rounded-lg font-medium transition-colors ${J?"bg-gray-600 text-white hover:bg-gray-700":"bg-red-600 text-white hover:bg-red-700"}`,children:J?"Close":"Cancel"})})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-6xl max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"New Logs from Machine"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Date Range: ",b.startDate," to ",b.endDate," | New Logs: ",p.length," (logs not yet in database)"]}),e.jsx("div",{className:"overflow-auto max-h-96",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"User ID"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Badge Number"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Timestamp"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Device"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map((Ce,Ze)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:Ce.userId||Ce.employeeId||Ce.deviceUserId}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:Ce.badgeNumber||Ce.deviceUserId}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:Ce.userName||Ce.name||"Unknown Employee"}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:new Date(Ce.timestamp).toLocaleString()}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:Ce.deviceName||Ce.machineAlias})]},Ze))})]})}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})}),M&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Register New Machine"}),e.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:Ce=>{Ce.preventDefault(),lt()},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID *"}),e.jsx("input",{type:"text",value:I.id,onChange:Ce=>K({...I,id:Ce.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter machine ID",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Machine Name *"}),e.jsx("input",{type:"text",value:I.name,onChange:Ce=>K({...I,name:Ce.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Main Office Biometric",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Connection Type"}),e.jsxs("select",{value:I.connectionType,onChange:Ce=>K({...I,connectionType:parseInt(Ce.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:1,children:"TCP/IP"}),e.jsx("option",{value:2,children:"Serial"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IP Address *"}),e.jsx("input",{type:"text",value:I.ipAddress,onChange:Ce=>K({...I,ipAddress:Ce.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"192.168.1.100",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Port"}),e.jsx("input",{type:"number",value:I.serialPort,onChange:Ce=>K({...I,serialPort:parseInt(Ce.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),e.jsx("input",{type:"number",value:I.port,onChange:Ce=>K({...I,port:parseInt(Ce.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"4370"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Baudrate"}),e.jsx("input",{type:"number",value:I.baudrate,onChange:Ce=>K({...I,baudrate:parseInt(Ce.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"115200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comm Password"}),e.jsx("input",{type:"number",value:I.commPassword,onChange:Ce=>K({...I,commPassword:parseInt(Ce.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Machine (3 digits) *"}),e.jsx("input",{type:"number",value:I.machine,onChange:Ce=>{const Ze=Ce.target.value;(Ze===""||Ze.length<=3&&/^\d+$/.test(Ze))&&K({...I,machine:Ze})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"001",maxLength:3,required:!0}),I.machine&&I.machine.length!==3&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Machine number must be exactly 3 digits"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Test Connection"}),e.jsx("button",{type:"button",onClick:Se,disabled:z||!I.ipAddress,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-3 py-1 rounded text-sm flex items-center space-x-1",children:z?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-3 w-3",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Testing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Test"})]})})]}),R&&e.jsx("div",{className:`p-3 rounded-md text-sm ${R.success?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[R.success?e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),e.jsx("span",{children:R.message}),R.pingTime&&e.jsxs("span",{className:"text-xs",children:["(",R.pingTime,"ms)"]})]})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>k(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-md",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:U||!R||!R.success||I.machine&&I.machine.length!==3,className:`px-4 py-2 ${U||!R||!R.success||I.machine&&I.machine.length!==3?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"} text-white rounded-md flex items-center space-x-2`,children:U?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Registering..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("span",{children:"Register Machine"})]})})]})]})]})}),$&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Edit Machine"}),e.jsx("button",{onClick:()=>X(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:Ce=>{Ce.preventDefault(),it()},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID *"}),e.jsx("input",{type:"text",value:V.id,onChange:Ce=>re({...V,id:Ce.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter machine ID",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Machine Name *"}),e.jsx("input",{type:"text",value:V.name,onChange:Ce=>re({...V,name:Ce.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Main Office Biometric",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Connection Type"}),e.jsxs("select",{value:V.connectionType,onChange:Ce=>re({...V,connectionType:parseInt(Ce.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:1,children:"TCP/IP"}),e.jsx("option",{value:2,children:"Serial"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IP Address *"}),e.jsx("input",{type:"text",value:V.ipAddress,onChange:Ce=>re({...V,ipAddress:Ce.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"192.168.1.100",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Port"}),e.jsx("input",{type:"number",value:V.serialPort,onChange:Ce=>re({...V,serialPort:parseInt(Ce.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),e.jsx("input",{type:"number",value:V.port,onChange:Ce=>re({...V,port:parseInt(Ce.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"4370"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Baudrate"}),e.jsx("input",{type:"number",value:V.baudrate,onChange:Ce=>re({...V,baudrate:parseInt(Ce.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"115200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comm Password"}),e.jsx("input",{type:"number",value:V.commPassword,onChange:Ce=>re({...V,commPassword:parseInt(Ce.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Machine (3 digits) *"}),e.jsx("input",{type:"number",value:V.machine,onChange:Ce=>{const Ze=Ce.target.value;(Ze===""||Ze.length<=3&&/^\d+$/.test(Ze))&&re({...V,machine:Ze})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"001",maxLength:3,required:!0}),V.machine&&V.machine.length!==3&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Machine number must be exactly 3 digits"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Test Connection"}),e.jsx("button",{type:"button",onClick:Pt,disabled:ne||!V.ipAddress,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-3 py-1 rounded text-sm flex items-center space-x-1",children:ne?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-3 w-3",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Testing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Test"})]})})]}),me&&e.jsx("div",{className:`p-3 rounded-md text-sm ${me.success?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[me.success?e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),e.jsx("span",{children:me.message}),me.pingTime&&e.jsxs("span",{className:"text-xs",children:["(",me.pingTime,"ms)"]})]})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>X(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-md",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:ee||!me||!me.success||V.machine&&V.machine.length!==3,className:`px-4 py-2 ${ee||!me||!me.success||V.machine&&V.machine.length!==3?"bg-gray-400 cursor-not-allowed":"bg-yellow-600 hover:bg-yellow-700"} text-white rounded-md flex items-center space-x-2`,children:ee?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Updating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{children:"Update Machine"})]})})]})]})]})})]})},L7=()=>{const[t,s]=x.useState([]),[r,n]=x.useState([]),[a,l]=x.useState([]),[i,o]=x.useState(""),[c,d]=x.useState(!1),[m,u]=x.useState(!1),[p,g]=x.useState(""),[j,y]=x.useState("all"),[v,h]=x.useState([]),[f,N]=x.useState({currentStep:"",percentage:0,message:"",details:"",employeesProcessed:0,totalEmployees:0,errors:[]}),[b,w]=x.useState(null),[D,S]=x.useState(!1),[C,T]=x.useState("all"),[_,E]=x.useState([]),[A,L]=x.useState(!1),[F,W]=x.useState(""),[Y,q]=x.useState(!1),[J,O]=x.useState([]),[M,k]=x.useState(!1),[I,K]=x.useState([]),[z,P]=x.useState(!1),[R,B]=x.useState([]),[U,G]=x.useState(!1),[$,X]=x.useState(!1),[Q,Ne]=x.useState({userInfo:!0,fingerprints:!0,face:!0}),[V,re]=x.useState("all"),[ne,xe]=x.useState(null);x.useEffect(()=>{me(),ee(),ye()},[]),x.useEffect(()=>{q(!!(C==="not-uploaded"&&F))},[C,F]),x.useEffect(()=>{C==="not-uploaded"?O([]):l([])},[C]);const me=async()=>{try{d(!0);const Se=await oe.get("/employees");if(Se.data&&Array.isArray(Se.data.data)){if(s(Se.data.data),Se.data.data.length>0){console.log("=== FRONTEND BIOMETRIC DEBUG ===");const lt=Se.data.data[0];console.log("Sample employee from API:",{NAME:lt.NAME,FINGER_COUNT:lt.FINGER_COUNT,FACE_COUNT:lt.FACE_COUNT,hasFingerCount:"FINGER_COUNT"in lt,hasFaceCount:"FACE_COUNT"in lt}),console.log("All available fields:",Object.keys(lt))}}else if(Array.isArray(Se.data)){if(s(Se.data),Se.data.length>0){console.log("=== FRONTEND BIOMETRIC DEBUG ===");const lt=Se.data[0];console.log("Sample employee from API:",{NAME:lt.NAME,FINGER_COUNT:lt.FINGER_COUNT,FACE_COUNT:lt.FACE_COUNT,hasFingerCount:"FINGER_COUNT"in lt,hasFaceCount:"FACE_COUNT"in lt}),console.log("All available fields:",Object.keys(lt))}}else console.warn("Employees response is not an array:",Se.data),s([])}catch(Se){console.error("Error fetching employees:",Se),s([])}finally{d(!1)}},Z=async()=>{var Se,lt,it,Pt;if(F)try{L(!0),console.log(`Fetching not uploaded employees for machine: ${F}`);const Nt=await oe.get(`/machines/${F}/not-uploaded-employees`,{timeout:6e4});console.log("Response received:",Nt.data),Nt.data.success&&Nt.data.data?(E(Nt.data.data),console.log(`Successfully fetched ${Nt.data.data.length} not uploaded employees`),console.log("Sample not uploaded employees:",Nt.data.data.slice(0,3))):(console.error("Invalid response format:",Nt.data),E([]))}catch(Nt){console.error("Error fetching not uploaded employees:",Nt),Nt.code==="ECONNABORTED"||Nt.message.includes("timeout")?(console.error("Machine connection timeout - the biometric device may be offline or unreachable"),alert("Connection timeout: The biometric device may be offline or unreachable. Please check the device connection and try again."),E([])):((Se=Nt.response)==null?void 0:Se.status)===404?(console.error("Machine not found"),alert("Machine not found. Please select a valid machine."),E([])):((lt=Nt.response)==null?void 0:lt.status)===500?(console.error("Server error:",(it=Nt.response.data)==null?void 0:it.message),alert(`Server error: ${((Pt=Nt.response.data)==null?void 0:Pt.message)||"Failed to connect to the biometric device"}`),E([])):(console.error("Unknown error:",Nt.message),alert(`Error: ${Nt.message}`),E([]))}finally{L(!1)}},ee=async()=>{try{const Se=await oe.get("/machines");Se.data&&Array.isArray(Se.data.data)?n(Se.data.data):Array.isArray(Se.data)?n(Se.data):(console.warn("Machines response is not an array:",Se.data),n([]))}catch(Se){console.error("Error fetching machines:",Se),n([])}},ye=async()=>{try{const Se=await oe.get("/departments");Se.data&&Array.isArray(Se.data.data)?h(Se.data.data):Array.isArray(Se.data)?h(Se.data):(console.warn("Departments response is not an array:",Se.data),h([]))}catch(Se){console.error("Error fetching departments:",Se),h([])}},ve=(Se,lt)=>{O(lt?it=>[...it,Se]:it=>it.filter(Pt=>Pt!==Se))},ue=()=>{J.length===Re.length?O([]):O(Re.map(Se=>Se.USERID))},we=Se=>{ge("individual",Se)},De=()=>{ge("not-uploaded")},le=(Se,lt)=>{l(lt?it=>[...it,Se]:it=>it.filter(Pt=>Pt!==Se))},Ie=()=>{a.length===Re.length?l([]):l(Re.map(Se=>Se.USERID))},ge=(Se="all",lt=null)=>{if(Se==="all"){if(a.length===0){alert("Please select employees to upload");return}if(!i){alert("Please select a machine");return}}else if(Se==="not-uploaded"){if(J.length===0){alert("Please select employees to upload");return}if(!F){alert("Please select a machine first");return}}else if(Se==="individual"){if(!lt){alert("No employee selected");return}if(!F){alert("Please select a machine first");return}}re(Se),xe(lt),X(!0)},Ge=async()=>{var it,Pt,Nt,At,Ce,Ze;X(!1);let Se=[],lt=null;V==="all"?(Se=a,lt=i):V==="not-uploaded"?(Se=J,lt=F):V==="individual"&&(Se=[ne.USERID],lt=F);try{V==="all"?(u(!0),S(!0)):k(!0),V==="all"&&N({currentStep:"Starting upload...",percentage:0,message:"Preparing to upload employees",details:"",employeesProcessed:0,totalEmployees:Se.length,errors:[]});const fe=[Q.userInfo?"User Info":null,Q.fingerprints?"Fingerprints":null,Q.face?"Face Templates":null].filter(Boolean).join(", ");V==="all"&&N(ut=>({...ut,details:`Uploading: ${fe}`}));const Pe=Q.fingerprints||Q.face?`/machines/${lt}/upload-employees-biometrics`:`/machines/${lt}/upload-employees`,Le=await oe.post(Pe,{employeeIds:Se,includeBiometrics:Q.fingerprints||Q.face,includeFingerprints:Q.fingerprints,includeFace:Q.face});if(Le.data.success)if(V==="all"){const ut=Le.data.details,Be=ut?`Successfully uploaded ${ut.successCount||Se.length} employees
Fingerprints: ${Q.fingerprints?"Yes":"No"}
Face Templates: ${Q.face?"Yes":"No"}`:`Successfully uploaded ${Se.length} employees`;w({success:!0,message:Be,details:ut||""}),N(mt=>({...mt,percentage:100,currentStep:"Upload completed",message:"All employees uploaded successfully"}))}else{const ut=Se.length,Be=V==="individual"?ne.NAME:`${ut} employee${ut>1?"s":""}`;alert(`${Be} uploaded successfully with:
${fe}`),V!=="individual"&&O([]),await Z()}else V==="all"?w({success:!1,message:"Upload failed",details:Le.data.message||"Unknown error occurred"}):alert(`Failed to upload: ${Le.data.message}`)}catch(fe){console.error("Error uploading employees:",fe),V==="all"?w({success:!1,message:"Upload failed",details:((Pt=(it=fe.response)==null?void 0:it.data)==null?void 0:Pt.error)||((At=(Nt=fe.response)==null?void 0:Nt.data)==null?void 0:At.message)||fe.message}):alert(`Error uploading: ${((Ze=(Ce=fe.response)==null?void 0:Ce.data)==null?void 0:Ze.message)||fe.message}`)}finally{V==="all"?u(!1):k(!1)}},Re=(()=>{let Se=C==="not-uploaded"?_||[]:t||[];return Array.isArray(Se)?Se.filter(lt=>{var Nt,At,Ce,Ze,fe;const it=((Nt=lt.NAME)==null?void 0:Nt.toLowerCase().includes(p.toLowerCase()))||((At=lt.SSN)==null?void 0:At.toString().includes(p))||((Ce=lt.USERID)==null?void 0:Ce.toString().includes(p))||((Ze=lt.BADGENUMBER)==null?void 0:Ze.toString().includes(p)),Pt=j==="all"||((fe=lt.DEFAULTDEPTID)==null?void 0:fe.toString())===j;return it&&Pt}):(console.warn("baseEmployees is not an array:",Se),[])})(),Ke=async()=>{if(!i){alert("Please select a machine first");return}try{P(!0);const Se=await oe.get(`/machines/${i}/biometric-templates`);Se.data.success?(K(Se.data.data),console.log("Biometric templates:",Se.data.data)):(console.error("Failed to fetch biometric templates:",Se.data.message),K([]))}catch(Se){console.error("Error fetching biometric templates:",Se),K([])}finally{P(!1)}},Xe=async()=>{if(!i){alert("Please select a machine first");return}try{G(!0);const Se=await oe.get(`/machines/${i}/users-with-biometrics`);Se.data.success?(B(Se.data.data),console.log("Users with biometrics:",Se.data.data)):(console.error("Failed to fetch users with biometrics:",Se.data.message),B([]))}catch(Se){console.error("Error fetching users with biometrics:",Se),B([])}finally{G(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Employee Upload Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Upload employees to biometric machines"})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>T("all"),className:`py-2 px-1 border-b-2 font-medium text-sm ${C==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"All Employees"}),e.jsx("button",{onClick:()=>T("not-uploaded"),className:`py-2 px-1 border-b-2 font-medium text-sm ${C==="not-uploaded"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Not Uploaded Employees"})]})})}),C==="not-uploaded"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Machine to Scan"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:F,onChange:Se=>W(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a machine..."}),r.map(Se=>e.jsxs("option",{value:Se.ID,children:[Se.MachineAlias," (",Se.IP,":",Se.Port,")"]},Se.ID))]}),Y&&e.jsx("button",{onClick:Z,disabled:A,className:`px-4 py-2 rounded-md font-medium ${A?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:A?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Scanning..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-5 w-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Scan Employees"]})})]})]}),C==="all"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Target Machine"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(Se=>e.jsx("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${i===Se.ID.toString()?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>o(Se.ID.toString()),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:Se.MachineAlias}),e.jsxs("p",{className:"text-sm text-gray-600",children:[Se.IP,":",Se.Port]})]}),e.jsx("div",{className:`w-3 h-3 rounded-full ${i===Se.ID.toString()?"bg-blue-500":"bg-gray-300"}`})]})},Se.ID))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Employee"}),e.jsx("input",{type:"text",value:p,onChange:Se=>g(Se.target.value),placeholder:"Search by name, SSN, ID, or badge number...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),e.jsxs("select",{value:j,onChange:Se=>y(Se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Departments"}),Array.isArray(v)&&v.map(Se=>e.jsx("option",{value:Se.DEPTID,children:Se.DEPTNAME},Se.DEPTID))]})]})]})]}),C==="not-uploaded"&&J.length>0&&e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsx("button",{onClick:De,disabled:M||J.length===0,className:`px-6 py-3 rounded-md font-medium ${M||J.length===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:M?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-5 w-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload Selected ",J.length>1?"Employees":"Employee"]})})}),C==="all"&&i&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Biometric Templates"}),e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("button",{onClick:Ke,disabled:z,className:`px-4 py-2 rounded-md font-medium ${z?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:z?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-5 w-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Get Biometric Templates"]})}),e.jsx("button",{onClick:Xe,disabled:U,className:`px-4 py-2 rounded-md font-medium ${U?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:U?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-5 w-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Get Users with Biometrics"]})})]}),I.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:["Biometric Templates (",I.length," found)"]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 max-h-64 overflow-y-auto",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.slice(0,20).map((Se,lt)=>e.jsx("div",{className:"bg-white p-3 rounded border",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900",children:Se.name||Se.userId||"Unknown User"}),e.jsxs("div",{className:"text-gray-600",children:["PIN: ",Se.pin||Se.userId||"N/A"]}),e.jsxs("div",{className:"text-gray-600",children:["Type: ",Se.templateType||"Unknown"]}),e.jsxs("div",{className:"text-gray-600",children:["Size: ",Se.templateSize||0," bytes"]}),Se.fingerId!==void 0&&e.jsxs("div",{className:"text-gray-600",children:["Finger ID: ",Se.fingerId]}),Se.faceId!==void 0&&e.jsxs("div",{className:"text-gray-600",children:["Face ID: ",Se.faceId]}),e.jsxs("div",{className:"text-gray-600",children:["Valid: ",Se.valid?"Yes":"No"]}),e.jsxs("div",{className:"text-gray-600",children:["Method: ",Se.method||"Unknown"]})]})},lt))}),I.length>20&&e.jsxs("div",{className:"text-center text-gray-500 text-sm mt-2",children:["Showing first 20 of ",I.length," templates"]})]})]}),R.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:["Users with Biometric Data (",R.length," found)"]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 max-h-64 overflow-y-auto",children:[e.jsx("div",{className:"space-y-3",children:R.slice(0,10).map((Se,lt)=>{var it,Pt;return e.jsx("div",{className:"bg-white p-3 rounded border",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:Se.Name||Se.name||"Unknown User"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["PIN: ",Se.PIN||Se.pin||"N/A"," | Badge: ",Se.BADGENUMBER||Se.badgeNumber||"N/A"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Templates: ",Se.templateCount||0," | Fingerprints: ",((it=Se.fingerprintTemplates)==null?void 0:it.length)||0," | Face: ",((Pt=Se.faceTemplates)==null?void 0:Pt.length)||0]})]}),e.jsxs("div",{className:"flex space-x-2",children:[Se.hasFingerprints&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Fingerprint"}),Se.hasFace&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Face"})]})]})},lt)})}),R.length>10&&e.jsxs("div",{className:"text-center text-gray-500 text-sm mt-2",children:["Showing first 10 of ",R.length," users"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:C==="not-uploaded"?`Employees Not Uploaded to Selected Machine (${Re.length})`:`Available Employees (${Re.length})`}),C==="all"&&e.jsx("button",{onClick:Ie,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:a.length===Re.length?"Deselect All":"Select All"}),C==="not-uploaded"&&e.jsx("button",{onClick:ue,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:J.length===Re.length?"Deselect All":"Select All"})]})}),c||A?e.jsxs("div",{className:"p-8 text-center",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600 mx-auto mb-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("p",{className:"text-gray-600",children:C==="not-uploaded"?"Scanning employees from machine...":"Loading employees..."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:C==="all"?a.length===Re.length&&Re.length>0:J.length===Re.length&&Re.length>0,onChange:C==="all"?Ie:ue,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Badge Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),C==="all"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Finger Count"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Face Count"})]}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Upload Status"}),C==="not-uploaded"&&e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Re.map(Se=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:C==="all"?a.includes(Se.USERID):J.includes(Se.USERID),onChange:lt=>C==="all"?le(Se.USERID,lt.target.checked):ve(Se.USERID,lt.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Se.BADGENUMBER||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Se.NAME}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Se.DEPTNAME||"N/A"}),C==="all"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Se.FINGER_COUNT>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Se.FINGER_COUNT||0]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Se.FACE_COUNT>0?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"}`,children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Se.FACE_COUNT||0]})})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Se.privilege>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Se.privilege>=0?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-amber-100 text-amber-800",children:"Not Uploaded"})}),C==="not-uploaded"&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{onClick:()=>we(Se),disabled:M,className:"text-blue-600 hover:text-blue-900 disabled:text-gray-400 disabled:cursor-not-allowed",title:"Upload this employee to the machine",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})})})]},Se.USERID))})]})}),$&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-[500px] shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Data to Upload"}),e.jsx("button",{onClick:()=>X(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Choose what data to upload to the biometric device for ",V==="individual"?`employee ${(ne==null?void 0:ne.NAME)||""}`:`the selected ${V==="all"?a.length:J.length} employee${(V==="all"?a.length:J.length)>1?"s":""}`,":"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-3 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsx("input",{type:"checkbox",id:"upload-userinfo",checked:Q.userInfo,onChange:Se=>Ne(lt=>({...lt,userInfo:Se.target.checked})),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"upload-userinfo",className:"font-medium text-gray-900 cursor-pointer",children:"Basic User Information"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Employee name, badge number, password/PIN, and privilege level"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",id:"upload-fingerprints",checked:Q.fingerprints,onChange:Se=>Ne(lt=>({...lt,fingerprints:Se.target.checked})),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{htmlFor:"upload-fingerprints",className:"font-medium text-gray-900 cursor-pointer flex items-center",children:["Fingerprint Templates",e.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"Biometric"]})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Upload all enrolled fingerprint templates from database"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",id:"upload-face",checked:Q.face,onChange:Se=>Ne(lt=>({...lt,face:Se.target.checked})),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{htmlFor:"upload-face",className:"font-medium text-gray-900 cursor-pointer flex items-center",children:["Face Templates",e.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"Biometric"]})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Upload face recognition templates from database"})]})]})]}),!Q.userInfo&&!Q.fingerprints&&!Q.face&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx("svg",{className:"h-5 w-5 text-yellow-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-sm text-yellow-800",children:"Please select at least one option to upload"})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>X(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:Ge,disabled:!Q.userInfo&&!Q.fingerprints&&!Q.face,className:`px-6 py-2 text-sm font-medium rounded-md ${!Q.userInfo&&!Q.fingerprints&&!Q.face?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[e.jsx("svg",{className:"h-5 w-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Start Upload"]})]})]})})}),Re.length===0&&!c&&!A&&e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:C==="not-uploaded"?'No employees found. Click "Scan Employees" to check the selected machine.':"No employees found matching the current filters."})})]}),C==="all"&&e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:ge,disabled:a.length===0||!i||m,className:`px-6 py-3 rounded-md font-medium ${a.length===0||!i||m?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:m?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-5 w-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload Selected (",a.length,")"]})})}),D&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Upload Progress"}),e.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:f.currentStep}),e.jsxs("span",{children:[f.percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${f.percentage}%`}})})]}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:f.message}),f.details&&e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:f.details}),f.employeesProcessed>0&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Processed: ",f.employeesProcessed," / ",f.totalEmployees]}),b&&e.jsxs("div",{className:`mt-4 p-3 rounded-md ${b.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsx("div",{className:"font-medium",children:b.success?"Upload Successful!":"Upload Failed"}),e.jsx("div",{className:"text-sm mt-1",children:b.details})]})]})})})]})},P7=()=>{const[t,s]=x.useState([]),[r,n]=x.useState(""),[a,l]=x.useState([]),[i,o]=x.useState(!1),[c,d]=x.useState({}),[m,u]=x.useState(""),[p,g]=x.useState([]),[j,y]=x.useState(!1);x.useEffect(()=>{v()},[]),x.useEffect(()=>{r&&h()},[r]),x.useEffect(()=>{g([])},[r]);const v=async()=>{try{const S=await oe.get("/machines");S.data.success&&s(S.data.data)}catch(S){console.error("Error fetching machines:",S)}},h=async()=>{if(r){o(!0);try{const S=await oe.get(`/machines/${r}/users`);S.data.success&&(l(S.data.data),console.log(`Found ${S.data.data.length} users not in database`),console.log(`Total machine users: ${S.data.totalMachineUsers}`),console.log(`Total database users: ${S.data.totalDatabaseUsers}`))}catch(S){console.error("Error fetching employees from machine:",S)}finally{o(!1)}}},f=(S,C)=>{g(C?T=>[...T,S]:T=>T.filter(_=>_!==S))},N=()=>{p.length===D.length?g([]):g(D.map(S=>S.userId||S.PIN))},b=async S=>{var C,T;if(r){d(_=>({..._,[S.PIN||S.userId]:!0}));try{const _=await oe.post(`/machines/${r}/download-employee`,{userId:S.PIN||S.userId,employeeData:S});_.data.success?(alert(`Employee ${S.Name||S.name} downloaded successfully!`),h()):alert(`Error downloading employee: ${_.data.message}`)}catch(_){console.error("Error downloading employee:",_),alert(`Error downloading employee: ${((T=(C=_.response)==null?void 0:C.data)==null?void 0:T.message)||_.message}`)}finally{d(_=>({..._,[S.PIN||S.userId]:!1}))}}},w=async()=>{var S,C;if(p.length===0){alert("Please select employees to download");return}y(!0);try{const T=p.map(_=>{const E=a.find(A=>(A.PIN||A.userId)===_);return E?oe.post(`/machines/${r}/download-employee`,{userId:E.PIN||E.userId,employeeData:E}):Promise.resolve()});await Promise.all(T),alert(`Successfully downloaded ${p.length} employees!`),g([]),h()}catch(T){console.error("Error downloading selected employees:",T),alert(`Error downloading employees: ${((C=(S=T.response)==null?void 0:S.data)==null?void 0:C.message)||T.message}`)}finally{y(!1)}},D=a.filter(S=>{var C,T;return((C=S.Name||S.name)==null?void 0:C.toLowerCase().includes(m.toLowerCase()))||((T=S.PIN||S.userId)==null?void 0:T.toString().includes(m))});return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Download Employee"}),e.jsx("p",{className:"text-gray-600",children:"Download employee data from selected ZKTeco machine to database (only shows users not already in database)"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Machine"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("select",{value:r,onChange:S=>n(S.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select a machine..."}),t.map(S=>e.jsxs("option",{value:S.ID,children:[S.MachineAlias," (",S.IP,")"]},S.ID))]}),r&&e.jsx("button",{onClick:h,disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:i?"Loading...":"Refresh"})]})]}),r&&p.length>0&&e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsx("button",{onClick:w,disabled:j||p.length===0,className:`px-6 py-3 rounded-md font-medium ${j||p.length===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:j?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Downloading Selected..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-5 w-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Selected ",p.length>1?"Employees":"Employee"]})})}),r&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Employees from Machine NOT in Database (",a.length,")"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:N,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:p.length===D.length?"Deselect All":"Select All"}),e.jsx("input",{type:"text",placeholder:"Search by badge number or name...",value:m,onChange:S=>u(S.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:p.length===D.length&&D.length>0,onChange:N,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Badge Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(S=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("input",{type:"checkbox",checked:p.includes(S.userId||S.PIN),onChange:C=>f(S.userId||S.PIN,C.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S.PIN||S.userId}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S.Name||S.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${S.Enabled!==!1?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:S.Enabled!==!1?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("button",{onClick:()=>b(S),disabled:c[S.PIN||S.userId],className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:c[S.PIN||S.userId]?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Downloading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download"]})})})]},S.userId||S.PIN))})]})}),D.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:m?"No employees found matching your search.":"No employees found on this machine that are not in the database."})]})]})},R7=()=>{const{user:t}=Ts(),[s,r]=x.useState({}),[n,a]=x.useState(!1),[l,i]=x.useState(!1),[o,c]=x.useState(!1),[d,m]=x.useState(""),[u,p]=x.useState(""),[g,j]=x.useState(""),[y,v]=x.useState(null);x.useEffect(()=>{f(),h()},[]);const h=async()=>{try{const T=await oe.get("/env/deployment-info");v(T.data)}catch{console.log("Deployment info not available, using fallback methods"),v({environment:"development",processManager:"none",hasPM2:!1,hasNodemon:!1,hasDocker:!1})}},f=async()=>{a(!0);try{const T=await oe.get("/env");r(T.data.data||{}),j(T.data.filePath||"")}catch(T){console.error("Error fetching environment variables:",T),p("Failed to fetch environment variables")}finally{a(!1)}},N=(T,_)=>{r(E=>({...E,[T]:{...E[T],value:_}}))},b=async()=>{i(!0),p(""),m("");try{await oe.put("/env",{variables:s}),m("Environment variables updated successfully!"),setTimeout(()=>{w()},1e3)}catch(T){console.error("Error updating environment variables:",T),p("Failed to update environment variables")}finally{i(!1)}},w=async()=>{c(!0),m("Restarting services to apply changes...");try{m("Step 1/3: Restarting backend server..."),await oe.post("/env/restart"),m("Step 2/3: Waiting for backend to restart..."),await new Promise(T=>setTimeout(T,5e3)),m("Step 3/3: Refreshing frontend..."),await new Promise(T=>setTimeout(T,2e3)),window.location.reload()}catch(T){console.error("Error during restart process:",T),p("Error during restart process. Please manually refresh the page."),m("Backend restart initiated. Please refresh the page manually in a few seconds."),setTimeout(()=>{window.location.reload()},3e3)}finally{c(!1)}},D=async()=>{window.confirm("This will restart the backend server and refresh the frontend. Continue?")&&await w()},S=()=>{const T=prompt("Enter variable name:");T&&!s[T]&&r(_=>({..._,[T]:{value:"",lineNumber:Object.keys(_).length+1,originalLine:`${T}=`}}))},C=T=>{window.confirm(`Are you sure you want to remove ${T}?`)&&r(_=>{const E={..._};return delete E[T],E})};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-600",children:"Loading environment variables..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Environment Variables Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage system configuration variables"}),g&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["File: ",g]}),y&&e.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded text-sm",children:[e.jsx("strong",{children:"Environment:"})," ",y.environment," |",e.jsx("strong",{children:" Process Manager:"})," ",y.processManager," |",e.jsx("strong",{children:" PM2:"})," ",y.hasPM2?"Yes":"No"," |",e.jsx("strong",{children:" Nodemon:"})," ",y.hasNodemon?"Yes":"No"]})]}),d&&e.jsx("div",{className:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded",children:d}),u&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:u}),e.jsxs("div",{className:"mb-6 flex gap-4",children:[e.jsx("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:l||o,children:"Add New Variable"}),e.jsx("button",{onClick:b,disabled:l||o,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:l?"Saving...":o?"Restarting...":"Save & Restart Services"}),e.jsx("button",{onClick:D,disabled:l||o,className:"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50",children:"Manual Restart"}),e.jsx("button",{onClick:f,className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",disabled:l||o,children:"Refresh"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Variable Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.keys(s).length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"px-6 py-4 text-center text-gray-500",children:"No environment variables found"})}):Object.entries(s).map(([T,_])=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:T}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Line ",_.lineNumber]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:T.toLowerCase().includes("password")?"password":"text",value:_.value,onChange:E=>N(T,E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter value...",disabled:l||o})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>C(T),className:"text-red-600 hover:text-red-900 text-sm",disabled:l||o,children:"Remove"})})]},T))})]})}),e.jsxs("div",{className:"mt-6 p-4 bg-yellow-100 border border-yellow-400 text-yellow-700 rounded",children:[e.jsx("h3",{className:"font-semibold mb-2",children:" Important Notes:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Changes to environment variables will automatically restart both backend and frontend services"}),e.jsx("li",{children:"Be careful when modifying database connection settings"}),e.jsx("li",{children:"Always backup your .env file before making changes"}),e.jsx("li",{children:"Some variables may be sensitive (passwords, API keys)"}),e.jsx("li",{children:"The page will automatically refresh after services restart"})]})]}),o&&e.jsxs("div",{className:"mt-6 p-4 bg-blue-100 border border-blue-400 text-blue-700 rounded",children:[e.jsx("h3",{className:"font-semibold mb-2",children:" Restarting Services..."}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-700 mr-2"}),e.jsx("span",{className:"text-sm",children:"Please wait while services restart..."})]})]})]})},O7=()=>{const[t,s]=x.useState({host:"",port:"3306",database:"",username:"",password:"",enabled:!1}),[r,n]=x.useState(!1),[a,l]=x.useState(!1),[i,o]=x.useState({type:"",text:""}),[c,d]=x.useState(null),[m,u]=x.useState(!1);x.useEffect(()=>{(async()=>{try{const y=await oe.get("/env/db-201files");y.data.success&&(s(y.data.data),d(y.data.data.connectionStatus))}catch(y){console.error("Error fetching 201 Files DB config:",y)}})()},[]);const p=async()=>{var j,y;l(!0),o({type:"",text:""});try{const v=await oe.post("/env/db-201files/test",t);v.data.success?(o({type:"success",text:" Connection successful!"}),d("connected")):(o({type:"error",text:` ${v.data.message}`}),d("failed"))}catch(v){o({type:"error",text:` ${((y=(j=v.response)==null?void 0:j.data)==null?void 0:y.message)||"Connection failed"}`}),d("failed")}finally{l(!1)}},g=async j=>{var y,v;j.preventDefault(),n(!0),o({type:"",text:""});try{const h=await oe.post("/env/db-201files/save",t);h.data.success?(o({type:"success",text:" Configuration saved successfully!"}),setTimeout(()=>o({type:"",text:""}),3e3)):o({type:"error",text:` ${h.data.message}`})}catch(h){o({type:"error",text:` ${((v=(y=h.response)==null?void 0:y.data)==null?void 0:v.message)||"Failed to save configuration"}`})}finally{n(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg shadow-lg p-8 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:" 201 Files Database Connection"}),e.jsx("p",{className:"text-green-100",children:"Configure MySQL database for 201 Files module"})]}),c&&e.jsx("div",{className:`p-4 rounded-lg border-l-4 ${c==="connected"?"bg-green-50 border-green-500":c==="failed"?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[c==="connected"&&e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-green-700 font-medium",children:"Database Connected"})]}),c==="failed"&&e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-red-700 font-medium",children:"Connection Failed"})]})]})}),e.jsxs("form",{onSubmit:g,className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Database Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-900",children:"Enable 201 Files Module"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Activate separate database for 201 Files"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.enabled,onChange:j=>s({...t,enabled:j.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Database Host"}),e.jsx("input",{type:"text",value:t.host,onChange:j=>s({...t,host:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"localhost or IP address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Port"}),e.jsx("input",{type:"number",value:t.port,onChange:j=>s({...t,port:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"3306",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Database Name"}),e.jsx("input",{type:"text",value:t.database,onChange:j=>s({...t,database:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"201files_db",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),e.jsx("input",{type:"text",value:t.username,onChange:j=>s({...t,username:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"database username",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m?"text":"password",value:t.password,onChange:j=>s({...t,password:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 pr-10",placeholder:"database password",required:!0}),e.jsx("button",{type:"button",onClick:()=>u(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:m?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]})]}),i.text&&e.jsx("div",{className:`mt-4 p-4 rounded-lg ${i.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:i.text}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:p,disabled:a||!t.host||!t.database,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Testing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Test Connection"})]})}),e.jsx("button",{type:"submit",disabled:r,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),e.jsx("span",{children:"Save Configuration"})]})})]})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:"About 201 Files Database"}),e.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"The 201 Files module uses a separate MySQL database to store employee personnel records, documents, and related data."}),e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Purpose:"})," Isolates sensitive employee documents and personnel information for better security and data management."]})]})]})}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-6 h-6 text-yellow-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-yellow-800 mb-2",children:"Security Notice"}),e.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Only super administrators can modify this configuration"}),e.jsx("li",{children:"Use strong credentials for database access"}),e.jsx("li",{children:"Ensure the database server is properly secured"}),e.jsx("li",{children:"Test connection before saving to avoid downtime"}),e.jsx("li",{children:"Configuration is stored in environment variables (.env)"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Expected Database Schema"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"The 201 Files database should contain tables for:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-green-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Documents"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Employee document storage"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-green-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Personal Data Sheets"}),e.jsx("p",{className:"text-xs text-gray-600",children:"PDS information"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-green-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Education Records"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Educational background"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-green-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Work Experience"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Employment history"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-green-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Certifications"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Professional licenses"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-green-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Performance Records"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Evaluations and ratings"})]})]})]})]})},F7=()=>{const[t,s]=x.useState({host:"",port:"3306",database:"",username:"",password:"",enabled:!1}),[r,n]=x.useState(!1),[a,l]=x.useState(!1),[i,o]=x.useState({type:"",text:""}),[c,d]=x.useState(null),[m,u]=x.useState(!1);x.useEffect(()=>{(async()=>{try{const y=await oe.get("/env/db-payroll");y.data.success&&(s(y.data.data),d(y.data.data.connectionStatus))}catch(y){console.error("Error fetching Payroll DB config:",y)}})()},[]);const p=async()=>{var j,y;l(!0),o({type:"",text:""});try{const v=await oe.post("/env/db-payroll/test",t);v.data.success?(o({type:"success",text:" Connection successful!"}),d("connected")):(o({type:"error",text:` ${v.data.message}`}),d("failed"))}catch(v){o({type:"error",text:` ${((y=(j=v.response)==null?void 0:j.data)==null?void 0:y.message)||"Connection failed"}`}),d("failed")}finally{l(!1)}},g=async j=>{var y,v;j.preventDefault(),n(!0),o({type:"",text:""});try{const h=await oe.post("/env/db-payroll/save",t);h.data.success?(o({type:"success",text:" Configuration saved successfully!"}),setTimeout(()=>o({type:"",text:""}),3e3)):o({type:"error",text:` ${h.data.message}`})}catch(h){o({type:"error",text:` ${((v=(y=h.response)==null?void 0:y.data)==null?void 0:v.message)||"Failed to save configuration"}`})}finally{n(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg shadow-lg p-8 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:" Payroll Database Connection"}),e.jsx("p",{className:"text-purple-100",children:"Configure MySQL database for Payroll module"})]}),c&&e.jsx("div",{className:`p-4 rounded-lg border-l-4 ${c==="connected"?"bg-green-50 border-green-500":c==="failed"?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[c==="connected"&&e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-green-700 font-medium",children:"Database Connected"})]}),c==="failed"&&e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-red-700 font-medium",children:"Connection Failed"})]})]})}),e.jsxs("form",{onSubmit:g,className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Database Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-900",children:"Enable Payroll Module"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Activate separate database for Payroll"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.enabled,onChange:j=>s({...t,enabled:j.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Database Host"}),e.jsx("input",{type:"text",value:t.host,onChange:j=>s({...t,host:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"localhost or IP address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Port"}),e.jsx("input",{type:"number",value:t.port,onChange:j=>s({...t,port:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"3306",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Database Name"}),e.jsx("input",{type:"text",value:t.database,onChange:j=>s({...t,database:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"payroll_db",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),e.jsx("input",{type:"text",value:t.username,onChange:j=>s({...t,username:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"database username",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m?"text":"password",value:t.password,onChange:j=>s({...t,password:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 pr-10",placeholder:"database password",required:!0}),e.jsx("button",{type:"button",onClick:()=>u(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:m?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]})]}),i.text&&e.jsx("div",{className:`mt-4 p-4 rounded-lg ${i.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:i.text}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:p,disabled:a||!t.host||!t.database,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Testing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Test Connection"})]})}),e.jsx("button",{type:"submit",disabled:r,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),e.jsx("span",{children:"Save Configuration"})]})})]})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:"About Payroll Database"}),e.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"The Payroll module uses a separate MySQL database to store salary information, deductions, payroll history, and financial data."}),e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Purpose:"})," Isolates sensitive financial data with stricter access controls and audit trails."]})]})]})}),e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-6 h-6 text-red-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-red-800 mb-2",children:"High Security Database"}),e.jsxs("ul",{className:"text-sm text-red-700 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Contains highly sensitive salary and financial information"}),e.jsx("li",{children:"Only super administrators can modify this configuration"}),e.jsx("li",{children:"Use extremely strong credentials"}),e.jsx("li",{children:"Enable database encryption if possible"}),e.jsx("li",{children:"Regular backups are critical"}),e.jsx("li",{children:"Audit all access to this database"}),e.jsx("li",{children:"Configuration is stored securely in environment variables"})]})]})]})}),e.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-500 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-6 h-6 text-purple-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-purple-800 mb-2",children:"DTR Integration"}),e.jsx("p",{className:"text-sm text-purple-700",children:"The Payroll module will automatically pull attendance data from the main HR201 database (DTR system) to compute salaries accurately. Employee information will be synced between databases while payroll-specific data (salaries, deductions, payslips) remain isolated."})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Expected Database Schema"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"The Payroll database should contain tables for:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-purple-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Salary Rates"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Employee salary information"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-purple-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Payroll Register"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Payroll computation records"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-purple-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Payslips"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Generated payslip records"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-purple-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Deductions"}),e.jsx("p",{className:"text-xs text-gray-600",children:"SSS, PhilHealth, Pag-IBIG, Tax"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-purple-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Loans & Advances"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Employee loan tracking"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-purple-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Government Reports"}),e.jsx("p",{className:"text-xs text-gray-600",children:"BIR, SSS, PhilHealth reports"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-purple-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" 13th Month Pay"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Bonus computation records"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-purple-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Payroll History"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Historical payroll data"})]})]})]})]})},bb={USERID:"",CHECKTIME:"",CHECKTYPE:"I",VERIFYCODE:1,SENSORID:"",WORKCODE:0,SN:""},vb=(t="")=>encodeURIComponent(t.replace(/ /g,"_")),Il=()=>new Date().toISOString().substring(0,10),ah=(t="")=>{if(!t)return{datePart:"-",timePart:"-"};let s=t;s.includes("T")&&(s=s.replace("T"," "));const r=s.trim().split(" ").filter(Boolean);let n="-",a="-";return r.length>=2?[n,a]=r:r.length===1&&(r[0].includes(":")?a=r[0]:n=r[0]),{datePart:n,timePart:a}},jb=(t="")=>{if(!t||t==="-")return{hour:"00",minute:"00"};const[s="00",r="00"]=t.split(":");return{hour:s.padStart(2,"0"),minute:r.padStart(2,"0")}},$7=()=>String(Math.floor(Math.random()*60)).padStart(2,"0"),U7=({isOpen:t=!0,onClose:s,embedded:r=!1})=>{const[n,a]=x.useState(""),[l,i]=x.useState([]),[o,c]=x.useState(null),[d,m]=x.useState(Il()),[u,p]=x.useState(Il()),[g,j]=x.useState([]),[y,v]=x.useState(!1),[h,f]=x.useState(""),[N,b]=x.useState(!1),[w,D]=x.useState(null),[S,C]=x.useState(bb),[T,_]=x.useState(10),[E,A]=x.useState(Il()),[L,F]=x.useState("00"),[W,Y]=x.useState("00"),[q,J]=x.useState([]),[O,M]=x.useState({currentPage:1,totalPages:1,totalRecords:0}),k=r||t,I=x.useMemo(()=>Array.from({length:24},(V,re)=>String(re).padStart(2,"0")),[]),K=x.useMemo(()=>Array.from({length:60},(V,re)=>String(re).padStart(2,"0")),[]);x.useEffect(()=>{if(!n.trim()){i([]);return}const V=setTimeout(async()=>{try{const re=await oe.get("/print-dtr-modal/employees",{params:{search:n.trim()}});i(re.data.data||[])}catch(re){console.error("Error searching employees:",re)}},300);return()=>clearTimeout(V)},[n]),x.useEffect(()=>{(async()=>{var re;try{const ne=await oe.get("/machines"),xe=Array.isArray((re=ne.data)==null?void 0:re.data)?ne.data.data:Array.isArray(ne.data)?ne.data:[];J(xe)}catch(ne){console.error("Error fetching machines:",ne),J([])}})()},[]);const z=async(V=O.currentPage)=>{if(!o){j([]),M(re=>({...re,totalRecords:0,totalPages:1,currentPage:1}));return}if(!d||!u){f("Please provide both start and end dates.");return}v(!0),f("");try{const re=await oe.get("/print-dtr-modal/records",{params:{userId:o.USERID,dateFrom:d,dateTo:u,page:V,limit:T}});j(re.data.data||[]),M(re.data.pagination||{currentPage:1,totalPages:1,totalRecords:0})}catch(re){console.error("Error fetching records:",re),f("Failed to load records.")}finally{v(!1)}};x.useEffect(()=>{k&&z(1)},[o,d,u,T,k]);const P=V=>{c(V),a("")},R=V=>{D(V),C({USERID:V.USERID,CHECKTIME:V.CHECKTIME,CHECKTYPE:V.CHECKTYPE,VERIFYCODE:V.VERIFYCODE,SENSORID:V.SENSORID,WORKCODE:V.WORKCODE,SN:V.SN});const{datePart:re,timePart:ne}=ah(V.CHECKTIME),{hour:xe,minute:me}=jb(ne);A(re!=="-"?re:Il()),F(xe),Y(me),b(!0)},B=V=>{D(null);const{datePart:re,timePart:ne}=ah(V.CHECKTIME),{hour:xe,minute:me}=jb(ne);C({USERID:V.USERID,CHECKTYPE:V.CHECKTYPE||"I",VERIFYCODE:V.VERIFYCODE??1,SENSORID:V.SENSORID||"",WORKCODE:V.WORKCODE??0,SN:V.SN||"",CHECKTIME:re&&re!=="-"?`${re} `:""}),A(re&&re!=="-"?re:Il()),F(xe),Y(me),b(!0)},U=async V=>{if(window.confirm("Delete this record?"))try{await oe.delete(`/print-dtr-modal/records/${V.USERID}/${vb(V.CHECKTIME)}`),z()}catch(re){console.error("Error deleting record:",re),f("Failed to delete record.")}},G=async()=>{var me,Z;if(!S.USERID||!E){f("USERID and Date are required.");return}const V=$7(),re=`${L||"00"}:${W||"00"}:${V}`,ne=`${E} ${re}`,xe={USERID:Number(S.USERID),CHECKTIME:ne,CHECKTYPE:S.CHECKTYPE||"I",VERIFYCODE:Number(S.VERIFYCODE)||1,SENSORID:S.SENSORID||"",WORKCODE:Number(S.WORKCODE)||0,SN:S.SN||""};try{w?await oe.put(`/print-dtr-modal/records/${w.USERID}/${vb(w.CHECKTIME)}`,xe):await oe.post("/print-dtr-modal/records",xe),b(!1),D(null),C(bb),A(Il()),F("00"),Y("00"),z()}catch(ee){console.error("Error saving record:",ee),f(((Z=(me=ee.response)==null?void 0:me.data)==null?void 0:Z.message)||"Failed to save record.")}},$=V=>{C(re=>{const ne=q.find(xe=>String(xe.MachineNumber)===V);return{...re,SENSORID:V,SN:(ne==null?void 0:ne.sn)||re.SN}})},X=()=>{r||(c(null),j([]),a(""),b(!1),s==null||s())},Q=x.useMemo(()=>o?`${o.NAME||"Unknown"} (Badge: ${o.BADGENUMBER||"N/A"})`:"No employee selected",[o]);if(!k)return null;const Ne=e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"DTR RAW Records"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Search DTR RAW"})]}),!r&&e.jsx("button",{type:"button",onClick:X,className:"rounded-md border border-gray-300 px-3 py-1 text-sm font-semibold text-gray-700 hover:bg-gray-50",children:" Close"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Search Employee"}),e.jsx("input",{type:"text",value:n,onChange:V=>a(V.target.value),placeholder:"Type employee name",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"}),n&&l.length>0&&e.jsx("div",{className:"max-h-48 overflow-auto rounded-md border border-gray-200 bg-white shadow",children:l.map(V=>e.jsxs("button",{type:"button",onClick:()=>P(V),className:"flex w-full flex-col px-3 py-2 text-left hover:bg-blue-50",children:[e.jsx("span",{className:"font-medium text-gray-800",children:V.NAME||"Unnamed"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Badge: ",V.BADGENUMBER||"N/A","  USERID: ",V.USERID]})]},`${V.USERID}-${V.BADGENUMBER}`))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Selected Employee"}),e.jsx("div",{className:"rounded-md border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-700",children:Q})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date From"}),e.jsx("input",{type:"date",value:d,max:u,onChange:V=>m(V.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date To"}),e.jsx("input",{type:"date",value:u,min:d,onChange:V=>p(V.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Actions"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>z(1),className:"flex-1 rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700",children:"Apply Filter"}),e.jsx("select",{value:T,onChange:V=>{_(Number(V.target.value)),z(1)},className:"rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none",children:[10,30,50,100].map(V=>e.jsxs("option",{value:V,children:[V," / page"]},V))})]})]})]}),h&&e.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:h}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:["Date","Checktime","Checktype","Verifycode","Sensor ID","Workcode","SN","Actions"].map(V=>e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold uppercase tracking-wide text-gray-500",children:V},V))})}),e.jsxs("tbody",{className:"divide-y divide-gray-100 bg-white text-sm",children:[y&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-6 text-center text-gray-500",children:"Loading records..."})}),!y&&g.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-6 text-center text-gray-500",children:"No records found. Select an employee and adjust the date range."})}),!y&&g.map(V=>{const{datePart:re,timePart:ne}=ah(V.CHECKTIME);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:re||"-"}),e.jsx("td",{className:"px-4 py-2",children:ne||"-"}),e.jsx("td",{className:"px-4 py-2",children:V.CHECKTYPE||"-"}),e.jsx("td",{className:"px-4 py-2",children:V.VERIFYCODE??"-"}),e.jsx("td",{className:"px-4 py-2",children:V.SENSORID||"-"}),e.jsx("td",{className:"px-4 py-2",children:V.WORKCODE??"-"}),e.jsx("td",{className:"px-4 py-2",children:V.SN||"-"}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>B(V),className:"rounded-full border border-green-500 px-3 py-1 text-xs font-semibold text-green-600 hover:bg-green-50",title:"Create new record based on this row",children:""}),e.jsx("button",{type:"button",onClick:()=>R(V),className:"rounded-full border border-blue-500 px-3 py-1 text-xs font-semibold text-blue-600 hover:bg-blue-50",title:"Edit record",children:""}),e.jsx("button",{type:"button",onClick:()=>U(V),className:"rounded-full border border-red-500 px-3 py-1 text-xs font-semibold text-red-600 hover:bg-red-50",title:"Delete record",children:""})]})})]},`${V.USERID}-${V.CHECKTIME}`)})]})]})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 border-t pt-4 text-sm text-gray-600",children:[e.jsxs("div",{children:["Showing page ",O.currentPage," of ",O.totalPages,"  ",O.totalRecords," total records"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>z(1),disabled:O.currentPage===1,className:"rounded border border-gray-300 px-3 py-1 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50",children:" First"}),e.jsx("button",{type:"button",onClick:()=>z(Math.max(1,O.currentPage-1)),disabled:O.currentPage===1,className:"rounded border border-gray-300 px-3 py-1 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50",children:" Prev"}),e.jsx("button",{type:"button",onClick:()=>z(Math.min(O.totalPages,O.currentPage+1)),disabled:O.currentPage===O.totalPages,className:"rounded border border-gray-300 px-3 py-1 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50",children:"Next "}),e.jsx("button",{type:"button",onClick:()=>z(O.totalPages),disabled:O.currentPage===O.totalPages,className:"rounded border border-gray-300 px-3 py-1 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50",children:"Last "})]})]}),N&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"w-full max-w-2xl rounded-lg bg-white p-6 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between border-b pb-3",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:w?"Edit Record":"Create Record"}),e.jsx("button",{type:"button",onClick:()=>b(!1),className:"rounded-md border border-gray-300 px-3 py-1 text-sm font-semibold text-gray-700 hover:bg-gray-50",children:"Close"})]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"USERID"}),e.jsx("input",{type:"text",value:S.USERID,readOnly:!0,className:"mt-1 w-full rounded-md border border-gray-300 bg-gray-100 px-3 py-2 text-gray-600"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date"}),e.jsx("input",{type:"date",value:E,onChange:V=>A(V.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Hour (HH)"}),e.jsx("select",{value:L,onChange:V=>F(V.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200",children:I.map(V=>e.jsx("option",{value:V,children:V},V))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Minutes (MM)"}),e.jsx("select",{value:W,onChange:V=>Y(V.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200",children:K.map(V=>e.jsx("option",{value:V,children:V},V))})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Checktype"}),e.jsxs("select",{value:S.CHECKTYPE,onChange:V=>C(re=>({...re,CHECKTYPE:V.target.value})),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200",children:[e.jsx("option",{value:"I",children:"I (In)"}),e.jsx("option",{value:"O",children:"O (Out)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"VerifyCode"}),e.jsx("input",{type:"number",value:S.VERIFYCODE,onChange:V=>C(re=>({...re,VERIFYCODE:V.target.value})),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Workcode"}),e.jsx("input",{type:"number",value:S.WORKCODE,onChange:V=>C(re=>({...re,WORKCODE:V.target.value})),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Sensor ID"}),e.jsxs("select",{value:S.SENSORID||"",onChange:V=>$(V.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200",children:[e.jsx("option",{value:"",children:"Select Sensor"}),!q.some(V=>String(V.MachineNumber)===String(S.SENSORID))&&S.SENSORID&&e.jsx("option",{value:S.SENSORID,children:S.SENSORID}),q.map(V=>e.jsx("option",{value:V.MachineNumber,children:`${V.MachineAlias||"Machine"} (${V.MachineNumber})`},V.ID??V.MachineNumber))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"SN"}),e.jsx("input",{type:"text",value:S.SN||"",readOnly:!0,className:"mt-1 w-full rounded-md border border-gray-300 bg-gray-100 px-3 py-2 text-gray-600"})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"rounded-md border border-gray-300 px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"button",onClick:G,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700",children:"Save Record"})]})]})})]});return r?Ne:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:e.jsx("div",{className:"max-h-[90vh] w-full max-w-6xl overflow-y-auto rounded-lg bg-white p-6 shadow-2xl",children:Ne})})},H7=()=>{const{user:t}=Ts(),{canAccessPage:s,isRootAdmin:r}=Vs(),n=Number((t==null?void 0:t.USERID)??(t==null?void 0:t.id)),a=r||n===1,l=a||s("print-dtr-raw"),[i,o]=x.useState({base_path:"",photopath:"",signaturepath:"",thumbpath:"",educationpath:"",cscpath:"",workcertpath:"",certificatepath:"",leavepath:""}),[c,d]=x.useState({}),[m,u]=x.useState(!1),[p,g]=x.useState({type:"",text:""}),[j,y]=x.useState(a?"dtr":"media"),v=[{key:"photopath",label:"Photo Storage",description:"Employee photos"},{key:"signaturepath",label:"Signature Storage",description:"Employee signatures"},{key:"thumbpath",label:"Thumbmark Storage",description:"Employee thumbmarks"},{key:"educationpath",label:"Education Documents",description:"Educational certificates"},{key:"cscpath",label:"CSC Documents",description:"Civil Service certificates"},{key:"workcertpath",label:"Work Certificates",description:"Work experience certificates"},{key:"certificatepath",label:"General Certificates",description:"Other certificates"},{key:"leavepath",label:"Leave Documents",description:"Leave-related documents"}];x.useEffect(()=>{console.log("MediaStorage component mounted, fetching config..."),h()},[]),x.useEffect(()=>{!l&&j==="dtr"&&y("media")},[l,j]),x.useEffect(()=>{console.log("Config state updated:",i)},[i]);const h=async()=>{try{u(!0);const _=await oe.get("/media-storage");_.data.success&&o(_.data.data)}catch(_){console.error("Error fetching config:",_),g({type:"error",text:"Failed to load configuration"})}finally{u(!1)}},f=_=>{const E=document.createElement("input");E.type="file",E.webkitdirectory=!0,E.directory=!0,E.multiple=!0,E.onchange=A=>{if(A.target.files.length>0){const L=A.target.files[0];console.log("Selected file:",L),console.log("webkitRelativePath:",L.webkitRelativePath);let F="";if(L.path)F=L.path.substring(0,L.path.lastIndexOf("\\")||L.path.lastIndexOf("/"));else if(L.webkitRelativePath){const W=L.webkitRelativePath.split("/");W.length>1&&(F=W.slice(0,-1).join("/"))}if(!F&&L.webkitRelativePath){const W=L.webkitRelativePath.split("/");W.length>1&&(F=W.slice(0,-1).join("/"))}console.log("Extracted folder path:",F),F?N(_,F):(console.warn("Could not extract folder path from selected files"),g({type:"warning",text:"Could not extract folder path. Please enter the path manually in the text field."}))}},E.click()},N=(_,E)=>{console.log(`Updating ${_} to:`,E),o(A=>{const L={...A,[_]:E};return console.log("New config:",L),L}),d(A=>({...A,[_]:null}))},b=async(_,E)=>{if(!_){console.log("No path provided for validation");return}console.log(`Validating path: "${_}" for type: ${E}`),console.log(`Base path: "${i.base_path}"`);try{const A=await oe.post("/media-storage/validate",{path:_,type:E,basePath:i.base_path});if(console.log("Validation response:",A.data),A.data.success)return d(L=>({...L,[E]:A.data.valid})),A.data.valid?g({type:"success",text:A.data.message}):g({type:"error",text:A.data.message}),A.data.valid}catch(A){return console.error("Error validating path:",A),d(L=>({...L,[E]:!1})),g({type:"error",text:`Validation error: ${A.message}`}),!1}},w=async()=>{u(!0);const _={};for(const A of v)if(i[A.key]){const L=await b(i[A.key],A.key);_[A.key]=L}d(_),u(!1);const E=Object.values(_).every(A=>A!==!1);g({type:E?"success":"warning",text:E?"All paths are valid":"Some paths have issues"})},D=async()=>{try{u(!0),(await oe.put("/media-storage",i)).data.success&&g({type:"success",text:"Configuration saved successfully"})}catch(_){console.error("Error saving config:",_),g({type:"error",text:"Failed to save configuration"})}finally{u(!1)}},S=()=>{o({base_path:"",photopath:"",signaturepath:"",thumbpath:"",educationpath:"",cscpath:"",workcertpath:"",certificatepath:"",leavepath:""}),d({}),g({type:"info",text:"Configuration reset to default"})},C=_=>{const E=c[_];return E===!0?e.jsx("span",{className:"text-green-500",children:""}):E===!1?e.jsx("span",{className:"text-red-500",children:""}):null},T=()=>e.jsxs("div",{className:"p-6",children:[p.text&&e.jsx("div",{className:`mb-6 p-4 rounded-md ${p.type==="success"?"bg-green-50 text-green-800":p.type==="error"?"bg-red-50 text-red-800":p.type==="warning"?"bg-yellow-50 text-yellow-800":"bg-blue-50 text-blue-800"}`,children:p.text}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Base Storage Path"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:i.base_path,onChange:_=>N("base_path",_.target.value),placeholder:"Enter base storage path (e.g., C:\\HRIS\\backend\\uploads)",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),e.jsx("button",{onClick:()=>f("base_path"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:" Select Folder"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This will be used as the default base path for all media types if individual paths are not specified."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Individual Media Type Paths"}),v.map(_=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:_.label}),e.jsx("p",{className:"text-sm text-gray-500",children:_.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[C(_.key),e.jsx("button",{onClick:()=>b(i[_.key],_.key),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Validate"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:i[_.key],onChange:E=>N(_.key,E.target.value),placeholder:`Enter path for ${_.label.toLowerCase()}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),e.jsx("button",{onClick:()=>f(_.key),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:" Select Folder"})]})]},_.key))]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:w,disabled:m,className:"px-6 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 disabled:opacity-50",children:m?"Validating...":"Validate All Paths"}),e.jsx("button",{onClick:D,disabled:m,className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50",children:m?"Saving...":"Save Configuration"}),e.jsx("button",{onClick:S,disabled:m,className:"px-6 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50",children:"Reset to Default"})]})]});return e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"mx-auto max-w-6xl",children:e.jsxs("div",{className:"rounded-lg bg-white shadow-lg",children:[e.jsxs("div",{className:"border-b border-gray-200 px-6 py-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Media Storage & DTR RAW"}),e.jsx("p",{className:"mt-1 text-gray-600",children:"Configure media paths or manage raw DTR records captured from biometric devices."})]}),e.jsx("div",{className:"border-b border-gray-200 px-6 pt-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",className:`rounded-t-md px-4 py-2 text-sm font-semibold ${j==="media"?"bg-white text-blue-600 border border-b-white border-gray-200":"bg-gray-100 text-gray-600 hover:bg-gray-200 border border-transparent"}`,onClick:()=>y("media"),children:"Media Storage"}),l&&e.jsx("button",{type:"button",className:`rounded-t-md px-4 py-2 text-sm font-semibold ${j==="dtr"?"bg-white text-blue-600 border border-b-white border-gray-200":"bg-gray-100 text-gray-600 hover:bg-gray-200 border border-transparent"}`,onClick:()=>y("dtr"),children:"DTR RAW Storage"})]})}),e.jsx("div",{className:"px-6 pb-6",children:j==="media"||!l?T():e.jsx("div",{className:"pt-6",children:e.jsx(U7,{embedded:!0})})})]})})})},B7=()=>{var je,de,Fe;const{user:t}=Ts(),[s,r]=x.useState("users"),[n,a]=x.useState([]),[l,i]=x.useState(!1),[o,c]=x.useState(!1),[d,m]=x.useState(null),[u,p]=x.useState({username:"",password:"",usertype:"",emp_objid:"",status:1}),[g,j]=x.useState(null),[y,v]=x.useState(null),[h,f]=x.useState(!1),[N,b]=x.useState(null),[w,D]=x.useState(""),[S,C]=x.useState([]),[T,_]=x.useState([]),[E,A]=x.useState(""),[L,F]=x.useState(!1),[W,Y]=x.useState(!1),[q,J]=x.useState(""),[O,M]=x.useState([]),[k,I]=x.useState([]),[K,z]=x.useState(!1),[P,R]=x.useState({}),[B,U]=x.useState(new Set),[G,$]=x.useState(new Map),[X,Q]=x.useState(new Map),[Ne,V]=x.useState(!1),[re,ne]=x.useState(!1),[xe,me]=x.useState(null),[Z,ee]=x.useState(null),[ye,ve]=x.useState([]),[ue,we]=x.useState({canaccesspage:!1,canapprove:!1,canreturn:!1,cancancel:!1,canprint:!1,canread:!1,cancreate:!1,canupdate:!1,candelete:!1,cansoftdelete:!1}),[De,le]=x.useState([]),[Ie,ge]=x.useState(!1),[Ge,ke]=x.useState(!1),[Re,Ke]=x.useState(null),[Xe,Se]=x.useState({componentname:"",componentgroup:"",panelmenuname:"",desc:""}),[lt,it]=x.useState(new Set),[Pt,Nt]=x.useState(new Map),[At,Ce]=x.useState(new Map),[Ze,fe]=x.useState(!1),[Pe,Le]=x.useState(!1),[ut,Be]=x.useState(null),[mt,qe]=x.useState(null),[Oe,He]=x.useState({controlname:"",displayname:""}),[Kt,rs]=x.useState(""),[qt,zt]=x.useState("all"),[xs,ms]=x.useState([]),[Ut,$t]=x.useState(!1),[Qt,gs]=x.useState(!1),[Yt,os]=x.useState(null),[Zt,Jt]=x.useState({typename:""}),[es,be]=x.useState(""),[nt,tt]=x.useState("success");x.useEffect(()=>{kt(),_t(),gt(),Vt()},[]),x.useEffect(()=>{s==="roles"&&S.length>0&&S.some(pe=>!X.has(pe.id))&&cs(S)},[s,S.length]);const ft=async()=>{Y(!0);try{const se=await oe.get("/201-employees");se.data.success&&_(se.data.data||[])}catch(se){console.error("Error fetching employees:",se)}finally{Y(!1)}};x.useEffect(()=>{if(d&&d.emp_objid&&T.length>0){const se=T.find(pe=>pe.objid===d.emp_objid);se&&!E&&A(bs(se.surname,se.firstname,se.middlename))}},[T,d]);const kt=async()=>{i(!0);try{const se=await oe.get("/sys-users");se.data.success&&a(se.data.data||[])}catch(se){console.error("Error fetching sysusers:",se),ce("Failed to fetch system users","error")}finally{i(!1)}},_t=async()=>{try{const se=await oe.get("/user-types");se.data.success&&(C(se.data.data||[]),cs(se.data.data||[]))}catch(se){console.error("Error fetching user types:",se)}},cs=async se=>{if(!(!se||se.length===0))try{const pe=se.map(async ae=>{try{const Ae=await oe.get(`/sys-users/user-roles-by-type/${ae.id}`);if(Ae.data.success){const Je=Ae.data.data||[];return{usertypeid:ae.id,count:Je.length}}return{usertypeid:ae.id,count:0}}catch(Ae){return console.error(`Error fetching permission count for user type ${ae.id}:`,Ae),{usertypeid:ae.id,count:0}}}),H=await Promise.all(pe),ie=new Map;H.forEach(({usertypeid:ae,count:Ae})=>{ie.set(ae,Ae)}),Q(ie)}catch(pe){console.error("Error fetching permission counts:",pe)}},as=se=>{const{name:pe,value:H,type:ie,checked:ae}=se.target;p(Ae=>({...Ae,[pe]:ie==="checkbox"?ae:ie==="number"?parseInt(H):H}))},_e=se=>{const pe=se.target.files[0];if(pe){j(pe);const H=new FileReader;H.onloadend=()=>{v(H.result)},H.readAsDataURL(pe)}},We=(se=null)=>{if(ft(),se)if(m(se),p({username:se.username||"",password:"",usertype:se.usertype||"",emp_objid:se.emp_objid||"",status:se.status!==void 0?se.status:1}),v(se.photo||null),j(null),se.emp_objid){const pe=T.find(H=>H.objid===se.emp_objid);A(pe?bs(pe.surname,pe.firstname,pe.middlename):"")}else A("");else m(null),p({username:"",password:"",usertype:"",emp_objid:"",status:1}),v(null),j(null),A("");F(!1),c(!0)},ct=T.filter(se=>{const pe=bs(se.surname,se.firstname,se.middlename).toLowerCase(),H=E.toLowerCase();return pe.includes(H)||se.objid&&se.objid.toLowerCase().includes(H)}),Ye=x.useMemo(()=>{const se={};return O.forEach(pe=>{const H=pe.componentgroup||"Uncategorized";se[H]||(se[H]=[]),se[H].push(pe)}),se},[O]),te=async se=>{const pe=new Set(B);if(pe.has(se))pe.delete(se),U(pe);else if(pe.add(se),U(pe),!G.has(se)){V(!0);try{const H=await oe.get(`/sys-users/user-roles-by-type/${se}`);if(H.data.success){const ie=H.data.data||[];$(ae=>new Map(ae).set(se,ie)),Q(ae=>new Map(ae).set(se,ie.length))}}catch(H){console.error("Error fetching user roles by type:",H),ce("Failed to fetch user roles","error")}finally{V(!1)}}},Me=x.useMemo(()=>xs.filter(se=>se.id!==1),[xs]),rt=x.useMemo(()=>{if(!De||De.length===0)return[];const se=new Set;return De.forEach(pe=>{pe.componentgroup&&se.add(pe.componentgroup)}),Array.from(se).sort()},[De]),xt=x.useMemo(()=>!De||De.length===0?[]:De.filter(se=>{var ie,ae,Ae;const pe=Kt.trim()===""||((ie=se.componentname)==null?void 0:ie.toLowerCase().includes(Kt.toLowerCase()))||((ae=se.panelmenuname)==null?void 0:ae.toLowerCase().includes(Kt.toLowerCase()))||((Ae=se.desc)==null?void 0:Ae.toLowerCase().includes(Kt.toLowerCase())),H=qt==="all"||qt==="uncategorized"&&!se.componentgroup||se.componentgroup===qt;return pe&&H}),[De,Kt,qt]),Mt=(se,pe=null)=>{me(se),ee(pe),pe?(ve([pe.component_id||pe.component]),we({canaccesspage:pe.canaccesspage===1,canapprove:pe.canapprove===1,canreturn:pe.canreturn===1,cancancel:pe.cancancel===1,canprint:pe.canprint===1,canread:pe.canread===1,cancreate:pe.cancreate===1,canupdate:pe.canupdate===1,candelete:pe.candelete===1,cansoftdelete:pe.cansoftdelete===1})):(ve([]),we({canaccesspage:!1,canapprove:!1,canreturn:!1,cancancel:!1,canprint:!1,canread:!1,cancreate:!1,canupdate:!1,candelete:!1,cansoftdelete:!1})),ne(!0)},Ee=()=>{ne(!1),me(null),ee(null),ve([]),we({canaccesspage:!1,canapprove:!1,canreturn:!1,cancancel:!1,canprint:!1,canread:!1,cancreate:!1,canupdate:!1,candelete:!1,cansoftdelete:!1})},$e=se=>{ve(pe=>pe.includes(se)?pe.filter(H=>H!==se):[...pe,se])},et=async se=>{const pe=new Set(lt);if(pe.has(se))pe.delete(se),it(pe);else if(pe.add(se),it(pe),!Pt.has(se)){fe(!0);try{const H=await oe.get(`/sys-components/${se}/controls`);if(H.data.success){const ie=H.data.data||[];Nt(ae=>new Map(ae).set(se,ie)),Ce(ae=>new Map(ae).set(se,ie.length))}}catch(H){console.error("Error fetching component controls:",H),ce("Failed to fetch component controls","error")}finally{fe(!1)}}},Te=(se,pe=null)=>{Be(se),qe(pe),He(pe?{controlname:pe.controlname||"",displayname:pe.displayname||""}:{controlname:"",displayname:""}),Le(!0)},he=()=>{Le(!1),Be(null),qe(null),He({controlname:"",displayname:""})},Ue=async()=>{var se,pe;if(!Oe.controlname.trim()){ce("Control name is required","error");return}try{if(mt){if((await oe.put(`/sys-components-controls/${mt.controlid}`,{controlname:Oe.controlname.trim(),displayname:Oe.displayname.trim()||null})).data.success){ce("Control updated successfully"),he();const ie=await oe.get(`/sys-components/${ut.id}/controls`);if(ie.data.success){const ae=ie.data.data||[];Nt(Ae=>new Map(Ae).set(ut.id,ae)),Ce(Ae=>new Map(Ae).set(ut.id,ae.length))}}}else if((await oe.post("/sys-components-controls",{syscomponentid:ut.id,controlname:Oe.controlname.trim(),displayname:Oe.displayname.trim()||null})).data.success){ce("Control added successfully"),he();const ie=await oe.get(`/sys-components/${ut.id}/controls`);if(ie.data.success){const ae=ie.data.data||[];Nt(Ae=>new Map(Ae).set(ut.id,ae)),Ce(Ae=>new Map(Ae).set(ut.id,ae.length))}}}catch(H){console.error("Error saving control:",H),ce(((pe=(se=H.response)==null?void 0:se.data)==null?void 0:pe.message)||`Failed to ${mt?"update":"add"} control`,"error")}},ze=async(se,pe)=>{var H,ie;if(window.confirm(`Are you sure you want to delete the control "${pe.controlname}"?`))try{if((await oe.delete(`/sys-components-controls/${pe.controlid}`)).data.success){ce("Control deleted successfully");const Ae=await oe.get(`/sys-components/${se.id}/controls`);if(Ae.data.success){const Je=Ae.data.data||[];Nt(Qe=>new Map(Qe).set(se.id,Je)),Ce(Qe=>new Map(Qe).set(se.id,Je.length))}}}catch(ae){console.error("Error deleting control:",ae),ce(((ie=(H=ae.response)==null?void 0:H.data)==null?void 0:ie.message)||"Failed to delete control","error")}},ht=async()=>{var ie,ae,Ae,Je;if(Z){try{await oe.put(`/sys-users-roles/${Z.id}`,{canaccesspage:ue.canaccesspage?1:0,canapprove:ue.canapprove?1:0,canreturn:ue.canreturn?1:0,cancancel:ue.cancancel?1:0,canprint:ue.canprint?1:0,canread:ue.canread?1:0,cancreate:ue.cancreate?1:0,canupdate:ue.canupdate?1:0,candelete:ue.candelete?1:0,cansoftdelete:ue.cansoftdelete?1:0}),ce("Role updated successfully"),Ee();const Qe=await oe.get(`/sys-users/user-roles-by-type/${xe.id}`);if(Qe.data.success){const pt=Qe.data.data||[];$(jt=>new Map(jt).set(xe.id,pt)),Q(jt=>new Map(jt).set(xe.id,pt.length))}}catch(Qe){console.error("Error updating role:",Qe),ce(((ae=(ie=Qe.response)==null?void 0:ie.data)==null?void 0:ae.message)||"Failed to update role","error")}return}if(ye.length===0){ce("Please select at least one component","error");return}const pe=(G.get(xe.id)||[]).map(Qe=>Number(Qe.component_id||Qe.component)),H=ye.filter(Qe=>pe.includes(Number(Qe)));if(H.length>0){const Qe=De.filter(pt=>H.includes(Number(pt.id))).map(pt=>pt.componentname).join(", ");ce(`The following components are already assigned: ${Qe}`,"error");return}try{const Qe=ye.map(wt=>oe.post("/sys-users-roles/user-type",{sysroleid:xe.id,component:Number(wt),canaccesspage:ue.canaccesspage?1:0,canapprove:ue.canapprove?1:0,canreturn:ue.canreturn?1:0,cancancel:ue.cancancel?1:0,canprint:ue.canprint?1:0,canread:ue.canread?1:0,cancreate:ue.cancreate?1:0,canupdate:ue.canupdate?1:0,candelete:ue.candelete?1:0,cansoftdelete:ue.cansoftdelete?1:0})),jt=(await Promise.all(Qe)).filter(wt=>!wt.data.success);if(jt.length>0)ce(`Failed to add ${jt.length} role(s)`,"error");else{ce(`${ye.length} role(s) added successfully`),Ee();const wt=await oe.get(`/sys-users/user-roles-by-type/${xe.id}`);if(wt.data.success){const Ft=wt.data.data||[];$(ns=>new Map(ns).set(xe.id,Ft)),Q(ns=>new Map(ns).set(xe.id,Ft.length))}}}catch(Qe){console.error("Error adding roles:",Qe),ce(((Je=(Ae=Qe.response)==null?void 0:Ae.data)==null?void 0:Je.message)||"Failed to add roles","error")}},st=async(se,pe)=>{var H,ie;if(window.confirm(`Are you sure you want to delete the role for "${pe.componentname}"?`))try{await oe.delete(`/sys-users-roles?sysroleid=${se.id}&componentId=${pe.component_id||pe.component}`),ce("Role deleted successfully");const ae=await oe.get(`/sys-users/user-roles-by-type/${se.id}`);if(ae.data.success){const Ae=ae.data.data||[];$(Je=>new Map(Je).set(se.id,Ae)),Q(Je=>new Map(Je).set(se.id,Ae.length))}}catch(ae){console.error("Error deleting role:",ae),ce(((ie=(H=ae.response)==null?void 0:H.data)==null?void 0:ie.message)||"Failed to delete role","error")}},ot=async(se,pe,H,ie)=>{var ae,Ae;try{const Je={canaccesspage:pe.canaccesspage===1,canapprove:pe.canapprove===1,canreturn:pe.canreturn===1,cancancel:pe.cancancel===1,canprint:pe.canprint===1,canread:pe.canread===1,cancreate:pe.cancreate===1,canupdate:pe.canupdate===1,candelete:pe.candelete===1,cansoftdelete:pe.cansoftdelete===1};Je[H]=ie,await oe.put(`/sys-users-roles/${pe.id}`,{canaccesspage:Je.canaccesspage?1:0,canapprove:Je.canapprove?1:0,canreturn:Je.canreturn?1:0,cancancel:Je.cancancel?1:0,canprint:Je.canprint?1:0,canread:Je.canread?1:0,cancreate:Je.cancreate?1:0,canupdate:Je.canupdate?1:0,candelete:Je.candelete?1:0,cansoftdelete:Je.cansoftdelete?1:0});const Qe=(G.get(se.id)||[]).map(pt=>pt.id===pe.id?{...pt,[H]:ie?1:0}:pt);$(pt=>new Map(pt).set(se.id,Qe))}catch(Je){console.error("Error updating permission:",Je),ce(((Ae=(ae=Je.response)==null?void 0:ae.data)==null?void 0:Ae.message)||"Failed to update permission","error");const Qe=await oe.get(`/sys-users/user-roles-by-type/${se.id}`);if(Qe.data.success){const pt=Qe.data.data||[];$(jt=>new Map(jt).set(se.id,pt))}}};x.useEffect(()=>{if(O.length>0&&Object.keys(P).length===0){const se=Object.keys(Ye),pe={};se.forEach(H=>{pe[H]=!0}),R(pe)}},[O,Ye]);const vt=se=>{A(bs(se.surname,se.firstname,se.middlename)),p(pe=>({...pe,emp_objid:se.objid})),F(!1)},bt=async()=>{var se,pe;if(!u.username){ce("Username is required","error");return}if(!d&&!u.password){ce("Password is required for new users","error");return}try{const H=new FormData;H.append("username",u.username),u.password&&H.append("password",u.password),H.append("usertype",u.usertype||""),H.append("emp_objid",u.emp_objid||""),H.append("status",u.status),g&&H.append("photo",g),d?(await oe.put(`/sys-users/${d.id}`,H,{headers:{"Content-Type":"multipart/form-data"}}),ce("User updated successfully")):(await oe.post("/sys-users",H,{headers:{"Content-Type":"multipart/form-data"}}),ce("User created successfully")),c(!1),kt()}catch(H){console.error("Error saving user:",H),ce(((pe=(se=H.response)==null?void 0:se.data)==null?void 0:pe.message)||"Failed to save user","error")}},dt=async se=>{var pe,H;if(window.confirm("Are you sure you want to delete this user?"))try{await oe.delete(`/sys-users/${se}`),ce("User deleted successfully"),kt()}catch(ie){console.error("Error deleting user:",ie),ce(((H=(pe=ie.response)==null?void 0:pe.data)==null?void 0:H.message)||"Failed to delete user","error")}},It=se=>{b(se),D(""),f(!0)},Et=async()=>{var se,pe;if(!w||w.length<6){ce("Password must be at least 6 characters","error");return}try{await oe.post(`/sys-users/${N}/change-password`,{newPassword:w}),ce("Password changed successfully"),f(!1),D("")}catch(H){console.error("Error changing password:",H),ce(((pe=(se=H.response)==null?void 0:se.data)==null?void 0:pe.message)||"Failed to change password","error")}},gt=async()=>{ge(!0);try{const se=await oe.get("/sys-components");se.data.success&&le(se.data.data||[])}catch(se){console.error("Error fetching components:",se)}finally{ge(!1)}},Xt=async se=>{if(!se){I([]);return}z(!0);try{const pe=await oe.get(`/sys-users-roles/user/${se}`);if(pe.data.success){const H=pe.data.data||[],ie=n.find(ae=>ae.id===parseInt(se));if(H.length>0)I(H);else if(ie&&ie.typename==="Administrator"&&O.length>0){const ae=O.map(Ae=>({component:Ae.id,componentname:Ae.componentname,canaccesspage:1,canread:1,cancreate:1,canupdate:1,candelete:1}));I(ae)}else I([])}}catch(pe){console.error("Error fetching user permissions:",pe)}finally{z(!1)}};x.useEffect(()=>{q?Xt(q):I([])},[q,O.length,n.length]);const Vt=async()=>{$t(!0);try{const se=await oe.get("/user-types");se.data.success&&ms(se.data.data||[])}catch(se){console.error("Error fetching user types:",se)}finally{$t(!1)}},ts=(se=null)=>{se?(Ke(se),Se({componentname:se.componentname||"",componentgroup:se.componentgroup||"",panelmenuname:se.panelmenuname||"",desc:se.desc||""})):(Ke(null),Se({componentname:"",componentgroup:"",panelmenuname:"",desc:""})),ke(!0)},ps=async()=>{var se,pe;if(!Xe.componentname.trim()){ce("Component name is required","error");return}try{Re?(await oe.put(`/sys-components/${Re.id}`,Xe),ce("Component updated successfully")):(await oe.post("/sys-components",Xe),ce("Component created successfully")),ke(!1),gt()}catch(H){console.error("Error saving component:",H),ce(((pe=(se=H.response)==null?void 0:se.data)==null?void 0:pe.message)||"Failed to save component","error")}},ys=async se=>{var pe,H;if(window.confirm("Are you sure you want to delete this component?"))try{await oe.delete(`/sys-components/${se}`),ce("Component deleted successfully"),gt()}catch(ie){console.error("Error deleting component:",ie),ce(((H=(pe=ie.response)==null?void 0:pe.data)==null?void 0:H.message)||"Failed to delete component","error")}},js=(se=null)=>{se?(os(se),Jt({typename:se.typename||""})):(os(null),Jt({typename:""})),gs(!0)},Fr=async()=>{var se,pe;if(!Zt.typename.trim()){ce("Type name is required","error");return}try{Yt?(await oe.put(`/user-types/${Yt.id}`,Zt),ce("User type updated successfully")):(await oe.post("/user-types",Zt),ce("User type created successfully")),gs(!1),Vt(),_t()}catch(H){console.error("Error saving user type:",H),ce(((pe=(se=H.response)==null?void 0:se.data)==null?void 0:pe.message)||"Failed to save user type","error")}},Fs=async se=>{var pe,H;if(window.confirm("Are you sure you want to delete this user type?"))try{await oe.delete(`/user-types/${se}`),ce("User type deleted successfully"),Vt(),_t()}catch(ie){console.error("Error deleting user type:",ie),ce(((H=(pe=ie.response)==null?void 0:pe.data)==null?void 0:H.message)||"Failed to delete user type","error")}},ce=(se,pe="success")=>{be(se),tt(pe),setTimeout(()=>be(""),3e3)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"System Users Management"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage system users, roles, and permissions"})]}),es&&e.jsx("div",{className:`mb-4 p-3 rounded-md ${nt==="error"?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:es}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>r("users"),className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="users"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"System Users"}),e.jsx("button",{onClick:()=>r("roles"),className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="roles"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"User Permission"}),e.jsx("button",{onClick:()=>r("usertypes"),className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="usertypes"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"User Types"}),e.jsx("button",{onClick:()=>r("parameters"),className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="parameters"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Menu Components"})]})}),s==="users"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"System Users"}),e.jsx("button",{onClick:()=>We(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add User"})]}),l?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Photo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Username"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"No users found"})}):n.map(se=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"h-10 w-10 rounded-full overflow-hidden bg-gray-200",children:se.photo?e.jsx("img",{src:se.photo,alt:se.username,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-400 text-xs",children:se.username.charAt(0).toUpperCase()})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:se.username}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:se.typename||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:se.surname&&se.firstname?bs(se.surname,se.firstname,se.middlename):"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${se.status===1?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:se.status===1?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>We(se),className:"text-blue-600 hover:text-blue-900 mr-3",title:"Edit",children:""}),e.jsx("button",{onClick:()=>It(se.id),className:"text-yellow-600 hover:text-yellow-900 mr-3",title:"Change Password",children:""}),e.jsx("button",{onClick:()=>dt(se.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:""})]})]},se.id))})]})})})]}),s==="roles"&&e.jsx("div",{children:Ut?e.jsx("div",{className:"text-center py-8",children:"Loading user types..."}):e.jsx("div",{className:"space-y-4",children:Me.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center text-gray-500",children:"No user types found"}):Me.map(se=>e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>te(se.id),className:"inline-flex items-center justify-center w-6 h-6 border rounded-full text-sm text-gray-600 hover:bg-gray-100","aria-label":B.has(se.id)?"Collapse details":"Expand details",children:B.has(se.id)?"-":"+"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:se.typename}),e.jsxs("div",{className:"text-xs text-gray-500",children:[X.get(se.id)||0," permission",(X.get(se.id)||0)!==1?"s":""]})]})]}),e.jsx("button",{onClick:()=>Mt(se),className:"px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Add Permission"})]}),B.has(se.id)&&e.jsx("div",{className:"overflow-x-auto",children:Ne?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading roles..."}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Component Name"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Menu Panel"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Approve"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Return"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Cancel"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Print"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Read"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Create"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Update"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Delete"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Soft Delete"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 text-sm",children:(G.get(se.id)||[]).length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"12",className:"px-4 py-8 text-center text-gray-500",children:"No roles found"})}):(G.get(se.id)||[]).map(pe=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:pe.panelmenuname||"Untitled Panel"}),e.jsx("div",{className:"text-xs text-gray-500",children:(pe.componentgroup||"")+"  "+(pe.componentname||"")})]})}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:pe.canaccesspage===1,onChange:H=>ot(se,pe,"canaccesspage",H.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:pe.canapprove===1,onChange:H=>ot(se,pe,"canapprove",H.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:pe.canreturn===1,onChange:H=>ot(se,pe,"canreturn",H.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:pe.cancancel===1,onChange:H=>ot(se,pe,"cancancel",H.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:pe.canprint===1,onChange:H=>ot(se,pe,"canprint",H.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:pe.canread===1,onChange:H=>ot(se,pe,"canread",H.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:pe.cancreate===1,onChange:H=>ot(se,pe,"cancreate",H.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:pe.canupdate===1,onChange:H=>ot(se,pe,"canupdate",H.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})}),e.jsx("td",{className:"px-4 py-2 text-center",children:pe.candelete===1?"":""}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:pe.cansoftdelete===1,onChange:H=>ot(se,pe,"cansoftdelete",H.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("button",{onClick:()=>Mt(se,pe),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit Role",children:""}),e.jsx("button",{onClick:()=>st(se,pe),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete Role",children:""})]})})]},pe.id))})]})})]},se.id))})}),s==="usertypes"&&e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"User Types"}),e.jsx("button",{onClick:()=>js(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add User Type"})]}),Ut?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Me.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"px-6 py-8 text-center text-gray-500",children:"No user types found"})}):Me.map(se=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:se.id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:se.typename}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>js(se),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit User Type",children:""}),e.jsx("button",{onClick:()=>Fs(se.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete User Type",children:""})]})})]},se.id))})]})})})]})}),s==="parameters"&&e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"System Components"}),e.jsx("button",{onClick:()=>ts(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add Component"})]}),e.jsxs("div",{className:"mb-4 bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Search components...",value:Kt,onChange:se=>rs(se.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("div",{children:e.jsxs("select",{value:qt,onChange:se=>zt(se.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Groups"}),e.jsx("option",{value:"uncategorized",children:"Uncategorized"}),rt.map(se=>e.jsx("option",{value:se,children:se},se))]})})]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:["Showing ",xt.length," of ",De.length," components"]})]}),Ie?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):e.jsx("div",{className:"space-y-4",children:xt.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center text-gray-500",children:De.length===0?"No components found":"No components match your filters"}):xt.map(se=>e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>et(se.id),className:"inline-flex items-center justify-center w-6 h-6 border rounded-full text-sm text-gray-600 hover:bg-gray-100","aria-label":lt.has(se.id)?"Collapse details":"Expand details",children:lt.has(se.id)?"-":"+"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:se.componentname}),e.jsxs("div",{className:"text-xs text-gray-500",children:[se.componentgroup||"Uncategorized","  ",At.get(se.id)||0," control",(At.get(se.id)||0)!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Te(se),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Add Control"}),e.jsx("button",{onClick:()=>ts(se),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit Component",children:""}),e.jsx("button",{onClick:()=>ys(se.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete Component",children:""})]})]}),lt.has(se.id)&&e.jsx("div",{className:"overflow-x-auto",children:Ze?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading controls..."}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Control ID"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Control Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Display Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 text-sm",children:(Pt.get(se.id)||[]).length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-4 py-8 text-center text-gray-500",children:"No controls found"})}):(Pt.get(se.id)||[]).map(pe=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:pe.controlid||""}),e.jsx("td",{className:"px-4 py-2",children:pe.controlname||""}),e.jsx("td",{className:"px-4 py-2",children:pe.displayname||""}),e.jsxs("td",{className:"px-4 py-2 whitespace-nowrap",children:[e.jsx("button",{onClick:()=>Te(se,pe),className:"text-blue-600 hover:text-blue-800 transition-colors mr-2",title:"Edit Control",children:""}),e.jsx("button",{onClick:()=>ze(se,pe),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete Control",children:""})]})]},pe.controlid))})]})})]},se.id))})]})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:se=>{se.target===se.currentTarget&&F(!1)},children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:d?"Edit User":"Add User"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:E,onChange:se=>{A(se.target.value),F(!0),se.target.value||p(pe=>({...pe,emp_objid:""}))},onFocus:()=>F(!0),placeholder:"Search employee by name...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),L&&E&&ct.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:ct.slice(0,20).map(se=>{var pe,H;return e.jsxs("div",{onClick:()=>vt(se),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200 last:border-b-0 flex items-center space-x-3",children:[se.photo_path?e.jsx("img",{src:se.photo_path,alt:se.surname,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-sm text-gray-600",children:(((pe=se.surname)==null?void 0:pe.charAt(0))||"")+(((H=se.firstname)==null?void 0:H.charAt(0))||"")}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:bs(se.surname,se.firstname,se.middlename)}),se.dtruserid&&e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",se.dtruserid]})]})]},se.objid)})})]}),u.emp_objid&&e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Selected: ",E]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username *"}),e.jsx("input",{type:"text",name:"username",value:u.username,onChange:as,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",d?"":"*"]}),e.jsx("input",{type:"password",name:"password",value:u.password,onChange:as,placeholder:d?"Leave blank to keep current password":"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Type"}),e.jsxs("select",{name:"usertype",value:u.usertype,onChange:as,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"-- Select --"}),S.map(se=>e.jsx("option",{value:se.id,children:se.typename},se.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:u.status,onChange:as,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:1,children:"Active"}),e.jsx("option",{value:0,children:"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:_e,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),y&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:y,alt:"Preview",className:"h-20 w-20 rounded-full object-cover"})})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{c(!1),F(!1)},className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>{F(!1),bt()},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save"})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Change Password"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password *"}),e.jsx("input",{type:"password",value:w,onChange:se=>D(se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:Et,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Change Password"})]})]})}),Ge&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:Re?"Edit Component":"Add Component"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Component Name *"}),e.jsx("input",{type:"text",value:Xe.componentname,onChange:se=>Se({...Xe,componentname:se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Component Group"}),e.jsxs("select",{value:Xe.componentgroup,onChange:se=>Se({...Xe,componentgroup:se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"-- Select Component Group --"}),e.jsx("option",{value:"DTR",children:"DTR"}),e.jsx("option",{value:"201 Files",children:"201 Files"}),e.jsx("option",{value:"Payroll",children:"Payroll"}),e.jsx("option",{value:"Reports",children:"Reports"}),e.jsx("option",{value:"System Setup",children:"System Setup"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Panel Menu Name"}),e.jsx("input",{type:"text",value:Xe.panelmenuname,onChange:se=>Se({...Xe,panelmenuname:se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:Xe.desc,onChange:se=>Se({...Xe,desc:se.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>ke(!1),className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ps,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save"})]})]})}),Qt&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:Yt?"Edit User Type":"Add User Type"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type Name *"}),e.jsx("input",{type:"text",value:Zt.typename,onChange:se=>Jt({typename:se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>gs(!1),className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:Fr,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save"})]})]})}),re&&xe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:[Z?"Edit Role":"Add Role"," for ",xe.typename]}),e.jsxs("div",{className:"space-y-4",children:[!Z&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Components *"}),e.jsxs("div",{className:"border border-gray-300 rounded-md p-4 max-h-64 overflow-y-auto bg-gray-50",children:[(()=>{const pe=(G.get(xe.id)||[]).map(ie=>Number(ie.component_id||ie.component)),H=De.reduce((ie,ae)=>{const Ae=ae.componentgroup||"Uncategorized";return ie[Ae]||(ie[Ae]=[]),ie[Ae].push(ae),ie},{});return Object.keys(H).sort().map(ie=>e.jsxs("div",{className:"mb-4 last:mb-0",children:[e.jsx("div",{className:"font-semibold text-sm text-gray-700 mb-2 border-b border-gray-300 pb-1",children:ie}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:H[ie].map(ae=>{const Ae=Number(ae.id),Je=pe.includes(Ae);return e.jsxs("label",{className:`flex items-start space-x-2 p-2 rounded hover:bg-gray-100 ${Je?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[e.jsx("input",{type:"checkbox",checked:ye.includes(Ae),onChange:()=>!Je&&$e(Ae),disabled:Je,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[ae.componentname,Je&&e.jsx("span",{className:"ml-2 text-xs text-gray-500 italic",children:"(already assigned)"})]}),ae.panelmenuname&&e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:ae.panelmenuname})]})]},ae.id)})})]},ie))})(),De.length===0&&e.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No components available"})]}),ye.length>0&&e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[ye.length," component(s) selected"]})]}),Z&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Component"}),e.jsxs("div",{className:"px-3 py-2 border border-gray-300 rounded-md bg-gray-50",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:((je=De.find(se=>Number(se.id)===Number(Z.component_id||Z.component)))==null?void 0:je.componentname)||""}),((de=De.find(se=>Number(se.id)===Number(Z.component_id||Z.component)))==null?void 0:de.panelmenuname)&&e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:(Fe=De.find(se=>Number(se.id)===Number(Z.component_id||Z.component)))==null?void 0:Fe.panelmenuname})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Can Access this Page"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:ue.canaccesspage,onChange:se=>we({...ue,canaccesspage:se.target.checked})}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Approver"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:ue.canapprove,onChange:se=>we({...ue,canapprove:se.target.checked})}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Return"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:ue.canreturn,onChange:se=>we({...ue,canreturn:se.target.checked})}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Cancel"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:ue.cancancel,onChange:se=>we({...ue,cancancel:se.target.checked})}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Can Print"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:ue.canprint,onChange:se=>we({...ue,canprint:se.target.checked})}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Create/Add"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:ue.cancreate,onChange:se=>we({...ue,cancreate:se.target.checked})}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Read/View"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:ue.canread,onChange:se=>we({...ue,canread:se.target.checked})}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Can Edit/Update"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:ue.canupdate,onChange:se=>we({...ue,canupdate:se.target.checked})}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Can Record Delete"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:ue.cansoftdelete,onChange:se=>we({...ue,cansoftdelete:se.target.checked})}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})]}),(t==null?void 0:t.usertype)===1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Can Delete"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:ue.candelete,onChange:se=>we({...ue,candelete:se.target.checked})}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-500 transition-colors peer-checked:bg-blue-500"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform peer-checked:translate-x-5"})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:Ee,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ht,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:Z?"Update":"Save"})]})]})}),Pe&&ut&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:[mt?"Edit Control":"Add Control"," for ",ut.componentname]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Control Name *"}),e.jsx("input",{type:"text",value:Oe.controlname,onChange:se=>He({...Oe,controlname:se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., transactions, used"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name"}),e.jsx("input",{type:"text",value:Oe.displayname,onChange:se=>He({...Oe,displayname:se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Credit Transactions, Used Credits"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:he,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:Ue,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:mt?"Update":"Save"})]})]})})]})},z7=()=>{const{user:t,logout:s}=Ts(),r=ia(),{can:n,canAccessPage:a,hasComponentGroupAccess:l}=Vs(),[i,o]=x.useState("dtr"),[c,d]=x.useState("dashboard"),[m,u]=x.useState(""),[p,g]=x.useState(!0),[j,y]=x.useState(!1),[v,h]=x.useState(!1),[f,N]=x.useState(!1),[b,w]=x.useState(!1),[D,S]=x.useState(!1),[C,T]=x.useState(!1),[_,E]=x.useState(!1),[A,L]=x.useState(!1),[F,W]=x.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[Y,q]=x.useState(!1),[J,O]=x.useState(""),[M,k]=x.useState(!1),[I,K]=x.useState(null),[z,P]=x.useState(null),[R,B]=x.useState(!1),[U,G]=x.useState(""),[$,X]=x.useState(!1),Q=async()=>{var le,Ie,ge,Ge;try{X(!0);const ke=await oe.post("/auth/admin/portal-session");if(!((le=ke.data)!=null&&le.token)||!((Ie=ke.data)!=null&&Ie.user))throw new Error("Portal session data is incomplete.");const Re={...ke.data.user};Re.USERID!==void 0&&Re.id===void 0&&(Re.id=Re.USERID),localStorage.setItem("authToken",ke.data.token),localStorage.setItem("authUser",JSON.stringify(Re)),oe.defaults.headers.common.Authorization=`Bearer ${ke.data.token}`,window.dispatchEvent(new Event("authUpdate")),E(!1),r("/dtr-checker")}catch(ke){console.error("Unable to open My DTR via portal session:",ke);const Re=((Ge=(ge=ke.response)==null?void 0:ge.data)==null?void 0:Ge.message)||"Unable to open My DTR. Please ensure this admin has a linked portal account.";alert(Re)}finally{X(!1)}};x.useEffect(()=>{try{const le=JSON.parse(localStorage.getItem("hrisNavState")||"{}");le.activeModule&&o(le.activeModule),le.activeTab&&d(le.activeTab),typeof le.activeSubTab=="string"&&u(le.activeSubTab==="employee-locator"?"employee-management":le.activeSubTab),typeof le.sidebarOpen=="boolean"&&g(le.sidebarOpen),typeof le.dtrMenuExpanded=="boolean"&&y(le.dtrMenuExpanded),typeof le.files201Expanded=="boolean"&&h(le.files201Expanded),typeof le.payrollExpanded=="boolean"&&N(le.payrollExpanded),typeof le.reportsExpanded=="boolean"&&w(le.reportsExpanded),typeof le.dtrReportsExpanded=="boolean"&&S(le.dtrReportsExpanded),typeof le.systemExpanded=="boolean"&&T(le.systemExpanded)}catch{}},[]),x.useEffect(()=>{const le={activeModule:i,activeTab:c,activeSubTab:m,sidebarOpen:p,dtrMenuExpanded:j,files201Expanded:v,payrollExpanded:f,reportsExpanded:b,dtrReportsExpanded:D,systemExpanded:C};try{localStorage.setItem("hrisNavState",JSON.stringify(le))}catch{}},[i,c,m,p,j,v,f,b,D,C]);const[Ne,V]=x.useState({lguDtrName:"HRIS Management System",lguName:"Organization Name",lguType:"Management Portal",logoPreview:null}),[re,ne]=x.useState({totalEmployees:0,activeEmployees:0,totalDepartments:0,todayTimeLogs:0,activeLocators:0,inactiveEmployees:0,presentToday:0,absentToday:0,lateToday:0,onTravel:0,onLocator:0}),xe=async()=>{try{const le=await oe.get("/company/info");le.data.success&&V(le.data.data)}catch(le){console.error("Error fetching company info:",le)}},me=async()=>{try{const le=await oe.get("/management/dashboard");ne(le.data)}catch(le){console.error("Error fetching dashboard data:",le)}};x.useEffect(()=>{xe(),me()},[]);const Z=le=>{o(le),d(`${le}-dashboard`),u(""),y(le==="dtr"),h(le==="201"),N(le==="payroll"),w(le==="reports"),T(!1)},ee=(le,Ie=!1)=>{if(le==="dtr-menu"){o("dtr"),d("dtr-menu"),y(!j);return}if(d(le),!Ie)u("");else if(le==="DTR-Reports"){S(!D);return}le==="system-setup"&&T(!C)},ye=x.useCallback(le=>{o("dtr"),d("dtr-menu"),u(le),y(!0)},[]),ve=le=>{const Ie=le.target.files[0];if(Ie){if(!Ie.type.startsWith("image/")){G("Please select an image file");return}if(Ie.size>5*1024*1024){G("File size must be less than 5MB");return}P(Ie),G("");const ge=new FileReader;ge.onloadend=()=>{K(ge.result)},ge.readAsDataURL(Ie)}},ue=async()=>{var le,Ie;if(!z){G("Please select a photo");return}try{B(!0),G("");const ge=new FormData;ge.append("photo",z);const Ge=await oe.post("/auth/upload-photo",ge,{headers:{"Content-Type":"multipart/form-data"}});if(Ge.data.success){const ke={...t,PHOTO:Ge.data.photo};localStorage.setItem("authUser",JSON.stringify(ke)),window.dispatchEvent(new Event("authUpdate")),k(!1),K(null),P(null),E(!1),alert("Photo uploaded successfully!")}else G(Ge.data.message||"Failed to upload photo")}catch(ge){console.error("Error uploading photo:",ge),G(((Ie=(le=ge.response)==null?void 0:le.data)==null?void 0:Ie.message)||"Failed to upload photo")}finally{B(!1)}},we=async()=>{var le,Ie;if(!F.currentPassword||!F.newPassword||!F.confirmPassword){O("All fields are required");return}if(F.newPassword!==F.confirmPassword){O("New passwords do not match");return}if(F.newPassword.length<6){O("New password must be at least 6 characters long");return}try{q(!0),O("");const ge=await oe.post("/auth/change-password",{currentPassword:F.currentPassword,newPassword:F.newPassword});ge.data.success?(W({currentPassword:"",newPassword:"",confirmPassword:""}),L(!1),E(!1),alert("Password changed successfully!")):O(ge.data.message||"Failed to change password")}catch(ge){console.error("Error changing password:",ge),O(((Ie=(le=ge.response)==null?void 0:le.data)==null?void 0:Ie.message)||"Failed to change password")}finally{q(!1)}};x.useEffect(()=>{const le=Ie=>{_&&!Ie.target.closest(".user-dropdown")&&E(!1)};return document.addEventListener("mousedown",le),()=>{document.removeEventListener("mousedown",le)}},[_]);const De=()=>{const le=c==="DTR-Reports"?m||"DTR-Reports":m||c;if(le==="manage-checktime")return e.jsx(MF,{});if(le==="compute-attendance")return e.jsx(sw,{});if(le==="dtr-shifts"||le==="dtr-assign-shift"){const Ie=a("dtr-shifts"),ge=a("dtr-assign-shift");return e.jsx(r7,{canViewShifts:Ie,canAssignShift:ge,initialTab:le==="dtr-assign-shift"?"assign":"shifts"})}if(le==="dtr-holidays")return e.jsx(o7,{});if(le==="dtr-checker-kiosk")return e.jsx(qF,{});if(le==="generate-dtr"||c==="DTR-Reports"&&m==="generate-dtr")return e.jsx(WF,{});if(le==="compute-attendance-report"||le==="computed-attendances"||c==="DTR-Reports"&&(m==="compute-attendance-report"||m==="computed-attendances"))return e.jsx(YF,{});if(le==="print-locator-entries")return e.jsx(KF,{});if(le==="dtr-cdo")return e.jsx(u7,{});if(le==="portal-users")return e.jsx(XF,{});if(le==="enroll-bio")return e.jsx(t7,{});if(le==="print-employee-list")return e.jsx(e7,{});if(le==="201-dashboard")return e.jsx(Y7,{});if(le==="201-employees"||le==="201-pds"||le==="201-designation"){const Ie=n("201-employees-with-pds","read")||n("201-employees","read"),ge=n("201-pds","read"),Ge=n("201-designation","read"),ke={"201-employees":"employees","201-pds":"pds","201-designation":"designation"};return e.jsx(v7,{initialTab:ke[le]||"employees",canViewEmployees:Ie,canViewPds:ge,canViewDesignation:Ge})}return le==="201-leave"?e.jsx(S7,{}):le==="201-locator"?e.jsx(k7,{}):le==="201-travel"?e.jsx(b8,{}):le==="payroll-dashboard"?e.jsx(C7,{}):le==="payroll-processing"?e.jsx(A7,{}):le==="payroll-reports"?e.jsx(D7,{}):le==="company-info"?e.jsx(T7,{}):le==="departments"?e.jsx(M7,{}):le==="machine-management"?e.jsx(I7,{}):le==="upload-employee"?e.jsx(L7,{}):le==="download-employee"?e.jsx(P7,{}):le==="db-connection"?e.jsx(R7,{}):le==="db-201files"?e.jsx(O7,{}):le==="db-payroll"?e.jsx(F7,{}):le==="media-storage"?e.jsx(H7,{}):le==="sys-users"?e.jsx(B7,{}):e.jsx(W7,{stats:re,activeModule:i})};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-80 bg-gradient-to-b from-slate-50 to-white shadow-2xl transform transition-transform duration-300 ease-in-out ${p?"translate-x-0":"-translate-x-full"}`,children:[e.jsxs("div",{className:"relative h-20 px-6 bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 text-white overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-10"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white bg-opacity-5 rounded-full -translate-y-16 translate-x-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white bg-opacity-5 rounded-full translate-y-12 -translate-x-12"}),e.jsxs("div",{className:"relative flex items-center justify-between h-full",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center",children:Ne.logoPreview?e.jsx("img",{src:Ne.logoPreview,alt:"Company Logo",className:"w-8 h-8 object-contain",onError:le=>{le.target.style.display="none"}}):e.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold tracking-tight",children:Ne.lguDtrName}),e.jsx("p",{className:"text-sm text-indigo-100 font-medium",children:Ne.lguName})]})]}),e.jsx("button",{onClick:()=>g(!1),className:"p-2 rounded-xl hover:bg-white hover:bg-opacity-20 transition-all duration-200 backdrop-blur-sm",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsxs("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",style:{maxHeight:"calc(100vh - 200px)"},children:[l("DTR")&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>ee("dtr-menu",!0),className:`w-full flex items-center px-3 py-3 text-sm font-bold rounded-lg transition-all duration-200 ${c==="dtr-menu"?"bg-blue-100 text-blue-700 shadow-sm":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"text-xl mr-3",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"DTR"}),e.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${j?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),j&&e.jsxs("div",{className:"ml-6 mt-1 space-y-1",children:[a("portal-users")&&e.jsxs("button",{onClick:()=>ye("portal-users"),className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${m==="portal-users"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Portal Users"})]}),a("manage-checktime")&&e.jsxs("button",{onClick:()=>ye("manage-checktime"),className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${m==="manage-checktime"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Manage Checktime"})]}),a("dtr-cdo")&&e.jsxs("button",{onClick:()=>ye("dtr-cdo"),className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${m==="dtr-cdo"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"CDO"})]}),a("201-locator")&&e.jsxs("button",{onClick:()=>ye("201-locator"),className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${m==="201-locator"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Locator"})]}),a("dtr-holidays")&&e.jsxs("button",{onClick:()=>ye("dtr-holidays"),className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${m==="dtr-holidays"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Holiday"})]}),(a("dtr-shifts")||a("dtr-assign-shift"))&&e.jsxs("button",{onClick:()=>ye("dtr-shifts"),className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${m==="dtr-shifts"||m==="dtr-assign-shift"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Shifts"})]}),a("departments")&&e.jsxs("button",{onClick:()=>ye("departments"),className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${m==="departments"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Departments"})]})]})]}),l("201 Files")&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>Z("201"),className:`w-full flex items-center px-3 py-3 text-sm font-bold rounded-lg transition-all duration-200 ${i==="201"?"bg-green-100 text-green-700 shadow-sm":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"text-xl mr-3",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"201 Files"}),e.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${v?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),v&&e.jsxs("div",{className:"ml-6 mt-1 space-y-1",children:[a("201-dashboard")&&e.jsxs("button",{onClick:()=>{d("201-dashboard"),u("")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${c==="201-dashboard"?"bg-green-50 text-green-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Dashboard"})]}),a("201-employees")&&e.jsxs("button",{onClick:()=>{d("201-employees"),u("")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${c==="201-employees"?"bg-green-50 text-green-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Employees"})]}),a("201-leave")&&e.jsxs("button",{onClick:()=>{d("201-leave"),u("")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${c==="201-leave"?"bg-green-50 text-green-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Manage Leaves"})]}),a("201-travel")&&e.jsxs("button",{onClick:()=>{d("201-travel"),u("")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${c==="201-travel"?"bg-green-50 text-green-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Travel"})]})]})]}),l("Payroll")&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>Z("payroll"),className:`w-full flex items-center px-3 py-3 text-sm font-bold rounded-lg transition-all duration-200 ${i==="payroll"?"bg-purple-100 text-purple-700 shadow-sm":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"text-xl mr-3 font-bold",style:{color:"#1e40af"},children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Payroll"}),e.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${f?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),f&&e.jsxs("div",{className:"ml-6 mt-1 space-y-1",children:[a("payroll-dashboard")&&e.jsxs("button",{onClick:()=>{d("payroll-dashboard"),u("")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${c==="payroll-dashboard"?"bg-purple-50 text-purple-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Dashboard"})]}),a("payroll-processing")&&e.jsxs("button",{onClick:()=>{d("payroll-processing"),u("")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${c==="payroll-processing"?"bg-purple-50 text-purple-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Payroll Processing"})]}),a("payroll-reports")&&e.jsxs("button",{onClick:()=>{d("payroll-reports"),u("")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${c==="payroll-reports"?"bg-purple-50 text-purple-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Reports"})]})]})]}),l("Reports")&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>Z("reports"),className:`w-full flex items-center px-3 py-3 text-sm font-bold rounded-lg transition-all duration-200 ${i==="reports"?"bg-indigo-100 text-indigo-700 shadow-sm":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"text-xl mr-3",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Reports"}),e.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${b?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),b&&e.jsxs("div",{className:"ml-6 mt-1 space-y-1",children:[e.jsxs("button",{onClick:()=>ee("DTR-Reports",!0),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors duration-200 ${c==="DTR-Reports"?"bg-indigo-50 text-indigo-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"DTR"}),e.jsx("svg",{className:`w-3 h-3 transition-transform duration-200 ${D?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),D&&e.jsxs("div",{className:"ml-6 mt-1 space-y-1",children:[a("generate-dtr")&&e.jsxs("button",{onClick:()=>{d("DTR-Reports"),u("generate-dtr")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${m==="generate-dtr"?"bg-indigo-50 text-indigo-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Generate DTR"})]}),(a("compute-attendance-report")||a("computed-attendances"))&&e.jsxs("button",{onClick:()=>{d("DTR-Reports"),u("compute-attendance-report")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${m==="compute-attendance-report"?"bg-indigo-50 text-indigo-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Computed Attendances"})]})]}),a("print-employee-list")&&e.jsxs("button",{onClick:()=>{d("print-employee-list"),u("print-employee-list")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${c==="print-employee-list"?"bg-indigo-50 text-indigo-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Employee List"})]}),a("print-locator-entries")&&e.jsxs("button",{onClick:()=>{d("print-locator-entries"),u("print-locator-entries")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${c==="print-locator-entries"?"bg-indigo-50 text-indigo-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Locator Entries"})]})]})]}),l("System Setup")&&e.jsxs("div",{className:"pt-4 border-t border-gray-200 mt-4",children:[e.jsxs("button",{onClick:()=>ee("system-setup",!0),className:"w-full flex items-center px-3 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50 rounded-md",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"System Setup"}),e.jsx("svg",{className:`w-3 h-3 transition-transform duration-200 ${C?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),C&&e.jsxs("div",{className:"ml-6 mt-1 space-y-1",children:[a("company-info")&&e.jsxs("button",{onClick:()=>{d("company-info"),u("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Company Info"})]}),a("machine-management")&&e.jsxs("button",{onClick:()=>{d("machine-management"),u("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Machine Management"})]}),a("upload-employee")&&e.jsxs("button",{onClick:()=>{d("upload-employee"),u("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Upload Employee"})]}),a("enroll-bio")&&e.jsxs("button",{onClick:()=>{d("enroll-bio"),u("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Enroll Biometric"})]}),a("download-employee")&&e.jsxs("button",{onClick:()=>{d("download-employee"),u("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Download Employee"})]}),a("db-connection")&&e.jsxs("button",{onClick:()=>{d("db-connection"),u("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"DB Connection (Main)"})]}),a("db-201files")&&e.jsxs("button",{onClick:()=>{d("db-201files"),u("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"DB 201 Files"})]}),a("db-payroll")&&e.jsxs("button",{onClick:()=>{d("db-payroll"),u("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"DB Payroll"})]}),a("media-storage")&&e.jsxs("button",{onClick:()=>{d("media-storage"),u("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Media Storage"})]}),a("sys-users")&&e.jsxs("button",{onClick:()=>{d("sys-users"),u("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"System Users"})]})]})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-6 py-4 border-t border-gray-200 bg-white",children:e.jsxs("div",{className:"text-center text-xs text-gray-500",children:[e.jsx("p",{className:"font-semibold",children:"HRIS System v1.25"}),e.jsx("p",{children:" 2025 All Rights Reserved"})]})})]}),e.jsxs("div",{className:`flex-1 transition-all duration-300 ${p?"ml-80":"ml-0"}`,children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>g(!0),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:[i==="dtr"&&" DTR Management",i==="201"&&" 201 Files",i==="payroll"&&e.jsxs("span",{children:[e.jsx("span",{style:{color:"#1e40af",fontWeight:"bold"},children:""})," Payroll"]}),i==="reports"&&" Reports"]}),e.jsx("p",{className:"text-sm text-gray-500",children:(m||c).replace(/-/g," ").replace(/\b\w/g,le=>le.toUpperCase())})]})]}),e.jsxs("div",{className:"relative user-dropdown",children:[e.jsxs("button",{onClick:()=>E(!_),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 transition-all duration-200",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:(t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"Administrator"}),e.jsx("div",{className:"text-xs text-gray-500",children:(t==null?void 0:t.TITLE)||(t==null?void 0:t.title)||"System Administrator"})]}),e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-md overflow-hidden relative",children:(()=>{let le=null;const Ie=t==null?void 0:t.PHOTO;if(Ie){if(typeof Ie=="string")Ie.startsWith("data:")?le=Ie:le=(t==null?void 0:t.role)==="admin"?`data:image/png;base64,${Ie}`:`data:image/jpeg;base64,${Ie}`;else if(typeof Ie=="object"&&Ie!==null){const ge=Ie.base64||Ie.data||(typeof Ie.toString=="function"?Ie.toString():null);ge&&typeof ge=="string"&&(le=ge.startsWith("data:")?ge:`data:image/png;base64,${ge}`)}}return le?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:le,alt:(t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"User",className:"w-full h-full object-cover rounded-xl",onError:ge=>{ge.target.style.display="none",ge.target.nextSibling&&(ge.target.nextSibling.style.display="flex")}}),e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-lg absolute inset-0",style:{display:"none"},children:((t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"U").charAt(0).toUpperCase()})]}):e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-lg",children:((t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"U").charAt(0).toUpperCase()})})()}),e.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${_?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),_&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[e.jsxs("button",{onClick:Q,disabled:$,className:`w-full px-4 py-2 text-left text-sm flex items-center space-x-2 ${$?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{children:$?"Opening...":"My DTR"})]}),e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:()=>{k(!0),E(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{children:"Change Photo"})]}),e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:()=>{L(!0),E(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 0121 9z"})}),e.jsx("span",{children:"Change Password"})]}),e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:()=>{s(),E(!1),r("/login")},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),e.jsx("span",{children:"Logout"})]})]})]})]})}),e.jsx("main",{className:"p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:De()})})]}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Change Password"}),e.jsx("button",{onClick:()=>{L(!1),O(""),W({currentPassword:"",newPassword:"",confirmPassword:""})},className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),J&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:J}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),e.jsx("input",{type:"password",value:F.currentPassword,onChange:le=>W(Ie=>({...Ie,currentPassword:le.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter current password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsx("input",{type:"password",value:F.newPassword,onChange:le=>W(Ie=>({...Ie,newPassword:le.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter new password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsx("input",{type:"password",value:F.confirmPassword,onChange:le=>W(Ie=>({...Ie,confirmPassword:le.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Confirm new password"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:we,disabled:Y,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:Y?"Changing...":"Change Password"}),e.jsx("button",{onClick:()=>{L(!1),O(""),W({currentPassword:"",newPassword:"",confirmPassword:""})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"})]})]})}),M&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Change Photo"}),e.jsx("button",{onClick:()=>{k(!1),G(""),K(null),P(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),U&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:U}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Photo"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-32 h-32 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-md overflow-hidden",children:t!=null&&t.PHOTO?e.jsx("img",{src:t.PHOTO&&typeof t.PHOTO=="string"&&t.PHOTO.startsWith("data:")?t.PHOTO:(t==null?void 0:t.role)==="admin"?`data:image/png;base64,${t.PHOTO}`:`data:image/jpeg;base64,${t.PHOTO}`,alt:(t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"User",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-3xl",children:((t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"U").charAt(0).toUpperCase()})})})]}),I&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Photo Preview"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:I,alt:"Preview",className:"w-32 h-32 object-cover rounded-xl border-2 border-blue-500"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select New Photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:ve,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"JPG, PNG or GIF. Max size 5MB."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:ue,disabled:R||!z,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Uploading...":"Upload Photo"}),e.jsx("button",{onClick:()=>{k(!1),G(""),K(null),P(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 z-40 lg:hidden",onClick:()=>g(!1)})]})},W7=({stats:t,activeModule:s})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Employees"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.totalEmployees})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Employees"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:t.activeEmployees})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Departments"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:t.totalDepartments})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})})]})}),s==="dtr"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Today's Time Logs"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:t.todayTimeLogs})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Locators"}),e.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:t.activeLocators})]}),e.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:e.jsxs("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Welcome to ",s==="dtr"?"DTR Management":s==="201"?"201 Files Management":s==="reports"?"Reports Center":"Payroll Management"]}),e.jsxs("p",{className:"text-gray-600",children:["Select an option from the left sidebar to get started managing your ",s==="dtr"?"daily time records and attendance":s==="201"?"employee files and records":s==="reports"?"reports and analytics":"payroll processing and reports","."]})]})]}),Y7=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg shadow-lg p-8 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:" 201 Files Module"}),e.jsx("p",{className:"text-green-100",children:"Employee Personnel Records Management"})]}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-6 h-6 text-yellow-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Module Under Development"}),e.jsx("p",{className:"text-sm text-yellow-700 mb-4",children:"The 201 Files module is currently under development. This module will be dedicated to comprehensive employee personnel file management."}),e.jsxs("p",{className:"text-sm text-yellow-700 mb-3",children:[e.jsx("strong",{children:"Note:"})," Employee management features are currently available under the ",e.jsx("strong",{children:"DTR Management  Employee Records"})," section."]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Planned Features"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Document Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Digital storage and management of employee documents, certificates, and credentials"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Personal Data Sheets"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Complete employee personal information, education, work history, and eligibility"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Compliance Documents"}),e.jsx("p",{className:"text-sm text-gray-600",children:"NBI clearance, medical certificates, government IDs, and mandatory requirements"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Training & Development"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Training records, seminars attended, certifications, and professional development"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Performance Records"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Performance evaluations, IPCR/OPCR ratings, awards, and recognitions"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-pink-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Service Records"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Complete employment history, position changes, promotions, and service milestones"})]})]})]})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Current Access:"})," Basic employee management features are available under DTR Management  Employee Records until this dedicated module is completed."]})})]})})]}),K7=()=>{var j,y,v,h;const{employeeId:t}=Kj(),s=ia(),[r]=DE(),[n,a]=x.useState(null),[l,i]=x.useState(!0),[o,c]=x.useState(null),d=r.get("page")?parseInt(r.get("page")):null;x.useEffect(()=>{t&&(async()=>{try{i(!0);const N=await oe.get(`/201-employees/pds/${t}`);N.data.success?a(N.data.data):c("Failed to load PDS data")}catch(N){console.error("Error fetching PDS data:",N),c("Error loading PDS data")}finally{i(!1)}})()},[t]);const m=()=>{window.print()},u=()=>{console.log("Close button clicked - navigating to 201-employees");try{s("/201-employees")}catch(f){console.error("Navigation error:",f),window.location.href="/201-employees"}},p=()=>{console.log("Alternative close method - navigating to 201-employees"),window.location.href="/201-employees"};return l?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading PDS data..."})]})}):o||!n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:o||"PDS data not found"}),e.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Go Back"})]})}):e.jsxs("div",{children:[e.jsx("style",{children:`
    @media print {
      body * {
        visibility: hidden;
      }
      
      .print-content, .print-content * {
        visibility: visible;
      }
      
      .print-content {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
      }
      
      .no-print {
        display: none !important;
      }
      
      @page {
        size: 8.5in 13in;
        margin: 0.25in;
      }
    }
    
    @media screen {
      .print-controls {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        background: white;
        border-bottom: 1px solid #ccc;
        padding: 10px 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      
      .print-controls button {
        pointer-events: auto !important;
        cursor: pointer !important;
        z-index: 1001 !important;
        position: relative !important;
      }
      
      .print-preview {
        margin-top: 60px;
        padding: 20px;
      }
    }
  `}),e.jsx("div",{className:"no-print print-controls",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-xl font-bold",children:"PDS Print Preview"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Print PDS"}),e.jsx("button",{onClick:f=>{f.preventDefault(),f.stopPropagation(),console.log("Close button clicked - event:",f),u()},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 cursor-pointer",type:"button",style:{zIndex:9999,position:"relative"},children:"Close"}),e.jsx("button",{onClick:f=>{f.preventDefault(),f.stopPropagation(),console.log("Alternative close button clicked"),p()},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 cursor-pointer",type:"button",style:{zIndex:9999,position:"relative"},children:"X"})]})]})}),e.jsx("div",{className:"print-content print-preview",children:e.jsx(f7,{formData:n.employee,children:n.children,education:n.education,civilServiceEligibility:n.eligibility,workExperience:n.workExperience,voluntaryWork:n.voluntaryWork,trainings:n.trainings,skills:n.skills,recognitions:n.recognitions,memberships:n.memberships,declarations:n.declarations,references:n.references,governmentIds:n.governmentIds,signatureData:(j=n.media)==null?void 0:j.signature,photoData:(y=n.media)==null?void 0:y.photo,thumbmarkData:(v=n.media)==null?void 0:v.thumb,dateAccomplished:(h=n.media)==null?void 0:h.date_accomplished,pageNumber:d})})]})},lh=({children:t,requireAdmin:s=!1})=>{const r=localStorage.getItem("authToken"),n=localStorage.getItem("authUser"),a=localStorage.getItem("authMethod");if(!r||!n)return a==="biometric"?e.jsx(Qa,{to:"/login-bio",replace:!0}):e.jsx(Qa,{to:"/",replace:!0});try{const l=JSON.parse(n);return s?typeof l.usertype<"u"&&l.usertype!==null||a==="admin"?t:(console.warn("Admin access denied:",{usertype:l.usertype,authMethod:a}),e.jsx(Qa,{to:"/",replace:!0})):t}catch(l){return console.error("Error parsing user data:",l),a==="biometric"?e.jsx(Qa,{to:"/login-bio",replace:!0}):e.jsx(Qa,{to:"/",replace:!0})}};function q7(){return e.jsx(NN,{children:e.jsxs(_E,{children:[e.jsx(pa,{path:"/",element:e.jsx(cC,{})}),e.jsx(pa,{path:"/login-bio",element:e.jsx(mC,{})}),e.jsx(pa,{path:"/hris-management",element:e.jsx(lh,{requireAdmin:!0,children:e.jsx(z7,{})})}),e.jsx(pa,{path:"/dtr-management",element:e.jsx(Qa,{to:"/hris-management",replace:!0})}),e.jsx(pa,{path:"/dtr-checker",element:e.jsx(lh,{children:e.jsx(R8,{})})}),e.jsx(pa,{path:"/201-employees/print/:employeeId",element:e.jsx(lh,{children:e.jsx(K7,{})})}),e.jsx(pa,{path:"*",element:e.jsx(Qa,{to:"/",replace:!0})})]})})}ih.createRoot(document.getElementById("root")).render(e.jsx(AE,{children:e.jsx(NN,{children:e.jsx(q7,{})})}));
