function ty(t,s){for(var r=0;r<s.length;r++){const n=s[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();var Fs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var np={exports:{}},Ni={},ap={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Al=Symbol.for("react.element"),sy=Symbol.for("react.portal"),ry=Symbol.for("react.fragment"),ny=Symbol.for("react.strict_mode"),ay=Symbol.for("react.profiler"),ly=Symbol.for("react.provider"),oy=Symbol.for("react.context"),iy=Symbol.for("react.forward_ref"),cy=Symbol.for("react.suspense"),dy=Symbol.for("react.memo"),uy=Symbol.for("react.lazy"),mm=Symbol.iterator;function my(t){return t===null||typeof t!="object"?null:(t=mm&&t[mm]||t["@@iterator"],typeof t=="function"?t:null)}var lp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},op=Object.assign,ip={};function fa(t,s,r){this.props=t,this.context=s,this.refs=ip,this.updater=r||lp}fa.prototype.isReactComponent={};fa.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};fa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cp(){}cp.prototype=fa.prototype;function ou(t,s,r){this.props=t,this.context=s,this.refs=ip,this.updater=r||lp}var iu=ou.prototype=new cp;iu.constructor=ou;op(iu,fa.prototype);iu.isPureReactComponent=!0;var hm=Array.isArray,dp=Object.prototype.hasOwnProperty,cu={current:null},up={key:!0,ref:!0,__self:!0,__source:!0};function mp(t,s,r){var n,a={},l=null,o=null;if(s!=null)for(n in s.ref!==void 0&&(o=s.ref),s.key!==void 0&&(l=""+s.key),s)dp.call(s,n)&&!up.hasOwnProperty(n)&&(a[n]=s[n]);var i=arguments.length-2;if(i===1)a.children=r;else if(1<i){for(var c=Array(i),h=0;h<i;h++)c[h]=arguments[h+2];a.children=c}if(t&&t.defaultProps)for(n in i=t.defaultProps,i)a[n]===void 0&&(a[n]=i[n]);return{$$typeof:Al,type:t,key:l,ref:o,props:a,_owner:cu.current}}function hy(t,s){return{$$typeof:Al,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function du(t){return typeof t=="object"&&t!==null&&t.$$typeof===Al}function fy(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var fm=/\/+/g;function cc(t,s){return typeof t=="object"&&t!==null&&t.key!=null?fy(""+t.key):s.toString(36)}function No(t,s,r,n,a){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Al:case sy:o=!0}}if(o)return o=t,a=a(o),t=n===""?"."+cc(o,0):n,hm(a)?(r="",t!=null&&(r=t.replace(fm,"$&/")+"/"),No(a,s,r,"",function(h){return h})):a!=null&&(du(a)&&(a=hy(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(fm,"$&/")+"/")+t)),s.push(a)),1;if(o=0,n=n===""?".":n+":",hm(t))for(var i=0;i<t.length;i++){l=t[i];var c=n+cc(l,i);o+=No(l,s,r,c,a)}else if(c=my(t),typeof c=="function")for(t=c.call(t),i=0;!(l=t.next()).done;)l=l.value,c=n+cc(l,i++),o+=No(l,s,r,c,a);else if(l==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return o}function Zl(t,s,r){if(t==null)return t;var n=[],a=0;return No(t,n,"","",function(l){return s.call(r,l,a++)}),n}function py(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Ss={current:null},wo={transition:null},xy={ReactCurrentDispatcher:Ss,ReactCurrentBatchConfig:wo,ReactCurrentOwner:cu};function hp(){throw Error("act(...) is not supported in production builds of React.")}Et.Children={map:Zl,forEach:function(t,s,r){Zl(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return Zl(t,function(){s++}),s},toArray:function(t){return Zl(t,function(s){return s})||[]},only:function(t){if(!du(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Et.Component=fa;Et.Fragment=ry;Et.Profiler=ay;Et.PureComponent=ou;Et.StrictMode=ny;Et.Suspense=cy;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xy;Et.act=hp;Et.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=op({},t.props),a=t.key,l=t.ref,o=t._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,o=cu.current),s.key!==void 0&&(a=""+s.key),t.type&&t.type.defaultProps)var i=t.type.defaultProps;for(c in s)dp.call(s,c)&&!up.hasOwnProperty(c)&&(n[c]=s[c]===void 0&&i!==void 0?i[c]:s[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){i=Array(c);for(var h=0;h<c;h++)i[h]=arguments[h+2];n.children=i}return{$$typeof:Al,type:t.type,key:a,ref:l,props:n,_owner:o}};Et.createContext=function(t){return t={$$typeof:oy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ly,_context:t},t.Consumer=t};Et.createElement=mp;Et.createFactory=function(t){var s=mp.bind(null,t);return s.type=t,s};Et.createRef=function(){return{current:null}};Et.forwardRef=function(t){return{$$typeof:iy,render:t}};Et.isValidElement=du;Et.lazy=function(t){return{$$typeof:uy,_payload:{_status:-1,_result:t},_init:py}};Et.memo=function(t,s){return{$$typeof:dy,type:t,compare:s===void 0?null:s}};Et.startTransition=function(t){var s=wo.transition;wo.transition={};try{t()}finally{wo.transition=s}};Et.unstable_act=hp;Et.useCallback=function(t,s){return Ss.current.useCallback(t,s)};Et.useContext=function(t){return Ss.current.useContext(t)};Et.useDebugValue=function(){};Et.useDeferredValue=function(t){return Ss.current.useDeferredValue(t)};Et.useEffect=function(t,s){return Ss.current.useEffect(t,s)};Et.useId=function(){return Ss.current.useId()};Et.useImperativeHandle=function(t,s,r){return Ss.current.useImperativeHandle(t,s,r)};Et.useInsertionEffect=function(t,s){return Ss.current.useInsertionEffect(t,s)};Et.useLayoutEffect=function(t,s){return Ss.current.useLayoutEffect(t,s)};Et.useMemo=function(t,s){return Ss.current.useMemo(t,s)};Et.useReducer=function(t,s,r){return Ss.current.useReducer(t,s,r)};Et.useRef=function(t){return Ss.current.useRef(t)};Et.useState=function(t){return Ss.current.useState(t)};Et.useSyncExternalStore=function(t,s,r){return Ss.current.useSyncExternalStore(t,s,r)};Et.useTransition=function(){return Ss.current.useTransition()};Et.version="18.3.1";ap.exports=Et;var y=ap.exports;const st=rp(y),gy=ty({__proto__:null,default:st},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy=y,by=Symbol.for("react.element"),vy=Symbol.for("react.fragment"),jy=Object.prototype.hasOwnProperty,Ny=yy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wy={key:!0,ref:!0,__self:!0,__source:!0};function fp(t,s,r){var n,a={},l=null,o=null;r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(o=s.ref);for(n in s)jy.call(s,n)&&!wy.hasOwnProperty(n)&&(a[n]=s[n]);if(t&&t.defaultProps)for(n in s=t.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:by,type:t,key:l,ref:o,props:a,_owner:Ny.current}}Ni.Fragment=vy;Ni.jsx=fp;Ni.jsxs=fp;np.exports=Ni;var e=np.exports,Jc={},pp={exports:{}},zs={},xp={exports:{}},gp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(G,V){var W=G.length;G.push(V);e:for(;0<W;){var _=W-1>>>1,M=G[_];if(0<a(M,V))G[_]=V,G[W]=M,W=_;else break e}}function r(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var V=G[0],W=G.pop();if(W!==V){G[0]=W;e:for(var _=0,M=G.length,P=M>>>1;_<P;){var $=2*(_+1)-1,B=G[$],w=$+1,T=G[w];if(0>a(B,W))w<M&&0>a(T,B)?(G[_]=T,G[w]=W,_=w):(G[_]=B,G[$]=W,_=$);else if(w<M&&0>a(T,W))G[_]=T,G[w]=W,_=w;else break e}}return V}function a(G,V){var W=G.sortIndex-V.sortIndex;return W!==0?W:G.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var o=Date,i=o.now();t.unstable_now=function(){return o.now()-i}}var c=[],h=[],p=1,m=null,u=3,x=!1,j=!1,v=!1,N=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(G){for(var V=r(h);V!==null;){if(V.callback===null)n(h);else if(V.startTime<=G)n(h),V.sortIndex=V.expirationTime,s(c,V);else break;V=r(h)}}function b(G){if(v=!1,g(G),!j)if(r(c)!==null)j=!0,U(E);else{var V=r(h);V!==null&&Y(b,V.startTime-G)}}function E(G,V){j=!1,v&&(v=!1,f(k),k=-1),x=!0;var W=u;try{for(g(V),m=r(c);m!==null&&(!(m.expirationTime>V)||G&&!D());){var _=m.callback;if(typeof _=="function"){m.callback=null,u=m.priorityLevel;var M=_(m.expirationTime<=V);V=t.unstable_now(),typeof M=="function"?m.callback=M:m===r(c)&&n(c),g(V)}else n(c);m=r(c)}if(m!==null)var P=!0;else{var $=r(h);$!==null&&Y(b,$.startTime-V),P=!1}return P}finally{m=null,u=W,x=!1}}var R=!1,S=null,k=-1,L=5,A=-1;function D(){return!(t.unstable_now()-A<L)}function I(){if(S!==null){var G=t.unstable_now();A=G;var V=!0;try{V=S(!0,G)}finally{V?O():(R=!1,S=null)}}else R=!1}var O;if(typeof d=="function")O=function(){d(I)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,F=C.port2;C.port1.onmessage=I,O=function(){F.postMessage(null)}}else O=function(){N(I,0)};function U(G){S=G,R||(R=!0,O())}function Y(G,V){k=N(function(){G(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){j||x||(j=!0,U(E))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return u},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(G){switch(u){case 1:case 2:case 3:var V=3;break;default:V=u}var W=u;u=V;try{return G()}finally{u=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,V){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var W=u;u=G;try{return V()}finally{u=W}},t.unstable_scheduleCallback=function(G,V,W){var _=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?_+W:_):W=_,G){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=W+M,G={id:p++,callback:V,priorityLevel:G,startTime:W,expirationTime:M,sortIndex:-1},W>_?(G.sortIndex=W,s(h,G),r(c)===null&&G===r(h)&&(v?(f(k),k=-1):v=!0,Y(b,W-_))):(G.sortIndex=M,s(c,G),j||x||(j=!0,U(E))),G},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(G){var V=u;return function(){var W=u;u=V;try{return G.apply(this,arguments)}finally{u=W}}}})(gp);xp.exports=gp;var Ey=xp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sy=y,Hs=Ey;function Xe(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yp=new Set,ol={};function kn(t,s){aa(t,s),aa(t+"Capture",s)}function aa(t,s){for(ol[t]=s,t=0;t<s.length;t++)yp.add(s[t])}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xc=Object.prototype.hasOwnProperty,_y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pm={},xm={};function Cy(t){return Xc.call(xm,t)?!0:Xc.call(pm,t)?!1:_y.test(t)?xm[t]=!0:(pm[t]=!0,!1)}function ky(t,s,r,n){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Dy(t,s,r,n){if(s===null||typeof s>"u"||ky(t,s,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function _s(t,s,r,n,a,l,o){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=l,this.removeEmptyString=o}var xs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xs[t]=new _s(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];xs[s]=new _s(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xs[t]=new _s(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xs[t]=new _s(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xs[t]=new _s(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xs[t]=new _s(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xs[t]=new _s(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xs[t]=new _s(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xs[t]=new _s(t,5,!1,t.toLowerCase(),null,!1,!1)});var uu=/[\-:]([a-z])/g;function mu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(uu,mu);xs[s]=new _s(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(uu,mu);xs[s]=new _s(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(uu,mu);xs[s]=new _s(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xs[t]=new _s(t,1,!1,t.toLowerCase(),null,!1,!1)});xs.xlinkHref=new _s("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xs[t]=new _s(t,1,!1,t.toLowerCase(),null,!0,!0)});function hu(t,s,r,n){var a=xs.hasOwnProperty(s)?xs[s]:null;(a!==null?a.type!==0:n||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(Dy(s,r,a,n)&&(r=null),n||a===null?Cy(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(s=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(s):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,s,r):t.setAttribute(s,r))))}var Ir=Sy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jl=Symbol.for("react.element"),$n=Symbol.for("react.portal"),Hn=Symbol.for("react.fragment"),fu=Symbol.for("react.strict_mode"),ed=Symbol.for("react.profiler"),bp=Symbol.for("react.provider"),vp=Symbol.for("react.context"),pu=Symbol.for("react.forward_ref"),td=Symbol.for("react.suspense"),sd=Symbol.for("react.suspense_list"),xu=Symbol.for("react.memo"),$r=Symbol.for("react.lazy"),jp=Symbol.for("react.offscreen"),gm=Symbol.iterator;function Ia(t){return t===null||typeof t!="object"?null:(t=gm&&t[gm]||t["@@iterator"],typeof t=="function"?t:null)}var Gt=Object.assign,dc;function qa(t){if(dc===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);dc=s&&s[1]||""}return`
`+dc+t}var uc=!1;function mc(t,s){if(!t||uc)return"";uc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(h){var n=h}Reflect.construct(t,[],s)}else{try{s.call()}catch(h){n=h}t.call(s.prototype)}else{try{throw Error()}catch(h){n=h}t()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var a=h.stack.split(`
`),l=n.stack.split(`
`),o=a.length-1,i=l.length-1;1<=o&&0<=i&&a[o]!==l[i];)i--;for(;1<=o&&0<=i;o--,i--)if(a[o]!==l[i]){if(o!==1||i!==1)do if(o--,i--,0>i||a[o]!==l[i]){var c=`
`+a[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=i);break}}}finally{uc=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?qa(t):""}function Ay(t){switch(t.tag){case 5:return qa(t.type);case 16:return qa("Lazy");case 13:return qa("Suspense");case 19:return qa("SuspenseList");case 0:case 2:case 15:return t=mc(t.type,!1),t;case 11:return t=mc(t.type.render,!1),t;case 1:return t=mc(t.type,!0),t;default:return""}}function rd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hn:return"Fragment";case $n:return"Portal";case ed:return"Profiler";case fu:return"StrictMode";case td:return"Suspense";case sd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vp:return(t.displayName||"Context")+".Consumer";case bp:return(t._context.displayName||"Context")+".Provider";case pu:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xu:return s=t.displayName||null,s!==null?s:rd(t.type)||"Memo";case $r:s=t._payload,t=t._init;try{return rd(t(s))}catch{}}return null}function Ty(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rd(s);case 8:return s===fu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function tn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Np(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ly(t){var s=Np(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),n=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,l.call(this,o)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Xl(t){t._valueTracker||(t._valueTracker=Ly(t))}function wp(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),n="";return t&&(n=Np(t)?t.checked?"true":"false":t.value),t=n,t!==r?(s.setValue(t),!0):!1}function Fo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nd(t,s){var r=s.checked;return Gt({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function ym(t,s){var r=s.defaultValue==null?"":s.defaultValue,n=s.checked!=null?s.checked:s.defaultChecked;r=tn(s.value!=null?s.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ep(t,s){s=s.checked,s!=null&&hu(t,"checked",s,!1)}function ad(t,s){Ep(t,s);var r=tn(s.value),n=s.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?ld(t,s.type,r):s.hasOwnProperty("defaultValue")&&ld(t,s.type,tn(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function bm(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var n=s.type;if(!(n!=="submit"&&n!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function ld(t,s,r){(s!=="number"||Fo(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Ka=Array.isArray;function Xn(t,s,r,n){if(t=t.options,s){s={};for(var a=0;a<r.length;a++)s["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=s.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+tn(r),s=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}s!==null||t[a].disabled||(s=t[a])}s!==null&&(s.selected=!0)}}function od(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(Xe(91));return Gt({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vm(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(Xe(92));if(Ka(r)){if(1<r.length)throw Error(Xe(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:tn(r)}}function Sp(t,s){var r=tn(s.value),n=tn(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function jm(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function _p(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function id(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?_p(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var eo,Cp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(s,r,n,a)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(eo=eo||document.createElement("div"),eo.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=eo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function il(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var Ja={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Iy=["Webkit","ms","Moz","O"];Object.keys(Ja).forEach(function(t){Iy.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Ja[s]=Ja[t]})});function kp(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||Ja.hasOwnProperty(t)&&Ja[t]?(""+s).trim():s+"px"}function Dp(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=kp(r,s[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var My=Gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cd(t,s){if(s){if(My[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(Xe(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(Xe(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(Xe(61))}if(s.style!=null&&typeof s.style!="object")throw Error(Xe(62))}}function dd(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ud=null;function gu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var md=null,ea=null,ta=null;function Nm(t){if(t=Il(t)){if(typeof md!="function")throw Error(Xe(280));var s=t.stateNode;s&&(s=Ci(s),md(t.stateNode,t.type,s))}}function Ap(t){ea?ta?ta.push(t):ta=[t]:ea=t}function Tp(){if(ea){var t=ea,s=ta;if(ta=ea=null,Nm(t),s)for(t=0;t<s.length;t++)Nm(s[t])}}function Lp(t,s){return t(s)}function Ip(){}var hc=!1;function Mp(t,s,r){if(hc)return t(s,r);hc=!0;try{return Lp(t,s,r)}finally{hc=!1,(ea!==null||ta!==null)&&(Ip(),Tp())}}function cl(t,s){var r=t.stateNode;if(r===null)return null;var n=Ci(r);if(n===null)return null;r=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Xe(231,s,typeof r));return r}var hd=!1;if(Dr)try{var Ma={};Object.defineProperty(Ma,"passive",{get:function(){hd=!0}}),window.addEventListener("test",Ma,Ma),window.removeEventListener("test",Ma,Ma)}catch{hd=!1}function Ry(t,s,r,n,a,l,o,i,c){var h=Array.prototype.slice.call(arguments,3);try{s.apply(r,h)}catch(p){this.onError(p)}}var Xa=!1,Uo=null,$o=!1,fd=null,Oy={onError:function(t){Xa=!0,Uo=t}};function Py(t,s,r,n,a,l,o,i,c){Xa=!1,Uo=null,Ry.apply(Oy,arguments)}function Fy(t,s,r,n,a,l,o,i,c){if(Py.apply(this,arguments),Xa){if(Xa){var h=Uo;Xa=!1,Uo=null}else throw Error(Xe(198));$o||($o=!0,fd=h)}}function Dn(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function Rp(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function wm(t){if(Dn(t)!==t)throw Error(Xe(188))}function Uy(t){var s=t.alternate;if(!s){if(s=Dn(t),s===null)throw Error(Xe(188));return s!==t?null:t}for(var r=t,n=s;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return wm(a),t;if(l===n)return wm(a),s;l=l.sibling}throw Error(Xe(188))}if(r.return!==n.return)r=a,n=l;else{for(var o=!1,i=a.child;i;){if(i===r){o=!0,r=a,n=l;break}if(i===n){o=!0,n=a,r=l;break}i=i.sibling}if(!o){for(i=l.child;i;){if(i===r){o=!0,r=l,n=a;break}if(i===n){o=!0,n=l,r=a;break}i=i.sibling}if(!o)throw Error(Xe(189))}}if(r.alternate!==n)throw Error(Xe(190))}if(r.tag!==3)throw Error(Xe(188));return r.stateNode.current===r?t:s}function Op(t){return t=Uy(t),t!==null?Pp(t):null}function Pp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Pp(t);if(s!==null)return s;t=t.sibling}return null}var Fp=Hs.unstable_scheduleCallback,Em=Hs.unstable_cancelCallback,$y=Hs.unstable_shouldYield,Hy=Hs.unstable_requestPaint,rs=Hs.unstable_now,By=Hs.unstable_getCurrentPriorityLevel,yu=Hs.unstable_ImmediatePriority,Up=Hs.unstable_UserBlockingPriority,Ho=Hs.unstable_NormalPriority,zy=Hs.unstable_LowPriority,$p=Hs.unstable_IdlePriority,wi=null,fr=null;function Wy(t){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(wi,t,void 0,(t.current.flags&128)===128)}catch{}}var sr=Math.clz32?Math.clz32:qy,Vy=Math.log,Yy=Math.LN2;function qy(t){return t>>>=0,t===0?32:31-(Vy(t)/Yy|0)|0}var to=64,so=4194304;function Ga(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bo(t,s){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,l=t.pingedLanes,o=r&268435455;if(o!==0){var i=o&~a;i!==0?n=Ga(i):(l&=o,l!==0&&(n=Ga(l)))}else o=r&~a,o!==0?n=Ga(o):l!==0&&(n=Ga(l));if(n===0)return 0;if(s!==0&&s!==n&&!(s&a)&&(a=n&-n,l=s&-s,a>=l||a===16&&(l&4194240)!==0))return s;if(n&4&&(n|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=n;0<s;)r=31-sr(s),a=1<<r,n|=t[r],s&=~a;return n}function Ky(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gy(t,s){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,l=t.pendingLanes;0<l;){var o=31-sr(l),i=1<<o,c=a[o];c===-1?(!(i&r)||i&n)&&(a[o]=Ky(i,s)):c<=s&&(t.expiredLanes|=i),l&=~i}}function pd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Hp(){var t=to;return to<<=1,!(to&4194240)&&(to=64),t}function fc(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function Tl(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-sr(s),t[s]=r}function Qy(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-sr(r),l=1<<a;s[a]=0,n[a]=-1,t[a]=-1,r&=~l}}function bu(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var n=31-sr(r),a=1<<n;a&s|t[n]&s&&(t[n]|=s),r&=~a}}var At=0;function Bp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zp,vu,Wp,Vp,Yp,xd=!1,ro=[],qr=null,Kr=null,Gr=null,dl=new Map,ul=new Map,Br=[],Zy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sm(t,s){switch(t){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":dl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ul.delete(s.pointerId)}}function Ra(t,s,r,n,a,l){return t===null||t.nativeEvent!==l?(t={blockedOn:s,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},s!==null&&(s=Il(s),s!==null&&vu(s)),t):(t.eventSystemFlags|=n,s=t.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),t)}function Jy(t,s,r,n,a){switch(s){case"focusin":return qr=Ra(qr,t,s,r,n,a),!0;case"dragenter":return Kr=Ra(Kr,t,s,r,n,a),!0;case"mouseover":return Gr=Ra(Gr,t,s,r,n,a),!0;case"pointerover":var l=a.pointerId;return dl.set(l,Ra(dl.get(l)||null,t,s,r,n,a)),!0;case"gotpointercapture":return l=a.pointerId,ul.set(l,Ra(ul.get(l)||null,t,s,r,n,a)),!0}return!1}function qp(t){var s=hn(t.target);if(s!==null){var r=Dn(s);if(r!==null){if(s=r.tag,s===13){if(s=Rp(r),s!==null){t.blockedOn=s,Yp(t.priority,function(){Wp(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Eo(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=gd(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);ud=n,r.target.dispatchEvent(n),ud=null}else return s=Il(r),s!==null&&vu(s),t.blockedOn=r,!1;s.shift()}return!0}function _m(t,s,r){Eo(t)&&r.delete(s)}function Xy(){xd=!1,qr!==null&&Eo(qr)&&(qr=null),Kr!==null&&Eo(Kr)&&(Kr=null),Gr!==null&&Eo(Gr)&&(Gr=null),dl.forEach(_m),ul.forEach(_m)}function Oa(t,s){t.blockedOn===s&&(t.blockedOn=null,xd||(xd=!0,Hs.unstable_scheduleCallback(Hs.unstable_NormalPriority,Xy)))}function ml(t){function s(a){return Oa(a,t)}if(0<ro.length){Oa(ro[0],t);for(var r=1;r<ro.length;r++){var n=ro[r];n.blockedOn===t&&(n.blockedOn=null)}}for(qr!==null&&Oa(qr,t),Kr!==null&&Oa(Kr,t),Gr!==null&&Oa(Gr,t),dl.forEach(s),ul.forEach(s),r=0;r<Br.length;r++)n=Br[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Br.length&&(r=Br[0],r.blockedOn===null);)qp(r),r.blockedOn===null&&Br.shift()}var sa=Ir.ReactCurrentBatchConfig,zo=!0;function eb(t,s,r,n){var a=At,l=sa.transition;sa.transition=null;try{At=1,ju(t,s,r,n)}finally{At=a,sa.transition=l}}function tb(t,s,r,n){var a=At,l=sa.transition;sa.transition=null;try{At=4,ju(t,s,r,n)}finally{At=a,sa.transition=l}}function ju(t,s,r,n){if(zo){var a=gd(t,s,r,n);if(a===null)Ec(t,s,n,Wo,r),Sm(t,n);else if(Jy(a,t,s,r,n))n.stopPropagation();else if(Sm(t,n),s&4&&-1<Zy.indexOf(t)){for(;a!==null;){var l=Il(a);if(l!==null&&zp(l),l=gd(t,s,r,n),l===null&&Ec(t,s,n,Wo,r),l===a)break;a=l}a!==null&&n.stopPropagation()}else Ec(t,s,n,null,r)}}var Wo=null;function gd(t,s,r,n){if(Wo=null,t=gu(n),t=hn(t),t!==null)if(s=Dn(t),s===null)t=null;else if(r=s.tag,r===13){if(t=Rp(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Wo=t,null}function Kp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(By()){case yu:return 1;case Up:return 4;case Ho:case zy:return 16;case $p:return 536870912;default:return 16}default:return 16}}var Wr=null,Nu=null,So=null;function Gp(){if(So)return So;var t,s=Nu,r=s.length,n,a="value"in Wr?Wr.value:Wr.textContent,l=a.length;for(t=0;t<r&&s[t]===a[t];t++);var o=r-t;for(n=1;n<=o&&s[r-n]===a[l-n];n++);return So=a.slice(t,1<n?1-n:void 0)}function _o(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function no(){return!0}function Cm(){return!1}function Ws(t){function s(r,n,a,l,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var i in t)t.hasOwnProperty(i)&&(r=t[i],this[i]=r?r(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?no:Cm,this.isPropagationStopped=Cm,this}return Gt(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=no)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=no)},persist:function(){},isPersistent:no}),s}var pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wu=Ws(pa),Ll=Gt({},pa,{view:0,detail:0}),sb=Ws(Ll),pc,xc,Pa,Ei=Gt({},Ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pa&&(Pa&&t.type==="mousemove"?(pc=t.screenX-Pa.screenX,xc=t.screenY-Pa.screenY):xc=pc=0,Pa=t),pc)},movementY:function(t){return"movementY"in t?t.movementY:xc}}),km=Ws(Ei),rb=Gt({},Ei,{dataTransfer:0}),nb=Ws(rb),ab=Gt({},Ll,{relatedTarget:0}),gc=Ws(ab),lb=Gt({},pa,{animationName:0,elapsedTime:0,pseudoElement:0}),ob=Ws(lb),ib=Gt({},pa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cb=Ws(ib),db=Gt({},pa,{data:0}),Dm=Ws(db),ub={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fb(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=hb[t])?!!s[t]:!1}function Eu(){return fb}var pb=Gt({},Ll,{key:function(t){if(t.key){var s=ub[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=_o(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eu,charCode:function(t){return t.type==="keypress"?_o(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_o(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xb=Ws(pb),gb=Gt({},Ei,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Am=Ws(gb),yb=Gt({},Ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eu}),bb=Ws(yb),vb=Gt({},pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),jb=Ws(vb),Nb=Gt({},Ei,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wb=Ws(Nb),Eb=[9,13,27,32],Su=Dr&&"CompositionEvent"in window,el=null;Dr&&"documentMode"in document&&(el=document.documentMode);var Sb=Dr&&"TextEvent"in window&&!el,Qp=Dr&&(!Su||el&&8<el&&11>=el),Tm=" ",Lm=!1;function Zp(t,s){switch(t){case"keyup":return Eb.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bn=!1;function _b(t,s){switch(t){case"compositionend":return Jp(s);case"keypress":return s.which!==32?null:(Lm=!0,Tm);case"textInput":return t=s.data,t===Tm&&Lm?null:t;default:return null}}function Cb(t,s){if(Bn)return t==="compositionend"||!Su&&Zp(t,s)?(t=Gp(),So=Nu=Wr=null,Bn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Qp&&s.locale!=="ko"?null:s.data;default:return null}}var kb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Im(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!kb[t.type]:s==="textarea"}function Xp(t,s,r,n){Ap(n),s=Vo(s,"onChange"),0<s.length&&(r=new wu("onChange","change",null,r,n),t.push({event:r,listeners:s}))}var tl=null,hl=null;function Db(t){dx(t,0)}function Si(t){var s=Vn(t);if(wp(s))return t}function Ab(t,s){if(t==="change")return s}var ex=!1;if(Dr){var yc;if(Dr){var bc="oninput"in document;if(!bc){var Mm=document.createElement("div");Mm.setAttribute("oninput","return;"),bc=typeof Mm.oninput=="function"}yc=bc}else yc=!1;ex=yc&&(!document.documentMode||9<document.documentMode)}function Rm(){tl&&(tl.detachEvent("onpropertychange",tx),hl=tl=null)}function tx(t){if(t.propertyName==="value"&&Si(hl)){var s=[];Xp(s,hl,t,gu(t)),Mp(Db,s)}}function Tb(t,s,r){t==="focusin"?(Rm(),tl=s,hl=r,tl.attachEvent("onpropertychange",tx)):t==="focusout"&&Rm()}function Lb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Si(hl)}function Ib(t,s){if(t==="click")return Si(s)}function Mb(t,s){if(t==="input"||t==="change")return Si(s)}function Rb(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var nr=typeof Object.is=="function"?Object.is:Rb;function fl(t,s){if(nr(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),n=Object.keys(s);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Xc.call(s,a)||!nr(t[a],s[a]))return!1}return!0}function Om(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pm(t,s){var r=Om(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=s&&n>=s)return{node:r,offset:s-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Om(r)}}function sx(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?sx(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function rx(){for(var t=window,s=Fo();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=Fo(t.document)}return s}function _u(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function Ob(t){var s=rx(),r=t.focusedElem,n=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&sx(r.ownerDocument.documentElement,r)){if(n!==null&&_u(r)){if(s=n.start,t=n.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!t.extend&&l>n&&(a=n,n=l,l=a),a=Pm(r,l);var o=Pm(r,n);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),t.removeAllRanges(),l>n?(t.addRange(s),t.extend(o.node,o.offset)):(s.setEnd(o.node,o.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Pb=Dr&&"documentMode"in document&&11>=document.documentMode,zn=null,yd=null,sl=null,bd=!1;function Fm(t,s,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;bd||zn==null||zn!==Fo(n)||(n=zn,"selectionStart"in n&&_u(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),sl&&fl(sl,n)||(sl=n,n=Vo(yd,"onSelect"),0<n.length&&(s=new wu("onSelect","select",null,s,r),t.push({event:s,listeners:n}),s.target=zn)))}function ao(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Wn={animationend:ao("Animation","AnimationEnd"),animationiteration:ao("Animation","AnimationIteration"),animationstart:ao("Animation","AnimationStart"),transitionend:ao("Transition","TransitionEnd")},vc={},nx={};Dr&&(nx=document.createElement("div").style,"AnimationEvent"in window||(delete Wn.animationend.animation,delete Wn.animationiteration.animation,delete Wn.animationstart.animation),"TransitionEvent"in window||delete Wn.transitionend.transition);function _i(t){if(vc[t])return vc[t];if(!Wn[t])return t;var s=Wn[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in nx)return vc[t]=s[r];return t}var ax=_i("animationend"),lx=_i("animationiteration"),ox=_i("animationstart"),ix=_i("transitionend"),cx=new Map,Um="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rn(t,s){cx.set(t,s),kn(s,[t])}for(var jc=0;jc<Um.length;jc++){var Nc=Um[jc],Fb=Nc.toLowerCase(),Ub=Nc[0].toUpperCase()+Nc.slice(1);rn(Fb,"on"+Ub)}rn(ax,"onAnimationEnd");rn(lx,"onAnimationIteration");rn(ox,"onAnimationStart");rn("dblclick","onDoubleClick");rn("focusin","onFocus");rn("focusout","onBlur");rn(ix,"onTransitionEnd");aa("onMouseEnter",["mouseout","mouseover"]);aa("onMouseLeave",["mouseout","mouseover"]);aa("onPointerEnter",["pointerout","pointerover"]);aa("onPointerLeave",["pointerout","pointerover"]);kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kn("onBeforeInput",["compositionend","keypress","textInput","paste"]);kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$b=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qa));function $m(t,s,r){var n=t.type||"unknown-event";t.currentTarget=r,Fy(n,s,void 0,t),t.currentTarget=null}function dx(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var l=void 0;if(s)for(var o=n.length-1;0<=o;o--){var i=n[o],c=i.instance,h=i.currentTarget;if(i=i.listener,c!==l&&a.isPropagationStopped())break e;$m(a,i,h),l=c}else for(o=0;o<n.length;o++){if(i=n[o],c=i.instance,h=i.currentTarget,i=i.listener,c!==l&&a.isPropagationStopped())break e;$m(a,i,h),l=c}}}if($o)throw t=fd,$o=!1,fd=null,t}function Ut(t,s){var r=s[Ed];r===void 0&&(r=s[Ed]=new Set);var n=t+"__bubble";r.has(n)||(ux(s,t,2,!1),r.add(n))}function wc(t,s,r){var n=0;s&&(n|=4),ux(r,t,n,s)}var lo="_reactListening"+Math.random().toString(36).slice(2);function pl(t){if(!t[lo]){t[lo]=!0,yp.forEach(function(r){r!=="selectionchange"&&($b.has(r)||wc(r,!1,t),wc(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[lo]||(s[lo]=!0,wc("selectionchange",!1,s))}}function ux(t,s,r,n){switch(Kp(s)){case 1:var a=eb;break;case 4:a=tb;break;default:a=ju}r=a.bind(null,s,r,t),a=void 0,!hd||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(s,r,{capture:!0,passive:a}):t.addEventListener(s,r,!0):a!==void 0?t.addEventListener(s,r,{passive:a}):t.addEventListener(s,r,!1)}function Ec(t,s,r,n,a){var l=n;if(!(s&1)&&!(s&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var i=n.stateNode.containerInfo;if(i===a||i.nodeType===8&&i.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;i!==null;){if(o=hn(i),o===null)return;if(c=o.tag,c===5||c===6){n=l=o;continue e}i=i.parentNode}}n=n.return}Mp(function(){var h=l,p=gu(r),m=[];e:{var u=cx.get(t);if(u!==void 0){var x=wu,j=t;switch(t){case"keypress":if(_o(r)===0)break e;case"keydown":case"keyup":x=xb;break;case"focusin":j="focus",x=gc;break;case"focusout":j="blur",x=gc;break;case"beforeblur":case"afterblur":x=gc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=km;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=nb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=bb;break;case ax:case lx:case ox:x=ob;break;case ix:x=jb;break;case"scroll":x=sb;break;case"wheel":x=wb;break;case"copy":case"cut":case"paste":x=cb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Am}var v=(s&4)!==0,N=!v&&t==="scroll",f=v?u!==null?u+"Capture":null:u;v=[];for(var d=h,g;d!==null;){g=d;var b=g.stateNode;if(g.tag===5&&b!==null&&(g=b,f!==null&&(b=cl(d,f),b!=null&&v.push(xl(d,b,g)))),N)break;d=d.return}0<v.length&&(u=new x(u,j,null,r,p),m.push({event:u,listeners:v}))}}if(!(s&7)){e:{if(u=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",u&&r!==ud&&(j=r.relatedTarget||r.fromElement)&&(hn(j)||j[Ar]))break e;if((x||u)&&(u=p.window===p?p:(u=p.ownerDocument)?u.defaultView||u.parentWindow:window,x?(j=r.relatedTarget||r.toElement,x=h,j=j?hn(j):null,j!==null&&(N=Dn(j),j!==N||j.tag!==5&&j.tag!==6)&&(j=null)):(x=null,j=h),x!==j)){if(v=km,b="onMouseLeave",f="onMouseEnter",d="mouse",(t==="pointerout"||t==="pointerover")&&(v=Am,b="onPointerLeave",f="onPointerEnter",d="pointer"),N=x==null?u:Vn(x),g=j==null?u:Vn(j),u=new v(b,d+"leave",x,r,p),u.target=N,u.relatedTarget=g,b=null,hn(p)===h&&(v=new v(f,d+"enter",j,r,p),v.target=g,v.relatedTarget=N,b=v),N=b,x&&j)t:{for(v=x,f=j,d=0,g=v;g;g=Pn(g))d++;for(g=0,b=f;b;b=Pn(b))g++;for(;0<d-g;)v=Pn(v),d--;for(;0<g-d;)f=Pn(f),g--;for(;d--;){if(v===f||f!==null&&v===f.alternate)break t;v=Pn(v),f=Pn(f)}v=null}else v=null;x!==null&&Hm(m,u,x,v,!1),j!==null&&N!==null&&Hm(m,N,j,v,!0)}}e:{if(u=h?Vn(h):window,x=u.nodeName&&u.nodeName.toLowerCase(),x==="select"||x==="input"&&u.type==="file")var E=Ab;else if(Im(u))if(ex)E=Mb;else{E=Lb;var R=Tb}else(x=u.nodeName)&&x.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(E=Ib);if(E&&(E=E(t,h))){Xp(m,E,r,p);break e}R&&R(t,u,h),t==="focusout"&&(R=u._wrapperState)&&R.controlled&&u.type==="number"&&ld(u,"number",u.value)}switch(R=h?Vn(h):window,t){case"focusin":(Im(R)||R.contentEditable==="true")&&(zn=R,yd=h,sl=null);break;case"focusout":sl=yd=zn=null;break;case"mousedown":bd=!0;break;case"contextmenu":case"mouseup":case"dragend":bd=!1,Fm(m,r,p);break;case"selectionchange":if(Pb)break;case"keydown":case"keyup":Fm(m,r,p)}var S;if(Su)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Zp(t,r)&&(k="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(Qp&&r.locale!=="ko"&&(Bn||k!=="onCompositionStart"?k==="onCompositionEnd"&&Bn&&(S=Gp()):(Wr=p,Nu="value"in Wr?Wr.value:Wr.textContent,Bn=!0)),R=Vo(h,k),0<R.length&&(k=new Dm(k,t,null,r,p),m.push({event:k,listeners:R}),S?k.data=S:(S=Jp(r),S!==null&&(k.data=S)))),(S=Sb?_b(t,r):Cb(t,r))&&(h=Vo(h,"onBeforeInput"),0<h.length&&(p=new Dm("onBeforeInput","beforeinput",null,r,p),m.push({event:p,listeners:h}),p.data=S))}dx(m,s)})}function xl(t,s,r){return{instance:t,listener:s,currentTarget:r}}function Vo(t,s){for(var r=s+"Capture",n=[];t!==null;){var a=t,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=cl(t,r),l!=null&&n.unshift(xl(t,l,a)),l=cl(t,s),l!=null&&n.push(xl(t,l,a))),t=t.return}return n}function Pn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hm(t,s,r,n,a){for(var l=s._reactName,o=[];r!==null&&r!==n;){var i=r,c=i.alternate,h=i.stateNode;if(c!==null&&c===n)break;i.tag===5&&h!==null&&(i=h,a?(c=cl(r,l),c!=null&&o.unshift(xl(r,c,i))):a||(c=cl(r,l),c!=null&&o.push(xl(r,c,i)))),r=r.return}o.length!==0&&t.push({event:s,listeners:o})}var Hb=/\r\n?/g,Bb=/\u0000|\uFFFD/g;function Bm(t){return(typeof t=="string"?t:""+t).replace(Hb,`
`).replace(Bb,"")}function oo(t,s,r){if(s=Bm(s),Bm(t)!==s&&r)throw Error(Xe(425))}function Yo(){}var vd=null,jd=null;function Nd(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var wd=typeof setTimeout=="function"?setTimeout:void 0,zb=typeof clearTimeout=="function"?clearTimeout:void 0,zm=typeof Promise=="function"?Promise:void 0,Wb=typeof queueMicrotask=="function"?queueMicrotask:typeof zm<"u"?function(t){return zm.resolve(null).then(t).catch(Vb)}:wd;function Vb(t){setTimeout(function(){throw t})}function Sc(t,s){var r=s,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),ml(s);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);ml(s)}function Qr(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Wm(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var xa=Math.random().toString(36).slice(2),mr="__reactFiber$"+xa,gl="__reactProps$"+xa,Ar="__reactContainer$"+xa,Ed="__reactEvents$"+xa,Yb="__reactListeners$"+xa,qb="__reactHandles$"+xa;function hn(t){var s=t[mr];if(s)return s;for(var r=t.parentNode;r;){if(s=r[Ar]||r[mr]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Wm(t);t!==null;){if(r=t[mr])return r;t=Wm(t)}return s}t=r,r=t.parentNode}return null}function Il(t){return t=t[mr]||t[Ar],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Xe(33))}function Ci(t){return t[gl]||null}var Sd=[],Yn=-1;function nn(t){return{current:t}}function Ht(t){0>Yn||(t.current=Sd[Yn],Sd[Yn]=null,Yn--)}function Mt(t,s){Yn++,Sd[Yn]=t.current,t.current=s}var sn={},Ns=nn(sn),Ts=nn(!1),Nn=sn;function la(t,s){var r=t.type.contextTypes;if(!r)return sn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===s)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=s[l];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),a}function Ls(t){return t=t.childContextTypes,t!=null}function qo(){Ht(Ts),Ht(Ns)}function Vm(t,s,r){if(Ns.current!==sn)throw Error(Xe(168));Mt(Ns,s),Mt(Ts,r)}function mx(t,s,r){var n=t.stateNode;if(s=s.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(Xe(108,Ty(t)||"Unknown",a));return Gt({},r,n)}function Ko(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||sn,Nn=Ns.current,Mt(Ns,t),Mt(Ts,Ts.current),!0}function Ym(t,s,r){var n=t.stateNode;if(!n)throw Error(Xe(169));r?(t=mx(t,s,Nn),n.__reactInternalMemoizedMergedChildContext=t,Ht(Ts),Ht(Ns),Mt(Ns,t)):Ht(Ts),Mt(Ts,r)}var wr=null,ki=!1,_c=!1;function hx(t){wr===null?wr=[t]:wr.push(t)}function Kb(t){ki=!0,hx(t)}function an(){if(!_c&&wr!==null){_c=!0;var t=0,s=At;try{var r=wr;for(At=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}wr=null,ki=!1}catch(a){throw wr!==null&&(wr=wr.slice(t+1)),Fp(yu,an),a}finally{At=s,_c=!1}}return null}var qn=[],Kn=0,Go=null,Qo=0,Vs=[],Ys=0,wn=null,Er=1,Sr="";function on(t,s){qn[Kn++]=Qo,qn[Kn++]=Go,Go=t,Qo=s}function fx(t,s,r){Vs[Ys++]=Er,Vs[Ys++]=Sr,Vs[Ys++]=wn,wn=t;var n=Er;t=Sr;var a=32-sr(n)-1;n&=~(1<<a),r+=1;var l=32-sr(s)+a;if(30<l){var o=a-a%5;l=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Er=1<<32-sr(s)+a|r<<a|n,Sr=l+t}else Er=1<<l|r<<a|n,Sr=t}function Cu(t){t.return!==null&&(on(t,1),fx(t,1,0))}function ku(t){for(;t===Go;)Go=qn[--Kn],qn[Kn]=null,Qo=qn[--Kn],qn[Kn]=null;for(;t===wn;)wn=Vs[--Ys],Vs[Ys]=null,Sr=Vs[--Ys],Vs[Ys]=null,Er=Vs[--Ys],Vs[Ys]=null}var $s=null,Us=null,zt=!1,er=null;function px(t,s){var r=qs(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function qm(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,$s=t,Us=Qr(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,$s=t,Us=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=wn!==null?{id:Er,overflow:Sr}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=qs(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,$s=t,Us=null,!0):!1;default:return!1}}function _d(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Cd(t){if(zt){var s=Us;if(s){var r=s;if(!qm(t,s)){if(_d(t))throw Error(Xe(418));s=Qr(r.nextSibling);var n=$s;s&&qm(t,s)?px(n,r):(t.flags=t.flags&-4097|2,zt=!1,$s=t)}}else{if(_d(t))throw Error(Xe(418));t.flags=t.flags&-4097|2,zt=!1,$s=t}}}function Km(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$s=t}function io(t){if(t!==$s)return!1;if(!zt)return Km(t),zt=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Nd(t.type,t.memoizedProps)),s&&(s=Us)){if(_d(t))throw xx(),Error(Xe(418));for(;s;)px(t,s),s=Qr(s.nextSibling)}if(Km(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Xe(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){Us=Qr(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}Us=null}}else Us=$s?Qr(t.stateNode.nextSibling):null;return!0}function xx(){for(var t=Us;t;)t=Qr(t.nextSibling)}function oa(){Us=$s=null,zt=!1}function Du(t){er===null?er=[t]:er.push(t)}var Gb=Ir.ReactCurrentBatchConfig;function Fa(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Xe(309));var n=r.stateNode}if(!n)throw Error(Xe(147,t));var a=n,l=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(o){var i=a.refs;o===null?delete i[l]:i[l]=o},s._stringRef=l,s)}if(typeof t!="string")throw Error(Xe(284));if(!r._owner)throw Error(Xe(290,t))}return t}function co(t,s){throw t=Object.prototype.toString.call(s),Error(Xe(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Gm(t){var s=t._init;return s(t._payload)}function gx(t){function s(f,d){if(t){var g=f.deletions;g===null?(f.deletions=[d],f.flags|=16):g.push(d)}}function r(f,d){if(!t)return null;for(;d!==null;)s(f,d),d=d.sibling;return null}function n(f,d){for(f=new Map;d!==null;)d.key!==null?f.set(d.key,d):f.set(d.index,d),d=d.sibling;return f}function a(f,d){return f=en(f,d),f.index=0,f.sibling=null,f}function l(f,d,g){return f.index=g,t?(g=f.alternate,g!==null?(g=g.index,g<d?(f.flags|=2,d):g):(f.flags|=2,d)):(f.flags|=1048576,d)}function o(f){return t&&f.alternate===null&&(f.flags|=2),f}function i(f,d,g,b){return d===null||d.tag!==6?(d=Ic(g,f.mode,b),d.return=f,d):(d=a(d,g),d.return=f,d)}function c(f,d,g,b){var E=g.type;return E===Hn?p(f,d,g.props.children,b,g.key):d!==null&&(d.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===$r&&Gm(E)===d.type)?(b=a(d,g.props),b.ref=Fa(f,d,g),b.return=f,b):(b=Io(g.type,g.key,g.props,null,f.mode,b),b.ref=Fa(f,d,g),b.return=f,b)}function h(f,d,g,b){return d===null||d.tag!==4||d.stateNode.containerInfo!==g.containerInfo||d.stateNode.implementation!==g.implementation?(d=Mc(g,f.mode,b),d.return=f,d):(d=a(d,g.children||[]),d.return=f,d)}function p(f,d,g,b,E){return d===null||d.tag!==7?(d=bn(g,f.mode,b,E),d.return=f,d):(d=a(d,g),d.return=f,d)}function m(f,d,g){if(typeof d=="string"&&d!==""||typeof d=="number")return d=Ic(""+d,f.mode,g),d.return=f,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Jl:return g=Io(d.type,d.key,d.props,null,f.mode,g),g.ref=Fa(f,null,d),g.return=f,g;case $n:return d=Mc(d,f.mode,g),d.return=f,d;case $r:var b=d._init;return m(f,b(d._payload),g)}if(Ka(d)||Ia(d))return d=bn(d,f.mode,g,null),d.return=f,d;co(f,d)}return null}function u(f,d,g,b){var E=d!==null?d.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return E!==null?null:i(f,d,""+g,b);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Jl:return g.key===E?c(f,d,g,b):null;case $n:return g.key===E?h(f,d,g,b):null;case $r:return E=g._init,u(f,d,E(g._payload),b)}if(Ka(g)||Ia(g))return E!==null?null:p(f,d,g,b,null);co(f,g)}return null}function x(f,d,g,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return f=f.get(g)||null,i(d,f,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Jl:return f=f.get(b.key===null?g:b.key)||null,c(d,f,b,E);case $n:return f=f.get(b.key===null?g:b.key)||null,h(d,f,b,E);case $r:var R=b._init;return x(f,d,g,R(b._payload),E)}if(Ka(b)||Ia(b))return f=f.get(g)||null,p(d,f,b,E,null);co(d,b)}return null}function j(f,d,g,b){for(var E=null,R=null,S=d,k=d=0,L=null;S!==null&&k<g.length;k++){S.index>k?(L=S,S=null):L=S.sibling;var A=u(f,S,g[k],b);if(A===null){S===null&&(S=L);break}t&&S&&A.alternate===null&&s(f,S),d=l(A,d,k),R===null?E=A:R.sibling=A,R=A,S=L}if(k===g.length)return r(f,S),zt&&on(f,k),E;if(S===null){for(;k<g.length;k++)S=m(f,g[k],b),S!==null&&(d=l(S,d,k),R===null?E=S:R.sibling=S,R=S);return zt&&on(f,k),E}for(S=n(f,S);k<g.length;k++)L=x(S,f,k,g[k],b),L!==null&&(t&&L.alternate!==null&&S.delete(L.key===null?k:L.key),d=l(L,d,k),R===null?E=L:R.sibling=L,R=L);return t&&S.forEach(function(D){return s(f,D)}),zt&&on(f,k),E}function v(f,d,g,b){var E=Ia(g);if(typeof E!="function")throw Error(Xe(150));if(g=E.call(g),g==null)throw Error(Xe(151));for(var R=E=null,S=d,k=d=0,L=null,A=g.next();S!==null&&!A.done;k++,A=g.next()){S.index>k?(L=S,S=null):L=S.sibling;var D=u(f,S,A.value,b);if(D===null){S===null&&(S=L);break}t&&S&&D.alternate===null&&s(f,S),d=l(D,d,k),R===null?E=D:R.sibling=D,R=D,S=L}if(A.done)return r(f,S),zt&&on(f,k),E;if(S===null){for(;!A.done;k++,A=g.next())A=m(f,A.value,b),A!==null&&(d=l(A,d,k),R===null?E=A:R.sibling=A,R=A);return zt&&on(f,k),E}for(S=n(f,S);!A.done;k++,A=g.next())A=x(S,f,k,A.value,b),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?k:A.key),d=l(A,d,k),R===null?E=A:R.sibling=A,R=A);return t&&S.forEach(function(I){return s(f,I)}),zt&&on(f,k),E}function N(f,d,g,b){if(typeof g=="object"&&g!==null&&g.type===Hn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Jl:e:{for(var E=g.key,R=d;R!==null;){if(R.key===E){if(E=g.type,E===Hn){if(R.tag===7){r(f,R.sibling),d=a(R,g.props.children),d.return=f,f=d;break e}}else if(R.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===$r&&Gm(E)===R.type){r(f,R.sibling),d=a(R,g.props),d.ref=Fa(f,R,g),d.return=f,f=d;break e}r(f,R);break}else s(f,R);R=R.sibling}g.type===Hn?(d=bn(g.props.children,f.mode,b,g.key),d.return=f,f=d):(b=Io(g.type,g.key,g.props,null,f.mode,b),b.ref=Fa(f,d,g),b.return=f,f=b)}return o(f);case $n:e:{for(R=g.key;d!==null;){if(d.key===R)if(d.tag===4&&d.stateNode.containerInfo===g.containerInfo&&d.stateNode.implementation===g.implementation){r(f,d.sibling),d=a(d,g.children||[]),d.return=f,f=d;break e}else{r(f,d);break}else s(f,d);d=d.sibling}d=Mc(g,f.mode,b),d.return=f,f=d}return o(f);case $r:return R=g._init,N(f,d,R(g._payload),b)}if(Ka(g))return j(f,d,g,b);if(Ia(g))return v(f,d,g,b);co(f,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,d!==null&&d.tag===6?(r(f,d.sibling),d=a(d,g),d.return=f,f=d):(r(f,d),d=Ic(g,f.mode,b),d.return=f,f=d),o(f)):r(f,d)}return N}var ia=gx(!0),yx=gx(!1),Zo=nn(null),Jo=null,Gn=null,Au=null;function Tu(){Au=Gn=Jo=null}function Lu(t){var s=Zo.current;Ht(Zo),t._currentValue=s}function kd(t,s,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,n!==null&&(n.childLanes|=s)):n!==null&&(n.childLanes&s)!==s&&(n.childLanes|=s),t===r)break;t=t.return}}function ra(t,s){Jo=t,Au=Gn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(As=!0),t.firstContext=null)}function Gs(t){var s=t._currentValue;if(Au!==t)if(t={context:t,memoizedValue:s,next:null},Gn===null){if(Jo===null)throw Error(Xe(308));Gn=t,Jo.dependencies={lanes:0,firstContext:t}}else Gn=Gn.next=t;return s}var fn=null;function Iu(t){fn===null?fn=[t]:fn.push(t)}function bx(t,s,r,n){var a=s.interleaved;return a===null?(r.next=r,Iu(s)):(r.next=a.next,a.next=r),s.interleaved=r,Tr(t,n)}function Tr(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Hr=!1;function Mu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vx(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kr(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Zr(t,s,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ct&2){var a=n.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s,Tr(t,r)}return a=n.interleaved,a===null?(s.next=s,Iu(n)):(s.next=a.next,a.next=s),n.interleaved=s,Tr(t,r)}function Co(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var n=s.lanes;n&=t.pendingLanes,r|=n,s.lanes=r,bu(t,r)}}function Qm(t,s){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=o:l=l.next=o,r=r.next}while(r!==null);l===null?a=l=s:l=l.next=s}else a=l=s;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function Xo(t,s,r,n){var a=t.updateQueue;Hr=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,i=a.shared.pending;if(i!==null){a.shared.pending=null;var c=i,h=c.next;c.next=null,o===null?l=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,i=p.lastBaseUpdate,i!==o&&(i===null?p.firstBaseUpdate=h:i.next=h,p.lastBaseUpdate=c))}if(l!==null){var m=a.baseState;o=0,p=h=c=null,i=l;do{var u=i.lane,x=i.eventTime;if((n&u)===u){p!==null&&(p=p.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var j=t,v=i;switch(u=s,x=r,v.tag){case 1:if(j=v.payload,typeof j=="function"){m=j.call(x,m,u);break e}m=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=v.payload,u=typeof j=="function"?j.call(x,m,u):j,u==null)break e;m=Gt({},m,u);break e;case 2:Hr=!0}}i.callback!==null&&i.lane!==0&&(t.flags|=64,u=a.effects,u===null?a.effects=[i]:u.push(i))}else x={eventTime:x,lane:u,tag:i.tag,payload:i.payload,callback:i.callback,next:null},p===null?(h=p=x,c=m):p=p.next=x,o|=u;if(i=i.next,i===null){if(i=a.shared.pending,i===null)break;u=i,i=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}while(!0);if(p===null&&(c=m),a.baseState=c,a.firstBaseUpdate=h,a.lastBaseUpdate=p,s=a.shared.interleaved,s!==null){a=s;do o|=a.lane,a=a.next;while(a!==s)}else l===null&&(a.shared.lanes=0);Sn|=o,t.lanes=o,t.memoizedState=m}}function Zm(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var n=t[s],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Xe(191,a));a.call(n)}}}var Ml={},pr=nn(Ml),yl=nn(Ml),bl=nn(Ml);function pn(t){if(t===Ml)throw Error(Xe(174));return t}function Ru(t,s){switch(Mt(bl,s),Mt(yl,t),Mt(pr,Ml),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:id(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=id(s,t)}Ht(pr),Mt(pr,s)}function ca(){Ht(pr),Ht(yl),Ht(bl)}function jx(t){pn(bl.current);var s=pn(pr.current),r=id(s,t.type);s!==r&&(Mt(yl,t),Mt(pr,r))}function Ou(t){yl.current===t&&(Ht(pr),Ht(yl))}var qt=nn(0);function ei(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Cc=[];function Pu(){for(var t=0;t<Cc.length;t++)Cc[t]._workInProgressVersionPrimary=null;Cc.length=0}var ko=Ir.ReactCurrentDispatcher,kc=Ir.ReactCurrentBatchConfig,En=0,Kt=null,is=null,us=null,ti=!1,rl=!1,vl=0,Qb=0;function gs(){throw Error(Xe(321))}function Fu(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!nr(t[r],s[r]))return!1;return!0}function Uu(t,s,r,n,a,l){if(En=l,Kt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ko.current=t===null||t.memoizedState===null?ev:tv,t=r(n,a),rl){l=0;do{if(rl=!1,vl=0,25<=l)throw Error(Xe(301));l+=1,us=is=null,s.updateQueue=null,ko.current=sv,t=r(n,a)}while(rl)}if(ko.current=si,s=is!==null&&is.next!==null,En=0,us=is=Kt=null,ti=!1,s)throw Error(Xe(300));return t}function $u(){var t=vl!==0;return vl=0,t}function dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return us===null?Kt.memoizedState=us=t:us=us.next=t,us}function Qs(){if(is===null){var t=Kt.alternate;t=t!==null?t.memoizedState:null}else t=is.next;var s=us===null?Kt.memoizedState:us.next;if(s!==null)us=s,is=t;else{if(t===null)throw Error(Xe(310));is=t,t={memoizedState:is.memoizedState,baseState:is.baseState,baseQueue:is.baseQueue,queue:is.queue,next:null},us===null?Kt.memoizedState=us=t:us=us.next=t}return us}function jl(t,s){return typeof s=="function"?s(t):s}function Dc(t){var s=Qs(),r=s.queue;if(r===null)throw Error(Xe(311));r.lastRenderedReducer=t;var n=is,a=n.baseQueue,l=r.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}n.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,n=n.baseState;var i=o=null,c=null,h=l;do{var p=h.lane;if((En&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:t(n,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(i=c=m,o=n):c=c.next=m,Kt.lanes|=p,Sn|=p}h=h.next}while(h!==null&&h!==l);c===null?o=n:c.next=i,nr(n,s.memoizedState)||(As=!0),s.memoizedState=n,s.baseState=o,s.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do l=a.lane,Kt.lanes|=l,Sn|=l,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function Ac(t){var s=Qs(),r=s.queue;if(r===null)throw Error(Xe(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,l=s.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do l=t(l,o.action),o=o.next;while(o!==a);nr(l,s.memoizedState)||(As=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),r.lastRenderedState=l}return[l,n]}function Nx(){}function wx(t,s){var r=Kt,n=Qs(),a=s(),l=!nr(n.memoizedState,a);if(l&&(n.memoizedState=a,As=!0),n=n.queue,Hu(_x.bind(null,r,n,t),[t]),n.getSnapshot!==s||l||us!==null&&us.memoizedState.tag&1){if(r.flags|=2048,Nl(9,Sx.bind(null,r,n,a,s),void 0,null),ms===null)throw Error(Xe(349));En&30||Ex(r,s,a)}return a}function Ex(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Kt.updateQueue,s===null?(s={lastEffect:null,stores:null},Kt.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function Sx(t,s,r,n){s.value=r,s.getSnapshot=n,Cx(s)&&kx(t)}function _x(t,s,r){return r(function(){Cx(s)&&kx(t)})}function Cx(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!nr(t,r)}catch{return!0}}function kx(t){var s=Tr(t,1);s!==null&&rr(s,t,1,-1)}function Jm(t){var s=dr();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:t},s.queue=t,t=t.dispatch=Xb.bind(null,Kt,t),[s.memoizedState,t]}function Nl(t,s,r,n){return t={tag:t,create:s,destroy:r,deps:n,next:null},s=Kt.updateQueue,s===null?(s={lastEffect:null,stores:null},Kt.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,s.lastEffect=t)),t}function Dx(){return Qs().memoizedState}function Do(t,s,r,n){var a=dr();Kt.flags|=t,a.memoizedState=Nl(1|s,r,void 0,n===void 0?null:n)}function Di(t,s,r,n){var a=Qs();n=n===void 0?null:n;var l=void 0;if(is!==null){var o=is.memoizedState;if(l=o.destroy,n!==null&&Fu(n,o.deps)){a.memoizedState=Nl(s,r,l,n);return}}Kt.flags|=t,a.memoizedState=Nl(1|s,r,l,n)}function Xm(t,s){return Do(8390656,8,t,s)}function Hu(t,s){return Di(2048,8,t,s)}function Ax(t,s){return Di(4,2,t,s)}function Tx(t,s){return Di(4,4,t,s)}function Lx(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Ix(t,s,r){return r=r!=null?r.concat([t]):null,Di(4,4,Lx.bind(null,s,t),r)}function Bu(){}function Mx(t,s){var r=Qs();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&Fu(s,n[1])?n[0]:(r.memoizedState=[t,s],t)}function Rx(t,s){var r=Qs();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&Fu(s,n[1])?n[0]:(t=t(),r.memoizedState=[t,s],t)}function Ox(t,s,r){return En&21?(nr(r,s)||(r=Hp(),Kt.lanes|=r,Sn|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,As=!0),t.memoizedState=r)}function Zb(t,s){var r=At;At=r!==0&&4>r?r:4,t(!0);var n=kc.transition;kc.transition={};try{t(!1),s()}finally{At=r,kc.transition=n}}function Px(){return Qs().memoizedState}function Jb(t,s,r){var n=Xr(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Fx(t))Ux(s,r);else if(r=bx(t,s,r,n),r!==null){var a=Es();rr(r,t,n,a),$x(r,s,n)}}function Xb(t,s,r){var n=Xr(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Fx(t))Ux(s,a);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var o=s.lastRenderedState,i=l(o,r);if(a.hasEagerState=!0,a.eagerState=i,nr(i,o)){var c=s.interleaved;c===null?(a.next=a,Iu(s)):(a.next=c.next,c.next=a),s.interleaved=a;return}}catch{}finally{}r=bx(t,s,a,n),r!==null&&(a=Es(),rr(r,t,n,a),$x(r,s,n))}}function Fx(t){var s=t.alternate;return t===Kt||s!==null&&s===Kt}function Ux(t,s){rl=ti=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function $x(t,s,r){if(r&4194240){var n=s.lanes;n&=t.pendingLanes,r|=n,s.lanes=r,bu(t,r)}}var si={readContext:Gs,useCallback:gs,useContext:gs,useEffect:gs,useImperativeHandle:gs,useInsertionEffect:gs,useLayoutEffect:gs,useMemo:gs,useReducer:gs,useRef:gs,useState:gs,useDebugValue:gs,useDeferredValue:gs,useTransition:gs,useMutableSource:gs,useSyncExternalStore:gs,useId:gs,unstable_isNewReconciler:!1},ev={readContext:Gs,useCallback:function(t,s){return dr().memoizedState=[t,s===void 0?null:s],t},useContext:Gs,useEffect:Xm,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,Do(4194308,4,Lx.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Do(4194308,4,t,s)},useInsertionEffect:function(t,s){return Do(4,2,t,s)},useMemo:function(t,s){var r=dr();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var n=dr();return s=r!==void 0?r(s):s,n.memoizedState=n.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},n.queue=t,t=t.dispatch=Jb.bind(null,Kt,t),[n.memoizedState,t]},useRef:function(t){var s=dr();return t={current:t},s.memoizedState=t},useState:Jm,useDebugValue:Bu,useDeferredValue:function(t){return dr().memoizedState=t},useTransition:function(){var t=Jm(!1),s=t[0];return t=Zb.bind(null,t[1]),dr().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var n=Kt,a=dr();if(zt){if(r===void 0)throw Error(Xe(407));r=r()}else{if(r=s(),ms===null)throw Error(Xe(349));En&30||Ex(n,s,r)}a.memoizedState=r;var l={value:r,getSnapshot:s};return a.queue=l,Xm(_x.bind(null,n,l,t),[t]),n.flags|=2048,Nl(9,Sx.bind(null,n,l,r,s),void 0,null),r},useId:function(){var t=dr(),s=ms.identifierPrefix;if(zt){var r=Sr,n=Er;r=(n&~(1<<32-sr(n)-1)).toString(32)+r,s=":"+s+"R"+r,r=vl++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=Qb++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},tv={readContext:Gs,useCallback:Mx,useContext:Gs,useEffect:Hu,useImperativeHandle:Ix,useInsertionEffect:Ax,useLayoutEffect:Tx,useMemo:Rx,useReducer:Dc,useRef:Dx,useState:function(){return Dc(jl)},useDebugValue:Bu,useDeferredValue:function(t){var s=Qs();return Ox(s,is.memoizedState,t)},useTransition:function(){var t=Dc(jl)[0],s=Qs().memoizedState;return[t,s]},useMutableSource:Nx,useSyncExternalStore:wx,useId:Px,unstable_isNewReconciler:!1},sv={readContext:Gs,useCallback:Mx,useContext:Gs,useEffect:Hu,useImperativeHandle:Ix,useInsertionEffect:Ax,useLayoutEffect:Tx,useMemo:Rx,useReducer:Ac,useRef:Dx,useState:function(){return Ac(jl)},useDebugValue:Bu,useDeferredValue:function(t){var s=Qs();return is===null?s.memoizedState=t:Ox(s,is.memoizedState,t)},useTransition:function(){var t=Ac(jl)[0],s=Qs().memoizedState;return[t,s]},useMutableSource:Nx,useSyncExternalStore:wx,useId:Px,unstable_isNewReconciler:!1};function Js(t,s){if(t&&t.defaultProps){s=Gt({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function Dd(t,s,r,n){s=t.memoizedState,r=r(n,s),r=r==null?s:Gt({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ai={isMounted:function(t){return(t=t._reactInternals)?Dn(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var n=Es(),a=Xr(t),l=kr(n,a);l.payload=s,r!=null&&(l.callback=r),s=Zr(t,l,a),s!==null&&(rr(s,t,a,n),Co(s,t,a))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var n=Es(),a=Xr(t),l=kr(n,a);l.tag=1,l.payload=s,r!=null&&(l.callback=r),s=Zr(t,l,a),s!==null&&(rr(s,t,a,n),Co(s,t,a))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=Es(),n=Xr(t),a=kr(r,n);a.tag=2,s!=null&&(a.callback=s),s=Zr(t,a,n),s!==null&&(rr(s,t,n,r),Co(s,t,n))}};function eh(t,s,r,n,a,l,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,l,o):s.prototype&&s.prototype.isPureReactComponent?!fl(r,n)||!fl(a,l):!0}function Hx(t,s,r){var n=!1,a=sn,l=s.contextType;return typeof l=="object"&&l!==null?l=Gs(l):(a=Ls(s)?Nn:Ns.current,n=s.contextTypes,l=(n=n!=null)?la(t,a):sn),s=new s(r,l),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ai,t.stateNode=s,s._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=l),s}function th(t,s,r,n){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,n),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,n),s.state!==t&&Ai.enqueueReplaceState(s,s.state,null)}function Ad(t,s,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},Mu(t);var l=s.contextType;typeof l=="object"&&l!==null?a.context=Gs(l):(l=Ls(s)?Nn:Ns.current,a.context=la(t,l)),a.state=t.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(Dd(t,s,l,r),a.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&Ai.enqueueReplaceState(a,a.state,null),Xo(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function da(t,s){try{var r="",n=s;do r+=Ay(n),n=n.return;while(n);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:s,stack:a,digest:null}}function Tc(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function Td(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var rv=typeof WeakMap=="function"?WeakMap:Map;function Bx(t,s,r){r=kr(-1,r),r.tag=3,r.payload={element:null};var n=s.value;return r.callback=function(){ni||(ni=!0,Hd=n),Td(t,s)},r}function zx(t,s,r){r=kr(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=s.value;r.payload=function(){return n(a)},r.callback=function(){Td(t,s)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Td(t,s),typeof n!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var o=s.stack;this.componentDidCatch(s.value,{componentStack:o!==null?o:""})}),r}function sh(t,s,r){var n=t.pingCache;if(n===null){n=t.pingCache=new rv;var a=new Set;n.set(s,a)}else a=n.get(s),a===void 0&&(a=new Set,n.set(s,a));a.has(r)||(a.add(r),t=gv.bind(null,t,s,r),s.then(t,t))}function rh(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function nh(t,s,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=kr(-1,1),s.tag=2,Zr(r,s,1))),r.lanes|=1),t)}var nv=Ir.ReactCurrentOwner,As=!1;function ws(t,s,r,n){s.child=t===null?yx(s,null,r,n):ia(s,t.child,r,n)}function ah(t,s,r,n,a){r=r.render;var l=s.ref;return ra(s,a),n=Uu(t,s,r,n,l,a),r=$u(),t!==null&&!As?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,Lr(t,s,a)):(zt&&r&&Cu(s),s.flags|=1,ws(t,s,n,a),s.child)}function lh(t,s,r,n,a){if(t===null){var l=r.type;return typeof l=="function"&&!Qu(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=l,Wx(t,s,l,n,a)):(t=Io(r.type,null,n,s,s.mode,a),t.ref=s.ref,t.return=s,s.child=t)}if(l=t.child,!(t.lanes&a)){var o=l.memoizedProps;if(r=r.compare,r=r!==null?r:fl,r(o,n)&&t.ref===s.ref)return Lr(t,s,a)}return s.flags|=1,t=en(l,n),t.ref=s.ref,t.return=s,s.child=t}function Wx(t,s,r,n,a){if(t!==null){var l=t.memoizedProps;if(fl(l,n)&&t.ref===s.ref)if(As=!1,s.pendingProps=n=l,(t.lanes&a)!==0)t.flags&131072&&(As=!0);else return s.lanes=t.lanes,Lr(t,s,a)}return Ld(t,s,r,n,a)}function Vx(t,s,r){var n=s.pendingProps,a=n.children,l=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(Zn,Os),Os|=r;else{if(!(r&1073741824))return t=l!==null?l.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Mt(Zn,Os),Os|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,Mt(Zn,Os),Os|=n}else l!==null?(n=l.baseLanes|r,s.memoizedState=null):n=r,Mt(Zn,Os),Os|=n;return ws(t,s,a,r),s.child}function Yx(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function Ld(t,s,r,n,a){var l=Ls(r)?Nn:Ns.current;return l=la(s,l),ra(s,a),r=Uu(t,s,r,n,l,a),n=$u(),t!==null&&!As?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,Lr(t,s,a)):(zt&&n&&Cu(s),s.flags|=1,ws(t,s,r,a),s.child)}function oh(t,s,r,n,a){if(Ls(r)){var l=!0;Ko(s)}else l=!1;if(ra(s,a),s.stateNode===null)Ao(t,s),Hx(s,r,n),Ad(s,r,n,a),n=!0;else if(t===null){var o=s.stateNode,i=s.memoizedProps;o.props=i;var c=o.context,h=r.contextType;typeof h=="object"&&h!==null?h=Gs(h):(h=Ls(r)?Nn:Ns.current,h=la(s,h));var p=r.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==n||c!==h)&&th(s,o,n,h),Hr=!1;var u=s.memoizedState;o.state=u,Xo(s,n,o,a),c=s.memoizedState,i!==n||u!==c||Ts.current||Hr?(typeof p=="function"&&(Dd(s,r,p,n),c=s.memoizedState),(i=Hr||eh(s,r,i,n,u,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(s.flags|=4194308)):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=n,s.memoizedState=c),o.props=n,o.state=c,o.context=h,n=i):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),n=!1)}else{o=s.stateNode,vx(t,s),i=s.memoizedProps,h=s.type===s.elementType?i:Js(s.type,i),o.props=h,m=s.pendingProps,u=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Gs(c):(c=Ls(r)?Nn:Ns.current,c=la(s,c));var x=r.getDerivedStateFromProps;(p=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==m||u!==c)&&th(s,o,n,c),Hr=!1,u=s.memoizedState,o.state=u,Xo(s,n,o,a);var j=s.memoizedState;i!==m||u!==j||Ts.current||Hr?(typeof x=="function"&&(Dd(s,r,x,n),j=s.memoizedState),(h=Hr||eh(s,r,h,n,u,j,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,j,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,j,c)),typeof o.componentDidUpdate=="function"&&(s.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===t.memoizedProps&&u===t.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===t.memoizedProps&&u===t.memoizedState||(s.flags|=1024),s.memoizedProps=n,s.memoizedState=j),o.props=n,o.state=j,o.context=c,n=h):(typeof o.componentDidUpdate!="function"||i===t.memoizedProps&&u===t.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===t.memoizedProps&&u===t.memoizedState||(s.flags|=1024),n=!1)}return Id(t,s,r,n,l,a)}function Id(t,s,r,n,a,l){Yx(t,s);var o=(s.flags&128)!==0;if(!n&&!o)return a&&Ym(s,r,!1),Lr(t,s,l);n=s.stateNode,nv.current=s;var i=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return s.flags|=1,t!==null&&o?(s.child=ia(s,t.child,null,l),s.child=ia(s,null,i,l)):ws(t,s,i,l),s.memoizedState=n.state,a&&Ym(s,r,!0),s.child}function qx(t){var s=t.stateNode;s.pendingContext?Vm(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Vm(t,s.context,!1),Ru(t,s.containerInfo)}function ih(t,s,r,n,a){return oa(),Du(a),s.flags|=256,ws(t,s,r,n),s.child}var Md={dehydrated:null,treeContext:null,retryLane:0};function Rd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Kx(t,s,r){var n=s.pendingProps,a=qt.current,l=!1,o=(s.flags&128)!==0,i;if((i=o)||(i=t!==null&&t.memoizedState===null?!1:(a&2)!==0),i?(l=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Mt(qt,a&1),t===null)return Cd(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(o=n.children,t=n.fallback,l?(n=s.mode,l=s.child,o={mode:"hidden",children:o},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=Ii(o,n,0,null),t=bn(t,n,r,null),l.return=s,t.return=s,l.sibling=t,s.child=l,s.child.memoizedState=Rd(r),s.memoizedState=Md,t):zu(s,o));if(a=t.memoizedState,a!==null&&(i=a.dehydrated,i!==null))return av(t,s,o,n,i,a,r);if(l){l=n.fallback,o=s.mode,a=t.child,i=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&s.child!==a?(n=s.child,n.childLanes=0,n.pendingProps=c,s.deletions=null):(n=en(a,c),n.subtreeFlags=a.subtreeFlags&14680064),i!==null?l=en(i,l):(l=bn(l,o,r,null),l.flags|=2),l.return=s,n.return=s,n.sibling=l,s.child=n,n=l,l=s.child,o=t.child.memoizedState,o=o===null?Rd(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=t.childLanes&~r,s.memoizedState=Md,n}return l=t.child,t=l.sibling,n=en(l,{mode:"visible",children:n.children}),!(s.mode&1)&&(n.lanes=r),n.return=s,n.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=n,s.memoizedState=null,n}function zu(t,s){return s=Ii({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function uo(t,s,r,n){return n!==null&&Du(n),ia(s,t.child,null,r),t=zu(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function av(t,s,r,n,a,l,o){if(r)return s.flags&256?(s.flags&=-257,n=Tc(Error(Xe(422))),uo(t,s,o,n)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(l=n.fallback,a=s.mode,n=Ii({mode:"visible",children:n.children},a,0,null),l=bn(l,a,o,null),l.flags|=2,n.return=s,l.return=s,n.sibling=l,s.child=n,s.mode&1&&ia(s,t.child,null,o),s.child.memoizedState=Rd(o),s.memoizedState=Md,l);if(!(s.mode&1))return uo(t,s,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var i=n.dgst;return n=i,l=Error(Xe(419)),n=Tc(l,n,void 0),uo(t,s,o,n)}if(i=(o&t.childLanes)!==0,As||i){if(n=ms,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Tr(t,a),rr(n,t,a,-1))}return Gu(),n=Tc(Error(Xe(421))),uo(t,s,o,n)}return a.data==="$?"?(s.flags|=128,s.child=t.child,s=yv.bind(null,t),a._reactRetry=s,null):(t=l.treeContext,Us=Qr(a.nextSibling),$s=s,zt=!0,er=null,t!==null&&(Vs[Ys++]=Er,Vs[Ys++]=Sr,Vs[Ys++]=wn,Er=t.id,Sr=t.overflow,wn=s),s=zu(s,n.children),s.flags|=4096,s)}function ch(t,s,r){t.lanes|=s;var n=t.alternate;n!==null&&(n.lanes|=s),kd(t.return,s,r)}function Lc(t,s,r,n,a){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=a)}function Gx(t,s,r){var n=s.pendingProps,a=n.revealOrder,l=n.tail;if(ws(t,s,n.children,r),n=qt.current,n&2)n=n&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ch(t,r,s);else if(t.tag===19)ch(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Mt(qt,n),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(r=s.child,a=null;r!==null;)t=r.alternate,t!==null&&ei(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=s.child,s.child=null):(a=r.sibling,r.sibling=null),Lc(s,!1,a,r,l);break;case"backwards":for(r=null,a=s.child,s.child=null;a!==null;){if(t=a.alternate,t!==null&&ei(t)===null){s.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}Lc(s,!0,r,null,l);break;case"together":Lc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ao(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Lr(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),Sn|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(Xe(153));if(s.child!==null){for(t=s.child,r=en(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=en(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function lv(t,s,r){switch(s.tag){case 3:qx(s),oa();break;case 5:jx(s);break;case 1:Ls(s.type)&&Ko(s);break;case 4:Ru(s,s.stateNode.containerInfo);break;case 10:var n=s.type._context,a=s.memoizedProps.value;Mt(Zo,n._currentValue),n._currentValue=a;break;case 13:if(n=s.memoizedState,n!==null)return n.dehydrated!==null?(Mt(qt,qt.current&1),s.flags|=128,null):r&s.child.childLanes?Kx(t,s,r):(Mt(qt,qt.current&1),t=Lr(t,s,r),t!==null?t.sibling:null);Mt(qt,qt.current&1);break;case 19:if(n=(r&s.childLanes)!==0,t.flags&128){if(n)return Gx(t,s,r);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Mt(qt,qt.current),n)break;return null;case 22:case 23:return s.lanes=0,Vx(t,s,r)}return Lr(t,s,r)}var Qx,Od,Zx,Jx;Qx=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Od=function(){};Zx=function(t,s,r,n){var a=t.memoizedProps;if(a!==n){t=s.stateNode,pn(pr.current);var l=null;switch(r){case"input":a=nd(t,a),n=nd(t,n),l=[];break;case"select":a=Gt({},a,{value:void 0}),n=Gt({},n,{value:void 0}),l=[];break;case"textarea":a=od(t,a),n=od(t,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Yo)}cd(r,n);var o;r=null;for(h in a)if(!n.hasOwnProperty(h)&&a.hasOwnProperty(h)&&a[h]!=null)if(h==="style"){var i=a[h];for(o in i)i.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ol.hasOwnProperty(h)?l||(l=[]):(l=l||[]).push(h,null));for(h in n){var c=n[h];if(i=a!=null?a[h]:void 0,n.hasOwnProperty(h)&&c!==i&&(c!=null||i!=null))if(h==="style")if(i){for(o in i)!i.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&i[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(l||(l=[]),l.push(h,r)),r=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ol.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Ut("scroll",t),l||i===c||(l=[])):(l=l||[]).push(h,c))}r&&(l=l||[]).push("style",r);var h=l;(s.updateQueue=h)&&(s.flags|=4)}};Jx=function(t,s,r,n){r!==n&&(s.flags|=4)};function Ua(t,s){if(!zt)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ys(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(s)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,s}function ov(t,s,r){var n=s.pendingProps;switch(ku(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ys(s),null;case 1:return Ls(s.type)&&qo(),ys(s),null;case 3:return n=s.stateNode,ca(),Ht(Ts),Ht(Ns),Pu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(io(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,er!==null&&(Wd(er),er=null))),Od(t,s),ys(s),null;case 5:Ou(s);var a=pn(bl.current);if(r=s.type,t!==null&&s.stateNode!=null)Zx(t,s,r,n,a),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!n){if(s.stateNode===null)throw Error(Xe(166));return ys(s),null}if(t=pn(pr.current),io(s)){n=s.stateNode,r=s.type;var l=s.memoizedProps;switch(n[mr]=s,n[gl]=l,t=(s.mode&1)!==0,r){case"dialog":Ut("cancel",n),Ut("close",n);break;case"iframe":case"object":case"embed":Ut("load",n);break;case"video":case"audio":for(a=0;a<Qa.length;a++)Ut(Qa[a],n);break;case"source":Ut("error",n);break;case"img":case"image":case"link":Ut("error",n),Ut("load",n);break;case"details":Ut("toggle",n);break;case"input":ym(n,l),Ut("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},Ut("invalid",n);break;case"textarea":vm(n,l),Ut("invalid",n)}cd(r,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var i=l[o];o==="children"?typeof i=="string"?n.textContent!==i&&(l.suppressHydrationWarning!==!0&&oo(n.textContent,i,t),a=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&oo(n.textContent,i,t),a=["children",""+i]):ol.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&Ut("scroll",n)}switch(r){case"input":Xl(n),bm(n,l,!0);break;case"textarea":Xl(n),jm(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=Yo)}n=a,s.updateQueue=n,n!==null&&(s.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_p(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[mr]=s,t[gl]=n,Qx(t,s,!1,!1),s.stateNode=t;e:{switch(o=dd(r,n),r){case"dialog":Ut("cancel",t),Ut("close",t),a=n;break;case"iframe":case"object":case"embed":Ut("load",t),a=n;break;case"video":case"audio":for(a=0;a<Qa.length;a++)Ut(Qa[a],t);a=n;break;case"source":Ut("error",t),a=n;break;case"img":case"image":case"link":Ut("error",t),Ut("load",t),a=n;break;case"details":Ut("toggle",t),a=n;break;case"input":ym(t,n),a=nd(t,n),Ut("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=Gt({},n,{value:void 0}),Ut("invalid",t);break;case"textarea":vm(t,n),a=od(t,n),Ut("invalid",t);break;default:a=n}cd(r,a),i=a;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?Dp(t,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Cp(t,c)):l==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&il(t,c):typeof c=="number"&&il(t,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ol.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Ut("scroll",t):c!=null&&hu(t,l,c,o))}switch(r){case"input":Xl(t),bm(t,n,!1);break;case"textarea":Xl(t),jm(t);break;case"option":n.value!=null&&t.setAttribute("value",""+tn(n.value));break;case"select":t.multiple=!!n.multiple,l=n.value,l!=null?Xn(t,!!n.multiple,l,!1):n.defaultValue!=null&&Xn(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Yo)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return ys(s),null;case 6:if(t&&s.stateNode!=null)Jx(t,s,t.memoizedProps,n);else{if(typeof n!="string"&&s.stateNode===null)throw Error(Xe(166));if(r=pn(bl.current),pn(pr.current),io(s)){if(n=s.stateNode,r=s.memoizedProps,n[mr]=s,(l=n.nodeValue!==r)&&(t=$s,t!==null))switch(t.tag){case 3:oo(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&oo(n.nodeValue,r,(t.mode&1)!==0)}l&&(s.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[mr]=s,s.stateNode=n}return ys(s),null;case 13:if(Ht(qt),n=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(zt&&Us!==null&&s.mode&1&&!(s.flags&128))xx(),oa(),s.flags|=98560,l=!1;else if(l=io(s),n!==null&&n.dehydrated!==null){if(t===null){if(!l)throw Error(Xe(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Xe(317));l[mr]=s}else oa(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;ys(s),l=!1}else er!==null&&(Wd(er),er=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(s.child.flags|=8192,s.mode&1&&(t===null||qt.current&1?cs===0&&(cs=3):Gu())),s.updateQueue!==null&&(s.flags|=4),ys(s),null);case 4:return ca(),Od(t,s),t===null&&pl(s.stateNode.containerInfo),ys(s),null;case 10:return Lu(s.type._context),ys(s),null;case 17:return Ls(s.type)&&qo(),ys(s),null;case 19:if(Ht(qt),l=s.memoizedState,l===null)return ys(s),null;if(n=(s.flags&128)!==0,o=l.rendering,o===null)if(n)Ua(l,!1);else{if(cs!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(o=ei(t),o!==null){for(s.flags|=128,Ua(l,!1),n=o.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),s.subtreeFlags=0,n=r,r=s.child;r!==null;)l=r,t=n,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,t=o.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Mt(qt,qt.current&1|2),s.child}t=t.sibling}l.tail!==null&&rs()>ua&&(s.flags|=128,n=!0,Ua(l,!1),s.lanes=4194304)}else{if(!n)if(t=ei(o),t!==null){if(s.flags|=128,n=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),Ua(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!zt)return ys(s),null}else 2*rs()-l.renderingStartTime>ua&&r!==1073741824&&(s.flags|=128,n=!0,Ua(l,!1),s.lanes=4194304);l.isBackwards?(o.sibling=s.child,s.child=o):(r=l.last,r!==null?r.sibling=o:s.child=o,l.last=o)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=rs(),s.sibling=null,r=qt.current,Mt(qt,n?r&1|2:r&1),s):(ys(s),null);case 22:case 23:return Ku(),n=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(s.flags|=8192),n&&s.mode&1?Os&1073741824&&(ys(s),s.subtreeFlags&6&&(s.flags|=8192)):ys(s),null;case 24:return null;case 25:return null}throw Error(Xe(156,s.tag))}function iv(t,s){switch(ku(s),s.tag){case 1:return Ls(s.type)&&qo(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ca(),Ht(Ts),Ht(Ns),Pu(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return Ou(s),null;case 13:if(Ht(qt),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(Xe(340));oa()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Ht(qt),null;case 4:return ca(),null;case 10:return Lu(s.type._context),null;case 22:case 23:return Ku(),null;case 24:return null;default:return null}}var mo=!1,vs=!1,cv=typeof WeakSet=="function"?WeakSet:Set,ut=null;function Qn(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){es(t,s,n)}else r.current=null}function Pd(t,s,r){try{r()}catch(n){es(t,s,n)}}var dh=!1;function dv(t,s){if(vd=zo,t=rx(),_u(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var o=0,i=-1,c=-1,h=0,p=0,m=t,u=null;t:for(;;){for(var x;m!==r||a!==0&&m.nodeType!==3||(i=o+a),m!==l||n!==0&&m.nodeType!==3||(c=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(x=m.firstChild)!==null;)u=m,m=x;for(;;){if(m===t)break t;if(u===r&&++h===a&&(i=o),u===l&&++p===n&&(c=o),(x=m.nextSibling)!==null)break;m=u,u=m.parentNode}m=x}r=i===-1||c===-1?null:{start:i,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(jd={focusedElem:t,selectionRange:r},zo=!1,ut=s;ut!==null;)if(s=ut,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,ut=t;else for(;ut!==null;){s=ut;try{var j=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var v=j.memoizedProps,N=j.memoizedState,f=s.stateNode,d=f.getSnapshotBeforeUpdate(s.elementType===s.type?v:Js(s.type,v),N);f.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var g=s.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Xe(163))}}catch(b){es(s,s.return,b)}if(t=s.sibling,t!==null){t.return=s.return,ut=t;break}ut=s.return}return j=dh,dh=!1,j}function nl(t,s,r){var n=s.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var l=a.destroy;a.destroy=void 0,l!==void 0&&Pd(s,r,l)}a=a.next}while(a!==n)}}function Ti(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==s)}}function Fd(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function Xx(t){var s=t.alternate;s!==null&&(t.alternate=null,Xx(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[mr],delete s[gl],delete s[Ed],delete s[Yb],delete s[qb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eg(t){return t.tag===5||t.tag===3||t.tag===4}function uh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ud(t,s,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Yo));else if(n!==4&&(t=t.child,t!==null))for(Ud(t,s,r),t=t.sibling;t!==null;)Ud(t,s,r),t=t.sibling}function $d(t,s,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for($d(t,s,r),t=t.sibling;t!==null;)$d(t,s,r),t=t.sibling}var fs=null,Xs=!1;function Or(t,s,r){for(r=r.child;r!==null;)tg(t,s,r),r=r.sibling}function tg(t,s,r){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(wi,r)}catch{}switch(r.tag){case 5:vs||Qn(r,s);case 6:var n=fs,a=Xs;fs=null,Or(t,s,r),fs=n,Xs=a,fs!==null&&(Xs?(t=fs,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):fs.removeChild(r.stateNode));break;case 18:fs!==null&&(Xs?(t=fs,r=r.stateNode,t.nodeType===8?Sc(t.parentNode,r):t.nodeType===1&&Sc(t,r),ml(t)):Sc(fs,r.stateNode));break;case 4:n=fs,a=Xs,fs=r.stateNode.containerInfo,Xs=!0,Or(t,s,r),fs=n,Xs=a;break;case 0:case 11:case 14:case 15:if(!vs&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&Pd(r,s,o),a=a.next}while(a!==n)}Or(t,s,r);break;case 1:if(!vs&&(Qn(r,s),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(i){es(r,s,i)}Or(t,s,r);break;case 21:Or(t,s,r);break;case 22:r.mode&1?(vs=(n=vs)||r.memoizedState!==null,Or(t,s,r),vs=n):Or(t,s,r);break;default:Or(t,s,r)}}function mh(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new cv),s.forEach(function(n){var a=bv.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Zs(t,s){var r=s.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var l=t,o=s,i=o;e:for(;i!==null;){switch(i.tag){case 5:fs=i.stateNode,Xs=!1;break e;case 3:fs=i.stateNode.containerInfo,Xs=!0;break e;case 4:fs=i.stateNode.containerInfo,Xs=!0;break e}i=i.return}if(fs===null)throw Error(Xe(160));tg(l,o,a),fs=null,Xs=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(h){es(a,s,h)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)sg(s,t),s=s.sibling}function sg(t,s){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zs(s,t),lr(t),n&4){try{nl(3,t,t.return),Ti(3,t)}catch(v){es(t,t.return,v)}try{nl(5,t,t.return)}catch(v){es(t,t.return,v)}}break;case 1:Zs(s,t),lr(t),n&512&&r!==null&&Qn(r,r.return);break;case 5:if(Zs(s,t),lr(t),n&512&&r!==null&&Qn(r,r.return),t.flags&32){var a=t.stateNode;try{il(a,"")}catch(v){es(t,t.return,v)}}if(n&4&&(a=t.stateNode,a!=null)){var l=t.memoizedProps,o=r!==null?r.memoizedProps:l,i=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&Ep(a,l),dd(i,o);var h=dd(i,l);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?Dp(a,m):p==="dangerouslySetInnerHTML"?Cp(a,m):p==="children"?il(a,m):hu(a,p,m,h)}switch(i){case"input":ad(a,l);break;case"textarea":Sp(a,l);break;case"select":var u=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?Xn(a,!!l.multiple,x,!1):u!==!!l.multiple&&(l.defaultValue!=null?Xn(a,!!l.multiple,l.defaultValue,!0):Xn(a,!!l.multiple,l.multiple?[]:"",!1))}a[gl]=l}catch(v){es(t,t.return,v)}}break;case 6:if(Zs(s,t),lr(t),n&4){if(t.stateNode===null)throw Error(Xe(162));a=t.stateNode,l=t.memoizedProps;try{a.nodeValue=l}catch(v){es(t,t.return,v)}}break;case 3:if(Zs(s,t),lr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ml(s.containerInfo)}catch(v){es(t,t.return,v)}break;case 4:Zs(s,t),lr(t);break;case 13:Zs(s,t),lr(t),a=t.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Yu=rs())),n&4&&mh(t);break;case 22:if(p=r!==null&&r.memoizedState!==null,t.mode&1?(vs=(h=vs)||p,Zs(s,t),vs=h):Zs(s,t),lr(t),n&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(ut=t,p=t.child;p!==null;){for(m=ut=p;ut!==null;){switch(u=ut,x=u.child,u.tag){case 0:case 11:case 14:case 15:nl(4,u,u.return);break;case 1:Qn(u,u.return);var j=u.stateNode;if(typeof j.componentWillUnmount=="function"){n=u,r=u.return;try{s=n,j.props=s.memoizedProps,j.state=s.memoizedState,j.componentWillUnmount()}catch(v){es(n,r,v)}}break;case 5:Qn(u,u.return);break;case 22:if(u.memoizedState!==null){fh(m);continue}}x!==null?(x.return=u,ut=x):fh(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{a=m.stateNode,h?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=kp("display",o))}catch(v){es(t,t.return,v)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(v){es(t,t.return,v)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Zs(s,t),lr(t),n&4&&mh(t);break;case 21:break;default:Zs(s,t),lr(t)}}function lr(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(eg(r)){var n=r;break e}r=r.return}throw Error(Xe(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(il(a,""),n.flags&=-33);var l=uh(t);$d(t,l,a);break;case 3:case 4:var o=n.stateNode.containerInfo,i=uh(t);Ud(t,i,o);break;default:throw Error(Xe(161))}}catch(c){es(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function uv(t,s,r){ut=t,rg(t)}function rg(t,s,r){for(var n=(t.mode&1)!==0;ut!==null;){var a=ut,l=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||mo;if(!o){var i=a.alternate,c=i!==null&&i.memoizedState!==null||vs;i=mo;var h=vs;if(mo=o,(vs=c)&&!h)for(ut=a;ut!==null;)o=ut,c=o.child,o.tag===22&&o.memoizedState!==null?ph(a):c!==null?(c.return=o,ut=c):ph(a);for(;l!==null;)ut=l,rg(l),l=l.sibling;ut=a,mo=i,vs=h}hh(t)}else a.subtreeFlags&8772&&l!==null?(l.return=a,ut=l):hh(t)}}function hh(t){for(;ut!==null;){var s=ut;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:vs||Ti(5,s);break;case 1:var n=s.stateNode;if(s.flags&4&&!vs)if(r===null)n.componentDidMount();else{var a=s.elementType===s.type?r.memoizedProps:Js(s.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&Zm(s,l,n);break;case 3:var o=s.updateQueue;if(o!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}Zm(s,o,r)}break;case 5:var i=s.stateNode;if(r===null&&s.flags&4){r=i;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var h=s.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&ml(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Xe(163))}vs||s.flags&512&&Fd(s)}catch(u){es(s,s.return,u)}}if(s===t){ut=null;break}if(r=s.sibling,r!==null){r.return=s.return,ut=r;break}ut=s.return}}function fh(t){for(;ut!==null;){var s=ut;if(s===t){ut=null;break}var r=s.sibling;if(r!==null){r.return=s.return,ut=r;break}ut=s.return}}function ph(t){for(;ut!==null;){var s=ut;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{Ti(4,s)}catch(c){es(s,r,c)}break;case 1:var n=s.stateNode;if(typeof n.componentDidMount=="function"){var a=s.return;try{n.componentDidMount()}catch(c){es(s,a,c)}}var l=s.return;try{Fd(s)}catch(c){es(s,l,c)}break;case 5:var o=s.return;try{Fd(s)}catch(c){es(s,o,c)}}}catch(c){es(s,s.return,c)}if(s===t){ut=null;break}var i=s.sibling;if(i!==null){i.return=s.return,ut=i;break}ut=s.return}}var mv=Math.ceil,ri=Ir.ReactCurrentDispatcher,Wu=Ir.ReactCurrentOwner,Ks=Ir.ReactCurrentBatchConfig,Ct=0,ms=null,as=null,ps=0,Os=0,Zn=nn(0),cs=0,wl=null,Sn=0,Li=0,Vu=0,al=null,Ds=null,Yu=0,ua=1/0,Nr=null,ni=!1,Hd=null,Jr=null,ho=!1,Vr=null,ai=0,ll=0,Bd=null,To=-1,Lo=0;function Es(){return Ct&6?rs():To!==-1?To:To=rs()}function Xr(t){return t.mode&1?Ct&2&&ps!==0?ps&-ps:Gb.transition!==null?(Lo===0&&(Lo=Hp()),Lo):(t=At,t!==0||(t=window.event,t=t===void 0?16:Kp(t.type)),t):1}function rr(t,s,r,n){if(50<ll)throw ll=0,Bd=null,Error(Xe(185));Tl(t,r,n),(!(Ct&2)||t!==ms)&&(t===ms&&(!(Ct&2)&&(Li|=r),cs===4&&zr(t,ps)),Is(t,n),r===1&&Ct===0&&!(s.mode&1)&&(ua=rs()+500,ki&&an()))}function Is(t,s){var r=t.callbackNode;Gy(t,s);var n=Bo(t,t===ms?ps:0);if(n===0)r!==null&&Em(r),t.callbackNode=null,t.callbackPriority=0;else if(s=n&-n,t.callbackPriority!==s){if(r!=null&&Em(r),s===1)t.tag===0?Kb(xh.bind(null,t)):hx(xh.bind(null,t)),Wb(function(){!(Ct&6)&&an()}),r=null;else{switch(Bp(n)){case 1:r=yu;break;case 4:r=Up;break;case 16:r=Ho;break;case 536870912:r=$p;break;default:r=Ho}r=ug(r,ng.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function ng(t,s){if(To=-1,Lo=0,Ct&6)throw Error(Xe(327));var r=t.callbackNode;if(na()&&t.callbackNode!==r)return null;var n=Bo(t,t===ms?ps:0);if(n===0)return null;if(n&30||n&t.expiredLanes||s)s=li(t,n);else{s=n;var a=Ct;Ct|=2;var l=lg();(ms!==t||ps!==s)&&(Nr=null,ua=rs()+500,yn(t,s));do try{pv();break}catch(i){ag(t,i)}while(!0);Tu(),ri.current=l,Ct=a,as!==null?s=0:(ms=null,ps=0,s=cs)}if(s!==0){if(s===2&&(a=pd(t),a!==0&&(n=a,s=zd(t,a))),s===1)throw r=wl,yn(t,0),zr(t,n),Is(t,rs()),r;if(s===6)zr(t,n);else{if(a=t.current.alternate,!(n&30)&&!hv(a)&&(s=li(t,n),s===2&&(l=pd(t),l!==0&&(n=l,s=zd(t,l))),s===1))throw r=wl,yn(t,0),zr(t,n),Is(t,rs()),r;switch(t.finishedWork=a,t.finishedLanes=n,s){case 0:case 1:throw Error(Xe(345));case 2:cn(t,Ds,Nr);break;case 3:if(zr(t,n),(n&130023424)===n&&(s=Yu+500-rs(),10<s)){if(Bo(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){Es(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=wd(cn.bind(null,t,Ds,Nr),s);break}cn(t,Ds,Nr);break;case 4:if(zr(t,n),(n&4194240)===n)break;for(s=t.eventTimes,a=-1;0<n;){var o=31-sr(n);l=1<<o,o=s[o],o>a&&(a=o),n&=~l}if(n=a,n=rs()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*mv(n/1960))-n,10<n){t.timeoutHandle=wd(cn.bind(null,t,Ds,Nr),n);break}cn(t,Ds,Nr);break;case 5:cn(t,Ds,Nr);break;default:throw Error(Xe(329))}}}return Is(t,rs()),t.callbackNode===r?ng.bind(null,t):null}function zd(t,s){var r=al;return t.current.memoizedState.isDehydrated&&(yn(t,s).flags|=256),t=li(t,s),t!==2&&(s=Ds,Ds=r,s!==null&&Wd(s)),t}function Wd(t){Ds===null?Ds=t:Ds.push.apply(Ds,t)}function hv(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],l=a.getSnapshot;a=a.value;try{if(!nr(l(),a))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function zr(t,s){for(s&=~Vu,s&=~Li,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-sr(s),n=1<<r;t[r]=-1,s&=~n}}function xh(t){if(Ct&6)throw Error(Xe(327));na();var s=Bo(t,0);if(!(s&1))return Is(t,rs()),null;var r=li(t,s);if(t.tag!==0&&r===2){var n=pd(t);n!==0&&(s=n,r=zd(t,n))}if(r===1)throw r=wl,yn(t,0),zr(t,s),Is(t,rs()),r;if(r===6)throw Error(Xe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,cn(t,Ds,Nr),Is(t,rs()),null}function qu(t,s){var r=Ct;Ct|=1;try{return t(s)}finally{Ct=r,Ct===0&&(ua=rs()+500,ki&&an())}}function _n(t){Vr!==null&&Vr.tag===0&&!(Ct&6)&&na();var s=Ct;Ct|=1;var r=Ks.transition,n=At;try{if(Ks.transition=null,At=1,t)return t()}finally{At=n,Ks.transition=r,Ct=s,!(Ct&6)&&an()}}function Ku(){Os=Zn.current,Ht(Zn)}function yn(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,zb(r)),as!==null)for(r=as.return;r!==null;){var n=r;switch(ku(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&qo();break;case 3:ca(),Ht(Ts),Ht(Ns),Pu();break;case 5:Ou(n);break;case 4:ca();break;case 13:Ht(qt);break;case 19:Ht(qt);break;case 10:Lu(n.type._context);break;case 22:case 23:Ku()}r=r.return}if(ms=t,as=t=en(t.current,null),ps=Os=s,cs=0,wl=null,Vu=Li=Sn=0,Ds=al=null,fn!==null){for(s=0;s<fn.length;s++)if(r=fn[s],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,l=r.pending;if(l!==null){var o=l.next;l.next=a,n.next=o}r.pending=n}fn=null}return t}function ag(t,s){do{var r=as;try{if(Tu(),ko.current=si,ti){for(var n=Kt.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ti=!1}if(En=0,us=is=Kt=null,rl=!1,vl=0,Wu.current=null,r===null||r.return===null){cs=1,wl=s,as=null;break}e:{var l=t,o=r.return,i=r,c=s;if(s=ps,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=i,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var u=p.alternate;u?(p.updateQueue=u.updateQueue,p.memoizedState=u.memoizedState,p.lanes=u.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=rh(o);if(x!==null){x.flags&=-257,nh(x,o,i,l,s),x.mode&1&&sh(l,h,s),s=x,c=h;var j=s.updateQueue;if(j===null){var v=new Set;v.add(c),s.updateQueue=v}else j.add(c);break e}else{if(!(s&1)){sh(l,h,s),Gu();break e}c=Error(Xe(426))}}else if(zt&&i.mode&1){var N=rh(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),nh(N,o,i,l,s),Du(da(c,i));break e}}l=c=da(c,i),cs!==4&&(cs=2),al===null?al=[l]:al.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var f=Bx(l,c,s);Qm(l,f);break e;case 1:i=c;var d=l.type,g=l.stateNode;if(!(l.flags&128)&&(typeof d.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Jr===null||!Jr.has(g)))){l.flags|=65536,s&=-s,l.lanes|=s;var b=zx(l,i,s);Qm(l,b);break e}}l=l.return}while(l!==null)}ig(r)}catch(E){s=E,as===r&&r!==null&&(as=r=r.return);continue}break}while(!0)}function lg(){var t=ri.current;return ri.current=si,t===null?si:t}function Gu(){(cs===0||cs===3||cs===2)&&(cs=4),ms===null||!(Sn&268435455)&&!(Li&268435455)||zr(ms,ps)}function li(t,s){var r=Ct;Ct|=2;var n=lg();(ms!==t||ps!==s)&&(Nr=null,yn(t,s));do try{fv();break}catch(a){ag(t,a)}while(!0);if(Tu(),Ct=r,ri.current=n,as!==null)throw Error(Xe(261));return ms=null,ps=0,cs}function fv(){for(;as!==null;)og(as)}function pv(){for(;as!==null&&!$y();)og(as)}function og(t){var s=dg(t.alternate,t,Os);t.memoizedProps=t.pendingProps,s===null?ig(t):as=s,Wu.current=null}function ig(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=iv(r,s),r!==null){r.flags&=32767,as=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{cs=6,as=null;return}}else if(r=ov(r,s,Os),r!==null){as=r;return}if(s=s.sibling,s!==null){as=s;return}as=s=t}while(s!==null);cs===0&&(cs=5)}function cn(t,s,r){var n=At,a=Ks.transition;try{Ks.transition=null,At=1,xv(t,s,r,n)}finally{Ks.transition=a,At=n}return null}function xv(t,s,r,n){do na();while(Vr!==null);if(Ct&6)throw Error(Xe(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Xe(177));t.callbackNode=null,t.callbackPriority=0;var l=r.lanes|r.childLanes;if(Qy(t,l),t===ms&&(as=ms=null,ps=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ho||(ho=!0,ug(Ho,function(){return na(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=Ks.transition,Ks.transition=null;var o=At;At=1;var i=Ct;Ct|=4,Wu.current=null,dv(t,r),sg(r,t),Ob(jd),zo=!!vd,jd=vd=null,t.current=r,uv(r),Hy(),Ct=i,At=o,Ks.transition=l}else t.current=r;if(ho&&(ho=!1,Vr=t,ai=a),l=t.pendingLanes,l===0&&(Jr=null),Wy(r.stateNode),Is(t,rs()),s!==null)for(n=t.onRecoverableError,r=0;r<s.length;r++)a=s[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(ni)throw ni=!1,t=Hd,Hd=null,t;return ai&1&&t.tag!==0&&na(),l=t.pendingLanes,l&1?t===Bd?ll++:(ll=0,Bd=t):ll=0,an(),null}function na(){if(Vr!==null){var t=Bp(ai),s=Ks.transition,r=At;try{if(Ks.transition=null,At=16>t?16:t,Vr===null)var n=!1;else{if(t=Vr,Vr=null,ai=0,Ct&6)throw Error(Xe(331));var a=Ct;for(Ct|=4,ut=t.current;ut!==null;){var l=ut,o=l.child;if(ut.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var h=i[c];for(ut=h;ut!==null;){var p=ut;switch(p.tag){case 0:case 11:case 15:nl(8,p,l)}var m=p.child;if(m!==null)m.return=p,ut=m;else for(;ut!==null;){p=ut;var u=p.sibling,x=p.return;if(Xx(p),p===h){ut=null;break}if(u!==null){u.return=x,ut=u;break}ut=x}}}var j=l.alternate;if(j!==null){var v=j.child;if(v!==null){j.child=null;do{var N=v.sibling;v.sibling=null,v=N}while(v!==null)}}ut=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,ut=o;else e:for(;ut!==null;){if(l=ut,l.flags&2048)switch(l.tag){case 0:case 11:case 15:nl(9,l,l.return)}var f=l.sibling;if(f!==null){f.return=l.return,ut=f;break e}ut=l.return}}var d=t.current;for(ut=d;ut!==null;){o=ut;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,ut=g;else e:for(o=d;ut!==null;){if(i=ut,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Ti(9,i)}}catch(E){es(i,i.return,E)}if(i===o){ut=null;break e}var b=i.sibling;if(b!==null){b.return=i.return,ut=b;break e}ut=i.return}}if(Ct=a,an(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(wi,t)}catch{}n=!0}return n}finally{At=r,Ks.transition=s}}return!1}function gh(t,s,r){s=da(r,s),s=Bx(t,s,1),t=Zr(t,s,1),s=Es(),t!==null&&(Tl(t,1,s),Is(t,s))}function es(t,s,r){if(t.tag===3)gh(t,t,r);else for(;s!==null;){if(s.tag===3){gh(s,t,r);break}else if(s.tag===1){var n=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Jr===null||!Jr.has(n))){t=da(r,t),t=zx(s,t,1),s=Zr(s,t,1),t=Es(),s!==null&&(Tl(s,1,t),Is(s,t));break}}s=s.return}}function gv(t,s,r){var n=t.pingCache;n!==null&&n.delete(s),s=Es(),t.pingedLanes|=t.suspendedLanes&r,ms===t&&(ps&r)===r&&(cs===4||cs===3&&(ps&130023424)===ps&&500>rs()-Yu?yn(t,0):Vu|=r),Is(t,s)}function cg(t,s){s===0&&(t.mode&1?(s=so,so<<=1,!(so&130023424)&&(so=4194304)):s=1);var r=Es();t=Tr(t,s),t!==null&&(Tl(t,s,r),Is(t,r))}function yv(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),cg(t,r)}function bv(t,s){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Xe(314))}n!==null&&n.delete(s),cg(t,r)}var dg;dg=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||Ts.current)As=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return As=!1,lv(t,s,r);As=!!(t.flags&131072)}else As=!1,zt&&s.flags&1048576&&fx(s,Qo,s.index);switch(s.lanes=0,s.tag){case 2:var n=s.type;Ao(t,s),t=s.pendingProps;var a=la(s,Ns.current);ra(s,r),a=Uu(null,s,n,t,a,r);var l=$u();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Ls(n)?(l=!0,Ko(s)):l=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Mu(s),a.updater=Ai,s.stateNode=a,a._reactInternals=s,Ad(s,n,t,r),s=Id(null,s,n,!0,l,r)):(s.tag=0,zt&&l&&Cu(s),ws(null,s,a,r),s=s.child),s;case 16:n=s.elementType;e:{switch(Ao(t,s),t=s.pendingProps,a=n._init,n=a(n._payload),s.type=n,a=s.tag=jv(n),t=Js(n,t),a){case 0:s=Ld(null,s,n,t,r);break e;case 1:s=oh(null,s,n,t,r);break e;case 11:s=ah(null,s,n,t,r);break e;case 14:s=lh(null,s,n,Js(n.type,t),r);break e}throw Error(Xe(306,n,""))}return s;case 0:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:Js(n,a),Ld(t,s,n,a,r);case 1:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:Js(n,a),oh(t,s,n,a,r);case 3:e:{if(qx(s),t===null)throw Error(Xe(387));n=s.pendingProps,l=s.memoizedState,a=l.element,vx(t,s),Xo(s,n,null,r);var o=s.memoizedState;if(n=o.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){a=da(Error(Xe(423)),s),s=ih(t,s,n,r,a);break e}else if(n!==a){a=da(Error(Xe(424)),s),s=ih(t,s,n,r,a);break e}else for(Us=Qr(s.stateNode.containerInfo.firstChild),$s=s,zt=!0,er=null,r=yx(s,null,n,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(oa(),n===a){s=Lr(t,s,r);break e}ws(t,s,n,r)}s=s.child}return s;case 5:return jx(s),t===null&&Cd(s),n=s.type,a=s.pendingProps,l=t!==null?t.memoizedProps:null,o=a.children,Nd(n,a)?o=null:l!==null&&Nd(n,l)&&(s.flags|=32),Yx(t,s),ws(t,s,o,r),s.child;case 6:return t===null&&Cd(s),null;case 13:return Kx(t,s,r);case 4:return Ru(s,s.stateNode.containerInfo),n=s.pendingProps,t===null?s.child=ia(s,null,n,r):ws(t,s,n,r),s.child;case 11:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:Js(n,a),ah(t,s,n,a,r);case 7:return ws(t,s,s.pendingProps,r),s.child;case 8:return ws(t,s,s.pendingProps.children,r),s.child;case 12:return ws(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(n=s.type._context,a=s.pendingProps,l=s.memoizedProps,o=a.value,Mt(Zo,n._currentValue),n._currentValue=o,l!==null)if(nr(l.value,o)){if(l.children===a.children&&!Ts.current){s=Lr(t,s,r);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var i=l.dependencies;if(i!==null){o=l.child;for(var c=i.firstContext;c!==null;){if(c.context===n){if(l.tag===1){c=kr(-1,r&-r),c.tag=2;var h=l.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),kd(l.return,r,s),i.lanes|=r;break}c=c.next}}else if(l.tag===10)o=l.type===s.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(Xe(341));o.lanes|=r,i=o.alternate,i!==null&&(i.lanes|=r),kd(o,r,s),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===s){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}ws(t,s,a.children,r),s=s.child}return s;case 9:return a=s.type,n=s.pendingProps.children,ra(s,r),a=Gs(a),n=n(a),s.flags|=1,ws(t,s,n,r),s.child;case 14:return n=s.type,a=Js(n,s.pendingProps),a=Js(n.type,a),lh(t,s,n,a,r);case 15:return Wx(t,s,s.type,s.pendingProps,r);case 17:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:Js(n,a),Ao(t,s),s.tag=1,Ls(n)?(t=!0,Ko(s)):t=!1,ra(s,r),Hx(s,n,a),Ad(s,n,a,r),Id(null,s,n,!0,t,r);case 19:return Gx(t,s,r);case 22:return Vx(t,s,r)}throw Error(Xe(156,s.tag))};function ug(t,s){return Fp(t,s)}function vv(t,s,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qs(t,s,r,n){return new vv(t,s,r,n)}function Qu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jv(t){if(typeof t=="function")return Qu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pu)return 11;if(t===xu)return 14}return 2}function en(t,s){var r=t.alternate;return r===null?(r=qs(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Io(t,s,r,n,a,l){var o=2;if(n=t,typeof t=="function")Qu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Hn:return bn(r.children,a,l,s);case fu:o=8,a|=8;break;case ed:return t=qs(12,r,s,a|2),t.elementType=ed,t.lanes=l,t;case td:return t=qs(13,r,s,a),t.elementType=td,t.lanes=l,t;case sd:return t=qs(19,r,s,a),t.elementType=sd,t.lanes=l,t;case jp:return Ii(r,a,l,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bp:o=10;break e;case vp:o=9;break e;case pu:o=11;break e;case xu:o=14;break e;case $r:o=16,n=null;break e}throw Error(Xe(130,t==null?t:typeof t,""))}return s=qs(o,r,s,a),s.elementType=t,s.type=n,s.lanes=l,s}function bn(t,s,r,n){return t=qs(7,t,n,s),t.lanes=r,t}function Ii(t,s,r,n){return t=qs(22,t,n,s),t.elementType=jp,t.lanes=r,t.stateNode={isHidden:!1},t}function Ic(t,s,r){return t=qs(6,t,null,s),t.lanes=r,t}function Mc(t,s,r){return s=qs(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Nv(t,s,r,n,a){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fc(0),this.expirationTimes=fc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fc(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Zu(t,s,r,n,a,l,o,i,c){return t=new Nv(t,s,r,i,c),s===1?(s=1,l===!0&&(s|=8)):s=0,l=qs(3,null,null,s),t.current=l,l.stateNode=t,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mu(l),t}function wv(t,s,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$n,key:n==null?null:""+n,children:t,containerInfo:s,implementation:r}}function mg(t){if(!t)return sn;t=t._reactInternals;e:{if(Dn(t)!==t||t.tag!==1)throw Error(Xe(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Ls(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(Xe(171))}if(t.tag===1){var r=t.type;if(Ls(r))return mx(t,r,s)}return s}function hg(t,s,r,n,a,l,o,i,c){return t=Zu(r,n,!0,t,a,l,o,i,c),t.context=mg(null),r=t.current,n=Es(),a=Xr(r),l=kr(n,a),l.callback=s??null,Zr(r,l,a),t.current.lanes=a,Tl(t,a,n),Is(t,n),t}function Mi(t,s,r,n){var a=s.current,l=Es(),o=Xr(a);return r=mg(r),s.context===null?s.context=r:s.pendingContext=r,s=kr(l,o),s.payload={element:t},n=n===void 0?null:n,n!==null&&(s.callback=n),t=Zr(a,s,o),t!==null&&(rr(t,a,o,l),Co(t,a,o)),o}function oi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yh(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function Ju(t,s){yh(t,s),(t=t.alternate)&&yh(t,s)}function Ev(){return null}var fg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xu(t){this._internalRoot=t}Ri.prototype.render=Xu.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(Xe(409));Mi(t,s,null,null)};Ri.prototype.unmount=Xu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;_n(function(){Mi(null,t,null,null)}),s[Ar]=null}};function Ri(t){this._internalRoot=t}Ri.prototype.unstable_scheduleHydration=function(t){if(t){var s=Vp();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Br.length&&s!==0&&s<Br[r].priority;r++);Br.splice(r,0,t),r===0&&qp(t)}};function em(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Oi(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bh(){}function Sv(t,s,r,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var h=oi(o);l.call(h)}}var o=hg(s,n,t,0,null,!1,!1,"",bh);return t._reactRootContainer=o,t[Ar]=o.current,pl(t.nodeType===8?t.parentNode:t),_n(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var i=n;n=function(){var h=oi(c);i.call(h)}}var c=Zu(t,0,!1,null,null,!1,!1,"",bh);return t._reactRootContainer=c,t[Ar]=c.current,pl(t.nodeType===8?t.parentNode:t),_n(function(){Mi(s,c,r,n)}),c}function Pi(t,s,r,n,a){var l=r._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var i=a;a=function(){var c=oi(o);i.call(c)}}Mi(s,o,t,a)}else o=Sv(r,s,t,a,n);return oi(o)}zp=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=Ga(s.pendingLanes);r!==0&&(bu(s,r|1),Is(s,rs()),!(Ct&6)&&(ua=rs()+500,an()))}break;case 13:_n(function(){var n=Tr(t,1);if(n!==null){var a=Es();rr(n,t,1,a)}}),Ju(t,1)}};vu=function(t){if(t.tag===13){var s=Tr(t,134217728);if(s!==null){var r=Es();rr(s,t,134217728,r)}Ju(t,134217728)}};Wp=function(t){if(t.tag===13){var s=Xr(t),r=Tr(t,s);if(r!==null){var n=Es();rr(r,t,s,n)}Ju(t,s)}};Vp=function(){return At};Yp=function(t,s){var r=At;try{return At=t,s()}finally{At=r}};md=function(t,s,r){switch(s){case"input":if(ad(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var n=r[s];if(n!==t&&n.form===t.form){var a=Ci(n);if(!a)throw Error(Xe(90));wp(n),ad(n,a)}}}break;case"textarea":Sp(t,r);break;case"select":s=r.value,s!=null&&Xn(t,!!r.multiple,s,!1)}};Lp=qu;Ip=_n;var _v={usingClientEntryPoint:!1,Events:[Il,Vn,Ci,Ap,Tp,qu]},$a={findFiberByHostInstance:hn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cv={bundleType:$a.bundleType,version:$a.version,rendererPackageName:$a.rendererPackageName,rendererConfig:$a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Op(t),t===null?null:t.stateNode},findFiberByHostInstance:$a.findFiberByHostInstance||Ev,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fo.isDisabled&&fo.supportsFiber)try{wi=fo.inject(Cv),fr=fo}catch{}}zs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_v;zs.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!em(s))throw Error(Xe(200));return wv(t,s,null,r)};zs.createRoot=function(t,s){if(!em(t))throw Error(Xe(299));var r=!1,n="",a=fg;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=Zu(t,1,!1,null,null,r,!1,n,a),t[Ar]=s.current,pl(t.nodeType===8?t.parentNode:t),new Xu(s)};zs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(Xe(188)):(t=Object.keys(t).join(","),Error(Xe(268,t)));return t=Op(s),t=t===null?null:t.stateNode,t};zs.flushSync=function(t){return _n(t)};zs.hydrate=function(t,s,r){if(!Oi(s))throw Error(Xe(200));return Pi(null,t,s,!0,r)};zs.hydrateRoot=function(t,s,r){if(!em(t))throw Error(Xe(405));var n=r!=null&&r.hydratedSources||null,a=!1,l="",o=fg;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),s=hg(s,null,t,1,r??null,a,!1,l,o),t[Ar]=s.current,pl(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,a]:s.mutableSourceEagerHydrationData.push(r,a);return new Ri(s)};zs.render=function(t,s,r){if(!Oi(s))throw Error(Xe(200));return Pi(null,t,s,!1,r)};zs.unmountComponentAtNode=function(t){if(!Oi(t))throw Error(Xe(40));return t._reactRootContainer?(_n(function(){Pi(null,null,t,!1,function(){t._reactRootContainer=null,t[Ar]=null})}),!0):!1};zs.unstable_batchedUpdates=qu;zs.unstable_renderSubtreeIntoContainer=function(t,s,r,n){if(!Oi(r))throw Error(Xe(200));if(t==null||t._reactInternals===void 0)throw Error(Xe(38));return Pi(t,s,r,!1,n)};zs.version="18.3.1-next-f1338f8080-20240426";function pg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pg)}catch(t){console.error(t)}}pg(),pp.exports=zs;var xg=pp.exports,vh=xg;Jc.createRoot=vh.createRoot,Jc.hydrateRoot=vh.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function El(){return El=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},El.apply(this,arguments)}var Yr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yr||(Yr={}));const jh="popstate";function kv(t){t===void 0&&(t={});function s(n,a){let{pathname:l,search:o,hash:i}=n.location;return Vd("",{pathname:l,search:o,hash:i},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:yg(a)}return Av(s,r,null,t)}function ls(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function gg(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Dv(){return Math.random().toString(36).substr(2,8)}function Nh(t,s){return{usr:t.state,key:t.key,idx:s}}function Vd(t,s,r,n){return r===void 0&&(r=null),El({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?ga(s):s,{state:r,key:s&&s.key||n||Dv()})}function yg(t){let{pathname:s="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function ga(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(s.search=t.substr(n),t=t.substr(0,n)),t&&(s.pathname=t)}return s}function Av(t,s,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:l=!1}=n,o=a.history,i=Yr.Pop,c=null,h=p();h==null&&(h=0,o.replaceState(El({},o.state,{idx:h}),""));function p(){return(o.state||{idx:null}).idx}function m(){i=Yr.Pop;let N=p(),f=N==null?null:N-h;h=N,c&&c({action:i,location:v.location,delta:f})}function u(N,f){i=Yr.Push;let d=Vd(v.location,N,f);h=p()+1;let g=Nh(d,h),b=v.createHref(d);try{o.pushState(g,"",b)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;a.location.assign(b)}l&&c&&c({action:i,location:v.location,delta:1})}function x(N,f){i=Yr.Replace;let d=Vd(v.location,N,f);h=p();let g=Nh(d,h),b=v.createHref(d);o.replaceState(g,"",b),l&&c&&c({action:i,location:v.location,delta:0})}function j(N){let f=a.location.origin!=="null"?a.location.origin:a.location.href,d=typeof N=="string"?N:yg(N);return d=d.replace(/ $/,"%20"),ls(f,"No window.location.(origin|href) available to create URL for href: "+d),new URL(d,f)}let v={get action(){return i},get location(){return t(a,o)},listen(N){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(jh,m),c=N,()=>{a.removeEventListener(jh,m),c=null}},createHref(N){return s(a,N)},createURL:j,encodeLocation(N){let f=j(N);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:u,replace:x,go(N){return o.go(N)}};return v}var wh;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(wh||(wh={}));function Tv(t,s,r){return r===void 0&&(r="/"),Lv(t,s,r)}function Lv(t,s,r,n){let a=typeof s=="string"?ga(s):s,l=jg(a.pathname||"/",r);if(l==null)return null;let o=bg(t);Iv(o);let i=null;for(let c=0;i==null&&c<o.length;++c){let h=Vv(l);i=Bv(o[c],h)}return i}function bg(t,s,r,n){s===void 0&&(s=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(l,o,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};c.relativePath.startsWith("/")&&(ls(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let h=vn([n,c.relativePath]),p=r.concat(c);l.children&&l.children.length>0&&(ls(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),bg(l.children,s,p,h)),!(l.path==null&&!l.index)&&s.push({path:h,score:$v(h,l.index),routesMeta:p})};return t.forEach((l,o)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))a(l,o);else for(let c of vg(l.path))a(l,o,c)}),s}function vg(t){let s=t.split("/");if(s.length===0)return[];let[r,...n]=s,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let o=vg(n.join("/")),i=[];return i.push(...o.map(c=>c===""?l:[l,c].join("/"))),a&&i.push(...o),i.map(c=>t.startsWith("/")&&c===""?"/":c)}function Iv(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:Hv(s.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Mv=/^:[\w-]+$/,Rv=3,Ov=2,Pv=1,Fv=10,Uv=-2,Eh=t=>t==="*";function $v(t,s){let r=t.split("/"),n=r.length;return r.some(Eh)&&(n+=Uv),s&&(n+=Ov),r.filter(a=>!Eh(a)).reduce((a,l)=>a+(Mv.test(l)?Rv:l===""?Pv:Fv),n)}function Hv(t,s){return t.length===s.length&&t.slice(0,-1).every((n,a)=>n===s[a])?t[t.length-1]-s[s.length-1]:0}function Bv(t,s,r){let{routesMeta:n}=t,a={},l="/",o=[];for(let i=0;i<n.length;++i){let c=n[i],h=i===n.length-1,p=l==="/"?s:s.slice(l.length)||"/",m=zv({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),u=c.route;if(!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:vn([l,m.pathname]),pathnameBase:Gv(vn([l,m.pathnameBase])),route:u}),m.pathnameBase!=="/"&&(l=vn([l,m.pathnameBase]))}return o}function zv(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Wv(t.path,t.caseSensitive,t.end),a=s.match(r);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),i=a.slice(1);return{params:n.reduce((h,p,m)=>{let{paramName:u,isOptional:x}=p;if(u==="*"){let v=i[m]||"";o=l.slice(0,l.length-v.length).replace(/(.)\/+$/,"$1")}const j=i[m];return x&&!j?h[u]=void 0:h[u]=(j||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:o,pattern:t}}function Wv(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),gg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,i,c)=>(n.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),n]}function Vv(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return gg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function jg(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function Yv(t,s){s===void 0&&(s="/");let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?ga(t):t;return{pathname:r?r.startsWith("/")?r:qv(r,s):s,search:Qv(n),hash:Zv(a)}}function qv(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Rc(t,s,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Kv(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function Ng(t,s){let r=Kv(t);return s?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function wg(t,s,r,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=ga(t):(a=El({},t),ls(!a.pathname||!a.pathname.includes("?"),Rc("?","pathname","search",a)),ls(!a.pathname||!a.pathname.includes("#"),Rc("#","pathname","hash",a)),ls(!a.search||!a.search.includes("#"),Rc("#","search","hash",a)));let l=t===""||a.pathname==="",o=l?"/":a.pathname,i;if(o==null)i=r;else{let m=s.length-1;if(!n&&o.startsWith("..")){let u=o.split("/");for(;u[0]==="..";)u.shift(),m-=1;a.pathname=u.join("/")}i=m>=0?s[m]:"/"}let c=Yv(a,i),h=o&&o!=="/"&&o.endsWith("/"),p=(l||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}const vn=t=>t.join("/").replace(/\/\/+/g,"/"),Gv=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Qv=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Zv=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Jv(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Eg=["post","put","patch","delete"];new Set(Eg);const Xv=["get",...Eg];new Set(Xv);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sl(){return Sl=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sl.apply(this,arguments)}const tm=y.createContext(null),ej=y.createContext(null),Rl=y.createContext(null),Fi=y.createContext(null),ln=y.createContext({outlet:null,matches:[],isDataRoute:!1}),Sg=y.createContext(null);function Ol(){return y.useContext(Fi)!=null}function Ui(){return Ol()||ls(!1),y.useContext(Fi).location}function _g(t){y.useContext(Rl).static||y.useLayoutEffect(t)}function xr(){let{isDataRoute:t}=y.useContext(ln);return t?hj():tj()}function tj(){Ol()||ls(!1);let t=y.useContext(tm),{basename:s,future:r,navigator:n}=y.useContext(Rl),{matches:a}=y.useContext(ln),{pathname:l}=Ui(),o=JSON.stringify(Ng(a,r.v7_relativeSplatPath)),i=y.useRef(!1);return _g(()=>{i.current=!0}),y.useCallback(function(h,p){if(p===void 0&&(p={}),!i.current)return;if(typeof h=="number"){n.go(h);return}let m=wg(h,JSON.parse(o),l,p.relative==="path");t==null&&s!=="/"&&(m.pathname=m.pathname==="/"?s:vn([s,m.pathname])),(p.replace?n.replace:n.push)(m,p.state,p)},[s,n,o,l,t])}function Cg(){let{matches:t}=y.useContext(ln),s=t[t.length-1];return s?s.params:{}}function sj(t,s){return rj(t,s)}function rj(t,s,r,n){Ol()||ls(!1);let{navigator:a}=y.useContext(Rl),{matches:l}=y.useContext(ln),o=l[l.length-1],i=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=Ui(),p;if(s){var m;let N=typeof s=="string"?ga(s):s;c==="/"||(m=N.pathname)!=null&&m.startsWith(c)||ls(!1),p=N}else p=h;let u=p.pathname||"/",x=u;if(c!=="/"){let N=c.replace(/^\//,"").split("/");x="/"+u.replace(/^\//,"").split("/").slice(N.length).join("/")}let j=Tv(t,{pathname:x}),v=ij(j&&j.map(N=>Object.assign({},N,{params:Object.assign({},i,N.params),pathname:vn([c,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?c:vn([c,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),l,r,n);return s&&v?y.createElement(Fi.Provider,{value:{location:Sl({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Yr.Pop}},v):v}function nj(){let t=mj(),s=Jv(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},s),r?y.createElement("pre",{style:a},r):null,null)}const aj=y.createElement(nj,null);class lj extends y.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?y.createElement(ln.Provider,{value:this.props.routeContext},y.createElement(Sg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oj(t){let{routeContext:s,match:r,children:n}=t,a=y.useContext(tm);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),y.createElement(ln.Provider,{value:s},n)}function ij(t,s,r,n){var a;if(s===void 0&&(s=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var l;if(!r)return null;if(r.errors)t=r.matches;else if((l=n)!=null&&l.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,i=(a=r)==null?void 0:a.errors;if(i!=null){let p=o.findIndex(m=>m.route.id&&(i==null?void 0:i[m.route.id])!==void 0);p>=0||ls(!1),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,h=-1;if(r&&n&&n.v7_partialHydration)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:u,errors:x}=r,j=m.route.loader&&u[m.route.id]===void 0&&(!x||x[m.route.id]===void 0);if(m.route.lazy||j){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,m,u)=>{let x,j=!1,v=null,N=null;r&&(x=i&&m.route.id?i[m.route.id]:void 0,v=m.route.errorElement||aj,c&&(h<0&&u===0?(fj("route-fallback"),j=!0,N=null):h===u&&(j=!0,N=m.route.hydrateFallbackElement||null)));let f=s.concat(o.slice(0,u+1)),d=()=>{let g;return x?g=v:j?g=N:m.route.Component?g=y.createElement(m.route.Component,null):m.route.element?g=m.route.element:g=p,y.createElement(oj,{match:m,routeContext:{outlet:p,matches:f,isDataRoute:r!=null},children:g})};return r&&(m.route.ErrorBoundary||m.route.errorElement||u===0)?y.createElement(lj,{location:r.location,revalidation:r.revalidation,component:v,error:x,children:d(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):d()},null)}var kg=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(kg||{}),Dg=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Dg||{});function cj(t){let s=y.useContext(tm);return s||ls(!1),s}function dj(t){let s=y.useContext(ej);return s||ls(!1),s}function uj(t){let s=y.useContext(ln);return s||ls(!1),s}function Ag(t){let s=uj(),r=s.matches[s.matches.length-1];return r.route.id||ls(!1),r.route.id}function mj(){var t;let s=y.useContext(Sg),r=dj(),n=Ag();return s!==void 0?s:(t=r.errors)==null?void 0:t[n]}function hj(){let{router:t}=cj(kg.UseNavigateStable),s=Ag(Dg.UseNavigateStable),r=y.useRef(!1);return _g(()=>{r.current=!0}),y.useCallback(function(a,l){l===void 0&&(l={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Sl({fromRouteId:s},l)))},[t,s])}const Sh={};function fj(t,s,r){Sh[t]||(Sh[t]=!0)}function pj(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function mn(t){let{to:s,replace:r,state:n,relative:a}=t;Ol()||ls(!1);let{future:l,static:o}=y.useContext(Rl),{matches:i}=y.useContext(ln),{pathname:c}=Ui(),h=xr(),p=wg(s,Ng(i,l.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(p);return y.useEffect(()=>h(JSON.parse(m),{replace:r,state:n,relative:a}),[h,m,a,r,n]),null}function Ur(t){ls(!1)}function xj(t){let{basename:s="/",children:r=null,location:n,navigationType:a=Yr.Pop,navigator:l,static:o=!1,future:i}=t;Ol()&&ls(!1);let c=s.replace(/^\/*/,"/"),h=y.useMemo(()=>({basename:c,navigator:l,static:o,future:Sl({v7_relativeSplatPath:!1},i)}),[c,i,l,o]);typeof n=="string"&&(n=ga(n));let{pathname:p="/",search:m="",hash:u="",state:x=null,key:j="default"}=n,v=y.useMemo(()=>{let N=jg(p,c);return N==null?null:{location:{pathname:N,search:m,hash:u,state:x,key:j},navigationType:a}},[c,p,m,u,x,j,a]);return v==null?null:y.createElement(Rl.Provider,{value:h},y.createElement(Fi.Provider,{children:r,value:v}))}function gj(t){let{children:s,location:r}=t;return sj(Yd(s),r)}new Promise(()=>{});function Yd(t,s){s===void 0&&(s=[]);let r=[];return y.Children.forEach(t,(n,a)=>{if(!y.isValidElement(n))return;let l=[...s,a];if(n.type===y.Fragment){r.push.apply(r,Yd(n.props.children,l));return}n.type!==Ur&&ls(!1),!n.props.index||!n.props.children||ls(!1);let o={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Yd(n.props.children,l)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qd(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((s,r)=>{let n=t[r];return s.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function yj(t,s){let r=qd(t);return s&&s.forEach((n,a)=>{r.has(a)||s.getAll(a).forEach(l=>{r.append(a,l)})}),r}const bj="6";try{window.__reactRouterVersion=bj}catch{}const vj="startTransition",_h=gy[vj];function jj(t){let{basename:s,children:r,future:n,window:a}=t,l=y.useRef();l.current==null&&(l.current=kv({window:a,v5Compat:!0}));let o=l.current,[i,c]=y.useState({action:o.action,location:o.location}),{v7_startTransition:h}=n||{},p=y.useCallback(m=>{h&&_h?_h(()=>c(m)):c(m)},[c,h]);return y.useLayoutEffect(()=>o.listen(p),[o,p]),y.useEffect(()=>pj(n),[n]),y.createElement(xj,{basename:s,children:r,location:i.location,navigationType:i.action,navigator:o,future:n})}var Ch;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ch||(Ch={}));var kh;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(kh||(kh={}));function Nj(t){let s=y.useRef(qd(t)),r=y.useRef(!1),n=Ui(),a=y.useMemo(()=>yj(n.search,r.current?null:s.current),[n.search]),l=xr(),o=y.useCallback((i,c)=>{const h=qd(typeof i=="function"?i(a):i);r.current=!0,l("?"+h,c)},[l,a]);return[a,o]}function Tg(t,s){return function(){return t.apply(s,arguments)}}const{toString:wj}=Object.prototype,{getPrototypeOf:sm}=Object,{iterator:$i,toStringTag:Lg}=Symbol,Hi=(t=>s=>{const r=wj.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ar=t=>(t=t.toLowerCase(),s=>Hi(s)===t),Bi=t=>s=>typeof s===t,{isArray:ya}=Array,_l=Bi("undefined");function Pl(t){return t!==null&&!_l(t)&&t.constructor!==null&&!_l(t.constructor)&&Ms(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Ig=ar("ArrayBuffer");function Ej(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&Ig(t.buffer),s}const Sj=Bi("string"),Ms=Bi("function"),Mg=Bi("number"),Fl=t=>t!==null&&typeof t=="object",_j=t=>t===!0||t===!1,Mo=t=>{if(Hi(t)!=="object")return!1;const s=sm(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Lg in t)&&!($i in t)},Cj=t=>{if(!Fl(t)||Pl(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},kj=ar("Date"),Dj=ar("File"),Aj=ar("Blob"),Tj=ar("FileList"),Lj=t=>Fl(t)&&Ms(t.pipe),Ij=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||Ms(t.append)&&((s=Hi(t))==="formdata"||s==="object"&&Ms(t.toString)&&t.toString()==="[object FormData]"))},Mj=ar("URLSearchParams"),[Rj,Oj,Pj,Fj]=["ReadableStream","Request","Response","Headers"].map(ar),Uj=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ul(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,a;if(typeof t!="object"&&(t=[t]),ya(t))for(n=0,a=t.length;n<a;n++)s.call(null,t[n],n,t);else{if(Pl(t))return;const l=r?Object.getOwnPropertyNames(t):Object.keys(t),o=l.length;let i;for(n=0;n<o;n++)i=l[n],s.call(null,t[i],i,t)}}function Rg(t,s){if(Pl(t))return null;s=s.toLowerCase();const r=Object.keys(t);let n=r.length,a;for(;n-- >0;)if(a=r[n],s===a.toLowerCase())return a;return null}const xn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Og=t=>!_l(t)&&t!==xn;function Kd(){const{caseless:t}=Og(this)&&this||{},s={},r=(n,a)=>{const l=t&&Rg(s,a)||a;Mo(s[l])&&Mo(n)?s[l]=Kd(s[l],n):Mo(n)?s[l]=Kd({},n):ya(n)?s[l]=n.slice():s[l]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&Ul(arguments[n],r);return s}const $j=(t,s,r,{allOwnKeys:n}={})=>(Ul(s,(a,l)=>{r&&Ms(a)?t[l]=Tg(a,r):t[l]=a},{allOwnKeys:n}),t),Hj=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Bj=(t,s,r,n)=>{t.prototype=Object.create(s.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},zj=(t,s,r,n)=>{let a,l,o;const i={};if(s=s||{},t==null)return s;do{for(a=Object.getOwnPropertyNames(t),l=a.length;l-- >0;)o=a[l],(!n||n(o,t,s))&&!i[o]&&(s[o]=t[o],i[o]=!0);t=r!==!1&&sm(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},Wj=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const n=t.indexOf(s,r);return n!==-1&&n===r},Vj=t=>{if(!t)return null;if(ya(t))return t;let s=t.length;if(!Mg(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},Yj=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&sm(Uint8Array)),qj=(t,s)=>{const n=(t&&t[$i]).call(t);let a;for(;(a=n.next())&&!a.done;){const l=a.value;s.call(t,l[0],l[1])}},Kj=(t,s)=>{let r;const n=[];for(;(r=t.exec(s))!==null;)n.push(r);return n},Gj=ar("HTMLFormElement"),Qj=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),Dh=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),Zj=ar("RegExp"),Pg=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Ul(r,(a,l)=>{let o;(o=s(a,l,t))!==!1&&(n[l]=o||a)}),Object.defineProperties(t,n)},Jj=t=>{Pg(t,(s,r)=>{if(Ms(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Ms(n)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Xj=(t,s)=>{const r={},n=a=>{a.forEach(l=>{r[l]=!0})};return ya(t)?n(t):n(String(t).split(s)),r},eN=()=>{},tN=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function sN(t){return!!(t&&Ms(t.append)&&t[Lg]==="FormData"&&t[$i])}const rN=t=>{const s=new Array(10),r=(n,a)=>{if(Fl(n)){if(s.indexOf(n)>=0)return;if(Pl(n))return n;if(!("toJSON"in n)){s[a]=n;const l=ya(n)?[]:{};return Ul(n,(o,i)=>{const c=r(o,a+1);!_l(c)&&(l[i]=c)}),s[a]=void 0,l}}return n};return r(t,0)},nN=ar("AsyncFunction"),aN=t=>t&&(Fl(t)||Ms(t))&&Ms(t.then)&&Ms(t.catch),Fg=((t,s)=>t?setImmediate:s?((r,n)=>(xn.addEventListener("message",({source:a,data:l})=>{a===xn&&l===r&&n.length&&n.shift()()},!1),a=>{n.push(a),xn.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ms(xn.postMessage)),lN=typeof queueMicrotask<"u"?queueMicrotask.bind(xn):typeof process<"u"&&process.nextTick||Fg,oN=t=>t!=null&&Ms(t[$i]),We={isArray:ya,isArrayBuffer:Ig,isBuffer:Pl,isFormData:Ij,isArrayBufferView:Ej,isString:Sj,isNumber:Mg,isBoolean:_j,isObject:Fl,isPlainObject:Mo,isEmptyObject:Cj,isReadableStream:Rj,isRequest:Oj,isResponse:Pj,isHeaders:Fj,isUndefined:_l,isDate:kj,isFile:Dj,isBlob:Aj,isRegExp:Zj,isFunction:Ms,isStream:Lj,isURLSearchParams:Mj,isTypedArray:Yj,isFileList:Tj,forEach:Ul,merge:Kd,extend:$j,trim:Uj,stripBOM:Hj,inherits:Bj,toFlatObject:zj,kindOf:Hi,kindOfTest:ar,endsWith:Wj,toArray:Vj,forEachEntry:qj,matchAll:Kj,isHTMLForm:Gj,hasOwnProperty:Dh,hasOwnProp:Dh,reduceDescriptors:Pg,freezeMethods:Jj,toObjectSet:Xj,toCamelCase:Qj,noop:eN,toFiniteNumber:tN,findKey:Rg,global:xn,isContextDefined:Og,isSpecCompliantForm:sN,toJSONObject:rN,isAsyncFn:nN,isThenable:aN,setImmediate:Fg,asap:lN,isIterable:oN};function Nt(t,s,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}We.inherits(Nt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:We.toJSONObject(this.config),code:this.code,status:this.status}}});const Ug=Nt.prototype,$g={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{$g[t]={value:t}});Object.defineProperties(Nt,$g);Object.defineProperty(Ug,"isAxiosError",{value:!0});Nt.from=(t,s,r,n,a,l)=>{const o=Object.create(Ug);return We.toFlatObject(t,o,function(c){return c!==Error.prototype},i=>i!=="isAxiosError"),Nt.call(o,t.message,s,r,n,a),o.cause=t,o.name=t.name,l&&Object.assign(o,l),o};const iN=null;function Gd(t){return We.isPlainObject(t)||We.isArray(t)}function Hg(t){return We.endsWith(t,"[]")?t.slice(0,-2):t}function Ah(t,s,r){return t?t.concat(s).map(function(a,l){return a=Hg(a),!r&&l?"["+a+"]":a}).join(r?".":""):s}function cN(t){return We.isArray(t)&&!t.some(Gd)}const dN=We.toFlatObject(We,{},null,function(s){return/^is[A-Z]/.test(s)});function zi(t,s,r){if(!We.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=We.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,N){return!We.isUndefined(N[v])});const n=r.metaTokens,a=r.visitor||p,l=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&We.isSpecCompliantForm(s);if(!We.isFunction(a))throw new TypeError("visitor must be a function");function h(j){if(j===null)return"";if(We.isDate(j))return j.toISOString();if(We.isBoolean(j))return j.toString();if(!c&&We.isBlob(j))throw new Nt("Blob is not supported. Use a Buffer instead.");return We.isArrayBuffer(j)||We.isTypedArray(j)?c&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function p(j,v,N){let f=j;if(j&&!N&&typeof j=="object"){if(We.endsWith(v,"{}"))v=n?v:v.slice(0,-2),j=JSON.stringify(j);else if(We.isArray(j)&&cN(j)||(We.isFileList(j)||We.endsWith(v,"[]"))&&(f=We.toArray(j)))return v=Hg(v),f.forEach(function(g,b){!(We.isUndefined(g)||g===null)&&s.append(o===!0?Ah([v],b,l):o===null?v:v+"[]",h(g))}),!1}return Gd(j)?!0:(s.append(Ah(N,v,l),h(j)),!1)}const m=[],u=Object.assign(dN,{defaultVisitor:p,convertValue:h,isVisitable:Gd});function x(j,v){if(!We.isUndefined(j)){if(m.indexOf(j)!==-1)throw Error("Circular reference detected in "+v.join("."));m.push(j),We.forEach(j,function(f,d){(!(We.isUndefined(f)||f===null)&&a.call(s,f,We.isString(d)?d.trim():d,v,u))===!0&&x(f,v?v.concat(d):[d])}),m.pop()}}if(!We.isObject(t))throw new TypeError("data must be an object");return x(t),s}function Th(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return s[n]})}function rm(t,s){this._pairs=[],t&&zi(t,this,s)}const Bg=rm.prototype;Bg.append=function(s,r){this._pairs.push([s,r])};Bg.toString=function(s){const r=s?function(n){return s.call(this,n,Th)}:Th;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function uN(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zg(t,s,r){if(!s)return t;const n=r&&r.encode||uN;We.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let l;if(a?l=a(s,r):l=We.isURLSearchParams(s)?s.toString():new rm(s,r).toString(n),l){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class Lh{constructor(){this.handlers=[]}use(s,r,n){return this.handlers.push({fulfilled:s,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){We.forEach(this.handlers,function(n){n!==null&&s(n)})}}const Wg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mN=typeof URLSearchParams<"u"?URLSearchParams:rm,hN=typeof FormData<"u"?FormData:null,fN=typeof Blob<"u"?Blob:null,pN={isBrowser:!0,classes:{URLSearchParams:mN,FormData:hN,Blob:fN},protocols:["http","https","file","blob","url","data"]},nm=typeof window<"u"&&typeof document<"u",Qd=typeof navigator=="object"&&navigator||void 0,xN=nm&&(!Qd||["ReactNative","NativeScript","NS"].indexOf(Qd.product)<0),gN=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",yN=nm&&window.location.href||"http://localhost",bN=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:nm,hasStandardBrowserEnv:xN,hasStandardBrowserWebWorkerEnv:gN,navigator:Qd,origin:yN},Symbol.toStringTag,{value:"Module"})),js={...bN,...pN};function vN(t,s){return zi(t,new js.classes.URLSearchParams,{visitor:function(r,n,a,l){return js.isNode&&We.isBuffer(r)?(this.append(n,r.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...s})}function jN(t){return We.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function NN(t){const s={},r=Object.keys(t);let n;const a=r.length;let l;for(n=0;n<a;n++)l=r[n],s[l]=t[l];return s}function Vg(t){function s(r,n,a,l){let o=r[l++];if(o==="__proto__")return!0;const i=Number.isFinite(+o),c=l>=r.length;return o=!o&&We.isArray(a)?a.length:o,c?(We.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!i):((!a[o]||!We.isObject(a[o]))&&(a[o]=[]),s(r,n,a[o],l)&&We.isArray(a[o])&&(a[o]=NN(a[o])),!i)}if(We.isFormData(t)&&We.isFunction(t.entries)){const r={};return We.forEachEntry(t,(n,a)=>{s(jN(n),a,r,0)}),r}return null}function wN(t,s,r){if(We.isString(t))try{return(s||JSON.parse)(t),We.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const $l={transitional:Wg,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,l=We.isObject(s);if(l&&We.isHTMLForm(s)&&(s=new FormData(s)),We.isFormData(s))return a?JSON.stringify(Vg(s)):s;if(We.isArrayBuffer(s)||We.isBuffer(s)||We.isStream(s)||We.isFile(s)||We.isBlob(s)||We.isReadableStream(s))return s;if(We.isArrayBufferView(s))return s.buffer;if(We.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let i;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return vN(s,this.formSerializer).toString();if((i=We.isFileList(s))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return zi(i?{"files[]":s}:s,c&&new c,this.formSerializer)}}return l||a?(r.setContentType("application/json",!1),wN(s)):s}],transformResponse:[function(s){const r=this.transitional||$l.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(We.isResponse(s)||We.isReadableStream(s))return s;if(s&&We.isString(s)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(s)}catch(i){if(o)throw i.name==="SyntaxError"?Nt.from(i,Nt.ERR_BAD_RESPONSE,this,null,this.response):i}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:js.classes.FormData,Blob:js.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};We.forEach(["delete","get","head","post","put","patch"],t=>{$l.headers[t]={}});const EN=We.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),SN=t=>{const s={};let r,n,a;return t&&t.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||s[r]&&EN[r])&&(r==="set-cookie"?s[r]?s[r].push(n):s[r]=[n]:s[r]=s[r]?s[r]+", "+n:n)}),s},Ih=Symbol("internals");function Ha(t){return t&&String(t).trim().toLowerCase()}function Ro(t){return t===!1||t==null?t:We.isArray(t)?t.map(Ro):String(t)}function _N(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)s[n[1]]=n[2];return s}const CN=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Oc(t,s,r,n,a){if(We.isFunction(n))return n.call(this,s,r);if(a&&(s=r),!!We.isString(s)){if(We.isString(n))return s.indexOf(n)!==-1;if(We.isRegExp(n))return n.test(s)}}function kN(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,n)=>r.toUpperCase()+n)}function DN(t,s){const r=We.toCamelCase(" "+s);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(a,l,o){return this[n].call(this,s,a,l,o)},configurable:!0})})}let Rs=class{constructor(s){s&&this.set(s)}set(s,r,n){const a=this;function l(i,c,h){const p=Ha(c);if(!p)throw new Error("header name must be a non-empty string");const m=We.findKey(a,p);(!m||a[m]===void 0||h===!0||h===void 0&&a[m]!==!1)&&(a[m||c]=Ro(i))}const o=(i,c)=>We.forEach(i,(h,p)=>l(h,p,c));if(We.isPlainObject(s)||s instanceof this.constructor)o(s,r);else if(We.isString(s)&&(s=s.trim())&&!CN(s))o(SN(s),r);else if(We.isObject(s)&&We.isIterable(s)){let i={},c,h;for(const p of s){if(!We.isArray(p))throw TypeError("Object iterator must return a key-value pair");i[h=p[0]]=(c=i[h])?We.isArray(c)?[...c,p[1]]:[c,p[1]]:p[1]}o(i,r)}else s!=null&&l(r,s,n);return this}get(s,r){if(s=Ha(s),s){const n=We.findKey(this,s);if(n){const a=this[n];if(!r)return a;if(r===!0)return _N(a);if(We.isFunction(r))return r.call(this,a,n);if(We.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=Ha(s),s){const n=We.findKey(this,s);return!!(n&&this[n]!==void 0&&(!r||Oc(this,this[n],n,r)))}return!1}delete(s,r){const n=this;let a=!1;function l(o){if(o=Ha(o),o){const i=We.findKey(n,o);i&&(!r||Oc(n,n[i],i,r))&&(delete n[i],a=!0)}}return We.isArray(s)?s.forEach(l):l(s),a}clear(s){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const l=r[n];(!s||Oc(this,this[l],l,s,!0))&&(delete this[l],a=!0)}return a}normalize(s){const r=this,n={};return We.forEach(this,(a,l)=>{const o=We.findKey(n,l);if(o){r[o]=Ro(a),delete r[l];return}const i=s?kN(l):String(l).trim();i!==l&&delete r[l],r[i]=Ro(a),n[i]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return We.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=s&&We.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const n=new this(s);return r.forEach(a=>n.set(a)),n}static accessor(s){const n=(this[Ih]=this[Ih]={accessors:{}}).accessors,a=this.prototype;function l(o){const i=Ha(o);n[i]||(DN(a,o),n[i]=!0)}return We.isArray(s)?s.forEach(l):l(s),this}};Rs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);We.reduceDescriptors(Rs.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(n){this[r]=n}}});We.freezeMethods(Rs);function Pc(t,s){const r=this||$l,n=s||r,a=Rs.from(n.headers);let l=n.data;return We.forEach(t,function(i){l=i.call(r,l,a.normalize(),s?s.status:void 0)}),a.normalize(),l}function Yg(t){return!!(t&&t.__CANCEL__)}function ba(t,s,r){Nt.call(this,t??"canceled",Nt.ERR_CANCELED,s,r),this.name="CanceledError"}We.inherits(ba,Nt,{__CANCEL__:!0});function qg(t,s,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):s(new Nt("Request failed with status code "+r.status,[Nt.ERR_BAD_REQUEST,Nt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function AN(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function TN(t,s){t=t||10;const r=new Array(t),n=new Array(t);let a=0,l=0,o;return s=s!==void 0?s:1e3,function(c){const h=Date.now(),p=n[l];o||(o=h),r[a]=c,n[a]=h;let m=l,u=0;for(;m!==a;)u+=r[m++],m=m%t;if(a=(a+1)%t,a===l&&(l=(l+1)%t),h-o<s)return;const x=p&&h-p;return x?Math.round(u*1e3/x):void 0}}function LN(t,s){let r=0,n=1e3/s,a,l;const o=(h,p=Date.now())=>{r=p,a=null,l&&(clearTimeout(l),l=null),t(...h)};return[(...h)=>{const p=Date.now(),m=p-r;m>=n?o(h,p):(a=h,l||(l=setTimeout(()=>{l=null,o(a)},n-m)))},()=>a&&o(a)]}const ii=(t,s,r=3)=>{let n=0;const a=TN(50,250);return LN(l=>{const o=l.loaded,i=l.lengthComputable?l.total:void 0,c=o-n,h=a(c),p=o<=i;n=o;const m={loaded:o,total:i,progress:i?o/i:void 0,bytes:c,rate:h||void 0,estimated:h&&i&&p?(i-o)/h:void 0,event:l,lengthComputable:i!=null,[s?"download":"upload"]:!0};t(m)},r)},Mh=(t,s)=>{const r=t!=null;return[n=>s[0]({lengthComputable:r,total:t,loaded:n}),s[1]]},Rh=t=>(...s)=>We.asap(()=>t(...s)),IN=js.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,js.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(js.origin),js.navigator&&/(msie|trident)/i.test(js.navigator.userAgent)):()=>!0,MN=js.hasStandardBrowserEnv?{write(t,s,r,n,a,l){const o=[t+"="+encodeURIComponent(s)];We.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),We.isString(n)&&o.push("path="+n),We.isString(a)&&o.push("domain="+a),l===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function RN(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function ON(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function Kg(t,s,r){let n=!RN(s);return t&&(n||r==!1)?ON(t,s):s}const Oh=t=>t instanceof Rs?{...t}:t;function Cn(t,s){s=s||{};const r={};function n(h,p,m,u){return We.isPlainObject(h)&&We.isPlainObject(p)?We.merge.call({caseless:u},h,p):We.isPlainObject(p)?We.merge({},p):We.isArray(p)?p.slice():p}function a(h,p,m,u){if(We.isUndefined(p)){if(!We.isUndefined(h))return n(void 0,h,m,u)}else return n(h,p,m,u)}function l(h,p){if(!We.isUndefined(p))return n(void 0,p)}function o(h,p){if(We.isUndefined(p)){if(!We.isUndefined(h))return n(void 0,h)}else return n(void 0,p)}function i(h,p,m){if(m in s)return n(h,p);if(m in t)return n(void 0,h)}const c={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(h,p,m)=>a(Oh(h),Oh(p),m,!0)};return We.forEach(Object.keys({...t,...s}),function(p){const m=c[p]||a,u=m(t[p],s[p],p);We.isUndefined(u)&&m!==i||(r[p]=u)}),r}const Gg=t=>{const s=Cn({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:l,headers:o,auth:i}=s;s.headers=o=Rs.from(o),s.url=zg(Kg(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),i&&o.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):"")));let c;if(We.isFormData(r)){if(js.hasStandardBrowserEnv||js.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[h,...p]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];o.setContentType([h||"multipart/form-data",...p].join("; "))}}if(js.hasStandardBrowserEnv&&(n&&We.isFunction(n)&&(n=n(s)),n||n!==!1&&IN(s.url))){const h=a&&l&&MN.read(l);h&&o.set(a,h)}return s},PN=typeof XMLHttpRequest<"u",FN=PN&&function(t){return new Promise(function(r,n){const a=Gg(t);let l=a.data;const o=Rs.from(a.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:h}=a,p,m,u,x,j;function v(){x&&x(),j&&j(),a.cancelToken&&a.cancelToken.unsubscribe(p),a.signal&&a.signal.removeEventListener("abort",p)}let N=new XMLHttpRequest;N.open(a.method.toUpperCase(),a.url,!0),N.timeout=a.timeout;function f(){if(!N)return;const g=Rs.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),E={data:!i||i==="text"||i==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:g,config:t,request:N};qg(function(S){r(S),v()},function(S){n(S),v()},E),N=null}"onloadend"in N?N.onloadend=f:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(f)},N.onabort=function(){N&&(n(new Nt("Request aborted",Nt.ECONNABORTED,t,N)),N=null)},N.onerror=function(){n(new Nt("Network Error",Nt.ERR_NETWORK,t,N)),N=null},N.ontimeout=function(){let b=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const E=a.transitional||Wg;a.timeoutErrorMessage&&(b=a.timeoutErrorMessage),n(new Nt(b,E.clarifyTimeoutError?Nt.ETIMEDOUT:Nt.ECONNABORTED,t,N)),N=null},l===void 0&&o.setContentType(null),"setRequestHeader"in N&&We.forEach(o.toJSON(),function(b,E){N.setRequestHeader(E,b)}),We.isUndefined(a.withCredentials)||(N.withCredentials=!!a.withCredentials),i&&i!=="json"&&(N.responseType=a.responseType),h&&([u,j]=ii(h,!0),N.addEventListener("progress",u)),c&&N.upload&&([m,x]=ii(c),N.upload.addEventListener("progress",m),N.upload.addEventListener("loadend",x)),(a.cancelToken||a.signal)&&(p=g=>{N&&(n(!g||g.type?new ba(null,t,N):g),N.abort(),N=null)},a.cancelToken&&a.cancelToken.subscribe(p),a.signal&&(a.signal.aborted?p():a.signal.addEventListener("abort",p)));const d=AN(a.url);if(d&&js.protocols.indexOf(d)===-1){n(new Nt("Unsupported protocol "+d+":",Nt.ERR_BAD_REQUEST,t));return}N.send(l||null)})},UN=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let n=new AbortController,a;const l=function(h){if(!a){a=!0,i();const p=h instanceof Error?h:this.reason;n.abort(p instanceof Nt?p:new ba(p instanceof Error?p.message:p))}};let o=s&&setTimeout(()=>{o=null,l(new Nt(`timeout ${s} of ms exceeded`,Nt.ETIMEDOUT))},s);const i=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(l):h.removeEventListener("abort",l)}),t=null)};t.forEach(h=>h.addEventListener("abort",l));const{signal:c}=n;return c.unsubscribe=()=>We.asap(i),c}},$N=function*(t,s){let r=t.byteLength;if(r<s){yield t;return}let n=0,a;for(;n<r;)a=n+s,yield t.slice(n,a),n=a},HN=async function*(t,s){for await(const r of BN(t))yield*$N(r,s)},BN=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:r,value:n}=await s.read();if(r)break;yield n}}finally{await s.cancel()}},Ph=(t,s,r,n)=>{const a=HN(t,s);let l=0,o,i=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:h,value:p}=await a.next();if(h){i(),c.close();return}let m=p.byteLength;if(r){let u=l+=m;r(u)}c.enqueue(new Uint8Array(p))}catch(h){throw i(h),h}},cancel(c){return i(c),a.return()}},{highWaterMark:2})},Wi=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Qg=Wi&&typeof ReadableStream=="function",zN=Wi&&(typeof TextEncoder=="function"?(t=>s=>t.encode(s))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Zg=(t,...s)=>{try{return!!t(...s)}catch{return!1}},WN=Qg&&Zg(()=>{let t=!1;const s=new Request(js.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!s}),Fh=64*1024,Zd=Qg&&Zg(()=>We.isReadableStream(new Response("").body)),ci={stream:Zd&&(t=>t.body)};Wi&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(s=>{!ci[s]&&(ci[s]=We.isFunction(t[s])?r=>r[s]():(r,n)=>{throw new Nt(`Response type '${s}' is not supported`,Nt.ERR_NOT_SUPPORT,n)})})})(new Response);const VN=async t=>{if(t==null)return 0;if(We.isBlob(t))return t.size;if(We.isSpecCompliantForm(t))return(await new Request(js.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(We.isArrayBufferView(t)||We.isArrayBuffer(t))return t.byteLength;if(We.isURLSearchParams(t)&&(t=t+""),We.isString(t))return(await zN(t)).byteLength},YN=async(t,s)=>{const r=We.toFiniteNumber(t.getContentLength());return r??VN(s)},qN=Wi&&(async t=>{let{url:s,method:r,data:n,signal:a,cancelToken:l,timeout:o,onDownloadProgress:i,onUploadProgress:c,responseType:h,headers:p,withCredentials:m="same-origin",fetchOptions:u}=Gg(t);h=h?(h+"").toLowerCase():"text";let x=UN([a,l&&l.toAbortSignal()],o),j;const v=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let N;try{if(c&&WN&&r!=="get"&&r!=="head"&&(N=await YN(p,n))!==0){let E=new Request(s,{method:"POST",body:n,duplex:"half"}),R;if(We.isFormData(n)&&(R=E.headers.get("content-type"))&&p.setContentType(R),E.body){const[S,k]=Mh(N,ii(Rh(c)));n=Ph(E.body,Fh,S,k)}}We.isString(m)||(m=m?"include":"omit");const f="credentials"in Request.prototype;j=new Request(s,{...u,signal:x,method:r.toUpperCase(),headers:p.normalize().toJSON(),body:n,duplex:"half",credentials:f?m:void 0});let d=await fetch(j,u);const g=Zd&&(h==="stream"||h==="response");if(Zd&&(i||g&&v)){const E={};["status","statusText","headers"].forEach(L=>{E[L]=d[L]});const R=We.toFiniteNumber(d.headers.get("content-length")),[S,k]=i&&Mh(R,ii(Rh(i),!0))||[];d=new Response(Ph(d.body,Fh,S,()=>{k&&k(),v&&v()}),E)}h=h||"text";let b=await ci[We.findKey(ci,h)||"text"](d,t);return!g&&v&&v(),await new Promise((E,R)=>{qg(E,R,{data:b,headers:Rs.from(d.headers),status:d.status,statusText:d.statusText,config:t,request:j})})}catch(f){throw v&&v(),f&&f.name==="TypeError"&&/Load failed|fetch/i.test(f.message)?Object.assign(new Nt("Network Error",Nt.ERR_NETWORK,t,j),{cause:f.cause||f}):Nt.from(f,f&&f.code,t,j)}}),Jd={http:iN,xhr:FN,fetch:qN};We.forEach(Jd,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Uh=t=>`- ${t}`,KN=t=>We.isFunction(t)||t===null||t===!1,Jg={getAdapter:t=>{t=We.isArray(t)?t:[t];const{length:s}=t;let r,n;const a={};for(let l=0;l<s;l++){r=t[l];let o;if(n=r,!KN(r)&&(n=Jd[(o=String(r)).toLowerCase()],n===void 0))throw new Nt(`Unknown adapter '${o}'`);if(n)break;a[o||"#"+l]=n}if(!n){const l=Object.entries(a).map(([i,c])=>`adapter ${i} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=s?l.length>1?`since :
`+l.map(Uh).join(`
`):" "+Uh(l[0]):"as no adapter specified";throw new Nt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Jd};function Fc(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ba(null,t)}function $h(t){return Fc(t),t.headers=Rs.from(t.headers),t.data=Pc.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Jg.getAdapter(t.adapter||$l.adapter)(t).then(function(n){return Fc(t),n.data=Pc.call(t,t.transformResponse,n),n.headers=Rs.from(n.headers),n},function(n){return Yg(n)||(Fc(t),n&&n.response&&(n.response.data=Pc.call(t,t.transformResponse,n.response),n.response.headers=Rs.from(n.response.headers))),Promise.reject(n)})}const Xg="1.11.0",Vi={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Vi[t]=function(n){return typeof n===t||"a"+(s<1?"n ":" ")+t}});const Hh={};Vi.transitional=function(s,r,n){function a(l,o){return"[Axios v"+Xg+"] Transitional option '"+l+"'"+o+(n?". "+n:"")}return(l,o,i)=>{if(s===!1)throw new Nt(a(o," has been removed"+(r?" in "+r:"")),Nt.ERR_DEPRECATED);return r&&!Hh[o]&&(Hh[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(l,o,i):!0}};Vi.spelling=function(s){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${s}`),!0)};function GN(t,s,r){if(typeof t!="object")throw new Nt("options must be an object",Nt.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let a=n.length;for(;a-- >0;){const l=n[a],o=s[l];if(o){const i=t[l],c=i===void 0||o(i,l,t);if(c!==!0)throw new Nt("option "+l+" must be "+c,Nt.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Nt("Unknown option "+l,Nt.ERR_BAD_OPTION)}}const Oo={assertOptions:GN,validators:Vi},or=Oo.validators;let jn=class{constructor(s){this.defaults=s||{},this.interceptors={request:new Lh,response:new Lh}}async request(s,r){try{return await this._request(s,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=Cn(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:l}=r;n!==void 0&&Oo.assertOptions(n,{silentJSONParsing:or.transitional(or.boolean),forcedJSONParsing:or.transitional(or.boolean),clarifyTimeoutError:or.transitional(or.boolean)},!1),a!=null&&(We.isFunction(a)?r.paramsSerializer={serialize:a}:Oo.assertOptions(a,{encode:or.function,serialize:or.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Oo.assertOptions(r,{baseUrl:or.spelling("baseURL"),withXsrfToken:or.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=l&&We.merge(l.common,l[r.method]);l&&We.forEach(["delete","get","head","post","put","patch","common"],j=>{delete l[j]}),r.headers=Rs.concat(o,l);const i=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(c=c&&v.synchronous,i.unshift(v.fulfilled,v.rejected))});const h=[];this.interceptors.response.forEach(function(v){h.push(v.fulfilled,v.rejected)});let p,m=0,u;if(!c){const j=[$h.bind(this),void 0];for(j.unshift(...i),j.push(...h),u=j.length,p=Promise.resolve(r);m<u;)p=p.then(j[m++],j[m++]);return p}u=i.length;let x=r;for(m=0;m<u;){const j=i[m++],v=i[m++];try{x=j(x)}catch(N){v.call(this,N);break}}try{p=$h.call(this,x)}catch(j){return Promise.reject(j)}for(m=0,u=h.length;m<u;)p=p.then(h[m++],h[m++]);return p}getUri(s){s=Cn(this.defaults,s);const r=Kg(s.baseURL,s.url,s.allowAbsoluteUrls);return zg(r,s.params,s.paramsSerializer)}};We.forEach(["delete","get","head","options"],function(s){jn.prototype[s]=function(r,n){return this.request(Cn(n||{},{method:s,url:r,data:(n||{}).data}))}});We.forEach(["post","put","patch"],function(s){function r(n){return function(l,o,i){return this.request(Cn(i||{},{method:s,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:o}))}}jn.prototype[s]=r(),jn.prototype[s+"Form"]=r(!0)});let QN=class e0{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(l){r=l});const n=this;this.promise.then(a=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](a);n._listeners=null}),this.promise.then=a=>{let l;const o=new Promise(i=>{n.subscribe(i),l=i}).then(a);return o.cancel=function(){n.unsubscribe(l)},o},s(function(l,o,i){n.reason||(n.reason=new ba(l,o,i),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=n=>{s.abort(n)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new e0(function(a){s=a}),cancel:s}}};function ZN(t){return function(r){return t.apply(null,r)}}function JN(t){return We.isObject(t)&&t.isAxiosError===!0}const Xd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xd).forEach(([t,s])=>{Xd[s]=t});function t0(t){const s=new jn(t),r=Tg(jn.prototype.request,s);return We.extend(r,jn.prototype,s,{allOwnKeys:!0}),We.extend(r,s,null,{allOwnKeys:!0}),r.create=function(a){return t0(Cn(t,a))},r}const ns=t0($l);ns.Axios=jn;ns.CanceledError=ba;ns.CancelToken=QN;ns.isCancel=Yg;ns.VERSION=Xg;ns.toFormData=zi;ns.AxiosError=Nt;ns.Cancel=ns.CanceledError;ns.all=function(s){return Promise.all(s)};ns.spread=ZN;ns.isAxiosError=JN;ns.mergeConfig=Cn;ns.AxiosHeaders=Rs;ns.formToJSON=t=>Vg(We.isHTMLForm(t)?new FormData(t):t);ns.getAdapter=Jg.getAdapter;ns.HttpStatusCode=Xd;ns.default=ns;const{Axios:nT,AxiosError:aT,CanceledError:lT,isCancel:oT,CancelToken:iT,VERSION:cT,all:dT,Cancel:uT,isAxiosError:mT,spread:hT,toFormData:fT,AxiosHeaders:pT,HttpStatusCode:xT,formToJSON:gT,getAdapter:yT,mergeConfig:bT}=ns,le=ns.create({baseURL:"http://192.168.8.18:5000/api",timeout:15e3,headers:{"Content-Type":"application/json"}});le.interceptors.request.use(t=>{const s=localStorage.getItem("authToken");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));le.interceptors.response.use(t=>t,t=>{var s,r,n,a;if(t.response&&t.response.status===401){console.log("Token expired or unauthorized - redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("authUser"),delete le.defaults.headers.common.Authorization;const l=window.location.pathname,o=(r=(s=t.config)==null?void 0:s.url)==null?void 0:r.includes("/company/info"),i=(a=(n=t.config)==null?void 0:n.url)==null?void 0:a.includes("/auth/biometric-login"),c=l.includes("/login-bio");l!=="/"&&!o&&!i&&!c&&(window.location.href="/")}return Promise.reject(t)});const s0=y.createContext(null),r0=({children:t})=>{const[s,r]=y.useState(null),[n,a]=y.useState(null),[l,o]=y.useState(!0),i=y.useCallback(async()=>{o(!0);try{const u=localStorage.getItem("authToken"),x=localStorage.getItem("authUser");if(u&&x){const j=JSON.parse(x);j.USERID&&!j.id&&(j.id=j.USERID),a(u),r(j),le.defaults.headers.common.Authorization=`Bearer ${u}`}else a(null),r(null)}catch(u){console.error("Failed to load auth from storage:",u),localStorage.clear()}finally{o(!1)}},[]);y.useEffect(()=>{i();const u=()=>{console.log(" Auth update event received, reloading auth data..."),i()};return window.addEventListener("authUpdate",u),()=>{window.removeEventListener("authUpdate",u)}},[i]);const c=y.useCallback(async(u,x,j="employee")=>{var v;try{const N=await le.post("/auth/login",{username:u,password:x,loginMode:j}),{user:f,token:d}=N.data;if(!d)throw new Error("No token received from backend. Login failed.");const g={...f};g.USERID!==void 0&&g.id===void 0&&(g.id=g.USERID),a(d),r(g);try{localStorage.setItem("authToken",d),localStorage.setItem("authUser",JSON.stringify(g))}catch(b){if(console.error("Error storing to localStorage:",b),b.name==="QuotaExceededError"){const E={...g};delete E.PHOTO,localStorage.setItem("authUser",JSON.stringify(E))}throw b}return le.defaults.headers.common.Authorization=`Bearer ${d}`,!0}catch(N){return console.error("Login failed:",((v=N.response)==null?void 0:v.data)||N.message),localStorage.removeItem("authToken"),localStorage.removeItem("authUser"),a(null),r(null),!1}},[]),h=y.useCallback(()=>{console.log(" Logging out user - clearing all state data..."),r(null),a(null),localStorage.removeItem("authToken"),localStorage.removeItem("authUser"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("authMethod"),localStorage.removeItem("biometricData"),localStorage.removeItem("fingerprintData"),localStorage.removeItem("userProfile"),localStorage.removeItem("userSession"),localStorage.removeItem("loginData");try{localStorage.removeItem("biometricScanningState"),localStorage.removeItem("fingerprintCaptureState"),localStorage.removeItem("biometricMatchState"),localStorage.removeItem("lastBiometricUser"),localStorage.removeItem("biometricSessionData"),localStorage.removeItem("biometricScore"),localStorage.removeItem("biometricConfidence"),localStorage.removeItem("lastFingerprintData"),localStorage.removeItem("biometricMatchHistory"),window.DigitalPersonaHelper&&console.log(" Biometric reader will be reset on next login attempt")}catch(u){console.warn(" Error clearing biometric states:",u)}delete le.defaults.headers.common.Authorization,console.log(" Logout completed - all authentication data cleared")},[]),p=y.useCallback(()=>{console.log("Handling unauthorized access - logging out user"),h(),window.location.href="/login"},[h]),m={user:s,token:n,isAuthenticated:!!s&&!!n,loadingAuth:l,login:c,logout:h,handleUnauthorized:p,loadAuthFromStorage:i};return e.jsx(s0.Provider,{value:m,children:t})},Qt=()=>{const t=y.useContext(s0);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},XN=({onAnimationComplete:t})=>{const[s,r]=y.useState({lguDtrName:"DTR Management System",logoPreview:null}),[n,a]=y.useState(!0);return y.useEffect(()=>{(async()=>{var o;try{console.log(" Fetching company info for animation...");const i=await le.get("/company/info");if(console.log(" Company info response:",i.data),i.data.success){const c=i.data.data;console.log(" Company data:",c),console.log(" Logo preview:",c.logoPreview),r({lguDtrName:c.lguDtrName||"DTR Management System",logoPreview:c.logoPreview}),console.log(" Company data set:",{lguDtrName:c.lguDtrName||"DTR Management System",hasLogo:!!c.logoPreview})}else console.log(" Company info API returned success: false"),r({lguDtrName:"DTR Management System",logoPreview:null})}catch(i){console.error(" Error fetching company info:",i),console.error("Error details:",(o=i.response)==null?void 0:o.data),r({lguDtrName:"DTR Management System",logoPreview:null})}finally{a(!1)}})()},[]),y.useEffect(()=>{if(!n){const l=setTimeout(()=>{t()},3e3);return()=>clearTimeout(l)}},[n,t]),e.jsx("div",{className:"admin-login-animation",children:e.jsxs("div",{className:"animation-container",children:[e.jsx("div",{className:"logo-container",children:s.logoPreview?e.jsx("img",{src:s.logoPreview,alt:`${s.lguDtrName} Logo`,className:"logo-image"}):e.jsx("div",{className:"default-logo",children:e.jsx("svg",{className:"logo-image",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsxs("div",{className:"loading-text",children:["Loading ",s.lguDtrName,"..."]})]})})};function e1(){const[t,s]=y.useState(""),[r,n]=y.useState(""),[a,l]=y.useState(""),[o,i]=y.useState(!1),[c,h]=y.useState("employee"),[p,m]=y.useState(!1),[u,x]=y.useState(!1),[j,v]=y.useState(!1),{login:N}=Qt(),f=xr(),d=()=>{v(!1)},g=async S=>{if(S.preventDefault(),!o){i(!0),l("");try{await N(t,r),f("/dtr-checker")}catch(k){l(k.message||"Login failed")}finally{i(!1)}}},b=async S=>{var k,L,A,D;if(S.preventDefault(),!o){i(!0),l(""),x(!1);try{if(!await N(t,r,"admin")){l("Invalid credentials. Please check your username and password.");return}E(),await new Promise(O=>setTimeout(O,3e3)),f("/hris-management")}catch(I){console.error("Admin login error:",I),((k=I==null?void 0:I.response)==null?void 0:k.status)===401?l("Invalid credentials. Please check your username and password."):((L=I==null?void 0:I.response)==null?void 0:L.status)===404?l("Admin user not found. Please check your username."):l(((D=(A=I==null?void 0:I.response)==null?void 0:A.data)==null?void 0:D.message)||(I==null?void 0:I.message)||"Invalid login credentials. Please try again."),x(!1)}finally{i(!1)}}},E=()=>{x(!0)},R=()=>{x(!1)};return u?e.jsx(XN,{onAnimationComplete:R}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:`absolute -top-40 -right-40 w-80 h-80 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse ${c==="employee"?"bg-green-500":"bg-purple-500"}`}),e.jsx("div",{className:`absolute -bottom-40 -left-40 w-80 h-80 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse ${c==="employee"?"bg-emerald-500":"bg-blue-500"}`,style:{animationDelay:"2s"}}),e.jsx("div",{className:`absolute top-40 left-1/2 w-80 h-80 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse ${c==="employee"?"bg-teal-500":"bg-indigo-500"}`,style:{animationDelay:"4s"}})]}),e.jsx("div",{className:"relative z-10 w-full max-w-md",children:e.jsxs("div",{className:`backdrop-blur-lg rounded-3xl shadow-2xl border p-8 transition-all duration-500 ${c==="employee"?"bg-green-500/10 border-green-500/20":"bg-white/10 border-white/20"}`,children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-20 h-20 rounded-2xl mb-4 transition-all duration-500 ${c==="employee"?"bg-gradient-to-r from-green-500 to-emerald-600":"bg-gradient-to-r from-blue-500 to-purple-600"}`,children:e.jsx("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Human Resource Information System"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Secure Employee Access"})]}),e.jsxs("div",{className:`flex rounded-2xl p-1 mb-6 transition-all duration-500 ${c==="employee"?"bg-green-500/10":"bg-white/10"}`,children:[e.jsx("button",{type:"button",onClick:()=>h("employee"),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium transition-all duration-300 ${c==="employee"?"bg-green-500/20 text-white shadow-lg":"text-white/70 hover:text-white"}`,children:"Employee Portal Page"}),e.jsx("button",{type:"button",onClick:()=>h("admin"),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium transition-all duration-300 ${c==="admin"?"bg-white/20 text-white shadow-lg":"text-white/70 hover:text-white"}`,children:"Admin Login"})]}),j?e.jsx("div",{className:"space-y-6",children:e.jsx("button",{type:"button",onClick:d,className:"w-full py-3 px-6 bg-white/10 hover:bg-white/20 text-white font-semibold rounded-2xl border border-white/20 hover:border-white/30 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Use Badge Number Instead"]})})}):e.jsxs("form",{onSubmit:c==="admin"?b:g,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-white/90 mb-2",children:c==="admin"?"Admin Username":"Badge Number"}),e.jsx("input",{type:"text",id:"username",value:t,onChange:S=>s(S.target.value),className:`w-full px-4 py-3 bg-white/10 border border-white/20 rounded-2xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:border-transparent transition-all duration-300 ${c==="employee"?"focus:ring-green-500":"focus:ring-blue-500"}`,placeholder:c==="admin"?"Enter admin username":"Enter your badge number",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white/90 mb-2",children:c==="employee"?"PIN":"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:p?"text":"password",id:"password",value:r,onChange:S=>n(S.target.value),className:`w-full px-4 py-3 bg-white/10 border border-white/20 rounded-2xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:border-transparent transition-all duration-300 pr-12 ${c==="employee"?"focus:ring-green-500":"focus:ring-blue-500"}`,placeholder:c==="employee"?"Enter your PIN":"Enter your password",required:!0}),e.jsx("button",{type:"button",onClick:()=>m(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/50 hover:text-white transition-colors duration-200",children:p?e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-10.875-6.825a1.5 1.5 0 010-1.5C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 10.875 6.825a1.5 1.5 0 010 1.5z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 11-4.243-4.243m4.242 4.242L9.88 9.88"})})})]})]}),e.jsx("button",{type:"submit",disabled:o,className:`w-full py-4 px-6 text-white font-semibold rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-transparent disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none ${c==="employee"?"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 focus:ring-green-500":"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:ring-blue-500"}`,children:o?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-3"}),c==="admin"?"Signing in as Admin...":"Signing in..."]}):c==="admin"?"Sign in as Admin":"Sign In"}),c==="employee"&&e.jsx("button",{type:"button",onClick:()=>f("/login-bio"),className:"w-full py-3 px-6 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-semibold rounded-2xl border border-green-500/20 hover:border-green-400/40 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-transparent",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})}),"Use Fingerprint Login"]})})]}),a&&e.jsx("div",{className:"mt-6 p-4 bg-red-500/20 border border-red-500/30 rounded-2xl backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-200",children:a})})]})}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:"text-white/60 text-sm",children:"Secure access to DHRIS"})})]})})]})}class t1{constructor(){this.initialized=!1,this.deviceConnected=!1,this.deviceList=[],console.log(" DigitalPersonaNativeClient constructor completed")}async initialize(){try{console.log(" Starting DigitalPersona PowerShell Win32 SDK Client initialization...");const s=await le.get("/auth/digitalpersona-status");if(s.data.success)this.initialized=!0,this.deviceConnected=s.data.deviceConnected,this.deviceList=s.data.devices||[],this.fallbackMode=s.data.fallbackMode||!1,console.log(" DigitalPersona PowerShell Win32 SDK Client initialized:",{initialized:this.initialized,deviceConnected:this.deviceConnected,deviceCount:this.deviceList.length,fallbackMode:this.fallbackMode}),this.fallbackMode&&console.log(" Running in fallback mode - biometric features not available");else throw new Error(s.data.message||"Failed to initialize native SDK");return this.initialized}catch(s){throw console.error(" Failed to initialize DigitalPersona PowerShell Win32 SDK Client:",s),this.initialized=!1,this.deviceConnected=!1,s}}async captureFingerprint(s=3e4){var r,n;try{if(!this.initialized)throw new Error("DigitalPersona not initialized");console.log(" Requesting fingerprint capture from backend...");const a=await le.post("/auth/capture-fingerprint",{timeout:s});if(a.data.success)return console.log(" Fingerprint captured successfully"),a.data.isSimulated&&(console.log(" Simulated capture response:",a.data.note),a.data.fingerprintData.isSimulated=!0,a.data.fingerprintData.note=a.data.note,a.data.fingerprintData.deviceName=a.data.deviceName),a.data.fingerprintData;throw new Error(a.data.message||"Fingerprint capture failed")}catch(a){if(console.error(" Fingerprint capture failed:",a),(n=(r=a.response)==null?void 0:r.data)!=null&&n.nativeLibraryIssue)return console.log(" Native library issue detected, providing fallback response"),{action:"capture",status:"success",quality:"fallback",deviceName:"DigitalPersona Reader (Fallback)",timestamp:Date.now(),message:"Fallback response due to native library issues",simulatedData:"DP_FALLBACK_FINGERPRINT_DATA_"+Date.now(),note:"This is a fallback response due to native library issues",isFallback:!0};throw a}}async authenticateFingerprint(s){var r,n;try{console.log(" Authenticating fingerprint...");const a=await le.post("/auth/biometric-login",{fingerprintData:s});return a.data.success?(console.log(" Fingerprint authentication successful"),{success:!0,user:a.data.user,token:a.data.token}):{success:!1,message:a.data.message||"Authentication failed"}}catch(a){return console.error(" Fingerprint authentication failed:",a),{success:!1,message:((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||a.message||"Authentication failed"}}}async getDevices(){try{this.initialized||await this.initialize();const s=await le.get("/auth/digitalpersona-devices");if(s.data.success)return this.deviceList=s.data.devices||[],this.deviceConnected=this.deviceList.length>0,this.deviceList;throw new Error(s.data.message||"Failed to get devices")}catch(s){return console.error(" Failed to get devices:",s),[]}}isInitialized(){return this.initialized}isDeviceConnected(){return this.deviceConnected}isInFallbackMode(){return this.fallbackMode||!1}getDeviceInfo(){return{initialized:this.initialized,deviceConnected:this.deviceConnected,deviceCount:this.deviceList.length,devices:this.deviceList,fallbackMode:this.fallbackMode}}}const s1=`
  @keyframes readyPulse {
    0%, 100% {
      transform: scale(1);
      box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
    }
    50% {
      transform: scale(1.02);
      box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
    }
  }
  
  @keyframes readyGlow {
    0%, 100% {
      box-shadow: 0 0 5px rgba(59, 130, 246, 0.5);
    }
    50% {
      box-shadow: 0 0 20px rgba(59, 130, 246, 0.8), 0 0 30px rgba(59, 130, 246, 0.6);
    }
  }
  
  @keyframes greenPulse {
    0%, 100% {
      transform: scale(1);
      box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7);
    }
    50% {
      transform: scale(1.02);
      box-shadow: 0 0 0 10px rgba(34, 197, 94, 0);
    }
  }
  
  @keyframes greenGlow {
    0%, 100% {
      box-shadow: 0 0 5px rgba(34, 197, 94, 0.5);
    }
    50% {
      box-shadow: 0 0 20px rgba(34, 197, 94, 0.8), 0 0 30px rgba(34, 197, 94, 0.6);
    }
  }
  
  .ready-button {
    animation: readyPulse 2s infinite, readyGlow 2s infinite;
  }
  
  .green-ready-button {
    animation: greenPulse 2s infinite, greenGlow 2s infinite;
  }
`;function r1(){const t=xr(),[s,r]=y.useState(null),[n,a]=y.useState(""),[l,o]=y.useState(!1),[i,c]=y.useState(!1),[h,p]=y.useState(""),[m,u]=y.useState(""),[x,j]=y.useState(""),[v,N]=y.useState(!1),[f,d]=y.useState([]),[g,b]=y.useState(!0),[E,R]=y.useState(!1),S=y.useRef(!1),[k,L]=y.useState(!1),A=y.useRef(null),D=y.useRef(null),I=async()=>{var ce,Ae;try{if(console.log(" Starting direct biometric authentication (VerifyFingerprint.ps1)..."),B){console.log(" Employee not found popup is active, blocking new scan");return}if(S.current){console.log(" Already processing a scan, ignoring new request");return}S.current=!0,R(!0),p("Starting fingerprint scan..."),u(""),p("Place your finger on the scanner..."),console.log(" Calling direct biometric login endpoint (uses VerifyFingerprint.ps1)..."),console.log(" This will capture fingerprint and verify against database in one operation..."),p(" PLACE YOUR FINGER ON THE SCANNER NOW! (8 seconds to place finger)");const Ie=(await le.post("/auth/biometric-login-direct")).data;if(Ie.success&&Ie.authenticated){console.log(" Authentication successful:",Ie.user),p(` Welcome, ${Ie.user.NAME}!`),localStorage.setItem("authToken",Ie.token),localStorage.setItem("authUser",JSON.stringify(Ie.user)),localStorage.setItem("authMethod","biometric"),le.defaults.headers.common.Authorization=`Bearer ${Ie.token}`,window.dispatchEvent(new CustomEvent("authUpdate"));const ye=Ie.user.PRIVILEGE||Ie.user.privilege||0,we=ye>0?"/hris-management":"/dtr-checker";console.log(` Authentication data stored, user privilege: ${ye}, navigating to ${we}...`),setTimeout(()=>{console.log(` Navigating to ${we}...`),t(we)},1500)}else console.log(" Authentication failed:",Ie.message),p(" Fingerprint not recognized"),u(Ie.message||"Authentication failed - fingerprint not found in database"),F(),console.log(" Keeping scanning state active for retry..."),p(' Fingerprint not recognized - Click "Scan Finger" to try again'),R(!1)}catch(Be){console.error(" Direct biometric authentication failed:",Be);const Ie=((Ae=(ce=Be.response)==null?void 0:ce.data)==null?void 0:Ae.message)||Be.message;Ie.includes("timeout")||Ie.includes("No finger detected")||Ie.includes("No fingerprint captured")?(p(" No finger detected"),u("No finger detected on scanner. Please place your finger and try again (press SPACE in simulation mode)."),console.log(" No finger detected - stopping scan, user can retry"),R(!1)):Ie.includes("No fingerprint templates found")?(p(" No enrolled fingerprints"),u("No fingerprints enrolled in the system. Please enroll your fingerprint first."),console.log(" Database has no enrolled fingerprints"),R(!1)):Ie.includes("not recognized")||Ie.includes("not found")?(p(" Fingerprint not recognized"),u("Your fingerprint was not recognized. Please try again or contact administrator."),F(),R(!1)):Ie.includes("SDK")||Ie.includes("not available")?(p(" SDK not available"),u("DigitalPersona SDK is not available. Please check SDK installation."),j(Ie),R(!1)):(p(" Scan failed"),u(Ie||"Fingerprint scan failed"),F(),R(!1))}finally{S.current=!1,console.log(" Direct biometric login attempt completed")}},O=()=>{console.log(" Stopping fingerprint scanning..."),R(!1),p("Scan stopped by user"),u(""),S.current=!1,console.log(" Scanning stopped successfully")},C=()=>{T&&(clearInterval(T),H(null)),w(!1),J(0),u(""),p("Ready to scan"),E&&(console.log(" Popup closed, resuming automatic scanning..."),p("Ready to scan - Place finger on scanner..."))},F=()=>{w(!0),J(10);const ce=setInterval(()=>{J(Ae=>Ae<=1?(clearInterval(ce),H(null),w(!1),J(0),u(""),p("Ready to scan"),E&&(console.log(" Popup auto-closed, resuming automatic scanning..."),p("Ready to scan - Place finger on scanner...")),0):Ae-1)},1e3);H(ce)};y.useEffect(()=>(console.log(" LoginBio: Initializing DigitalPersona biometric system..."),(async()=>{try{U(),console.log(" Initializing DigitalPersona PowerShell Win32 SDK Client..."),A.current=new t1,await A.current.initialize(),console.log(" DigitalPersona PowerShell Win32 SDK Client initialized successfully"),j(""),o(!0),c(!0),setTimeout(()=>{G()},1e3)}catch(Ae){console.error(" Failed to initialize DigitalPersona Native system:",Ae),j(`Initialization failed: ${Ae.message}`),b(!1),o(!1),c(!1)}})(),()=>{Y()}),[]);const U=()=>{r(null),a(""),o(!1),c(!1),p(""),u(""),j(""),N(!1),d([]),b(!0),R(!1)},Y=()=>{if(console.log(" Cleaning up DigitalPersona system..."),D.current&&clearTimeout(D.current),window.fingerDetectionResolve&&delete window.fingerDetectionResolve,window.fingerDetectionReject&&delete window.fingerDetectionReject,A.current)try{A.current=null}catch(ce){console.error(" Cleanup error:",ce)}},G=async()=>{try{if(console.log(" Detecting DigitalPersona devices via PowerShell Win32 SDK..."),b(!0),j("Scanning for devices..."),!A.current)throw new Error("DigitalPersona PowerShell Win32 SDK client not initialized");const ce=await A.current.getDevices();console.log(" PowerShell Win32 SDK device detection result:",ce);let Ae=[];if(ce&&(Array.isArray(ce)?Ae=ce:ce.devices&&Array.isArray(ce.devices)?Ae=ce.devices:(ce.id!==void 0||ce.name!==void 0)&&(Ae=[ce])),Ae.length>0){const Be=Ae.map((Ie,ye)=>({id:Ie.id||Ie.Id||ye,name:Ie.name||Ie.Name||`DigitalPersona Scanner ${ye+1}`,type:"digitalPersona",status:"connected",details:`Model: ${Ie.model||Ie.Model||"Unknown"}`}));console.log(" DigitalPersona devices found:",Be),d(Be),N(!1),b(!1),j(`${Be.length} device(s) detected`),Be.length===1?(console.log(" Auto-selecting single device..."),setTimeout(()=>{V(Be[0])},500)):r({id:"",name:"Please select a device",type:"placeholder"})}else console.log(" No DigitalPersona devices detected"),d([]),N(!1),r({id:"",name:"No device",type:"placeholder"}),b(!1),j("No devices detected - check connection")}catch(ce){console.error(" Device detection failed:",ce),d([]),N(!1),r({id:"",name:"Device detection failed",type:"placeholder"}),b(!1),j(`Detection failed: ${ce.message}`)}},V=async ce=>{try{if(console.log(" handleDeviceSelectionWithDevice called with:",ce),console.log(" Device ID:",ce==null?void 0:ce.id),console.log(" Device name:",ce==null?void 0:ce.name),!ce){console.error(" No device provided for selection"),u("Device selection failed: No device provided");return}r(ce),a(ce.id),N(!1),u(""),j(`Selected device: ${ce.name} (${ce.id})`),await _(ce)}catch(Ae){console.error(" Device selection failed:",Ae),u(`Device selection failed: ${Ae.message}`)}},W=async ce=>{try{if(console.log(" handleDeviceSelection called with deviceId:",ce),!ce){r(null),a("");return}const Ae=f.find(Be=>String(Be.id)===String(ce));if(!Ae){console.error(" Device not found in availableDevices"),u("Selected device not found");return}console.log(" Device found, calling handleDeviceSelectionWithDevice:",Ae),await V(Ae)}catch(Ae){console.error(" Device selection failed:",Ae),u(`Device selection failed: ${Ae.message}`)}},_=async ce=>{try{if(console.log(" Initializing DigitalPersona device:",ce.name),!A.current)throw new Error("DigitalPersona PowerShell Win32 SDK client not available");A.current.isInitialized()||await A.current.initialize(),o(!0),c(!0),p('Device is ready - Click "Scan Finger" to start '),j(""),console.log(" DigitalPersona device ready for scanning"),console.log(" Current state after initialization:",{isInitialized:!0,readerAvailable:!0,selectedDevice:ce,showDeviceSelection:!1})}catch(Ae){console.error(" Device initialization failed:",Ae),p("Device initialization failed"),u(`Initialization error: ${Ae.message}`)}},M=({onClose:ce})=>e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-4",children:" DigitalPersona PowerShell Win32 SDK Communication Issue"}),e.jsx("p",{className:"text-gray-700 mb-4",children:"The fingerprint scanner is experiencing communication errors with the PowerShell Win32 SDK."}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Architecture:"})," Web App  Node.js  PowerShell Win32 SDK  DigitalPersona Runtime  Fingerprint Hardware"]})}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Technical Details:"})," PowerShell Win32 SDK communication errors indicate issues with the PowerShell execution or DigitalPersona device drivers."]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:"Quick Fix:"}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-3 font-mono text-sm",children:[e.jsx("div",{className:"text-gray-600",children:"# Restart DigitalPersona services"}),e.jsx("div",{children:"net stop DpHost"}),e.jsx("div",{children:"Start-Sleep -Seconds 3"}),e.jsx("div",{children:"net start DpHost"}),e.jsx("div",{className:"text-gray-600",children:"# Restart the web application"}),e.jsx("div",{children:"Refresh the page or restart the backend server"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:'Or use services.msc to restart "DigitalPersona Authentication Service"'})]}),e.jsxs("div",{className:"flex flex-col space-y-3 mt-6",children:[e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:X,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Reinitialize PowerShell Win32 SDK"}),e.jsx("button",{onClick:pe,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Reset PowerShell Win32 SDK"})]}),e.jsx("button",{onClick:ce,className:"w-full bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Close"})]})]})}),[P,$]=y.useState(!1),[B,w]=y.useState(!1),[T,H]=y.useState(null),[K,J]=y.useState(0);y.useEffect(()=>()=>{T&&clearInterval(T)},[T]);const X=async()=>{try{if($(!1),p("Reinitializing PowerShell Win32 SDK..."),u(""),A.current)await A.current.initialize(),p(" PowerShell Win32 SDK reinitialized successfully"),u(""),setTimeout(()=>{G()},2e3);else throw new Error("DigitalPersona PowerShell Win32 SDK client not available")}catch(ce){console.error("PowerShell Win32 SDK reinitialization error:",ce),p(" PowerShell Win32 SDK reinitialization failed"),u("Failed to reinitialize PowerShell Win32 SDK. Please try again."),$(!0)}},pe=async()=>{try{if(p("Attempting PowerShell Win32 SDK error recovery..."),u(""),A.current){console.log(" Attempting PowerShell Win32 SDK reinitialization...");try{await A.current.initialize(),console.log(" PowerShell Win32 SDK reinitialization successful"),$(!1),p("Ready to scan - please try again"),u("")}catch(ce){console.error(" PowerShell Win32 SDK reinitialization failed:",ce),u("Failed to reinitialize PowerShell Win32 SDK. Please restart the application.")}}else throw new Error("DigitalPersona PowerShell Win32 SDK client not available")}catch(ce){console.error("PowerShell Win32 SDK recovery error:",ce),p(" PowerShell Win32 SDK recovery failed"),u("PowerShell Win32 SDK recovery failed. Please restart the application."),$(!0)}},oe=()=>{console.log(" Retrying device detection..."),u(""),j("Retrying device detection..."),G()};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center p-4",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:s1}}),P&&e.jsx(M,{onClose:()=>{$(!1),u(""),p("Ready to scan - please try again")}}),B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 p-8 transform animate-in zoom-in-95 duration-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-6",children:e.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"EMPLOYEE NOT FOUND!"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["The fingerprint you scanned does not match any registered employee in the system.",e.jsx("br",{}),e.jsx("br",{}),"Please contact your administrator to enroll your fingerprint or try scanning again."]}),K>0&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-gray-100 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"This popup will close automatically in:"}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:K})]})}),e.jsxs("button",{onClick:C,className:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:["Try Again (or wait ",K,"s)"]})]})})}),g&&f.length===0&&e.jsx("div",{className:"w-full max-w-md",children:e.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-8 flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"w-24 h-24 text-blue-400 animate-pulse",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-400/30 border-t-blue-400 animate-spin"})]})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"Initializing SDK"}),e.jsx("p",{className:"text-white/70 mb-6",children:"Setting up fingerprint authentication..."}),e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("div",{className:"mt-8 w-full bg-white/10 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-blue-600 rounded-full animate-pulse",style:{width:"60%"}})})]})})}),(!g||f.length>0||s)&&e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 p-8",children:[!v&&s&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[e.jsx("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"Select Fingerprint Scanner"}),g?e.jsxs("div",{className:"flex items-center justify-center py-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),e.jsx("span",{className:"text-white/70 text-sm",children:"Detecting devices..."})]}):e.jsxs("select",{value:n,onChange:ce=>W(ce.target.value),className:"w-full px-4 py-3 bg-gray-800/80 border border-gray-600/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Choose a fingerprint scanner..."}),f.map(ce=>e.jsx("option",{value:ce.id,children:ce.name},ce.id))]}),f.length===0&&!g&&e.jsxs("div",{className:"mt-3 p-3 bg-red-500/20 border border-red-400/30 rounded-lg",children:[e.jsx("p",{className:"text-red-300 text-sm",children:" No fingerprint scanners detected. Please check your device connection."}),e.jsx("button",{onClick:oe,className:"mt-2 px-3 py-1 bg-white/10 hover:bg-white/20 text-white text-sm rounded transition-all",children:" Retry Detection"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:"Fingerprint Authentication"}),e.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Place your finger on the scanner to authenticate"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${l&&i?"bg-green-400 animate-pulse":l?"bg-yellow-400 animate-pulse":"bg-red-400"}`}),e.jsx("span",{className:`text-sm ${l&&i?"text-green-300":l?"text-yellow-300":"text-red-300"}`,children:l&&i?"Ready to Scan":l?"Initializing...":"Not Ready"})]}),e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsxs("div",{className:`relative transition-all duration-500 ${E?"animate-pulse":""}`,children:[e.jsx("svg",{className:`w-32 h-32 transition-all duration-500 ${E?"text-blue-400 drop-shadow-[0_0_20px_rgba(59,130,246,0.8)]":"text-white/60"}`,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})}),E&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-400/30 animate-ping"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-blue-500/50 animate-pulse"})]})]})}),E?e.jsx("button",{onClick:O,className:"w-full px-6 py-4 text-white font-semibold rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-red-500 bg-red-600 hover:bg-red-700",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),e.jsx("span",{children:"Stop Scanning"})]})}):e.jsx("button",{onClick:I,disabled:!l||!i,className:`w-full px-6 py-4 text-white font-semibold rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 ${l&&i?"bg-blue-600 hover:bg-blue-700 ready-button":"bg-gray-600 cursor-not-allowed opacity-50"}`,children:e.jsx("div",{className:"flex items-center justify-center",children:l&&i?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})}),e.jsx("span",{children:"Scan Finger"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),l?"Initializing...":"Start Fingerprint Scan"]})})})]}),e.jsx("div",{className:"space-y-3",children:e.jsx("button",{onClick:()=>t("/login"),className:"w-full py-2 px-4 bg-white/10 hover:bg-white/20 text-white text-sm rounded-lg border border-white/20 transition-all",children:" Back to Login"})}),h&&e.jsx("div",{className:`text-center px-4 py-3 rounded-lg ${h.includes("")||h.includes("Welcome")?"bg-green-500/20 text-green-300 border border-green-500/30":h.includes("")||h.includes("failed")?"bg-red-500/20 text-red-300 border border-red-500/30":h.includes("Waiting for finger")||h.includes("Detecting finger")?"bg-yellow-500/20 text-yellow-300 border border-yellow-500/30":"bg-blue-500/20 text-blue-300 border border-blue-500/30"}`,children:h}),(h.includes("Waiting for finger")||h.includes("Detecting finger"))&&e.jsxs("div",{className:"text-center px-4 py-3 rounded-lg bg-yellow-500/20 text-yellow-300 border border-yellow-500/30",children:[e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"w-5 h-5 mr-2 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.jsx("span",{className:"animate-pulse",children:"Touch the scanner surface with your finger"})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("p",{className:"text-xs text-yellow-200",children:"DigitalPersona Real SDK - touch the scanner surface"}),e.jsx("p",{className:"text-xs text-yellow-300",children:"Using actual hardware detection with DigitalPersona SDK"}),e.jsx("p",{className:"text-xs text-green-300",children:" Real SDK: Hardware-based finger detection active"})]})]}),x&&e.jsxs("div",{className:"text-xs text-white/60 bg-black/20 p-3 rounded border border-white/10",children:[e.jsx("strong",{children:"Debug:"})," ",x]})]}),m&&e.jsx("div",{className:"mt-4 p-4 bg-red-500/20 border border-red-500/30 rounded-lg",children:e.jsx("div",{className:"text-red-300 text-sm whitespace-pre-line",children:m})})]})})]})}const Vt=t=>{if(!t||typeof t!="string")return 0;const[s,r]=t.split(":").map(Number);return s*60+r},It=t=>{if(!t)return null;if(typeof t=="string"){const s=t.match(/(\d{2}):(\d{2})/);return s?`${s[1]}:${s[2]}`:null}return null},ma=t=>t&&typeof t=="string"?t.slice(0,10):null,n1=(t,s)=>{const r=[];let n=new Date(t);const a=new Date(s);for(;n<=a;)r.push(n.toISOString().slice(0,10)),n.setDate(n.getDate()+1);return r},jr=t=>{const r=new Date(t).getDay();return r===0||r===6},Uc=t=>{if(!t)return"";const s=new Date(t);if(isNaN(s.getTime()))return t;const r=String(s.getDate()).padStart(2,"0"),n=s.toLocaleString("en-US",{month:"short"}),a=s.getFullYear(),l=s.toLocaleString("en-US",{weekday:"short"});return`${r}-${n}-${a}, ${l}`},Cl=t=>t?t.split(/[ T]/)[0]:"",Bh=(t,s,r)=>!t||t.length===0?"":t.filter(l=>{const o=Cl(l.LOCDATE||l.locatordate);return l.LOCUSERID?o===s&&String(l.LOCUSERID)===String(r):o===s}).map(l=>l.LOCREMARKS||l.locremarks||"Locator filed").filter(Boolean).length>0?"Locator filed":"",zh=(t,s,r)=>{const n=Math.random().toString(36).substr(2,9);if(console.log(` [LEAVE REMARKS ${n}] getLeaveRemarksForDate called with:`,{dateStr:s,userId:r,leaveDataLength:t==null?void 0:t.length,allLeaveDates:t==null?void 0:t.map(o=>({date:o.LEAVEDATE,extracted:Cl(o.LEAVEDATE),userId:o.USERID}))}),!t||t.length===0)return console.log(` [LEAVE REMARKS ${n}] No leave data available`),"";const a=t.filter(o=>{const i=Cl(o.LEAVEDATE),c=i===s,h=String(o.USERID)===String(r);return console.log(` [LEAVE REMARKS ${n}] Checking leave:`,{leaveDate:i,targetDate:s,leaveUserId:o.USERID,targetUserId:r,dateMatch:c,userMatch:h,leaveType:o.LeaveName,leaveDetail:o.LEAVEDETAIL,remarks:o.LEAVEREMARKS,willInclude:c&&h,rawLeaveDate:o.LEAVEDATE,extractedLeaveDate:i}),c&&h});if(console.log(` [LEAVE REMARKS ${n}] Found leaves for date:`,a.length,a),a.length===0)return"";const l=a.map(o=>{const i=o.LEAVEREFNO||"N/A";return console.log(` [LEAVE REMARKS ${n}] Processing leave:`,{leaveName:o.LeaveName,leaveRefNo:i,hasLeaveName:!!o.LeaveName,fallback:"Leave"}),`Leave: (${i})`}).join("; ");return console.log(` [LEAVE REMARKS ${n}] Final result:`,l),l},Wh=(t,s)=>{if(!t||t.length===0)return null;const r=t.filter(a=>ma(a.TRAVELDATE)===s);return r.length===0?null:r.map(a=>`Travel: (${a.TRAVELNO||"N/A"})`).join("; ")},Vh=(t,s)=>{if(!t||t.length===0)return null;const r=t.filter(a=>{const l=ma(a.HOLIDAYDATE);if(a.ISRECURRING){const o=new Date(l),i=new Date(s);return o.getMonth()===i.getMonth()&&o.getDate()===i.getDate()}return l===s});return r.length===0?null:r.map(a=>a.HOLIDAYNAME).join("; ")},n0=(t,s,r)=>!t||t.length===0?!1:t.some(n=>Cl(n.LEAVEDATE)===s&&String(n.USERID)===String(r)),a1=(t,s,r)=>!t||t.length===0?!1:t.some(n=>{const a=Cl(n.LEAVEDATE),l=n.LeaveName&&n.LeaveName.toLowerCase().includes("ob");return a===s&&String(n.USERID)===String(r)&&l}),di=(t,s,r)=>!t||t.length===0?!1:t.some(n=>ma(n.TRAVELDATE)===s&&String(n.USERID)===String(r)),Jn=(t,s)=>!t||t.length===0?!1:t.some(r=>{const n=ma(r.HOLIDAYDATE);if(r.ISRECURRING){const a=new Date(n),l=new Date(s);return a.getMonth()===l.getMonth()&&a.getDate()===l.getDate()}return n===s}),po=(t,s,r,n,a,l,o,i)=>{const c=t&&t.trim()!==""&&t.trim()!=="-",h=n0(n,s,r),p=a1(n,s,r),m=di(a,s,r),u=Jn(l,s);return console.log(" [TIME COLUMN] renderTimeColumn called:",{timeValue:t,dateStr:s,userId:r,hasValue:c,isWeekend:o,hasLeave:h,hasOBLeave:p,hasTravel:m,hasHoliday:u,leaveDataLength:n==null?void 0:n.length,travelDataLength:a==null?void 0:a.length,holidayDataLength:l==null?void 0:l.length}),c?(console.log(" [TIME COLUMN] Showing actual time value:",t),t):o?(console.log(" [TIME COLUMN] Showing Weekend annotation"),e.jsx("span",{className:"text-blue-600 font-medium",children:"Weekend"})):h||p?(console.log(" [TIME COLUMN] Showing Leave annotation"),e.jsx("span",{className:"text-gray-400",children:"Leave"})):m?(console.log(" [TIME COLUMN] Showing Travel annotation"),e.jsx("span",{className:"text-gray-400",children:"Travel"})):u?(console.log(" [TIME COLUMN] Showing Holiday annotation"),e.jsx("span",{className:"text-red-600 font-medium",children:"Holiday"})):i&&i.includes("Absent")?(console.log(" [TIME COLUMN] Showing Absent annotation"),e.jsx("span",{className:"text-orange-600 font-semibold",children:"Absent"})):(console.log(" [TIME COLUMN] Showing dash (no logs, no annotations)"),"-")},Yh=(t,s,r)=>{if(!t||!s||!r)return!1;const n=Vt(t);return n>=s&&n<=r},qh=(t,s,r,n,a,l)=>{const o=new Date,i=o.toISOString().split("T")[0],c=t>i,h=t===i,p=n0(r,t,l),m=di(n,t,l),u=Jn(a,t),x=jr(t);return console.log(" [ABSENT FUNCTION] Checking Absent condition for date:",t,{hasLeave:p,hasTravel:m,hasHoliday:u,timeLogCount:s,isFutureDate:c,isCurrentDate:h,isWeekendDay:x,currentTime:o.toISOString(),dateStr:t,todayStr:i}),!x&&!p&&!m&&!u&&s===0&&!h&&!c},l1=({user:t,selectedFilter:s,shiftSchedule:r,locatorData:n=[],selectedPeriod:a="full",onLogsProcessed:l})=>{const{user:o}=Qt(),i=t||o;if(!i)return e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-lg",children:"Loading user information..."})});const[c,h]=y.useState([]),[p,m]=y.useState([]),[u,x]=y.useState(!1),[j,v]=y.useState(!1),[N,f]=y.useState(null),[d,g]=y.useState([]),[b,E]=y.useState([]),[R,S]=y.useState([]),[k,L]=y.useState([]),[A,D]=y.useState(!1),[I,O]=y.useState(""),[C,F]=y.useState(null),U=()=>new Date().toISOString().slice(0,10),Y=()=>{const w=new Date,T=U();let H,K;if(s==="Last 2 Weeks"){const J=new Date(w);J.setDate(w.getDate()-13),H=J.toISOString().slice(0,10),K=T}else if(s==="This Month"){const J=w.getFullYear(),X=w.getMonth()+1,pe=`${J}-${String(X).padStart(2,"0")}-01`,oe=new Date(J,X,0).getDate(),ce=`${J}-${String(X).padStart(2,"0")}-${String(oe).padStart(2,"0")}`;a==="first_half"?(H=pe,K=`${J}-${String(X).padStart(2,"0")}-15`):a==="second_half"?(H=`${J}-${String(X).padStart(2,"0")}-16`,K=ce):(H=pe,K=ce)}else if(s==="Last Month"){const J=w.getFullYear(),X=w.getMonth();let pe=J,oe=X-1;X===0&&(pe=J-1,oe=11);const ce=`${pe}-${String(oe+1).padStart(2,"0")}-01`,Ae=new Date(pe,oe+1,0).getDate(),Be=`${pe}-${String(oe+1).padStart(2,"0")}-${String(Ae).padStart(2,"0")}`;a==="first_half"?(H=ce,K=`${pe}-${String(oe+1).padStart(2,"0")}-15`):a==="second_half"?(H=`${pe}-${String(oe+1).padStart(2,"0")}-16`,K=Be):(H=ce,K=Be)}else H=T,K=T;return{startDate:H,endDate:K}};y.useEffect(()=>{(async()=>{var T,H,K;if(!(!i||!i.id)){v(!0),f(null);try{const{startDate:J,endDate:X}=Y(),pe=await le.get("/dtr/logs",{params:{startDate:J,endDate:X}}),oe=Array.isArray(pe.data)?pe.data:[],ce=oe.filter(Ae=>String(Ae.USERID)===String(i.id));console.log(" [DEBUG] Total logs from API:",oe.length),console.log(" [DEBUG] User ID:",i.id),console.log(" [DEBUG] Filtered logs for user:",ce.length),console.log(" [DEBUG] Sample log USERID:",(T=oe[0])==null?void 0:T.USERID),S(ce)}catch(J){f(((K=(H=J.response)==null?void 0:H.data)==null?void 0:K.message)||"Failed to fetch DTR logs. Please try again.")}finally{v(!1)}}})()},[i==null?void 0:i.id,s,a]),y.useEffect(()=>{(async()=>{var T,H;if(!(i!=null&&i.id)&&!(i!=null&&i.USERID)){F(null);return}try{const K=i.id||i.USERID,J=await le.get("/201-employees");if((T=J.data)!=null&&T.success&&((H=J.data)!=null&&H.data)){const X=J.data.data.find(pe=>String(pe.dtruserid)===String(K));F(X?X.objid:null)}}catch(K){console.error(" Error fetching employee objid:",K),F(null)}})()},[i]),y.useEffect(()=>{(async()=>{var T;if(!C){m([]);return}try{x(!0);const{startDate:H,endDate:K}=Y(),pe=(((T=(await le.get("/employee-locators",{params:{emp_objid:C,from:H,to:K}})).data)==null?void 0:T.data)||[]).map(oe=>({LOCDATE:oe.locatordate,LOCUSERID:oe.emp_objid,LOCREMARKS:oe.locremarks||"Locator filed",objid:oe.objid}));m(pe)}catch(H){console.error(" Error fetching locator data:",H),m([])}finally{x(!1)}})()},[C,s,a]),y.useEffect(()=>{const w=async()=>{var T,H,K;try{console.log(" [LEAVE2 DEBUG] Starting to load leave data for employee:",i==null?void 0:i.id);const J=await le.get("/leave/records");if(console.log(" [LEAVE2 DEBUG] Raw API response:",J),console.log(" [LEAVE2 DEBUG] Response data:",J.data),J.data.success){console.log(" [LEAVE2 DEBUG] API call successful, setting leave data"),console.log(" [LEAVE2 DEBUG] Leave records count:",(T=J.data.data)==null?void 0:T.length),console.log(" [LEAVE2 DEBUG] All leave records:",J.data.data);const X=((H=J.data.data)==null?void 0:H.filter(pe=>String(pe.USERID)===String(i.id)))||[];console.log(" [LEAVE2 DEBUG] Leave records for current employee:",X),console.log(" [LEAVE2 DEBUG] Employee leave count:",X.length),g(X)}else console.log(" [LEAVE2 DEBUG] API response not successful:",J.data)}catch(J){console.error(" [LEAVE2 DEBUG] Error loading leave data:",J),console.error(" [LEAVE2 DEBUG] Error details:",(K=J.response)==null?void 0:K.data)}};i?(console.log(" [LEAVE2 DEBUG] User changed, loading leave data"),w()):(console.log(" [LEAVE2 DEBUG] No user, clearing leave data"),g([]))},[i]),y.useEffect(()=>{(async()=>{var T,H;if(i!=null&&i.id)try{console.log(" [TRAVEL2 DEBUG] Starting to load travel data for employee:",i.id);const K=await le.get("/travel-orders",{params:{userId:i.id,page:1,limit:1e3}});if(console.log("[TRAVEL2 DEBUG] Raw API response:",K),console.log(" [TRAVEL2 DEBUG] Response data:",K.data),K.data.success){console.log(" [TRAVEL2 DEBUG] API call successful, setting travel data"),console.log(" [TRAVEL2 DEBUG] Travel records count:",((T=K.data.data)==null?void 0:T.length)||0),console.log("[TRAVEL2 DEBUG] All travel records:",K.data.data);const J=((H=K.data.data)==null?void 0:H.filter(X=>parseInt(X.USERID)===parseInt(i.id)))||[];console.log(" [TRAVEL2 DEBUG] Travel records for current employee:",J),console.log(" [TRAVEL2 DEBUG] Employee travel count:",J.length),E(J)}else console.log(" [TRAVEL2 DEBUG] API call failed:",K.data.message),E([])}catch(K){console.error(" [TRAVEL2 DEBUG] Error fetching travel data:",K),E([])}})()},[i]);const G=y.useCallback(async()=>{try{const w=new Date().getFullYear(),T=await le.get(`/holidays/db?year=${w}`);T.data.success&&(L(T.data.data),console.log(" Holiday data loaded:",T.data.data.length,"holidays"))}catch(w){console.error(" Error loading holiday data:",w)}},[]);y.useEffect(()=>{G()},[G]);const V=(w,T)=>!d||d.length===0?!1:d.some(H=>ma(H.LEAVEDATE)===w&&String(H.USERID)===String(T));y.useEffect(()=>{if(console.log(" [USE EFFECT] Starting to process logs...",{logsLength:R==null?void 0:R.length,shiftSchedule:!!r,locatorDataLength:p==null?void 0:p.length,leaveDataLength:d==null?void 0:d.length,travelDataLength:b==null?void 0:b.length,holidayDataLength:k==null?void 0:k.length,userId:i==null?void 0:i.id,selectedFilter:s}),!r){console.log(" [USE EFFECT] No shift schedule available, setting empty array"),h([]);return}const w=s==="Today"||s==="today";if(!R||R.length===0)if(w)console.log(" [USE EFFECT] No logs available, but processing Today filter anyway");else{console.log(" [USE EFFECT] No logs available, setting empty array"),h([]);return}const{startDate:T,endDate:H}=Y();console.log("Date range:",{startDate:T,endDate:H,selectedFilter:s});const K=n1(T,H);if(console.log(" Generated date range:",K),s==="Today"||s==="today"){const X=U();K.includes(X)||(console.log(" [DEBUG] Adding current date to range for Today filter"),K.push(X)),console.log(" [DEBUG] Today filter - dateRange:",K)}const J=K.map(X=>{var rt,gt,mt,it;console.log(`
 Processing day ${X.split("-")[2]}: ${X}`);const pe=(R||[]).filter(ae=>ma(ae.CHECKTIME)===X);if(console.log(` Found ${pe.length} logs for ${X}:`,pe),pe.length===0){console.log(` [NO LOGS] Processing date ${X} with no logs`);const ae=di(b,X,i.id),Ce=V(d,X,i.id),Se=Jn(k,X);console.log(` [NO LOGS] Status for ${X}:`,{hasTravel:ae,hasLeave:Ce,hasHoliday:Se,isWeekend:jr(X)});const qe=ae?1:0;let Ze=jr(X)?"Weekend":"";const ke=Bh(p,X,i.id),te=zh(d,X,i.id),Ne=Wh(b,X),de=Vh(k,X);console.log(" [REMARKS DEBUG] For date:",X,{locatorRemarks:ke,leaveRemarks:te,travelRemarks:Ne,holidayRemarks:de,travelDataCount:(b==null?void 0:b.length)||0,holidayDataCount:(k==null?void 0:k.length)||0});const q=[ke,te,Ne,de].filter(Boolean);q.length>0&&(Ze=Ze?`${Ze}; ${q.join("; ")}`:q.join("; "));const me=0,Ue=new Date().toISOString().split("T")[0],Re=X===Ue;!Re&&qh(X,me,d,b,k,i.id)&&(Ze=Ze?`${Ze}; Absent`:"Absent",console.log(" [ABSENT DEBUG - NO LOGS] Added Absent remark for date:",X));const $e=X>Ue;if(!jr(X)&&!Re&&!$e&&!Ce&&!ae&&!Se){const Ve=r.SHIFT_AMCHECKIN&&r.SHIFT_AMCHECKOUT&&r.SHIFT_PMCHECKIN&&r.SHIFT_PMCHECKOUT;console.log(Ve?" [LOCATOR DEBUG] Normal shift detected for no logs case":" [LOCATOR DEBUG] Non-normal shift detected for no logs case")}return console.log(` [NO LOGS] Returning row for ${X}:`,{date:Uc(X),remarks:Ze,isWeekend:jr(X),hasHoliday:Se}),{date:Uc(X),dateStr:X,amCheckIn:"-",amCheckOut:"-",pmCheckIn:"-",pmCheckOut:"-",lateMinutes:0,days:qe,remarks:Ze,isWeekend:jr(X),hasHoliday:Se}}const oe={amCheckInWindow:[Vt(It(r.SHIFT_AMCHECKIN_START)),Vt(It(r.SHIFT_AMCHECKIN_END))],amCheckOutWindow:[Vt(It(r.SHIFT_AMCHECKOUT_START)),Vt(It(r.SHIFT_AMCHECKOUT_END))],pmCheckInWindow:[Vt(It(r.SHIFT_PMCHECKIN_START)),Vt(It(r.SHIFT_PMCHECKIN_END))],pmCheckOutWindow:[Vt(It(r.SHIFT_PMCHECKOUT_START)),Vt(It(r.SHIFT_PMCHECKOUT_END))]};console.log(" Time windows (in minutes):",oe);const ce=pe.filter(ae=>{const Ce=It(ae.CHECKTIME||ae.DATE||ae.date);return Ce&&Vt(Ce)<12*60}).sort((ae,Ce)=>Vt(It(ae.CHECKTIME||ae.DATE||ae.date))-Vt(It(Ce.CHECKTIME||Ce.DATE||Ce.date))),Ae=ce.length>0?It(ce[0].CHECKTIME||ce[0].DATE||ce[0].date):"",Be=pe.filter(ae=>{const Ce=It(ae.CHECKTIME||ae.DATE||ae.date);return Ce&&Yh(Ce,oe.amCheckOutWindow[0],oe.amCheckOutWindow[1])}).sort((ae,Ce)=>Vt(It(ae.CHECKTIME||ae.DATE||ae.date))-Vt(It(Ce.CHECKTIME||Ce.DATE||Ce.date))),Ie=Be.length>0?It(Be[0].CHECKTIME||Be[0].DATE||Be[0].date):"",ye=pe.filter(ae=>{const Ce=It(ae.CHECKTIME||ae.DATE||ae.date);return Ce&&Yh(Ce,oe.pmCheckInWindow[0],oe.pmCheckInWindow[1])}).sort((ae,Ce)=>Vt(It(ae.CHECKTIME||ae.DATE||ae.date))-Vt(It(Ce.CHECKTIME||Ce.DATE||Ce.date))),se=ye.length>0?It(ye[0].CHECKTIME||ye[0].DATE||ye[0].date):"",we=pe.filter(ae=>{const Ce=It(ae.CHECKTIME||ae.DATE||ae.date);return Ce&&Vt(Ce)>oe.pmCheckInWindow[1]}).sort((ae,Ce)=>Vt(It(Ce.CHECKTIME||Ce.DATE||Ce.date))-Vt(It(ae.CHECKTIME||ae.DATE||ae.date))),ve=we.length>0?It(we[0].CHECKTIME||we[0].DATE||we[0].date):"";console.log(" Found logs:",{amCheckIn:((rt=ce[0])==null?void 0:rt.CHECKTIME)||null,amCheckOut:((gt=Be[0])==null?void 0:gt.CHECKTIME)||null,pmCheckIn:((mt=ye[0])==null?void 0:mt.CHECKTIME)||null,pmCheckOut:((it=we[0])==null?void 0:it.CHECKTIME)||null}),console.log(" Extracted times:",{amCheckInTime:Ae,amCheckOutTime:Ie,pmCheckInTime:se,pmCheckOutTime:ve});const Q=(()=>{const ae=V(X,i.id),Ce=Jn(k,X);if(ae||Ce)return console.log(" [DAYS CALC] Holiday or Leave - 0 days credit"),0;const Se=Ae!=="",qe=Ie!=="",Ze=se!=="",ke=ve!=="";return console.log(" [DAYS CALC] Checking day calculation:",{date:X,hasAMCheckIn:Se,hasAMCheckOut:qe,hasPMCheckIn:Ze,hasPMCheckOut:ke,amCheckInTime:Ae,amCheckOutTime:Ie,pmCheckInTime:se,pmCheckOutTime:ve}),Se&&qe&&Ze&&ke||Se&&qe&&ke&&!Ze||Se&&Ze&&ke&&!qe||Se&&ke&&!qe&&!Ze?(console.log(" [DAYS CALC] Full day credit (1.0)"),1):Se&&qe&&!Ze&&!ke||!Se&&!qe&&Ze&&ke?(console.log(" [DAYS CALC] Half day credit (0.5) - Original scenarios"),.5):qe&&Ze&&!Se&&!ke||qe&&Ze&&Se&&!ke||qe&&Ze&&!Se&&ke||Se&&ke&&!qe&&!Ze||Se&&ke&&qe&&!Ze||Se&&ke&&!qe&&Ze?(console.log(" [DAYS CALC] Half day credit (0.5) - New scenarios"),.5):(console.log(" [DAYS CALC] No credit (0.0)"),0)})(),ne=(()=>{let ae=0;if(Ae&&r.SHIFT_AMCHECKIN){const Ce=Vt(It(r.SHIFT_AMCHECKIN)),qe=Vt(Ae)-Ce;qe>0&&(ae+=qe)}if(se&&r.SHIFT_PMCHECKIN){const Ce=Vt(It(r.SHIFT_PMCHECKIN)),qe=Vt(se)-Ce;qe>0&&(ae+=qe)}return ae})();console.log(" Day calculations:",{days:Q,late:ne});const he=Jn(k,X);let Me=jr(X)?"Weekend":"";const be=Bh(p,X,i.id),De=zh(d,X,i.id),ze=Wh(b,X),Ee=Vh(k,X);console.log(" [REMARKS DEBUG] For date:",X,{locatorRemarks:be,leaveRemarks:De,travelRemarks:ze,holidayRemarks:Ee,travelDataCount:(b==null?void 0:b.length)||0,holidayDataCount:(k==null?void 0:k.length)||0});const Z=[be,De,ze,Ee].filter(Boolean);Z.length>0&&(Me=Me?`${Me}; ${Z.join("; ")}`:Z.join("; "));const ee=[Ae,Ie,se,ve].filter(ae=>ae&&ae.trim()!=="").length;qh(X,ee,d,b,k,i.id)&&(Me=Me?`${Me}; Absent`:"Absent",console.log(" [ABSENT DEBUG] Added Absent remark for date:",X));const Qe=new Date().toISOString().split("T")[0],je=X>Qe,Ke=X===Qe;if(!jr(X)&&!Ke&&!je){const ae=V(d,X,i.id),Ce=di(b,X,i.id),Se=Jn(k,X);if(!ae&&!Ce&&!Se)if(r.SHIFT_AMCHECKIN&&r.SHIFT_AMCHECKOUT&&r.SHIFT_PMCHECKIN&&r.SHIFT_PMCHECKOUT){const ke=[Ae,Ie,se,ve].filter(te=>te&&te.trim()!=="");ke.length>0&&ke.length<4&&(!Me||!Me.includes("File a locator"))&&(Me=Me?`${Me}; File a locator`:"File a locator",console.log(" [LOCATOR DEBUG] Added File a locator remark for date (missing logs):",X))}else ee>0&&ee<4&&(!Me||!Me.includes("File a locator"))&&(Me=Me?`${Me}; File a locator`:"File a locator",console.log(" [LOCATOR DEBUG] Added File a locator remark for date (partial logs):",X))}return{date:Uc(X),dateStr:X,amCheckIn:Ae,amCheckOut:Ie,pmCheckIn:se,pmCheckOut:ve,lateMinutes:ne,days:Q,remarks:Me,isWeekend:jr(X),hasHoliday:he,shiftSchedule:r.SHIFTNAME}});console.log(" Final processed days:",J),console.log(" [DEBUG] Sample processed log:",J[0]),h(J),l&&l(J)},[R,r,p,d,b,i,s,k,l]);const W=w=>{O(w),D(!0)},_=()=>{D(!1),O("")},M=async w=>{var T;if(!C){alert("Employee information not found. Please try again.");return}try{await le.post("/employee-locators",{emp_objid:C,locatordate:I,locdestination:w.locdestination,loctimedeparture:w.loctimedeparture,loctimearrival:w.loctimearrival,locpurpose:w.locpurpose,locstatus:"Pending"});const{startDate:H,endDate:K}=Y(),pe=(((T=(await le.get("/employee-locators",{params:{emp_objid:C,from:H,to:K}})).data)==null?void 0:T.data)||[]).map(oe=>({LOCDATE:oe.locatordate,LOCUSERID:oe.emp_objid,LOCREMARKS:oe.locremarks||"Locator filed",objid:oe.objid}));m(pe),_(),h(oe=>[...oe])}catch(H){throw console.error("Error saving locator:",H),alert("Failed to save locator. Please try again."),H}},P=(w,T,H,K)=>w?w.split("; ").map((X,pe,oe)=>{let ce="";return X==="Weekend"||T?ce="#2563eb":H&&(X.includes("Holiday")||k!=null&&k.some(Ae=>X.includes(Ae.HOLIDAYNAME)))&&(ce="#dc2626"),X.trim()==="File a locator"||X.trim().includes("File a locator")?e.jsxs("span",{style:{color:ce},children:[e.jsx("button",{className:"underline text-blue-600 hover:text-blue-800 cursor-pointer",onClick:Ae=>{Ae.preventDefault(),Ae.stopPropagation(),K&&W(K)},children:X}),pe<oe.length-1&&"; "]},pe):e.jsxs("span",{style:{color:ce},children:[X,pe<oe.length-1&&"; "]},pe)}):null;if(j)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Loading logs..."})]})});if(N)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md mx-auto bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-lg",children:[e.jsx("strong",{className:"font-bold",children:"Error:"})," ",N]})});if(!r)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center max-w-md mx-auto",children:e.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-6 py-4 rounded-lg",children:[e.jsx("p",{className:"text-red-500 mb-2 font-semibold",children:"No shift schedule assigned to this employee."}),e.jsx("p",{className:"text-sm text-gray-600",children:"Please assign a shift schedule to view time logs."})]})})});if(u)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Loading locator data..."})]})});if(c.length===0)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center max-w-md mx-auto",children:e.jsx("div",{className:"bg-gray-100 border border-gray-300 text-gray-700 px-6 py-8 rounded-lg",children:e.jsx("p",{className:"text-gray-500 text-lg",children:"No logs found for the selected date range."})})})});const B=(()=>{const w=c.reduce((H,K)=>H+(K.lateMinutes||0),0),T=c.reduce((H,K)=>H+(K.days||0),0);return{totalLateMinutes:w,totalDays:T}})();return e.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 rounded-t-xl",children:e.jsxs("div",{className:"grid grid-cols-7",style:{gridTemplateColumns:"minmax(120px, 1.5fr) minmax(100px, 1fr) minmax(100px, 1fr) minmax(100px, 1fr) minmax(100px, 1fr) minmax(80px, 0.8fr) minmax(150px, 2fr)"},children:[e.jsx("div",{className:"px-6 py-4 text-center",children:e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"Date"})}),e.jsx("div",{className:"px-4 py-4 text-center",children:e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"AM Check-in"})}),e.jsx("div",{className:"px-4 py-4 text-center",children:e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"AM Check-out"})}),e.jsx("div",{className:"px-4 py-4 text-center",children:e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"PM Check-in"})}),e.jsx("div",{className:"px-4 py-4 text-center",children:e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"PM Check-out"})}),e.jsx("div",{className:"px-4 py-4 text-center",children:e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"Late (min)"})}),e.jsx("div",{className:"px-6 py-4 text-center",children:e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"Remarks"})})]})}),e.jsx("div",{children:c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-lg",children:"No data available"}),e.jsx("div",{className:"text-gray-400 text-sm mt-1",children:s?`No logs found for ${s}`:"No logs found for today"})]}):e.jsx("div",{children:c.map((w,T)=>{const H=w.isWeekend?"bg-blue-50":"bg-white";return e.jsxs("div",{className:`grid grid-cols-7 hover:bg-gray-50 transition-colors duration-150 border-b border-gray-100 ${H}`,style:{gridTemplateColumns:"minmax(120px, 1.5fr) minmax(100px, 1fr) minmax(100px, 1fr) minmax(100px, 1fr) minmax(100px, 1fr) minmax(80px, 0.8fr) minmax(150px, 2fr)",minHeight:"60px"},children:[e.jsx("div",{className:"px-6 py-4 flex items-center justify-center",children:e.jsx("div",{className:`text-sm font-semibold text-center ${w.isWeekend?"text-blue-600":w.hasHoliday?"text-red-600":"text-gray-900"}`,children:w.date})}),e.jsx("div",{className:"px-4 py-4 flex items-center justify-center",children:e.jsx("div",{className:"text-sm font-mono text-gray-900 text-center",children:po(w.amCheckIn,w.dateStr,i.id,d,b,k,w.isWeekend,w.remarks)})}),e.jsx("div",{className:"px-4 py-4 flex items-center justify-center",children:e.jsx("div",{className:"text-sm font-mono text-gray-900 text-center",children:po(w.amCheckOut,w.dateStr,i.id,d,b,k,w.isWeekend,w.remarks)})}),e.jsx("div",{className:"px-4 py-4 flex items-center justify-center",children:e.jsx("div",{className:"text-sm font-mono text-gray-900 text-center",children:po(w.pmCheckIn,w.dateStr,i.id,d,b,k,w.isWeekend,w.remarks)})}),e.jsx("div",{className:"px-4 py-4 flex items-center justify-center",children:e.jsx("div",{className:"text-sm font-mono text-gray-900 text-center",children:po(w.pmCheckOut,w.dateStr,i.id,d,b,k,w.isWeekend,w.remarks)})}),e.jsx("div",{className:"px-4 py-4 flex items-center justify-center",children:e.jsx("div",{className:w.lateMinutes>0?"text-sm font-semibold text-red-600":"text-sm font-semibold text-gray-500",children:w.lateMinutes||0})}),e.jsx("div",{className:"px-6 py-4 flex items-center justify-center",children:e.jsx("div",{className:"text-sm text-gray-700 text-center",children:P(w.remarks,w.isWeekend,w.hasHoliday,w.dateStr)})})]},`${w.dateStr}-${T}`)})})}),e.jsx("div",{className:"bg-gradient-to-r from-gray-100 to-gray-200 rounded-b-xl",children:e.jsxs("div",{className:"grid grid-cols-7",style:{gridTemplateColumns:"minmax(120px, 1.5fr) minmax(100px, 1fr) minmax(100px, 1fr) minmax(100px, 1fr) minmax(100px, 1fr) minmax(80px, 0.8fr) minmax(150px, 2fr)"},children:[e.jsx("div",{className:"px-6 py-4 text-center col-span-5",children:e.jsx("div",{className:"text-gray-800 font-bold text-sm uppercase tracking-wide",children:"TOTAL"})}),e.jsx("div",{className:"px-4 py-4 text-center",children:e.jsx("div",{className:"text-gray-800 font-bold text-sm",children:B.totalDays})}),e.jsx("div",{className:"px-6 py-4 text-center",children:e.jsx("div",{className:"text-gray-800 font-bold text-sm",children:B.totalLateMinutes})})]})})]})}),A&&e.jsx(o1,{isOpen:A,onClose:_,onSave:M,selectedDate:I})]})},o1=({isOpen:t,onClose:s,onSave:r,selectedDate:n})=>{const[a,l]=y.useState({locdestination:"",loctimedeparture:"",loctimearrival:"",locpurpose:""}),[o,i]=y.useState({hours:"",minutes:""}),[c,h]=y.useState({hours:"",minutes:""}),[p,m]=y.useState(!1),[u,x]=y.useState("");y.useEffect(()=>{t&&(l({locdestination:"",loctimedeparture:"",loctimearrival:"",locpurpose:""}),i({hours:"",minutes:""}),h({hours:"",minutes:""}),x(""))},[t]);const j=(f,d,g)=>{d==="departure"?i(b=>{const E={...b,[f]:g},R=E.hours&&E.minutes?`${E.hours}:${E.minutes}`:"";return l(S=>({...S,loctimedeparture:R})),E}):d==="arrival"&&h(b=>{const E={...b,[f]:g},R=E.hours&&E.minutes?`${E.hours}:${E.minutes}`:"";return l(S=>({...S,loctimearrival:R})),E})},v=f=>{l(d=>({...d,[f.target.name]:f.target.value})),x("")},N=async f=>{if(f.preventDefault(),x(""),!a.locdestination.trim()){x("Destination is required");return}if(!a.loctimedeparture){x("Time Departure is required");return}if(!a.loctimearrival){x("Time Arrival is required");return}if(!a.locpurpose.trim()){x("Purpose is required");return}m(!0);try{await r(a)}catch{x("Failed to save locator. Please try again.")}finally{m(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Add Locator"}),e.jsx("button",{className:"text-gray-500 hover:text-gray-700",onClick:s,children:""})]}),e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Locator Date"}),e.jsx("input",{type:"date",value:n||"",disabled:!0,className:"w-full border rounded px-3 py-2 bg-gray-100"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Time Departure"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:o.hours,onChange:f=>j("hours","departure",f.target.value),className:"px-3 py-2 border rounded",children:[e.jsx("option",{value:"",children:"HH"}),Array.from({length:24},(f,d)=>d.toString().padStart(2,"0")).map(f=>e.jsx("option",{value:f,children:f},f))]}),e.jsx("span",{children:":"}),e.jsxs("select",{value:o.minutes,onChange:f=>j("minutes","departure",f.target.value),className:"px-3 py-2 border rounded",children:[e.jsx("option",{value:"",children:"MM"}),Array.from({length:60},(f,d)=>d.toString().padStart(2,"0")).map(f=>e.jsx("option",{value:f,children:f},f))]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Time Arrival"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:c.hours,onChange:f=>j("hours","arrival",f.target.value),className:"px-3 py-2 border rounded",children:[e.jsx("option",{value:"",children:"HH"}),Array.from({length:24},(f,d)=>d.toString().padStart(2,"0")).map(f=>e.jsx("option",{value:f,children:f},f))]}),e.jsx("span",{children:":"}),e.jsxs("select",{value:c.minutes,onChange:f=>j("minutes","arrival",f.target.value),className:"px-3 py-2 border rounded",children:[e.jsx("option",{value:"",children:"MM"}),Array.from({length:60},(f,d)=>d.toString().padStart(2,"0")).map(f=>e.jsx("option",{value:f,children:f},f))]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Destination"}),e.jsx("input",{name:"locdestination",type:"text",value:a.locdestination,onChange:v,className:"w-full border rounded px-3 py-2",placeholder:"Enter destination"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Purpose"}),e.jsx("textarea",{name:"locpurpose",value:a.locpurpose,onChange:v,rows:3,className:"w-full border rounded px-3 py-2",placeholder:"Enter purpose"})]}),u&&e.jsx("div",{className:"mb-4 text-red-600 text-sm",children:u}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 rounded border",disabled:p,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-green-600 text-white disabled:opacity-60",disabled:p,children:p?"Saving...":"Save"})]})]})]})}):null},Hl=t=>t&&typeof t=="string"?t.slice(0,10):null,xo=t=>{if(!t)return null;if(typeof t=="string"){const s=t.match(/(\d{2}):(\d{2})/);return s?`${s[1]}:${s[2]}`:null}return null},i1=t=>{if(!t)return"";const s=new Date(t);if(isNaN(s.getTime()))return t;const r=String(s.getDate()).padStart(2,"0"),n=s.toLocaleString("en-US",{month:"short"}).toUpperCase(),a=s.getFullYear(),l=s.toLocaleString("en-US",{weekday:"short"}).toUpperCase();return`${r}-${n}-${a}, ${l}`},c1=(t,s)=>{console.log(" [generateDateRange] Input:",{start:t,end:s});const r=[];let n=new Date(t);const a=new Date(s);for(;n<=a&&(r.push(n.toISOString().slice(0,10)),n.setDate(n.getDate()+1),!(r.length>1e3)););return console.log(" [generateDateRange] Output:",{datesCount:r.length,firstDate:r[0],lastDate:r[r.length-1],sampleDates:r.slice(0,5)}),r},d1=(t,s,r)=>{if(!t||t.length===0)return"";const n=t.filter(a=>(a.LOCDATE?a.LOCDATE.slice(0,10):"")===s&&String(a.LOCUSERID)===String(r));return n.length===0?"":n.map(a=>a.LOCREMARKS).filter(Boolean).join("; ")},u1=(t,s,r)=>{if(!t||t.length===0)return null;const n=t.filter(l=>Hl(l.LEAVEDATE)===s&&String(l.USERID)===String(r));return n.length===0?null:n.map(l=>l.LeaveName||"Leave").join("; ")},m1=(t,s)=>{if(!t||t.length===0)return null;const r=t.filter(a=>Hl(a.TRAVELDATE)===s);return r.length===0?null:r.map(a=>"Travel Order").join("; ")},h1=(t,s)=>{if(!t||t.length===0)return null;const r=t.filter(a=>{const l=Hl(a.HOLIDAYDATE);if(a.ISRECURRING){const o=new Date(l),i=new Date(s);return o.getMonth()===i.getMonth()&&o.getDate()===i.getDate()}return l===s});return r.length===0?null:r.map(a=>a.HOLIDAYNAME).join("; ")},Kh=t=>{if(!t||typeof t!="string")return 0;const[s,r]=t.split(":").map(Number);return s*60+r},Gh=t=>{const r=new Date(t).getDay();return r===0||r===6},f1=(t,s)=>!t||t.length===0?!1:t.some(r=>{const n=Hl(r.HOLIDAYDATE);if(r.ISRECURRING){const a=new Date(n),l=new Date(s);return a.getMonth()===l.getMonth()&&a.getDate()===l.getDate()}return n===s}),p1=({user:t,selectedFilter:s,locatorData:r=[],selectedPeriod:n="full",onLogsProcessed:a})=>{const[l,o]=y.useState([]),[i,c]=y.useState(!1),[h,p]=y.useState(null),[m,u]=y.useState([]),[x,j]=y.useState([]),[v,N]=y.useState([]),f=()=>{const S=(n||"").toString().trim().toLowerCase();return console.log(" [getNormalizedPeriod] Input:",{selectedPeriod:n,raw:S,selectedFilter:s}),S==="first_half"||S==="first-half"||S==="first half"||S==="h1"||S==="1st_half"||S==="1st half"?(console.log(" [getNormalizedPeriod] Matched first_half"),"first_half"):S==="second_half"||S==="second-half"||S==="second half"||S==="h2"||S==="2nd_half"||S==="2nd half"?(console.log(" [getNormalizedPeriod] Matched second_half"),"second_half"):S==="full"||S==="whole"||S==="entire"?(console.log(" [getNormalizedPeriod] Matched full"),"full"):(console.log(" [getNormalizedPeriod] Defaulting to full"),"full")},d=()=>new Date().toISOString().slice(0,10),g=()=>{const S=new Date,k=d(),L=f();let A,D;if(console.log(" [RawLogsView_Dtr] Calculating date range:",{selectedFilter:s,selectedPeriod:n,normalizedPeriod:L,currentDate:S.toISOString().slice(0,10)}),s==="Last 2 Weeks"){const I=new Date(S);I.setDate(S.getDate()-13),A=I.toISOString().slice(0,10),D=k}else if(s==="This Month"){const I=S.getFullYear(),O=S.getMonth()+1,C=`${I}-${String(O).padStart(2,"0")}-01`,F=new Date(I,O,0).getDate(),U=`${I}-${String(O).padStart(2,"0")}-${String(F).padStart(2,"0")}`;L==="first_half"?(A=C,D=`${I}-${String(O).padStart(2,"0")}-15`):L==="second_half"?(A=`${I}-${String(O).padStart(2,"0")}-16`,D=U):(A=C,D=U)}else if(s==="Last Month"){const I=S.getFullYear(),O=S.getMonth();let C=I,F=O-1;O===0&&(C=I-1,F=11);const U=`${C}-${String(F+1).padStart(2,"0")}-01`,Y=new Date(C,F+1,0).getDate(),G=`${C}-${String(F+1).padStart(2,"0")}-${String(Y).padStart(2,"0")}`;L==="first_half"?(A=U,D=`${C}-${String(F+1).padStart(2,"0")}-15`):L==="second_half"?(A=`${C}-${String(F+1).padStart(2,"0")}-16`,D=G):(A=U,D=G)}else A=k,D=k;return console.log(" [RawLogsView_Dtr] Calculated date range:",{startDate:A,endDate:D,period:L,dateRangeLength:A&&D?Math.ceil((new Date(D)-new Date(A))/(1e3*60*60*24))+1:0}),{startDate:A,endDate:D}},b=async()=>{try{const S=await le.get("/leave/records");S.data.success&&u(S.data.data)}catch(S){console.error(" Error loading leave data:",S)}},E=async()=>{try{const S=await le.get("/travel-orders",{params:{userId:t.id,page:1,limit:1e3}});S.data.success&&j(S.data.data)}catch(S){console.error(" Error loading travel data:",S)}},R=async()=>{try{const S=new Date().getFullYear(),k=await le.get(`/holidays/db?year=${S}`);k.data.success&&N(k.data.data)}catch(S){console.error(" Error loading holiday data:",S)}};return y.useEffect(()=>{console.log(" [RawLogsView_Dtr] Props changed:",{selectedFilter:s,selectedPeriod:n,user:t==null?void 0:t.id,locatorDataLength:r==null?void 0:r.length})},[s,n,t,r]),y.useEffect(()=>{t&&(b(),E(),R())},[t]),y.useEffect(()=>{let S=!0;return(async()=>{var L,A,D,I;if(!(!t||!t.id)){c(!0),p(null);try{const{startDate:O,endDate:C}=g();console.log(" [RawLogsView_Dtr] Fetching logs with:",{startDate:O,endDate:C,selectedFilter:s,selectedPeriod:n,userId:t.id});const F=await le.get("/dtr/logs",{params:{userId:t.id,startDate:O,endDate:C}}),U=Array.isArray(F.data)?F.data:[],Y=c1(O,C);console.log(" [RawLogsView_Dtr] Processing data:",{checkInOutLogsLength:U.length,allDatesLength:Y.length,startDate:O,endDate:C,firstDate:Y[0],lastDate:Y[Y.length-1]});const G=Y.map(V=>{const W=U.filter(K=>{const J=K.CHECKTIME||K.checktime||K.CheckTime,X=J?Hl(J):"";return J&&X===V}),_=W.filter(K=>{const J=xo(K.CHECKTIME||K.checktime||K.CheckTime),X=Kh(J);return X>=0&&X<12*60}),M=W.filter(K=>{const J=xo(K.CHECKTIME||K.checktime||K.CheckTime),X=Kh(J);return X>=12*60&&X<=23*60+59}),P=f1(v,V),$=d1(r,V,t.id),B=u1(m,V,t.id),w=m1(x,V),T=h1(v,V);let H="";if(Gh(V))H="Weekend",$&&(H+="; "+$);else{const K=[$,B,w,T].filter(Boolean);K.length>0&&(H=K.join("; "))}return{date:V,amLogs:_,pmLogs:M,remarks:H,isWeekend:Gh(V),hasHoliday:P}});console.log(" [RawLogsView_Dtr] Final processed logs:",{processedLogsCount:G.length,firstProcessedDate:(L=G[0])==null?void 0:L.date,lastProcessedDate:(A=G[G.length-1])==null?void 0:A.date}),S&&(o(G),a&&a(G))}catch(O){S&&p(((I=(D=O.response)==null?void 0:D.data)==null?void 0:I.message)||"Failed to fetch DTR logs. Please try again.")}finally{S&&c(!1)}}})(),()=>{S=!1}},[t,r,s,n,m,x,v]),i?e.jsx("div",{className:"bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading logs..."})]})}):h?e.jsx("div",{className:"bg-gray-50 min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg max-w-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("strong",{className:"font-bold",children:"Error:"})]}),e.jsx("p",{className:"mt-1",children:h})]})}):e.jsx("div",{className:"bg-gray-50 min-h-screen",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 rounded-t-xl overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-4 gap-0 w-full",style:{gridTemplateColumns:"1fr 2fr 2fr 1fr",width:"100%"},children:[e.jsx("div",{className:"px-6 py-4 text-center flex items-center justify-center",children:e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"Date"})}),e.jsxs("div",{className:"px-4 py-4 text-center flex items-center justify-center",children:[e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"AM Logs"}),e.jsx("div",{className:"text-blue-100 text-xs font-normal ml-2",children:"(00:00-11:59)"})]}),e.jsxs("div",{className:"px-4 py-4 text-center flex items-center justify-center",children:[e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"PM Logs"}),e.jsx("div",{className:"text-blue-100 text-xs font-normal ml-2",children:"(12:00-23:59)"})]}),e.jsx("div",{className:"px-6 py-4 text-center flex items-center justify-center",children:e.jsx("div",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"Remarks"})})]})}),e.jsx("div",{children:l.length>0?l.map((S,k)=>e.jsxs("div",{className:`grid grid-cols-4 hover:bg-gray-50 transition-colors duration-150 border-b border-gray-100 ${S.isWeekend?"bg-blue-50":"bg-white"}`,style:{gridTemplateColumns:"1fr 2fr 2fr 1fr"},children:[e.jsx("div",{className:"px-6 py-4 flex items-center justify-center",children:e.jsx("div",{className:`text-sm font-semibold ${S.isWeekend?"text-blue-600":S.hasHoliday?"text-red-600":"text-gray-900"}`,children:i1(S.date)})}),e.jsx("div",{className:"px-4 py-4 flex items-center",children:e.jsx("div",{className:"text-sm font-mono text-gray-700",children:S.amLogs&&S.amLogs.length>0?S.amLogs.map(L=>xo(L.CHECKTIME||L.checktime||L.CheckTime)).filter(Boolean).join(", "):"-"})}),e.jsx("div",{className:"px-4 py-4 flex items-center",children:e.jsx("div",{className:"text-sm font-mono text-gray-700",children:S.pmLogs&&S.pmLogs.length>0?S.pmLogs.map(L=>xo(L.CHECKTIME||L.checktime||L.CheckTime)).filter(Boolean).join(", "):"-"})}),e.jsx("div",{className:"px-6 py-4 flex items-center justify-center",children:e.jsx("div",{className:`text-sm font-medium ${S.isWeekend?"text-blue-600":S.hasHoliday?"text-red-600":"text-gray-700"}`,children:S.remarks||"-"})})]},`${S.date}-${k}`)):e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-indigo-100 to-blue-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsx("div",{className:"text-gray-600 text-lg font-semibold mb-2",children:"No data available"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"Please select a different date range or check your connection."})]})})}),e.jsx("div",{className:"bg-gradient-to-r from-gray-100 to-gray-200 rounded-b-xl overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-4 gap-0 w-full",style:{gridTemplateColumns:"1fr 2fr 2fr 1fr",width:"100%"},children:[e.jsx("div",{className:"px-6 py-4 text-center flex items-center justify-center",children:e.jsx("div",{className:"text-gray-800 font-bold text-sm uppercase tracking-wide",children:"Total"})}),e.jsx("div",{className:"px-4 py-4 text-center flex items-center justify-center",children:e.jsx("div",{className:"text-blue-600 font-bold text-sm",children:l.reduce((S,k)=>S+(k.amLogs?k.amLogs.length:0),0)})}),e.jsx("div",{className:"px-4 py-4 text-center flex items-center justify-center",children:e.jsx("div",{className:"text-blue-600 font-bold text-sm",children:l.reduce((S,k)=>S+(k.pmLogs?k.pmLogs.length:0),0)})}),e.jsx("div",{className:"px-6 py-4 text-center flex items-center justify-center",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Total Logs"})})]})})]})})})},x1=({onBack:t,onSave:s})=>{const{user:r}=Qt(),[n,a]=y.useState(1),[l,o]=y.useState(!1),[i,c]=y.useState({}),[h,p]=y.useState(0),[m,u]=y.useState([]),[x,j]=y.useState(!1),[v,N]=y.useState({dtruserid:"",badgenumber:"",cs_id_no:"",surname:"",firstname:"",middlename:"",name_extension:"",date_of_birth:"",place_of_birth:"",sex:"",civil_status:"",height:"",height_unit:"m",weight:"",weight_unit:"kg",blood_type:"",gsis:"",pagibig:"",philhealth:"",sss:"",tin:"",agency_no:"",citizenship_filipino:!0,citizenship_dual:!1,dual_citizenship_type:"",dual_citizenship_country:"",residential_house_block_lot:"",residential_street:"",residential_subdivision_village:"",residential_barangay:"",residential_city_municipality:"",residential_province:"",residential_zip_code:"",permanent_same_as_residential:!1,permanent_house_block_lot:"",permanent_street:"",permanent_subdivision_village:"",permanent_barangay:"",permanent_city_municipality:"",permanent_province:"",permanent_zip_code:"",telephone:"",mobile:"",email:"",spouse_surname:"",spouse_firstname:"",spouse_middlename:"",spouse_extension:"",spouse_occupation:"",spouse_employer_business_name:"",spouse_business_address:"",spouse_telephone:"",father_surname:"",father_firstname:"",father_middlename:"",father_extension:"",mother_surname:"",mother_firstname:"",mother_middlename:""}),[f,d]=y.useState([{full_name:"",date_of_birth:""}]),[g,b]=y.useState([{level:"Elementary",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Secondary",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Vocational Course",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"College",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Graduate Studies",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""}]),[E,R]=y.useState([{eligibility_type:"",rating:"",date_of_examination:"",place_of_examination:"",license_number:"",date_of_validity:""}]),[S,k]=y.useState([{date_from:"",date_to:"",position_title:"",department_agency_company:"",monthly_salary:"",salary_grade_step:"",status_of_appointment:"",government_service:"",is_present:!1}]),[L,A]=y.useState(null),D=["Elementary","Secondary","Vocational Course","College","Graduate Studies"],I=z=>{if(!z)return"";try{const ie=typeof z=="string"?new Date(z):z;if(Number.isNaN(ie.getTime()))return"";const xe=ie.getFullYear(),Le=String(ie.getMonth()+1).padStart(2,"0"),tt=String(ie.getDate()).padStart(2,"0");return`${xe}-${Le}-${tt}`}catch{return""}},O=z=>{if(!z)return"";if(/^\d{4}$/.test(String(z)))return String(z);try{const ie=new Date(z);return Number.isNaN(ie.getTime())?"":String(ie.getFullYear())}catch{return""}},C=(z=[])=>{const ie=new Map((z||[]).filter(Boolean).map(xe=>[xe.level,xe]));return D.map(xe=>{const Le=ie.get(xe)||{};return{level:xe,school_name:Le.school_name||"",degree_course:Le.degree_course||Le.course||"",period_from:I(Le.period_from||Le.from||""),period_to:I(Le.period_to||Le.to||""),highest_level_units:Le.highest_level_units||Le.highest_level||"",year_graduated:O(Le.year_graduated||""),scholarship_honors:Le.scholarship_honors||Le.honor_received||""}})},[F,U]=y.useState([{organization_name_address:"",date_from:"",date_to:"",number_of_hours:"",position_nature_of_work:""}]),[Y,G]=y.useState([{training_title:"",date_from:"",date_to:"",number_of_hours:"",type_of_ld:"",conducted_sponsored_by:""}]);y.useEffect(()=>{console.log(" [PDS] Voluntary work state changed:",F)},[F]),y.useEffect(()=>{console.log(" [PDS] Trainings state changed:",Y)},[Y]);const[V,W]=y.useState([{skill_hobby:""}]),[_,M]=y.useState([{recognition:""}]),[P,$]=y.useState([{organization:""}]);y.useEffect(()=>{console.log(" [PDS] Skills state changed:",V)},[V]),y.useEffect(()=>{console.log(" [PDS] Memberships state changed:",P)},[P]);const[B,w]=y.useState({thirtyfour_a:!1,thirtyfour_b:!1,thirtyfour_b_details:"",thirtyfive_a:!1,thirtyfive_a_details:"",thirtyfive_b:!1,thirtyfive_datefiled:"",thirtyfive_statuses:"",thirtysix:!1,thirtysix_details:"",thirtyseven:!1,thirtyseven_details:"",thirtyeight_a:!1,thirtyeight_a_details:"",thirtyeight_b:!1,thirtyeight_b_details:"",thirtynine:!1,thirtynine_details:"",forty_a:!1,forty_a_details:"",forty_b:!1,forty_b_details:"",forty_c:!1,forty_c_details:""}),[T,H]=y.useState([{reference_name:"",reference_address:"",reference_tel_no:""}]),[K,J]=y.useState([{government_issued_id:"",id_number:"",date_issued:"",place_of_issuance:"",status:"active"}]),[X,pe]=y.useState(!1),[oe,ce]=y.useState(!1),[Ae,Be]=y.useState(!1),[Ie,ye]=y.useState(""),[se,we]=y.useState({value:"",unit:"",convertedValue:""}),[ve,Q]=y.useState(""),[ne,he]=y.useState(""),[Me,be]=y.useState(""),[De,ze]=y.useState(""),[Ee,Z]=y.useState([]),[ee,_e]=y.useState([]),[Qe,je]=y.useState([]),[Ke,rt]=y.useState(!1);y.useEffect(()=>{console.log(" [PDS] Eligibility types state updated:",Qe.length,"items"),console.log(" [PDS] Eligibility types array:",Qe),Qe.length>0?(console.log(" [PDS] First few eligibility types:",Qe.slice(0,3)),console.log(" [PDS] Sample eligibility type structure:",Qe[0])):console.log(" [PDS] No eligibility types loaded")},[Qe]);const gt=()=>{console.log(" [PDS] Resetting form state for new session"),N({dtruserid:"",badgenumber:"",surname:"",firstname:"",middlename:"",extension:"",date_of_birth:"",place_of_birth:"",sex:"",civil_status:"",height:"",weight:"",blood_type:"",gsis:"",pagibig:"",philhealth:"",sss:"",tin:"",agency_no:"",residential_house_block_lot:"",residential_street:"",residential_subdivision_village:"",residential_barangay:"",residential_city_municipality:"",residential_province:"",residential_zip_code:"",permanent_same_as_residential:!1,permanent_house_block_lot:"",permanent_street:"",permanent_subdivision_village:"",permanent_barangay:"",permanent_city_municipality:"",permanent_province:"",permanent_zip_code:"",telephone:"",mobile:"",email:"",spouse_surname:"",spouse_firstname:"",spouse_middlename:"",spouse_extension:"",spouse_occupation:"",employer_business_name:"",business_address:"",spouse_telephone_no:"",father_surname:"",father_firstname:"",father_middlename:"",father_extension:"",mother_surname:"",mother_firstname:"",mother_middlename:"",citizenship_filipino:!0,citizenship_dual:!1,dual_citizenship_type:"",dual_citizenship_country:""}),d([{full_name:"",date_of_birth:""}]),b([{level:"Elementary",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Secondary",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Vocational/Trade Course",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"College",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Graduate Studies",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""}]),H([{reference_name:"",reference_address:"",reference_tel_no:""}]),R([]),k([]),U([]),G([]),W([]),J([{government_issued_id:"",id_number:"",date_issued:"",place_of_issuance:"",status:"active"}]),w({thirtyfour_a:!1,thirtyfour_b:!1,thirtyfour_b_details:"",thirtyfive_a:!1,thirtyfive_a_details:"",thirtyfive_b:!1,thirtyfive_datefiled:"",thirtyfive_statuses:"",thirtysix:!1,thirtysix_details:"",thirtyseven:!1,thirtyseven_details:"",thirtyeight_a:!1,thirtyeight_a_details:"",thirtyeight_b:!1,thirtyeight_b_details:"",thirtynine:!1,thirtynine_details:"",forty_a:!1,forty_a_details:"",forty_b:!1,forty_b_details:"",forty_c:!1,forty_c_details:""}),a(1),pe(!1),we({value:"",unit:"",convertedValue:""}),Be(!1),ye(""),p(0),u([]),j(!1),Q(""),be(""),he(""),c({}),o(!1),console.log(" [PDS] Form state reset completed")};y.useEffect(()=>{ae()},[]),y.useEffect(()=>()=>{console.log(" [PDS] Component unmounting, cleaning up state"),gt()},[]);const mt=()=>{console.log(" [PDS] Retrying lookup data fetch..."),ae()};y.useEffect(()=>{r&&(console.log(" [PDS] User loaded, resetting form state first"),gt(),setTimeout(()=>{console.log(" [PDS] Loading PDS data for user:",r.USERID),it(),Ql()},100))},[r]),y.useEffect(()=>{Object.keys(v).length>0&&r&&Ql()},[v,T,K,g,E,S,f,X,r]);const it=async()=>{var z,ie,xe,Le,tt,Fe,et,ot,nt,ft,St,Ot,Zt,pt;try{o(!0);const Oe=(await le.get("/pds-dtrchecker/me")).data.data;A(!0),console.log(" [PDS] Received children data from API:",Oe.children),console.log(" [PDS] Received employee data from API:",{date_of_birth:Oe.employee.date_of_birth,place_of_birth:Oe.employee.place_of_birth,sex:Oe.employee.sex,birthdate:Oe.employee.birthdate,birthplace:Oe.employee.birthplace,gender:Oe.employee.gender}),console.log(" [PDS] Full pdsData structure keys:",Object.keys(Oe)),console.log(" [PDS] Eligibility data:",Oe.eligibility),console.log(" [PDS] Work experience data:",Oe.workExperience);const ts=Object.fromEntries(Object.entries(Oe.employee).map(([vt,wt])=>{if(wt==null)return[vt,""];if(vt==="date_of_birth"&&wt){const Pt=new Date(wt);if(isNaN(Pt.getTime()))return[vt,""];{const Ft=Pt.toISOString().split("T")[0];return console.log(` [PDS] Converting date: ${wt} -> ${Ft}`),[vt,Ft]}}return typeof wt=="string"?[vt,wt]:[vt,wt?String(wt):""]}));N(vt=>({...vt,...ts,dtruserid:r.USERID||r.id,badgenumber:r.BADGENUMBER||r.badgenumber})),console.log(" [PDS] FormData after setting:",{date_of_birth:ts.date_of_birth,place_of_birth:ts.place_of_birth,sex:ts.sex});const ks=Number(Oe.employee.pdscompleprogress)||0;if(p(ks),console.log(" [PDS] Loaded completeness progress:",ks),Oe.children&&Oe.children.length>0){const vt=Oe.children.map(wt=>({full_name:wt.full_name||"",date_of_birth:wt.date_of_birth||""}));d(vt),console.log(" [PDS] Loaded children:",vt)}else d([{full_name:"",date_of_birth:""}]),console.log(" [PDS] No children data found, using default empty row");if(Oe.education&&Oe.education.length>0?b(C(Oe.education)):b(C([])),Oe.eligibility&&Oe.eligibility.length>0){console.log(" Received eligibility data:",Oe.eligibility),console.log(" Sample eligibility record:",Oe.eligibility[0]),console.log(" Sample eligibility date fields:",{date_of_examination:(z=Oe.eligibility[0])==null?void 0:z.date_of_examination,date_of_validity:(ie=Oe.eligibility[0])==null?void 0:ie.date_of_validity,place_of_examination:(xe=Oe.eligibility[0])==null?void 0:xe.place_of_examination});const vt=Oe.eligibility.map(wt=>{const Pt=Ft=>{if(!Ft)return"";if(typeof Ft=="string"&&/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(Ft))return Ft;if(typeof Ft=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(Ft)){const[Wt,br,vr]=Ft.split("-");return`${br}/${vr}/${Wt}`}const _t=new Date(Ft);if(!isNaN(_t.getTime())){const Wt=String(_t.getMonth()+1).padStart(2,"0"),br=String(_t.getDate()).padStart(2,"0"),vr=_t.getFullYear();return`${Wt}/${br}/${vr}`}return""};return{...wt,date_of_examination:Pt(wt.date_of_examination),date_of_validity:Pt(wt.date_of_validity)}});console.log(" Formatted eligibility data:",vt),R(vt)}else console.log(" No eligibility data found or empty array");if(Oe.workExperience&&Oe.workExperience.length>0){console.log(" Received work experience data:",Oe.workExperience),console.log(" Sample work experience record:",Oe.workExperience[0]),console.log(" Sample work experience fields:",{date_from:(Le=Oe.workExperience[0])==null?void 0:Le.date_from,date_to:(tt=Oe.workExperience[0])==null?void 0:tt.date_to,position_title:(Fe=Oe.workExperience[0])==null?void 0:Fe.position_title,department_agency_company:(et=Oe.workExperience[0])==null?void 0:et.department_agency_company,monthly_salary:(ot=Oe.workExperience[0])==null?void 0:ot.monthly_salary,salary_grade_step:(nt=Oe.workExperience[0])==null?void 0:nt.salary_grade_step,status_of_appointment:(ft=Oe.workExperience[0])==null?void 0:ft.status_of_appointment,government_service:(St=Oe.workExperience[0])==null?void 0:St.government_service,is_present:(Ot=Oe.workExperience[0])==null?void 0:Ot.is_present});const vt=Oe.workExperience.map(wt=>{const Pt=wt.is_present===!0||wt.is_present===1||wt.is_present==="true"||wt.ispresent===!0||wt.ispresent===1||wt.ispresent==="true",Ft=_t=>{if(!_t)return"";if(typeof _t=="string"&&/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(_t))return _t;if(typeof _t=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(_t)){const[br,vr,La]=_t.split("-");return`${vr}/${La}/${br}`}const Wt=new Date(_t);if(!isNaN(Wt.getTime())){const br=String(Wt.getMonth()+1).padStart(2,"0"),vr=String(Wt.getDate()).padStart(2,"0"),La=Wt.getFullYear();return`${br}/${vr}/${La}`}return""};return{...wt,is_present:Pt,date_from:Ft(wt.date_from),date_to:Pt&&(!wt.date_to||wt.date_to==="0"||wt.date_to==="0000-00-00"||wt.date_to==="")?Ft(new Date().toISOString().split("T")[0]):Ft(wt.date_to)}});k(vt)}if(console.log(" [PDS] Checking voluntary work data:",Oe.voluntaryWork),Oe.voluntaryWork&&Oe.voluntaryWork.length>0?(console.log(" Received voluntary work data:",Oe.voluntaryWork),console.log(" Sample voluntary work record structure:",Oe.voluntaryWork[0]),console.log(" Voluntary work record keys:",Object.keys(Oe.voluntaryWork[0]||{})),U(Oe.voluntaryWork)):(console.log(" No voluntary work data found, keeping default empty row"),U(vt=>vt.length>0?vt:[{organization_name_address:"",date_from:"",date_to:"",number_of_hours:"",position_nature_of_work:""}])),console.log(" [PDS] Checking trainings data:",Oe.trainings),Oe.trainings&&Oe.trainings.length>0?(console.log(" Received trainings data:",Oe.trainings),console.log(" Sample training record structure:",Oe.trainings[0]),console.log(" Training record keys:",Object.keys(Oe.trainings[0]||{})),console.log(" [PDS] Training conducted_sponsored_by value:",(Zt=Oe.trainings[0])==null?void 0:Zt.conducted_sponsored_by),console.log(" [PDS] All training field values:"),Object.keys(Oe.trainings[0]||{}).forEach(vt=>{console.log(`  ${vt}: "${Oe.trainings[0][vt]}"`)}),G(Oe.trainings)):(console.log(" No trainings data found, keeping default empty row"),G(vt=>vt.length>0?vt:[{training_title:"",date_from:"",date_to:"",number_of_hours:"",type_of_ld:"",conducted_sponsored_by:""}])),console.log(" [PDS] Checking skills data:",Oe.skills),Oe.skills&&Oe.skills.length>0?(console.log(" Received skills data:",Oe.skills),W(Oe.skills)):(console.log(" No skills data found, keeping default empty row"),W(vt=>vt.length>0?vt:[{skill_hobby:""}])),Oe.recognitions&&Oe.recognitions.length>0&&(console.log(" Received recognitions data:",Oe.recognitions),M(Oe.recognitions)),console.log(" [PDS] Checking memberships data:",Oe.memberships),Oe.memberships&&Oe.memberships.length>0?(console.log(" Received memberships data:",Oe.memberships),$(Oe.memberships)):(console.log(" No memberships data found, keeping default empty row"),$(vt=>vt.length>0?vt:[{organization:""}])),Oe.references&&Oe.references.length>0&&(console.log(" Received references data:",Oe.references),H(Oe.references)),Oe.governmentIds&&Oe.governmentIds.length>0&&(console.log(" Received government IDs data:",Oe.governmentIds),console.log(" First government ID date_issued:",Oe.governmentIds[0].date_issued),J(Oe.governmentIds)),Oe.declarations&&Object.keys(Oe.declarations).length>0){console.log(" Received declarations data:",Oe.declarations);const vt=_t=>{if(!_t||_t===""||_t==="0000-00-00")return"";try{const Wt=new Date(_t);return isNaN(Wt.getTime())?"":Wt.toISOString().split("T")[0]}catch(Wt){return console.log("Date formatting error:",Wt,"for date:",_t),""}},wt=_t=>{if(!_t||_t===""||_t==="0000-00-00")return"";try{const Wt=new Date(_t);if(isNaN(Wt.getTime()))return"";const br=(Wt.getMonth()+1).toString().padStart(2,"0"),vr=Wt.getDate().toString().padStart(2,"0"),La=Wt.getFullYear();return`${br}/${vr}/${La}`}catch(Wt){return console.log("Date display formatting error:",Wt,"for date:",_t),""}};console.log(" [PDS] Raw declarations data from backend:",Oe.declarations);const Pt=_t=>_t===!0||_t===1||_t==="1"||_t==="true",Ft={thirtyfour_a:Pt(Oe.declarations.thirtyfour_a),thirtyfour_b:Pt(Oe.declarations.thirtyfour_b),thirtyfour_b_details:Oe.declarations.thirtyfour_b_details||"",thirtyfive_a:Pt(Oe.declarations.thirtyfive_a),thirtyfive_a_details:Oe.declarations.thirtyfive_a_details||"",thirtyfive_b:Pt(Oe.declarations.thirtyfive_b),thirtyfive_datefiled:wt(Oe.declarations.thirtyfive_datefiled),thirtyfive_statuses:Oe.declarations.thirtyfive_statuses||"",thirtysix:Pt(Oe.declarations.thirtysix),thirtysix_details:Oe.declarations.thirtysix_details||"",thirtyseven:Pt(Oe.declarations.thirtyseven),thirtyseven_details:Oe.declarations.thirtyseven_details||"",thirtyeight_a:Pt(Oe.declarations.thirtyeight_a),thirtyeight_a_details:Oe.declarations.thirtyeight_a_details||"",thirtyeight_b:Pt(Oe.declarations.thirtyeight_b),thirtyeight_b_details:Oe.declarations.thirtyeight_b_details||"",thirtynine:Pt(Oe.declarations.thirtynine),thirtynine_details:Oe.declarations.thirtynine_details||"",forty_a:Pt(Oe.declarations.forty_a),forty_a_details:Oe.declarations.forty_a_details||"",forty_b:Pt(Oe.declarations.forty_b),forty_b_details:Oe.declarations.forty_b_details||"",forty_c:Pt(Oe.declarations.forty_c),forty_c_details:Oe.declarations.forty_c_details||""};console.log(" Mapped declarations data:",Ft),console.log(" thirtyfive_datefiled value:",Ft.thirtyfive_datefiled),console.log(" thirtyfive_statuses value:",Ft.thirtyfive_statuses),console.log(" [PDS] Sample values - thirtyfour_a:",Ft.thirtyfour_a,"thirtyfive_a:",Ft.thirtyfive_a),console.log(" [PDS] Raw backend values - thirtyfour_a:",Oe.declarations.thirtyfour_a,"thirtyfive_a:",Oe.declarations.thirtyfive_a),w(Ft)}Oe.media&&Object.keys(Oe.media).length>0&&(console.log(" Received media data:",Oe.media),Oe.media.signature&&(console.log(" Loading saved signature:",Oe.media.signature),Q(Oe.media.signature)),Oe.media.photo&&(console.log(" Loading saved photo:",Oe.media.photo),be(Oe.media.photo)),Oe.media.thumb&&(console.log(" Loading saved thumbmark:",Oe.media.thumb),ze(Oe.media.thumb)),Oe.media.date_accomplished&&(console.log(" Loading date accomplished:",Oe.media.date_accomplished),he(Oe.media.date_accomplished))),console.log(" Loaded existing PDS data for user:",r.USERID||r.id)}catch(dt){if(((pt=dt==null?void 0:dt.response)==null?void 0:pt.status)===404){A(!1),o(!1);return}console.error("Error fetching PDS data:",dt)}finally{o(!1)}},ae=async()=>{var z,ie;try{console.log(" [PDS] Fetching lookup data..."),rt(!0),console.log(" [PDS] API base URL:",le.defaults.baseURL),console.log(" [PDS] API headers:",le.defaults.headers),console.log(" [PDS] Starting API call...");const xe=await le.get("/pds-dtrchecker/lookup");if(console.log(" [PDS] Lookup response:",xe.data),xe.data.success&&xe.data.data){const{bloodTypes:Le,civilStatuses:tt,eligibilityTypes:Fe}=xe.data.data;console.log(" [PDS] Data structure:",{bloodTypes:(Le==null?void 0:Le.length)||0,civilStatuses:(tt==null?void 0:tt.length)||0,eligibilityTypes:(Fe==null?void 0:Fe.length)||0}),Z(Le||[]),_e(tt||[]),je(Fe||[]),console.log(" [PDS] Lookup data loaded successfully"),console.log(" [PDS] Eligibility types set:",(Fe==null?void 0:Fe.length)||0,"items")}else console.warn(" [PDS] Lookup data response was not successful"),Z([]),_e([]),je([])}catch(xe){console.error(" [PDS] Error fetching lookup data:",xe),console.error(" [PDS] Error details:",((z=xe.response)==null?void 0:z.data)||xe.message),console.error(" [PDS] Error status:",(ie=xe.response)==null?void 0:ie.status),console.error(" [PDS] Error config:",xe.config),console.log(" [PDS] Lookup data fetch failed - will retry or show empty dropdowns"),console.error(" [PDS] Failed to load lookup data from HR201 database tables:"),console.error("  - blood_types table"),console.error("  - civilstatus table"),console.error("  - eligibilitytypes table"),console.error("Please ensure these tables exist and have data in the HR201 database.")}finally{rt(!1)}},Ce=z=>z==null?"":typeof z=="string"?z:z?String(z):"",Se=z=>{const{name:ie,value:xe,type:Le,checked:tt}=z.target,Fe=xe||"";N(ie==="citizenship_dual"?et=>({...et,[ie]:tt,dual_citizenship_type:tt?et.dual_citizenship_type:"",dual_citizenship_country:tt?et.dual_citizenship_country:"",citizenship:"Filipino"}):et=>({...et,[ie]:Le==="checkbox"?tt:Fe})),ie==="permanent_same_as_residential"&&tt&&N(et=>({...et,permanent_house_block_lot:et.residential_house_block_lot,permanent_street:et.residential_street,permanent_subdivision_village:et.residential_subdivision_village,permanent_barangay:et.residential_barangay,permanent_city_municipality:et.residential_city_municipality,permanent_province:et.residential_province,permanent_zip_code:et.residential_zip_code})),ie==="civil_status"&&xe==="Single"&&N(et=>({...et,spouse_surname:"",spouse_firstname:"",spouse_middlename:"",spouse_extension:"",spouse_occupation:"",spouse_employer_business_name:"",spouse_business_address:"",spouse_telephone:""})),i[ie]&&c(et=>({...et,[ie]:""}))},qe=()=>{d(z=>[...z,{full_name:"",date_of_birth:""}])},Ze=z=>{f.length>1&&d(ie=>ie.filter((xe,Le)=>Le!==z))},ke=(z,ie,xe)=>{console.log(` [PDS] updateChild: index=${z}, field=${ie}, value=${xe}`),d(Le=>Le.map((tt,Fe)=>{if(Fe===z){const et={...tt,[ie]:xe};return console.log(` [PDS] Updated child ${z}:`,et),et}return tt}))},te=(z,ie,xe)=>{b(Le=>C(Le).map((et,ot)=>ot===z?{...et,[ie]:xe}:et)),console.log(` [PDS] Updated education ${z} (${ie}):`,xe)},Ne=(z,ie=!1)=>{const xe=ie?"w-full px-2 py-1 border border-gray-300 rounded text-xs":"text-xs",Le=z?z.length:0;return Le>30?`${xe} text-xs leading-tight`:Le>20?`${xe} text-xs`:`${xe} text-sm`},de=(z,ie)=>{if(!z)return"text-sm";const xe=z.length,Le=ie;return Le<8?xe>8||xe>5?"text-xs":"text-sm":Le<12?xe>12||xe>8?"text-xs":"text-sm":Le<20?xe>20||xe>15?"text-xs":"text-sm":xe>30||xe>20?"text-xs":"text-sm"},q=()=>{R(z=>[...z,{eligibility_type:"",rating:"",date_of_examination:"",place_of_examination:"",license_number:"",date_of_validity:""}])},me=z=>{E.length>1?R(ie=>ie.filter((xe,Le)=>Le!==z)):R(ie=>ie.map((xe,Le)=>Le===z?{eligibility_type:"",rating:"",date_of_examination:"",place_of_examination:"",license_number:"",date_of_validity:""}:ie[Le]))},Te=(z,ie,xe)=>{R(Le=>Le.map((tt,Fe)=>Fe===z?{...tt,[ie]:xe}:tt))},Ue=()=>{k(z=>[...z,{date_from:"",date_to:"",position_title:"",department_agency_company:"",monthly_salary:"",salary_grade_step:"",status_of_appointment:"",government_service:"",is_present:!1}])},Re=z=>{S.length>1?k(ie=>ie.filter((xe,Le)=>Le!==z)):k(ie=>ie.map((xe,Le)=>Le===z?{date_from:"",date_to:"",position_title:"",department_agency_company:"",monthly_salary:"",salary_grade_step:"",status_of_appointment:"",government_service:"",is_present:!1}:ie[Le]))},$e=(z,ie,xe)=>{k(Le=>{let tt=Le.map((Fe,et)=>{if(et===z){const ot={...Fe,[ie]:xe};if(ie==="is_present"&&xe===!0){const ft=new Date().toISOString().split("T")[0];ot.date_to=ft}return ie==="is_present"&&xe===!1&&(ot.date_to=""),ot}return Fe});return ie==="is_present"&&xe===!0&&(tt=tt.map((Fe,et)=>et===z?{...Fe,is_present:!0,date_to:tt[et].date_to}:{...Fe,is_present:!1})),tt.sort((Fe,et)=>Fe.is_present===!0&&et.is_present!==!0?-1:Fe.is_present!==!0&&et.is_present===!0?1:Fe.date_to&&et.date_to?new Date(et.date_to)-new Date(Fe.date_to):0),tt})},Ve=()=>{U(z=>[...z,{organization_name_address:"",date_from:"",date_to:"",number_of_hours:"",position_nature_of_work:""}])},at=z=>{F.length>1?U(ie=>ie.filter((xe,Le)=>Le!==z)):U(ie=>ie.map((xe,Le)=>Le===z?{organization_name_address:"",date_from:"",date_to:"",number_of_hours:"",position_nature_of_work:""}:ie[Le]))},Je=(z,ie,xe)=>{U(Le=>Le.map((tt,Fe)=>Fe===z?{...tt,[ie]:xe}:tt))},ge=()=>{G(z=>[...z,{training_title:"",date_from:"",date_to:"",number_of_hours:"",type_of_ld:"",conducted_sponsored_by:""}])},He=z=>{Y.length>1?G(ie=>ie.filter((xe,Le)=>Le!==z)):G(ie=>ie.map((xe,Le)=>Le===z?{training_title:"",date_from:"",date_to:"",number_of_hours:"",type_of_ld:"",conducted_sponsored_by:""}:ie[Le]))},Ye=(z,ie,xe)=>{G(Le=>Le.map((tt,Fe)=>Fe===z?{...tt,[ie]:xe}:tt))},ct=()=>{W(z=>[...z,{skill_hobby:""}])},yt=z=>{V.length>1?W(ie=>ie.filter((xe,Le)=>Le!==z)):W(ie=>ie.map((xe,Le)=>Le===z?{skill_hobby:""}:ie[Le]))},lt=(z,ie)=>{W(xe=>xe.map((Le,tt)=>tt===z?{skill_hobby:ie}:Le))},jt=()=>{M(z=>[...z,{recognition:""}])},kt=z=>{_.length>1?M(ie=>ie.filter((xe,Le)=>Le!==z)):M(ie=>ie.map((xe,Le)=>Le===z?{recognition:""}:ie[Le]))},Rt=(z,ie)=>{M(xe=>xe.map((Le,tt)=>tt===z?{recognition:ie}:Le))},yr=()=>{$(z=>[...z,{organization:""}])},ec=z=>{P.length>1?$(ie=>ie.filter((xe,Le)=>Le!==z)):$(ie=>ie.map((xe,Le)=>Le===z?{organization:""}:ie[Le]))},Ca=(z,ie)=>{$(xe=>xe.map((Le,tt)=>tt===z?{organization:ie}:Le))},Cs=z=>{const{name:ie,value:xe,type:Le,checked:tt}=z.target;let Fe=xe;if(ie==="thirtyfive_datefiled"&&xe){const et=xe.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(et){const[,ot,nt,ft]=et,St=`${ft}-${ot.padStart(2,"0")}-${nt.padStart(2,"0")}`;Fe=St,console.log(" Date conversion:",xe,"",St)}else console.log(" Invalid date format:",xe)}w(et=>{const ot={...et,[ie]:Le==="checkbox"?tt:Fe};if(Le==="radio"&&Fe===!1){const ft={thirtyfour_b:"thirtyfour_b_details",thirtyfive_a:"thirtyfive_a_details",thirtysix:"thirtysix_details",thirtyseven:"thirtyseven_details",thirtyeight_a:"thirtyeight_a_details",thirtyeight_b:"thirtyeight_b_details",thirtynine:"thirtynine_details",forty_a:"forty_a_details",forty_b:"forty_b_details",forty_c:"forty_c_details"}[ie];ft&&(ot[ft]="",console.log(` Cleared details for ${ie}: ${ft}`))}return ot})},tc=()=>{T.length<3&&H(z=>[...z,{reference_name:"",reference_address:"",reference_tel_no:""}])},sc=z=>{T.length>1&&H(ie=>ie.filter((xe,Le)=>Le!==z))},Rr=(z,ie,xe)=>{H(Le=>Le.map((tt,Fe)=>Fe===z?{...tt,[ie]:xe}:tt))},Vl=()=>{if(console.log(" [Government ID] addGovernmentId called"),console.log(" [Government ID] Current governmentIds:",K),K.length===0||!K[0].government_issued_id)console.log(" [Government ID] Adding new government ID"),J([{government_issued_id:"",id_number:"",date_issued:"",place_of_issuance:"",status:"active"}]),ce(!0);else{console.log(" [Government ID] Starting replace mode"),console.log(" [Government ID] Original data to preserve:",K[0]),pe(!0),ce(!1);const z={government_issued_id:"",id_number:"",date_issued:"",place_of_issuance:"",status:"active",originalData:K[0]};console.log(" [Government ID] New government ID with originalData:",z),J([z]),console.log(" [Government ID] Replace mode activated")}},ka=()=>{var xe,Le,tt,Fe;console.log(" [Government ID] acceptGovernmentIdChange called");const z=K[0];if(console.log(" [Government ID] Current ID data:",z),!((xe=z.government_issued_id)!=null&&xe.trim())||!((Le=z.id_number)!=null&&Le.trim())||!((tt=z.date_issued)!=null&&tt.trim())||!((Fe=z.place_of_issuance)!=null&&Fe.trim())){console.log(" [Government ID] Validation failed - missing fields"),alert("Please fill in all fields (43.1, 43.2, 43.3, and 43.4) before accepting the change.");return}console.log(" [Government ID] All fields validated");const ie=z.originalData;if(console.log(" [Government ID] Original data:",ie),ie){const et=z.government_issued_id!==ie.government_issued_id||z.id_number!==ie.id_number||z.date_issued!==ie.date_issued||z.place_of_issuance!==ie.place_of_issuance;if(console.log(" [Government ID] Has changes:",et),!et){console.log(" [Government ID] No changes detected"),alert("No changes detected. Please modify at least one field before accepting the change.");return}}console.log(" [Government ID] Accepting change"),J([{government_issued_id:z.government_issued_id,id_number:z.id_number,date_issued:z.date_issued,place_of_issuance:z.place_of_issuance,status:"active"}]),pe(!1),ce(!0),console.log(" [Government ID] Change accepted, replace mode exited, pending change marked")},An=()=>{var ie;const z=(ie=K[0])==null?void 0:ie.originalData;z&&J([z]),pe(!1),ce(!1),console.log(" [Government ID] Change cancelled, original data restored")},Tn=(z,ie,xe)=>{J(Le=>Le.map((tt,Fe)=>Fe===z?{...tt,[ie]:xe}:tt)),(ie==="government_issued_id"||ie==="id_number"||ie==="date_issued"||ie==="place_of_issuance")&&ce(!0)},Yl=z=>{ye(z),we({value:"",unit:z==="height"?"ft":"lbs",convertedValue:""}),Be(!0)},Ln=()=>{Be(!1),ye(""),we({value:"",unit:"",convertedValue:""})},In=(z,ie)=>{we(xe=>({...xe,[z]:ie,convertedValue:""}))},Da=(z,ie)=>{const xe=parseFloat(z)||0;switch(ie){case"ft":return(xe*.3048).toFixed(2);case"cm":return(xe/100).toFixed(2);case"in":return(xe*.0254).toFixed(2);default:return z}},rc=(z,ie)=>{const xe=parseFloat(z)||0;switch(ie){case"lbs":return(xe*.453592).toFixed(1);case"g":return(xe/1e3).toFixed(1);default:return z}},ql=()=>{if(!se.value||!se.unit)return;let z="";Ie==="height"?z=Da(se.value,se.unit):Ie==="weight"&&(z=rc(se.value,se.unit)),we(ie=>({...ie,convertedValue:z}))},nc=()=>{se.convertedValue&&(Ie==="height"?N(z=>({...z,height:se.convertedValue})):Ie==="weight"&&N(z=>({...z,weight:se.convertedValue})),Ln())},Aa=(z,ie,xe,Le=.9)=>new Promise((tt,Fe)=>{const et=document.createElement("canvas"),ot=et.getContext("2d"),nt=new Image;nt.onload=()=>{let{width:St,height:Ot}=nt;const Zt=xe==="jpeg"?600:400;if(xe==="jpeg"){const vt=St/Ot;Math.abs(vt-.78)>.1&&(vt>.78?St=Ot*.78:Ot=St/.78)}St>Zt&&(Ot=Ot*Zt/St,St=Zt),Ot>Zt*1.3&&(St=St*Zt*1.3/Ot,Ot=Zt*1.3),et.width=St,et.height=Ot,xe==="jpeg"&&(ot.fillStyle="white",ot.fillRect(0,0,St,Ot)),ot.drawImage(nt,0,0,St,Ot);let pt=Le,dt,Oe=0;const ts=20;do{dt=et.toDataURL(`image/${xe}`,pt);const vt=(dt.split(",")[1]?dt.split(",")[1].length:0)*.75/1024;if(vt<=ie){console.log(` Image resized successfully: ${vt.toFixed(2)}KB (target: ${ie}KB), quality: ${pt}`);break}pt-=.05,Oe++}while(pt>.1&&Oe<ts);Oe>=ts&&console.warn(` Could not compress image below ${ie}KB, using lowest quality available`),tt(dt)};const ft=URL.createObjectURL(z);nt.onerror=()=>{URL.revokeObjectURL(ft),Fe(new Error("Failed to load image"))},nt.addEventListener("load",()=>{URL.revokeObjectURL(ft)},{once:!0}),nt.addEventListener("error",()=>{URL.revokeObjectURL(ft)},{once:!0}),nt.src=ft}),Ta=async z=>{const ie=z.target.files[0];if(ie)try{const xe=await Aa(ie,150,"jpeg",.8);be(xe)}catch(xe){console.error("Error resizing photo:",xe);const Le=new FileReader;Le.onloadend=()=>{be(Le.result)},Le.readAsDataURL(ie)}},Kl=async z=>{const ie=z.target.files[0];if(ie)try{const xe=await Aa(ie,150,"png",.9);ze(xe)}catch(xe){console.error("Error resizing thumbmark:",xe);const Le=new FileReader;Le.onloadend=()=>{ze(Le.result)},Le.readAsDataURL(ie)}},ac=async z=>{const ie=z.target.files[0];if(ie)try{const xe=await Aa(ie,150,"png",.9);Q(xe)}catch(xe){console.error("Error resizing signature:",xe);const Le=new FileReader;Le.onloadend=()=>{Q(Le.result)},Le.readAsDataURL(ie)}},Mn=()=>{const z={};return!v.surname&&!v.firstname&&(z.surname="At least surname or first name is required"),c(z),Object.keys(z).length===0},Gl=()=>{const z=[];return[{key:"surname",label:"Surname"},{key:"firstname",label:"First Name"},{key:"middlename",label:"Middle Name"},{key:"date_of_birth",label:"Date of Birth"},{key:"place_of_birth",label:"Place of Birth"},{key:"sex",label:"Sex"},{key:"civil_status",label:"Civil Status"},{key:"height",label:"Height"},{key:"weight",label:"Weight"},{key:"blood_type",label:"Blood Type"},{key:"gsis",label:"GSIS ID No."},{key:"pagibig",label:"PAG-IBIG ID No."},{key:"philhealth",label:"PhilHealth No."},{key:"sss",label:"SSS No."},{key:"tin",label:"TIN"},{key:"agency_no",label:"Agency Employee No."}].forEach(Fe=>{(!v[Fe.key]||v[Fe.key]==="")&&z.push({section:"Personal Information",field:Fe.label,key:Fe.key})}),[{key:"residential_province",label:"Residential Province"},{key:"residential_city_municipality",label:"Residential City/Municipality"},{key:"residential_barangay",label:"Residential Barangay"},{key:"residential_zip_code",label:"Residential ZIP Code"},{key:"residential_subdivision_village",label:"Residential Subdivision/Village"},{key:"residential_street",label:"Residential Street"},{key:"permanent_province",label:"Permanent Province"},{key:"permanent_city_municipality",label:"Permanent City/Municipality"},{key:"permanent_barangay",label:"Permanent Barangay"},{key:"permanent_zip_code",label:"Permanent ZIP Code"},{key:"permanent_subdivision_village",label:"Permanent Subdivision/Village"},{key:"permanent_street",label:"Permanent Street"}].forEach(Fe=>{(!v[Fe.key]||v[Fe.key]==="")&&z.push({section:"Address",field:Fe.label,key:Fe.key})}),[{key:"telephone",label:"Telephone"},{key:"mobile",label:"Mobile"},{key:"email",label:"Email"}].forEach(Fe=>{(!v[Fe.key]||v[Fe.key]==="")&&z.push({section:"Contact Information",field:Fe.label,key:Fe.key})}),v.civil_status&&v.civil_status!=="Single"&&[{key:"spouse_surname",label:"Spouse Surname"},{key:"spouse_firstname",label:"Spouse First Name"},{key:"spouse_middlename",label:"Spouse Middle Name"},{key:"spouse_occupation",label:"Spouse Occupation"}].forEach(et=>{(!v[et.key]||v[et.key]==="")&&z.push({section:"Spouse Information",field:et.label,key:et.key})}),[{key:"father_surname",label:"Father Surname"},{key:"father_firstname",label:"Father First Name"},{key:"father_middlename",label:"Father Middle Name"},{key:"mother_surname",label:"Mother Surname"},{key:"mother_firstname",label:"Mother First Name"},{key:"mother_middlename",label:"Mother Middle Name"}].forEach(Fe=>{(!v[Fe.key]||v[Fe.key]==="")&&z.push({section:"Family Background",field:Fe.label,key:Fe.key})}),(!f||f.length===0||!f.some(Fe=>Fe.full_name&&Fe.full_name.trim()!==""||Fe.date_of_birth&&Fe.date_of_birth.trim()!==""))&&z.push({section:"Family Background",field:"Children Information",key:"children"}),!g||g.length===0?z.push({section:"Education",field:"Education Information",key:"education"}):g.some(et=>et.school_name&&typeof et.school_name=="string"&&et.school_name.trim()!==""&&et.degree_course&&typeof et.degree_course=="string"&&et.degree_course.trim()!==""&&et.period_from&&typeof et.period_from=="string"&&et.period_from.trim()!==""&&et.period_to&&typeof et.period_to=="string"&&et.period_to.trim()!==""&&et.highest_level_units&&typeof et.highest_level_units=="string"&&et.highest_level_units.trim()!==""&&et.year_graduated&&et.year_graduated.toString().trim()!=="")||z.push({section:"Education",field:"Education Information (Complete row required)",key:"education"}),(!E||E.length===0||!E.some(Fe=>Fe.eligibility_type&&Fe.eligibility_type.trim()!==""||Fe.rating&&Fe.rating.trim()!==""))&&z.push({section:"Eligibility",field:"Civil Service Eligibility",key:"eligibility"}),(!S||S.length===0||!S.some(Fe=>Fe.position_title&&Fe.position_title.trim()!==""||Fe.department_name&&Fe.department_name.trim()!==""))&&z.push({section:"Work Experience",field:"Work Experience",key:"workExperience"}),(!T||T.length<3||T.filter(Fe=>Fe.reference_name&&Fe.reference_name.trim()!=="").length<3)&&z.push({section:"References",field:"Character References (3 required)",key:"references"}),(!K||K.length===0||!K.some(Fe=>Fe.government_issued_id&&Fe.government_issued_id.trim()!==""))&&z.push({section:"Government IDs",field:"Government Issued ID",key:"governmentIds"}),u(z),z},Ql=async()=>{try{if(!r||L===!1)return;console.log(" [PDS] Fetching missing fields for user:",r.USERID);const z=await le.get("/pds-dtrchecker/missing-fields");if(z.data.success){const{missingFields:ie,totalMissing:xe}=z.data;console.log(" [PDS] Received missing fields from API:",{totalMissing:xe,missingFields:ie});const Le=[];ie&&typeof ie=="object"&&Object.keys(ie).forEach(tt=>{ie[tt]&&typeof ie[tt]=="object"&&Object.keys(ie[tt]).forEach(Fe=>{Array.isArray(ie[tt][Fe])&&ie[tt][Fe].forEach(et=>{Le.push({...et,page:parseInt(tt),section:Fe})})})}),u(Le)}else console.warn(" [PDS] API returned unsuccessful response for missing fields"),Gl()}catch(z){console.error(" [PDS] Error fetching missing fields from API:",z),Gl()}},lc=z=>{try{if(console.log(" [PDS] Attempting to focus on field:",z),z.focusSelector==="education-section"&&n!==1){console.log(" [PDS] Education section is on page 1, switching to page 1"),a(1),setTimeout(()=>{Rn(z)},500);return}let ie=null;const xe=[`#${z.focusSelector}`,`[name="${z.focusSelector}"]`,`input[name*="${z.focusSelector}"]`,`select[name*="${z.focusSelector}"]`,`textarea[name*="${z.focusSelector}"]`,`[id*="${z.focusSelector}"]`];for(const Le of xe)if(ie=document.querySelector(Le),ie)break;ie?Rn(z):z.page&&z.page!==n?(console.log(` [PDS] Switching to page ${z.page} for field: ${z.field}`),a(z.page),setTimeout(()=>{Rn(z)},500)):Rn(z)}catch(ie){console.error(" [PDS] Error focusing on field:",ie)}},Rn=z=>{try{const ie=[`#${z.focusSelector}`,`[name="${z.focusSelector}"]`,`input[name*="${z.focusSelector}"]`,`select[name*="${z.focusSelector}"]`,`textarea[name*="${z.focusSelector}"]`,`[id*="${z.focusSelector}"]`];let xe=null;for(const Le of ie)if(xe=document.querySelector(Le),xe)break;xe?(xe.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),xe.style.backgroundColor="#fef3c7",setTimeout(()=>{xe.style.backgroundColor=""},2e3),setTimeout(()=>{if(xe.focus&&xe.focus(),!xe.focus&&xe.querySelector){const Le=xe.querySelector("input, select, textarea");Le&&Le.focus&&Le.focus()}},500),console.log(" [PDS] Successfully focused on field:",z.field)):console.warn(" [PDS] Could not find element for field:",z.field,"selectors tried:",ie)}catch(ie){console.error(" [PDS] Error in focusElement:",ie)}},oc=()=>{const z=n;console.log(" [PDS Print] Current active page:",z);const xe={1:1,2:2,3:3,4:4}[z]||1;console.log(" [PDS Print] Target print page:",xe);const Le=`/201-employees/print/${r.USERID||r.id}?page=${xe}`;window.open(Le,"_blank")},On=z=>{if(!z||z.trim()==="")return null;if(typeof z=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(z))return z;if(typeof z=="string"&&/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(z)){const[ie,xe,Le]=z.split("/"),tt=ie.padStart(2,"0"),Fe=xe.padStart(2,"0");return`${Le}-${tt}-${Fe}`}return null},ic=async()=>{try{o(!0);const z={employee:{dtruserid:r==null?void 0:r.USERID},children:[],education:[],civil_service_eligibility:[],work_experience:[],voluntary_work:[],trainings:[],skills:[],recognitions:[],memberships:[],declarations:{},references:[],government_ids:[],is_replacing_gov_id:!1,signature_data:null,date_accomplished:null,photo_data:null,thumbmark_data:null,is_draft:!0};await le.post("/201-employees/pds",z),A(!0),await it()}catch(z){console.error(" [PDS] Failed to initialize PDS record:",z),alert("Failed to create initial PDS record. Please try again.")}finally{o(!1)}},re=async(z=!1)=>{if(!(n===1&&!Mn())){o(!0);try{console.log(" [PDS] Education data being saved:",g),console.log(" [PDS] FormData being sent:",{dtruserid:v.dtruserid,date_of_birth:v.date_of_birth,place_of_birth:v.place_of_birth,sex:v.sex,blood_type:v.blood_type});const ie=Fe=>{if(!Fe||Fe==="")return null;if(/^\d{4}-\d{2}-\d{2}$/.test(Fe))return Fe;const et=Fe.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(et){const[,ot,nt,ft]=et;return`${ft}-${ot.padStart(2,"0")}-${nt.padStart(2,"0")}`}return console.log(" Invalid date format for database:",Fe),null},xe={thirtyfour_a:B.thirtyfour_a,thirtyfour_b:B.thirtyfour_b,thirtyfour_b_details:B.thirtyfour_b_details,thirtyfive_a:B.thirtyfive_a,thirtyfive_a_details:B.thirtyfive_a_details,thirtyfive_b:B.thirtyfive_b,thirtyfive_datefiled:ie(B.thirtyfive_datefiled),thirtyfive_statuses:B.thirtyfive_statuses,thirtysix:B.thirtysix,thirtysix_details:B.thirtysix_details,thirtyseven:B.thirtyseven,thirtyseven_details:B.thirtyseven_details,thirtyeight_a:B.thirtyeight_a,thirtyeight_a_details:B.thirtyeight_a_details,thirtyeight_b:B.thirtyeight_b,thirtyeight_b_details:B.thirtyeight_b_details,thirtynine:B.thirtynine,thirtynine_details:B.thirtynine_details,forty_a:B.forty_a,forty_a_details:B.forty_a_details,forty_b:B.forty_b,forty_b_details:B.forty_b_details,forty_c:B.forty_c,forty_c_details:B.forty_c_details},Le={employee:{...v,dtruserid:(r==null?void 0:r.USERID)||(v==null?void 0:v.dtruserid)},children:f.filter(Fe=>Fe.full_name||Fe.date_of_birth),education:g,civil_service_eligibility:E.filter(Fe=>Fe.eligibility_type).map(Fe=>({...Fe,date_of_examination:On(Fe.date_of_examination),date_of_validity:On(Fe.date_of_validity)})),work_experience:S.filter(Fe=>Fe.position_title||Fe.department_agency_company).map(Fe=>({...Fe,date_from:On(Fe.date_from),date_to:On(Fe.date_to)})),voluntary_work:F.filter(Fe=>Fe.organization_name_address||Fe.position_nature_of_work),trainings:Y.filter(Fe=>Fe.training_title||Fe.conducted_sponsored_by),skills:V.filter(Fe=>Fe.skill_hobby),recognitions:_.filter(Fe=>Fe.recognition),memberships:P.filter(Fe=>Fe.organization),declarations:xe,references:T.filter(Fe=>Fe.reference_name),government_ids:K.filter(Fe=>Fe.government_issued_id||Fe.id_number),is_replacing_gov_id:oe,signature_data:ve,date_accomplished:ne,photo_data:Me,thumbmark_data:De,is_draft:z};console.log(" [PDS] Declarations data being sent:",xe),console.log(" [PDS] Date field value being sent:",xe.criminally_charged_date);const tt=await le.post("/201-employees/pds",Le);if(alert(z?"PDS draft saved successfully! You can continue editing later.":"PDS saved successfully!"),oe&&(ce(!1),console.log(" [PDS] Government ID replacement completed, reset pending change flag")),s&&s(),tt.data.progress!==void 0){const Fe=Number(tt.data.progress)||0;p(Fe),console.log(" [PDS] Updated completeness progress:",Fe)}s&&s(),!z&&onClose&&onClose()}catch(ie){console.error("Error saving PDS:",ie),alert("Failed to save PDS")}finally{o(!1)}}},fe=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-blue-100 text-blue-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"I"}),"PERSONAL INFORMATION"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1. CS ID No"}),e.jsx("input",{type:"text",name:"cs_id_no",value:Ce(v.cs_id_no),onChange:Se,placeholder:"(Do not fill up. For CSC use only)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100",disabled:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["2. SURNAME ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"surname",value:Ce(v.surname),onChange:Se,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${i.surname?"border-red-500":"border-gray-300"}`,required:!0}),i.surname&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.surname})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["2.1. FIRST NAME ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"firstname",value:Ce(v.firstname),onChange:Se,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${i.firstname?"border-red-500":"border-gray-300"}`,required:!0}),i.firstname&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.firstname})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"2.2. MIDDLE NAME"}),e.jsx("input",{type:"text",name:"middlename",value:Ce(v.middlename),onChange:Se,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"2.3. NAME EXTENSION (JR., SR)"}),e.jsx("input",{type:"text",name:"name_extension",value:v.name_extension,onChange:Se,placeholder:"Jr., Sr., III",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"3. DATE OF BIRTH"}),e.jsx("input",{type:"date",name:"date_of_birth",value:Ce(v.date_of_birth),onChange:Se,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"4. PLACE OF BIRTH"}),e.jsx("input",{type:"text",name:"place_of_birth",value:v.place_of_birth,onChange:Se,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["5. SEX ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"sex",value:"Male",checked:v.sex==="Male",onChange:Se,className:"mr-2"}),"Male"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"sex",value:"Female",checked:v.sex==="Female",onChange:Se,className:"mr-2"}),"Female"]})]}),i.sex&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.sex})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["6. CIVIL STATUS ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"civil_status",value:v.civil_status,onChange:Se,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${i.civil_status?"border-red-500":"border-gray-300"}`,required:!0,children:[e.jsx("option",{value:"",children:"Select Status"}),Ke?e.jsx("option",{disabled:!0,children:"Loading civil statuses..."}):ee.length>0?ee.map(z=>e.jsx("option",{value:z.civil_status,children:z.civil_status},z.id)):e.jsx("option",{disabled:!0,children:"No civil status data available"})]}),i.civil_status&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.civil_status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"7. HEIGHT (meters)"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"number",step:"0.01",name:"height",value:v.height,onChange:Se,placeholder:"1.75",min:"0.01",max:"3.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:()=>Yl("height"),className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Height Converter",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter height in meters (m)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"8. WEIGHT (kilograms)"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"number",step:"0.1",name:"weight",value:v.weight,onChange:Se,placeholder:"70",min:"1",max:"500",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:()=>Yl("weight"),className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Weight Converter",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter weight in kilograms (kg)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"9. BLOOD TYPE"}),e.jsxs("select",{name:"blood_type",value:v.blood_type,onChange:Se,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Blood Type"}),Ke?e.jsx("option",{disabled:!0,children:"Loading blood types..."}):Ee.length>0?Ee.map(z=>e.jsx("option",{value:z.blood_type,children:z.blood_type},z.id)):e.jsx("option",{disabled:!0,children:"No blood type data available"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"10. GSIS ID NO."}),e.jsx("input",{type:"text",name:"gsis",value:v.gsis,onChange:Se,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"11. PAG-IBIG ID NO."}),e.jsx("input",{type:"text",name:"pagibig",value:v.pagibig,onChange:Se,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"12. PHILHEALTH NO."}),e.jsx("input",{type:"text",name:"philhealth",value:v.philhealth,onChange:Se,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"13. SSS NO."}),e.jsx("input",{type:"text",name:"sss",value:v.sss,onChange:Se,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"14. TIN NO."}),e.jsx("input",{type:"text",name:"tin",value:v.tin,onChange:Se,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"15. AGENCY EMPLOYEE NO."}),e.jsx("input",{type:"text",name:"agency_no",value:v.agency_no,onChange:Se,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"16. CITIZENSHIP"}),e.jsxs("div",{className:"flex space-x-6 mb-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"citizenship_filipino",checked:!0,disabled:!0,className:"mr-2 bg-gray-300"}),e.jsx("span",{className:"text-gray-600",children:"Filipino (Default)"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"citizenship_dual",checked:v.citizenship_dual,onChange:Se,className:"mr-2"}),"Dual Citizenship"]})]}),v.citizenship_dual&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("select",{name:"dual_citizenship_type",value:v.dual_citizenship_type,onChange:Se,className:"px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"by_birth",children:"By Birth"}),e.jsx("option",{value:"by_naturalization",children:"By Naturalization"})]}),e.jsx("input",{name:"dual_citizenship_country",value:v.dual_citizenship_country,onChange:Se,placeholder:"Country",className:"px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"17. RESIDENTIAL ADDRESS"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.1 House/Block/Lot No."}),e.jsx("input",{name:"residential_house_block_lot",value:v.residential_house_block_lot,onChange:Se,placeholder:"Enter house/block/lot number",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.2 Street"}),e.jsx("input",{name:"residential_street",value:v.residential_street,onChange:Se,placeholder:"Enter street name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.3 Subdivision/Village"}),e.jsx("input",{name:"residential_subdivision_village",value:v.residential_subdivision_village,onChange:Se,placeholder:"Enter subdivision or village name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.4 Barangay"}),e.jsx("input",{name:"residential_barangay",value:v.residential_barangay,onChange:Se,placeholder:"Enter barangay name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.5 City/Municipality"}),e.jsx("input",{name:"residential_city_municipality",value:v.residential_city_municipality,onChange:Se,placeholder:"Enter city or municipality",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.6 Province"}),e.jsx("input",{name:"residential_province",value:v.residential_province,onChange:Se,placeholder:"Enter province",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.7 ZIP CODE"}),e.jsx("input",{name:"residential_zip_code",value:v.residential_zip_code,onChange:Se,placeholder:"Enter ZIP code",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"18. PERMANENT ADDRESS"}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"permanent_same_as_residential",checked:v.permanent_same_as_residential,onChange:Se,className:"mr-2"}),"Same as Residential Address"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.1 House/Block/Lot No."}),e.jsx("input",{name:"permanent_house_block_lot",value:v.permanent_house_block_lot,onChange:Se,placeholder:"Enter house/block/lot number",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.2 Street"}),e.jsx("input",{name:"permanent_street",value:v.permanent_street,onChange:Se,placeholder:"Enter street name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.3 Subdivision/Village"}),e.jsx("input",{name:"permanent_subdivision_village",value:v.permanent_subdivision_village,onChange:Se,placeholder:"Enter subdivision or village name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.4 Barangay"}),e.jsx("input",{name:"permanent_barangay",value:v.permanent_barangay,onChange:Se,placeholder:"Enter barangay name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.5 City/Municipality"}),e.jsx("input",{name:"permanent_city_municipality",value:v.permanent_city_municipality,onChange:Se,placeholder:"Enter city or municipality",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.6 Province"}),e.jsx("input",{name:"permanent_province",value:v.permanent_province,onChange:Se,placeholder:"Enter province",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.7 ZIP CODE"}),e.jsx("input",{name:"permanent_zip_code",value:v.permanent_zip_code,onChange:Se,placeholder:"Enter ZIP code",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"19. TELEPHONE NO."}),e.jsx("input",{type:"text",name:"telephone",value:v.telephone,onChange:Se,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"20. MOBILE NO."}),e.jsx("input",{type:"text",name:"mobile",value:v.mobile,onChange:Se,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"21. E-MAIL ADDRESS"}),e.jsx("input",{type:"email",name:"email",value:v.email,onChange:Se,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-green-100 text-green-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"II"}),"FAMILY BACKGROUND"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"22. SPOUSE'S INFORMATION"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.1 Surname"}),e.jsx("input",{name:"spouse_surname",value:v.spouse_surname,onChange:Se,placeholder:"Enter surname",disabled:v.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${v.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.2 First Name"}),e.jsx("input",{name:"spouse_firstname",value:v.spouse_firstname,onChange:Se,placeholder:"Enter first name",disabled:v.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${v.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.3 Middle Name"}),e.jsx("input",{name:"spouse_middlename",value:v.spouse_middlename,onChange:Se,placeholder:"Enter middle name",disabled:v.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${v.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.4 Extension"}),e.jsx("input",{name:"spouse_extension",value:v.spouse_extension,onChange:Se,placeholder:"Enter extension (Jr., Sr., III, etc.)",disabled:v.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${v.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.5 Occupation"}),e.jsx("input",{name:"spouse_occupation",value:v.spouse_occupation,onChange:Se,placeholder:"Enter occupation",disabled:v.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${v.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.6 Employer/Business Name"}),e.jsx("input",{name:"spouse_employer_business_name",value:v.spouse_employer_business_name,onChange:Se,placeholder:"Enter employer or business name",disabled:v.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${v.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.7 Business Address"}),e.jsx("input",{name:"spouse_business_address",value:v.spouse_business_address,onChange:Se,placeholder:"Enter business address",disabled:v.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${v.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.8 Telephone"}),e.jsx("input",{name:"spouse_telephone",value:v.spouse_telephone,onChange:Se,placeholder:"Enter telephone number",disabled:v.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${v.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]})]})]})}),e.jsxs("div",{id:"children-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"23. CHILDREN"}),f.map((z,ie)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[3fr_1fr_auto] gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsx("input",{name:`children[${ie}].full_name`,value:z.full_name,onChange:xe=>ke(ie,"full_name",xe.target.value),placeholder:"Enter child's full name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),e.jsx("input",{name:`children[${ie}].date_of_birth`,type:"date",value:z.date_of_birth,onChange:xe=>ke(ie,"date_of_birth",xe.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsx("div",{className:"flex items-end justify-center",children:e.jsx("button",{type:"button",onClick:()=>Ze(ie),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors w-12",title:"Remove child",children:e.jsx("svg",{className:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},ie)),e.jsx("button",{type:"button",onClick:qe,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Child"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"24. FATHER'S INFORMATION"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"24.1 Surname"}),e.jsx("input",{name:"father_surname",value:v.father_surname,onChange:Se,placeholder:"Enter father's surname",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"24.2 First Name"}),e.jsx("input",{name:"father_firstname",value:v.father_firstname,onChange:Se,placeholder:"Enter father's first name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"24.4 Extension"}),e.jsx("input",{name:"father_extension",value:v.father_extension,onChange:Se,placeholder:"Enter extension (Jr., Sr., III, etc.)",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"24.3 Middle Name"}),e.jsx("input",{name:"father_middlename",value:v.father_middlename,onChange:Se,placeholder:"Enter father's middle name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"25. MOTHER'S MAIDEN NAME"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"25.1 Surname"}),e.jsx("input",{name:"mother_surname",value:v.mother_surname,onChange:Se,placeholder:"Enter mother's maiden surname",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"25.2 First Name"}),e.jsx("input",{name:"mother_firstname",value:v.mother_firstname,onChange:Se,placeholder:"Enter mother's first name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"25.3 Middle Name"}),e.jsx("input",{name:"mother_middlename",value:v.mother_middlename,onChange:Se,placeholder:"Enter mother's middle name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]})]})]})]}),e.jsxs("section",{id:"education-section",className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-purple-100 text-purple-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"III"}),"EDUCATIONAL BACKGROUND"]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"26. EDUCATION LEVELS"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 table-fixed",children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"11%"}})," ",e.jsx("col",{style:{width:"16%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"12%"}})," ",e.jsx("col",{style:{width:"12%"}})," ",e.jsx("col",{style:{width:"20%"}})," "]}),e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`border border-gray-300 px-4 py-2 text-left ${de("LEVEL",10)}`,children:"LEVEL"}),e.jsx("th",{className:`border border-gray-300 px-4 py-2 text-left ${de("NAME OF SCHOOL",20)}`,children:"NAME OF SCHOOL"}),e.jsx("th",{className:`border border-gray-300 px-4 py-2 text-left ${de("DEGREE/COURSE",20)}`,children:"DEGREE/COURSE"}),e.jsx("th",{className:`border border-gray-300 px-4 py-2 text-left ${de("PERIOD",10)}`,children:"PERIOD"}),e.jsx("th",{className:`border border-gray-300 px-4 py-2 text-left ${de("HIGHEST LEVEL/UNITS",7)}`,children:"HIGHEST LEVEL /UNITS"}),e.jsx("th",{className:`border border-gray-300 px-4 py-2 text-left ${de("YEAR",8)}`,children:"YEAR"}),e.jsx("th",{className:`border border-gray-300 px-4 py-2 text-left ${de("SCHOLARSHIP/HONORS",20)}`,children:"SCHOLARSHIP/HONORS"})]})}),e.jsx("tbody",{children:C(g).map((z,ie)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:z.level}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("textarea",{name:`education[${ie}].school_name`,value:z.school_name,onChange:xe=>te(ie,"school_name",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("textarea",{name:`education[${ie}].degree_course`,value:z.degree_course,onChange:xe=>te(ie,"degree_course",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("input",{name:`education[${ie}].period_from`,type:"date",value:z.period_from,onChange:xe=>te(ie,"period_from",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",placeholder:"From",style:{fontSize:"12px"}}),e.jsx("input",{name:`education[${ie}].period_to`,type:"date",value:z.period_to,onChange:xe=>te(ie,"period_to",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",placeholder:"To",style:{fontSize:"12px"}})]})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`education[${ie}].highest_level_units`,value:z.highest_level_units,onChange:xe=>te(ie,"highest_level_units",xe.target.value),className:Ne(z.highest_level_units,!0),style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`education[${ie}].year_graduated`,type:"number",value:z.year_graduated,onChange:xe=>te(ie,"year_graduated",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",min:"1900",max:"2100",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("textarea",{name:`education[${ie}].scholarship_honors`,value:z.scholarship_honors,onChange:xe=>te(ie,"scholarship_honors",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2",style:{fontSize:"12px"}})})]},ie))})]})})]})]})]}),ue=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-orange-100 text-orange-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"IV"}),"CIVIL SERVICE ELIGIBILITY"]}),e.jsxs("div",{id:"eligibility-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"27. ELIGIBILITY RECORDS"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 table-fixed",children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"10%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"20%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"5%"}})," "]}),e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"ELIGIBILITY TYPE"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"RATING"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"DATE OF EXAMINATION"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"PLACE OF EXAMINATION"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"LICENSE NUMBER"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"DATE OF VALIDITY"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left"})]})}),e.jsx("tbody",{children:E.map((z,ie)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsxs("select",{name:`civil_service_eligibility[${ie}].eligibility_type`,value:z.eligibility_type,onChange:xe=>Te(ie,"eligibility_type",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Eligibility Type"}),Ke?e.jsx("option",{value:"",disabled:!0,children:"Loading eligibility types..."}):Qe.length>0?Qe.map(xe=>e.jsx("option",{value:xe.eligibility_type,children:xe.eligibility_type},xe.id)):e.jsx("option",{value:"",disabled:!0,children:"No eligibility types available"})]})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${ie}].rating`,value:z.rating,onChange:xe=>Te(ie,"rating",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${ie}].date_of_examination`,type:"date",value:z.date_of_examination?I(z.date_of_examination):"",onChange:xe=>Te(ie,"date_of_examination",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${ie}].place_of_examination`,value:z.place_of_examination,onChange:xe=>Te(ie,"place_of_examination",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${ie}].license_number`,value:z.license_number,onChange:xe=>Te(ie,"license_number",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${ie}].date_of_validity`,type:"date",value:z.date_of_validity?I(z.date_of_validity):"",onChange:xe=>Te(ie,"date_of_validity",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("button",{type:"button",onClick:()=>me(ie),className:"p-2 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors",title:"Remove eligibility",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},ie))})]})}),e.jsx("button",{type:"button",onClick:q,className:"mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Eligibility"})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-red-100 text-red-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"V"}),"WORK EXPERIENCE"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"(Include private employment. Start from your recent work) Description of duties should be indicated in the attached Work Experience sheet."}),e.jsxs("div",{id:"work-experience-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"28. WORK HISTORY"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 table-fixed",children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"19%"}})," ",e.jsx("col",{style:{width:"19%"}})," ",e.jsx("col",{style:{width:"11%"}})," ",e.jsx("col",{style:{width:"9%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"10%"}})," ",e.jsx("col",{style:{width:"4%"}})," "]}),e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm whitespace-normal break-words",children:"FROM"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm whitespace-normal break-words",children:"TO"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm whitespace-normal break-words",children:"POSITION TITLE"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm whitespace-normal break-words",children:"DEPARTMENT /AGENCY /COMPANY"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm whitespace-normal break-words",children:"MONTHLY SALARY"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm whitespace-normal break-words",children:"SALARY /GRADE /STEP"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm whitespace-normal break-words",children:"STATUS OF APPOINTMENT"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm whitespace-normal break-words",children:"GOV'T SERVICE"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left text-sm whitespace-normal break-words"})]})}),e.jsx("tbody",{children:S.map((z,ie)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsx("input",{name:`work_experience[${ie}].date_from`,type:"date",value:z.date_from?I(z.date_from):"",onChange:xe=>$e(ie,"date_from",xe.target.value),className:"w-full px-1 py-1 border border-gray-300 rounded text-xs"})}),e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[(z.is_present===!0||!S.some((xe,Le)=>Le!==ie&&xe.is_present===!0))&&e.jsxs("label",{className:"flex items-center text-xs whitespace-nowrap",children:[e.jsx("input",{type:"checkbox",checked:z.is_present===!0,onChange:xe=>$e(ie,"is_present",xe.target.checked),className:"mr-1"}),"Present"]}),e.jsx("input",{name:`work_experience[${ie}].date_to`,type:"date",value:z.is_present===!0?z.date_to?I(z.date_to):new Date().toISOString().split("T")[0]:z.date_to&&z.date_to!=="0"&&z.date_to!=="0000-00-00"?I(z.date_to):"",onChange:xe=>$e(ie,"date_to",xe.target.value),disabled:z.is_present===!0,className:"w-full px-1 py-1 border border-gray-300 rounded text-xs disabled:bg-gray-100 disabled:text-gray-500"})]})}),e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsx("textarea",{name:`work_experience[${ie}].position_title`,value:z.position_title,onChange:xe=>$e(ie,"position_title",xe.target.value),className:"w-full px-1 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2"})}),e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsx("textarea",{name:`work_experience[${ie}].department_agency_company`,value:z.department_agency_company,onChange:xe=>$e(ie,"department_agency_company",xe.target.value),className:"w-full px-1 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2"})}),e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsx("input",{name:`work_experience[${ie}].monthly_salary`,type:"number",step:"0.01",value:z.monthly_salary,onChange:xe=>$e(ie,"monthly_salary",xe.target.value),className:"w-full px-1 py-1 border border-gray-300 rounded text-xs"})}),e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsx("input",{name:`work_experience[${ie}].salary_grade_step`,value:z.salary_grade_step,onChange:xe=>$e(ie,"salary_grade_step",xe.target.value),placeholder:"00-0",className:"w-full px-1 py-1 border border-gray-300 rounded text-xs"})}),e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsxs("select",{name:`work_experience[${ie}].status_of_appointment`,value:z.status_of_appointment,onChange:xe=>$e(ie,"status_of_appointment",xe.target.value),className:"w-full px-1 py-1 border border-gray-300 rounded text-xs",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"Permanent",children:"Permanent"}),e.jsx("option",{value:"Casual",children:"Casual"}),e.jsx("option",{value:"Contract",children:"Contract"}),e.jsx("option",{value:"Job Order",children:"Job Order"}),e.jsx("option",{value:"Provisionary",children:"Provisionary"}),e.jsx("option",{value:"Temporary",children:"Temporary"})]})}),e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"radio",name:`work_experience[${ie}].government_service`,value:"Y",checked:z.government_service==="Y",onChange:xe=>$e(ie,"government_service",xe.target.value),className:"mr-1"}),"Y"]}),e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"radio",name:`work_experience[${ie}].government_service`,value:"N",checked:z.government_service==="N",onChange:xe=>$e(ie,"government_service",xe.target.value),className:"mr-1"}),"N"]})]})}),e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsx("button",{type:"button",onClick:()=>Re(ie),className:"p-1 bg-red-500 text-white rounded text-xs hover:bg-red-600 transition-colors",title:"Remove work experience",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},ie))})]})}),e.jsx("button",{type:"button",onClick:Ue,className:"mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Work Experience"})]})]})]}),Ge=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-teal-100 text-teal-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"VI"}),"VOLUNTARY WORK OR INVOLVEMENT IN CIVIC/NON-GOVERNMENT/PEOPLE/VOLUNTARY ORGANIZATION/S"]}),e.jsxs("div",{id:"voluntary-work-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"29. VOLUNTARY WORK RECORDS"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 table-fixed",children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"26%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"10%"}})," ",e.jsx("col",{style:{width:"25%"}})," ",e.jsx("col",{style:{width:"6%"}})," "]}),e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"NAME/ADDRESS OF ORG."}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"FROM"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"TO"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"NUMBER OF HOURS"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"POSITION/NATURE OF WORK"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left"})]})}),e.jsx("tbody",{children:F.map((z,ie)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("textarea",{value:z.organization_name_address,onChange:xe=>Je(ie,"organization_name_address",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"date",value:z.date_from?I(z.date_from):"",onChange:xe=>Je(ie,"date_from",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"date",value:z.date_to?I(z.date_to):"",onChange:xe=>Je(ie,"date_to",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"number",step:"0.5",value:z.number_of_hours,onChange:xe=>Je(ie,"number_of_hours",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("textarea",{value:z.position_nature_of_work,onChange:xe=>Je(ie,"position_nature_of_work",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("button",{type:"button",onClick:()=>at(ie),className:"p-2 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors",title:"Remove voluntary work",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},ie))})]})}),e.jsx("button",{type:"button",onClick:Ve,className:"mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Voluntary Work"})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-indigo-100 text-indigo-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"VII"}),"LEARNING AND DEVELOPMENT (L&D) INTERVENTIONS/TRAINING PROGRAMS ATTENDED"]}),e.jsxs("div",{id:"training-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"30. TRAINING RECORDS"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"(Start from the most recent L&D/training program and include only the relevant L&D/training taken for the last five (5) years for Division Chief/Executive/Managerial positions)"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 table-fixed",children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"20%"}})," ",e.jsx("col",{style:{width:"16%"}})," ",e.jsx("col",{style:{width:"16%"}})," ",e.jsx("col",{style:{width:"10%"}})," ",e.jsx("col",{style:{width:"15%"}})," ",e.jsx("col",{style:{width:"18%"}})," ",e.jsx("col",{style:{width:"6%"}})," "]}),e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"TITLE OF TRAINING"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"FROM"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"TO"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"NUMBER OF HOURS"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"TYPE OF L&D"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"CONDUCTED /SPONSORED BY"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left"})]})}),e.jsx("tbody",{children:Y.map((z,ie)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("textarea",{value:z.training_title,onChange:xe=>Ye(ie,"training_title",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"date",value:z.date_from?I(z.date_from):"",onChange:xe=>Ye(ie,"date_from",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"date",value:z.date_to?I(z.date_to):"",onChange:xe=>Ye(ie,"date_to",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"number",step:"0.5",value:z.number_of_hours,onChange:xe=>Ye(ie,"number_of_hours",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:z.type_of_ld,onChange:xe=>Ye(ie,"type_of_ld",xe.target.value),placeholder:"e.g. Managerial, Technical",className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("textarea",{value:z.conducted_sponsored_by,onChange:xe=>Ye(ie,"conducted_sponsored_by",xe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("button",{type:"button",onClick:()=>He(ie),className:"p-2 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors",title:"Remove training",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},ie))})]})}),e.jsx("button",{type:"button",onClick:ge,className:"mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Training"})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-pink-100 text-pink-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"VIII"}),"OTHER INFORMATION"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{id:"skills-section",className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"31. SPECIAL SKILLS AND HOBBIES"}),V.map((z,ie)=>e.jsxs("div",{className:"flex space-x-2 mb-2",children:[e.jsx("textarea",{value:z.skill_hobby,onChange:xe=>lt(ie,xe.target.value),placeholder:"e.g. Computer Programming, Playing Guitar",rows:"2",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm resize-vertical"}),e.jsx("button",{type:"button",onClick:()=>yt(ie),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Remove skill/hobby",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},ie)),e.jsx("button",{type:"button",onClick:ct,className:"mt-2 w-full px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm",children:"Add Skill/Hobby"})]}),e.jsxs("div",{id:"recognition-section",className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"32. NON-ACADEMIC DISTINCTIONS/RECOGNITION"}),_.map((z,ie)=>e.jsxs("div",{className:"flex space-x-2 mb-2",children:[e.jsx("textarea",{value:z.recognition,onChange:xe=>Rt(ie,xe.target.value),placeholder:"e.g. Best Employee Award 2023",rows:"2",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm resize-vertical"}),e.jsx("button",{type:"button",onClick:()=>kt(ie),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Remove recognition",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},ie)),e.jsx("button",{type:"button",onClick:jt,className:"mt-2 w-full px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm",children:"Add Recognition"})]}),e.jsxs("div",{id:"membership-section",className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"33. MEMBERSHIP IN ASSOCIATION/ORGANIZATION"}),P.map((z,ie)=>e.jsxs("div",{className:"flex space-x-2 mb-2",children:[e.jsx("textarea",{value:z.organization,onChange:xe=>Ca(ie,xe.target.value),placeholder:"e.g. Philippine Computer Society",rows:"2",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm resize-vertical"}),e.jsx("button",{type:"button",onClick:()=>ec(ie),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Remove membership",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},ie)),e.jsx("button",{type:"button",onClick:yr,className:"mt-2 w-full px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm",children:"Add Membership"})]})]})]})]}),ht=()=>{const z=st.useRef(null),[ie,xe]=st.useState(!1),Le=st.useRef(null),tt=()=>{const pt=z.current;if(pt){const dt=pt.getContext("2d");dt.clearRect(0,0,pt.width,pt.height),dt.fillStyle="white",dt.fillRect(0,0,pt.width,pt.height),dt.strokeStyle="black",dt.fillStyle="white",dt.lineWidth=2,dt.lineCap="round",dt.lineJoin="round",dt.globalCompositeOperation="source-over",console.log(" Canvas force reset - stroke style:",dt.strokeStyle)}};st.useEffect(()=>{const pt=z.current;if(pt){const dt=pt.getContext("2d");dt.strokeStyle="black",dt.fillStyle="white",dt.lineWidth=2,dt.lineCap="round",dt.lineJoin="round",dt.globalCompositeOperation="source-over",dt.fillRect(0,0,pt.width,pt.height),console.log(" Canvas initialized with stroke style:",dt.strokeStyle)}},[]),st.useEffect(()=>{const pt=z.current;if(pt&&ve){const dt=pt.getContext("2d"),Oe=new Image;Oe.onload=()=>{dt.clearRect(0,0,pt.width,pt.height),dt.fillStyle="#ffffff",dt.fillRect(0,0,pt.width,pt.height),dt.drawImage(Oe,0,0,pt.width,pt.height),dt.strokeStyle="black",dt.fillStyle="white",dt.lineWidth=2,dt.lineCap="round",dt.lineJoin="round",dt.globalCompositeOperation="source-over"},Oe.src=ve}},[ve]),st.useEffect(()=>()=>{Le.current&&clearTimeout(Le.current)},[]);const Fe=pt=>{const dt=z.current,Oe=dt.getBoundingClientRect(),ts=dt.width/Oe.width,ks=dt.height/Oe.height;return pt.touches&&pt.touches[0]?{x:(pt.touches[0].clientX-Oe.left)*ts,y:(pt.touches[0].clientY-Oe.top)*ks}:{x:(pt.clientX-Oe.left)*ts,y:(pt.clientY-Oe.top)*ks}},et=pt=>{pt.preventDefault(),Le.current&&clearTimeout(Le.current);const Oe=z.current.getContext("2d"),ts=Fe(pt);Oe.strokeStyle="black",Oe.fillStyle="white",Oe.lineWidth=2,Oe.lineCap="round",Oe.lineJoin="round",Oe.globalCompositeOperation="source-over",console.log(" Starting new stroke with style:",Oe.strokeStyle),Oe.beginPath(),Oe.moveTo(ts.x,ts.y),xe(!0)},ot=pt=>{if(!ie)return;pt.preventDefault();const Oe=z.current.getContext("2d"),ts=Fe(pt);Oe.strokeStyle!=="black"&&(Oe.strokeStyle="black",Oe.lineWidth=2,Oe.lineCap="round",Oe.lineJoin="round",Oe.globalCompositeOperation="source-over"),Oe.lineTo(ts.x,ts.y),Oe.stroke()},nt=pt=>{const dt=document.createElement("canvas"),Oe=dt.getContext("2d"),ts=400,ks=150;dt.width=ts,dt.height=ks,Oe.fillStyle="white",Oe.fillRect(0,0,ts,ks),Oe.drawImage(pt,0,0,ts,ks);let vt=.9,wt,Pt=0;const Ft=20;do{wt=dt.toDataURL("image/png",vt);const Wt=(wt.split(",")[1]?wt.split(",")[1].length:0)*.75/1024;if(Wt<=150){console.log(` Signature compressed successfully: ${Wt.toFixed(2)}KB, quality: ${vt}`);break}vt-=.05,Pt++}while(vt>.1&&Pt<Ft);return Pt>=Ft&&console.warn(" Could not compress signature below 150KB, using lowest quality available"),wt},ft=pt=>{pt.preventDefault(),ie&&(xe(!1),Le.current&&clearTimeout(Le.current),Le.current=setTimeout(()=>{St()},1e3))},St=()=>{const pt=z.current;if(pt){const dt=nt(pt);Q(dt),console.log(" Signature auto-saved")}},Ot=()=>{Le.current&&clearTimeout(Le.current),St()},Zt=()=>{const pt=z.current,dt=pt.getContext("2d");Le.current&&clearTimeout(Le.current),dt.clearRect(0,0,pt.width,pt.height),dt.fillStyle="white",dt.fillRect(0,0,pt.width,pt.height),dt.strokeStyle="black",dt.fillStyle="white",dt.lineWidth=2,dt.lineCap="round",dt.lineJoin="round",dt.globalCompositeOperation="source-over",console.log(" Canvas cleared and stroke style reset to:",dt.strokeStyle),Q("")};return e.jsxs("div",{className:"border border-gray-300 rounded-lg p-4",children:[e.jsx("canvas",{ref:z,width:400,height:150,className:"border border-gray-300 bg-white cursor-crosshair",onMouseDown:et,onMouseMove:ot,onMouseUp:ft,onMouseLeave:ft,onTouchStart:et,onTouchMove:ot,onTouchEnd:ft,style:{touchAction:"none",backgroundColor:"white",display:"block"}}),e.jsxs("div",{className:"mt-2 flex space-x-2",children:[e.jsx("button",{type:"button",onClick:Ot,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Save Signature"}),e.jsx("button",{type:"button",onClick:Zt,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Clear Signature"}),e.jsx("button",{type:"button",onClick:tt,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Reset Canvas"})]})]})},Pe=()=>(console.log(" [PDS] Current declarations state in renderPage4:",B),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{id:"declarations-section",className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-yellow-100 text-yellow-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"IX"}),"DECLARATIONS"]}),e.jsx("p",{className:"text-sm text-gray-700 mb-6 italic",children:"Please answer the following questions with complete honesty. Any misrepresentation made in this document may cause the filing of administrative/criminal case/s against you."}),e.jsx("div",{className:"mb-6 p-4 bg-gray-50 border-l-4 border-blue-500",children:e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"34. Are you related by consanguinity or affinity to the appointing or recommending authority, or to the chief of bureau or office or to the person who has immediate supervision over you in the Office, Bureau or Department where you will be appointed,"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"a. within the third degree?"}),e.jsx("div",{children:e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfour_a",value:"true",checked:B.thirtyfour_a===!0,onChange:()=>w(z=>({...z,thirtyfour_a:!0})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfour_a",value:"false",checked:B.thirtyfour_a===!1,onChange:()=>w(z=>({...z,thirtyfour_a:!1})),className:"mr-2"}),"NO"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"b. within the fourth degree? (for Local Government Unit - Career Employees)"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfour_b",value:"true",checked:B.thirtyfour_b===!0,onChange:()=>w(z=>({...z,thirtyfour_b:!0})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfour_b",value:"false",checked:B.thirtyfour_b===!1,onChange:()=>w(z=>({...z,thirtyfour_b:!1})),className:"mr-2"}),"NO"]})]}),B.thirtyfour_b&&e.jsx("input",{type:"text",name:"thirtyfour_b_details",value:B.thirtyfour_b_details,onChange:Cs,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"35a. Have you ever been found guilty of any administrative offense?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfive_a",value:"true",checked:B.thirtyfive_a===!0,onChange:()=>w(z=>({...z,thirtyfive_a:!0})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfive_a",value:"false",checked:B.thirtyfive_a===!1,onChange:()=>w(z=>({...z,thirtyfive_a:!1})),className:"mr-2"}),"NO"]})]}),B.thirtyfive_a&&e.jsx("input",{type:"text",name:"thirtyfive_a_details",value:B.thirtyfive_a_details,onChange:Cs,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"35b. Have you been criminally charged before any court?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfive_b",value:"true",checked:B.thirtyfive_b===!0,onChange:()=>w(z=>({...z,thirtyfive_b:!0})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfive_b",value:"false",checked:B.thirtyfive_b===!1,onChange:()=>w(z=>({...z,thirtyfive_b:!1})),className:"mr-2"}),"NO"]})]}),B.thirtyfive_b&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsx("input",{type:"text",name:"thirtyfive_datefiled",value:B.thirtyfive_datefiled||"",onChange:Cs,placeholder:"mm/dd/yyyy",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("input",{type:"text",name:"thirtyfive_statuses",value:B.thirtyfive_statuses,onChange:Cs,placeholder:"Status of Case/s:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"36. Have you ever been convicted of any crime or violation of any law, decree, ordinance or regulation by any court or tribunal?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtysix",value:"true",checked:B.thirtysix===!0,onChange:()=>w(z=>({...z,thirtysix:!0})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtysix",value:"false",checked:B.thirtysix===!1,onChange:()=>w(z=>({...z,thirtysix:!1})),className:"mr-2"}),"NO"]})]}),B.thirtysix&&e.jsx("input",{type:"text",name:"thirtysix_details",value:B.thirtysix_details,onChange:Cs,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"37. Have you ever been separated from the service in any of the following modes: resignation, retirement, dropped from the rolls, dismissal, termination, end of term, finished contract or phased out (abolition) in the public or private sector?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyseven",value:"true",checked:B.thirtyseven===!0,onChange:()=>w(z=>({...z,thirtyseven:!0})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyseven",value:"false",checked:B.thirtyseven===!1,onChange:()=>w(z=>({...z,thirtyseven:!1})),className:"mr-2"}),"NO"]})]}),B.thirtyseven&&e.jsx("input",{type:"text",name:"thirtyseven_details",value:B.thirtyseven_details,onChange:Cs,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"38a. Have you ever been a candidate in a national or local election held within the last year (except Barangay election)?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyeight_a",value:"true",checked:B.thirtyeight_a===!0,onChange:()=>w(z=>({...z,thirtyeight_a:!0})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyeight_a",value:"false",checked:B.thirtyeight_a===!1,onChange:()=>w(z=>({...z,thirtyeight_a:!1})),className:"mr-2"}),"NO"]})]}),B.thirtyeight_a&&e.jsx("input",{type:"text",name:"thirtyeight_a_details",value:B.thirtyeight_a_details,onChange:Cs,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"38b. Have you resigned from the government service during the three (3)-month period before the last election to promote/actively campaign for a national or local candidate?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyeight_b",value:"true",checked:B.thirtyeight_b===!0,onChange:()=>w(z=>({...z,thirtyeight_b:!0})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyeight_b",value:"false",checked:B.thirtyeight_b===!1,onChange:()=>w(z=>({...z,thirtyeight_b:!1})),className:"mr-2"}),"NO"]})]}),B.thirtyeight_b&&e.jsx("input",{type:"text",name:"thirtyeight_b_details",value:B.thirtyeight_b_details,onChange:Cs,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"39. Have you acquired the status of an immigrant or permanent resident of another country?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtynine",value:"true",checked:B.thirtynine===!0,onChange:()=>w(z=>({...z,thirtynine:!0})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtynine",value:"false",checked:B.thirtynine===!1,onChange:()=>w(z=>({...z,thirtynine:!1})),className:"mr-2"}),"NO"]})]}),B.thirtynine&&e.jsx("input",{type:"text",name:"thirtynine_details",value:B.thirtynine_details,onChange:Cs,placeholder:"If YES, give details (country):",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]})]}),e.jsx("div",{className:"mb-6 p-4 bg-gray-50 border-l-4 border-blue-500",children:e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"40. Pursuant to: (a) Indigenous People's Act (RA 8371); (b) Magna Carta for Disabled Persons (RA 7277); and (c) Solo Parents Welfare Act of 2000 (RA 8972), please answer the following items:"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"a. Are you a member of any indigenous group?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"forty_a",value:"true",checked:B.forty_a===!0,onChange:()=>w(z=>({...z,forty_a:!0})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"forty_a",value:"false",checked:B.forty_a===!1,onChange:()=>w(z=>({...z,forty_a:!1})),className:"mr-2"}),"NO"]})]}),B.forty_a&&e.jsx("input",{type:"text",name:"forty_a_details",value:B.forty_a_details,onChange:Cs,placeholder:"If YES, please specify:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"b. Are you a person with disability?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"forty_b",value:"true",checked:B.forty_b===!0,onChange:()=>w(z=>({...z,forty_b:!0})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"forty_b",value:"false",checked:B.forty_b===!1,onChange:()=>w(z=>({...z,forty_b:!1})),className:"mr-2"}),"NO"]})]}),B.forty_b&&e.jsx("input",{type:"text",name:"forty_b_details",value:B.forty_b_details,onChange:Cs,placeholder:"If YES, please specify ID No:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"c. Are you a solo parent?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"forty_c",value:"true",checked:B.forty_c===!0,onChange:()=>w(z=>({...z,forty_c:!0})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"forty_c",value:"false",checked:B.forty_c===!1,onChange:()=>w(z=>({...z,forty_c:!1})),className:"mr-2"}),"NO"]})]}),B.forty_c&&e.jsx("input",{type:"text",name:"forty_c_details",value:B.forty_c_details,onChange:Cs,placeholder:"If YES, please specify ID No:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"bg-purple-100 text-purple-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"X"}),"CHARACTER REFERENCES"]}),e.jsxs("span",{className:"text-sm font-normal text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:[T.filter(z=>z.reference_name&&z.reference_name.trim()!=="").length,"/3 Required"]})]}),e.jsxs("div",{id:"references-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"41. REFERENCES (Person not related by consanguinity or affinity to applicant /appointee)"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 table-fixed",children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"42%"}})," ",e.jsx("col",{style:{width:"33%"}})," ",e.jsx("col",{style:{width:"20%"}})," ",e.jsx("col",{style:{width:"6%"}})," "]}),e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm",children:"NAME"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm",children:"ADDRESS"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm",children:"TEL. NO."}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm"})]})}),e.jsx("tbody",{children:T.map((z,ie)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:z.reference_name,onChange:xe=>Rr(ie,"reference_name",xe.target.value),placeholder:"Enter full name",className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("textarea",{value:z.reference_address,onChange:xe=>Rr(ie,"reference_address",xe.target.value),placeholder:"Enter complete address",className:"w-full px-2 py-1 border border-gray-300 rounded text-xs resize-vertical",rows:"2",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:z.reference_tel_no,onChange:xe=>Rr(ie,"reference_tel_no",xe.target.value),placeholder:"Enter telephone number",className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",style:{fontSize:"12px"}})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("button",{type:"button",onClick:()=>sc(ie),className:"p-1 bg-red-500 text-white rounded text-xs hover:bg-red-600 transition-colors",title:"Remove reference",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},ie))})]})}),e.jsx("button",{type:"button",onClick:tc,disabled:T.length>=3,className:`mt-4 px-4 py-2 rounded-lg ${T.length>=3?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,children:T.length>=3?"Maximum 3 References":"Add Reference"})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-gray-100 text-gray-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"XI"}),"OATH & DECLARATION"]}),e.jsx("div",{className:"bg-gray-50 border border-gray-300 rounded-lg p-6 mb-6",children:e.jsxs("p",{className:"text-sm text-gray-800 leading-relaxed",children:[e.jsx("strong",{children:"42. DECLARATION:"})," I declare under oath that I have personally accomplished this Personal Data Sheet which is a true, correct and complete statement pursuant to the provisions of pertinent laws, rules and regulations of the Republic of the Philippines. I authorize the agency head/authorized representative to verify/validate the contents stated herein. I agree that any misrepresentation made in this document and its attachments shall cause the filing of administrative/criminal case/s against me."]})})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"bg-cyan-100 text-cyan-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"XII"}),"GOVERNMENT ISSUED ID"]}),K.length>0&&K[0].government_issued_id&&!X&&e.jsxs("span",{className:"text-sm font-normal text-green-600 bg-green-100 px-3 py-1 rounded-full",children:[" Active ID: ",K[0].government_issued_id]}),X&&e.jsx("span",{className:"text-sm font-normal text-orange-600 bg-orange-100 px-3 py-1 rounded-full",children:" Replacing ID - Fill all fields to accept changes"})]}),e.jsxs("div",{id:"government-id-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"43. GOVERNMENT ISSUED ID"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"(i.e. Passport, GSIS, SSS, PRC, Driver's License, etc.) PLEASE INDICATE ID Number and Date of Issuance"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 table-fixed",children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"30%"}})," ",e.jsx("col",{style:{width:"25%"}})," ",e.jsx("col",{style:{width:"20%"}})," ",e.jsx("col",{style:{width:"25%"}})," "]}),e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm",children:"GOVERNMENT ISSUED ID"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm",children:"ID NUMBER"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm",children:"DATE ISSUED"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm",children:"PLACE OF ISSUANCE"})]})}),e.jsx("tbody",{children:K.map((z,ie)=>e.jsxs("tr",{className:X?"bg-orange-50":"",children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:z.government_issued_id,onChange:xe=>Tn(ie,"government_issued_id",xe.target.value),placeholder:"Enter Government ID",className:`w-full px-2 py-1 border rounded text-xs ${X?"border-orange-300 focus:border-orange-500":"border-gray-300"}`,style:{fontSize:"12px"},required:X})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:z.id_number,onChange:xe=>Tn(ie,"id_number",xe.target.value),placeholder:"Enter ID Number",className:`w-full px-2 py-1 border rounded text-xs ${X?"border-orange-300 focus:border-orange-500":"border-gray-300"}`,style:{fontSize:"12px"},required:X})}),e.jsxs("td",{className:"border border-gray-300 px-4 py-2",children:[console.log(` [Government ID] Date issued for ID ${ie}:`,z.date_issued),e.jsx("input",{type:"date",value:z.date_issued?z.date_issued.split("T")[0]:"",onChange:xe=>Tn(ie,"date_issued",xe.target.value),placeholder:"Select Date",className:`w-full px-2 py-1 border rounded text-xs ${X?"border-orange-300 focus:border-orange-500":"border-gray-300"}`,style:{fontSize:"12px"},required:X})]}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:z.place_of_issuance,onChange:xe=>Tn(ie,"place_of_issuance",xe.target.value),placeholder:"Enter Place of Issuance",className:`w-full px-2 py-1 border rounded text-xs ${X?"border-orange-300 focus:border-orange-500":"border-gray-300"}`,style:{fontSize:"12px"},required:X})})]},ie))})]})}),e.jsxs("div",{className:"mt-4 flex space-x-3",children:[console.log(" [Government ID] Render - isReplacingGovId:",X),console.log(" [Government ID] Render - hasPendingGovIdChange:",oe),console.log(" [Government ID] Render - governmentIds:",K),X?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>{console.log(" [Government ID] Change Government ID button clicked"),ka()},className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Change Government ID"}),e.jsx("button",{type:"button",onClick:An,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Cancel"})]}):e.jsx("button",{type:"button",onClick:Vl,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:K.length>0&&K[0].government_issued_id?"Replace Government ID":"Add Government ID"})]})]})]}),e.jsxs("section",{id:"media-section",className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-rose-100 text-rose-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"XIII"}),"SIGNATURE, PHOTO & THUMBMARK"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{id:"signature-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"44. EMPLOYEE SIGNATURE"}),ve&&e.jsx("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Signature loaded from saved record"]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Draw your signature below or upload an image"}),e.jsx(ht,{}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Or Upload Signature Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:ac,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),ve&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Signature Preview:"}),e.jsx("img",{src:ve,alt:"Signature",className:"border border-gray-300 rounded-lg max-w-full h-32 object-contain"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Accomplished"}),e.jsx("input",{id:"date-accomplished",type:"date",value:ne,onChange:z=>he(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{id:"photo-section",className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"PHOTO (3.5cm x 4.5cm)"}),Me&&e.jsx("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Photo loaded from saved record"]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Upload passport-size photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:Ta,className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-3"}),Me&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Photo Preview:"}),e.jsx("img",{src:Me,alt:"Employee",className:"border border-gray-300 rounded-lg w-32 h-40 object-cover"})]})]}),e.jsxs("div",{id:"thumbmark-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"RIGHT THUMBMARK"}),De&&e.jsx("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Thumbmark loaded from saved record"]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Upload right thumbmark image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:Kl,className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-3"}),De&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Thumbmark Preview:"}),e.jsx("img",{src:De,alt:"Thumbmark",className:"border border-gray-300 rounded-lg w-24 h-24 object-contain"})]})]})]})]})]})]}));return L===!1?e.jsx("div",{className:"max-w-3xl mx-auto p-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No PDS found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't find your Personal Data Sheet. Click below to create one and start filling it out."}),e.jsx("button",{onClick:ic,disabled:l,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-60",children:l?"Creating":"Create My PDS"})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Personal Data Sheet (PDS)"}),e.jsx("p",{className:"text-gray-600",children:"Track your progress and complete missing information"})]}),e.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:" Back to DTR Check"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"PDS Completeness"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[(typeof h=="number"?h:0).toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${(h||0)>=80?"bg-green-500":(h||0)>=50?"bg-yellow-500":(h||0)>=25?"bg-orange-500":"bg-red-500"}`,style:{width:`${h||0}%`}})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(h||0)<25?"Just getting started":(h||0)<50?"Making progress":(h||0)<80?"Almost there!":(h||0)<100?"Nearly complete!":"Complete!"})]}),m.length>0&&e.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("svg",{className:"w-4 h-4 text-yellow-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("span",{className:"text-sm font-medium text-yellow-800",children:["Missing Fields (",m.length,")"]})]}),e.jsx("div",{className:`overflow-y-auto ${x?"max-h-64":"max-h-32"}`,children:e.jsxs("div",{className:"space-y-1",children:[(x?m:m.slice(0,10)).map((z,ie)=>e.jsxs("div",{className:"text-xs text-yellow-700 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-2 flex-shrink-0"}),e.jsxs("span",{className:"font-medium",children:[z.section,":"]}),e.jsx("button",{onClick:()=>lc(z),className:"ml-1 text-blue-600 hover:text-blue-800 hover:underline cursor-pointer transition-colors duration-200",title:`Click to focus on ${z.field} field`,children:z.field})]},ie)),m.length>10&&e.jsx("div",{className:"flex justify-center pt-2",children:e.jsx("button",{onClick:()=>j(!x),className:"text-xs text-blue-600 hover:text-blue-800 hover:underline cursor-pointer transition-colors duration-200 font-medium",children:x?`Show Less (showing ${m.length} of ${m.length})`:`Show More (${m.length-10} more fields)`})})]})})]}),m.length===0&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:" All required fields completed!"})]})})]}),!Ke&&Ee.length===0&&ee.length===0&&Qe.length===0&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mx-6 mt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:"Lookup Data Not Available"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Unable to load data from HR201 database tables"})]})]}),e.jsx("button",{onClick:mt,className:"bg-yellow-600 text-white px-3 py-1 rounded text-sm hover:bg-yellow-700 transition-colors",children:"Retry"})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"PDS Pages"}),e.jsx("div",{className:"flex space-x-2",children:[1,2,3,4].map(z=>e.jsxs("button",{onClick:()=>a(z),className:`px-4 py-2 rounded-lg font-medium ${n===z?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Page ",z," "]},z))})]})}),e.jsxs("div",{className:"min-h-screen",children:[n===1&&fe(),n===2&&ue(),n===3&&Ge(),n===4&&Pe()]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex space-x-3",children:n>1&&e.jsx("button",{onClick:()=>a(n-1),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:" Previous Page"})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>re(!0),disabled:l,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50 flex items-center space-x-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("span",{children:"Save Draft"})]})}),e.jsx("button",{onClick:()=>re(!1),disabled:l,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:"Save & Close"})]})}),e.jsxs("button",{onClick:oc,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),e.jsx("span",{children:"Print PDS"})]}),n<4&&e.jsx("button",{onClick:()=>a(n+1),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Next Page "})]})]})})]})]}),Ae&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:Ie==="height"?"Height Converter":"Weight Converter"}),e.jsx("button",{onClick:Ln,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Ie==="height"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Convert height to meters"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value"}),e.jsx("input",{type:"number",value:se.value,onChange:z=>In("value",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"5",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsxs("select",{value:se.unit,onChange:z=>In("unit",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"ft",children:"Feet (ft)"}),e.jsx("option",{value:"cm",children:"Centimeters (cm)"}),e.jsx("option",{value:"in",children:"Inches (in)"})]})]})]}),e.jsx("button",{onClick:ql,disabled:!se.value||!se.unit,className:"w-full px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Convert to Meters"}),se.convertedValue&&e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800",children:e.jsxs("strong",{children:["Result: ",se.convertedValue," meters"]})})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Convert weight to kilograms"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value"}),e.jsx("input",{type:"number",value:se.value,onChange:z=>In("value",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"150",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsxs("select",{value:se.unit,onChange:z=>In("unit",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"lbs",children:"Pounds (lbs)"}),e.jsx("option",{value:"g",children:"Grams (g)"})]})]})]}),e.jsx("button",{onClick:ql,disabled:!se.value||!se.unit,className:"w-full px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Convert to Kilograms"}),se.convertedValue&&e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800",children:e.jsxs("strong",{children:["Result: ",se.convertedValue," kilograms"]})})})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:Ln,className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:nc,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",disabled:!se.convertedValue,children:"Apply to Form"})]})]})})]})},g1=()=>{const{user:t}=Qt();console.log(" [MyLeaveRecords] Component is rendering!");const[s,r]=y.useState(null),[n,a]=y.useState(!0),[l,o]=y.useState(null),i=async()=>{var h,p,m;try{a(!0),o(null),console.log(" [MyLeaveRecords] Starting fetch for user:",t);const u=(t==null?void 0:t.USERID)||(t==null?void 0:t.userid);if(!u)throw new Error("User ID not found");console.log(" [MyLeaveRecords] User ID:",u),console.log(" [MyLeaveRecords] Fetching employees...");const x=await le.get("/201-employees");if(console.log(" [MyLeaveRecords] Employee response:",x.data),!x.data.success)throw new Error("Failed to fetch employee data");const j=x.data.data;console.log(" [MyLeaveRecords] All employees:",j);const v=j.find(g=>g.dtruserid===u);if(console.log(" [MyLeaveRecords] Current employee:",v),!v)throw new Error("Employee record not found");const N=String(v.objid||"").trim();if(console.log(" [MyLeaveRecords] Fetching leave record for objid:",N),!N)throw new Error("Employee objid is missing or invalid");const f=N.split(":")[0];console.log(" [MyLeaveRecords] Clean objid:",f);const d=await le.get(`/employee-leave-records/${encodeURIComponent(f)}`);console.log(" [MyLeaveRecords] Leave response:",d.data),d.data.success?(r(d.data.leaveRecord),console.log(" [MyLeaveRecords] Leave record loaded successfully")):(console.log(" [MyLeaveRecords] No leave record found, setting to null"),r(null))}catch(u){((h=u==null?void 0:u.response)==null?void 0:h.status)===404?(console.log(" [MyLeaveRecords] Leave record not found (404), this is normal if employee has no record yet"),r(null),o(null)):(console.error(" [MyLeaveRecords] Error fetching leave record:",u),o(((m=(p=u.response)==null?void 0:p.data)==null?void 0:m.message)||u.message||"Failed to fetch leave record"))}finally{a(!1)}};y.useEffect(()=>{t&&i()},[t]);const c=h=>h?parseFloat(h).toFixed(3):"0.000";return n?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading leave records..."})]}):l?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:e.jsx("p",{children:l})}),e.jsx("button",{onClick:i,className:"mt-2 px-3 py-1 bg-red-100 text-red-800 rounded hover:bg-red-200",children:"Retry"})]})})}):e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:s?e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Leave Credits"}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"Total Earned Credits"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-white rounded border",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Earned VL"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:c(s.total_earned_vl)})]}),e.jsxs("div",{className:"p-3 bg-white rounded border",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Earned SL"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:c(s.total_earned_sl)})]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-green-900 mb-3",children:"Leave Balances"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-white rounded border",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"VL Balance"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:c(s.balance_vl)})]}),e.jsxs("div",{className:"p-3 bg-white rounded border",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"SL Balance"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:c(s.balance_sl)})]})]})]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["Last updated: ",s.updated_at?new Date(s.updated_at).toLocaleDateString():"N/A"]})]}):e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"text-gray-500 mb-4",children:e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Not available"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Leave record is not available. Please contact HR to set up your leave records."})]})})})},y1=({isOpen:t,onClose:s,transaction:r,onSave:n})=>{var O;const{user:a}=Qt(),[l,o]=y.useState({leavetypeid:"",deductmode:"Leave",leavepurpose:"",selectedDates:[],deductedcredit:0,inclusivedates:0}),[i,c]=y.useState([]),[h,p]=y.useState(!1),[m,u]=y.useState(!1),[x,j]=y.useState(null),[v,N]=y.useState([]),[f,d]=y.useState({selectedQuestionId:null,answer:""}),[g,b]=y.useState(null);y.useEffect(()=>{r&&t&&(o({leavetypeid:r.leavetypeid||"",deductmode:r.deductmode||"Leave",leavepurpose:r.leavepurpose||"",selectedDates:r.details?r.details.map(C=>C.deducteddate):[],deductedcredit:r.deductedcredit||0,inclusivedates:r.inclusivedates||0}),r.questionAnswer&&d({selectedQuestionId:r.questionAnswer.questionId,answer:r.questionAnswer.answer}))},[r,t]),y.useEffect(()=>{t&&(R(),E())},[t]),y.useEffect(()=>{l.leavetypeid&&S(l.leavetypeid)},[l.leavetypeid]);const E=async()=>{try{const C=(a==null?void 0:a.USERID)||(a==null?void 0:a.userid);if(!C)return;const Y=(await le.get("/201-employees")).data.data.find(G=>G.dtruserid===C);if(Y){const W=((await le.get(`/employee-leave-records/${Y.objid}`)).data.data||[]).reduce((_,M)=>(M.leave_type_name==="Vacation Leave"?_.VL=(_.VL||0)+(M.credit||0)-(M.debit||0):M.leave_type_name==="Sick Leave"&&(_.SL=(_.SL||0)+(M.credit||0)-(M.debit||0)),_),{VL:0,SL:0});b({...Y,vl_balance:W.VL,sl_balance:W.SL})}}catch(C){console.error("Error fetching employee data:",C)}},R=async()=>{try{p(!0);const C=await le.get("/leave-types");console.log("Leave types response:",C.data);let F=[];Array.isArray(C.data)?F=C.data:(C.data&&Array.isArray(C.data.data)||C.data&&C.data.success&&Array.isArray(C.data.data))&&(F=C.data.data),c(F)}catch(C){console.error("Error fetching leave types:",C),j("Failed to fetch leave types"),c([])}finally{p(!1)}},S=async C=>{try{const F=await le.get(`/leave-types/${C}/questions`);N(Array.isArray(F.data)?F.data:[])}catch(F){console.error("Error fetching leave type questions:",F),N([])}},k=C=>{const{name:F,value:U}=C.target;o(Y=>({...Y,[F]:U}))},L=C=>{const F=C.toISOString().split("T")[0];o(U=>({...U,selectedDates:U.selectedDates.includes(F)?U.selectedDates.filter(Y=>Y!==F):[...U.selectedDates,F].sort(),inclusivedates:U.selectedDates.includes(F)?U.selectedDates.length-1:U.selectedDates.length+1,deductedcredit:U.selectedDates.includes(F)?U.selectedDates.length-1:U.selectedDates.length+1}))},A=C=>C?new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",D=async C=>{var F,U;if(C.preventDefault(),!l.leavetypeid||l.selectedDates.length===0){j("Please fill in all required fields");return}try{u(!0),j(null);const Y={leavetypeid:l.leavetypeid,deductmode:l.deductmode,leavepurpose:l.leavepurpose,selectedDates:l.selectedDates,deductedcredit:l.selectedDates.length,inclusivedates:l.selectedDates.length,questionAnswers:f.selectedQuestionId&&f.answer?f:null};await le.put(`/employee-leave-transactions/${r.objid}`,Y),n(),s()}catch(Y){j(((U=(F=Y.response)==null?void 0:F.data)==null?void 0:U.error)||"Failed to update leave transaction")}finally{u(!1)}},I=()=>{o({leavetypeid:"",deductmode:"Leave",leavepurpose:"",selectedDates:[],deductedcredit:0,inclusivedates:0}),d({selectedQuestionId:null,answer:""}),j(null),s()};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"relative w-full max-w-4xl bg-white rounded-lg shadow-xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Edit Leave Transaction"}),e.jsx("button",{onClick:I,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200 p-1 rounded-full hover:bg-gray-100",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[g.photo_path?e.jsx("img",{src:g.photo_path,alt:g.employee_name,className:"h-16 w-16 rounded-full object-cover"}):e.jsx("div",{className:"h-16 w-16 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 text-lg font-medium",children:(O=g.employee_name)==null?void 0:O.split(" ").map(C=>C[0]).join("").substring(0,2)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:g.employee_name}),e.jsx("p",{className:"text-gray-600",children:g.employee_id}),e.jsxs("p",{className:"text-sm text-gray-500",children:["VL: ",g.vl_balance||0," | SL: ",g.sl_balance||0]})]})]})}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[x&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:x}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leave Type *"}),e.jsxs("select",{name:"leavetypeid",value:l.leavetypeid,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",required:!0,children:[e.jsx("option",{value:"",children:"Select Leave Type"}),Array.isArray(i)&&i.length>0?i.map(C=>e.jsxs("option",{value:C.leaveid,children:[C.leavetype," (",C.leavecode||"N/A",")"]},C.leaveid)):e.jsx("option",{value:"",disabled:!0,children:"Loading leave types..."})]})]}),e.jsx("div",{children:v.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Questions"}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:Array.isArray(v)&&v.map((C,F)=>e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("input",{type:"radio",id:`question-${C.objid}`,name:"leave-question",checked:f.selectedQuestionId===C.objid,onChange:U=>{U.target.checked&&d({selectedQuestionId:C.objid,answer:""})},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("label",{htmlFor:`question-${C.objid}`,className:"block text-xs font-medium text-gray-700 mb-1 cursor-pointer",children:[F+1,". ",C.question]}),f.selectedQuestionId===C.objid&&e.jsx("textarea",{value:f.answer,onChange:U=>{d(Y=>({...Y,answer:U.target.value}))},rows:2,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",placeholder:"Answer..."})]})]})},C.objid))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deduct Mode"}),e.jsxs("select",{name:"deductmode",value:l.deductmode,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",children:[e.jsx("option",{value:"Leave",children:"Leave"}),e.jsx("option",{value:"Absent",children:"Absent"}),e.jsx("option",{value:"Lates",children:"Lates"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leave Purpose"}),e.jsx("textarea",{name:"leavepurpose",value:l.leavepurpose,onChange:k,rows:3,maxLength:100,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",placeholder:"Enter leave purpose..."}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.leavepurpose.length,"/100 characters"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Dates *"}),e.jsx("input",{type:"date",onChange:C=>L(new Date(C.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),l.selectedDates.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Selected Dates:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.selectedDates.map(C=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:[A(C),e.jsx("button",{type:"button",onClick:()=>L(new Date(C)),className:"ml-2 text-blue-600 hover:text-blue-800 transition-colors duration-200",children:""})]},C))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inclusive Dates"}),e.jsx("input",{type:"text",value:l.inclusivedates,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deducted Credit"}),e.jsx("input",{type:"text",value:l.deductedcredit,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600 cursor-not-allowed"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:I,className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m||!l.leavetypeid||l.selectedDates.length===0,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:m?"Saving...":"Update Transaction"})]})]})]})})}):null};function b1(t,s,r="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:t,timeZoneName:r}).format(s).split(/\s/g).slice(2).join(" ")}const $c={},Za={};function gn(t,s){try{const n=($c[t]||($c[t]=new Intl.DateTimeFormat("en-US",{timeZone:t,timeZoneName:"longOffset"}).format))(s).split("GMT")[1];return n in Za?Za[n]:Qh(n,n.split(":"))}catch{if(t in Za)return Za[t];const r=t==null?void 0:t.match(v1);return r?Qh(t,r.slice(1)):NaN}}const v1=/([+-]\d\d):?(\d\d)?/;function Qh(t,s){const r=+(s[0]||0),n=+(s[1]||0),a=+(s[2]||0)/60;return Za[t]=r*60+n>0?r*60+n+a:r*60-n-a}class hr extends Date{constructor(...s){super(),s.length>1&&typeof s[s.length-1]=="string"&&(this.timeZone=s.pop()),this.internal=new Date,isNaN(gn(this.timeZone,this))?this.setTime(NaN):s.length?typeof s[0]=="number"&&(s.length===1||s.length===2&&typeof s[1]!="number")?this.setTime(s[0]):typeof s[0]=="string"?this.setTime(+new Date(s[0])):s[0]instanceof Date?this.setTime(+s[0]):(this.setTime(+new Date(...s)),a0(this),eu(this)):this.setTime(Date.now())}static tz(s,...r){return r.length?new hr(...r,s):new hr(Date.now(),s)}withTimeZone(s){return new hr(+this,s)}getTimezoneOffset(){const s=-gn(this.timeZone,this);return s>0?Math.floor(s):Math.ceil(s)}setTime(s){return Date.prototype.setTime.apply(this,arguments),eu(this),+this}[Symbol.for("constructDateFrom")](s){return new hr(+new Date(s),this.timeZone)}}const Zh=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(t=>{if(!Zh.test(t))return;const s=t.replace(Zh,"$1UTC");hr.prototype[s]&&(t.startsWith("get")?hr.prototype[t]=function(){return this.internal[s]()}:(hr.prototype[t]=function(){return Date.prototype[s].apply(this.internal,arguments),j1(this),+this},hr.prototype[s]=function(){return Date.prototype[s].apply(this,arguments),eu(this),+this}))});function eu(t){t.internal.setTime(+t),t.internal.setUTCSeconds(t.internal.getUTCSeconds()-Math.round(-gn(t.timeZone,t)*60))}function j1(t){Date.prototype.setFullYear.call(t,t.internal.getUTCFullYear(),t.internal.getUTCMonth(),t.internal.getUTCDate()),Date.prototype.setHours.call(t,t.internal.getUTCHours(),t.internal.getUTCMinutes(),t.internal.getUTCSeconds(),t.internal.getUTCMilliseconds()),a0(t)}function a0(t){const s=gn(t.timeZone,t),r=s>0?Math.floor(s):Math.ceil(s),n=new Date(+t);n.setUTCHours(n.getUTCHours()-1);const a=-new Date(+t).getTimezoneOffset(),l=-new Date(+n).getTimezoneOffset(),o=a-l,i=Date.prototype.getHours.apply(t)!==t.internal.getUTCHours();o&&i&&t.internal.setUTCMinutes(t.internal.getUTCMinutes()+o);const c=a-r;c&&Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+c);const h=new Date(+t);h.setUTCSeconds(0);const p=a>0?h.getSeconds():(h.getSeconds()-60)%60,m=Math.round(-(gn(t.timeZone,t)*60))%60;(m||p)&&(t.internal.setUTCSeconds(t.internal.getUTCSeconds()+m),Date.prototype.setUTCSeconds.call(t,Date.prototype.getUTCSeconds.call(t)+m+p));const u=gn(t.timeZone,t),x=u>0?Math.floor(u):Math.ceil(u),v=-new Date(+t).getTimezoneOffset()-x,N=x!==r,f=v-c;if(N&&f){Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+f);const d=gn(t.timeZone,t),g=d>0?Math.floor(d):Math.ceil(d),b=x-g;b&&(t.internal.setUTCMinutes(t.internal.getUTCMinutes()+b),Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+b))}}class bs extends hr{static tz(s,...r){return r.length?new bs(...r,s):new bs(Date.now(),s)}toISOString(){const[s,r,n]=this.tzComponents(),a=`${s}${r}:${n}`;return this.internal.toISOString().slice(0,-1)+a}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[s,r,n,a]=this.internal.toUTCString().split(" ");return`${s==null?void 0:s.slice(0,-1)} ${n} ${r} ${a}`}toTimeString(){const s=this.internal.toUTCString().split(" ")[4],[r,n,a]=this.tzComponents();return`${s} GMT${r}${n}${a} (${b1(this.timeZone,this)})`}toLocaleString(s,r){return Date.prototype.toLocaleString.call(this,s,{...r,timeZone:(r==null?void 0:r.timeZone)||this.timeZone})}toLocaleDateString(s,r){return Date.prototype.toLocaleDateString.call(this,s,{...r,timeZone:(r==null?void 0:r.timeZone)||this.timeZone})}toLocaleTimeString(s,r){return Date.prototype.toLocaleTimeString.call(this,s,{...r,timeZone:(r==null?void 0:r.timeZone)||this.timeZone})}tzComponents(){const s=this.getTimezoneOffset(),r=s>0?"-":"+",n=String(Math.floor(Math.abs(s)/60)).padStart(2,"0"),a=String(Math.abs(s)%60).padStart(2,"0");return[r,n,a]}withTimeZone(s){return new bs(+this,s)}[Symbol.for("constructDateFrom")](s){return new bs(+new Date(s),this.timeZone)}}const l0=6048e5,N1=864e5,Jh=Symbol.for("constructDateFrom");function os(t,s){return typeof t=="function"?t(s):t&&typeof t=="object"&&Jh in t?t[Jh](s):t instanceof Date?new t.constructor(s):new Date(s)}function Tt(t,s){return os(s||t,t)}function o0(t,s,r){const n=Tt(t,r==null?void 0:r.in);return isNaN(s)?os(t,NaN):(s&&n.setDate(n.getDate()+s),n)}function i0(t,s,r){const n=Tt(t,r==null?void 0:r.in);if(isNaN(s))return os(t,NaN);if(!s)return n;const a=n.getDate(),l=os(t,n.getTime());l.setMonth(n.getMonth()+s+1,0);const o=l.getDate();return a>=o?l:(n.setFullYear(l.getFullYear(),l.getMonth(),a),n)}let w1={};function Bl(){return w1}function ha(t,s){var i,c,h,p;const r=Bl(),n=(s==null?void 0:s.weekStartsOn)??((c=(i=s==null?void 0:s.locale)==null?void 0:i.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??0,a=Tt(t,s==null?void 0:s.in),l=a.getDay(),o=(l<n?7:0)+l-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function kl(t,s){return ha(t,{...s,weekStartsOn:1})}function c0(t,s){const r=Tt(t,s==null?void 0:s.in),n=r.getFullYear(),a=os(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const l=kl(a),o=os(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const i=kl(o);return r.getTime()>=l.getTime()?n+1:r.getTime()>=i.getTime()?n:n-1}function Xh(t){const s=Tt(t),r=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return r.setUTCFullYear(s.getFullYear()),+t-+r}function va(t,...s){const r=os.bind(null,s.find(n=>typeof n=="object"));return s.map(r)}function Dl(t,s){const r=Tt(t,s==null?void 0:s.in);return r.setHours(0,0,0,0),r}function d0(t,s,r){const[n,a]=va(r==null?void 0:r.in,t,s),l=Dl(n),o=Dl(a),i=+l-Xh(l),c=+o-Xh(o);return Math.round((i-c)/N1)}function E1(t,s){const r=c0(t,s),n=os(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),kl(n)}function S1(t,s,r){return o0(t,s*7,r)}function _1(t,s,r){return i0(t,s*12,r)}function C1(t,s){let r,n=s==null?void 0:s.in;return t.forEach(a=>{!n&&typeof a=="object"&&(n=os.bind(null,a));const l=Tt(a,n);(!r||r<l||isNaN(+l))&&(r=l)}),os(n,r||NaN)}function k1(t,s){let r,n=s==null?void 0:s.in;return t.forEach(a=>{!n&&typeof a=="object"&&(n=os.bind(null,a));const l=Tt(a,n);(!r||r>l||isNaN(+l))&&(r=l)}),os(n,r||NaN)}function D1(t,s,r){const[n,a]=va(r==null?void 0:r.in,t,s);return+Dl(n)==+Dl(a)}function u0(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function A1(t){return!(!u0(t)&&typeof t!="number"||isNaN(+Tt(t)))}function T1(t,s,r){const[n,a]=va(r==null?void 0:r.in,t,s),l=n.getFullYear()-a.getFullYear(),o=n.getMonth()-a.getMonth();return l*12+o}function L1(t,s){const r=Tt(t,s==null?void 0:s.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function m0(t,s){const[r,n]=va(t,s.start,s.end);return{start:r,end:n}}function I1(t,s){const{start:r,end:n}=m0(s==null?void 0:s.in,t);let a=+r>+n;const l=a?+r:+n,o=a?n:r;o.setHours(0,0,0,0),o.setDate(1);let i=1;const c=[];for(;+o<=l;)c.push(os(r,o)),o.setMonth(o.getMonth()+i);return a?c.reverse():c}function M1(t,s){const r=Tt(t,s==null?void 0:s.in);return r.setDate(1),r.setHours(0,0,0,0),r}function R1(t,s){const r=Tt(t,s==null?void 0:s.in),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function h0(t,s){const r=Tt(t,s==null?void 0:s.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function O1(t,s){const{start:r,end:n}=m0(s==null?void 0:s.in,t);let a=+r>+n;const l=a?+r:+n,o=a?n:r;o.setHours(0,0,0,0),o.setMonth(0,1);let i=1;const c=[];for(;+o<=l;)c.push(os(r,o)),o.setFullYear(o.getFullYear()+i);return a?c.reverse():c}function f0(t,s){var i,c,h,p;const r=Bl(),n=(s==null?void 0:s.weekStartsOn)??((c=(i=s==null?void 0:s.locale)==null?void 0:i.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??0,a=Tt(t,s==null?void 0:s.in),l=a.getDay(),o=(l<n?-7:0)+6-(l-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function P1(t,s){return f0(t,{...s,weekStartsOn:1})}const F1={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},U1=(t,s,r)=>{let n;const a=F1[t];return typeof a=="string"?n=a:s===1?n=a.one:n=a.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Hc(t){return(s={})=>{const r=s.width?String(s.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const $1={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},H1={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},B1={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},z1={date:Hc({formats:$1,defaultWidth:"full"}),time:Hc({formats:H1,defaultWidth:"full"}),dateTime:Hc({formats:B1,defaultWidth:"full"})},W1={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},V1=(t,s,r,n)=>W1[t];function Ba(t){return(s,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,i=r!=null&&r.width?String(r.width):o;a=t.formattingValues[i]||t.formattingValues[o]}else{const o=t.defaultWidth,i=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[i]||t.values[o]}const l=t.argumentCallback?t.argumentCallback(s):s;return a[l]}}const Y1={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},q1={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},K1={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},G1={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Q1={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Z1={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},J1=(t,s)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},X1={ordinalNumber:J1,era:Ba({values:Y1,defaultWidth:"wide"}),quarter:Ba({values:q1,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ba({values:K1,defaultWidth:"wide"}),day:Ba({values:G1,defaultWidth:"wide"}),dayPeriod:Ba({values:Q1,defaultWidth:"wide",formattingValues:Z1,defaultFormattingWidth:"wide"})};function za(t){return(s,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],l=s.match(a);if(!l)return null;const o=l[0],i=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(i)?t2(i,m=>m.test(o)):e2(i,m=>m.test(o));let h;h=t.valueCallback?t.valueCallback(c):c,h=r.valueCallback?r.valueCallback(h):h;const p=s.slice(o.length);return{value:h,rest:p}}}function e2(t,s){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&s(t[r]))return r}function t2(t,s){for(let r=0;r<t.length;r++)if(s(t[r]))return r}function s2(t){return(s,r={})=>{const n=s.match(t.matchPattern);if(!n)return null;const a=n[0],l=s.match(t.parsePattern);if(!l)return null;let o=t.valueCallback?t.valueCallback(l[0]):l[0];o=r.valueCallback?r.valueCallback(o):o;const i=s.slice(a.length);return{value:o,rest:i}}}const r2=/^(\d+)(th|st|nd|rd)?/i,n2=/\d+/i,a2={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},l2={any:[/^b/i,/^(a|c)/i]},o2={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},i2={any:[/1/i,/2/i,/3/i,/4/i]},c2={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},d2={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},u2={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},m2={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},h2={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},f2={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},p2={ordinalNumber:s2({matchPattern:r2,parsePattern:n2,valueCallback:t=>parseInt(t,10)}),era:za({matchPatterns:a2,defaultMatchWidth:"wide",parsePatterns:l2,defaultParseWidth:"any"}),quarter:za({matchPatterns:o2,defaultMatchWidth:"wide",parsePatterns:i2,defaultParseWidth:"any",valueCallback:t=>t+1}),month:za({matchPatterns:c2,defaultMatchWidth:"wide",parsePatterns:d2,defaultParseWidth:"any"}),day:za({matchPatterns:u2,defaultMatchWidth:"wide",parsePatterns:m2,defaultParseWidth:"any"}),dayPeriod:za({matchPatterns:h2,defaultMatchWidth:"any",parsePatterns:f2,defaultParseWidth:"any"})},am={code:"en-US",formatDistance:U1,formatLong:z1,formatRelative:V1,localize:X1,match:p2,options:{weekStartsOn:0,firstWeekContainsDate:1}};function x2(t,s){const r=Tt(t,s==null?void 0:s.in);return d0(r,h0(r))+1}function p0(t,s){const r=Tt(t,s==null?void 0:s.in),n=+kl(r)-+E1(r);return Math.round(n/l0)+1}function x0(t,s){var p,m,u,x;const r=Tt(t,s==null?void 0:s.in),n=r.getFullYear(),a=Bl(),l=(s==null?void 0:s.firstWeekContainsDate)??((m=(p=s==null?void 0:s.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((x=(u=a.locale)==null?void 0:u.options)==null?void 0:x.firstWeekContainsDate)??1,o=os((s==null?void 0:s.in)||t,0);o.setFullYear(n+1,0,l),o.setHours(0,0,0,0);const i=ha(o,s),c=os((s==null?void 0:s.in)||t,0);c.setFullYear(n,0,l),c.setHours(0,0,0,0);const h=ha(c,s);return+r>=+i?n+1:+r>=+h?n:n-1}function g2(t,s){var i,c,h,p;const r=Bl(),n=(s==null?void 0:s.firstWeekContainsDate)??((c=(i=s==null?void 0:s.locale)==null?void 0:i.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,a=x0(t,s),l=os((s==null?void 0:s.in)||t,0);return l.setFullYear(a,0,n),l.setHours(0,0,0,0),ha(l,s)}function g0(t,s){const r=Tt(t,s==null?void 0:s.in),n=+ha(r,s)-+g2(r,s);return Math.round(n/l0)+1}function Dt(t,s){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(s,"0");return r+n}const Pr={y(t,s){const r=t.getFullYear(),n=r>0?r:1-r;return Dt(s==="yy"?n%100:n,s.length)},M(t,s){const r=t.getMonth();return s==="M"?String(r+1):Dt(r+1,2)},d(t,s){return Dt(t.getDate(),s.length)},a(t,s){const r=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,s){return Dt(t.getHours()%12||12,s.length)},H(t,s){return Dt(t.getHours(),s.length)},m(t,s){return Dt(t.getMinutes(),s.length)},s(t,s){return Dt(t.getSeconds(),s.length)},S(t,s){const r=s.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Dt(a,s.length)}},Fn={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ef={G:function(t,s,r){const n=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,s,r){if(s==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Pr.y(t,s)},Y:function(t,s,r,n){const a=x0(t,n),l=a>0?a:1-a;if(s==="YY"){const o=l%100;return Dt(o,2)}return s==="Yo"?r.ordinalNumber(l,{unit:"year"}):Dt(l,s.length)},R:function(t,s){const r=c0(t);return Dt(r,s.length)},u:function(t,s){const r=t.getFullYear();return Dt(r,s.length)},Q:function(t,s,r){const n=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(n);case"QQ":return Dt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,s,r){const n=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(n);case"qq":return Dt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,s,r){const n=t.getMonth();switch(s){case"M":case"MM":return Pr.M(t,s);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,s,r){const n=t.getMonth();switch(s){case"L":return String(n+1);case"LL":return Dt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,s,r,n){const a=g0(t,n);return s==="wo"?r.ordinalNumber(a,{unit:"week"}):Dt(a,s.length)},I:function(t,s,r){const n=p0(t);return s==="Io"?r.ordinalNumber(n,{unit:"week"}):Dt(n,s.length)},d:function(t,s,r){return s==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Pr.d(t,s)},D:function(t,s,r){const n=x2(t);return s==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Dt(n,s.length)},E:function(t,s,r){const n=t.getDay();switch(s){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,s,r,n){const a=t.getDay(),l=(a-n.weekStartsOn+8)%7||7;switch(s){case"e":return String(l);case"ee":return Dt(l,2);case"eo":return r.ordinalNumber(l,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,s,r,n){const a=t.getDay(),l=(a-n.weekStartsOn+8)%7||7;switch(s){case"c":return String(l);case"cc":return Dt(l,s.length);case"co":return r.ordinalNumber(l,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,s,r){const n=t.getDay(),a=n===0?7:n;switch(s){case"i":return String(a);case"ii":return Dt(a,s.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,s,r){const a=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,s,r){const n=t.getHours();let a;switch(n===12?a=Fn.noon:n===0?a=Fn.midnight:a=n/12>=1?"pm":"am",s){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,s,r){const n=t.getHours();let a;switch(n>=17?a=Fn.evening:n>=12?a=Fn.afternoon:n>=4?a=Fn.morning:a=Fn.night,s){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,s,r){if(s==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Pr.h(t,s)},H:function(t,s,r){return s==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Pr.H(t,s)},K:function(t,s,r){const n=t.getHours()%12;return s==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Dt(n,s.length)},k:function(t,s,r){let n=t.getHours();return n===0&&(n=24),s==="ko"?r.ordinalNumber(n,{unit:"hour"}):Dt(n,s.length)},m:function(t,s,r){return s==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Pr.m(t,s)},s:function(t,s,r){return s==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Pr.s(t,s)},S:function(t,s){return Pr.S(t,s)},X:function(t,s,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(s){case"X":return sf(n);case"XXXX":case"XX":return dn(n);case"XXXXX":case"XXX":default:return dn(n,":")}},x:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"x":return sf(n);case"xxxx":case"xx":return dn(n);case"xxxxx":case"xxx":default:return dn(n,":")}},O:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+tf(n,":");case"OOOO":default:return"GMT"+dn(n,":")}},z:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+tf(n,":");case"zzzz":default:return"GMT"+dn(n,":")}},t:function(t,s,r){const n=Math.trunc(+t/1e3);return Dt(n,s.length)},T:function(t,s,r){return Dt(+t,s.length)}};function tf(t,s=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),l=n%60;return l===0?r+String(a):r+String(a)+s+Dt(l,2)}function sf(t,s){return t%60===0?(t>0?"-":"+")+Dt(Math.abs(t)/60,2):dn(t,s)}function dn(t,s=""){const r=t>0?"-":"+",n=Math.abs(t),a=Dt(Math.trunc(n/60),2),l=Dt(n%60,2);return r+a+s+l}const rf=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},y0=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},y2=(t,s)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return rf(t,s);let l;switch(n){case"P":l=s.dateTime({width:"short"});break;case"PP":l=s.dateTime({width:"medium"});break;case"PPP":l=s.dateTime({width:"long"});break;case"PPPP":default:l=s.dateTime({width:"full"});break}return l.replace("{{date}}",rf(n,s)).replace("{{time}}",y0(a,s))},b2={p:y0,P:y2},v2=/^D+$/,j2=/^Y+$/,N2=["D","DD","YY","YYYY"];function w2(t){return v2.test(t)}function E2(t){return j2.test(t)}function S2(t,s,r){const n=_2(t,s,r);if(console.warn(n),N2.includes(t))throw new RangeError(n)}function _2(t,s,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const C2=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,k2=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,D2=/^'([^]*?)'?$/,A2=/''/g,T2=/[a-zA-Z]/;function L2(t,s,r){var p,m,u,x,j,v,N,f;const n=Bl(),a=(r==null?void 0:r.locale)??n.locale??am,l=(r==null?void 0:r.firstWeekContainsDate)??((m=(p=r==null?void 0:r.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((x=(u=n.locale)==null?void 0:u.options)==null?void 0:x.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((v=(j=r==null?void 0:r.locale)==null?void 0:j.options)==null?void 0:v.weekStartsOn)??n.weekStartsOn??((f=(N=n.locale)==null?void 0:N.options)==null?void 0:f.weekStartsOn)??0,i=Tt(t,r==null?void 0:r.in);if(!A1(i))throw new RangeError("Invalid time value");let c=s.match(k2).map(d=>{const g=d[0];if(g==="p"||g==="P"){const b=b2[g];return b(d,a.formatLong)}return d}).join("").match(C2).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const g=d[0];if(g==="'")return{isToken:!1,value:I2(d)};if(ef[g])return{isToken:!0,value:d};if(g.match(T2))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:d}});a.localize.preprocessor&&(c=a.localize.preprocessor(i,c));const h={firstWeekContainsDate:l,weekStartsOn:o,locale:a};return c.map(d=>{if(!d.isToken)return d.value;const g=d.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&E2(g)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&w2(g))&&S2(g,s,String(t));const b=ef[g[0]];return b(i,g,a.localize,h)}).join("")}function I2(t){const s=t.match(D2);return s?s[1].replace(A2,"'"):t}function M2(t,s){const r=Tt(t,s==null?void 0:s.in),n=r.getFullYear(),a=r.getMonth(),l=os(r,0);return l.setFullYear(n,a+1,0),l.setHours(0,0,0,0),l.getDate()}function R2(t,s){return Tt(t,s==null?void 0:s.in).getMonth()}function O2(t,s){return Tt(t,s==null?void 0:s.in).getFullYear()}function P2(t,s){return+Tt(t)>+Tt(s)}function F2(t,s){return+Tt(t)<+Tt(s)}function U2(t,s,r){const[n,a]=va(r==null?void 0:r.in,t,s);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()}function $2(t,s,r){const[n,a]=va(r==null?void 0:r.in,t,s);return n.getFullYear()===a.getFullYear()}function H2(t,s,r){const n=Tt(t,r==null?void 0:r.in),a=n.getFullYear(),l=n.getDate(),o=os(t,0);o.setFullYear(a,s,15),o.setHours(0,0,0,0);const i=M2(o);return n.setMonth(s,Math.min(l,i)),n}function B2(t,s,r){const n=Tt(t,r==null?void 0:r.in);return isNaN(+n)?os(t,NaN):(n.setFullYear(s),n)}const nf=5,z2=4;function W2(t,s){const r=s.startOfMonth(t),n=r.getDay()>0?r.getDay():7,a=s.addDays(t,-n+1),l=s.addDays(a,nf*7-1);return s.getMonth(t)===s.getMonth(l)?nf:z2}function b0(t,s){const r=s.startOfMonth(t),n=r.getDay();return n===1?r:n===0?s.addDays(r,-1*6):s.addDays(r,-1*(n-1))}function V2(t,s){const r=b0(t,s),n=W2(t,s);return s.addDays(r,n*7-1)}class Bs{constructor(s,r){this.Date=Date,this.today=()=>{var n;return(n=this.overrides)!=null&&n.today?this.overrides.today():this.options.timeZone?bs.tz(this.options.timeZone):new this.Date},this.newDate=(n,a,l)=>{var o;return(o=this.overrides)!=null&&o.newDate?this.overrides.newDate(n,a,l):this.options.timeZone?new bs(n,a,l,this.options.timeZone):new Date(n,a,l)},this.addDays=(n,a)=>{var l;return(l=this.overrides)!=null&&l.addDays?this.overrides.addDays(n,a):o0(n,a)},this.addMonths=(n,a)=>{var l;return(l=this.overrides)!=null&&l.addMonths?this.overrides.addMonths(n,a):i0(n,a)},this.addWeeks=(n,a)=>{var l;return(l=this.overrides)!=null&&l.addWeeks?this.overrides.addWeeks(n,a):S1(n,a)},this.addYears=(n,a)=>{var l;return(l=this.overrides)!=null&&l.addYears?this.overrides.addYears(n,a):_1(n,a)},this.differenceInCalendarDays=(n,a)=>{var l;return(l=this.overrides)!=null&&l.differenceInCalendarDays?this.overrides.differenceInCalendarDays(n,a):d0(n,a)},this.differenceInCalendarMonths=(n,a)=>{var l;return(l=this.overrides)!=null&&l.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(n,a):T1(n,a)},this.eachMonthOfInterval=n=>{var a;return(a=this.overrides)!=null&&a.eachMonthOfInterval?this.overrides.eachMonthOfInterval(n):I1(n)},this.eachYearOfInterval=n=>{var i;const a=(i=this.overrides)!=null&&i.eachYearOfInterval?this.overrides.eachYearOfInterval(n):O1(n),l=new Set(a.map(c=>this.getYear(c)));if(l.size===a.length)return a;const o=[];return l.forEach(c=>{o.push(new Date(c,0,1))}),o},this.endOfBroadcastWeek=n=>{var a;return(a=this.overrides)!=null&&a.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(n):V2(n,this)},this.endOfISOWeek=n=>{var a;return(a=this.overrides)!=null&&a.endOfISOWeek?this.overrides.endOfISOWeek(n):P1(n)},this.endOfMonth=n=>{var a;return(a=this.overrides)!=null&&a.endOfMonth?this.overrides.endOfMonth(n):L1(n)},this.endOfWeek=(n,a)=>{var l;return(l=this.overrides)!=null&&l.endOfWeek?this.overrides.endOfWeek(n,a):f0(n,this.options)},this.endOfYear=n=>{var a;return(a=this.overrides)!=null&&a.endOfYear?this.overrides.endOfYear(n):R1(n)},this.format=(n,a,l)=>{var i;const o=(i=this.overrides)!=null&&i.format?this.overrides.format(n,a,this.options):L2(n,a,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(o):o},this.getISOWeek=n=>{var a;return(a=this.overrides)!=null&&a.getISOWeek?this.overrides.getISOWeek(n):p0(n)},this.getMonth=(n,a)=>{var l;return(l=this.overrides)!=null&&l.getMonth?this.overrides.getMonth(n,this.options):R2(n,this.options)},this.getYear=(n,a)=>{var l;return(l=this.overrides)!=null&&l.getYear?this.overrides.getYear(n,this.options):O2(n,this.options)},this.getWeek=(n,a)=>{var l;return(l=this.overrides)!=null&&l.getWeek?this.overrides.getWeek(n,this.options):g0(n,this.options)},this.isAfter=(n,a)=>{var l;return(l=this.overrides)!=null&&l.isAfter?this.overrides.isAfter(n,a):P2(n,a)},this.isBefore=(n,a)=>{var l;return(l=this.overrides)!=null&&l.isBefore?this.overrides.isBefore(n,a):F2(n,a)},this.isDate=n=>{var a;return(a=this.overrides)!=null&&a.isDate?this.overrides.isDate(n):u0(n)},this.isSameDay=(n,a)=>{var l;return(l=this.overrides)!=null&&l.isSameDay?this.overrides.isSameDay(n,a):D1(n,a)},this.isSameMonth=(n,a)=>{var l;return(l=this.overrides)!=null&&l.isSameMonth?this.overrides.isSameMonth(n,a):U2(n,a)},this.isSameYear=(n,a)=>{var l;return(l=this.overrides)!=null&&l.isSameYear?this.overrides.isSameYear(n,a):$2(n,a)},this.max=n=>{var a;return(a=this.overrides)!=null&&a.max?this.overrides.max(n):C1(n)},this.min=n=>{var a;return(a=this.overrides)!=null&&a.min?this.overrides.min(n):k1(n)},this.setMonth=(n,a)=>{var l;return(l=this.overrides)!=null&&l.setMonth?this.overrides.setMonth(n,a):H2(n,a)},this.setYear=(n,a)=>{var l;return(l=this.overrides)!=null&&l.setYear?this.overrides.setYear(n,a):B2(n,a)},this.startOfBroadcastWeek=(n,a)=>{var l;return(l=this.overrides)!=null&&l.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(n,this):b0(n,this)},this.startOfDay=n=>{var a;return(a=this.overrides)!=null&&a.startOfDay?this.overrides.startOfDay(n):Dl(n)},this.startOfISOWeek=n=>{var a;return(a=this.overrides)!=null&&a.startOfISOWeek?this.overrides.startOfISOWeek(n):kl(n)},this.startOfMonth=n=>{var a;return(a=this.overrides)!=null&&a.startOfMonth?this.overrides.startOfMonth(n):M1(n)},this.startOfWeek=(n,a)=>{var l;return(l=this.overrides)!=null&&l.startOfWeek?this.overrides.startOfWeek(n,this.options):ha(n,this.options)},this.startOfYear=n=>{var a;return(a=this.overrides)!=null&&a.startOfYear?this.overrides.startOfYear(n):h0(n)},this.options={locale:am,...s},this.overrides=r}getDigitMap(){const{numerals:s="latn"}=this.options,r=new Intl.NumberFormat("en-US",{numberingSystem:s}),n={};for(let a=0;a<10;a++)n[a.toString()]=r.format(a);return n}replaceDigits(s){const r=this.getDigitMap();return s.replace(/\d/g,n=>r[n]||n)}formatNumber(s){return this.replaceDigits(s.toString())}getMonthYearOrder(){var r;const s=(r=this.options.locale)==null?void 0:r.code;return s&&Bs.yearFirstLocales.has(s)?"year-first":"month-first"}formatMonthYear(s){const{locale:r,timeZone:n,numerals:a}=this.options,l=r==null?void 0:r.code;if(l&&Bs.yearFirstLocales.has(l))try{return new Intl.DateTimeFormat(l,{month:"long",year:"numeric",timeZone:n,numberingSystem:a}).format(s)}catch{}const o=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(s,o)}}Bs.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const gr=new Bs;class v0{constructor(s,r,n=gr){this.date=s,this.displayMonth=r,this.outside=!!(r&&!n.isSameMonth(s,r)),this.dateLib=n}isEqualTo(s){return this.dateLib.isSameDay(s.date,this.date)&&this.dateLib.isSameMonth(s.displayMonth,this.displayMonth)}}class Y2{constructor(s,r){this.date=s,this.weeks=r}}class q2{constructor(s,r){this.days=r,this.weekNumber=s}}function K2(t){return st.createElement("button",{...t})}function G2(t){return st.createElement("span",{...t})}function Q2(t){const{size:s=24,orientation:r="left",className:n}=t;return st.createElement("svg",{className:n,width:s,height:s,viewBox:"0 0 24 24"},r==="up"&&st.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),r==="down"&&st.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),r==="left"&&st.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),r==="right"&&st.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function Z2(t){const{day:s,modifiers:r,...n}=t;return st.createElement("td",{...n})}function J2(t){const{day:s,modifiers:r,...n}=t,a=st.useRef(null);return st.useEffect(()=>{var l;r.focused&&((l=a.current)==null||l.focus())},[r.focused]),st.createElement("button",{ref:a,...n})}var xt;(function(t){t.Root="root",t.Chevron="chevron",t.Day="day",t.DayButton="day_button",t.CaptionLabel="caption_label",t.Dropdowns="dropdowns",t.Dropdown="dropdown",t.DropdownRoot="dropdown_root",t.Footer="footer",t.MonthGrid="month_grid",t.MonthCaption="month_caption",t.MonthsDropdown="months_dropdown",t.Month="month",t.Months="months",t.Nav="nav",t.NextMonthButton="button_next",t.PreviousMonthButton="button_previous",t.Week="week",t.Weeks="weeks",t.Weekday="weekday",t.Weekdays="weekdays",t.WeekNumber="week_number",t.WeekNumberHeader="week_number_header",t.YearsDropdown="years_dropdown"})(xt||(xt={}));var Yt;(function(t){t.disabled="disabled",t.hidden="hidden",t.outside="outside",t.focused="focused",t.today="today"})(Yt||(Yt={}));var tr;(function(t){t.range_end="range_end",t.range_middle="range_middle",t.range_start="range_start",t.selected="selected"})(tr||(tr={}));var Ps;(function(t){t.weeks_before_enter="weeks_before_enter",t.weeks_before_exit="weeks_before_exit",t.weeks_after_enter="weeks_after_enter",t.weeks_after_exit="weeks_after_exit",t.caption_after_enter="caption_after_enter",t.caption_after_exit="caption_after_exit",t.caption_before_enter="caption_before_enter",t.caption_before_exit="caption_before_exit"})(Ps||(Ps={}));function X2(t){const{options:s,className:r,components:n,classNames:a,...l}=t,o=[a[xt.Dropdown],r].join(" "),i=s==null?void 0:s.find(({value:c})=>c===l.value);return st.createElement("span",{"data-disabled":l.disabled,className:a[xt.DropdownRoot]},st.createElement(n.Select,{className:o,...l},s==null?void 0:s.map(({value:c,label:h,disabled:p})=>st.createElement(n.Option,{key:c,value:c,disabled:p},h))),st.createElement("span",{className:a[xt.CaptionLabel],"aria-hidden":!0},i==null?void 0:i.label,st.createElement(n.Chevron,{orientation:"down",size:18,className:a[xt.Chevron]})))}function ew(t){return st.createElement("div",{...t})}function tw(t){return st.createElement("div",{...t})}function sw(t){const{calendarMonth:s,displayIndex:r,...n}=t;return st.createElement("div",{...n},t.children)}function rw(t){const{calendarMonth:s,displayIndex:r,...n}=t;return st.createElement("div",{...n})}function nw(t){return st.createElement("table",{...t})}function aw(t){return st.createElement("div",{...t})}const j0=y.createContext(void 0);function zl(){const t=y.useContext(j0);if(t===void 0)throw new Error("useDayPicker() must be used within a custom component.");return t}function lw(t){const{components:s}=zl();return st.createElement(s.Dropdown,{...t})}function ow(t){const{onPreviousClick:s,onNextClick:r,previousMonth:n,nextMonth:a,...l}=t,{components:o,classNames:i,labels:{labelPrevious:c,labelNext:h}}=zl(),p=y.useCallback(u=>{a&&(r==null||r(u))},[a,r]),m=y.useCallback(u=>{n&&(s==null||s(u))},[n,s]);return st.createElement("nav",{...l},st.createElement(o.PreviousMonthButton,{type:"button",className:i[xt.PreviousMonthButton],tabIndex:n?void 0:-1,"aria-disabled":n?void 0:!0,"aria-label":c(n),onClick:m},st.createElement(o.Chevron,{disabled:n?void 0:!0,className:i[xt.Chevron],orientation:"left"})),st.createElement(o.NextMonthButton,{type:"button",className:i[xt.NextMonthButton],tabIndex:a?void 0:-1,"aria-disabled":a?void 0:!0,"aria-label":h(a),onClick:p},st.createElement(o.Chevron,{disabled:a?void 0:!0,orientation:"right",className:i[xt.Chevron]})))}function iw(t){const{components:s}=zl();return st.createElement(s.Button,{...t})}function cw(t){return st.createElement("option",{...t})}function dw(t){const{components:s}=zl();return st.createElement(s.Button,{...t})}function uw(t){const{rootRef:s,...r}=t;return st.createElement("div",{...r,ref:s})}function mw(t){return st.createElement("select",{...t})}function hw(t){const{week:s,...r}=t;return st.createElement("tr",{...r})}function fw(t){return st.createElement("th",{...t})}function pw(t){return st.createElement("thead",{"aria-hidden":!0},st.createElement("tr",{...t}))}function xw(t){const{week:s,...r}=t;return st.createElement("th",{...r})}function gw(t){return st.createElement("th",{...t})}function yw(t){return st.createElement("tbody",{...t})}function bw(t){const{components:s}=zl();return st.createElement(s.Dropdown,{...t})}const vw=Object.freeze(Object.defineProperty({__proto__:null,Button:K2,CaptionLabel:G2,Chevron:Q2,Day:Z2,DayButton:J2,Dropdown:X2,DropdownNav:ew,Footer:tw,Month:sw,MonthCaption:rw,MonthGrid:nw,Months:aw,MonthsDropdown:lw,Nav:ow,NextMonthButton:iw,Option:cw,PreviousMonthButton:dw,Root:uw,Select:mw,Week:hw,WeekNumber:xw,WeekNumberHeader:gw,Weekday:fw,Weekdays:pw,Weeks:yw,YearsDropdown:bw},Symbol.toStringTag,{value:"Module"}));function _r(t,s,r=!1,n=gr){let{from:a,to:l}=t;const{differenceInCalendarDays:o,isSameDay:i}=n;return a&&l?(o(l,a)<0&&([a,l]=[l,a]),o(s,a)>=(r?1:0)&&o(l,s)>=(r?1:0)):!r&&l?i(l,s):!r&&a?i(a,s):!1}function N0(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function lm(t){return!!(t&&typeof t=="object"&&"from"in t)}function w0(t){return!!(t&&typeof t=="object"&&"after"in t)}function E0(t){return!!(t&&typeof t=="object"&&"before"in t)}function S0(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function _0(t,s){return Array.isArray(t)&&t.every(s.isDate)}function Cr(t,s,r=gr){const n=Array.isArray(s)?s:[s],{isSameDay:a,differenceInCalendarDays:l,isAfter:o}=r;return n.some(i=>{if(typeof i=="boolean")return i;if(r.isDate(i))return a(t,i);if(_0(i,r))return i.includes(t);if(lm(i))return _r(i,t,!1,r);if(S0(i))return Array.isArray(i.dayOfWeek)?i.dayOfWeek.includes(t.getDay()):i.dayOfWeek===t.getDay();if(N0(i)){const c=l(i.before,t),h=l(i.after,t),p=c>0,m=h<0;return o(i.before,i.after)?m&&p:p||m}return w0(i)?l(t,i.after)>0:E0(i)?l(i.before,t)>0:typeof i=="function"?i(t):!1})}function jw(t,s,r,n,a){const{disabled:l,hidden:o,modifiers:i,showOutsideDays:c,broadcastCalendar:h,today:p}=s,{isSameDay:m,isSameMonth:u,startOfMonth:x,isBefore:j,endOfMonth:v,isAfter:N}=a,f=r&&x(r),d=n&&v(n),g={[Yt.focused]:[],[Yt.outside]:[],[Yt.disabled]:[],[Yt.hidden]:[],[Yt.today]:[]},b={};for(const E of t){const{date:R,displayMonth:S}=E,k=!!(S&&!u(R,S)),L=!!(f&&j(R,f)),A=!!(d&&N(R,d)),D=!!(l&&Cr(R,l,a)),I=!!(o&&Cr(R,o,a))||L||A||!h&&!c&&k||h&&c===!1&&k,O=m(R,p??a.today());k&&g.outside.push(E),D&&g.disabled.push(E),I&&g.hidden.push(E),O&&g.today.push(E),i&&Object.keys(i).forEach(C=>{const F=i==null?void 0:i[C];F&&Cr(R,F,a)&&(b[C]?b[C].push(E):b[C]=[E])})}return E=>{const R={[Yt.focused]:!1,[Yt.disabled]:!1,[Yt.hidden]:!1,[Yt.outside]:!1,[Yt.today]:!1},S={};for(const k in g){const L=g[k];R[k]=L.some(A=>A===E)}for(const k in b)S[k]=b[k].some(L=>L===E);return{...R,...S}}}function Nw(t,s,r={}){return Object.entries(t).filter(([,a])=>a===!0).reduce((a,[l])=>(r[l]?a.push(r[l]):s[Yt[l]]?a.push(s[Yt[l]]):s[tr[l]]&&a.push(s[tr[l]]),a),[s[xt.Day]])}function ww(t){return{...vw,...t}}function Ew(t){const s={"data-mode":t.mode??void 0,"data-required":"required"in t?t.required:void 0,"data-multiple-months":t.numberOfMonths&&t.numberOfMonths>1||void 0,"data-week-numbers":t.showWeekNumber||void 0,"data-broadcast-calendar":t.broadcastCalendar||void 0,"data-nav-layout":t.navLayout||void 0};return Object.entries(t).forEach(([r,n])=>{r.startsWith("data-")&&(s[r]=n)}),s}function Sw(){const t={};for(const s in xt)t[xt[s]]=`rdp-${xt[s]}`;for(const s in Yt)t[Yt[s]]=`rdp-${Yt[s]}`;for(const s in tr)t[tr[s]]=`rdp-${tr[s]}`;for(const s in Ps)t[Ps[s]]=`rdp-${Ps[s]}`;return t}function C0(t,s,r){return(r??new Bs(s)).formatMonthYear(t)}const _w=C0;function Cw(t,s,r){return(r??new Bs(s)).format(t,"d")}function kw(t,s=gr){return s.format(t,"LLLL")}function Dw(t,s,r){return(r??new Bs(s)).format(t,"cccccc")}function Aw(t,s=gr){return t<10?s.formatNumber(`0${t.toLocaleString()}`):s.formatNumber(`${t.toLocaleString()}`)}function Tw(){return""}function k0(t,s=gr){return s.format(t,"yyyy")}const Lw=k0,Iw=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:C0,formatDay:Cw,formatMonthCaption:_w,formatMonthDropdown:kw,formatWeekNumber:Aw,formatWeekNumberHeader:Tw,formatWeekdayName:Dw,formatYearCaption:Lw,formatYearDropdown:k0},Symbol.toStringTag,{value:"Module"}));function Mw(t){return t!=null&&t.formatMonthCaption&&!t.formatCaption&&(t.formatCaption=t.formatMonthCaption),t!=null&&t.formatYearCaption&&!t.formatYearDropdown&&(t.formatYearDropdown=t.formatYearCaption),{...Iw,...t}}function Rw(t,s,r,n,a){const{startOfMonth:l,startOfYear:o,endOfYear:i,eachMonthOfInterval:c,getMonth:h}=a;return c({start:o(t),end:i(t)}).map(u=>{const x=n.formatMonthDropdown(u,a),j=h(u),v=s&&u<l(s)||r&&u>l(r)||!1;return{value:j,label:x,disabled:v}})}function Ow(t,s={},r={}){let n={...s==null?void 0:s[xt.Day]};return Object.entries(t).filter(([,a])=>a===!0).forEach(([a])=>{n={...n,...r==null?void 0:r[a]}}),n}function Pw(t,s,r){const n=t.today(),a=s?t.startOfISOWeek(n):t.startOfWeek(n),l=[];for(let o=0;o<7;o++){const i=t.addDays(a,o);l.push(i)}return l}function Fw(t,s,r,n,a=!1){if(!t||!s)return;const{startOfYear:l,endOfYear:o,eachYearOfInterval:i,getYear:c}=n,h=l(t),p=o(s),m=i({start:h,end:p});return a&&m.reverse(),m.map(u=>{const x=r.formatYearDropdown(u,n);return{value:c(u),label:x,disabled:!1}})}function D0(t,s,r,n){let a=(n??new Bs(r)).format(t,"PPPP");return s.today&&(a=`Today, ${a}`),s.selected&&(a=`${a}, selected`),a}const Uw=D0;function A0(t,s,r){return(r??new Bs(s)).formatMonthYear(t)}const $w=A0;function Hw(t,s,r,n){let a=(n??new Bs(r)).format(t,"PPPP");return s!=null&&s.today&&(a=`Today, ${a}`),a}function Bw(t){return"Choose the Month"}function zw(){return""}function Ww(t){return"Go to the Next Month"}function Vw(t){return"Go to the Previous Month"}function Yw(t,s,r){return(r??new Bs(s)).format(t,"cccc")}function qw(t,s){return`Week ${t}`}function Kw(t){return"Week Number"}function Gw(t){return"Choose the Year"}const Qw=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:$w,labelDay:Uw,labelDayButton:D0,labelGrid:A0,labelGridcell:Hw,labelMonthDropdown:Bw,labelNav:zw,labelNext:Ww,labelPrevious:Vw,labelWeekNumber:qw,labelWeekNumberHeader:Kw,labelWeekday:Yw,labelYearDropdown:Gw},Symbol.toStringTag,{value:"Module"})),Wl=t=>t instanceof HTMLElement?t:null,Bc=t=>[...t.querySelectorAll("[data-animated-month]")??[]],Zw=t=>Wl(t.querySelector("[data-animated-month]")),zc=t=>Wl(t.querySelector("[data-animated-caption]")),Wc=t=>Wl(t.querySelector("[data-animated-weeks]")),Jw=t=>Wl(t.querySelector("[data-animated-nav]")),Xw=t=>Wl(t.querySelector("[data-animated-weekdays]"));function eE(t,s,{classNames:r,months:n,focused:a,dateLib:l}){const o=y.useRef(null),i=y.useRef(n),c=y.useRef(!1);y.useLayoutEffect(()=>{const h=i.current;if(i.current=n,!s||!t.current||!(t.current instanceof HTMLElement)||n.length===0||h.length===0||n.length!==h.length)return;const p=l.isSameMonth(n[0].date,h[0].date),m=l.isAfter(n[0].date,h[0].date),u=m?r[Ps.caption_after_enter]:r[Ps.caption_before_enter],x=m?r[Ps.weeks_after_enter]:r[Ps.weeks_before_enter],j=o.current,v=t.current.cloneNode(!0);if(v instanceof HTMLElement?(Bc(v).forEach(g=>{if(!(g instanceof HTMLElement))return;const b=Zw(g);b&&g.contains(b)&&g.removeChild(b);const E=zc(g);E&&E.classList.remove(u);const R=Wc(g);R&&R.classList.remove(x)}),o.current=v):o.current=null,c.current||p||a)return;const N=j instanceof HTMLElement?Bc(j):[],f=Bc(t.current);if(f!=null&&f.every(d=>d instanceof HTMLElement)&&N&&N.every(d=>d instanceof HTMLElement)){c.current=!0,t.current.style.isolation="isolate";const d=Jw(t.current);d&&(d.style.zIndex="1"),f.forEach((g,b)=>{const E=N[b];if(!E)return;g.style.position="relative",g.style.overflow="hidden";const R=zc(g);R&&R.classList.add(u);const S=Wc(g);S&&S.classList.add(x);const k=()=>{c.current=!1,t.current&&(t.current.style.isolation=""),d&&(d.style.zIndex=""),R&&R.classList.remove(u),S&&S.classList.remove(x),g.style.position="",g.style.overflow="",g.contains(E)&&g.removeChild(E)};E.style.pointerEvents="none",E.style.position="absolute",E.style.overflow="hidden",E.setAttribute("aria-hidden","true");const L=Xw(E);L&&(L.style.opacity="0");const A=zc(E);A&&(A.classList.add(m?r[Ps.caption_before_exit]:r[Ps.caption_after_exit]),A.addEventListener("animationend",k));const D=Wc(E);D&&D.classList.add(m?r[Ps.weeks_before_exit]:r[Ps.weeks_after_exit]),g.insertBefore(E,g.firstChild)})}})}function tE(t,s,r,n){const a=t[0],l=t[t.length-1],{ISOWeek:o,fixedWeeks:i,broadcastCalendar:c}=r??{},{addDays:h,differenceInCalendarDays:p,differenceInCalendarMonths:m,endOfBroadcastWeek:u,endOfISOWeek:x,endOfMonth:j,endOfWeek:v,isAfter:N,startOfBroadcastWeek:f,startOfISOWeek:d,startOfWeek:g}=n,b=c?f(a,n):o?d(a):g(a),E=c?u(l):o?x(j(l)):v(j(l)),R=p(E,b),S=m(l,a)+1,k=[];for(let D=0;D<=R;D++){const I=h(b,D);if(s&&N(I,s))break;k.push(I)}const A=(c?35:42)*S;if(i&&k.length<A){const D=A-k.length;for(let I=0;I<D;I++){const O=h(k[k.length-1],1);k.push(O)}}return k}function sE(t){const s=[];return t.reduce((r,n)=>{const a=n.weeks.reduce((l,o)=>l.concat(o.days.slice()),s.slice());return r.concat(a.slice())},s.slice())}function rE(t,s,r,n){const{numberOfMonths:a=1}=r,l=[];for(let o=0;o<a;o++){const i=n.addMonths(t,o);if(s&&i>s)break;l.push(i)}return l}function af(t,s,r,n){const{month:a,defaultMonth:l,today:o=n.today(),numberOfMonths:i=1}=t;let c=a||l||o;const{differenceInCalendarMonths:h,addMonths:p,startOfMonth:m}=n;if(r&&h(r,c)<i-1){const u=-1*(i-1);c=p(r,u)}return s&&h(c,s)<0&&(c=s),m(c)}function nE(t,s,r,n){const{addDays:a,endOfBroadcastWeek:l,endOfISOWeek:o,endOfMonth:i,endOfWeek:c,getISOWeek:h,getWeek:p,startOfBroadcastWeek:m,startOfISOWeek:u,startOfWeek:x}=n,j=t.reduce((v,N)=>{const f=r.broadcastCalendar?m(N,n):r.ISOWeek?u(N):x(N),d=r.broadcastCalendar?l(N):r.ISOWeek?o(i(N)):c(i(N)),g=s.filter(S=>S>=f&&S<=d),b=r.broadcastCalendar?35:42;if(r.fixedWeeks&&g.length<b){const S=s.filter(k=>{const L=b-g.length;return k>d&&k<=a(d,L)});g.push(...S)}const E=g.reduce((S,k)=>{const L=r.ISOWeek?h(k):p(k),A=S.find(I=>I.weekNumber===L),D=new v0(k,N,n);return A?A.days.push(D):S.push(new q2(L,[D])),S},[]),R=new Y2(N,E);return v.push(R),v},[]);return r.reverseMonths?j.reverse():j}function aE(t,s){let{startMonth:r,endMonth:n}=t;const{startOfYear:a,startOfDay:l,startOfMonth:o,endOfMonth:i,addYears:c,endOfYear:h,newDate:p,today:m}=s,{fromYear:u,toYear:x,fromMonth:j,toMonth:v}=t;!r&&j&&(r=j),!r&&u&&(r=s.newDate(u,0,1)),!n&&v&&(n=v),!n&&x&&(n=p(x,11,31));const N=t.captionLayout==="dropdown"||t.captionLayout==="dropdown-years";return r?r=o(r):u?r=p(u,0,1):!r&&N&&(r=a(c(t.today??m(),-100))),n?n=i(n):x?n=p(x,11,31):!n&&N&&(n=h(t.today??m())),[r&&l(r),n&&l(n)]}function lE(t,s,r,n){if(r.disableNavigation)return;const{pagedNavigation:a,numberOfMonths:l=1}=r,{startOfMonth:o,addMonths:i,differenceInCalendarMonths:c}=n,h=a?l:1,p=o(t);if(!s)return i(p,h);if(!(c(s,t)<l))return i(p,h)}function oE(t,s,r,n){if(r.disableNavigation)return;const{pagedNavigation:a,numberOfMonths:l}=r,{startOfMonth:o,addMonths:i,differenceInCalendarMonths:c}=n,h=a?l??1:1,p=o(t);if(!s)return i(p,-h);if(!(c(p,s)<=0))return i(p,-h)}function iE(t){const s=[];return t.reduce((r,n)=>r.concat(n.weeks.slice()),s.slice())}function Yi(t,s){const[r,n]=y.useState(t);return[s===void 0?r:s,n]}function cE(t,s){const[r,n]=aE(t,s),{startOfMonth:a,endOfMonth:l}=s,o=af(t,r,n,s),[i,c]=Yi(o,t.month?o:void 0);y.useEffect(()=>{const R=af(t,r,n,s);c(R)},[t.timeZone]);const h=rE(i,n,t,s),p=tE(h,t.endMonth?l(t.endMonth):void 0,t,s),m=nE(h,p,t,s),u=iE(m),x=sE(m),j=oE(i,r,t,s),v=lE(i,n,t,s),{disableNavigation:N,onMonthChange:f}=t,d=R=>u.some(S=>S.days.some(k=>k.isEqualTo(R))),g=R=>{if(N)return;let S=a(R);r&&S<a(r)&&(S=a(r)),n&&S>a(n)&&(S=a(n)),c(S),f==null||f(S)};return{months:m,weeks:u,days:x,navStart:r,navEnd:n,previousMonth:j,nextMonth:v,goToMonth:g,goToDay:R=>{d(R)||g(R.date)}}}var ur;(function(t){t[t.Today=0]="Today",t[t.Selected=1]="Selected",t[t.LastFocused=2]="LastFocused",t[t.FocusedModifier=3]="FocusedModifier"})(ur||(ur={}));function lf(t){return!t[Yt.disabled]&&!t[Yt.hidden]&&!t[Yt.outside]}function dE(t,s,r,n){let a,l=-1;for(const o of t){const i=s(o);lf(i)&&(i[Yt.focused]&&l<ur.FocusedModifier?(a=o,l=ur.FocusedModifier):n!=null&&n.isEqualTo(o)&&l<ur.LastFocused?(a=o,l=ur.LastFocused):r(o.date)&&l<ur.Selected?(a=o,l=ur.Selected):i[Yt.today]&&l<ur.Today&&(a=o,l=ur.Today))}return a||(a=t.find(o=>lf(s(o)))),a}function uE(t,s,r,n,a,l,o){const{ISOWeek:i,broadcastCalendar:c}=l,{addDays:h,addMonths:p,addWeeks:m,addYears:u,endOfBroadcastWeek:x,endOfISOWeek:j,endOfWeek:v,max:N,min:f,startOfBroadcastWeek:d,startOfISOWeek:g,startOfWeek:b}=o;let R={day:h,week:m,month:p,year:u,startOfWeek:S=>c?d(S,o):i?g(S):b(S),endOfWeek:S=>c?x(S):i?j(S):v(S)}[t](r,s==="after"?1:-1);return s==="before"&&n?R=N([n,R]):s==="after"&&a&&(R=f([a,R])),R}function T0(t,s,r,n,a,l,o,i=0){if(i>365)return;const c=uE(t,s,r.date,n,a,l,o),h=!!(l.disabled&&Cr(c,l.disabled,o)),p=!!(l.hidden&&Cr(c,l.hidden,o)),m=c,u=new v0(c,m,o);return!h&&!p?u:T0(t,s,u,n,a,l,o,i+1)}function mE(t,s,r,n,a){const{autoFocus:l}=t,[o,i]=y.useState(),c=dE(s.days,r,n||(()=>!1),o),[h,p]=y.useState(l?c:void 0);return{isFocusTarget:v=>!!(c!=null&&c.isEqualTo(v)),setFocused:p,focused:h,blur:()=>{i(h),p(void 0)},moveFocus:(v,N)=>{if(!h)return;const f=T0(v,N,h,s.navStart,s.navEnd,t,a);f&&(t.disableNavigation&&!s.days.some(g=>g.isEqualTo(f))||(s.goToDay(f),p(f)))}}}function hE(t,s){const{selected:r,required:n,onSelect:a}=t,[l,o]=Yi(r,a?r:void 0),i=a?r:l,{isSameDay:c}=s,h=x=>(i==null?void 0:i.some(j=>c(j,x)))??!1,{min:p,max:m}=t;return{selected:i,select:(x,j,v)=>{let N=[...i??[]];if(h(x)){if((i==null?void 0:i.length)===p||n&&(i==null?void 0:i.length)===1)return;N=i==null?void 0:i.filter(f=>!c(f,x))}else(i==null?void 0:i.length)===m?N=[x]:N=[...N,x];return a||o(N),a==null||a(N,x,j,v),N},isSelected:h}}function fE(t,s,r=0,n=0,a=!1,l=gr){const{from:o,to:i}=s||{},{isSameDay:c,isAfter:h,isBefore:p}=l;let m;if(!o&&!i)m={from:t,to:r>0?void 0:t};else if(o&&!i)c(o,t)?r===0?m={from:o,to:t}:a?m={from:o,to:void 0}:m=void 0:p(t,o)?m={from:t,to:o}:m={from:o,to:t};else if(o&&i)if(c(o,t)&&c(i,t))a?m={from:o,to:i}:m=void 0;else if(c(o,t))m={from:o,to:r>0?void 0:t};else if(c(i,t))m={from:t,to:r>0?void 0:t};else if(p(t,o))m={from:t,to:i};else if(h(t,o))m={from:o,to:t};else if(h(t,i))m={from:o,to:t};else throw new Error("Invalid range");if(m!=null&&m.from&&(m!=null&&m.to)){const u=l.differenceInCalendarDays(m.to,m.from);n>0&&u>n?m={from:t,to:void 0}:r>1&&u<r&&(m={from:t,to:void 0})}return m}function pE(t,s,r=gr){const n=Array.isArray(s)?s:[s];let a=t.from;const l=r.differenceInCalendarDays(t.to,t.from),o=Math.min(l,6);for(let i=0;i<=o;i++){if(n.includes(a.getDay()))return!0;a=r.addDays(a,1)}return!1}function of(t,s,r=gr){return _r(t,s.from,!1,r)||_r(t,s.to,!1,r)||_r(s,t.from,!1,r)||_r(s,t.to,!1,r)}function xE(t,s,r=gr){const n=Array.isArray(s)?s:[s];if(n.filter(i=>typeof i!="function").some(i=>typeof i=="boolean"?i:r.isDate(i)?_r(t,i,!1,r):_0(i,r)?i.some(c=>_r(t,c,!1,r)):lm(i)?i.from&&i.to?of(t,{from:i.from,to:i.to},r):!1:S0(i)?pE(t,i.dayOfWeek,r):N0(i)?r.isAfter(i.before,i.after)?of(t,{from:r.addDays(i.after,1),to:r.addDays(i.before,-1)},r):Cr(t.from,i,r)||Cr(t.to,i,r):w0(i)||E0(i)?Cr(t.from,i,r)||Cr(t.to,i,r):!1))return!0;const o=n.filter(i=>typeof i=="function");if(o.length){let i=t.from;const c=r.differenceInCalendarDays(t.to,t.from);for(let h=0;h<=c;h++){if(o.some(p=>p(i)))return!0;i=r.addDays(i,1)}}return!1}function gE(t,s){const{disabled:r,excludeDisabled:n,selected:a,required:l,onSelect:o}=t,[i,c]=Yi(a,o?a:void 0),h=o?a:i;return{selected:h,select:(u,x,j)=>{const{min:v,max:N}=t,f=u?fE(u,h,v,N,l,s):void 0;return n&&r&&(f!=null&&f.from)&&f.to&&xE({from:f.from,to:f.to},r,s)&&(f.from=u,f.to=void 0),o||c(f),o==null||o(f,u,x,j),f},isSelected:u=>h&&_r(h,u,!1,s)}}function yE(t,s){const{selected:r,required:n,onSelect:a}=t,[l,o]=Yi(r,a?r:void 0),i=a?r:l,{isSameDay:c}=s;return{selected:i,select:(m,u,x)=>{let j=m;return!n&&i&&i&&c(m,i)&&(j=void 0),a||o(j),a==null||a(j,m,u,x),j},isSelected:m=>i?c(i,m):!1}}function bE(t,s){const r=yE(t,s),n=hE(t,s),a=gE(t,s);switch(t.mode){case"single":return r;case"multiple":return n;case"range":return a;default:return}}function om(t){var mt;let s=t;s.timeZone&&(s={...t},s.today&&(s.today=new bs(s.today,s.timeZone)),s.month&&(s.month=new bs(s.month,s.timeZone)),s.defaultMonth&&(s.defaultMonth=new bs(s.defaultMonth,s.timeZone)),s.startMonth&&(s.startMonth=new bs(s.startMonth,s.timeZone)),s.endMonth&&(s.endMonth=new bs(s.endMonth,s.timeZone)),s.mode==="single"&&s.selected?s.selected=new bs(s.selected,s.timeZone):s.mode==="multiple"&&s.selected?s.selected=(mt=s.selected)==null?void 0:mt.map(it=>new bs(it,s.timeZone)):s.mode==="range"&&s.selected&&(s.selected={from:s.selected.from?new bs(s.selected.from,s.timeZone):void 0,to:s.selected.to?new bs(s.selected.to,s.timeZone):void 0}));const{components:r,formatters:n,labels:a,dateLib:l,locale:o,classNames:i}=y.useMemo(()=>{const it={...am,...s.locale};return{dateLib:new Bs({locale:it,weekStartsOn:s.broadcastCalendar?1:s.weekStartsOn,firstWeekContainsDate:s.firstWeekContainsDate,useAdditionalWeekYearTokens:s.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:s.useAdditionalDayOfYearTokens,timeZone:s.timeZone,numerals:s.numerals},s.dateLib),components:ww(s.components),formatters:Mw(s.formatters),labels:{...Qw,...s.labels},locale:it,classNames:{...Sw(),...s.classNames}}},[s.locale,s.broadcastCalendar,s.weekStartsOn,s.firstWeekContainsDate,s.useAdditionalWeekYearTokens,s.useAdditionalDayOfYearTokens,s.timeZone,s.numerals,s.dateLib,s.components,s.formatters,s.labels,s.classNames]),{captionLayout:c,mode:h,navLayout:p,numberOfMonths:m=1,onDayBlur:u,onDayClick:x,onDayFocus:j,onDayKeyDown:v,onDayMouseEnter:N,onDayMouseLeave:f,onNextClick:d,onPrevClick:g,showWeekNumber:b,styles:E}=s,{formatCaption:R,formatDay:S,formatMonthDropdown:k,formatWeekNumber:L,formatWeekNumberHeader:A,formatWeekdayName:D,formatYearDropdown:I}=n,O=cE(s,l),{days:C,months:F,navStart:U,navEnd:Y,previousMonth:G,nextMonth:V,goToMonth:W}=O,_=jw(C,s,U,Y,l),{isSelected:M,select:P,selected:$}=bE(s,l)??{},{blur:B,focused:w,isFocusTarget:T,moveFocus:H,setFocused:K}=mE(s,O,_,M??(()=>!1),l),{labelDayButton:J,labelGridcell:X,labelGrid:pe,labelMonthDropdown:oe,labelNav:ce,labelPrevious:Ae,labelNext:Be,labelWeekday:Ie,labelWeekNumber:ye,labelWeekNumberHeader:se,labelYearDropdown:we}=a,ve=y.useMemo(()=>Pw(l,s.ISOWeek),[l,s.ISOWeek]),Q=h!==void 0||x!==void 0,ne=y.useCallback(()=>{G&&(W(G),g==null||g(G))},[G,W,g]),he=y.useCallback(()=>{V&&(W(V),d==null||d(V))},[W,V,d]),Me=y.useCallback((it,ae)=>Ce=>{Ce.preventDefault(),Ce.stopPropagation(),K(it),P==null||P(it.date,ae,Ce),x==null||x(it.date,ae,Ce)},[P,x,K]),be=y.useCallback((it,ae)=>Ce=>{K(it),j==null||j(it.date,ae,Ce)},[j,K]),De=y.useCallback((it,ae)=>Ce=>{B(),u==null||u(it.date,ae,Ce)},[B,u]),ze=y.useCallback((it,ae)=>Ce=>{const Se={ArrowLeft:[Ce.shiftKey?"month":"day",s.dir==="rtl"?"after":"before"],ArrowRight:[Ce.shiftKey?"month":"day",s.dir==="rtl"?"before":"after"],ArrowDown:[Ce.shiftKey?"year":"week","after"],ArrowUp:[Ce.shiftKey?"year":"week","before"],PageUp:[Ce.shiftKey?"year":"month","before"],PageDown:[Ce.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(Se[Ce.key]){Ce.preventDefault(),Ce.stopPropagation();const[qe,Ze]=Se[Ce.key];H(qe,Ze)}v==null||v(it.date,ae,Ce)},[H,v,s.dir]),Ee=y.useCallback((it,ae)=>Ce=>{N==null||N(it.date,ae,Ce)},[N]),Z=y.useCallback((it,ae)=>Ce=>{f==null||f(it.date,ae,Ce)},[f]),ee=y.useCallback(it=>ae=>{const Ce=Number(ae.target.value),Se=l.setMonth(l.startOfMonth(it),Ce);W(Se)},[l,W]),_e=y.useCallback(it=>ae=>{const Ce=Number(ae.target.value),Se=l.setYear(l.startOfMonth(it),Ce);W(Se)},[l,W]),{className:Qe,style:je}=y.useMemo(()=>({className:[i[xt.Root],s.className].filter(Boolean).join(" "),style:{...E==null?void 0:E[xt.Root],...s.style}}),[i,s.className,s.style,E]),Ke=Ew(s),rt=y.useRef(null);eE(rt,!!s.animate,{classNames:i,months:F,focused:w,dateLib:l});const gt={dayPickerProps:s,selected:$,select:P,isSelected:M,months:F,nextMonth:V,previousMonth:G,goToMonth:W,getModifiers:_,components:r,classNames:i,styles:E,labels:a,formatters:n};return st.createElement(j0.Provider,{value:gt},st.createElement(r.Root,{rootRef:s.animate?rt:void 0,className:Qe,style:je,dir:s.dir,id:s.id,lang:s.lang,nonce:s.nonce,title:s.title,role:s.role,"aria-label":s["aria-label"],"aria-labelledby":s["aria-labelledby"],...Ke},st.createElement(r.Months,{className:i[xt.Months],style:E==null?void 0:E[xt.Months]},!s.hideNavigation&&!p&&st.createElement(r.Nav,{"data-animated-nav":s.animate?"true":void 0,className:i[xt.Nav],style:E==null?void 0:E[xt.Nav],"aria-label":ce(),onPreviousClick:ne,onNextClick:he,previousMonth:G,nextMonth:V}),F.map((it,ae)=>st.createElement(r.Month,{"data-animated-month":s.animate?"true":void 0,className:i[xt.Month],style:E==null?void 0:E[xt.Month],key:ae,displayIndex:ae,calendarMonth:it},p==="around"&&!s.hideNavigation&&ae===0&&st.createElement(r.PreviousMonthButton,{type:"button",className:i[xt.PreviousMonthButton],tabIndex:G?void 0:-1,"aria-disabled":G?void 0:!0,"aria-label":Ae(G),onClick:ne,"data-animated-button":s.animate?"true":void 0},st.createElement(r.Chevron,{disabled:G?void 0:!0,className:i[xt.Chevron],orientation:s.dir==="rtl"?"right":"left"})),st.createElement(r.MonthCaption,{"data-animated-caption":s.animate?"true":void 0,className:i[xt.MonthCaption],style:E==null?void 0:E[xt.MonthCaption],calendarMonth:it,displayIndex:ae},c!=null&&c.startsWith("dropdown")?st.createElement(r.DropdownNav,{className:i[xt.Dropdowns],style:E==null?void 0:E[xt.Dropdowns]},(()=>{const Ce=c==="dropdown"||c==="dropdown-months"?st.createElement(r.MonthsDropdown,{key:"month",className:i[xt.MonthsDropdown],"aria-label":oe(),classNames:i,components:r,disabled:!!s.disableNavigation,onChange:ee(it.date),options:Rw(it.date,U,Y,n,l),style:E==null?void 0:E[xt.Dropdown],value:l.getMonth(it.date)}):st.createElement("span",{key:"month"},k(it.date,l)),Se=c==="dropdown"||c==="dropdown-years"?st.createElement(r.YearsDropdown,{key:"year",className:i[xt.YearsDropdown],"aria-label":we(l.options),classNames:i,components:r,disabled:!!s.disableNavigation,onChange:_e(it.date),options:Fw(U,Y,n,l,!!s.reverseYears),style:E==null?void 0:E[xt.Dropdown],value:l.getYear(it.date)}):st.createElement("span",{key:"year"},I(it.date,l));return l.getMonthYearOrder()==="year-first"?[Se,Ce]:[Ce,Se]})(),st.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},R(it.date,l.options,l))):st.createElement(r.CaptionLabel,{className:i[xt.CaptionLabel],role:"status","aria-live":"polite"},R(it.date,l.options,l))),p==="around"&&!s.hideNavigation&&ae===m-1&&st.createElement(r.NextMonthButton,{type:"button",className:i[xt.NextMonthButton],tabIndex:V?void 0:-1,"aria-disabled":V?void 0:!0,"aria-label":Be(V),onClick:he,"data-animated-button":s.animate?"true":void 0},st.createElement(r.Chevron,{disabled:V?void 0:!0,className:i[xt.Chevron],orientation:s.dir==="rtl"?"left":"right"})),ae===m-1&&p==="after"&&!s.hideNavigation&&st.createElement(r.Nav,{"data-animated-nav":s.animate?"true":void 0,className:i[xt.Nav],style:E==null?void 0:E[xt.Nav],"aria-label":ce(),onPreviousClick:ne,onNextClick:he,previousMonth:G,nextMonth:V}),st.createElement(r.MonthGrid,{role:"grid","aria-multiselectable":h==="multiple"||h==="range","aria-label":pe(it.date,l.options,l)||void 0,className:i[xt.MonthGrid],style:E==null?void 0:E[xt.MonthGrid]},!s.hideWeekdays&&st.createElement(r.Weekdays,{"data-animated-weekdays":s.animate?"true":void 0,className:i[xt.Weekdays],style:E==null?void 0:E[xt.Weekdays]},b&&st.createElement(r.WeekNumberHeader,{"aria-label":se(l.options),className:i[xt.WeekNumberHeader],style:E==null?void 0:E[xt.WeekNumberHeader],scope:"col"},A()),ve.map(Ce=>st.createElement(r.Weekday,{"aria-label":Ie(Ce,l.options,l),className:i[xt.Weekday],key:String(Ce),style:E==null?void 0:E[xt.Weekday],scope:"col"},D(Ce,l.options,l)))),st.createElement(r.Weeks,{"data-animated-weeks":s.animate?"true":void 0,className:i[xt.Weeks],style:E==null?void 0:E[xt.Weeks]},it.weeks.map(Ce=>st.createElement(r.Week,{className:i[xt.Week],key:Ce.weekNumber,style:E==null?void 0:E[xt.Week],week:Ce},b&&st.createElement(r.WeekNumber,{week:Ce,style:E==null?void 0:E[xt.WeekNumber],"aria-label":ye(Ce.weekNumber,{locale:o}),className:i[xt.WeekNumber],scope:"row",role:"rowheader"},L(Ce.weekNumber,l)),Ce.days.map(Se=>{const{date:qe}=Se,Ze=_(Se);if(Ze[Yt.focused]=!Ze.hidden&&!!(w!=null&&w.isEqualTo(Se)),Ze[tr.selected]=(M==null?void 0:M(qe))||Ze.selected,lm($)){const{from:de,to:q}=$;Ze[tr.range_start]=!!(de&&q&&l.isSameDay(qe,de)),Ze[tr.range_end]=!!(de&&q&&l.isSameDay(qe,q)),Ze[tr.range_middle]=_r($,qe,!0,l)}const ke=Ow(Ze,E,s.modifiersStyles),te=Nw(Ze,i,s.modifiersClassNames),Ne=!Q&&!Ze.hidden?X(qe,Ze,l.options,l):void 0;return st.createElement(r.Day,{key:`${l.format(qe,"yyyy-MM-dd")}_${l.format(Se.displayMonth,"yyyy-MM")}`,day:Se,modifiers:Ze,className:te.join(" "),style:ke,role:"gridcell","aria-selected":Ze.selected||void 0,"aria-label":Ne,"data-day":l.format(qe,"yyyy-MM-dd"),"data-month":Se.outside?l.format(qe,"yyyy-MM"):void 0,"data-selected":Ze.selected||void 0,"data-disabled":Ze.disabled||void 0,"data-hidden":Ze.hidden||void 0,"data-outside":Se.outside||void 0,"data-focused":Ze.focused||void 0,"data-today":Ze.today||void 0},!Ze.hidden&&Q?st.createElement(r.DayButton,{className:i[xt.DayButton],style:E==null?void 0:E[xt.DayButton],type:"button",day:Se,modifiers:Ze,disabled:Ze.disabled||void 0,tabIndex:T(Se)?0:-1,"aria-label":J(qe,Ze,l.options,l),onClick:Me(Se,Ze),onBlur:De(Se,Ze),onFocus:be(Se,Ze),onKeyDown:ze(Se,Ze),onMouseEnter:Ee(Se,Ze),onMouseLeave:Z(Se,Ze)},S(qe,l.options,l)):!Ze.hidden&&S(Se.date,l.options,l))})))))))),s.footer&&st.createElement(r.Footer,{className:i[xt.Footer],style:E==null?void 0:E[xt.Footer],role:"status","aria-live":"polite"},s.footer)))}const vE=({onClose:t,onSuccess:s})=>{var $,B,w;const{user:r}=Qt(),[n,a]=y.useState(!0),[l,o]=y.useState(!1),[i,c]=y.useState(null),[h,p]=y.useState([]),[m,u]=y.useState({vl:0,sl:0}),[x,j]=y.useState(!1),[v,N]=y.useState(!1),[f,d]=y.useState([]),[g,b]=y.useState({selectedQuestionId:null,answer:""}),[E,R]=y.useState([]),[S,k]=y.useState([]),[L,A]=y.useState({text:"",type:""}),[D,I]=y.useState({leavetypeid:"",deductmode:"Leave",leavepurpose:"",selectedDates:[],leavestatus:"Pending",deductedcredit:0,inclusivedates:0}),O=(T,H="success")=>{A({text:T,type:H}),setTimeout(()=>A({text:"",type:""}),5e3)},C=({label:T,value:H,options:K=[],onSelect:J,placeholder:X="Select an option",required:pe=!1,className:oe=""})=>{const[ce,Ae]=y.useState(!1),[Be,Ie]=y.useState(""),[ye,se]=y.useState(null),we=Array.isArray(K)?K.filter(ne=>ne&&typeof ne=="object"&&ne.value&&ne.label):[];y.useEffect(()=>{if(H&&we.length>0){const ne=we.find(he=>he.value===H);se(ne||null)}else se(null)},[H,we]);const ve=we.filter(ne=>{try{return!ne||!ne.label||typeof ne.label!="string"?!1:ne.label.toLowerCase().includes(Be.toLowerCase())}catch{return!1}});y.useEffect(()=>{const ne=he=>{ce&&!he.target.closest(".enhanced-dropdown")&&(Ae(!1),Ie(""))};return document.addEventListener("mousedown",ne),()=>{document.removeEventListener("mousedown",ne)}},[ce]);const Q=ne=>{try{if(!ne||typeof J!="function")return;se(ne),J(ne.value),Ae(!1),Ie("")}catch(he){console.error("Error selecting option:",he)}};return e.jsxs("div",{className:`enhanced-dropdown ${oe}`,children:[T&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[T,pe&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{onClick:()=>Ae(!ce),className:`w-full px-3 py-2 border border-gray-300 rounded-md cursor-pointer bg-white flex items-center justify-between ${ce?"ring-2 ring-blue-500 border-blue-500":"hover:border-gray-400"} transition-colors duration-200`,children:[e.jsx("span",{className:ye?"text-gray-900":"text-gray-500",children:ye?ye.label:X}),e.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${ce?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),ce&&e.jsxs("div",{className:"absolute z-[70] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b border-gray-200",children:e.jsx("input",{type:"text",value:Be,onChange:ne=>Ie(ne.target.value),placeholder:"Search...",className:"w-full px-2 py-1 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 text-gray-900",autoFocus:!0})}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:ve.length>0?ve.map(ne=>!ne||!ne.value||!ne.label?null:e.jsx("div",{className:`px-3 py-2 text-sm cursor-pointer transition-colors duration-150 ${(ye==null?void 0:ye.value)===ne.value?"bg-blue-50 text-blue-900 font-medium":"text-gray-900 hover:bg-gray-50"}`,onClick:()=>Q(ne),children:ne.label},ne.value)):e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No options found"})})]})]})]})};y.useEffect(()=>{F()},[]);const F=async()=>{var T;try{a(!0);const H=(r==null?void 0:r.USERID)||(r==null?void 0:r.userid);if(!H){O("User ID not found","error");return}try{await le.get("/pds-dtrchecker/me"),j(!0)}catch{j(!1)}const X=(await le.get("/201-employees")).data.data.find(oe=>oe.dtruserid===H);if(!X){O("Employee record not found","error");return}c(X);try{const oe=await le.get(`/employee-leave-records/${X.objid}`);if(oe.data&&oe.data.success===!0&&oe.data.leaveRecord){const ce=oe.data.leaveRecord;u({vl:parseFloat(ce.balance_vl||0),sl:parseFloat(ce.balance_sl||0)}),N(!0)}else N(!1)}catch{N(!1)}const pe=await le.get("/leave-types");p(((T=pe.data)==null?void 0:T.data)||[])}catch(H){console.error("Error fetching initial data:",H),O("Error loading data. Please try again.","error")}finally{a(!1)}},U=async T=>{try{const H=await le.get(`/leave-types/${T}/questions`);d(H.data||[])}catch(H){console.error("Error fetching leave type questions:",H),d([])}};y.useEffect(()=>{const T=(E||[]).filter(Boolean).map(H=>{const K=H.getFullYear(),J=String(H.getMonth()+1).padStart(2,"0"),X=String(H.getDate()).padStart(2,"0");return`${K}-${J}-${X}`});I(H=>({...H,selectedDates:Array.from(new Set([...(H.selectedDates||[]).filter(K=>!S.includes(K)),...T])),inclusivedates:T.length,deductedcredit:T.length*1})),k(T)},[E]);const Y=T=>{I(H=>({...H,selectedDates:(H.selectedDates||[]).filter(K=>K!==T),inclusivedates:Math.max(0,(H.inclusivedates||0)-1),deductedcredit:Math.max(0,((H.inclusivedates||0)-1)*1)})),S.includes(T)&&(R(H=>H.filter(K=>{const J=K.getFullYear(),X=String(K.getMonth()+1).padStart(2,"0"),pe=String(K.getDate()).padStart(2,"0");return`${J}-${X}-${pe}`!==T})),k(H=>H.filter(K=>K!==T)))},V=(()=>{var X,pe,oe,ce;const T=D.selectedDates.length;if(!Array.isArray(h)||h.length===0||!D.leavetypeid)return{required:0,type:"Other",available:0,sufficient:!0};const H=h.find(Ae=>Ae.leaveid===D.leavetypeid);if(!H)return{required:0,type:"Other",available:0,sufficient:!0};const K=((X=H.leavecode)==null?void 0:X.includes("VL"))||((pe=H.leavetype)==null?void 0:pe.includes("Vacation")),J=((oe=H.leavecode)==null?void 0:oe.includes("SL"))||((ce=H.leavetype)==null?void 0:ce.includes("Sick"));return{required:T*1,type:K?"VL":J?"SL":"Other",available:K?m.vl:J?m.sl:0,sufficient:K?m.vl>=T:J?m.sl>=T:!0}})(),W=x&&v&&V.sufficient&&D.leavetypeid&&D.selectedDates.length>0,_=T=>{const{name:H,value:K}=T.target;I(J=>({...J,[H]:K}))},M=T=>T?T.startsWith("http://")||T.startsWith("https://")||T.startsWith("data:")?T:`/photo/${T}`:null,P=async()=>{var T,H;try{o(!0);const K={emp_objid:i.objid,leavetypeid:D.leavetypeid,deductmode:"Leave",leavepurpose:D.leavepurpose,selectedDates:D.selectedDates,deductedcredit:D.deductedcredit,inclusivedates:D.inclusivedates,status:"Pending",isportal:1,createdby:r.USERID,questionAnswers:g.selectedQuestionId&&g.answer?g:null};await le.post("/employee-leave-transactions",K),O("Leave application submitted successfully","success"),setTimeout(()=>{s()},1e3)}catch(K){console.error("Error submitting leave application:",K),O(((H=(T=K.response)==null?void 0:T.data)==null?void 0:H.error)||"Failed to submit leave application. Please try again.","error")}finally{o(!1)}};return n?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"relative w-full max-w-4xl bg-white rounded-lg shadow-xl p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})})}):e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"relative w-full max-w-4xl bg-white rounded-lg shadow-xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:i!=null&&i.photo_path?e.jsx("img",{src:M(i.photo_path),alt:i.employee_name||"Employee",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-300",children:e.jsx("span",{className:"text-gray-600 text-sm font-medium",children:((($=i==null?void 0:i.surname)==null?void 0:$[0])||"")+(((B=i==null?void 0:i.firstname)==null?void 0:B[0])||"")})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Apply Leave"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[i?`${i.surname||""}, ${i.firstname||""} ${((w=i.middlename)==null?void 0:w[0])||""}`.trim():"",(i==null?void 0:i.employee_id)&&`  ${i.employee_id}`]})]})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200 p-1 rounded-full hover:bg-gray-100",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),L.text&&e.jsx("div",{className:`mb-4 p-3 rounded-md ${L.type==="error"?"bg-red-50 text-red-800":"bg-green-50 text-green-800"}`,children:L.text}),!x&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"PDS Required"}),e.jsxs("p",{className:"mt-1 text-sm text-red-700",children:["You must complete your Personal Data Sheet (PDS) before applying for leave. Please go to the ",e.jsx("strong",{children:'"My PDS"'})," tab to fill out your information."]})]})]})}),!v&&e.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"No Leave Credits Found"}),e.jsx("p",{className:"mt-1 text-sm text-yellow-700",children:"No leave credits found in the system. Please contact HR to update your leave credit records."})]})]})}),v&&e.jsxs("div",{className:"mb-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Vacation Leave (VL)"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:m.vl.toFixed(3)})]}),e.jsxs("div",{className:"flex-1 text-center border-l border-blue-300",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Sick Leave (SL)"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:m.sl.toFixed(3)})]})]}),D.selectedDates.length>0&&D.leavetypeid&&e.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200",children:e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Selected:"})," ",D.selectedDates.length," day(s) ",e.jsx("strong",{children:" Required Credits:"})," ",V.required.toFixed(3)," ",V.type,!V.sufficient&&e.jsxs("span",{className:"ml-2 text-red-600 font-semibold",children:["(Insufficient: ",V.type," balance is ",V.available.toFixed(3),")"]})]})})]}),e.jsxs("form",{onSubmit:T=>{T.preventDefault(),P()},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(C,{label:"Leave Type",value:D.leavetypeid,options:Array.isArray(h)?h.map(T=>({value:T.leaveid,label:`${T.leavetype||"Unknown Leave Type"} (${T.leavecode||"N/A"})`,hasQuestions:T.hasquestion===1||T.hasquestion===!0})):[],onSelect:T=>{if(I(H=>({...H,leavetypeid:T})),Array.isArray(h)){const H=h.find(K=>K.leaveid===T);H&&(H.hasquestion===1||H.hasquestion===!0)?U(T):(d([]),b({selectedQuestionId:null,answer:""}))}},placeholder:"Select Leave Type",required:!0})}),e.jsx("div",{children:f.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Questions"}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:f.map((T,H)=>e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("input",{type:"radio",id:`question-${T.objid}`,name:"leave-question",checked:g.selectedQuestionId===T.objid,onChange:K=>{K.target.checked&&b({selectedQuestionId:T.objid,answer:""})},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("label",{htmlFor:`question-${T.objid}`,className:"block text-xs font-medium text-gray-700 mb-1 cursor-pointer",children:[H+1,". ",T.question]}),g.selectedQuestionId===T.objid&&e.jsx("textarea",{value:g.answer,onChange:K=>{b(J=>({...J,answer:K.target.value}))},rows:2,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Answer..."})]})]})},T.objid))})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leave Purpose"}),e.jsx("textarea",{name:"leavepurpose",value:D.leavepurpose,onChange:_,rows:3,maxLength:100,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Enter leave purpose..."}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[D.leavepurpose.length,"/100 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Dates"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(om,{mode:"multiple",selected:E,onSelect:R,weekStartsOn:1,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-1,toYear:new Date().getFullYear()+1})}),e.jsxs("div",{className:"border rounded p-3 bg-gray-50 max-h-64 overflow-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Selected Dates"}),e.jsxs("span",{className:"text-xs text-gray-600",children:["Total: ",D.selectedDates.length]})]}),e.jsxs("ul",{className:"space-y-1 text-sm",children:[D.selectedDates.sort().map(T=>{const H=T.slice(5,7),K=T.slice(8,10),J=T.slice(0,4),X=`${H}/${K}/${J}`;return e.jsxs("li",{className:"flex items-center justify-between bg-white rounded border px-2 py-1",children:[e.jsx("span",{children:X}),e.jsx("button",{type:"button",onClick:()=>Y(T),className:"text-red-600 text-xs hover:text-red-800",children:"Remove"})]},T)}),D.selectedDates.length===0&&e.jsx("li",{className:"text-xs text-gray-500",children:"No dates selected"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l||!W,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Submitting...":"Submit Leave Application"})]})]})]})})})},jE=()=>{const{user:t}=Qt(),[s,r]=y.useState([]),[n,a]=y.useState(!0),[l,o]=y.useState(null),[i,c]=y.useState(null),[h,p]=y.useState(!1),[m,u]=y.useState(!1),[x,j]=y.useState(!1),[v,N]=y.useState(!1),[f,d]=y.useState(!0);y.useEffect(()=>{b(),g()},[t]);const g=async()=>{d(!0);try{const k=(t==null?void 0:t.USERID)||(t==null?void 0:t.userid);try{await le.get("/pds-dtrchecker/me"),j(!0)}catch{j(!1)}const D=(await le.get("/201-employees")).data.data.find(I=>I.dtruserid===k);if(D)try{const I=await le.get(`/employee-leave-records/${D.objid}`);N(I.data&&I.data.success===!0&&I.data.leaveRecord)}catch{N(!1)}}catch(k){console.error("Error checking eligibility:",k)}finally{d(!1)}},b=async()=>{try{a(!0),o(null);const k=(t==null?void 0:t.USERID)||(t==null?void 0:t.userid);if(!k)throw new Error("User ID not found");const D=(await le.get("/201-employees")).data.data.find(O=>O.dtruserid===k);if(!D)throw new Error("Employee record not found");const I=await le.get(`/employee-leave-transactions/${D.objid}`);r(I.data)}catch(k){o(k.message)}finally{a(!1)}},E=k=>{c(k),p(!0)},R=()=>{p(!1),c(null)},S=()=>{b()};return n?e.jsx(NE,{}):l?e.jsx(wE,{message:l}):e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"My Leave Transactions"}),e.jsxs("button",{onClick:()=>u(!0),disabled:!x||!v||f,className:`px-4 py-2 rounded-lg transition-colors flex items-center space-x-2 ${!x||!v||f?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"}`,title:x?v?"Apply for leave":"No leave credits found. Contact HR.":"Please complete your PDS first",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{children:"Apply Leave"})]})]}),!f&&(!x||!v)&&e.jsx("div",{className:"mx-6 mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Action Required"}),e.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[!x&&e.jsxs("p",{className:"mb-2",children:["You must complete your Personal Data Sheet (PDS) before applying for leave. Please go to the ",e.jsx("strong",{children:'"My PDS"'})," tab to fill out your information."]}),!v&&e.jsx("p",{children:"No leave credits found in the system. Please contact HR to update your leave credit records."})]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No."}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Leave Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Leave Dates"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Purpose"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created By"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((k,L)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:L+1}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:k.leave_type_name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:k.leave_dates?e.jsx("div",{className:"flex flex-wrap gap-1",children:k.leave_dates.split(", ").map((A,D)=>e.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:new Date(A).toLocaleDateString()},D))}):e.jsx("span",{className:"text-gray-400",children:"No dates"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:k.leavepurpose}),e.jsx("td",{className:"px-6 py-4",children:k.isportal===1?e.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"Portal"}):k.created_by_photo_path?e.jsx("img",{src:k.created_by_photo_path,alt:"Creator",className:"w-8 h-8 rounded-full"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-gray-600",children:"N/A"})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${k.status==="Approved"?"bg-green-100 text-green-800":k.status==="Pending"?"bg-yellow-100 text-yellow-800":k.status==="Returned"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:k.status})}),e.jsx("td",{className:"px-6 py-4",children:(k.status==="Pending"||k.status==="Returned")&&e.jsx("button",{onClick:()=>E(k),className:"text-indigo-600 hover:text-indigo-900",title:"Edit",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})})]},k.objid))})]})}),s.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No leave transactions found."})}),e.jsx(y1,{isOpen:h,onClose:R,transaction:i,onSave:S}),m&&e.jsx(vE,{onClose:()=>u(!1),onSuccess:()=>{u(!1),b()}})]})},NE=()=>e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}),wE=({message:t})=>e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg",children:[e.jsx("p",{className:"font-semibold",children:"Error:"}),e.jsx("p",{children:t})]}),EE=(t,s)=>{const r=new Date;let n,a;if(t==="This Month")n=r.getFullYear(),a=r.getMonth()+1;else if(t==="Last Month")n=r.getFullYear(),a=r.getMonth(),a===0&&(n--,a=12);else return"Current Period";const l=new Date(n,a-1,1).toLocaleString("en-US",{month:"long"}),o=n,i=new Date(n,a,0).getDate();switch(s){case"first_half":return`${l} 1-15, ${o}`;case"second_half":return`${l} 16-${i}, ${o}`;case"full":default:return`${l} ${o}`}},cf=t=>{const r=new Date(t).getDay();return r===0||r===6},SE=t=>{if(!t)return"";const s=new Date(t);if(isNaN(s.getTime()))return t;const r=String(s.getDate()).padStart(2,"0"),n=s.toLocaleString("en-US",{month:"short"}),a=s.getFullYear(),l=s.toLocaleString("en-US",{weekday:"short"});return`${r}-${n}-${a}, ${l.toUpperCase()}`},_E=t=>{const s=new Date;let r,n;t==="This Month"?(r=s.getFullYear(),n=s.getMonth()+1):t==="Last Month"?(r=s.getFullYear(),n=s.getMonth(),n===0&&(r--,n=12)):(r=s.getFullYear(),n=s.getMonth()+1);const a=`${r}-${String(n).padStart(2,"0")}-01`,l=new Date(r,n,0).getDate(),o=`${r}-${String(n).padStart(2,"0")}-${String(l).padStart(2,"0")}`,i=[];let c=new Date(a);const h=new Date(o);for(;c<=h;)i.push(c.toISOString().slice(0,10)),c.setDate(c.getDate()+1);return i},CE=(t,s)=>_E(s).map(n=>{const a=t.find(l=>l.dateStr===n);return a||{date:SE(n),dateStr:n,amCheckIn:"-",amCheckOut:"-",pmCheckIn:"-",pmCheckOut:"-",remarks:cf(n)?"Weekend":"",isWeekend:cf(n),hasHoliday:!1,lateMinutes:0,days:0}});function kE({user:t,selectedFilter:s,selectedPeriod:r="full",processedLogs:n=[],shiftSchedule:a,onClose:l}){const o=y.useRef(),[i,c]=y.useState(!1),[h,p]=y.useState(null),m=CE(n,s);console.log(" [PrintMyDTRChecker] Debug info:",{selectedFilter:s,selectedPeriod:r,processedLogsLength:n.length,fullMonthLogsLength:m.length,sampleProcessedLog:n[0],sampleFullMonthLog:m[0]});const x=(()=>{const v=m.reduce((f,d)=>f+(d.lateMinutes||0),0),N=m.reduce((f,d)=>f+(d.days||0),0);return{totalLateMinutes:v,totalDays:N}})(),j=()=>{const v=o.current.innerHTML,N=window.open("","_blank");N.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>DTR Print</title>
          <style>
            @media print {
              @page {
                size: A4;
                margin: 8mm;
              }
              body { 
                margin: 0; 
                padding: 0; 
                font-family: Arial, sans-serif;
                font-size: 6px;
                line-height: 1.1;
              }
              .no-print { display: none !important; }
              
              /* Header Styles - Compact for space */
              .header { 
                text-align: center; 
                margin-bottom: 6px; 
                font-size: 10px;
              }
              .header h1 { 
                font-size: 12px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header h2 { 
                font-size: 11px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header h3 { 
                font-size: 10px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header p { 
                font-size: 8px; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              
              /* Specific header text styling - Font size 12px with bold month */
              .header .month-year {
                font-size: 10px !important;
                font-weight: normal;
                margin: 1px 0;
              }
              .header .month-year .bold-month {
                font-weight: bold !important;
              }
              .header .official-hours {
                font-size: 8px !important;
                font-weight: normal;
                margin: 1px 0;
              }
              .header .regular-days {
                font-size: 8px !important;
                font-weight: normal;
                margin: 1px 0;
              }
              
              /* Table Styles - 40% increase in row height from default */
              table { 
                border-collapse: collapse; 
                width: 100%; 
                font-size: 10px;
                margin-bottom: 8px;
                table-layout: fixed;
                height: auto;
              }
              th, td { 
                border: 0.5px solid #000; 
                padding: 2.8px 1px; /* 40% increase from 2px */
                text-align: center; 
                vertical-align: middle;
                font-size: 11px; /* 30% increase from 6px: 6px + 5px */
                line-height: 1.0;
                height: 14px; /* 40% increase from 10px */
              }
              th { 
                font-weight: bold; 
                background-color: #d3d3d3 !important; /* Light grey header */
                font-size: 11px; /* 30% increase from 6px: 6px + 5px */
                height: 16.8px; /* 40% increase from 12px */
              }
              
              /* Column widths for better A4 utilization */
              .col-day { width: 6%; }
              .col-am-arrival { width: 13%; }
              .col-am-departure { width: 13%; }
              .col-pm-arrival { width: 13%; }
              .col-pm-departure { width: 13%; }
              .col-undertime-hours { width: 6%; }
              .col-undertime-minutes { width: 6%; }
              .col-days { width: 7%; }
              .col-late { width: 7%; }
              
              /* Weekend day styling */
              .weekend-day {
                color: #0066cc !important; /* Blue color for weekends */
                font-weight: bold;
              }
              
              /* Footer Styles - Compact */
              .footer { 
                margin-top: 6px; 
                font-size: 8px;
                background-color: #f5f5f5 !important; /* Light grey footer */
                padding: 6px;
                border: 1px solid #ddd;
              }
              .footer p { 
                margin: 0 0 2px 0; 
                font-size: 8px;
                line-height: 1.1;
              }
              .footer p.text-right {
                text-align: right !important;
              }
              .footer .mb-2 {
                margin-bottom: 8px !important;
              }
              .signature-line { 
                margin-top: 4px; 
                text-align: right; 
              }
              .signature-line .line { 
                border-bottom: 1px solid #000; 
                display: inline-block; 
                width: 120px; 
              }
              .signature-line .label { 
                text-align: right !important; /* Right align the "In Charge" label */
                width: 100%; 
                margin-top: 1px; 
                font-size: 8px;
                padding-right: 0;
              }
              
              /* Employee signature line styling */
              .signature-line .employee-signature { 
                border-bottom: 1px solid #000; 
                display: inline-block; 
                width: 300px; 
                margin-top: 2px;
              }
              
              /* Fit to page container - No height restrictions */
              .print-container {
                height: auto;
                width: 100%;
                overflow: visible;
              }
              .table-container {
                height: auto;
                overflow: visible;
              }
              
              /* Totals row styling */
              .totals-row {
                background-color: #d3d3d3 !important; /* Light grey totals row */
                font-weight: bold;
                height: 16.8px; /* 40% increase from 12px to match header */
              }
            }
          </style>
        </head>
        <body>
          <div class="print-container">
            ${v}
          </div>
        </body>
      </html>
    `),N.document.close(),N.onload=()=>{N.print(),N.close()}};return i?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{children:"Loading DTR data..."})]})})}):h?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-gray-700 mb-4",children:h}),e.jsx("button",{onClick:l,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"DTR Print Preview - My Shift View"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:j,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Print"}),e.jsx("button",{onClick:l,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})]})]}),e.jsxs("div",{ref:o,className:"print-content",children:[e.jsxs("div",{className:"header text-center mb-4",children:[e.jsx("h1",{className:"text-lg font-bold",children:"CIVIL SERVICE FORM NO. 48"}),e.jsx("div",{className:"mt-1"}),e.jsx("h2",{className:"text-lg font-bold",children:"DAILY TIME RECORD"}),e.jsx("h3",{className:"text-lg font-bold",children:(t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"Employee"}),e.jsx("p",{className:"text-sm",children:"NAME"}),e.jsxs("p",{className:"text-lg month-year",children:["For the month of: ",e.jsx("span",{className:"bold-month",children:EE(s,r)})]}),e.jsx("p",{className:"text-sm official-hours",children:"Official hours for arrival and departure"}),e.jsx("p",{className:"text-sm regular-days",children:"Regular Days ________ Saturdays _____________"})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 mb-4",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-gray-300",children:[e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-day",children:"Day"}),e.jsx("th",{colSpan:"2",className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs",children:"AM"}),e.jsx("th",{colSpan:"2",className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs",children:"PM"}),e.jsx("th",{colSpan:"2",className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs",children:"Undertime"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-days",children:"Days"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-late",children:"Late"})]}),e.jsxs("tr",{className:"bg-gray-300",children:[e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-am-arrival",children:"Arrival"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-am-departure",children:"Departure"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-pm-arrival",children:"Arrival"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-pm-departure",children:"Departure"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-undertime-hours",children:"Hours"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-undertime-minutes",children:"Minutes"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium"})]})]}),e.jsx("tbody",{children:m.map((v,N)=>(console.log(` [PrintMyDTRChecker] Rendering row ${N}:`,{date:v.date,dateStr:v.dateStr,amCheckIn:v.amCheckIn,amCheckOut:v.amCheckOut,pmCheckIn:v.pmCheckIn,pmCheckOut:v.pmCheckOut,days:v.days,lateMinutes:v.lateMinutes}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:`border border-gray-300 px-2 py-2 text-center text-xs ${v.isWeekend?"weekend-day":""}`,children:N+1}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:v.amCheckIn||""}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:v.amCheckOut||""}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:v.pmCheckIn||""}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:v.pmCheckOut||""}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs"}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs"}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:v.days||""}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:v.lateMinutes||""})]},N)))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-300 font-semibold totals-row",children:[e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:"TOTAL"}),e.jsx("td",{colSpan:"4",className:"border border-gray-300 px-2 py-2 text-center text-xs"}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs"}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs"}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-bold",children:x.totalDays}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-bold",children:x.totalLateMinutes})]})})]})}),e.jsxs("div",{className:"footer bg-gray-100 p-3 border border-gray-300",children:[e.jsx("p",{className:"mb-2",children:"I CERTIFY on my honor that the above is a true and correct report of the hours and work performed, record of which was made daily at the time of arrival at and departure from office."}),e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"signature-line",children:e.jsx("div",{className:"line",children:"_________________"})}),e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"mb-2"}),e.jsx("p",{className:"mb-2 text-right",children:"Verified as to the prescribed office hours."}),e.jsx("div",{className:"mb-2"}),e.jsxs("div",{className:"signature-line",children:[e.jsx("div",{className:"line",children:"_______________"}),e.jsx("div",{className:"label",children:"In Charge"})]})]})]})]})})}const DE=(t,s)=>{const r=new Date;let n,a;if(t==="This Month")n=r.getFullYear(),a=r.getMonth()+1;else if(t==="Last Month")n=r.getFullYear(),a=r.getMonth(),a===0&&(n--,a=12);else return"Current Period";const l=new Date(n,a-1,1).toLocaleString("en-US",{month:"long"}),o=n,i=new Date(n,a,0).getDate();switch(s){case"first_half":return`${l} 1-15, ${o}`;case"second_half":return`${l} 16-${i}, ${o}`;case"full":default:return`${l} ${o}`}},AE=t=>{if(!t)return"";const s=new Date(t);if(isNaN(s.getTime()))return t;const r=String(s.getDate()).padStart(2,"0"),n=s.toLocaleString("en-US",{month:"short"}),a=s.getFullYear(),l=s.toLocaleString("en-US",{weekday:"short"});return`${r}-${n}-${a}, ${l.toUpperCase()}`},Vc=t=>{if(!t)return"";const s=new Date(t);return isNaN(s.getTime())?"":s.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})},df=t=>{if(!t)return 0;const s=t.match(/(\d{2}):(\d{2})/);if(!s)return 0;const r=parseInt(s[1],10),n=parseInt(s[2],10);return r*60+n},TE=t=>{const r=new Date(t).getDay();return r===0||r===6},LE=t=>{const s=new Date;let r,n;t==="This Month"?(r=s.getFullYear(),n=s.getMonth()+1):t==="Last Month"?(r=s.getFullYear(),n=s.getMonth(),n===0&&(r--,n=12)):(r=s.getFullYear(),n=s.getMonth()+1);const a=`${r}-${String(n).padStart(2,"0")}-01`,l=new Date(r,n,0).getDate(),o=`${r}-${String(n).padStart(2,"0")}-${String(l).padStart(2,"0")}`,i=[];let c=new Date(a);const h=new Date(o);for(;c<=h;)i.push(c.toISOString().slice(0,10)),c.setDate(c.getDate()+1);return i},IE=(t,s)=>LE(s).map(n=>{const a=t.find(l=>l.date===n);if(a){const l=[...a.amLogs||[],...a.pmLogs||[]];return{date:n,logs:l}}return{date:n,logs:[]}});function ME({user:t,selectedFilter:s,selectedPeriod:r="full",logs:n=[],onClose:a}){const l=y.useRef(),[o,i]=y.useState(!1),[c,h]=y.useState(null),p=IE(n,s);console.log(" [PrintMyDTRRaw] Debug info:",{selectedFilter:s,selectedPeriod:r,logsLength:n.length,fullMonthLogsLength:p.length,sampleLog:n[0],sampleFullMonthLog:p[0]});const m=()=>{console.log(" [PrintMyDTRRaw] Print button clicked"),console.log(" [PrintMyDTRRaw] printRef.current:",l.current);const u=l.current.innerHTML;console.log(" [PrintMyDTRRaw] printContents length:",u.length),console.log(" [PrintMyDTRRaw] printContents preview:",u.substring(0,500));const x=window.open("","_blank");if(!x){console.error(" [PrintMyDTRRaw] Failed to open print window"),alert("Failed to open print window. Please check your popup blocker settings.");return}console.log(" [PrintMyDTRRaw] Print window opened successfully"),x.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>DTR Print - Raw Logs</title>
          <style>
            @media print {
              @page {
                size: A4;
                margin: 8mm;
              }
              body { 
                margin: 0; 
                padding: 0; 
                font-family: Arial, sans-serif;
                font-size: 6px;
                line-height: 1.1;
              }
              .no-print { display: none !important; }
              
              /* Header Styles - Compact for space */
              .header { 
                text-align: center; 
                margin-bottom: 6px; 
                font-size: 10px;
              }
              .header h1 { 
                font-size: 12px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header h2 { 
                font-size: 11px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header h3 { 
                font-size: 10px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header p { 
                font-size: 8px; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              
              /* Specific header text styling - Font size 12px with bold month */
              .header .month-year {
                font-size: 10px !important;
                font-weight: normal;
                margin: 1px 0;
              }
              .header .month-year .bold-month {
                font-weight: bold !important;
              }
              .header .official-hours {
                font-size: 8px !important;
                font-weight: normal;
                margin: 1px 0;
              }
              .header .regular-days {
                font-size: 8px !important;
                font-weight: normal;
                margin: 1px 0;
              }
              
              /* Table Styles - 40% increase in row height from default */
              table { 
                border-collapse: collapse; 
                width: 100%; 
                font-size: 10px;
                margin-bottom: 8px;
                table-layout: fixed;
                height: auto;
              }
              th, td { 
                border: 0.5px solid #000; 
                padding: 2.8px 1px; /* 40% increase from 2px */
                text-align: center; 
                vertical-align: middle;
                font-size: 11px; /* 30% increase from 6px: 6px + 5px */
                line-height: 1.0;
                height: 14px; /* 40% increase from 10px */
              }
              th { 
                font-weight: bold; 
                background-color: #d3d3d3 !important; /* Light grey header */
                font-size: 11px; /* 30% increase from 6px: 6px + 5px */
                height: 16.8px; /* 40% increase from 12px */
              }
              
              /* Column widths for better A4 utilization */
              .col-day { width: 25%; }
              .col-am-logs { width: 37.5%; }
              .col-pm-logs { width: 37.5%; }
              
              /* Footer Styles - Compact */
              .footer { 
                margin-top: 6px; 
                font-size: 8px;
                background-color: #f5f5f5 !important; /* Light grey footer */
                padding: 6px;
                border: 1px solid #ddd;
              }
              .footer p { 
                margin: 0 0 2px 0; 
                font-size: 8px;
                line-height: 1.1;
              }
              .footer p.text-right {
                text-align: right !important;
              }
              .footer .mb-2 {
                margin-bottom: 8px !important;
              }
              .signature-line { 
                margin-top: 4px; 
                text-align: right; 
              }
              .signature-line .line { 
                border-bottom: 1px solid #000; 
                display: inline-block; 
                width: 120px; 
              }
              .signature-line .label { 
                text-align: right !important; /* Right align the "In Charge" label */
                width: 100%; 
                margin-top: 1px; 
                font-size: 8px;
                padding-right: 0;
              }
              
              /* Employee signature line styling */
              .signature-line .employee-signature { 
                border-bottom: 1px solid #000; 
                display: inline-block; 
                width: 300px; 
                margin-top: 2px;
              }
              
              /* Fit to page container - No height restrictions */
              .print-container {
                height: auto;
                width: 100%;
                overflow: visible;
              }
              .table-container {
                height: auto;
                overflow: visible;
              }
              
              /* Totals row styling */
              .totals-row {
                background-color: #d3d3d3 !important; /* Light grey totals row */
                font-weight: bold;
                height: 16.8px; /* 40% increase from 12px to match header */
              }
            }
          </style>
        </head>
        <body>
          <div class="print-container">
            ${u}
          </div>
        </body>
      </html>
    `),x.document.close(),x.onload=()=>{x.print(),x.close()}};return o?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{children:"Loading DTR data..."})]})})}):c?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-gray-700 mb-4",children:c}),e.jsx("button",{onClick:a,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"DTR Print Preview - Raw Logs View"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:m,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Print"}),e.jsx("button",{onClick:a,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})]})]}),e.jsxs("div",{ref:l,className:"print-content",children:[e.jsxs("div",{className:"header text-center mb-4",children:[e.jsx("h1",{className:"text-lg font-bold",children:"CIVIL SERVICE FORM NO. 48"}),e.jsx("div",{className:"mt-1"}),e.jsx("h2",{className:"text-lg font-bold",children:"TIME LOGS REPORT"}),e.jsx("h3",{className:"text-lg font-bold",children:(t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"Employee"}),e.jsx("p",{className:"text-sm",children:"NAME"}),e.jsxs("p",{className:"text-lg month-year",children:["For the period: ",e.jsx("span",{className:"bold-month",children:DE(s,r)})]}),e.jsx("p",{className:"text-sm official-hours",children:"Daily Time Record - Raw Logs"})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 mb-4",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-300",children:[e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-day",children:"Day"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-am-logs",children:"AM Logs"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-pm-logs",children:"PM Logs"})]})}),e.jsx("tbody",{children:p.map((u,x)=>{console.log(` [PrintMyDTRRaw] Rendering day ${x}:`,{date:u.date,logsCount:u.logs.length,sampleLog:u.logs[0]});const j=u.logs.filter(g=>{const b=Vc(g.CHECKTIME||g.DATE||g.date),E=df(b);return E>=0&&E<12*60}),v=u.logs.filter(g=>{const b=Vc(g.CHECKTIME||g.DATE||g.date),E=df(b);return E>=12*60&&E<=23*60+59}),N=g=>g.length===0?"-":g.map(b=>Vc(b.CHECKTIME||b.DATE||b.date)||"-").join(", "),f=N(j),d=N(v);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:`border border-gray-300 px-2 py-2 text-center text-xs ${TE(u.date)?"weekend-day":""}`,children:AE(u.date)}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:f}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:d})]},x)})})]})}),e.jsxs("div",{className:"footer bg-gray-100 p-3 border border-gray-300",children:[e.jsx("p",{className:"mb-2",children:"I CERTIFY on my honor that the above is a true and correct report of the time logs recorded during the specified period."}),e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"signature-line",children:e.jsx("div",{className:"line",children:"_________________"})}),e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"mb-2"}),e.jsx("p",{className:"mb-2 text-right",children:"Verified as to the prescribed office hours."}),e.jsx("div",{className:"mb-2"}),e.jsxs("div",{className:"signature-line",children:[e.jsx("div",{className:"line",children:"_______________"}),e.jsx("div",{className:"label",children:"In Charge"})]})]})]})]})})}const go=t=>{if(!t)return"";if(typeof t=="string"){const s=t.match(/(\d{2}):(\d{2})/);return s?`${s[1]}:${s[2]}`:""}return t instanceof Date&&!isNaN(t.getTime())?t.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}):""},RE=30*60*1e3,uf=t=>{if(!t||!t.employee)return{valid:!1,message:"Please complete your Personal Data Sheet (PDS) to continue."};const s=t.employee,r={surname:"Last Name",firstname:"First Name",date_of_birth:"Birth Date",sex:"Gender",civil_status:"Civil Status"},n=[];for(const[a,l]of Object.entries(r))(!s[a]||String(s[a]).trim()==="")&&n.push(l);return n.length>0?{valid:!1,message:`Please fill in the following required fields in your PDS: ${n.join(", ")}`}:{valid:!0,message:""}},OE=()=>{const{user:t,loadingAuth:s,logout:r}=Qt(),n=xr(),[a,l]=y.useState(()=>localStorage.getItem("dtrActiveTab")||"dtr-check"),[o,i]=y.useState(()=>localStorage.getItem("dtrSelectedFilter")||"Today"),[c,h]=y.useState(()=>localStorage.getItem("dtrSelectedView")||"My Shift"),[p,m]=y.useState("full"),[u,x]=y.useState("leave-credits"),[j,v]=y.useState([]),[N,f]=y.useState(!1),[d,g]=y.useState(null),[b,E]=y.useState(!1),[R,S]=y.useState(null),[k,L]=y.useState([]),[A,D]=y.useState([]),[I,O]=y.useState([]),[C,F]=y.useState(!1),U=y.useRef(),[Y,G]=y.useState(!1),[V,W]=y.useState({currentSsn:"",newSsn:"",confirmSsn:""}),[_,M]=y.useState(""),[P,$]=y.useState(""),[B,w]=y.useState(!1),[T,H]=y.useState(!1),[K,J]=y.useState(null),[X,pe]=y.useState(!1),[oe,ce]=y.useState(!1),[Ae,Be]=y.useState(!0),[Ie,ye]=y.useState("");y.useEffect(()=>{(async()=>{var Q,ne,he,Me,be,De,ze;if(!t||!(t.USERID||t.id)){J(null);return}try{pe(!0);const Ee=await le.get("/pds-dtrchecker/me");console.log(" [DtrChecker] PDS response:",Ee.data),Ee.data.success&&((ne=(Q=Ee.data.data)==null?void 0:Q.media)!=null&&ne.photo)?(console.log(" [DtrChecker] PDS photo found, using as avatar"),console.log(" [DtrChecker] PDS photo type:",typeof Ee.data.data.media.photo),console.log(" [DtrChecker] PDS photo length:",(he=Ee.data.data.media.photo)==null?void 0:he.length),J(Ee.data.data.media.photo)):(console.log(" [DtrChecker] No PDS photo found, will use user.PHOTO"),console.log(" [DtrChecker] Response structure:",{success:Ee.data.success,hasData:!!Ee.data.data,hasMedia:!!((Me=Ee.data.data)!=null&&Me.media),hasPhoto:!!((De=(be=Ee.data.data)==null?void 0:be.media)!=null&&De.photo)}),J(null))}catch(Ee){((ze=Ee==null?void 0:Ee.response)==null?void 0:ze.status)===404?(console.log(" [DtrChecker] No PDS record found, will use user.PHOTO"),J(null)):(console.error(" [DtrChecker] Error fetching PDS photo:",Ee),J(null))}finally{pe(!1)}})()},[t]),y.useEffect(()=>{(async()=>{var Q;if(!t||!(t.USERID||t.id)||s){Be(!1);return}try{Be(!0);const ne=await le.get("/pds-dtrchecker/me");if(ne.data.success&&ne.data.data){const he=uf(ne.data.data);he.valid?(ce(!0),ye("")):(ce(!1),ye(he.message),l("my-pds"))}else ce(!1),ye("Please complete your Personal Data Sheet (PDS) to continue."),l("my-pds")}catch(ne){((Q=ne==null?void 0:ne.response)==null?void 0:Q.status)===404?(ce(!1),ye("Please complete your Personal Data Sheet (PDS) to continue."),l("my-pds")):(console.error("Error checking PDS completion:",ne),ce(!0))}finally{Be(!1)}})()},[t,s]),y.useEffect(()=>{localStorage.setItem("dtrActiveTab",a),console.log(" [DtrChecker] Active tab saved:",a)},[a]);const se=y.useMemo(()=>{if(o!=="This Month"&&o!=="Last Month")return[];const ve=new Date;let Q,ne;o==="This Month"?(Q=ve.getFullYear(),ne=ve.getMonth()+1):(Q=ve.getFullYear(),ne=ve.getMonth(),ne===0&&(Q--,ne=12));const he=new Date(Q,ne-1,1).toLocaleString("en-US",{month:"short"}),Me=new Date(Q,ne,0).getDate();return[{value:"full",label:`Full Month (${he} 1-${Me})`},{value:"first_half",label:`1st Half (${he} 1-15)`},{value:"second_half",label:`2nd Half (${he} 16-${Me})`}]},[o]);y.useEffect(()=>{m("full")},[o]),y.useEffect(()=>{localStorage.setItem("dtrSelectedFilter",o),console.log(" [DtrChecker] Selected filter saved:",o)},[o]),y.useEffect(()=>{localStorage.setItem("dtrSelectedView",c),console.log(" [DtrChecker] Selected view saved:",c)},[c]),y.useEffect(()=>{if(console.log(" [DtrChecker] User context changed:",{hasUser:!!t,userId:t==null?void 0:t.id,userUSERID:t==null?void 0:t.USERID,userName:t==null?void 0:t.NAME,name:t==null?void 0:t.name,loadingAuth:s}),!s&&!t){const ve=localStorage.getItem("authToken"),Q=localStorage.getItem("authUser");if(ve&&Q){console.log(" [DtrChecker] Found stored auth data, waiting for auth context to load...");return}else{console.log(" [DtrChecker] No user and no stored auth data - will redirect in 2 seconds");const ne=setTimeout(()=>{console.log(" [DtrChecker] Redirecting to login page after delay"),n("/login")},2e3);return()=>clearTimeout(ne)}}else if(t){const ve=t.id||t.USERID;console.log(` [DtrChecker] Will fetch data for USERID: ${ve}, User: ${t.NAME||t.name}`)}},[t,n,s]),y.useEffect(()=>{if(!t)return;const ve=()=>{U.current&&clearTimeout(U.current),U.current=setTimeout(()=>{localStorage.getItem("authMethod");try{localStorage.removeItem("biometricScanningState"),localStorage.removeItem("fingerprintCaptureState"),localStorage.removeItem("biometricMatchState"),localStorage.removeItem("lastBiometricUser"),localStorage.removeItem("biometricSessionData"),localStorage.removeItem("biometricScore"),localStorage.removeItem("biometricConfidence"),localStorage.removeItem("lastFingerprintData"),localStorage.removeItem("biometricMatchHistory"),console.log(" Cleared biometric states due to session timeout")}catch(ne){console.warn(" Error clearing biometric states:",ne)}r(),n("/login")},RE)},Q=["mousemove","mousedown","keydown","touchstart","scroll"];return Q.forEach(ne=>{document.addEventListener(ne,ve,!0)}),ve(),()=>{U.current&&clearTimeout(U.current),Q.forEach(ne=>{document.removeEventListener(ne,ve,!0)})}},[t,r,n]),y.useEffect(()=>{const ve=()=>{t&&(localStorage.setItem("dtrSessionActive","true"),localStorage.setItem("dtrSessionTimestamp",Date.now().toString()))},Q=()=>{const ne=localStorage.getItem("dtrSessionActive"),he=localStorage.getItem("dtrSessionTimestamp");if(ne==="true"&&he){const Me=Date.now()-parseInt(he),be=60*60*1e3;if(Me<be){console.log(" Restoring session after page refresh");return}else console.log(" Session expired due to inactivity"),localStorage.removeItem("dtrSessionActive"),localStorage.removeItem("dtrSessionTimestamp")}};return window.addEventListener("beforeunload",ve),window.addEventListener("pageshow",Q),()=>{window.removeEventListener("beforeunload",ve),window.removeEventListener("pageshow",Q)}},[t]),y.useEffect(()=>{(async()=>{var Q,ne;if(!(a!=="201-files"||u!=="leave-credits")&&!(!t||!(t.USERID||t.id)))try{E(!0);const he=await le.get("/201-employees"),Me=Array.isArray((Q=he.data)==null?void 0:Q.data)?he.data.data:Array.isArray(he.data)?he.data:[],be=String(t.USERID||t.id),De=Me.find(ee=>String(ee.dtruserid)===be);if(!De){g(null),E(!1);return}const ze=await le.get("/employee-designations",{params:{status:"all"}}),Z=(Array.isArray((ne=ze.data)==null?void 0:ne.data)?ze.data.data:[]).find(ee=>String(ee.emp_objid)===String(De.objid)&&String(ee.ispresent)==="1");g(Z||null)}catch{g(null)}finally{E(!1)}})()},[a,u,t]),y.useEffect(()=>{(async()=>{var Q;if(t&&(t.id||t.USERID)){const ne=t.id||t.USERID;console.log(` [DtrChecker] Fetching shift schedule for USERID: ${ne}`);try{const Me=(await le.get(`/employees/${ne}/shift-schedule`)).data;if(console.log(` [DtrChecker] Shift schedule response for ${(Q=Me.employee)==null?void 0:Q.NAME}`),Me&&Me.shiftSchedule&&Me.shiftSchedule.SHIFTNO){const be=Me.shiftSchedule;S({SHIFTNO:be.SHIFTNO,SHIFTNAME:be.SHIFTNAME,SHIFT_AMCHECKIN:be.SHIFT_AMCHECKIN,SHIFT_AMCHECKIN_START:be.SHIFT_AMCHECKIN_START,SHIFT_AMCHECKIN_END:be.SHIFT_AMCHECKIN_END,SHIFT_AMCHECKOUT:be.SHIFT_AMCHECKOUT,SHIFT_AMCHECKOUT_START:be.SHIFT_AMCHECKOUT_START,SHIFT_AMCHECKOUT_END:be.SHIFT_AMCHECKOUT_END,SHIFT_PMCHECKIN:be.SHIFT_PMCHECKIN,SHIFT_PMCHECKIN_START:be.SHIFT_PMCHECKIN_START,SHIFT_PMCHECKIN_END:be.SHIFT_PMCHECKIN_END,SHIFT_PMCHECKOUT:be.SHIFT_PMCHECKOUT,SHIFT_PMCHECKOUT_START:be.SHIFT_PMCHECKOUT_START,SHIFT_PMCHECKOUT_END:be.SHIFT_PMCHECKOUT_END})}else S(null)}catch(he){console.error(" [DtrChecker] Error fetching shift schedule:",he),S(null)}}})()},[t]),y.useEffect(()=>{(async()=>{var Q;if(t&&(t.id||t.USERID)){const ne=t.id||t.USERID;console.log(` [DtrChecker] Fetching locator data for USERID: ${ne}`);try{const he=await le.get(`/locator/entries/${ne}`);L(he.data||[]),console.log(` [DtrChecker] Loaded ${((Q=he.data)==null?void 0:Q.length)||0} locator entries`)}catch(he){console.error(" [DtrChecker] Error fetching locator data:",he),L([])}}})()},[t]),Array.isArray(k)&&k.filter(ve=>String(ve.LOCUSERID)===String((t==null?void 0:t.id)||(t==null?void 0:t.USERID)));const we=async ve=>{var Q,ne;ve.preventDefault(),M(""),$(""),w(!0);try{const he=await le.post("/auth/change-pin",{currentSsn:V.currentSsn,newPin:V.newSsn,confirmPin:V.confirmSsn});he.data.success?($("PIN changed successfully!"),W({currentSsn:"",newSsn:"",confirmSsn:""}),setTimeout(()=>{G(!1),$("")},2e3)):M(he.data.message||"Failed to change PIN")}catch(he){M(((ne=(Q=he.response)==null?void 0:Q.data)==null?void 0:ne.message)||"Failed to change PIN. Please try again.")}finally{w(!1)}};return y.useEffect(()=>{const ve=Q=>{T&&!Q.target.closest(".user-dropdown")&&H(!1)};return document.addEventListener("mousedown",ve),()=>{document.removeEventListener("mousedown",ve)}},[T]),s||Ae?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:s?"Checking authentication...":"Verifying PDS completion..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 p-3 rounded-xl",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Employee Portal"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Your personal HR information center"})]})]}),e.jsx("div",{className:"hidden md:flex items-center space-x-4",children:e.jsxs("div",{className:"relative user-dropdown",children:[e.jsxs("button",{onClick:()=>H(!T),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 transition-all duration-200",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 truncate",children:(t==null?void 0:t.NAME)||(t==null?void 0:t.name)||(t==null?void 0:t.firstname)+" "+(t==null?void 0:t.lastname)||"Employee"}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:(t==null?void 0:t.TITLE)||(t==null?void 0:t.title)||"Employee"}),e.jsxs("div",{className:"text-xs text-gray-400 truncate",children:["ID: ",(t==null?void 0:t.USERID)||(t==null?void 0:t.userid)||(t==null?void 0:t.id)||"N/A"]})]}),e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-md overflow-hidden relative",children:(()=>{const ve=K||(t==null?void 0:t.PHOTO);console.log(" [DtrChecker] Avatar render - photoToUse:",!!ve,"pdsPhoto:",!!K,"user.PHOTO:",!!(t!=null&&t.PHOTO));const Q=ve?typeof ve=="string"&&ve.startsWith("data:")?ve:`data:image/jpeg;base64,${ve}`:null;return console.log(" [DtrChecker] Avatar render - photoSrc:",!!Q),Q?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:Q,alt:(t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"User",className:"w-full h-full object-cover rounded-xl",onError:ne=>{ne.target.style.display="none",ne.target.nextSibling&&(ne.target.nextSibling.style.display="flex")}}),e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-lg absolute inset-0",style:{display:"none"},children:((t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"U").charAt(0).toUpperCase()})]}):e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-lg",children:((t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"U").charAt(0).toUpperCase()})})()}),e.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${T?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),T&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[e.jsxs("button",{onClick:()=>{G(!0),H(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1 1 21 9z"})}),e.jsx("span",{children:"Change PIN"})]}),(t==null?void 0:t.privilege)!==void 0&&(t==null?void 0:t.privilege)!==null&&(t==null?void 0:t.privilege)===3&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:()=>{n("/hris-management"),H(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{children:"Admin Panel"})]})]}),e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:()=>{r(),H(!1),n("/login")},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),e.jsx("span",{children:"Logout"})]})]})]})})]})}),e.jsx("div",{className:"bg-white border-b border-gray-200 px-6",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>{if(!oe){alert("Please complete your PDS first before accessing this feature.");return}l("dtr-check")},className:`px-6 py-3 text-sm font-semibold transition-all duration-200 border-b-2 ${a==="dtr-check"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"DTR Check"})]})}),e.jsx("button",{onClick:()=>l("my-pds"),className:`px-6 py-3 text-sm font-semibold transition-all duration-200 border-b-2 ${a==="my-pds"?"border-emerald-600 text-emerald-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{children:"My PDS"})]})}),e.jsx("button",{onClick:()=>{if(!oe){alert("Please complete your PDS first before accessing this feature.");return}l("201-files")},className:`px-6 py-3 text-sm font-semibold transition-all duration-200 border-b-2 ${a==="201-files"?"border-green-600 text-green-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{children:"201 Files"})]})}),e.jsx("button",{onClick:()=>{if(!oe){alert("Please complete your PDS first before accessing this feature.");return}l("payroll")},className:`px-6 py-3 text-sm font-semibold transition-all duration-200 border-b-2 ${a==="payroll"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xl font-bold",children:""}),e.jsx("span",{children:"Payroll"})]})})]})}),e.jsxs("main",{className:"flex-1 flex flex-col",children:[a==="dtr-check"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex-shrink-0",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-6",children:[e.jsxs("div",{className:"flex-1 max-w-xs",children:[e.jsx("label",{htmlFor:"dateFilter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Date Range"}),e.jsxs("select",{id:"dateFilter",value:o,onChange:ve=>i(ve.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm bg-white",children:[e.jsx("option",{value:"Today",children:"Today"}),e.jsx("option",{value:"Last 2 Weeks",children:"Last 2 Weeks"}),e.jsx("option",{value:"This Month",children:"This Month"}),e.jsx("option",{value:"Last Month",children:"Last Month"})]})]}),(o==="This Month"||o==="Last Month")&&se.length>0&&e.jsxs("div",{className:"flex-1 max-w-md",children:[e.jsx("label",{htmlFor:"periodFilter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Period"}),e.jsx("select",{id:"periodFilter",value:p,onChange:ve=>m(ve.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm bg-white",children:se.map(ve=>e.jsx("option",{value:ve.value,children:ve.label},ve.value))})]}),R&&e.jsxs("div",{className:"flex-1 max-w-md",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shift Schedule"}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"bg-blue-500 p-1.5 rounded flex-shrink-0",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-800 truncate",children:R.SHIFTNAME||`Shift #${R.SHIFTNO}`}),e.jsx("div",{className:"text-xs",children:e.jsxs("span",{className:"whitespace-nowrap flex flex-wrap gap-1",children:[e.jsxs("span",{className:"text-blue-600 font-medium",children:["AM-CHECKIN: ",e.jsx("span",{className:"text-blue-800 font-semibold",children:go(R.SHIFT_AMCHECKIN)||"--:--"})]}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsxs("span",{className:"text-green-600 font-medium",children:["AM-CHECKOUT: ",e.jsx("span",{className:"text-green-800 font-semibold",children:go(R.SHIFT_AMCHECKOUT)||"--:--"})]}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsxs("span",{className:"text-orange-600 font-medium",children:["PM-CHECKIN: ",e.jsx("span",{className:"text-orange-800 font-semibold",children:go(R.SHIFT_PMCHECKIN)||"--:--"})]}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsxs("span",{className:"text-purple-600 font-medium",children:["PM-CHECKOUT: ",e.jsx("span",{className:"text-purple-800 font-semibold",children:go(R.SHIFT_PMCHECKOUT)||"--:--"})]})]})})]})]})})]}),e.jsxs("div",{className:"flex-1 max-w-xs",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"View Mode"}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>h("My Shift"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center justify-center space-x-2 ${c==="My Shift"?"bg-gradient-to-r from-indigo-600 to-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("span",{children:"My Shift"})]}),e.jsxs("button",{onClick:()=>h("Raw Logs"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center justify-center space-x-2 ${c==="Raw Logs"?"bg-gradient-to-r from-indigo-600 to-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{children:"Raw Logs"})]})]})]}),e.jsx("div",{className:"flex justify-end items-end",children:e.jsx("button",{onClick:()=>F(!0),className:"w-12 h-12 bg-white text-blue-600 rounded-lg hover:bg-gray-50 flex items-center justify-center transition-all duration-200 border border-gray-300",title:"Print DTR",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})})})]})}),e.jsx("div",{className:"flex-1 bg-white overflow-hidden",children:c==="My Shift"?e.jsx(l1,{user:t,selectedFilter:o,shiftSchedule:R,locatorData:k,selectedPeriod:p,onLogsProcessed:D}):e.jsx(p1,{user:t,selectedFilter:o,locatorData:k,selectedPeriod:p,onLogsProcessed:O})})]}),a==="my-pds"&&e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[!oe&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-6 h-6 text-red-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-semibold",children:"PDS Completion Required"}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:Ie}),e.jsx("p",{className:"text-red-700 text-sm mt-2",children:"You must complete these required fields before accessing other features."})]})]})}),e.jsx(x1,{onBack:()=>{if(!oe){alert("Please complete your PDS first before accessing other features.");return}l("dtr-check")},onSave:async()=>{console.log("PDS saved successfully");try{const ve=await le.get("/pds-dtrchecker/me");if(ve.data.success&&ve.data.data){const Q=uf(ve.data.data);Q.valid?(ce(!0),ye("")):(ce(!1),ye(Q.message))}}catch(ve){console.error("Error re-checking PDS after save:",ve)}}})]}),a==="201-files"&&e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"bg-white border-r border-gray-200 px-4 py-6 w-48 flex-shrink-0",children:e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("button",{onClick:()=>x("leave-credits"),className:`py-3 px-4 border-r-2 font-medium text-sm transition-colors text-left ${u==="leave-credits"?"border-indigo-500 text-indigo-600 bg-indigo-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:"My Leave Credits"}),e.jsx("button",{onClick:()=>x("leave"),className:`py-3 px-4 border-r-2 font-medium text-sm transition-colors text-left ${u==="leave"?"border-indigo-500 text-indigo-600 bg-indigo-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:"Leave"}),e.jsx("button",{onClick:()=>x("travel"),className:`py-3 px-4 border-r-2 font-medium text-sm transition-colors text-left ${u==="travel"?"border-indigo-500 text-indigo-600 bg-indigo-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:"Travel"}),e.jsx("button",{onClick:()=>x("locator"),className:`py-3 px-4 border-r-2 font-medium text-sm transition-colors text-left ${u==="locator"?"border-indigo-500 text-indigo-600 bg-indigo-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:"Locator"})]})}),e.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[u==="leave-credits"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Current Designation"}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:b?e.jsx("div",{className:"text-sm text-gray-500",children:"Loading designation..."}):d?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Designation"}),e.jsx("div",{className:"font-medium",children:d.rankname||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Position"}),e.jsx("div",{className:"font-medium",children:d.position||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Department"}),e.jsx("div",{className:"font-medium",children:d.departmentname||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Appointment"}),e.jsx("div",{className:"font-medium",children:d.appointmentname||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Appointment Date"}),e.jsx("div",{className:"font-medium",children:d.appointmentdate?String(d.appointmentdate).slice(0,10):"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Status"}),e.jsx("div",{children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Present"})})]})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"Not available"})})]}),e.jsx(g1,{})]}),u==="leave"&&e.jsx(jE,{}),u==="travel"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between border-b",children:[e.jsx("div",{className:"font-semibold",children:"My Travel Records"}),e.jsx("button",{className:"text-sm text-blue-600",onClick:async()=>{var ve;f(!0);try{const Q=await le.get("/employee-travels/my");v(((ve=Q.data)==null?void 0:ve.data)||[])}catch(Q){console.error(Q)}finally{f(!1)}},children:"Refresh"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Travel No"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Purpose"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Destination"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Dates"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 text-sm",children:N?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-gray-500",children:"Loading"})}):(j||[]).length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-gray-500",children:"No travel records"})}):(j||[]).map(ve=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:ve.travelno}),e.jsx("td",{className:"px-4 py-2",children:ve.purpose}),e.jsx("td",{className:"px-4 py-2",children:ve.traveldestination}),e.jsx("td",{className:"px-4 py-2",children:ve.travel_dates||""}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${ve.travelstatus==="Approved"?"bg-green-100 text-green-800":ve.travelstatus==="Rescheduled"?"bg-yellow-100 text-yellow-800":ve.travelstatus==="Cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:ve.travelstatus})})]},ve.objid))})]})})]})}),u==="locator"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Under Development"}),e.jsx("p",{className:"text-gray-500",children:"Locator records feature is coming soon."})]})]})})]}),a==="payroll"&&e.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg shadow-lg p-8 text-white mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:" Payroll Information"}),e.jsx("p",{className:"text-purple-100",children:"Your Salary and Compensation Details"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Month"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"--"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Last Payslip"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"--"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Next Pay Date"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"--"})]})]}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-6 rounded",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-6 h-6 text-yellow-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Under Development"}),e.jsx("p",{className:"text-sm text-yellow-700 mb-4",children:"The Payroll module is currently under development. Soon you'll be able to:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm text-yellow-700 ml-4",children:[e.jsx("li",{children:"View your current and past payslips"}),e.jsx("li",{children:"Download payslip PDFs"}),e.jsx("li",{children:"View deductions breakdown (SSS, PhilHealth, Pag-IBIG, Tax)"}),e.jsx("li",{children:"Track loans and salary advances"}),e.jsx("li",{children:"View year-to-date earnings"}),e.jsx("li",{children:"Access BIR Form 2316 (Annual ITR)"}),e.jsx("li",{children:"View 13th month pay computation"})]}),e.jsxs("p",{className:"text-sm text-yellow-700 mt-4",children:[e.jsx("strong",{children:"Expected Release:"})," Integrated with DTR system for automatic computation"]})]})]})}),e.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-500 p-4 rounded mt-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("svg",{className:"w-5 h-5 text-purple-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-purple-700",children:[e.jsx("strong",{children:"Note:"})," Payroll calculations will be automatically based on your DTR attendance records to ensure accuracy."]})})]})})]})})]}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Change Your PIN"}),e.jsx("button",{onClick:()=>{G(!1),W({currentSsn:"",newSsn:"",confirmSsn:""}),M(""),$("")},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Security Notice:"})," Your PIN is used to access your personal time records. Keep it secure and don't share it with others."]})]})}),e.jsxs("form",{onSubmit:we,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentSsn",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Current PIN"}),e.jsx("input",{type:"password",id:"currentSsn",value:V.currentSsn,onChange:ve=>W({...V,currentSsn:ve.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your current PIN",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newSsn",className:"block text-sm font-semibold text-gray-700 mb-2",children:"New PIN"}),e.jsx("input",{type:"password",id:"newSsn",value:V.newSsn,onChange:ve=>W({...V,newSsn:ve.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your new PIN",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmSsn",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm New PIN"}),e.jsx("input",{type:"password",id:"confirmSsn",value:V.confirmSsn,onChange:ve=>W({...V,confirmSsn:ve.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Confirm your new PIN",required:!0})]}),_&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-800 text-sm",children:_})}),P&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-green-800 text-sm",children:P})}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{G(!1),W({currentSsn:"",newSsn:"",confirmSsn:""}),M(""),$("")},className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:B,className:"flex-1 px-4 py-3 bg-gradient-to-r from-indigo-600 to-blue-600 text-white rounded-xl font-semibold hover:from-indigo-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center space-x-2",children:B?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Changing..."})]}):e.jsx("span",{children:"Change PIN"})})]})]})]})})}),C&&c==="My Shift"&&e.jsx(kE,{user:t,selectedFilter:o,selectedPeriod:p,processedLogs:A,shiftSchedule:R,onClose:()=>F(!1)}),C&&c==="Raw Logs"&&e.jsx(ME,{user:t,selectedFilter:o,selectedPeriod:p,logs:I,onClose:()=>F(!1)})]})},yo=1,im=()=>{const{user:t}=Qt(),[s,r]=y.useState({}),[n,a]=y.useState(!0),l=t==null?void 0:t.usertype,o=(t==null?void 0:t.USERID)||(t==null?void 0:t.id);y.useEffect(()=>{(async()=>{var p,m;if(!o){r({}),a(!1);return}if(l===yo){r({isRootAdmin:!0}),a(!1);return}try{const u=await le.get("/auth/permissions");(p=u.data)!=null&&p.success&&((m=u.data)!=null&&m.permissions)?r(u.data.permissions):r({})}catch(u){console.error("Error fetching permissions:",u),r({})}finally{a(!1)}})()},[o,l]);const i=y.useCallback((h,p)=>{if(s.isRootAdmin||l===yo)return!0;if(!h||!p||!s||Object.keys(s).length===0)return!1;if(s["*"])return s["*"][p]===!0;const m=s[h];return m?typeof m=="object"&&!Array.isArray(m)?{read:m.canread,create:m.cancreate,update:m.canupdate,delete:m.candelete}[p]===!0:Array.isArray(m)?m.includes(p):!1:!1},[s,l]),c=y.useCallback(h=>{if(s.isRootAdmin||l===yo)return!0;if(!h||!s||Object.keys(s).length===0)return!1;if(s["*"])return s["*"].canaccesspage===!0;const p=s[h];return p?typeof p=="object"&&"canaccesspage"in p?p.canaccesspage===!0:Array.isArray(p)?p.length>0:Object.keys(p).length>0:!1},[s,l]);return{can:i,canAccessPage:c,permissions:s,loading:n,isRootAdmin:s.isRootAdmin||l===yo}},PE=t=>t&&typeof t=="string"?t.slice(0,10):null,FE=t=>{if(!t)return null;if(typeof t=="string"){const s=t.match(/(\d{2}):(\d{2})/);return s?`${s[1]}:${s[2]}`:null}return null},UE=t=>{if(!t)return"";const s=new Date(t);if(isNaN(s.getTime()))return t;const r=String(s.getDate()).padStart(2,"0"),n=s.toLocaleString("en-US",{month:"short"}).toUpperCase(),a=s.getFullYear(),l=s.toLocaleString("en-US",{weekday:"short"}).toUpperCase();return`${r}-${n}-${a}, ${l}`},$E=(t,s)=>{const r=[];let n=new Date(t);const a=new Date(s);for(;n<=a&&(r.push(n.toISOString().slice(0,10)),n.setDate(n.getDate()+1),!(r.length>1e3)););return r},mf=t=>{const s=new Date(t);return s.getDay()===0||s.getDay()===6};function HE({logs:t=[],selectedEmployee:s,startDate:r,endDate:n}){const[a,l]=y.useState([]);y.useEffect(()=>{console.log("DEBUG: RawLogsView_Management logs:",t);const i={};t.forEach(p=>{const m=PE(p.CHECKTIME||p.checktime||p.CheckTime||p.DATE);m&&(i[m]||(i[m]=[]),i[m].push(p))});const h=$E(r,n).map(p=>{const m=i[p]||[],u=[],x=[];return m.forEach(j=>{const v=FE(j.CHECKTIME||j.checktime||j.CheckTime);if(!v)return;const[N]=v.split(":").map(Number);N<12?u.push({time:v}):x.push({time:v})}),{date:UE(p),dateStr:p,amLogs:u,pmLogs:x,isWeekend:mf(p),remarks:mf(p)?"Weekend":""}});l(h)},[t,r,n]);const o=(i,c)=>i?i.split("; ").map((h,p,m)=>e.jsxs("span",{style:h==="Weekend"||c?{color:"blue"}:{},children:[h,p<m.length-1&&"; "]},p)):null;return s?a.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No logs found for the selected date range."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Date"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"AM Logs"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"PM Logs"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Remarks"})]})}),e.jsx("tbody",{children:a.map((i,c)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:i.date}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:i.amLogs&&i.amLogs.length>0?i.amLogs.map((h,p)=>h.time).join(", "):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:i.pmLogs&&i.pmLogs.length>0?i.pmLogs.map((h,p)=>h.time).join(", "):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:o(i.remarks,i.isWeekend)})]},c))})]})}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Please select an employee to view time logs."})})}const BE="modulepreload",zE=function(t){return"/"+t},hf={},WE=function(s,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),i=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=zE(c),c in hf)return;hf[c]=!0;const h=c.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":BE,h||(m.as="script"),m.crossOrigin="",m.href=c,i&&m.setAttribute("nonce",i),document.head.appendChild(m),h)return new Promise((u,x)=>{m.addEventListener("load",u),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function l(o){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o}return a.then(o=>{for(const i of o||[])i.status==="rejected"&&l(i.reason);return s().catch(l)})};function L0(t){return[]}function I0(t,s){const r=t.reduce((i,c)=>i+(Number(c.LATE)||0),0),n=t.reduce((i,c)=>i+(Number(c.TOTAL_HOURS)||0),0),a=Array(s.length).fill(""),l=s.findIndex(i=>i.field==="LATE"),o=s.findIndex(i=>i.field==="TOTAL_HOURS");return l!==-1&&(a[l]=r),o!==-1&&(a[o]=n),a[0]="TOTALS:",a}function VE(t,s,r){if(!t||t.length===0)return;s||(s=Object.keys(t[0]).map(x=>({header:x,field:x})));const n=L0().map(u=>u.map(x=>`"${x}"`).join(",")),a=s.map(u=>`"${u.header}"`).join(","),l=t.map(u=>s.map(x=>{let j=u[x.field];return(typeof j>"u"||j===null)&&(j=""),`"${String(j).replace(/"/g,'""')}"`}).join(",")),o=I0(t,s).map(u=>`"${u}"`).join(","),c=[...n,a,...l,o].join(`
`),h=new Blob([c],{type:"text/csv"}),p=window.URL.createObjectURL(h),m=document.createElement("a");m.href=p,m.download="time_logs.csv",m.click(),window.URL.revokeObjectURL(p)}function YE(t,s,r){!t||t.length===0||WE(()=>import("./xlsx-D_0l8YDs.js"),[]).then(n=>{s||(s=Object.keys(t[0]).map(u=>({header:u,field:u})));const a=L0(),l=t.map(m=>Object.fromEntries(s.map(u=>[u.header,m[u.field]??""]))),o=I0(t,s),i={};s.forEach((m,u)=>{i[m.header]=o[u]});const c=[...a.map(m=>{const u={};return m.forEach((x,j)=>{u[`_col${j}`]=x}),u}),...l,i],h=n.utils.json_to_sheet(c,{skipHeader:!1}),p=n.utils.book_new();n.utils.book_append_sheet(p,h,"Time Logs"),n.writeFile(p,"time_logs.xlsx")})}const qE=t=>{if(!t)return"";const s=new Date(t);if(isNaN(s.getTime()))return t;const r=String(s.getDate()).padStart(2,"0"),n=s.toLocaleString("en-US",{month:"short"}),a=s.getFullYear(),l=s.toLocaleString("en-US",{weekday:"short"});return`${r}-${n}-${a}, ${l}`},M0=t=>{if(!t)return!1;const r=new Date(t).getDay();return r===0||r===6},bo=t=>{if(!t)return"";if(/^\d{2}:\d{2}$/.test(t))return t;const s=t.match(/(\d{2}):(\d{2})/);return s?`${s[1]}:${s[2]}`:""},bt=t=>{if(!t)return"";if(/^\d{2}:\d{2}$/.test(t))return t;if(typeof t=="string"){const s=t.match(/T(\d{2}):(\d{2})/);if(s)return`${s[1]}:${s[2]}`;const r=t.match(/(\d{2}):(\d{2})/);if(r)return`${r[1]}:${r[2]}`}return""},ui=t=>{if(!t)return 0;const s=bt(t);if(!s)return 0;const r=s.match(/^(\d{2}):/);return r?parseInt(r[1],10):0},ds=t=>t?t.split(/[ T]/)[0]:"",Lt=t=>{if(!t||typeof t!="string")return 0;const[s,r]=t.split(":").map(Number);return s*60+r},mi=(t,s)=>!t||!s?[null,null]:[Lt(t),Lt(s)],hi=(t,s,r)=>{if(!t||!s||!r)return!1;const n=Lt(t);return n>=s&&n<=r},KE=(t,s,r)=>{if(!t||t.length===0)return{remarks:"",locators:[]};const n=t.filter(l=>ds(l.LOCDATE)===s&&String(l.LOCUSERID)===String(r));return{remarks:n.map(l=>`(${l.LOCNO})`).filter(Boolean).join("; "),locators:n}},GE=(t,s,r)=>{if(console.log(" [LEAVE REMARKS] getLeaveRemarksForDate called with:",{dateStr:s,userId:r,leaveDataLength:t==null?void 0:t.length}),!t||t.length===0)return console.log(" [LEAVE REMARKS] No leave data available"),{remarks:"",leaveRecords:[]};const n=t.filter(o=>{if(o.leaveDates&&o.leaveDates.length>0&&o.leaveDates.some(m=>{const x=ds(m.LEAVEDATE)===s,j=String(o.USERID)===String(r);return x&&j}))return console.log(" [LEAVE REMARKS] Found matching leave (new structure):",{leaveRefNo:o.LEAVEREFNO,leaveType:o.LeaveName,remarks:o.LEAVEREMARKS}),!0;const i=ds(o.LEAVEDATE),c=i===s,h=String(o.USERID)===String(r);return console.log(" [LEAVE REMARKS] Checking leave (old structure):",{leaveDate:i,targetDate:s,leaveUserId:o.USERID,targetUserId:r,dateMatch:c,userMatch:h,leaveType:o.LeaveName,leaveRefNo:o.LEAVEREFNO}),c&&h});if(n.length===0)return console.log(" [LEAVE REMARKS] No leaves found for date and user"),{remarks:"",leaveRecords:[]};const a=n.map(o=>({...o,type:"leave"})),l=a.map(o=>`(${o.LEAVEREFNO||"N/A"})`).join("; ");return console.log(" [LEAVE REMARKS] Final result:",{remarks:l,leaveRecords:a}),{remarks:l,leaveRecords:a}},QE=(t,s,r)=>{if(console.log(" [TRAVEL REMARKS] getTravelRemarksForDate called with:",{dateStr:s,userId:r,travelDataLength:t==null?void 0:t.length}),!t||t.length===0)return console.log(" [TRAVEL REMARKS] No travel data available"),{remarks:"",travelRecords:[]};const n=t.filter(o=>{if(o.travelDates&&o.travelDates.length>0&&o.travelDates.some(m=>{const x=ds(m.TRAVELDATE)===s,j=String(m.USERID)===String(r);return x&&j}))return console.log(" [TRAVEL REMARKS] Found matching travel (new structure):",{travelNo:o.TRAVELNO,purpose:o.PURPOSE,destination:o.TRAVELDESTINATION}),!0;const i=ds(o.TRAVELDATE),c=i===s,h=String(o.USERID)===String(r);return console.log(" [TRAVEL REMARKS] Checking travel (old structure):",{travelDate:i,targetDate:s,travelUserId:o.USERID,targetUserId:r,dateMatch:c,userMatch:h,travelNo:o.TRAVELNO}),c&&h});if(n.length===0)return console.log(" [TRAVEL REMARKS] No travels found for date and user"),{remarks:"",travelRecords:[]};const a=n.map(o=>({...o,type:"travel"})),l=a.map(o=>`(${o.TRAVELNO||"N/A"})`).join("; ");return console.log(" [TRAVEL REMARKS] Final result:",{remarks:l,travelRecords:a}),{remarks:l,travelRecords:a}},ZE=(t,s)=>{if(!t||t.length===0)return"";const r=t.filter(n=>ds(n.HOLIDAYDATE)===s);return r.length===0?"":r.map(n=>n.HOLIDAYNAME||"Holiday").join("; ")},JE=(t,s,r)=>!t||t.length===0?!1:t.some(n=>n.travelDates&&n.travelDates.length>0&&n.travelDates.some(o=>{const c=ds(o.TRAVELDATE)===s,h=String(o.USERID)===String(r);return c&&h})?!0:ds(n.TRAVELDATE)===s&&String(n.USERID)===String(r)),fi=(t,s,r)=>{if(console.log(" [HAS LEAVE] hasLeaveForDate called with:",{dateStr:s,userId:r,leaveDataLength:t==null?void 0:t.length}),!t||t.length===0)return console.log(" [HAS LEAVE] No leave data available"),!1;const n=t.some(a=>{if(a.leaveDates&&a.leaveDates.length>0&&a.leaveDates.some(h=>{const m=ds(h.LEAVEDATE)===s,u=String(a.USERID)===String(r);return m&&u}))return console.log(" [HAS LEAVE] Found matching leave (new structure):",{leaveRefNo:a.LEAVEREFNO,leaveType:a.LeaveName}),!0;const l=ds(a.LEAVEDATE),o=l===s,i=String(a.USERID)===String(r);return console.log(" [HAS LEAVE] Checking leave (old structure):",{leaveDate:l,targetDate:s,leaveUserId:a.USERID,targetUserId:r,dateMatch:o,userMatch:i,leaveType:a.LeaveName,willInclude:o&&i}),o&&i});return console.log(" [HAS LEAVE] Result:",n),n},XE=(t,s,r)=>!t||t.length===0?!1:t.some(n=>{if(n.leaveDates&&n.leaveDates.length>0&&n.leaveDates.some(i=>{const h=ds(i.LEAVEDATE)===s,p=String(n.USERID)===String(r),m=n.LeaveName&&n.LeaveName.toLowerCase().includes("ob");return h&&p&&m}))return!0;const a=ds(n.LEAVEDATE),l=n.LeaveName&&n.LeaveName.toLowerCase().includes("ob");return a===s&&String(n.USERID)===String(r)&&l}),tu=(t,s,r)=>!t||t.length===0?!1:t.some(n=>n.travelDates&&n.travelDates.length>0&&n.travelDates.some(o=>{const c=ds(o.TRAVELDATE)===s,h=String(o.USERID)===String(r);return c&&h})?!0:ds(n.TRAVELDATE)===s&&String(n.USERID)===String(r)),eS=(t,s,r,n)=>{const a=t&&t.trim()!=="",l=s&&s.trim()!=="",o=r&&r.trim()!=="",i=n&&n.trim()!=="";return a&&l&&o&&i||a&&l&&i&&!o||a&&o&&i&&!l||a&&i?1:a&&l&&!o&&!i||!a&&!l&&o&&i||!a&&l&&o&&i||a&&l&&o&&!i||a&&!l&&o&&!i||!a&&l&&!o&&i?.5:0},tS=(t,s,r,n,a,l,o,i,c)=>{const h=M0(a),p=c&&c.some(u=>ds(u.HOLIDAYDATE)===a);if(fi(o,a,l)||JE(i,a,l))return 1;const m=eS(t,s,r,n);return(h||p)&&m===0?0:m},sS=(t,s)=>{const r=[];let n=new Date(t);const a=new Date(s);for(;n<=a;)r.push(n.toISOString().slice(0,10)),n.setDate(n.getDate()+1);return r},vo=[{header:"DATE",field:"DATE"},{header:"AM-CHECKIN",field:"AM_CHECKIN"},{header:"AM-CHECKOUT",field:"AM_CHECKOUT"},{header:"PM-CHECKIN",field:"PM_CHECKIN"},{header:"PM-CHECKOUT",field:"PM_CHECKOUT"},{header:"LATE",field:"LATE"},{header:"DAYS",field:"DAYS"},{header:"REMARKS",field:"REMARKS"},{header:"ACTION",field:"ACTION"}];function rS(t,s,r,n,a,l,o,i,c){if(!s)return console.log(" No shift schedule found for processing"),[];const h=s!=null&&s.SHIFT_AMCHECKOUT_START?bt(s.SHIFT_AMCHECKOUT_START):"11:00",p=s!=null&&s.SHIFT_AMCHECKOUT_END?bt(s.SHIFT_AMCHECKOUT_END):"12:30",m=s!=null&&s.SHIFT_PMCHECKIN_START?bt(s.SHIFT_PMCHECKIN_START):"12:31",u=s!=null&&s.SHIFT_PMCHECKIN_END?bt(s.SHIFT_PMCHECKIN_END):"14:00",[x,j]=mi(h,p),[v,N]=mi(m,u);console.log(" Time windows:",{amCheckOutStart:h,amCheckOutEnd:p,pmCheckInStart:m,pmCheckInEnd:u,amCheckOutStartMin:x,amCheckOutEndMin:j,pmCheckInStartMin:v,pmCheckInEndMin:N});const f={};return t.forEach(g=>{const b=ds(g.CHECKTIME||g.DATE||g.date);b&&(f[b]||(f[b]=[]),f[b].push(g))}),sS(i,c).map(g=>{const b=f[g]||[];let E="";const R=b.filter(oe=>{const ce=bt(oe.CHECKTIME||oe.DATE||oe.date);return ce&&Lt(ce)<12*60}).sort((oe,ce)=>Lt(bt(oe.CHECKTIME||oe.DATE||oe.date))-Lt(bt(ce.CHECKTIME||ce.DATE||ce.date)));R.length>0&&(E=bt(R[0].CHECKTIME||R[0].DATE||R[0].date));let S="";const k=b.filter(oe=>{const ce=bt(oe.CHECKTIME||oe.DATE||oe.date);return ce&&hi(ce,x,j)}).sort((oe,ce)=>Lt(bt(oe.CHECKTIME||oe.DATE||oe.date))-Lt(bt(ce.CHECKTIME||ce.DATE||ce.date)));k.length>0&&(S=bt(k[0].CHECKTIME||k[0].DATE||k[0].date));let L="";const A=b.filter(oe=>{const ce=bt(oe.CHECKTIME||oe.DATE||oe.date);return ce&&hi(ce,v,N)}).sort((oe,ce)=>Lt(bt(oe.CHECKTIME||oe.DATE||oe.date))-Lt(bt(ce.CHECKTIME||ce.DATE||ce.date)));A.length>0&&(L=bt(A[0].CHECKTIME||A[0].DATE||A[0].date));let D="";const I=b.filter(oe=>{const ce=bt(oe.CHECKTIME||oe.DATE||oe.date);return ce&&Lt(ce)>N}).sort((oe,ce)=>Lt(bt(ce.CHECKTIME||ce.DATE||ce.date))-Lt(bt(oe.CHECKTIME||oe.DATE||oe.date)));I.length>0&&(D=bt(I[0].CHECKTIME||I[0].DATE||I[0].date));let O=0;if(E&&s.SHIFT_AMCHECKIN){const oe=Lt(bt(s.SHIFT_AMCHECKIN)),ce=Lt(E);ce>oe&&(O+=ce-oe)}if(L&&s.SHIFT_PMCHECKIN){const oe=Lt(bt(s.SHIFT_PMCHECKIN)),ce=Lt(L);ce>oe&&(O+=ce-oe)}const C=tS(E,S,L,D,g,o,n,a,l),F=new Date(g),U=M0(g),Y=fi(n,g,o),G=tu(a,g,o),V=l&&l.some(oe=>ds(oe.HOLIDAYDATE)===g),W=KE(r,g,o),_=GE(n,g,o),M=QE(a,g,o),P=ZE(l,g),$=[],B=[E,S,L,D].filter(oe=>oe&&oe.trim()!=="").length,w=new Date;w.setHours(0,0,0,0);const T=new Date(g);T.setHours(0,0,0,0);const H=T>w,K=T.getTime()===w.getTime();console.log(" [ABSENT DEBUG] Processing date:",g,{hasLeave:Y,hasTravel:G,hasHoliday:V,timeLogCount:B,isFutureDate:H,isCurrentDate:K,currentDate:T.toDateString(),today:w.toDateString(),timeLogs:{AM_CHECKIN:E||"empty",AM_CHECKOUT:S||"empty",PM_CHECKIN:L||"empty",PM_CHECKOUT:D||"empty"}}),U?($.push("Weekend"),console.log(' [ABSENT DEBUG] Weekend detected, added "Weekend" remark')):(console.log(" [ABSENT DEBUG] Weekday analysis:",{timeLogCount:B,hasLeave:Y,hasTravel:G,hasHoliday:V,isFutureDate:H,isCurrentDate:K,currentDate:T.toDateString(),today:w.toDateString(),timeLogs:{AM_CHECKIN:E||"empty",AM_CHECKOUT:S||"empty",PM_CHECKIN:L||"empty",PM_CHECKOUT:D||"empty"}}),!Y&&!G&&!V&&B===0&&!H&&!K?($.push("Absent"),console.log(' [ABSENT DEBUG] ABSENT CONDITION MET - Added "Absent" remark')):console.log(" [ABSENT DEBUG] Absent condition NOT met:",{hasLeave:Y?"YES - has leave":"NO",hasTravel:G?"YES - has travel":"NO",hasHoliday:V?"YES - has holiday":"NO",timeLogCount:`${B} logs (need 0 for absent)`,isFutureDate:H?"YES - future date":"NO",isCurrentDate:K?"YES - current date":"NO",condition:`!hasLeave(${!Y}) && !hasTravel(${!G}) && !hasHoliday(${!V}) && timeLogCount===0(${B===0}) && !isFutureDate(${!H}) && !isCurrentDate(${!K})`})),console.log(" [ABSENT DEBUG] Final staticRemarks:",$);const J=[W.remarks,_.remarks,M.remarks,P].filter(Boolean),X=[...$,...J];console.log(" [ABSENT DEBUG] Remarks combination for date",g,{staticRemarks:$,dynamicRemarks:{locator:W.remarks||"empty",leave:_.remarks||"empty",travel:M.remarks||"empty",holiday:P||"empty"},allRemarks:X});let pe="";return X.length>0&&(pe=X.join("; ")),console.log(" [ABSENT DEBUG] Final remarks for date",g,":",pe),console.log(" [ABSENT DEBUG] Leave/Travel check for date",g,{hasLeave:Y,hasTravel:G,leaveDataLength:n==null?void 0:n.length,travelDataLength:a==null?void 0:a.length}),console.log(" [ABSENT DEBUG] Weekday analysis:",{date:g,timeLogCount:B,hasLeave:Y,hasTravel:G,hasHoliday:V,isFutureDate:F>w,currentDateObj:F,todayObj:w,currentDateString:F.toDateString(),todayString:w.toDateString(),comparison:`${F.getTime()} > ${w.getTime()} = ${F>w}`,timeLogs:{AM_CHECKIN:E||"empty",AM_CHECKOUT:S||"empty",PM_CHECKIN:L||"empty",PM_CHECKOUT:D||"empty"}}),{DATE:qE(g),DATE_RAW:g,AM_CHECKIN:E,AM_CHECKOUT:S,PM_CHECKIN:L,PM_CHECKOUT:D,LATE:O,DAYS:C,REMARKS:pe,REMARKS_DATA:{locatorRecords:W.locators||[],leaveRecords:_.leaveRecords||[],travelRecords:M.travelRecords||[]},isWeekend:U,hasHoliday:V}})}const nS=t=>{if(console.log(" generateDepartureTimeOptions called with:",{shiftSchedule:t}),!t)return console.log(" No shift schedule, returning full 24 hours"),{hours:Array.from({length:24},(h,p)=>p.toString().padStart(2,"0")),minutes:Array.from({length:12},(h,p)=>(p*5).toString().padStart(2,"0"))};const s=t.SHIFT_AMCHECKIN_START||t.SHIFT_AMCHECKIN_START_TIME,r=t.SHIFT_PMCHECKOUT_END||t.SHIFT_PMCHECKOUT_END_TIME;if(console.log(" Departure time range:",{amCheckInStart:s,pmCheckOutEnd:r}),!s||!r)return console.log(" Missing time range, returning full 24 hours"),{hours:Array.from({length:24},(h,p)=>p.toString().padStart(2,"0")),minutes:Array.from({length:12},(h,p)=>(p*5).toString().padStart(2,"0"))};const n=bt(s),a=bt(r);if(console.log(" Extracted time strings:",{startTimeStr:n,endTimeStr:a}),!n||!a)return console.log(" Could not extract time strings, using full 24 hours"),{hours:Array.from({length:24},(h,p)=>p.toString().padStart(2,"0")),minutes:Array.from({length:12},(h,p)=>(p*5).toString().padStart(2,"0"))};const l=ui(n),o=ui(a);console.log(" Parsed hours for departure:",{startHour:l,endHour:o});const i=[];if(l<=o)for(let h=l;h<=o;h++)i.push(h.toString().padStart(2,"0"));else{for(let h=l;h<=23;h++)i.push(h.toString().padStart(2,"0"));for(let h=0;h<=o;h++)i.push(h.toString().padStart(2,"0"))}const c=Array.from({length:12},(h,p)=>(p*5).toString().padStart(2,"0"));return console.log(" Generated departure time options:",{hours:i,minutes:c}),{hours:i,minutes:c}},aS=t=>{if(console.log(" generateArrivalTimeOptions called with:",{shiftSchedule:t}),!t)return console.log(" No shift schedule, returning full 24 hours"),{hours:Array.from({length:24},(h,p)=>p.toString().padStart(2,"0")),minutes:Array.from({length:12},(h,p)=>(p*5).toString().padStart(2,"0"))};const s=t.SHIFT_AMCHECKIN_START||t.SHIFT_AMCHECKIN_START_TIME,r=t.SHIFT_PMCHECKOUT_END||t.SHIFT_PMCHECKOUT_END_TIME;if(console.log(" Arrival time range:",{amCheckInStart:s,pmCheckOutEnd:r}),!s||!r)return console.log(" Missing time range, returning full 24 hours"),{hours:Array.from({length:24},(h,p)=>p.toString().padStart(2,"0")),minutes:Array.from({length:12},(h,p)=>(p*5).toString().padStart(2,"0"))};const n=bt(s),a=bt(r);if(console.log(" Extracted time strings for arrival:",{startTimeStr:n,endTimeStr:a}),!n||!a)return console.log(" Could not extract time strings, using full 24 hours"),{hours:Array.from({length:24},(h,p)=>p.toString().padStart(2,"0")),minutes:Array.from({length:12},(h,p)=>(p*5).toString().padStart(2,"0"))};const l=ui(n),o=ui(a);console.log(" Parsed hours for arrival:",{startHour:l,endHour:o});const i=[];if(l<=o)for(let h=l;h<=o;h++)i.push(h.toString().padStart(2,"0"));else{for(let h=l;h<=23;h++)i.push(h.toString().padStart(2,"0"));for(let h=0;h<=o;h++)i.push(h.toString().padStart(2,"0"))}const c=Array.from({length:12},(h,p)=>(p*5).toString().padStart(2,"0"));return console.log(" Generated arrival time options:",{hours:i,minutes:c}),{hours:i,minutes:c}},lS=({isOpen:t,onClose:s,onSubmit:r,date:n,columnType:a,employee:l,shiftSchedule:o})=>{const[i,c]=y.useState({LOCNO:"",LOCUSERID:"",LOCDATE:"",LOCDESTINATION:"",LOCPURPOSE:"",LOCTIMEDEPARTURE:"",LOCTIMEARRIVAL:"",LOCENTRYBY:"1",LOCENTRYDATE:"",LOCSTATUS:"ACTIVE"}),[h,p]=y.useState(!1),[m,u]=y.useState({hours:Array.from({length:24},(U,Y)=>Y.toString().padStart(2,"0")),minutes:Array.from({length:12},(U,Y)=>(Y*5).toString().padStart(2,"0"))}),[x,j]=y.useState({hours:Array.from({length:24},(U,Y)=>Y.toString().padStart(2,"0")),minutes:Array.from({length:12},(U,Y)=>(Y*5).toString().padStart(2,"0"))}),[v,N]=y.useState(""),[f,d]=y.useState(null),[g,b]=y.useState(null),[E,R]=y.useState(!1),S=async(U,Y)=>{try{R(!0),console.log(" [LOCATOR FORM] Getting existing time logs for:",{userId:U,locatorDate:Y});const G=await le.get("/dtr/logs/locator",{params:{userId:U,date:Y}});if(console.log(" [LOCATOR FORM] DTR logs response:",G.data),G.data&&G.data.length>0){const V=k(G.data,Y,o);console.log(" [LOCATOR FORM] Processed logs:",V),b(V||null)}else console.log(" [LOCATOR FORM] No time logs found for this date"),b(null)}catch(G){console.error("Error getting existing time logs for locator:",G),b(null)}finally{R(!1)}},k=(U,Y,G)=>{if(!U||U.length===0)return null;console.log(" [LOCATOR FORM] Processing logs for date:",Y),console.log(" [LOCATOR FORM] Raw logs:",U),console.log(" [LOCATOR FORM] Shift schedule:",G);const V=U.filter(Ie=>ds(Ie.CHECKTIME||Ie.DATE||Ie.date)===Y);if(V.length===0)return console.log(" [LOCATOR FORM] No logs found for date:",Y),null;console.log(" [LOCATOR FORM] Logs for day:",V);const W=G!=null&&G.SHIFT_AMCHECKOUT_START?bt(G.SHIFT_AMCHECKOUT_START):"11:00",_=G!=null&&G.SHIFT_AMCHECKOUT_END?bt(G.SHIFT_AMCHECKOUT_END):"12:30",M=G!=null&&G.SHIFT_PMCHECKIN_START?bt(G.SHIFT_PMCHECKIN_START):"12:31",P=G!=null&&G.SHIFT_PMCHECKIN_END?bt(G.SHIFT_PMCHECKIN_END):"14:00",[$,B]=mi(W,_),[w,T]=mi(M,P);let H="";const K=V.filter(Ie=>{const ye=bt(Ie.CHECKTIME||Ie.DATE||Ie.date);return ye&&Lt(ye)<12*60}).sort((Ie,ye)=>Lt(bt(Ie.CHECKTIME||Ie.DATE||Ie.date))-Lt(bt(ye.CHECKTIME||ye.DATE||ye.date)));K.length>0&&(H=bt(K[0].CHECKTIME||K[0].DATE||K[0].date));let J="";const X=V.filter(Ie=>{const ye=bt(Ie.CHECKTIME||Ie.DATE||Ie.date);return ye&&hi(ye,$,B)}).sort((Ie,ye)=>Lt(bt(Ie.CHECKTIME||Ie.DATE||Ie.date))-Lt(bt(ye.CHECKTIME||ye.DATE||ye.date)));X.length>0&&(J=bt(X[0].CHECKTIME||X[0].DATE||X[0].date));let pe="";const oe=V.filter(Ie=>{const ye=bt(Ie.CHECKTIME||Ie.DATE||Ie.date);return ye&&hi(ye,w,T)}).sort((Ie,ye)=>Lt(bt(Ie.CHECKTIME||Ie.DATE||Ie.date))-Lt(bt(ye.CHECKTIME||ye.DATE||ye.date)));oe.length>0&&(pe=bt(oe[0].CHECKTIME||oe[0].DATE||oe[0].date));let ce="";const Ae=V.filter(Ie=>{const ye=bt(Ie.CHECKTIME||Ie.DATE||Ie.date);return ye&&Lt(ye)>T}).sort((Ie,ye)=>Lt(bt(ye.CHECKTIME||ye.DATE||ye.date))-Lt(bt(Ie.CHECKTIME||Ie.DATE||Ie.date)));Ae.length>0&&(ce=bt(Ae[0].CHECKTIME||Ae[0].DATE||Ae[0].date));const Be={AM_CHECKIN:H,AM_CHECKOUT:J,PM_CHECKIN:pe,PM_CHECKOUT:ce};return console.log(" [LOCATOR FORM] Final result:",Be),Be},L=async()=>{var U,Y,G;try{const V=new Date(n),W=V.getFullYear().toString().slice(-2),_=String(V.getMonth()+1).padStart(2,"0"),M=String(V.getDate()).padStart(2,"0"),P=`${W}${_}${M}`;console.log(" Generating locator number for:",{year:W,month:_,day:M,locatorDate:n}),console.log(" API call parameters:",{year:V.getFullYear(),month:V.getMonth()+1});const $=await le.get("/locator/count",{params:{year:V.getFullYear(),month:V.getMonth()+1}});if(console.log(" Count response:",$),console.log(" Response data:",$.data),console.log(" Response status:",$.status),$.data&&$.data.success){const B=$.data.count||0,w=String(B+1).padStart(3,"0"),T=`${P}LE-${w}`;return console.log(` Generated locator number: ${T} (found ${B} existing records for ${W}-${_})`),T}else throw console.error(" API response not successful:",$.data),new Error(`API returned unsuccessful response: ${((U=$.data)==null?void 0:U.message)||"Unknown error"}`)}catch(V){console.error(" Error generating locator number:",V),console.error(" Error details:",(Y=V.response)==null?void 0:Y.data),console.error(" Error status:",(G=V.response)==null?void 0:G.status),console.error(" Error message:",V.message);const W=new Date(n),_=W.getFullYear().toString().slice(-2),M=String(W.getMonth()+1).padStart(2,"0"),P=String(W.getDate()).padStart(2,"0"),$=`${_}${M}${P}`,B=String(Math.floor(Date.now()/1e3)%1e3).padStart(3,"0"),w=`${$}LE-${B}`;return console.log(" Using fallback locator number:",w),w}};y.useEffect(()=>{if(console.log(" LocatorForm useEffect triggered:",{isOpen:t,employee:l,date:n,columnType:a,shiftSchedule:o}),t&&l&&n&&o){S(l.USERID,n);const U=nS(o),Y=aS(o);u(U),j(Y),console.log(" Generated time options for form:",{departureOptions:U,arrivalOptions:Y}),(async()=>{const V=await L();c({LOCNO:V,LOCUSERID:l.USERID,LOCDATE:n,LOCDESTINATION:"",LOCPURPOSE:"",LOCTIMEDEPARTURE:"",LOCTIMEARRIVAL:"",LOCENTRYBY:"1",LOCENTRYDATE:new Date().toISOString(),LOCSTATUS:"ACTIVE"})})(),N(""),d(null)}},[t,l,n,a,o]);const A=(U,Y)=>{c(G=>({...G,[U]:Y})),(U==="LOCTIMEDEPARTURE"||U==="LOCTIMEARRIVAL")&&N(""),d(null)},D=y.useCallback((U,Y,G)=>{const V=i[G]||"",[W,_]=V.split(":");let M=W||"",P=_||"";U==="hours"?M=Y:U==="minutes"&&(P=Y);let $="";M&&P?$=`${M}:${P}`:M?$=`${M}:`:P&&($=`:${P}`),c(B=>({...B,[G]:$})),d(null)},[i]),I=y.useCallback(U=>{if(!U)return{hours:"",minutes:""};const[Y,G]=U.split(":");return{hours:Y||"",minutes:G||""}},[]),O=async U=>{if(U.preventDefault(),!i.LOCUSERID){d("Employee is required.");return}if(!i.LOCDATE){d("Date is required.");return}if(!i.LOCDESTINATION){d("Destination is required.");return}if(!i.LOCPURPOSE){d("Purpose is required.");return}if(i.LOCTIMEDEPARTURE&&!/^\d{2}:\d{2}$/.test(i.LOCTIMEDEPARTURE)){N("Time departure must be in HH:MM format");return}if(i.LOCTIMEARRIVAL&&!/^\d{2}:\d{2}$/.test(i.LOCTIMEARRIVAL)){N("Time arrival must be in HH:MM format");return}p(!0),d(null),N("");const Y={...i,LOCTIMEDEPARTURE:i.LOCTIMEDEPARTURE||null,LOCTIMEARRIVAL:i.LOCTIMEARRIVAL||null,LOCENTRYDATE:new Date().toISOString()};console.log(" Submitting locator data:",Y);try{await r(Y),s()}catch(G){console.error("Error saving locator entry:",G),d("Error saving locator entry")}finally{p(!1)}},C=I(i.LOCTIMEDEPARTURE),F=I(i.LOCTIMEARRIVAL);return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add Locator Entry"}),f&&e.jsx("div",{className:`mb-4 p-3 rounded-md ${f.includes("Error")||f.includes("already has")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:f}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("h4",{className:"text-md font-semibold text-blue-600 mb-3",children:["Existing Time Logs for ",n]}),E?e.jsx("div",{className:"text-center py-2",children:e.jsx("p",{className:"text-blue-500",children:"Loading time logs..."})}):g?e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-blue-600",children:"AM-CHECKIN"}),e.jsx("div",{className:"text-lg font-mono bg-white p-2 rounded border text-blue-600",children:g.AM_CHECKIN||"--:--"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-blue-600",children:"AM-CHECKOUT"}),e.jsx("div",{className:"text-lg font-mono bg-white p-2 rounded border text-blue-600",children:g.AM_CHECKOUT||"--:--"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-blue-600",children:"PM-CHECKIN"}),e.jsx("div",{className:"text-lg font-mono bg-white p-2 rounded border text-blue-600",children:g.PM_CHECKIN||"--:--"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-blue-600",children:"PM-CHECKOUT"}),e.jsx("div",{className:"text-lg font-mono bg-white p-2 rounded border text-blue-600",children:g.PM_CHECKOUT||"--:--"})]})]}):e.jsx("div",{className:"text-center py-2",children:e.jsx("p",{className:"text-blue-500",children:"No time logs found for this date"})})]}),e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Locator Number"}),e.jsx("input",{type:"text",value:i.LOCNO,onChange:U=>A("LOCNO",U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",readOnly:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated: YY-MM-DD-seqno format"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Locator Date *"}),e.jsx("input",{type:"date",value:i.LOCDATE,onChange:U=>A("LOCDATE",U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-700 cursor-not-allowed",readOnly:!0,required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically set based on selected row date"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee *"}),e.jsx("input",{type:"text",value:l?`${l.NAME} (${l.BADGENUMBER})`:"",className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-700 cursor-not-allowed",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination"}),e.jsx("textarea",{value:i.LOCDESTINATION,onChange:U=>A("LOCDESTINATION",U.target.value),placeholder:"Enter destination",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,maxLength:50}),e.jsx("div",{className:"mt-1 text-xs text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purpose"}),e.jsx("textarea",{value:i.LOCPURPOSE,onChange:U=>A("LOCPURPOSE",U.target.value),placeholder:"Enter purpose",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,maxLength:100}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[i.LOCPURPOSE.length,"/100 characters"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Departure"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"at"}),e.jsxs("select",{value:C.hours,onChange:U=>D("hours",U.target.value,"LOCTIMEDEPARTURE"),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"HH"}),m.hours.map(U=>e.jsx("option",{value:U,children:U},U))]}),e.jsx("span",{className:"text-gray-500",children:":"}),e.jsxs("select",{value:C.minutes,onChange:U=>D("minutes",U.target.value,"LOCTIMEDEPARTURE"),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"MM"}),m.minutes.map(U=>e.jsx("option",{value:U,children:U},U))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Arrival"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"at"}),e.jsxs("select",{value:F.hours,onChange:U=>D("hours",U.target.value,"LOCTIMEARRIVAL"),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"HH"}),x.hours.map(U=>e.jsx("option",{value:U,children:U},U))]}),e.jsx("span",{className:"text-gray-500",children:":"}),e.jsxs("select",{value:F.minutes,onChange:U=>D("minutes",U.target.value,"LOCTIMEARRIVAL"),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"MM"}),x.minutes.map(U=>e.jsx("option",{value:U,children:U},U))]})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Saving...":"Save Locator Entry"}),e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Cancel"})]})]})]})}):null},Wa=(t,s)=>{if(!t||!s)return"Unknown";const r=parseInt(t),n=s.find(a=>a.USERID===r);return n?n.NAME:`User ID: ${t}`};function oS(){console.log(" [TIME LOGS] Component rendered"),xr();const[t,s]=y.useState(""),[r,n]=y.useState("Shift Sched"),[a,l]=y.useState(()=>{const ke=new Date,te=ke.getFullYear(),Ne=String(ke.getMonth()+1).padStart(2,"0");return new Date(te,Ne-1,1).toISOString().split("T")[0]}),[o,i]=y.useState(()=>{const ke=new Date,te=ke.getFullYear(),Ne=String(ke.getMonth()+1).padStart(2,"0");return new Date(te,Ne,0).toISOString().split("T")[0]}),[c,h]=y.useState(null);console.log(" [TIME LOGS] Current selectedEmployee:",c);const[p,m]=y.useState([]),[u,x]=y.useState([]),[j,v]=y.useState(null),[N,f]=y.useState([]),[d,g]=y.useState([]),[b,E]=y.useState([]),[R,S]=y.useState([]),[k,L]=y.useState(!1),[A,D]=y.useState(null),[I,O]=y.useState(!1),[C,F]=y.useState({date:"",columnType:"",employee:null}),U=y.useRef();y.useEffect(()=>{(async()=>{var te;try{const Ne=await le.get("/employees");x(Ne.data||[]),console.log(" [TIME LOGS] Employees loaded:",(te=Ne.data)==null?void 0:te.length)}catch(Ne){console.error(" [TIME LOGS] Error loading employees:",Ne)}})()},[]),y.useEffect(()=>{(async()=>{var te;if(!c){m([]);return}try{L(!0),console.log(" [TIME LOGS] Fetching logs for employee:",c.USERID,"from:",a,"to:",o);const Ne=await le.get(`/logs/${c.USERID}`,{params:{startDate:a,endDate:o}});m(Ne.data||[]),console.log(" [TIME LOGS] Logs loaded:",(te=Ne.data)==null?void 0:te.length)}catch(Ne){console.error(" [TIME LOGS] Error loading logs:",Ne),m([])}finally{L(!1)}})()},[c,a,o]),y.useEffect(()=>{console.log("DEBUG: logs:",p)},[p]),y.useEffect(()=>{console.log("DEBUG: locatorData:",N)},[N]),y.useEffect(()=>{(async()=>{if(!(c!=null&&c.USERID)){v(null);return}try{L(!0),console.log(" Fetching shift schedule for USERID:",c.USERID);const te=await le.get(`/employees/${c.USERID}/shift-schedule`);console.log(" Shift schedule response:",te.data),te.data.employee&&console.log(" Employee InheritDeptSchClass:",te.data.employee.InheritDeptSchClass);const Ne=te.data.shiftSchedule||null;console.log(" Extracted shift data:",Ne),v(Ne)}catch(te){console.error(" Error fetching shift schedule:",te),v(null),D("Failed to fetch shift schedule")}finally{L(!1)}})()},[c==null?void 0:c.USERID]),y.useEffect(()=>{(async()=>{if(!c){f([]);return}try{const te=await le.get("/locator",{params:{employeeId:c.USERID,dateFrom:a,dateTo:o}});f(te.data.data||te.data||[]),console.log("DEBUG: locatorData:",te.data.data||te.data||[])}catch(te){f([]),console.error("Failed to fetch locatorData",te)}})()},[c,a,o]),y.useEffect(()=>{console.log(" [TIME LOGS] loadLeaveData useEffect triggered"),console.log(" [TIME LOGS] selectedEmployee:",c),console.log(" [TIME LOGS] selectedEmployee?.USERID:",c==null?void 0:c.USERID);const ke=async()=>{try{console.log(" [TIME LOGS] Loading leave data for employee:",c==null?void 0:c.USERID);const te=await le.get("/leave/records");console.log(" [TIME LOGS] Leave data response:",te.data),te.data.success&&(g(te.data.data),console.log(" [TIME LOGS] Leave data loaded:",te.data.data))}catch(te){console.error(" [TIME LOGS] Error loading leave data:",te)}};c?(console.log(" [TIME LOGS] selectedEmployee exists, calling loadLeaveData"),ke()):console.log(" [TIME LOGS] No selectedEmployee, not loading leave data")},[c]),y.useEffect(()=>{c&&(async()=>{try{const te=await le.get("/travel-orders",{params:{page:1,limit:1e4}});te.data.success&&(E(te.data.data||[]),console.log(" [TIME LOGS] Travel data loaded:",te.data.data))}catch(te){console.error(" [TIME LOGS] Error loading travel data:",te)}})()},[c]),y.useEffect(()=>{(async()=>{try{const te=new Date().getFullYear(),Ne=await le.get(`/holidays/db?year=${te}`);Ne.data.success&&(S(Ne.data.data),console.log(" Holiday data loaded:",Ne.data.data.length,"holidays"))}catch(te){console.error(" Error loading holiday data:",te)}})()},[]),y.useEffect(()=>{console.log(" [TIME LOGS] Test useEffect - this should run on every render")},[]),y.useEffect(()=>{console.log(" [TIME LOGS] selectedEmployee dependency changed:",c)},[c]);const Y=y.useMemo(()=>c?N.filter(ke=>String(ke.LOCUSERID)===String(c.USERID)):[],[N,c]),G=y.useMemo(()=>!c||!j?[]:rS(p,j,Y,d,b,R,c.USERID,a,o),[p,j,Y,d,b,R,c,a,o]),V=y.useMemo(()=>t.trim()?u.filter(ke=>{var te,Ne,de,q;return((te=ke.NAME)==null?void 0:te.toLowerCase().includes(t.toLowerCase()))||((Ne=ke.BADGENUMBER)==null?void 0:Ne.toLowerCase().includes(t.toLowerCase()))||((de=ke.SSN)==null?void 0:de.toLowerCase().includes(t.toLowerCase()))||((q=ke.DEPTNAME)==null?void 0:q.toLowerCase().includes(t.toLowerCase()))}):u,[u,t]),W=async ke=>{if(h(ke),s(""),D(null),ke){const te=a||new Date().toISOString().split("T")[0],Ne=o||new Date().toISOString().split("T")[0];onFetchLogs(ke.USERID,te,Ne),a||l(te),o||i(Ne)}},_=(ke,te)=>{if(ke==="start")l(te);else if(ke==="end")i(te);else if(ke==="month"){it(te);const Ne=ae(te);l(Ne.startDate),i(Ne.endDate)}if(c&&te){let Ne,de;if(ke==="month"){const q=ae(te);Ne=q.startDate,de=q.endDate}else Ne=ke==="start"?te:a,de=ke==="end"?te:o;Ne&&de&&onFetchLogs(c.USERID,Ne,de)}},M=async ke=>{try{L(!0),await le.post("/locator",ke);const te=await le.get("/locator",{params:{employeeId:c.USERID,dateFrom:a,dateTo:o}});f(te.data.data||te.data||[]),c&&onFetchLogs(c.USERID,a,o)}catch(te){console.error("Error adding locator entry:",te),D("Failed to add locator entry")}finally{L(!1)}},P=(ke,te)=>{const Ne=te.replace(/_/g,"");F({date:ke,columnType:Ne,employee:c}),O(!0)},$=()=>j&&j.SHIFTNAME?j.SHIFTNAME:c&&c.InheritDeptSchClass?`Shift #${c.InheritDeptSchClass}`:"No Schedule Assigned",B=()=>j?e.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:["AM In: ",bo(j.SHIFT_AMCHECKIN)," | AM Out: ",bo(j.SHIFT_AMCHECKOUT)," | PM In: ",bo(j.SHIFT_PMCHECKIN)," | PM Out: ",bo(j.SHIFT_PMCHECKOUT)]}):null,w=(ke,te)=>!ke||ke.length===0?!1:ke.some(Ne=>ds(Ne.HOLIDAYDATE)===te),T=(ke,te)=>{if(!te)return!1;const Ne=ke.AM_CHECKIN&&ke.AM_CHECKIN.trim()!=="",de=ke.AM_CHECKOUT&&ke.AM_CHECKOUT.trim()!=="",q=ke.PM_CHECKIN&&ke.PM_CHECKIN.trim()!=="",me=ke.PM_CHECKOUT&&ke.PM_CHECKOUT.trim()!=="";return!Ne||!de||!q||!me},H=()=>{if(U.current){const ke=U.current.innerHTML,te=window.open("","","height=700,width=900");te.document.write("<html><head><title>Print Time Logs</title>"),te.document.write("<style>table{border-collapse:collapse;width:100%;}th,td{border:1px solid #ccc;padding:8px;text-align:center;}th{background:#f3f4f6;} .header-info{margin-bottom:16px;} .footer-totals{font-weight:bold;background:#e0e7ff;}</style>"),te.document.write("</head><body>"),te.document.write(ke),te.document.write("</body></html>"),te.document.close(),te.focus(),setTimeout(()=>te.print(),500)}},K=G.reduce((ke,te)=>ke+(Number(te.LATE)||0),0),J=G.reduce((ke,te)=>ke+(Number(te.DAYS)||0),0),[X,pe]=y.useState(!1),[oe,ce]=y.useState(null),Ae=ke=>{ce(ke),pe(!0)},Be=()=>{pe(!1),ce(null)},[Ie,ye]=y.useState(!1),[se,we]=y.useState(null),[ve,Q]=y.useState(!1),[ne,he]=y.useState(null),Me=ke=>{we(ke),ye(!0)},be=()=>{ye(!1),we(null)},De=ke=>{he(ke),Q(!0)},ze=()=>{Q(!1),he(null)},[Ee,Z]=y.useState(null),[ee,_e]=y.useState({x:0,y:0}),Qe=(ke,te,Ne,de)=>{const q=ke.target.getBoundingClientRect();_e({x:q.left+q.width/2,y:q.top-10}),Z({remark:te,type:Ne,data:de})},je=()=>{Z(null)},Ke=ke=>{if(!ke)return null;const{type:te,data:Ne}=ke;switch(te){case"locator":return e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg shadow-lg p-3 max-w-xs",children:[e.jsx("div",{className:"font-semibold text-blue-600 mb-2",children:"Locator Details"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Locator No:"})," ",Ne.LOCNO||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"})," ",Ne.LOCDATE?new Date(Ne.LOCDATE).toLocaleDateString():"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Destination:"})," ",Ne.LOCDESTINATION||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Purpose:"})," ",Ne.LOCPURPOSE||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",Ne.LOCSTATUS||"N/A"]})]})]});case"leave":return e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg shadow-lg p-3 max-w-xs",children:[e.jsx("div",{className:"font-semibold text-purple-600 mb-2",children:"Leave Details"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Ref No:"})," ",Ne.LEAVEREFNO||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Leave Type:"})," ",Ne.LeaveName||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Days:"})," ",Ne.LEAVEDAYS||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",Ne.LEAVESTATUS||"N/A"]})]})]});case"travel":return e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg shadow-lg p-3 max-w-xs",children:[e.jsx("div",{className:"font-semibold text-green-600 mb-2",children:"Travel Order Details"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Travel No:"})," ",Ne.TRAVELNO||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Purpose:"})," ",Ne.PURPOSE||Ne.TRAVELPURPOSE||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Destination:"})," ",Ne.TRAVELDESTINATION||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",Ne.STATUS||"N/A"]})]})]});default:return null}},[rt,gt]=y.useState("monthly"),[mt,it]=y.useState(()=>{const ke=new Date,te=ke.getFullYear(),Ne=String(ke.getMonth()+1).padStart(2,"0");return`${te}-${Ne}`}),ae=ke=>{const[te,Ne]=ke.split("-"),de=new Date(parseInt(te),parseInt(Ne)-1,1),q=new Date(parseInt(te),parseInt(Ne),0),me=Te=>{const Ue=Te.getFullYear(),Re=String(Te.getMonth()+1).padStart(2,"0"),$e=String(Te.getDate()).padStart(2,"0");return`${Ue}-${Re}-${$e}`};return{startDate:me(de),endDate:me(q)}},Ce=ke=>{if(gt(ke),ke==="monthly"){const te=new Date,Ne=te.getFullYear(),de=String(te.getMonth()+1).padStart(2,"0"),q=`${Ne}-${de}`;it(q);const me=ae(q);l(me.startDate),i(me.endDate),c&&onFetchLogs(c.USERID,me.startDate,me.endDate)}else if(ke==="range"){const Ne=new Date().toISOString().split("T")[0];l(Ne),i(Ne),c&&onFetchLogs(c.USERID,Ne,Ne)}};y.useEffect(()=>{if(rt==="monthly"){const ke=ae(mt);l(ke.startDate),i(ke.endDate)}},[]);const[Se,qe]=y.useState([]),Ze=()=>{const ke=[],te=new Date,Ne=te.getFullYear(),de=te.getMonth()+1;for(let q=Ne;q>=Ne-4;q--){const me=q===Ne?de:12,Te=1;for(let Ue=me;Ue>=Te;Ue--){const Re=`${q}-${String(Ue).padStart(2,"0")}`,$e=new Date(q,Ue-1,1).toLocaleDateString("en-US",{month:"long",year:"numeric"});ke.push({year:q,month:Ue,monthYear:Re,displayName:$e})}}return ke};return y.useEffect(()=>{const ke=Ze();qe(ke),console.log(" [TIME LOGS] Generated last 5 years months:",ke)},[]),Se.map(ke=>e.jsx("option",{value:ke.monthYear,children:ke.displayName},ke.monthYear)),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Time Logs Management"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Employee"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:t,onChange:ke=>s(ke.target.value),placeholder:"Search by name, badge number, SSN, or department...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),t&&V.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:V.map(ke=>e.jsxs("div",{onClick:()=>W(ke),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200 last:border-b-0",children:[e.jsx("div",{className:"font-medium",children:ke.NAME}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Badge: ",ke.BADGENUMBER," | SSN: ",ke.SSN||"N/A"," | Dept: ",ke.DEPTNAME||"No Department"]})]},ke.USERID))})]})]}),c&&e.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Selected Employee:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",c.NAME]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Badge Number:"})," ",c.BADGENUMBER]}),e.jsxs("div",{children:[e.jsx("strong",{children:"SSN:"})," ",c.SSN||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Department:"})," ",c.DEPTNAME||"No Department"]}),e.jsxs("div",{className:"md:col-span-4",children:[e.jsx("strong",{children:"Assigned Shift:"})," ",$(),B()]})]})]}),A&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:A})}),e.jsx("div",{className:"mb-6",children:rt==="range"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Filter Type"}),e.jsxs("select",{value:rt,onChange:ke=>Ce(ke.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"range",children:"Date Range"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:a,onChange:ke=>_("start",ke.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:o,onChange:ke=>_("end",ke.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Filter Type"}),e.jsxs("select",{value:rt,onChange:ke=>Ce(ke.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"range",children:"Date Range"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Month"}),e.jsx("select",{value:mt,onChange:ke=>_("month",ke.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:Se.map(ke=>e.jsx("option",{value:ke.monthYear,children:ke.displayName},ke.monthYear))})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0 sm:space-x-6",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>n("Shift Sched"),className:`px-4 py-2 rounded-lg text-sm font-medium transition duration-200 ease-in-out ${r==="Shift Sched"?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Shift Sched"}),e.jsx("button",{onClick:()=>n("Raw Logs"),className:`px-4 py-2 rounded-lg text-sm font-medium transition duration-200 ease-in-out ${r==="Raw Logs"?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Raw Logs"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:H,className:"px-4 py-2 rounded-lg text-sm font-medium bg-green-600 text-white hover:bg-green-700 shadow",disabled:!c||G.length===0,children:"Print"}),e.jsx("button",{onClick:()=>VE(G,vo),className:"px-4 py-2 rounded-lg text-sm font-medium bg-yellow-500 text-white hover:bg-yellow-600 shadow",disabled:!c||G.length===0,children:"Export CSV"}),e.jsx("button",{onClick:()=>YE(G,vo),className:"px-4 py-2 rounded-lg text-sm font-medium bg-green-700 text-white hover:bg-green-800 shadow",disabled:!c||G.length===0,children:"Export Excel"})]})]})]}),r==="Raw Logs"?e.jsx(HE,{logs:p,selectedEmployee:c,startDate:a,endDate:o}):e.jsxs("div",{ref:U,children:[k&&e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Loading shift schedule..."})}),!k&&c&&!j&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-yellow-800 mb-2",children:"No shift schedule assigned to this employee."}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Please assign a shift schedule to view time logs."})]}),!k&&c&&j&&G.length>0?e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:e.jsxs("table",{className:"min-w-full table-auto border border-gray-300 shadow-sm",children:[e.jsx("thead",{className:"bg-gray-100 text-sm text-gray-700",children:e.jsx("tr",{children:vo.map(ke=>{const te=Ne=>{switch(Ne){case"DATE":return"w-32";case"AM_CHECKIN":case"AM_CHECKOUT":case"PM_CHECKIN":case"PM_CHECKOUT":return"w-20";case"LATE":return"w-16";case"DAYS":return"w-16";case"REMARKS":return"w-40";case"ACTION":return"w-32";default:return"w-auto"}};return e.jsx("th",{className:`border px-4 py-2 ${te(ke.field)}`,children:ke.header},ke.field)})})}),e.jsx("tbody",{children:G.map((ke,te)=>e.jsx("tr",{className:`text-center text-sm ${ke.hasHoliday?"text-red-600":ke.isWeekend?"text-blue-600 bg-blue-50":""}`,children:vo.map(Ne=>{const de=q=>{switch(q){case"DATE":return"w-32";case"AM_CHECKIN":case"AM_CHECKOUT":case"PM_CHECKIN":case"PM_CHECKOUT":return"w-20";case"LATE":return"w-16";case"DAYS":return"w-16";case"REMARKS":return"w-40";case"ACTION":return"w-32";default:return"w-auto"}};if(Ne.field==="REMARKS")return ke.REMARKS&&ke.REMARKS.includes("("),e.jsx("td",{className:`border px-4 py-2 text-left ${de(Ne.field)}`,children:ke.REMARKS?e.jsx("div",{children:ke.REMARKS.split("; ").map((q,me,Te)=>{var Re,$e,Ve,at,Je,ge,He;if(q.startsWith("(")&&q.includes(")")){const Ye=(Re=q.match(/\(([^)]+)\)/))==null?void 0:Re[1];if(Ye)if(Ye.match(/^\d{6}LE-\d{3}$/)){const ct=(Ve=($e=ke.REMARKS_DATA)==null?void 0:$e.locatorRecords)==null?void 0:Ve.find(kt=>kt.LOCNO===Ye),yt=new Date(ke.DATE_RAW),lt=new Date;lt.setHours(0,0,0,0),yt.setHours(0,0,0,0);const jt=yt>lt;return e.jsxs("span",{children:["Locator: ",jt?e.jsxs("span",{className:"text-gray-500 italic",children:[q," (Future Date)"]}):e.jsx("button",{onClick:()=>ct&&Ae(ct),onMouseEnter:kt=>Qe(kt,q,"locator",ct),onMouseLeave:je,className:"text-blue-600 hover:text-blue-800 underline cursor-pointer bg-transparent border-none p-0 text-left font-normal",style:{textDecoration:"underline",color:"#2563eb",cursor:"pointer"},title:"Click to view details",children:q}),me<Te.length-1&&"; "]},me)}else if(Ye.match(/^\d{6}LV-\d{3}$/)){const ct=(Je=(at=ke.REMARKS_DATA)==null?void 0:at.leaveRecords)==null?void 0:Je.find(yt=>yt.LEAVEREFNO===Ye);return e.jsxs("span",{children:["Leave: ",e.jsx("button",{onClick:()=>ct&&De(ct),onMouseEnter:yt=>Qe(yt,q,"leave",ct),onMouseLeave:je,className:"text-purple-600 hover:text-purple-800 underline cursor-pointer bg-transparent border-none p-0 text-left font-normal",style:{textDecoration:"underline",color:"#7c3aed",cursor:"pointer"},title:"Click to view details",children:q}),me<Te.length-1&&"; "]},me)}else if(Ye.match(/^\d{6}TO-\d{3}$/)){const ct=(He=(ge=ke.REMARKS_DATA)==null?void 0:ge.travelRecords)==null?void 0:He.find(yt=>yt.TRAVELNO===Ye);return e.jsxs("span",{children:["Travel: ",e.jsx("button",{onClick:()=>ct&&Me(ct),onMouseEnter:yt=>Qe(yt,q,"travel",ct),onMouseLeave:je,className:"text-green-600 hover:text-green-800 underline cursor-pointer bg-transparent border-none p-0 text-left font-normal",style:{textDecoration:"underline",color:"#059669",cursor:"pointer"},title:"Click to view details",children:q}),me<Te.length-1&&"; "]},me)}else return e.jsxs("span",{className:"text-gray-600",children:[q,me<Te.length-1&&"; "]},me)}const Ue=Ye=>Ye==="Weekend"?"text-blue-600":ke.hasHoliday&&R.some(ct=>ct.HOLIDAYNAME&&Ye===ct.HOLIDAYNAME)||Ye.toLowerCase().includes("holiday")||Ye.toLowerCase().includes("national")||Ye.toLowerCase().includes("special")?"text-red-600":"text-gray-600";return e.jsxs("span",{className:Ue(q),children:[q,me<Te.length-1&&"; "]},me)})}):e.jsx("span",{className:"text-gray-400",children:"-"})},Ne.field);if(Ne.field==="ACTION"){const q=fi(d,ke.DATE_RAW,c==null?void 0:c.USERID),me=XE(d,ke.DATE_RAW,c==null?void 0:c.USERID),Te=tu(b,ke.DATE_RAW,c==null?void 0:c.USERID);w(R,ke.DATE_RAW);const Ue=T(ke,j),Re=new Date(ke.DATE_RAW),$e=new Date;$e.setHours(0,0,0,0),Re.setHours(0,0,0,0);const Ve=Re>$e;if(Re.getTime(),$e.getTime(),ke.isWeekend||Ve)return e.jsx("td",{className:`border px-4 py-2 ${de(Ne.field)}`,children:e.jsx("span",{className:"text-gray-400 text-xs",children:Ve?"Future":"-"})},Ne.field);const at=q||me||Te,Je=!Ue;!ke.AM_CHECKIN&&!ke.AM_CHECKOUT&&!ke.PM_CHECKIN&&ke.PM_CHECKOUT;const ge=Je||at;return e.jsx("td",{className:`border px-4 py-2 ${de(Ne.field)}`,children:e.jsx("div",{className:"flex items-center justify-center space-x-1",children:e.jsx("button",{onClick:()=>P(ke.DATE_RAW,"AM_CHECKIN"),disabled:ge,className:`inline-flex items-center justify-center w-8 h-8 rounded-full transition-colors duration-200 shadow-sm hover:shadow-md ${ge?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"}`,title:ge?"Locator disabled - Complete logs or existing records":"Add Locator Entry",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 5V3a1 1 0 011-1h6a1 1 0 011 1v2"}),e.jsx("circle",{cx:"12",cy:"14",r:"2",strokeWidth:1.5}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 20v-2a2 2 0 012-2h4a2 2 0 012 2v2"}),e.jsx("circle",{cx:"18",cy:"18",r:"2",strokeWidth:1.5})]})})})},Ne.field)}return e.jsx("td",{className:`border px-4 py-2 ${de(Ne.field)}`,children:(()=>{if(["AM_CHECKIN","AM_CHECKOUT","PM_CHECKIN","PM_CHECKOUT"].includes(Ne.field)){if(fi(d,ke.DATE_RAW,c==null?void 0:c.USERID))return e.jsx("span",{className:"text-red-600 font-semibold",children:"Leave"});if(tu(b,ke.DATE_RAW,c==null?void 0:c.USERID))return e.jsx("span",{className:"text-green-600 font-semibold",children:"Travel"});if(w(R,ke.DATE_RAW))return e.jsx("span",{className:"text-red-600 font-semibold",children:"Holiday"});if(ke.REMARKS&&ke.REMARKS.includes("Absent")){const $e=new Date(ke.DATE_RAW),Ve=new Date;if(Ve.setHours(0,0,0,0),$e.setHours(0,0,0,0),!($e>Ve))return e.jsx("span",{className:"text-orange-600 font-semibold",children:"Absent"})}}return ke[Ne.field]||"-"})()},Ne.field)})},te))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"footer-totals",children:[e.jsx("td",{colSpan:5,className:"border px-4 py-2 text-right",children:"TOTALS:"}),e.jsx("td",{className:"border px-4 py-2",children:K}),e.jsx("td",{className:"border px-4 py-2",children:J}),e.jsx("td",{className:"border px-4 py-2"}),e.jsx("td",{className:"border px-4 py-2"})]})})]})}):!k&&c&&j?e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-yellow-800",children:"No logs found for the selected date range."})}):!k&&!c?e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-gray-600",children:"Please select an employee to view their time logs."})}):null]}),e.jsx(lS,{isOpen:I,onClose:()=>O(!1),onSubmit:M,date:C.date,columnType:C.columnType,employee:C.employee,shiftSchedule:j}),X&&oe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-t-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Locator Details"}),e.jsxs("p",{className:"text-blue-100 mt-1",children:["Locator Number: ",oe.LOCNO]})]}),e.jsx("button",{onClick:Be,className:"text-white hover:text-blue-200 transition-colors duration-200",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Employee"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:oe.NAME||"Unknown Employee"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Date"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:oe.LOCDATE?new Date(oe.LOCDATE).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${oe.LOCSTATUS==="ACTIVE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:oe.LOCSTATUS||"N/A"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Location Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Destination"}),e.jsx("p",{className:"text-lg text-blue-900",children:oe.LOCDESTINATION||"Not specified"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Purpose"}),e.jsx("p",{className:"text-lg text-blue-900",children:oe.LOCPURPOSE||"Not specified"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Time Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-2",children:"Time Departure"}),e.jsx("p",{className:"text-lg font-mono text-green-900",children:oe.LOCTIMEDEPARTURE?new Date(oe.LOCTIMEDEPARTURE).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Not specified"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-2",children:"Time Arrival"}),e.jsx("p",{className:"text-lg font-mono text-green-900",children:oe.LOCTIMEARRIVAL?new Date(oe.LOCTIMEARRIVAL).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Not specified"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"System Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Entry By"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:Wa(oe.LOCENTRYBY,u)})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Entry Date"}),e.jsx("p",{className:"text-lg font-mono text-gray-900",children:oe.LOCENTRYDATE?new Date(oe.LOCENTRYDATE).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A"})]})]})]})]}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 rounded-b-lg border-t border-gray-200",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:Be,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 font-medium",children:"Close"})})})]})}),Ie&&se&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 text-white p-6 rounded-t-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Travel Order Details"}),e.jsxs("p",{className:"text-green-100 mt-1",children:["Travel Number: ",se.TRAVELNO]})]}),e.jsx("button",{onClick:be,className:"text-white hover:text-green-200 transition-colors duration-200",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Travel Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-2",children:"Destination"}),e.jsx("p",{className:"text-lg text-green-900",children:se.TRAVELDESTINATION||"Not specified"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-2",children:"Purpose"}),e.jsx("p",{className:"text-lg text-green-900",children:se.PURPOSE||"Not specified"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Status Information"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${se.STATUS==="APPROVED"?"bg-green-100 text-green-800":se.STATUS==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:se.STATUS||"N/A"})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"System Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Entry By"}),e.jsx("p",{className:"text-lg text-blue-900",children:Wa(se.TRAVELENTRYBY,u)})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Entry Date"}),e.jsx("p",{className:"text-lg font-mono text-blue-900",children:se.TRAVELENTRYDATE?new Date(se.TRAVELENTRYDATE).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Not specified"})]})]})]})]})]})}),ve&&ne&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white p-6 rounded-t-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Leave Details"}),e.jsxs("p",{className:"text-purple-100 mt-1",children:["Reference Number: ",ne.LEAVEREFNO]})]}),e.jsx("button",{onClick:ze,className:"text-white hover:text-purple-200 transition-colors duration-200",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Employee"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:Wa(ne.USERID,u)})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Leave Days"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:ne.LEAVEDAYS||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${ne.LEAVESTATUS==="APPROVED"?"bg-green-100 text-green-800":ne.LEAVESTATUS==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:ne.LEAVESTATUS||"N/A"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Leave Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Specify"}),e.jsx("p",{className:"text-lg text-purple-900",children:ne.LEAVESPECIFY||"Not specified"})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Filed Date"}),e.jsx("p",{className:"text-lg text-purple-900",children:ne.LEAVEFILEDDATE?new Date(ne.LEAVEFILEDDATE).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Not specified"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Remarks"}),e.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-lg text-purple-900",children:ne.LEAVEREMARKS||"No remarks provided"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"System Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Entry By"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:Wa(ne.LEAVEENTRYBY,u)})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Entry Date"}),e.jsx("p",{className:"text-lg font-mono text-gray-900",children:ne.LEAVEENTRYDATE?new Date(ne.LEAVEENTRYDATE).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A"})]})]})]}),(ne.LEAVEAPPROVEDBY||ne.LEAVEAPPROVEDDATE)&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Approval Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-2",children:"Approved By"}),e.jsx("p",{className:"text-lg text-green-900",children:Wa(ne.LEAVEAPPROVEDBY,u)})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-2",children:"Approved Date"}),e.jsx("p",{className:"text-lg font-mono text-green-900",children:ne.LEAVEAPPROVEDDATE?new Date(ne.LEAVEAPPROVEDDATE).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A"})]})]})]})]}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 rounded-b-lg border-t border-gray-200",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:ze,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors duration-200 font-medium",children:"Close"})})})]})}),Ee&&e.jsx("div",{className:"fixed z-50 pointer-events-none",style:{left:ee.x,top:ee.y,transform:"translateX(-50%) translateY(-100%)"},children:Ke(Ee)})]})}const R0={1:"Regular",2:"Casual",3:"Co-Terminus",4:"Provisional",5:"Job Order (JO)",6:"Project Based (PB)",7:"Special Engaged (SE)",8:"Others"},O0=t=>{const s=parseInt(t);return R0[s]||"Unknown"},pi=()=>Object.entries(R0).map(([t,s])=>({id:parseInt(t),name:s})),iS=t=>{const s=parseInt(t);return{1:"Regular",2:"Casual",3:"Co-Terminus",4:"Provisional",5:"JO",6:"PB",7:"SE",8:"Others"}[s]||"Unknown"},xi="/assets/dallogo-DAPDGA6-.png",cS=()=>{const[t,s]=y.useState("individual"),[r,n]=y.useState(""),[a,l]=y.useState([]),[o,i]=y.useState([]),[c,h]=y.useState(null),[p,m]=y.useState([]),[u,x]=y.useState(""),[j,v]=y.useState("active"),[N,f]=y.useState("all"),[d,g]=y.useState(""),[b,E]=y.useState([]),[R,S]=y.useState(!1),[k,L]=y.useState([]),[A,D]=y.useState(new Set),[I,O]=y.useState(!1),[C,F]=y.useState(""),[U,Y]=y.useState([]),[G,V]=y.useState({}),[W,_]=y.useState("full"),[M,P]=y.useState(1),[$,B]=y.useState(10),[w,T]=y.useState(0),H=y.useMemo(()=>{const Q=new Date,ne=Q.getFullYear(),he=Q.getMonth()+1,Me=[];for(let be=ne-2;be<=ne;be++){const De=be===ne?he:12;for(let ze=1;ze<=De;ze++){const Z=new Date(be,ze-1,1).toLocaleString("en-US",{month:"long"}),ee=`${be}-${String(ze).padStart(2,"0")}-01`;Me.push({value:ee,label:`${Z} ${be}`})}}return Me.sort((be,De)=>new Date(De.value)-new Date(be.value))},[]);y.useEffect(()=>{const Q=new Date,ne=Q.getFullYear(),he=Q.getMonth()+1,Me=`${ne}-${String(he).padStart(2,"0")}-01`;g(Me)},[]),y.useEffect(()=>{(async()=>{var ne;try{console.log(" Fetching shift schedules from ComputeAttendance API...");const he=await le.get("/compute-attendance/shift-schedules");console.log(" Shift schedules API response:",he),console.log(" Shift schedules data:",he.data),console.log(" Shift schedules data type:",typeof he.data),console.log(" Shift schedules data length:",(ne=he.data)==null?void 0:ne.length),he.data&&he.data.length>0&&(console.log(" First shift schedule sample:",he.data[0]),console.log(" Available fields in shift schedule:",Object.keys(he.data[0])));const Me={};he.data&&Array.isArray(he.data)&&he.data.forEach(be=>{console.log(" Processing shift schedule:",be),console.log(" SHIFTNO field:",be.SHIFTNO),console.log(" SHIFTNO type:",typeof be.SHIFTNO),be.SHIFTNO?(Me[be.SHIFTNO]=be,console.log(` Added shift schedule for SHIFTNO ${be.SHIFTNO}`)):console.log(" No SHIFTNO found in shift schedule:",be)}),V(Me),console.log(" Final shift schedules by SHIFTNO:",Me),console.log(" Total shift schedules loaded:",Object.keys(Me).length)}catch(he){console.error(" Error fetching shift schedules:",he)}})()},[]),y.useEffect(()=>{(async()=>{try{console.log(" Fetching employees from ComputeAttendance API...");const ne=await le.get("/compute-attendance/employees");console.log(" Employees fetched:",ne.data.length),console.log(" First employee sample:",ne.data[0]),l(ne.data)}catch(ne){console.error(" Error fetching employees:",ne)}})()},[]),y.useEffect(()=>{(async()=>{try{console.log(" Fetching departments from ComputeAttendance API...");const ne=await le.get("/compute-attendance/departments");console.log(" Departments fetched:",ne.data.length),m(ne.data)}catch(ne){console.error(" Error fetching departments:",ne)}})()},[]),y.useEffect(()=>{if(r.trim()==="")i([]);else{const Q=a.filter(ne=>ne.NAME.toLowerCase().includes(r.toLowerCase())||ne.BADGENUMBER.toLowerCase().includes(r.toLowerCase()));i(Q.slice(0,10))}},[r,a]),y.useEffect(()=>{if(C.trim()==="")Y(k);else{const Q=k.filter(ne=>ne.NAME.toLowerCase().includes(C.toLowerCase())||ne.BADGENUMBER.toLowerCase().includes(C.toLowerCase()));Y(Q)}},[C,k]),y.useEffect(()=>{t==="department"?u||N!=="all"?K():(L([]),D(new Set),Y([]),F("")):(L([]),D(new Set),Y([]),F(""))},[u,j,N,t]);const K=async()=>{O(!0),L([]),D(new Set),Y([]),F("");try{let Q=[...a];if(console.log(` Starting with ${Q.length} total employees`),u&&(Q=Q.filter(he=>he.DEPARTMENT===u),console.log(` After department filter (${u}): ${Q.length} employees`)),j==="active"?(Q=Q.filter(he=>he.STATUS>=0),console.log(` After active status filter: ${Q.length} employees`)):j==="inactive"&&(Q=Q.filter(he=>he.STATUS<0),console.log(` After inactive status filter: ${Q.length} employees`)),N!=="all"){const he=parseInt(N);console.log(` Looking for appointment ID: ${he} (type: ${typeof he})`);const Me=[...new Set(Q.map(be=>be.Appointment))];console.log(" Unique appointment values in database:",Me),Q=Q.filter(be=>{if(be.Appointment===null||be.Appointment===void 0)return console.log(` Employee ${be.NAME} has null/undefined appointment`),!1;const De=parseInt(be.Appointment),ze=De===he;return ze&&console.log(` Found match: ${be.NAME} (appointment: ${be.Appointment} -> ${De})`),ze}),console.log(` After appointment filter (${he}): ${Q.length} employees`)}console.log(" Final filtered employees:",Q.map(he=>`${he.NAME} (dept: ${he.DEPARTMENT}, status: ${he.STATUS}, appointment: ${he.Appointment})`)),L(Q),Y(Q);const ne=new Set(Q.map(he=>he.USERID));D(ne),console.log(" Selected employees initialized:",ne.size,"employees (all selected by default)")}catch(Q){console.error(" Error fetching department employees:",Q)}finally{O(!1)}},J=async Q=>{console.log(" Employee selected:",Q.NAME),h(Q),n(Q.NAME),i([])},X=Q=>{console.log(" Department employee selection toggled:",Q);const ne=new Set(A);ne.has(Q)?(ne.delete(Q),console.log(" Employee deselected:",Q)):(ne.add(Q),console.log(" Employee selected:",Q)),D(ne),console.log(" Total selected employees:",ne.size)},pe=()=>{if(console.log(" Select all department employees toggled"),A.size===k.length)console.log(" Deselecting all employees"),D(new Set);else{console.log(" Selecting all employees");const Q=new Set(k.map(ne=>ne.USERID));D(Q)}},oe=()=>{console.log(" Select all filtered employees toggled");const Q=new Set(U.map(he=>he.USERID));if(Q.size>0&&Array.from(Q).every(he=>A.has(he))){console.log(" Deselecting all filtered employees");const he=new Set(A);Q.forEach(Me=>he.delete(Me)),D(he)}else{console.log(" Selecting all filtered employees");const he=new Set(A);Q.forEach(Me=>he.add(Me)),D(he)}};y.useEffect(()=>{d&&(t==="individual"&&c?Ae(c):t==="department"&&A.size>0&&Be())},[d,c,A,t,W]);const ce=(Q,ne="full")=>{const[he,Me]=Q.split("-");let be,De;if(ne==="full"){be=`${he}-${Me}-01`;const ze=new Date(parseInt(he),parseInt(Me),0).getDate();De=`${he}-${Me}-${ze.toString().padStart(2,"0")}`}else if(ne==="first")be=`${he}-${Me}-01`,De=`${he}-${Me}-15`;else if(ne==="second"){be=`${he}-${Me}-16`;const ze=new Date(parseInt(he),parseInt(Me),0).getDate();De=`${he}-${Me}-${ze.toString().padStart(2,"0")}`}return console.log(" Period range calculated:",{period:ne,startDate:be,endDate:De}),{startDate:be,endDate:De}},Ae=async Q=>{try{S(!0),console.log(" Calculating attendance for individual employee:",Q),console.log(" Employee ID:",Q.USERID),console.log(" Employee ID type:",typeof Q.USERID),console.log(" Available shift schedules:",G),console.log(" Selected month:",d),console.log(" Selected period:",W);const ne=G[Q.InheritDeptSchClass];if(console.log(" Found shift schedule:",ne),!ne){console.log(" No shift schedule found for employee:",Q.USERID,"InheritDeptSchClass:",Q.InheritDeptSchClass),console.log(" Available SHIFTNOs in shift schedules:",Object.keys(G));return}const{startDate:he,endDate:Me}=ce(d,W);console.log(" Processing period range:",{startDate:he,endDate:Me});const be=await le.post("/compute-attendance/calculate",{userId:Q.USERID,startDate:he,endDate:Me});if(console.log(" Attendance calculated from API:",be.data),be.data.success){const De=be.data.data;console.log(" Metrics received:",De),console.log(" Metrics values:",{totalLates:De.totalLates,totalDays:De.totalDays,netDays:De.netDays,equivalentDaysDeducted:De.equivalentDaysDeducted,locatorsCount:De.locatorsCount,leavesCount:De.leavesCount,travelsCount:De.travelsCount});const ze={employeeId:Q.USERID,name:Q.NAME,department:Q.DEPARTMENT,position:Q.TITLE,lates:De.totalLates,days:De.totalDays,netDays:De.netDays,equivalentDaysDeducted:De.equivalentDaysDeducted,locatorsCount:De.locatorsCount,leavesCount:De.leavesCount,travelsCount:De.travelsCount};console.log(" Attendance record created:",ze),E([ze]),console.log(" Attendance data set:",[ze])}}catch(ne){console.error(" Error calculating individual attendance:",ne)}finally{S(!1)}},Be=async()=>{try{S(!0),console.log(" Calculating attendance for department:",u),console.log(" Available shift schedules:",G),console.log(" Selected month:",d),console.log(" Selected period:",W);const Q=k;console.log(" Current employees to process:",Q.length),console.log(" Current employees:",Q.map(be=>({USERID:be.USERID,NAME:be.NAME})));const ne=[],{startDate:he,endDate:Me}=ce(d,W);console.log(" Processing period range:",{startDate:he,endDate:Me});for(let be=0;be<Q.length;be++){const De=Q[be];console.log(` Processing employee ${be+1}/${Q.length}:`,De.USERID,De.NAME),console.log(" Employee InheritDeptSchClass:",De.InheritDeptSchClass),console.log(" Available shift schedules:",Object.keys(G));const ze=G[De.InheritDeptSchClass];console.log(" Shift schedule for employee:",De.USERID,ze);let Ee={employeeId:De.USERID,name:De.NAME,department:De.DEPARTMENT,position:De.TITLE,lates:0,days:0,netDays:0,equivalentDaysDeducted:0,locatorsCount:0,leavesCount:0,travelsCount:0,status:"No shift schedule"};if(!ze){console.log(" No shift schedule found for employee:",De.USERID,"InheritDeptSchClass:",De.InheritDeptSchClass),console.log(" Adding employee with default values:",De.NAME),ne.push(Ee);continue}try{console.log(" Calling API for employee:",De.USERID,De.NAME);const Z=await le.post("/compute-attendance/calculate",{userId:De.USERID,startDate:he,endDate:Me});if(console.log(" API response for employee:",De.USERID,Z.data),Z.data.success){const ee=Z.data.data;Ee={employeeId:De.USERID,name:De.NAME,department:De.DEPARTMENT,position:De.TITLE,lates:ee.totalLates,days:ee.totalDays,netDays:ee.netDays,equivalentDaysDeducted:ee.equivalentDaysDeducted,locatorsCount:ee.locatorsCount,leavesCount:ee.leavesCount,travelsCount:ee.travelsCount,status:"Calculated"},console.log(" Added attendance record:",Ee)}else console.log(" API returned success: false for employee:",De.USERID,Z.data),Ee.status="API Error"}catch(Z){console.error(` Error calculating attendance for employee ${De.USERID}:`,Z),Ee.status="Error: "+Z.message}ne.push(Ee),console.log(" Added attendance record for employee:",De.USERID,Ee)}E(ne),console.log(" Department attendance data fetched:",ne.length)}catch(Q){console.error(" Error calculating department attendance:",Q)}finally{S(!1)}},Ie=y.useMemo(()=>{const Q=b.reduce((Me,be)=>(Me.totalLates+=be.lates,Me.totalDays+=be.days,Me.equivalentDaysDeducted+=be.equivalentDaysDeducted,Me),{totalLates:0,totalDays:0,equivalentDaysDeducted:0}),ne=Q.totalLates/(8*60),he=Math.max(0,Q.totalDays-ne);return{...Q,netDays:Math.round(he*1e4)/1e4}},[b]),ye=Q=>{const ne=Math.floor(Q/60),he=Math.round(Q%60);return`${ne}h ${he}m`},se=()=>{if(!d)return[{value:"full",label:"Full Month"},{value:"first",label:"1st Half"},{value:"second",label:"2nd Half"}];const[Q,ne]=d.split("-"),Me=new Date(parseInt(Q),parseInt(ne)-1,1).toLocaleString("en-US",{month:"short"}),be=new Date(parseInt(Q),parseInt(ne),0).getDate();return[{value:"full",label:`Full Month (${Me})`},{value:"first",label:`1st Half (${Me} 1 - ${Me} 15)`},{value:"second",label:`2nd Half (${Me} 16 - ${Me} ${be})`}]},we=async()=>{if(!b||b.length===0){alert("No data to print");return}const Q=window.open("","_blank","width=800,height=600"),he=se().find(ze=>ze.value===W),Me=he?he.label:"Full Month",be=H.find(ze=>ze.value===d);be&&be.label;const De=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Compute Attendance Report</title>
          <style>
            body { 
              font-family: Arial, sans-serif;
              font-size: 12px; 
              margin: 0;
              padding: 20px;
            }
            .print-header {
              text-align: center;
              margin-bottom: 20px;
              border-bottom: 2px solid #333;
              padding-bottom: 10px;
            }
            .print-logo {
              height: 60px;
              margin-bottom: 10px;
            }
            .print-title {
              font-size: 18px;
              font-weight: bold;
              margin-bottom: 5px;
            }
            .print-subtitle {
              font-size: 14px;
              color: #666;
              margin-bottom: 10px;
            }
            .print-period {
              font-size: 16px;
              font-weight: bold;
              color: #333;
              margin-bottom: 20px;
            }
            .print-table {
              width: 100%;
              border-collapse: collapse;
              margin-bottom: 20px;
            }
            .print-table th, 
            .print-table td { 
              border: 1px solid #333; 
              padding: 6px; 
              text-align: left; 
              font-size: 11px;
            }
            .print-table th { 
              background-color: #f0f0f0; 
              font-weight: bold; 
            }
            .print-footer {
              text-align: center;
              margin-top: 20px;
              font-size: 10px;
              color: #666;
              border-top: 1px solid #ccc;
              padding-top: 10px;
            }
            @page {
              margin: 0.5in;
            }
          </style>
        </head>
        <body>
          <div class="print-header">
            <div class="print-title">Human Resource Management Office</div>
            <div class="print-subtitle">Computed Attendance Report for the Period of ${Me}</div>
          </div>
          
          <table class="print-table">
            <thead>
              <tr>
                <th>Employee ID</th>
                <th>Name</th>
                <th>Department</th>
                <th>Locators</th>
                <th>Leaves</th>
                <th>Travels</th>
                <th>Lates</th>
                <th>Days</th>
                <th>Net Days</th>
              </tr>
            </thead>
            <tbody>
              ${b.map(ze=>`
                <tr>
                  <td>${ze.employeeId}</td>
                  <td>${ze.name}</td>
                  <td>${ze.department}</td>
                  <td>${ze.locatorsCount||0}</td>
                  <td>${ze.leavesCount||0}</td>
                  <td>${ze.travelsCount||0}</td>
                  <td>${ye(ze.lates)}</td>
                  <td>${ze.days}</td>
                  <td>${ze.netDays.toFixed(4)}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
          
          <div class="print-footer">
            System Generated (${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}) By: ${localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).USERID:"Unknown"}
          </div>
        </body>
      </html>
    `;Q.document.write(De),Q.document.close(),Q.onload=()=>{Q.print(),Q.close()}},ve=y.useMemo(()=>{if(t!=="department")return b;const Q=(M-1)*$,ne=Q+$;return b.slice(Q,ne)},[b,M,$,t]);return y.useEffect(()=>{if(t==="department"){const Q=Math.ceil(b.length/$);T(Q),M>Q&&Q>0&&P(1)}},[b.length,$,M,t]),y.useEffect(()=>{t==="department"&&P(1)},[b,t]),e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Compute Attendance"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"individual",checked:t==="individual",onChange:Q=>s(Q.target.value),className:"mr-2"}),"Individual"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"department",checked:t==="department",onChange:Q=>s(Q.target.value),className:"mr-2"}),"Multiple"]})]})]}),t==="individual"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Employee"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:r,onChange:Q=>n(Q.target.value),placeholder:"Search by name or badge number...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:o.map(Q=>e.jsxs("div",{onClick:()=>J(Q),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200 last:border-b-0",children:[e.jsx("div",{className:"font-medium",children:Q.NAME}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Badge: ",Q.BADGENUMBER]})]},Q.USERID))})]})]}),c&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Employee Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Name:"}),e.jsx("p",{className:"text-gray-800",children:c.NAME})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Department:"}),e.jsx("p",{className:"text-gray-800",children:c.DEPARTMENT})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Badge Number:"}),e.jsx("p",{className:"text-gray-800",children:c.BADGENUMBER})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Month"}),e.jsxs("select",{value:d,onChange:Q=>g(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a month..."}),H.map(Q=>e.jsx("option",{value:Q.value,children:Q.label},Q.value))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Period"}),e.jsx("select",{value:W,onChange:Q=>_(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:se().map(Q=>e.jsx("option",{value:Q.value,children:Q.label},Q.value))})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Department"}),e.jsxs("select",{value:u,onChange:Q=>x(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a department..."}),p.map(Q=>e.jsx("option",{value:Q,children:Q},Q))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment"}),e.jsxs("select",{value:N,onChange:Q=>f(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Appointments"}),pi().map(Q=>e.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Status"}),e.jsxs("select",{value:j,onChange:Q=>v(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]})]})]})}),e.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Month"}),e.jsxs("select",{value:d,onChange:Q=>g(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"",children:"Select a month..."}),H.map(Q=>e.jsx("option",{value:Q.value,children:Q.label},Q.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Period"}),e.jsx("select",{value:W,onChange:Q=>_(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:se().map(Q=>e.jsx("option",{value:Q.value,children:Q.label},Q.value))})]})]})}),e.jsx("div",{className:"mb-6 flex justify-end",children:e.jsxs("button",{onClick:we,disabled:!b||b.length===0,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),e.jsx("span",{children:"Print Report"})]})}),k.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Select Employees (",k.length," found)"]}),I&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Loading employees..."})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Employees"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:C,onChange:Q=>F(Q.target.value),placeholder:"Search by name or badge number...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),C&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Showing ",U.length," of ",k.length," employees"]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"selectAllDepartment",checked:(()=>{const Q=k.length>0&&A.size===k.length;return console.log(" Select All checkbox debug:",{departmentEmployeesLength:k.length,selectedDepartmentEmployeesSize:A.size,isChecked:Q,selectedEmployees:Array.from(A),allEmployeeIds:k.map(ne=>ne.USERID)}),Q})(),onChange:pe,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},`select-all-${A.size}-${k.length}`),e.jsxs("label",{htmlFor:"selectAllDepartment",className:"ml-2 text-sm font-medium text-gray-700",children:["Select All (",k.length," employees)"]})]}),C&&U.length>0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"selectAllFiltered",checked:U.length>0&&U.every(Q=>A.has(Q.USERID)),onChange:oe,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"selectAllFiltered",className:"ml-2 text-sm font-medium text-gray-700",children:["Select Filtered (",U.length," employees)"]})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[A.size," of ",k.length," selected"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-4 max-h-96 overflow-y-auto border border-gray-200 rounded-lg p-4",children:U.map(Q=>e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${A.has(Q.USERID)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>X(Q.USERID),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:A.has(Q.USERID),onChange:()=>X(Q.USERID),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:Q.NAME}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Badge: ",Q.BADGENUMBER," | Status: ",Q.STATUS>=0?"Active":"Inactive"]})]})]})},Q.USERID))}),C&&U.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsxs("p",{children:['No employees found matching "',C,'"']}),e.jsx("button",{onClick:()=>F(""),className:"mt-2 text-blue-600 hover:text-blue-800 text-sm underline",children:"Clear search"})]})]}),k.length===0&&!I&&u&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsxs("p",{children:["No employees found in ",u," with the selected status filter."]})}),k.length===0&&!I&&!u&&j==="all"&&N==="all"&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"Select Filters to View Employees"}),e.jsx("p",{className:"text-blue-700 mb-4",children:"Please select at least one of the following filters to view employees:"}),e.jsxs("ul",{className:"text-sm text-blue-600 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Department:"})," Select a specific department"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Employee Status:"})," Choose Active or Inactive"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Appointment:"})," Select an appointment type"]})]})]})})]}),R&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Computing attendance..."})]}),!R&&d&&b.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[t==="department"&&b.length>0&&e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Show:"}),e.jsxs("select",{value:$,onChange:Q=>{B(Number(Q.target.value)),P(1)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{className:"text-sm text-gray-500",children:"records"})]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(M-1)*$+1," to ",Math.min(M*$,b.length)," of ",b.length," entries"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>P(1),disabled:M===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"First"}),e.jsx("button",{onClick:()=>P(Q=>Math.max(1,Q-1)),disabled:M===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,w)},(Q,ne)=>{let he;return w<=5||M<=3?he=ne+1:M>=w-2?he=w-4+ne:he=M-2+ne,e.jsx("button",{onClick:()=>P(he),className:`px-3 py-1 text-sm border rounded-md ${M===he?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"}`,children:he},he)})}),e.jsx("button",{onClick:()=>P(Q=>Math.min(w,Q+1)),disabled:M===w,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"}),e.jsx("button",{onClick:()=>P(w),disabled:M===w,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Last"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Locators"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leaves"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Travels"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lates"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Days"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ve.map(Q=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Q.employeeId}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Q.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Q.department}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:Q.locatorsCount||0})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:Q.leavesCount||0})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:Q.travelsCount||0})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ye(Q.lates)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Q.days}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Q.netDays.toFixed(4)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{console.log("Revise attendance for:",Q.name)},className:"text-blue-600 hover:text-blue-900 p-1 rounded-full hover:bg-blue-100",title:"Revise",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>{console.log("Approve attendance for:",Q.name)},className:"text-green-600 hover:text-green-900 p-1 rounded-full hover:bg-green-100",title:"Approve",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]},Q.employeeId))})]})}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-6 gap-4 text-sm font-medium",children:[e.jsx("div",{className:"text-gray-500",children:"Total Employees:"}),e.jsx("div",{className:"text-gray-900",children:b.length}),e.jsx("div",{className:"text-gray-500",children:"Total Days:"}),e.jsx("div",{className:"text-gray-900",children:Ie.totalDays}),e.jsx("div",{className:"text-gray-500",children:"Total Lates:"}),e.jsx("div",{className:"text-gray-900",children:ye(Ie.totalLates)}),e.jsx("div",{className:"text-gray-500",children:"Total Net Days:"}),e.jsx("div",{className:"text-gray-900",children:Ie.netDays.toFixed(4)}),e.jsx("div",{className:"text-gray-500",children:"Total Locators:"}),e.jsx("div",{className:"text-gray-900",children:b.reduce((Q,ne)=>Q+(ne.locatorsCount||0),0)}),e.jsx("div",{className:"text-gray-500",children:"Total Leaves:"}),e.jsx("div",{className:"text-gray-900",children:b.reduce((Q,ne)=>Q+(ne.leavesCount||0),0)}),e.jsx("div",{className:"text-gray-500",children:"Total Travels:"}),e.jsx("div",{className:"text-gray-900",children:b.reduce((Q,ne)=>Q+(ne.travelsCount||0),0)})]})})]}),!R&&d&&b.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No attendance data found for the selected parameters."})}),!d&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"Please select a month to compute attendance."})})]})})})},Bt=t=>{if(!t)return"";if(/^\d{2}:\d{2}$/.test(t))return t;const s=t.match(/(?:T| )(\d{2}):(\d{2})/);return s?`${s[1]}:${s[2]}`:""},dS=()=>{const{user:t}=Qt(),[s,r]=y.useState([]),[n,a]=y.useState(!1),[l,o]=y.useState(!1),[i,c]=y.useState(null),[h,p]=y.useState({SHIFTNO:"",SHIFTNAME:"",SHIFT_AMCHECKIN:"",SHIFT_AMCHECKIN_START:"",SHIFT_AMCHECKIN_END:"",SHIFT_AMCHECKOUT:"",SHIFT_AMCHECKOUT_START:"",SHIFT_AMCHECKOUT_END:"",SHIFT_PMCHECKIN:"",SHIFT_PMCHECKIN_START:"",SHIFT_PMCHECKIN_END:"",SHIFT_PMCHECKOUT:"",SHIFT_PMCHECKOUT_START:"",SHIFT_PMCHECKOUT_END:""}),[m,u]=y.useState({}),[x,j]=y.useState(""),[v,N]=y.useState(!1),[f,d]=y.useState(""),[g,b]=y.useState(""),E=y.useRef(h),R=y.useRef(m);y.useEffect(()=>{E.current=h},[h]),y.useEffect(()=>{R.current=m},[m]),y.useEffect(()=>{L()},[]);const S=Array.from({length:24},(M,P)=>P.toString().padStart(2,"0")),k=Array.from({length:12},(M,P)=>(P*5).toString().padStart(2,"0")),L=async()=>{try{a(!0);const M=await le.get("/management/shiftschedules");r(M.data)}catch(M){console.error("Error fetching schedules:",M),j("Error fetching shift schedules")}finally{a(!1)}},A=()=>{const M=s.length>0?Math.max(...s.map(P=>P.SHIFTNO))+1:1;p({SHIFTNO:M.toString(),SHIFTNAME:"",SHIFT_AMCHECKIN:"",SHIFT_AMCHECKIN_START:"",SHIFT_AMCHECKIN_END:"",SHIFT_AMCHECKOUT:"",SHIFT_AMCHECKOUT_START:"",SHIFT_AMCHECKOUT_END:"",SHIFT_PMCHECKIN:"",SHIFT_PMCHECKIN_START:"",SHIFT_PMCHECKIN_END:"",SHIFT_PMCHECKOUT:"",SHIFT_PMCHECKOUT_START:"",SHIFT_PMCHECKOUT_END:""}),u({}),c(null)};y.useCallback((M,P)=>{d(M),b(P),N(!0)},[]);const D=y.useCallback(()=>{N(!1),d(""),g&&(p(M=>({...M,[g]:""})),b(""))},[g]),I=y.useCallback((M,P,$)=>{const B=h[M]||"",[w,T]=B?B.split(":"):["",""];let H=w,K=T;P==="hours"?H=$:P==="minutes"&&(K=$);let J="";H&&K?J=`${H}:${K}`:H?J=`${H}:`:K&&(J=`:${K}`),p(X=>({...X,[M]:J}))},[h]),O=y.useCallback(M=>{if(!M)return{hours:"",minutes:""};const[P,$]=M.split(":");return{hours:P||"",minutes:$||""}},[]);y.useCallback((M,P)=>{if(M==="SHIFTNAME"){if(E.current[M]===P)return;p($=>({...$,[M]:P})),R.current[M]&&R.current[M]!==""&&u($=>({...$,[M]:""}))}},[]);const C=y.useCallback(M=>{if(!M)return{isValid:!0,error:""};const P=M.trim();if(/[^0-9:]/.test(P))return{isValid:!1,error:"Only numbers and colon (:) are allowed"};if((P.match(/:/g)||[]).length>1)return{isValid:!1,error:"Only one colon (:) is allowed"};if(P.includes(":")){const w=P.split(":");if(w.length!==2)return{isValid:!1,error:"Invalid time format. Use HH:MM format"};const[T,H]=w;if(T===""||isNaN(T)||parseInt(T)<0||parseInt(T)>23)return{isValid:!1,error:"Hours must be between 00-23"};if(H===""||isNaN(H)||parseInt(H)<0||parseInt(H)>59)return{isValid:!1,error:"Minutes must be between 00-59"}}return{isValid:!0,error:""}},[]),F=y.useCallback(()=>{const M={};return h.SHIFTNAME||(M.SHIFTNAME="Shift name is required"),["SHIFT_AMCHECKIN","SHIFT_AMCHECKIN_START","SHIFT_AMCHECKIN_END","SHIFT_PMCHECKOUT","SHIFT_PMCHECKOUT_START","SHIFT_PMCHECKOUT_END"].forEach(B=>{if(!h[B])M[B]="This field is required";else{const w=C(h[B]);w.isValid||(M[B]=w.error)}}),["SHIFT_AMCHECKIN","SHIFT_AMCHECKIN_START","SHIFT_AMCHECKIN_END","SHIFT_AMCHECKOUT","SHIFT_AMCHECKOUT_START","SHIFT_AMCHECKOUT_END","SHIFT_PMCHECKIN","SHIFT_PMCHECKIN_START","SHIFT_PMCHECKIN_END","SHIFT_PMCHECKOUT","SHIFT_PMCHECKOUT_START","SHIFT_PMCHECKOUT_END"].forEach(B=>{if(h[B]&&!M[B]){const w=C(h[B]);w.isValid||(M[B]=w.error)}}),u(M),Object.keys(M).length===0},[h,C]),U=async M=>{var P,$;if(M.preventDefault(),!F()){j("Please fix the validation errors before submitting");return}try{a(!0);const B={SHIFTNO:parseInt(h.SHIFTNO),SHIFTNAME:h.SHIFTNAME,SHIFT_AMCHECKIN:h.SHIFT_AMCHECKIN||null,SHIFT_AMCHECKIN_START:h.SHIFT_AMCHECKIN_START||null,SHIFT_AMCHECKIN_END:h.SHIFT_AMCHECKIN_END||null,SHIFT_AMCHECKOUT:h.SHIFT_AMCHECKOUT||null,SHIFT_AMCHECKOUT_START:h.SHIFT_AMCHECKOUT_START||null,SHIFT_AMCHECKOUT_END:h.SHIFT_AMCHECKOUT_END||null,SHIFT_PMCHECKIN:h.SHIFT_PMCHECKIN||null,SHIFT_PMCHECKIN_START:h.SHIFT_PMCHECKIN_START||null,SHIFT_PMCHECKIN_END:h.SHIFT_PMCHECKIN_END||null,SHIFT_PMCHECKOUT:h.SHIFT_PMCHECKOUT||null,SHIFT_PMCHECKOUT_START:h.SHIFT_PMCHECKOUT_START||null,SHIFT_PMCHECKOUT_END:h.SHIFT_PMCHECKOUT_END||null};i?(console.log("=== UPDATING EXISTING SHIFT SCHEDULE ==="),console.log("Editing Schedule ID:",i.SHIFTNO),console.log("Submit Data:",B),await le.put(`/management/shiftschedules/${i.SHIFTNO}`,B),console.log(" Shift schedule updated successfully"),j("Shift schedule updated successfully!")):(console.log("=== CREATING NEW SHIFT SCHEDULE ==="),console.log("Submit Data:",B),await le.post("/management/shiftschedules",B),console.log(" Shift schedule created successfully"),j("Shift schedule created successfully!")),o(!1),A(),L()}catch(B){console.error(" Error saving schedule:",B),j((($=(P=B.response)==null?void 0:P.data)==null?void 0:$.message)||"Error saving shift schedule")}finally{a(!1)}},Y=M=>{c(M),p({SHIFTNO:M.SHIFTNO.toString(),SHIFTNAME:M.SHIFTNAME||"",SHIFT_AMCHECKIN:Bt(M.SHIFT_AMCHECKIN),SHIFT_AMCHECKIN_START:Bt(M.SHIFT_AMCHECKIN_START),SHIFT_AMCHECKIN_END:Bt(M.SHIFT_AMCHECKIN_END),SHIFT_AMCHECKOUT:Bt(M.SHIFT_AMCHECKOUT),SHIFT_AMCHECKOUT_START:Bt(M.SHIFT_AMCHECKOUT_START),SHIFT_AMCHECKOUT_END:Bt(M.SHIFT_AMCHECKOUT_END),SHIFT_PMCHECKIN:Bt(M.SHIFT_PMCHECKIN),SHIFT_PMCHECKIN_START:Bt(M.SHIFT_PMCHECKIN_START),SHIFT_PMCHECKIN_END:Bt(M.SHIFT_PMCHECKIN_END),SHIFT_PMCHECKOUT:Bt(M.SHIFT_PMCHECKOUT),SHIFT_PMCHECKOUT_START:Bt(M.SHIFT_PMCHECKOUT_START),SHIFT_PMCHECKOUT_END:Bt(M.SHIFT_PMCHECKOUT_END)}),o(!0)},G=async M=>{var P,$;if(window.confirm("Are you sure you want to delete this shift schedule?"))try{a(!0),await le.delete(`/management/shiftschedules/${M}`),j("Shift schedule deleted successfully!"),L()}catch(B){console.error("Error deleting schedule:",B),j((($=(P=B.response)==null?void 0:P.data)==null?void 0:$.message)||"Error deleting shift schedule")}finally{a(!1)}},V=()=>{const M=(t==null?void 0:t.PRIVILEGE)||(t==null?void 0:t.privilege)||(t==null?void 0:t.Privilege);return parseInt(M)>=3};st.memo(({label:M,field:P,value:$,error:B})=>{const{hours:w,minutes:T}=O($);return e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:M}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{value:w,onChange:H=>I(P,"hours",H.target.value),className:`flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${B?"border-red-500 bg-red-50":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"--"}),S.map(H=>e.jsx("option",{value:H,children:H},H))]}),e.jsx("span",{className:"flex items-center text-gray-500",children:":"}),e.jsxs("select",{value:T,onChange:H=>I(P,"minutes",H.target.value),className:`flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${B?"border-red-500 bg-red-50":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"--"}),k.map(H=>e.jsx("option",{value:H,children:H},H))]})]}),B&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx("span",{className:"mr-1",children:""}),B]})]})});const W=(M,P)=>{const $=h[M]||"",[B,w]=$?$.split(":"):["",""],T=P.includes("*"),H=m[M];return e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${T?"text-gray-900 font-semibold":"text-gray-700"}`,children:P}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:B,onChange:K=>I(M,"hours",K.target.value),className:`flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ${T?`border-blue-300 focus:ring-blue-500 ${H?"border-red-500 bg-red-50":"bg-blue-50"}`:`border-gray-300 focus:ring-blue-500 ${H?"border-red-500 bg-red-50":""}`}`,children:[e.jsx("option",{value:"",children:"HH"}),S.map(K=>e.jsx("option",{value:K,children:K},K))]}),e.jsx("span",{className:"text-gray-500 self-center",children:":"}),e.jsxs("select",{value:w,onChange:K=>I(M,"minutes",K.target.value),className:`flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ${T?`border-blue-300 focus:ring-blue-500 ${H?"border-red-500 bg-red-50":"bg-blue-50"}`:`border-gray-300 focus:ring-blue-500 ${H?"border-red-500 bg-red-50":""}`}`,children:[e.jsx("option",{value:"",children:"MM"}),k.map(K=>e.jsx("option",{value:K,children:K},K))]})]}),H&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx("span",{className:"mr-1",children:""}),H]})]})},_=()=>l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:i?"Edit Shift Schedule":"Add New Shift Schedule"}),e.jsx("button",{onClick:()=>{o(!1),c(null),A()},className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("form",{onSubmit:U,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shift Number"}),e.jsx("input",{type:"text",value:h.SHIFTNO,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shift Name"}),e.jsx("input",{type:"text",value:h.SHIFTNAME,onChange:M=>p({...h,SHIFTNAME:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter shift name"})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-yellow-800 mb-2 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:""}),"Required Fields Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-1",children:"AM Check-in Group (Required):"}),e.jsxs("ul",{className:"text-blue-700 space-y-1",children:[e.jsx("li",{children:" AM Check-In"}),e.jsx("li",{children:" AM Check-In Start"}),e.jsx("li",{children:" AM Check-In End"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-1",children:"PM Check-out Group (Required):"}),e.jsxs("ul",{className:"text-green-700 space-y-1",children:[e.jsx("li",{children:" PM Check-Out"}),e.jsx("li",{children:" PM Check-Out Start"}),e.jsx("li",{children:" PM Check-Out End"})]})]})]}),e.jsxs("p",{className:"text-yellow-700 text-sm mt-2",children:[e.jsx("strong",{children:"Note:"})," All other fields are optional and will be saved as null if left empty."]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"AM Schedule"}),e.jsxs("div",{className:"bg-blue-100 border-2 border-blue-300 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"text-md font-semibold text-blue-900 mb-3 flex items-center",children:[e.jsx("span",{className:"bg-blue-600 text-white px-2 py-1 rounded text-xs mr-2",children:"REQUIRED"}),"AM Check-in Group"]}),e.jsxs("div",{className:"space-y-4",children:[W("SHIFT_AMCHECKIN","AM Check-In *"),W("SHIFT_AMCHECKIN_START","AM Check-In Start *"),W("SHIFT_AMCHECKIN_END","AM Check-In End *")]})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-700 mb-3 flex items-center",children:[e.jsx("span",{className:"bg-gray-500 text-white px-2 py-1 rounded text-xs mr-2",children:"OPTIONAL"}),"AM Check-out Group"]}),e.jsxs("div",{className:"space-y-4",children:[W("SHIFT_AMCHECKOUT","AM Check-Out"),W("SHIFT_AMCHECKOUT_START","AM Check-Out Start"),W("SHIFT_AMCHECKOUT_END","AM Check-Out End")]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:"PM Schedule"}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-700 mb-3 flex items-center",children:[e.jsx("span",{className:"bg-gray-500 text-white px-2 py-1 rounded text-xs mr-2",children:"OPTIONAL"}),"PM Check-in Group"]}),e.jsxs("div",{className:"space-y-4",children:[W("SHIFT_PMCHECKIN","PM Check-In"),W("SHIFT_PMCHECKIN_START","PM Check-In Start"),W("SHIFT_PMCHECKIN_END","PM Check-In End")]})]}),e.jsxs("div",{className:"bg-green-100 border-2 border-green-300 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-md font-semibold text-green-900 mb-3 flex items-center",children:[e.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded text-xs mr-2",children:"REQUIRED"}),"PM Check-out Group"]}),e.jsxs("div",{className:"space-y-4",children:[W("SHIFT_PMCHECKOUT","PM Check-Out *"),W("SHIFT_PMCHECKOUT_START","PM Check-Out Start *"),W("SHIFT_PMCHECKOUT_END","PM Check-Out End *")]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>{o(!1),c(null),A()},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:n?"Saving...":i?"Update":"Save"})]})]})]})}):null;return e.jsxs("div",{className:"space-y-6",children:[v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"text-2xl",children:""})}),e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Invalid Input"})})]}),e.jsx("p",{className:"text-gray-700 mb-6",children:f}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200",children:"OK"})})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Shift Schedule Management"}),e.jsx("button",{onClick:()=>{A(),o(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200",children:"Add New Schedule"})]}),x&&e.jsx("div",{className:`p-4 rounded-lg ${x.includes("Error")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x}),l&&_(),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Existing Shift Schedules"})}),n?e.jsx("div",{className:"p-6 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Loading schedules..."})}):s.length===0?e.jsx("div",{className:"p-6 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No shift schedules found. Create your first schedule above."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[e.jsxs("thead",{className:"bg-gray-50",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:"2",className:"w-20 px-3 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider border-r border-gray-300 bg-gradient-to-b from-gray-100 to-gray-200",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-lg",children:"#"}),e.jsx("span",{className:"text-xs",children:"SHIFT"})]})}),e.jsx("th",{rowSpan:"2",className:"w-32 px-3 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider border-r border-gray-300 bg-gradient-to-b from-gray-100 to-gray-200",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("span",{className:"text-xs",children:"NAME"})]})}),e.jsx("th",{colSpan:"3",className:"px-2 py-4 text-center text-xs font-bold text-white uppercase tracking-wider border-r border-gray-300 bg-gradient-to-b from-blue-500 to-blue-600",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("span",{className:"text-xs",children:"AM CHECKIN"})]})}),e.jsx("th",{colSpan:"3",className:"px-2 py-4 text-center text-xs font-bold text-white uppercase tracking-wider border-r border-gray-300 bg-gradient-to-b from-blue-500 to-blue-600",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("span",{className:"text-xs",children:"AM CHECKOUT"})]})}),e.jsx("th",{colSpan:"3",className:"px-2 py-4 text-center text-xs font-bold text-white uppercase tracking-wider border-r border-gray-300 bg-gradient-to-b from-green-500 to-green-600",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("span",{className:"text-xs",children:"PM CHECKIN"})]})}),e.jsx("th",{colSpan:"3",className:"px-2 py-4 text-center text-xs font-bold text-white uppercase tracking-wider border-r border-gray-300 bg-gradient-to-b from-green-500 to-green-600",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("span",{className:"text-xs",children:"PM CHECKOUT"})]})}),e.jsx("th",{rowSpan:"2",className:"w-24 px-3 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider bg-gradient-to-b from-gray-100 to-gray-200",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("span",{className:"text-xs",children:"ACTIONS"})]})})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"w-20 px-2 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200 bg-blue-50",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm",children:""}),e.jsx("span",{className:"text-xs",children:"CHECKIN"})]})}),e.jsx("th",{className:"w-20 px-2 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200 bg-green-50",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm"}),e.jsx("span",{className:"text-xs",children:"START"})]})}),e.jsx("th",{className:"w-20 px-2 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200 bg-red-50",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm"}),e.jsx("span",{className:"text-xs",children:"END"})]})}),e.jsx("th",{className:"w-20 px-2 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200 bg-blue-50",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm",children:""}),e.jsx("span",{className:"text-xs",children:"CHECKOUT"})]})}),e.jsx("th",{className:"w-20 px-2 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200 bg-green-50",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm"}),e.jsx("span",{className:"text-xs",children:"START"})]})}),e.jsx("th",{className:"w-20 px-2 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200 bg-red-50",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm"}),e.jsx("span",{className:"text-xs",children:"END"})]})}),e.jsx("th",{className:"w-20 px-2 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200 bg-blue-50",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm",children:""}),e.jsx("span",{className:"text-xs",children:"CHECKIN"})]})}),e.jsx("th",{className:"w-20 px-2 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200 bg-green-50",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm"}),e.jsx("span",{className:"text-xs",children:"START"})]})}),e.jsx("th",{className:"w-20 px-2 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200 bg-red-50",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm"}),e.jsx("span",{className:"text-xs",children:"END"})]})}),e.jsx("th",{className:"w-20 px-2 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200 bg-blue-50",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm",children:""}),e.jsx("span",{className:"text-xs",children:"CHECKOUT"})]})}),e.jsx("th",{className:"w-20 px-2 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200 bg-green-50",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm"}),e.jsx("span",{className:"text-xs",children:"START"})]})}),e.jsx("th",{className:"w-20 px-2 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200 bg-red-50",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm"}),e.jsx("span",{className:"text-xs",children:"END"})]})})]})]}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(M=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[e.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm font-bold text-center text-gray-900 border-r border-gray-200 bg-gray-50",children:e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("span",{className:"text-lg font-bold text-blue-600",children:M.SHIFTNO})})}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-900 border-r border-gray-200 bg-gray-50",children:e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"font-semibold text-gray-800",children:M.SHIFTNAME})})}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-sm text-gray-700 text-center border-r border-gray-200 bg-blue-50",children:e.jsx("div",{className:"font-mono text-sm font-semibold",children:Bt(M.SHIFT_AMCHECKIN)||"-"})}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-sm text-gray-700 text-center border-r border-gray-200 bg-green-50",children:e.jsx("div",{className:"font-mono text-sm font-semibold",children:Bt(M.SHIFT_AMCHECKIN_START)||"-"})}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-sm text-gray-700 text-center border-r border-gray-200 bg-red-50",children:e.jsx("div",{className:"font-mono text-sm font-semibold",children:Bt(M.SHIFT_AMCHECKIN_END)||"-"})}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-sm text-gray-700 text-center border-r border-gray-200 bg-blue-50",children:e.jsx("div",{className:"font-mono text-sm font-semibold",children:Bt(M.SHIFT_AMCHECKOUT)||"-"})}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-sm text-gray-700 text-center border-r border-gray-200 bg-green-50",children:e.jsx("div",{className:"font-mono text-sm font-semibold",children:Bt(M.SHIFT_AMCHECKOUT_START)||"-"})}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-sm text-gray-700 text-center border-r border-gray-200 bg-red-50",children:e.jsx("div",{className:"font-mono text-sm font-semibold",children:Bt(M.SHIFT_AMCHECKOUT_END)||"-"})}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-sm text-gray-700 text-center border-r border-gray-200 bg-blue-50",children:e.jsx("div",{className:"font-mono text-sm font-semibold",children:Bt(M.SHIFT_PMCHECKIN)||"-"})}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-sm text-gray-700 text-center border-r border-gray-200 bg-green-50",children:e.jsx("div",{className:"font-mono text-sm font-semibold",children:Bt(M.SHIFT_PMCHECKIN_START)||"-"})}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-sm text-gray-700 text-center border-r border-gray-200 bg-red-50",children:e.jsx("div",{className:"font-mono text-sm font-semibold",children:Bt(M.SHIFT_PMCHECKIN_END)||"-"})}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-sm text-gray-700 text-center border-r border-gray-200 bg-blue-50",children:e.jsx("div",{className:"font-mono text-sm font-semibold",children:Bt(M.SHIFT_PMCHECKOUT)||"-"})}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-sm text-gray-700 text-center border-r border-gray-200 bg-green-50",children:e.jsx("div",{className:"font-mono text-sm font-semibold",children:Bt(M.SHIFT_PMCHECKOUT_START)||"-"})}),e.jsx("td",{className:"px-2 py-4 whitespace-nowrap text-sm text-gray-700 text-center border-r border-gray-200 bg-red-50",children:e.jsx("div",{className:"font-mono text-sm font-semibold",children:Bt(M.SHIFT_PMCHECKOUT_END)||"-"})}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm font-medium text-center bg-gray-50",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("button",{onClick:()=>Y(M),disabled:!V(),className:`px-2 py-1 rounded-md transition-all duration-200 text-xs font-semibold ${V()?"text-indigo-600 hover:text-indigo-900 hover:bg-indigo-100":"text-gray-400 cursor-not-allowed bg-gray-100"}`,title:V()?"Edit shift schedule":"Insufficient privileges to edit",children:" Edit"}),e.jsx("button",{onClick:()=>G(M.SHIFTNO),disabled:!V(),className:`px-2 py-1 rounded-md transition-all duration-200 text-xs font-semibold ${V()?"text-red-600 hover:text-red-900 hover:bg-red-100":"text-gray-400 cursor-not-allowed bg-gray-100"}`,title:V()?"Delete shift schedule":"Insufficient privileges to delete",children:" Delete"})]})})]},M.SHIFTNO))})]})})]})]})},Fr=t=>{if(!t)return"-";if(/^\d{2}:\d{2}$/.test(t))return t;const s=t.match(/(?:T| )(\d{2}):(\d{2})/);return s?`${s[1]}:${s[2]}`:"-"},uS=()=>{const[t,s]=y.useState([]),[r,n]=y.useState([]),[a,l]=y.useState([]),[o,i]=y.useState(!1),[c,h]=y.useState(null),[p,m]=y.useState([]),[u,x]=y.useState(""),[j,v]=y.useState("all"),[N,f]=y.useState(""),[d,g]=y.useState(25),[b,E]=y.useState(1);y.useEffect(()=>{R(),S(),k()},[]);const R=async()=>{try{i(!0);const M=await le.get("/management/shiftschedules");s(M.data)}catch(M){console.error("Error fetching schedules:",M),f("Error fetching shift schedules")}finally{i(!1)}},S=async()=>{try{const M=await le.get("/employees");n(M.data)}catch(M){console.error("Error fetching employees:",M),f("Error fetching employees")}},k=async()=>{try{const M=await le.get("/employees/departments");l(M.data)}catch(M){console.error("Error fetching departments:",M)}},L=y.useMemo(()=>{let M=r;return j!=="all"&&(M=M.filter(P=>{const $=String(P.DEFAULTDEPTID||""),B=String(j);return $===B})),u.trim()&&(M=M.filter(P=>{var $,B,w;return(($=P.NAME)==null?void 0:$.toLowerCase().includes(u.toLowerCase()))||((B=P.BADGENUMBER)==null?void 0:B.toLowerCase().includes(u.toLowerCase()))||((w=P.SSN)==null?void 0:w.toLowerCase().includes(u.toLowerCase()))})),M},[r,j,u]),A=Math.ceil(L.length/d),D=(b-1)*d,I=D+d,O=L.slice(D,I);y.useEffect(()=>{E(1)},[j,u,d]);const C=M=>{h(M),m([])},F=M=>{m(P=>P.includes(M)?P.filter($=>$!==M):[...P,M])},U=()=>{p.length===O.length?m([]):m(O.map(M=>M.USERID))},Y=async()=>{if(!c){f("Please select a shift schedule first");return}if(p.length===0){f("Please select at least one employee");return}try{i(!0);const M={shiftNo:c.SHIFTNO,employeeIds:p};await le.post("/management/assign-shift-schedule",M),f(`Successfully assigned shift schedule "${c.SHIFTNAME}" to ${p.length} employee(s)`),m([]),h(null),S()}catch(M){console.error("Error assigning schedule:",M),f("Error assigning shift schedule to employees")}finally{i(!1)}},G=M=>{if(!M.InheritDeptSchClass||M.InheritDeptSchClass===null||M.InheritDeptSchClass==="")return{status:"Not Assigned",schedule:null,className:"text-gray-500"};const P=Number(M.InheritDeptSchClass),$=t.find(B=>Number(B.SHIFTNO)===P);return $?{status:"Assigned",schedule:$,className:"text-green-600 font-medium"}:{status:"Invalid Schedule",schedule:null,className:"text-red-600 font-medium"}},V=M=>{E(Math.max(1,Math.min(M,A)))},W=()=>{V(b-1)},_=()=>{V(b+1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Employee Shift Assignment"}),e.jsx("p",{className:"text-gray-600",children:"Assign shift schedules to employees"})]}),N&&e.jsx("div",{className:`p-4 rounded-lg ${N.includes("Error")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:N}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Select Shift Schedule"}),o?e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-gray-500",children:"Loading schedules..."})}):t.length===0?e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-gray-500",children:"No shift schedules available. Please create schedules first."})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(M=>e.jsxs("div",{onClick:()=>C(M),className:`p-4 border-2 rounded-lg cursor-pointer transition-colors ${(c==null?void 0:c.SHIFTNO)===M.SHIFTNO?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:M.SHIFTNAME}),e.jsxs("span",{className:"text-sm text-gray-500",children:["#",M.SHIFTNO]})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:["AM: ",Fr(M.SHIFT_AMCHECKIN)," - ",Fr(M.SHIFT_AMCHECKOUT)]}),e.jsxs("div",{children:["PM: ",Fr(M.SHIFT_PMCHECKIN)," - ",Fr(M.SHIFT_PMCHECKOUT)]})]})]},M.SHIFTNO))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Select Employees"}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Department"}),e.jsxs("select",{value:j,onChange:M=>v(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Departments"}),a.map(M=>e.jsxs("option",{value:M.DEPTID,children:[M.DEPTNAME," (ID: ",M.DEPTID,")"]},M.DEPTID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Employees"}),e.jsx("input",{type:"text",value:u,onChange:M=>x(M.target.value),placeholder:"Search by name, badge number, or SSN...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Show per page"}),e.jsxs("select",{value:d,onChange:M=>g(Number(M.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]})]}),c&&e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Selected Schedule:"})," ",c.SHIFTNAME," (Shift #",c.SHIFTNO,")"]})})]}),o?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Loading employees..."})}):L.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsxs("p",{className:"text-gray-500",children:["No employees found matching the criteria.",j!=="all"&&` No employees in department ID: ${j}`]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",D+1," to ",Math.min(I,L.length)," of ",L.length," employees"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[p.length," selected"]})]}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("button",{onClick:U,className:"px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:p.length===O.length?"Deselect All":"Select All on Page"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:p.length===O.length&&O.length>0,onChange:U,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Badge Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Schedule"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(M=>{const P=G(M);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:p.includes(M.USERID),onChange:()=>F(M.USERID),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:M.NAME}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",M.USERID]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.BADGENUMBER}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[M.DEPTNAME||"No Department"," (ID: ",M.DEFAULTDEPTID,")"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:`text-sm ${P.className}`,children:[P.status==="Not Assigned"&&e.jsx("span",{children:"Not Assigned"}),P.status==="Assigned"&&e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:P.schedule.SHIFTNAME}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Shift #",P.schedule.SHIFTNO," | AM: ",Fr(P.schedule.SHIFT_AMCHECKIN),"-",Fr(P.schedule.SHIFT_AMCHECKOUT)," | PM: ",Fr(P.schedule.SHIFT_PMCHECKIN),"-",Fr(P.schedule.SHIFT_PMCHECKOUT)]})]}),P.status==="Invalid Schedule"&&e.jsxs("div",{children:[e.jsx("span",{children:"Invalid Schedule"}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Reference: ",M.InheritDeptSchClass]})]})]})})]},M.USERID)})})]})}),A>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:W,disabled:b===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",b," of ",A]}),e.jsx("button",{onClick:_,disabled:b===A,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,A)},(M,P)=>{let $;return A<=5||b<=3?$=P+1:b>=A-2?$=A-4+P:$=b-2+P,e.jsx("button",{onClick:()=>V($),className:`px-3 py-1 text-sm border rounded-md ${b===$?"bg-blue-600 text-white border-blue-600":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:$},$)})})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:Y,disabled:!c||p.length===0||o,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Assigning...":`Assign Schedule to ${p.length} Employee(s)`})})]})]})]})},mS=(t,s)=>{if(!t)return"";const r=new Date(t);if(isNaN(r.getTime()))return t;const n=r.toLocaleString("en-US",{month:"long"}),a=r.getFullYear(),l=new Date(r.getFullYear(),r.getMonth()+1,0).getDate();switch(s){case"first_half":return`${n} 1-15, ${a}`;case"second_half":return`${n} 16-${l}, ${a}`;case"full":default:return`${n} ${a}`}},ff=t=>{const r=new Date(t).getDay();return r===0||r===6},P0=t=>{if(!t)return"";if(typeof t=="string"){const s=t.match(/(\d{2}:\d{2})(?::\d{2})?/);return s?s[1]:t}return t},hs=t=>{if(!t||typeof t!="string")return 0;const s=P0(t),[r,n]=s.split(":").map(Number);return r*60+n},Jt=t=>{if(!t)return"";if(typeof t=="string"){const s=t.match(/(\d{2}:\d{2})(?::\d{2})?/);return s?s[1]:t}return t},pf=(t,s)=>!t||!s?[null,null]:[hs(t),hs(s)],xf=(t,s,r)=>{if(!t||!s||!r)return!1;const n=hs(t);return n>=s&&n<=r},gf=(t,s)=>{const r=[],n=new Date(t),a=new Date(s);for(;n<=a;){const l=n.getFullYear(),o=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0"),c=`${l}-${o}-${i}`;r.push(c),n.setDate(n.getDate()+1)}return r},hS=(t,s)=>{if(!t||!s)return null;const r=new Date(t),n=r.getFullYear(),a=r.getMonth();let l,o;switch(s){case"first_half":l=new Date(n,a,1),o=new Date(n,a,15);break;case"second_half":l=new Date(n,a,16),o=new Date(n,a+1,0);break;case"full":default:l=new Date(n,a,1),o=new Date(n,a+1,0);break}return{startDate:l,endDate:o,startDateStr:l.toISOString().split("T")[0],endDateStr:o.toISOString().split("T")[0]}},fS=t=>{if(!t)return null;const s=new Date(t),r=s.getFullYear(),n=s.getMonth(),a=new Date(r,n,1),l=new Date(r,n+1,0);return{startDate:a,endDate:l,startDateStr:a.toISOString().split("T")[0],endDateStr:l.toISOString().split("T")[0]}},yf=(t,s,r)=>{if(!r||r==="full")return!0;const n=parseInt(t.split("-")[2]);switch(r){case"first_half":return n>=1&&n<=15;case"second_half":return n>=16;default:return!0}};function F0({employee:t,selectedMonth:s,selectedPeriod:r="full",onClose:n}){const a=y.useRef(),[l,o]=y.useState(!0),[i,c]=y.useState(null),[h,p]=y.useState([]),[m,u]=y.useState([]),[x,j]=y.useState({days:0,late:0}),[v,N]=y.useState(0),[f,d]=y.useState(0),[g,b]=y.useState(null);y.useEffect(()=>{t&&s&&E()},[t,s,r]);const E=async()=>{console.log(" Starting data fetch for employee:",t.NAME),console.log(" Selected period:",r),o(!0),b(null);try{console.log(" Fetching shift schedule for USERID:",t.USERID);const k=await le.get(`/employees/${t.USERID}/shift-schedule`);console.log(" Shift schedule response:",k.data);const L=k.data.shiftSchedule||null;console.log(" Extracted shift data:",L),c(L);const A=hS(s,r);if(!A)throw new Error("Invalid date range calculation");console.log(" Data range for period:",{period:r,startDate:A.startDateStr,endDate:A.endDateStr}),console.log(" Fetching time logs for USERID:",t.USERID);const D=await le.get(`/logs/${t.USERID}`,{params:{startDate:A.startDateStr,endDate:A.endDateStr}});console.log(" Time logs response:",D.data);const I=Array.isArray(D.data)?D.data:[];p(I),console.log(" Processing logs...");const O=fS(s);R(I,L,O.startDate,O.endDate,r)}catch(k){console.error(" Error fetching data:",k),b("Failed to fetch data. Please try again.")}finally{o(!1)}},R=(k,L,A,D,I)=>{if(console.log(" Starting log processing..."),console.log(" Input data:",{logsCount:k.length,schedule:L,startDate:A,endDate:D,selectedPeriod:I}),!L){console.warn(" No shift schedule found, skipping processing");const w=gf(A,D).map((T,H)=>{const K=ff(T),J=yf(T,s,I);return{day:H+1,date:T,amIn:"",amOut:"",pmIn:"",pmOut:"",late:"",undertime:"",undertimeHours:"",undertimeMinutes:"",days:"",remarks:J?"No shift schedule assigned":"",isWeekend:K,isInPeriod:J}});u(w),j({days:0,late:0}),N(0),d(0);return}const O=L!=null&&L.SHIFT_AMCHECKOUT_START?Jt(L.SHIFT_AMCHECKOUT_START):"11:00",C=L!=null&&L.SHIFT_AMCHECKOUT_END?Jt(L.SHIFT_AMCHECKOUT_END):"12:30",F=L!=null&&L.SHIFT_PMCHECKIN_START?Jt(L.SHIFT_PMCHECKIN_START):"12:31",U=L!=null&&L.SHIFT_PMCHECKIN_END?Jt(L.SHIFT_PMCHECKIN_END):"14:00",[Y,G]=pf(O,C),[V,W]=pf(F,U);console.log(" Time windows:",{amCheckOutStart:O,amCheckOutEnd:C,pmCheckInStart:F,pmCheckInEnd:U,amCheckOutStartMin:Y,amCheckOutEndMin:G,pmCheckInStartMin:V,pmCheckInEndMin:W});const _=gf(A,D);console.log(" Generated local date range for display:",_);const M=[];let P=0,$=0;for(let B=0;B<_.length;B++){const w=_[B],T=B+1,H=ff(w),K=yf(w,s,I);let J=[];K&&(J=k.filter(se=>{let we="";return se.CHECKTIME&&(se.CHECKTIME.includes(" ")?we=se.CHECKTIME.split(" ")[0]:se.CHECKTIME.includes("T")?we=se.CHECKTIME.split("T")[0]:we=se.CHECKTIME),(w==="2024-08-01"||w==="2024-08-02")&&console.log(` Date comparison for ${w}:`,{logDateStr:we,dateStr:w,matches:we===w,checktime:se.CHECKTIME}),we===w})),console.log(` Processing ${w} (Day ${T}) - In period: ${K}:`,J.length,"logs"),J.length>0&&console.log(" Sample day logs:",J.map(se=>({CHECKTIME:se.CHECKTIME,extractedTime:P0(se.CHECKTIME),extractedDate:se.CHECKTIME?se.CHECKTIME.split(" ")[0]:"N/A"})));let X="",pe="",oe="",ce="";if(J.length>0){const se=J.filter(ne=>{const he=Jt(ne.CHECKTIME||ne.DATE||ne.date);return he&&hs(he)<720}).sort((ne,he)=>hs(Jt(ne.CHECKTIME||ne.DATE||ne.date))-hs(Jt(he.CHECKTIME||he.DATE||he.date)));se.length>0&&(X=Jt(se[0].CHECKTIME||se[0].DATE||se[0].date));const we=J.filter(ne=>{const he=Jt(ne.CHECKTIME||ne.DATE||ne.date);return he&&xf(he,Y,G)}).sort((ne,he)=>hs(Jt(ne.CHECKTIME||ne.DATE||ne.date))-hs(Jt(he.CHECKTIME||he.DATE||he.date)));we.length>0&&(pe=Jt(we[0].CHECKTIME||we[0].DATE||we[0].date));const ve=J.filter(ne=>{const he=Jt(ne.CHECKTIME||ne.DATE||ne.date);return he&&xf(he,V,W)}).sort((ne,he)=>hs(Jt(ne.CHECKTIME||ne.DATE||ne.date))-hs(Jt(he.CHECKTIME||he.DATE||he.date)));ve.length>0&&(oe=Jt(ve[0].CHECKTIME||ve[0].DATE||ve[0].date));const Q=J.filter(ne=>{const he=Jt(ne.CHECKTIME||ne.DATE||ne.date);return he&&hs(he)>W}).sort((ne,he)=>hs(Jt(he.CHECKTIME||he.DATE||he.date))-hs(Jt(ne.CHECKTIME||ne.DATE||ne.date)));Q.length>0&&(ce=Jt(Q[0].CHECKTIME||Q[0].DATE||Q[0].date))}console.log(` Properly grouped times for ${w}:`,{AM_CHECKIN:X,AM_CHECKOUT:pe,PM_CHECKIN:oe,PM_CHECKOUT:ce,totalLogs:J.length});let Ae=0;if(K&&L){if(X&&L.SHIFT_AMCHECKIN){const se=hs(Jt(L.SHIFT_AMCHECKIN)),we=hs(X);we>se&&(Ae+=we-se)}if(oe&&L.SHIFT_PMCHECKIN){const se=hs(Jt(L.SHIFT_PMCHECKIN)),we=hs(oe);we>se&&(Ae+=we-se)}}let Be="";H?Be="Weekend":K&&([X,pe,oe,ce].filter(we=>we&&we.trim()!=="").length===0?Be="Absent":Ae>0&&(Be=`Late ${Ae} min`));const Ie=[X,pe,oe,ce].filter(se=>se&&se.trim()!=="").length,ye=K&&Ie>0&&!H?1:0;M.push({day:T,date:w,amIn:K?X:"",amOut:K?pe:"",pmIn:K?oe:"",pmOut:K?ce:"",late:K&&Ae>0?`${Ae} min`:"",undertime:"",undertimeHours:"",undertimeMinutes:"",days:ye,remarks:Be,isWeekend:H,isInPeriod:K}),K&&Ie>0&&!H&&(P++,$+=Ae)}console.log(" Final totals:",{totalDays:P,totalLate:$}),u(M),j({days:P,late:$}),N(0),d(0)},S=()=>{const k=a.current.innerHTML,L=window.open("","_blank");L.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>DTR Print</title>
          <style>
            @media print {
              @page {
                size: A4;
                margin: 8mm;
              }
              body { 
                margin: 0; 
                padding: 0; 
                font-family: Arial, sans-serif;
                font-size: 6px;
                line-height: 1.1;
              }
              .no-print { display: none !important; }
              
              /* Header Styles - Compact for space */
              .header { 
                text-align: center; 
                margin-bottom: 6px; 
                font-size: 10px;
              }
              .header h1 { 
                font-size: 12px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header h2 { 
                font-size: 11px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header h3 { 
                font-size: 10px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header p { 
                font-size: 8px; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              
              /* Specific header text styling - Font size 12px with bold month */
              .header .month-year {
                font-size: 10px !important;
                font-weight: normal;
                margin: 1px 0;
              }
              .header .month-year .bold-month {
                font-weight: bold !important;
              }
              .header .official-hours {
                font-size: 8px !important;
                font-weight: normal;
                margin: 1px 0;
              }
              .header .regular-days {
                font-size: 8px !important;
                font-weight: normal;
                margin: 1px 0;
              }
              
              /* Table Styles - 40% increase in row height from default */
              table { 
                border-collapse: collapse; 
                width: 100%; 
                font-size: 10px;
                margin-bottom: 8px;
                table-layout: fixed;
                height: auto;
              }
              th, td { 
                border: 0.5px solid #000; 
                padding: 2.8px 1px; /* 40% increase from 2px */
                text-align: center; 
                vertical-align: middle;
                font-size: 11px; /* 30% increase from 6px: 6px + 5px */
                line-height: 1.0;
                height: 14px; /* 40% increase from 10px */
              }
              th { 
                font-weight: bold; 
                background-color: #d3d3d3 !important; /* Light grey header */
                font-size: 11px; /* 30% increase from 6px: 6px + 5px */
                height: 16.8px; /* 40% increase from 12px */
              }
              
              /* Column widths for better A4 utilization */
              .col-day { width: 6%; }
              .col-am-arrival { width: 13%; }
              .col-am-departure { width: 13%; }
              .col-pm-arrival { width: 13%; }
              .col-pm-departure { width: 13%; }
              .col-undertime-hours { width: 6%; }
              .col-undertime-minutes { width: 6%; }
              .col-days { width: 7%; }
              .col-late { width: 7%; }
              
              /* Weekend day styling */
              .weekend-day {
                color: #0066cc !important; /* Blue color for weekends */
                font-weight: bold;
              }
              
              /* Footer Styles - Compact */
              .footer { 
                margin-top: 6px; 
                font-size: 8px;
                background-color: #f5f5f5 !important; /* Light grey footer */
                padding: 6px;
                border: 1px solid #ddd;
              }
              .footer p { 
                margin: 0 0 2px 0; 
                font-size: 8px;
                line-height: 1.1;
              }
              .footer p.text-right {
                text-align: right !important;
              }
              .footer .mb-2 {
                margin-bottom: 8px !important;
              }
              .signature-line { 
                margin-top: 4px; 
                text-align: right; 
              }
              .signature-line .line { 
                border-bottom: 1px solid #000; 
                display: inline-block; 
                width: 120px; 
              }
              .signature-line .label { 
                text-align: right !important; /* Right align the "In Charge" label */
                width: 100%; 
                margin-top: 1px; 
                font-size: 8px;
                padding-right: 0;
              }
              
              /* Employee signature line styling */
              .signature-line .employee-signature { 
                border-bottom: 1px solid #000; 
                display: inline-block; 
                width: 300px; 
                margin-top: 2px;
              }
              
              /* Fit to page container - No height restrictions */
              .print-container {
                height: auto;
                width: 100%;
                overflow: visible;
              }
              .table-container {
                height: auto;
                overflow: visible;
              }
              
              /* Totals row styling */
              .totals-row {
                background-color: #d3d3d3 !important; /* Light grey totals row */
                font-weight: bold;
                height: 16.8px; /* 40% increase from 12px to match header */
              }
            }
          </style>
        </head>
        <body>
          <div class="print-container">
            ${k}
          </div>
        </body>
      </html>
    `),L.document.close(),L.onload=()=>{L.print(),L.close()}};return l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{children:"Loading DTR data..."})]})})}):g?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-gray-700 mb-4",children:g}),e.jsx("button",{onClick:n,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"DTR Print Preview"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:S,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Print"}),e.jsx("button",{onClick:n,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})]})]}),e.jsxs("div",{ref:a,className:"print-content",children:[e.jsxs("div",{className:"header text-center mb-4",children:[e.jsx("h1",{className:"text-lg font-bold",children:"CIVIL SERVICE FORM NO. 48"}),e.jsx("div",{className:"mt-1"}),e.jsx("h2",{className:"text-lg font-bold",children:"DAILY TIME RECORD"}),e.jsx("h3",{className:"text-lg font-bold",children:t.NAME}),e.jsx("p",{className:"text-sm",children:"NAME"}),e.jsxs("p",{className:"text-lg month-year",children:["For the month of: ",e.jsx("span",{className:"bold-month",children:mS(s,r)})]}),e.jsx("p",{className:"text-sm official-hours",children:"Official hours for arrival and departure"}),e.jsx("p",{className:"text-sm regular-days",children:"Regular Days ________ Saturdays _____________"})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 mb-4",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-gray-300",children:[e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-day",children:"Day"}),e.jsx("th",{colSpan:"2",className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs",children:"AM"}),e.jsx("th",{colSpan:"2",className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs",children:"PM"}),e.jsx("th",{colSpan:"2",className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs",children:"Undertime"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-days",children:"Days"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-late",children:"Late"})]}),e.jsxs("tr",{className:"bg-gray-300",children:[e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-am-arrival",children:"Arrival"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-am-departure",children:"Departure"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-pm-arrival",children:"Arrival"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-pm-departure",children:"Departure"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-undertime-hours",children:"Hours"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-undertime-minutes",children:"Minutes"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium"})]})]}),e.jsx("tbody",{children:m.map((k,L)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:`border border-gray-300 px-2 py-2 text-center text-xs ${k.isWeekend?"weekend-day":""}`,children:k.day}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:k.amIn}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:k.amOut}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:k.pmIn}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:k.pmOut}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:k.undertimeHours}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:k.undertimeMinutes}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:k.days}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:k.late})]},L))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-300 font-semibold totals-row",children:[e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:"TOTAL"}),e.jsx("td",{colSpan:"4",className:"border border-gray-300 px-2 py-2 text-center text-xs"}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:v}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:f}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-bold",children:x.days}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-bold",children:x.late})]})})]})}),e.jsxs("div",{className:"footer bg-gray-100 p-3 border border-gray-300",children:[e.jsx("p",{className:"mb-2",children:"I CERTIFY on my honor that the above is a true and correct report of the hours and work performed, record of which was made daily at the time of arrival at and departure from office."}),e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"signature-line",children:e.jsx("div",{className:"line",children:"_________________"})}),e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"mb-2"}),e.jsx("p",{className:"mb-2 text-right",children:"Verified as to the prescribed office hours."}),e.jsx("div",{className:"mb-2"}),e.jsxs("div",{className:"signature-line",children:[e.jsx("div",{className:"line",children:"_______________"}),e.jsx("div",{className:"label",children:"In Charge"})]})]})]})]})})}const pS=(t,s)=>{if(!t)return"";const r=new Date(t);if(isNaN(r.getTime()))return t;const n=r.toLocaleString("en-US",{month:"long"}),a=r.getFullYear(),l=new Date(r.getFullYear(),r.getMonth()+1,0).getDate();switch(s){case"first_half":return`${n} 1-15, ${a}`;case"second_half":return`${n} 16-${l}, ${a}`;case"full":default:return`${n} ${a}`}},xS=t=>{const r=new Date(t).getDay();return r===0||r===6},Po=t=>{if(!t)return"";if(typeof t=="string"){const s=t.match(/(\d{2}:\d{2})(?::\d{2})?/);return s?s[1]:t}return t},ss=t=>{if(!t||typeof t!="string")return 0;const s=Po(t),[r,n]=s.split(":").map(Number);return r*60+n},Xt=t=>{if(!t)return"";if(typeof t=="string"){const s=t.match(/(\d{2}:\d{2})(?::\d{2})?/);return s?s[1]:t}return t},bf=(t,s)=>!t||!s?[null,null]:[ss(t),ss(s)],vf=(t,s,r)=>{if(!t||!s||!r)return!1;const n=ss(t);return n>=s&&n<=r},gS=(t,s)=>{const r=[],n=new Date(t),a=new Date(s);for(;n<=a;){const l=n.getFullYear(),o=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0"),c=`${l}-${o}-${i}`;r.push(c),n.setDate(n.getDate()+1)}return r},jf=(t,s)=>{if(!t||!s)return null;const r=new Date(t),n=r.getFullYear(),a=r.getMonth();let l,o;switch(s){case"first_half":l=new Date(n,a,1),o=new Date(n,a,15);break;case"second_half":l=new Date(n,a,16),o=new Date(n,a+1,0);break;case"full":default:l=new Date(n,a,1),o=new Date(n,a+1,0);break}return{startDate:l,endDate:o,startDateStr:t,endDateStr:o.toISOString().split("T")[0]}},yS=t=>{if(!t)return null;const s=new Date(t),r=s.getFullYear(),n=s.getMonth(),a=new Date(r,n,1),l=new Date(r,n+1,0);return{startDate:a,endDate:l,startDateStr:t,endDateStr:l.toISOString().split("T")[0]}},bS=(t,s,r)=>{if(!r||r==="full")return!0;const n=parseInt(t.split("-")[2]);switch(r){case"first_half":return n>=1&&n<=15;case"second_half":return n>=16;default:return!0}};function U0({department:t,selectedMonth:s,selectedPeriod:r="full",selectedStatus:n="active",selectedAppointment:a="all",selectedEmployees:l=new Set,departmentEmployees:o=[],onClose:i}){const c=y.useRef(),[h,p]=y.useState(!1),[m,u]=y.useState({}),[x,j]=y.useState(null),[v,N]=y.useState(!1),f=l;y.useEffect(()=>{console.log(" GenerateDTRPrint_Dept Component Mounted/Updated:",{department:t,selectedMonth:s,selectedPeriod:r,selectedStatus:n,selectedAppointment:a,timestamp:new Date().toISOString()})},[t,s,r,n,a]),y.useEffect(()=>{s&&f.size>0&&d()},[t,s,r,f]);const d=async()=>{console.log(" Starting data fetch for selected employees..."),console.log(" Input parameters:",{department:t,selectedMonth:s,selectedPeriod:r,selectedStatus:n,selectedAppointment:a,selectedEmployeesCount:f.size}),p(!0),N(!0),j(null),u({});try{const E={};for(const R of f){console.log(` Processing employee ID: ${R}`);const S=o.find(C=>C.USERID===parseInt(R));if(!S){console.warn(` Employee with ID ${R} not found in departmentEmployees`);continue}console.log(` Found employee: ${S.NAME}`);const k=await le.get(`/employees/${S.USERID}/shift-schedule`),L=k.data.success?k.data.data:null;console.log(` Shift schedule for ${S.NAME}:`,L);const A=await le.get(`/logs/${S.USERID}`,{params:{startDate:jf(s,r).startDateStr,endDate:jf(s,r).endDateStr}}),D=Array.isArray(A.data)?A.data:[];console.log(` Time logs for ${S.NAME}:`,D.length,"logs");const I=yS(s),O=g(D,L,I.startDate,I.endDate,S.NAME,r);console.log(` Processed ${O.processed.length} days for ${S.NAME}`),E[S.USERID]={employee:S,shiftSchedule:L,logs:D,processed:O.processed,totals:O.totals,undertime:O.undertime}}console.log(" All employee data processed:",Object.keys(E).length,"employees"),u(E),N(!1)}catch(E){console.error(" Error fetching department data:",E),j(E.message||"Failed to load department data"),N(!1)}finally{p(!1)}},g=(E,R,S,k,L,A)=>{console.log(` Starting log processing for ${L}...`),console.log(" Input data:",{logsCount:E.length,schedule:R,startDate:S,endDate:k,selectedPeriod:A}),E.length>0&&console.log(" Sample log data:",{firstLog:E[0],lastLog:E[E.length-1],totalLogs:E.length});const D=gS(S,k);console.log(` Generated local date range for ${L}:`,{startDate:S,endDate:k,totalDays:D.length,firstDay:D[0],lastDay:D[D.length-1],fullRange:D});const I=R!=null&&R.SHIFT_AMCHECKOUT_START?Xt(R.SHIFT_AMCHECKOUT_START):"11:00",O=R!=null&&R.SHIFT_AMCHECKOUT_END?Xt(R.SHIFT_AMCHECKOUT_END):"12:30",C=R!=null&&R.SHIFT_PMCHECKIN_START?Xt(R.SHIFT_PMCHECKIN_START):"12:31",F=R!=null&&R.SHIFT_PMCHECKIN_END?Xt(R.SHIFT_PMCHECKIN_END):"14:00",[U,Y]=bf(I,O),[G,V]=bf(C,F);console.log(" Time windows:",{amCheckOutStart:I,amCheckOutEnd:O,pmCheckInStart:C,pmCheckInEnd:F,amCheckOutStartMin:U,amCheckOutEndMin:Y,pmCheckInStartMin:G,pmCheckInEndMin:V});const W=[];let _=0,M=0,P=0;for(let $=0;$<D.length;$++){const B=D[$],w=$+1,T=xS(B),H=bS(B,s,A);let K=[];H&&(K=E.filter(se=>{let we="";return se.CHECKTIME&&(se.CHECKTIME.includes(" ")?we=se.CHECKTIME.split(" ")[0]:se.CHECKTIME.includes("T")?we=se.CHECKTIME.split("T")[0]:we=se.CHECKTIME),(B==="2024-08-01"||B==="2024-08-02")&&console.log(` Date comparison for ${B} (${L}):`,{logDateStr:we,dateStr:B,matches:we===B,checktime:se.CHECKTIME}),we===B})),console.log(` Processing ${B} (Day ${w}) for ${L} - In period: ${H}:`,K.length,"logs"),K.length>0&&console.log(" Sample day logs:",K.map(se=>({CHECKTIME:se.CHECKTIME,extractedTime:Po(se.CHECKTIME),extractedDate:se.CHECKTIME?se.CHECKTIME.split(" ")[0]:"N/A"})));let J="",X="",pe="",oe="";if(K.length>0){const se=K.filter(ne=>{const he=Xt(ne.CHECKTIME||ne.DATE||ne.date);return he&&ss(he)<720}).sort((ne,he)=>ss(Xt(ne.CHECKTIME||ne.DATE||ne.date))-ss(Xt(he.CHECKTIME||he.DATE||he.date)));se.length>0&&(J=Xt(se[0].CHECKTIME||se[0].DATE||se[0].date));const we=K.filter(ne=>{const he=Xt(ne.CHECKTIME||ne.DATE||ne.date);return he&&vf(he,U,Y)}).sort((ne,he)=>ss(Xt(ne.CHECKTIME||ne.DATE||ne.date))-ss(Xt(he.CHECKTIME||he.DATE||he.date)));we.length>0&&(X=Xt(we[0].CHECKTIME||we[0].DATE||we[0].date));const ve=K.filter(ne=>{const he=Xt(ne.CHECKTIME||ne.DATE||ne.date);return he&&vf(he,G,V)}).sort((ne,he)=>ss(Xt(ne.CHECKTIME||ne.DATE||ne.date))-ss(Xt(he.CHECKTIME||he.DATE||he.date)));ve.length>0&&(pe=Xt(ve[0].CHECKTIME||ve[0].DATE||ve[0].date));const Q=K.filter(ne=>{const he=Xt(ne.CHECKTIME||ne.DATE||ne.date);return he&&ss(he)>V}).sort((ne,he)=>ss(Xt(he.CHECKTIME||he.DATE||he.date))-ss(Xt(ne.CHECKTIME||ne.DATE||ne.date)));Q.length>0&&(oe=Xt(Q[0].CHECKTIME||Q[0].DATE||Q[0].date))}console.log(` Properly grouped times for ${B} (${L}):`,{AM_CHECKIN:J,AM_CHECKOUT:X,PM_CHECKIN:pe,PM_CHECKOUT:oe,totalLogs:K.length});let ce=0;if(H&&R){if(J&&R.SHIFT_AMCHECKIN){const se=ss(Xt(R.SHIFT_AMCHECKIN)),we=ss(J);we>se&&(ce+=we-se)}if(pe&&R.SHIFT_PMCHECKIN){const se=ss(Xt(R.SHIFT_PMCHECKIN)),we=ss(pe);we>se&&(ce+=we-se)}}let Ae=0;if(H&&R){if(X&&R.SHIFT_AMCHECKOUT){const se=Po(R.SHIFT_AMCHECKOUT);Ae+=Math.max(0,ss(se)-ss(X))}if(oe&&R.SHIFT_PMCHECKOUT){const se=Po(R.SHIFT_PMCHECKOUT);Ae+=Math.max(0,ss(se)-ss(oe))}}let Be="";T?Be="Weekend":H&&([J,X,pe,oe].filter(we=>we&&we.trim()!=="").length===0?Be="Absent":ce>0&&(Be=`Late ${ce} min`));const Ie=[J,X,pe,oe].filter(se=>se&&se.trim()!=="").length,ye=H&&Ie>0&&!T?1:0;W.push({day:w,date:B,amIn:H?J:"",amOut:H?X:"",pmIn:H?pe:"",pmOut:H?oe:"",late:H&&ce>0?`${ce} min`:"",undertime:H&&Ae>0?`${Ae} min`:"",undertimeHours:H&&Ae>0?Math.floor(Ae/60):"",undertimeMinutes:H&&Ae>0?Ae%60:"",days:ye,remarks:Be,isWeekend:T,isInPeriod:H}),H&&Ie>0&&!T&&(_++,M+=ce,P+=Ae)}return console.log(" Final totals:",{totalDays:_,totalLate:M,totalUndertimeMinutes:P}),{processed:W,totals:{days:_,late:M},undertime:{hours:Math.floor(P/60),minutes:P%60}}},b=()=>{const E=c.current.innerHTML,R=window.open("","_blank");R.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>DTR Print</title>
          <style>
            @media print {
              @page {
                size: A4;
                margin: 8mm;
              }
              body { 
                margin: 0; 
                padding: 0; 
                font-family: Arial, sans-serif;
                font-size: 6px;
                line-height: 1.1;
              }
              .no-print { display: none !important; }
              
              /* Page Break Controls - Each employee on separate page */
              .page-break {
                page-break-before: always;
                page-break-inside: avoid;
                break-before: page;
                break-inside: avoid;
              }
              
              /* First employee should not have page break before */
              .page-break:first-child {
                page-break-before: auto;
                break-before: auto;
              }
              
              /* Ensure each employee section stays together */
              .employee-dtr-section {
                page-break-inside: avoid;
                break-inside: avoid;
                min-height: 100vh;
                display: flex;
                flex-direction: column;
              }
              
              /* Header Styles - Compact for space */
              .header { 
                text-align: center; 
                margin-bottom: 6px; 
                font-size: 10px;
              }
              .header h1 { 
                font-size: 12px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header h2 { 
                font-size: 11px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header h3 { 
                font-size: 10px; 
                font-weight: bold; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              .header p { 
                font-size: 8px; 
                margin: 0 0 1px 0;
                line-height: 1.1;
              }
              
              /* Employee Name - Blue Color */
              .employee-name {
                color: #0066cc !important;
                font-weight: bold;
                font-size: 11px;
              }
              
              /* Weekend day styling */
              .weekend-day {
                color: #0066cc !important; /* Blue color for weekends */
                font-weight: bold;
              }
              
              /* Table Styles - 40% increase in row height from default */
              table { 
                border-collapse: collapse; 
                width: 100%; 
                font-size: 10px;
                margin-bottom: 8px;
                table-layout: fixed;
                height: auto;
              }
              th, td { 
                border: 0.5px solid #000; 
                padding: 2.8px 1px; /* 40% increase from 2px */
                text-align: center; 
                vertical-align: middle;
                font-size: 11px; /* 30% increase from 6px: 6px + 5px */
                line-height: 1.0;
                height: 14px; /* 40% increase from 10px */
              }
              th { 
                font-weight: bold; 
                background-color: #d3d3d3 !important; /* Light grey header */
                font-size: 11px; /* 30% increase from 6px: 6px + 5px */
                height: 16.8px; /* 40% increase from 12px */
              }
              
              /* Column widths for better A4 utilization */
              .col-day { width: 6%; }
              .col-am-arrival { width: 13%; }
              .col-am-departure { width: 13%; }
              .col-pm-arrival { width: 13%; }
              .col-pm-departure { width: 13%; }
              .col-undertime-hours { width: 6%; }
              .col-undertime-minutes { width: 6%; }
              .col-days { width: 7%; }
              .col-late { width: 7%; }
              
              /* Footer Styles - Compact */
              .footer { 
                margin-top: 6px; 
                font-size: 8px;
                background-color: #f5f5f5 !important; /* Light grey footer */
                padding: 6px;
                border: 1px solid #ddd;
              }
              .footer p { 
                margin: 0 0 2px 0; 
                font-size: 8px;
                line-height: 1.1;
              }
              .footer p.text-right {
                text-align: right !important;
              }
              .footer .mb-2 {
                margin-bottom: 8px !important;
              }
              .signature-line { 
                margin-top: 4px; 
                text-align: right; 
              }
              .signature-line .line { 
                border-bottom: 1px solid #000; 
                display: inline-block; 
                width: 120px; 
              }
              .signature-line .label { 
                text-align: right !important; /* Right align the "In Charge" label */
                width: 100%; 
                margin-top: 1px; 
                font-size: 8px;
                padding-right: 0;
              }
              
              /* Fit to page container - No height restrictions */
              .print-container {
                height: auto;
                width: 100%;
                overflow: visible;
              }
              .table-container {
                height: auto;
                overflow: visible;
              }
              
              /* Totals row styling */
              .totals-row {
                background-color: #d3d3d3 !important; /* Light grey totals row */
                font-weight: bold;
                height: 16.8px; /* 40% increase from 12px to match header */
              }
            }
          </style>
        </head>
        <body>
          <div class="print-container">
            ${E}
          </div>
        </body>
      </html>
    `),R.document.close(),R.onload=()=>{R.print(),R.close()}};return console.log(" GenerateDTRPrint_Dept Render Debug:",{loading:h,error:x,processingData:v,departmentDataCount:Object.keys(m).length,selectedEmployeesCount:f.size,department:t,selectedMonth:s,selectedPeriod:r,selectedStatus:n,selectedAppointment:a}),console.log(h?" RENDER PATH: Loading state":x?" RENDER PATH: Error state":v?" RENDER PATH: Processing data state":" RENDER PATH: Report preview"),h?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{children:"Loading department employees..."})]})})}):x?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-gray-700 mb-4",children:x}),e.jsx("button",{onClick:i,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})]})}):v?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{children:"Processing employee data..."})]})})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["DTR Print Preview - ",t," (",f.size," employees)"]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:b,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Print"}),e.jsx("button",{onClick:i,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})]})]}),e.jsxs("div",{ref:c,children:[Object.keys(m).length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-600 mb-4",children:"No data available for the selected employees."}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Please check if:",e.jsxs("ul",{className:"list-disc list-inside mt-2",children:[e.jsx("li",{children:"Employees are selected"}),e.jsx("li",{children:"The selected month has data"}),e.jsx("li",{children:"The status filter is not too restrictive"})]})]})]}):Object.entries(m).map(([E,R])=>e.jsxs("div",{className:"mb-8 page-break employee-dtr-section",children:[e.jsxs("div",{className:"header text-center mb-4",children:[e.jsx("h1",{className:"text-lg font-bold",children:"CIVIL SERVICE FORM NO. 48"}),e.jsx("div",{className:"mt-1"}),e.jsx("h2",{className:"text-lg font-bold",children:"DAILY TIME RECORD"}),e.jsx("h3",{className:"text-lg font-bold employee-name",children:R.employee.NAME}),e.jsx("p",{className:"text-sm",children:"NAME"}),e.jsxs("p",{className:"text-lg month-year",children:["For the month of: ",e.jsx("span",{className:"bold-month",children:pS(s,r)})]}),e.jsx("p",{className:"text-sm official-hours",children:"Official hours for arrival and departure"}),e.jsx("p",{className:"text-sm regular-days",children:"Regular Days ________ Saturdays _____________"})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 mb-4",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-gray-300",children:[e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-day",children:"Day"}),e.jsx("th",{colSpan:"2",className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs",children:"AM"}),e.jsx("th",{colSpan:"2",className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs",children:"PM"}),e.jsx("th",{colSpan:"2",className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs",children:"Undertime"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-days",children:"Days"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center font-medium text-xs col-late",children:"Late"})]}),e.jsxs("tr",{className:"bg-gray-300",children:[e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-am-arrival",children:"Arrival"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-am-departure",children:"Departure"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-pm-arrival",children:"Arrival"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-pm-departure",children:"Departure"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-undertime-hours",children:"Hours"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium col-undertime-minutes",children:"Minutes"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium"}),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-medium"})]})]}),e.jsx("tbody",{children:R.processed.map((S,k)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:`border border-gray-300 px-2 py-2 text-center text-xs ${S.isWeekend?"weekend-day":""}`,children:S.day}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:S.amIn}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:S.amOut}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:S.pmIn}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:S.pmOut}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:S.undertimeHours}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:S.undertimeMinutes}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:S.days}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:S.late})]},k))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-300 font-semibold totals-row",children:[e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:"TOTAL"}),e.jsx("td",{colSpan:"4",className:"border border-gray-300 px-2 py-2 text-center text-xs"}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:R.undertime.hours}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:R.undertime.minutes}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:R.totals.days}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center text-xs",children:R.totals.late})]})})]})}),e.jsxs("div",{className:"footer mt-6 text-xs",children:[e.jsx("div",{className:"mb-2",children:"I CERTIFY on my honor that the above is a true and correct report of the hours and work performed, record of which was made daily at the time of arrival at and departure from office."}),e.jsx("div",{className:"mb-2"})," ",e.jsx("div",{className:"mb-2"})," ",e.jsx("div",{className:"signature-line",children:e.jsx("div",{className:"line",children:"_________________"})}),e.jsx("div",{className:"mb-2"})," ",e.jsx("div",{className:"mb-2"})," ",e.jsx("p",{className:"mb-2 text-right",children:"Verified as to the prescribed office hours."}),e.jsx("div",{className:"mb-2"})," ",e.jsxs("div",{className:"signature-line",children:[e.jsx("div",{className:"line",children:"_______________"}),e.jsx("div",{className:"label",children:"In Charge"})]})]})]},E)),"//"]})]})})}const vS=()=>{const[t,s]=y.useState("individual"),[r,n]=y.useState(""),[a,l]=y.useState([]),[o,i]=y.useState([]),[c,h]=y.useState(null),[p,m]=y.useState([]),[u,x]=y.useState(""),[j,v]=y.useState(""),[N,f]=y.useState("full"),[d,g]=y.useState("active"),[b,E]=y.useState("all"),[R,S]=y.useState(!1),[k,L]=y.useState(!1),[A,D]=y.useState([]),[I,O]=y.useState(new Set),[C,F]=y.useState(!1),[U,Y]=y.useState(""),[G,V]=y.useState([]),W=y.useMemo(()=>{const $=new Date,B=$.getFullYear(),w=$.getMonth()+1,T=[];for(let H=B-2;H<=B;H++){const K=H===B?w:12;for(let J=1;J<=K;J++){const pe=new Date(H,J-1,1).toLocaleString("en-US",{month:"long"}),oe=`${H}-${String(J).padStart(2,"0")}-01`;T.push({value:oe,label:`${pe} ${H}`})}}return T},[]),_=y.useMemo(()=>{if(!j)return[];const[$,B]=j.split("-").map(Number),w=new Date($,B-1,1).toLocaleString("en-US",{month:"short"}),T=new Date($,B,0).getDate();return[{value:"full",label:`Full Month (${w} 1-${T})`},{value:"first_half",label:`1st Half (${w} 1-15)`},{value:"second_half",label:`2nd Half (${w} 16-${T})`}]},[j]);y.useEffect(()=>{const $=new Date,B=$.getFullYear(),w=$.getMonth()+1,T=`${B}-${String(w).padStart(2,"0")}-01`;v(T)},[]),y.useEffect(()=>{f("full")},[j]),y.useEffect(()=>{(async()=>{try{console.log(" Fetching employees...");const B=await le.get("/employees/paginated-with-shifts",{params:{page:1,limit:1e3,search:"",status:void 0,appointment:void 0,department:void 0,shiftSchedule:void 0}});console.log(" Employees fetched:",B.data.employees.length),l(B.data.employees)}catch(B){console.error(" Error fetching employees:",B)}})()},[]),y.useEffect(()=>{if(r.trim()==="")i([]);else{const $=a.filter(B=>B.NAME.toLowerCase().includes(r.toLowerCase())||B.BADGENUMBER.toLowerCase().includes(r.toLowerCase()));i($.slice(0,10))}},[r,a]),y.useEffect(()=>{if(U.trim()==="")V(A);else{const $=A.filter(B=>B.NAME.toLowerCase().includes(U.toLowerCase())||B.BADGENUMBER.toLowerCase().includes(U.toLowerCase()));V($)}},[U,A]),y.useEffect(()=>{(async()=>{try{console.log(" Fetching departments...");const B=await le.get("/employees/departments");console.log(" Departments fetched:",B.data),m(B.data)}catch(B){console.error(" Error fetching departments:",B)}})()},[]),y.useEffect(()=>{t==="department"?u||b!=="all"?M():(D([]),O(new Set),V([]),Y("")):(D([]),O(new Set),V([]),Y(""))},[u,d,b,t]);const M=async()=>{F(!0),D([]),O(new Set),V([]),Y("");try{let $=[...a];if(console.log(" DEBUG: Starting with all employees:",$.length),console.log(" DEBUG: Sample employee data:",$[0]),u){console.log(" DEBUG: Filtering by department:",u);const w=$.length;$=$.filter(T=>{const H=T.DEPTNAME===u;return!H&&$.indexOf(T)<5&&console.log(" DEBUG: Employee does not match department:",{name:T.NAME,deptName:T.DEPTNAME,expectedDept:u,matches:H}),H}),console.log(` DEBUG: Department filter: ${w} -> ${$.length}`)}if(d!=="all"){console.log(" DEBUG: Filtering by status:",d);const w=$.length;$=$.filter(T=>{const H=T.privilege;let K=!1;H==null?K=!1:K=(typeof H=="string"?parseInt(H,10):H)>=0;let J=!1;return d==="active"?J=K:d==="inactive"&&(J=!K),!J&&$.indexOf(T)<5&&console.log(" DEBUG: Employee does not match status:",{name:T.NAME,privilege:T.privilege,isActive:K,expectedStatus:d,matches:J}),J}),console.log(` DEBUG: Status filter: ${w} -> ${$.length}`)}if(b!=="all"){console.log(" DEBUG: Filtering by appointment:",b);const w=$.length,T=parseInt(b);$=$.filter(H=>{if(H.Appointment===null||H.Appointment===void 0)return!1;const J=parseInt(H.Appointment)===T;return!J&&$.indexOf(H)<5&&console.log(" DEBUG: Employee does not match appointment:",{name:H.NAME,appointment:H.Appointment,expectedAppointment:T,matches:J}),J}),console.log(` DEBUG: Appointment filter: ${w} -> ${$.length}`)}D($),V($);const B=new Set($.map(w=>w.USERID));if(O(B),console.log(` Final result: ${$.length} employees for department: ${u}, status: ${d}, appointment: ${b}`),console.log(` Automatically selected all ${B.size} employees`),$.length>0)console.log(" DEBUG: Sample filtered employees:",$.slice(0,3));else{console.log(" DEBUG: No employees found after filtering");const w=[...new Set(a.map(J=>J.DEPTNAME))];console.log(" DEBUG: Available departments:",w.slice(0,10));const T=[...new Set(a.map(J=>J.privilege))];console.log(" DEBUG: Available privilege values:",T);const H=[...new Set(a.map(J=>J.APPOINTMENT))];console.log(" DEBUG: Available appointments:",H);const K=a[0];console.log(" DEBUG: Sample employee fields:",Object.keys(K)),console.log(" DEBUG: Sample employee appointment-related fields:",{APPOINTMENT:K.APPOINTMENT,Appointment:K.Appointment,appointment:K.appointment})}}catch($){console.error("Error fetching department employees:",$),D([]),V([])}finally{F(!1)}},P=async $=>{console.log(" Employee selected:",$.NAME),h($),n($.NAME),i([])};return e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Generate DTR Report"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"individual",checked:t==="individual",onChange:$=>s($.target.value),className:"mr-2"}),"Individual"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"department",checked:t==="department",onChange:$=>s($.target.value),className:"mr-2"}),"Multiple"]})]})]}),t==="individual"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Employee"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:r,onChange:$=>n($.target.value),placeholder:"Search by name or badge number...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:o.map($=>e.jsxs("div",{onClick:()=>P($),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200 last:border-b-0",children:[e.jsx("div",{className:"font-medium",children:$.NAME}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Badge: ",$.BADGENUMBER]})]},$.USERID))})]})]}),c&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Employee Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Name:"}),e.jsx("p",{className:"text-gray-800",children:c.NAME})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Department:"}),e.jsx("p",{className:"text-gray-800",children:c.DEPTNAME})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Badge Number:"}),e.jsx("p",{className:"text-gray-800",children:c.BADGENUMBER})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Month"}),e.jsxs("select",{value:j,onChange:$=>v($.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a month..."}),W.map($=>e.jsx("option",{value:$.value,children:$.label},$.value))]})]}),j&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Period"}),e.jsx("select",{value:N,onChange:$=>f($.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:_.map($=>e.jsx("option",{value:$.value,children:$.label},$.value))})]}),c&&j&&e.jsx("button",{onClick:()=>S(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Generate Report"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Department"}),e.jsxs("select",{value:u,onChange:$=>x($.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a department..."}),p.map($=>e.jsx("option",{value:$.DEPTNAME,children:$.DEPTNAME},$.DEPTID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment"}),e.jsxs("select",{value:b,onChange:$=>E($.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Appointments"}),pi().map($=>e.jsx("option",{value:$.id,children:$.name},$.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Status"}),e.jsxs("select",{value:d,onChange:$=>g($.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]})]})]})}),e.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Month"}),e.jsxs("select",{value:j,onChange:$=>v($.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"",children:"Select a month..."}),W.map($=>e.jsx("option",{value:$.value,children:$.label},$.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Period"}),e.jsx("select",{value:N,onChange:$=>f($.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:_.map($=>e.jsx("option",{value:$.value,children:$.label},$.value))})]})]})}),(A.length>0||C)&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Select Employees ",u?`from ${u}`:""," (",A.length," found)"]}),C&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Loading employees..."})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Employees"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:U,onChange:$=>Y($.target.value),placeholder:"Search by name or badge number...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),U&&e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Showing ",G.length," of ",A.length," employees"]})]}),e.jsxs("div",{className:"mb-4 flex space-x-2",children:[e.jsxs("button",{onClick:()=>{const $=G.map(B=>B.USERID);O(new Set($))},className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:["Select All (",G.length,")"]}),e.jsx("button",{onClick:()=>O(new Set),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Select None"}),I.size>0&&e.jsxs("span",{className:"px-3 py-1 text-sm bg-green-100 text-green-700 rounded",children:[I.size," selected"]})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg max-h-60 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 p-4",children:G.map($=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:`emp-${$.USERID}`,checked:I.has($.USERID),onChange:B=>{const w=new Set(I);B.target.checked?w.add($.USERID):w.delete($.USERID),O(w)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("label",{htmlFor:`emp-${$.USERID}`,className:"flex-1 cursor-pointer",children:[e.jsx("div",{className:"font-medium text-sm",children:$.NAME}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Badge: ",$.BADGENUMBER]})]})]},$.USERID))})})]}),I.size>0&&j&&e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("button",{onClick:()=>L(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:["Generate Report (",I.size," employees)"]})})]})]}),R&&c&&j&&e.jsx(F0,{employee:c,selectedMonth:j,selectedPeriod:N,onClose:()=>S(!1)}),k&&I.size>0&&j&&e.jsx(U0,{department:u,selectedEmployees:I,selectedMonth:j,selectedPeriod:N,selectedStatus:d,selectedAppointment:b,departmentEmployees:A,onClose:()=>L(!1)})]})})},jS=()=>{const[t,s]=y.useState([]),[r,n]=y.useState([]),[a,l]=y.useState(!1),[o,i]=y.useState(!1),[c,h]=y.useState(null),[p,m]=y.useState(""),[u,x]=y.useState(!1),[j,v]=y.useState({filterType:"all",searchValue:"",dateFrom:"",dateTo:""}),[N,f]=y.useState({currentPage:1,pageSize:25,totalRecords:0}),[d,g]=y.useState(!1),[b,E]=y.useState(null),[R,S]=y.useState(""),[k,L]=y.useState(""),[A,D]=y.useState({LOCNO:"",LOCUSERID:"",LOCDATE:"",LOCDESTINATION:"",LOCPURPOSE:"",LOCTIMEDEPARTURE:"",LOCTIMEARRIVAL:"",LOCENTRYBY:"",LOCSTATUS:"ACTIVE"}),[I,O]=y.useState({hours:Array.from({length:24},(Z,ee)=>ee.toString().padStart(2,"0")),minutes:Array.from({length:12},(Z,ee)=>(ee*5).toString().padStart(2,"0"))}),[C,F]=y.useState({hours:Array.from({length:24},(Z,ee)=>ee.toString().padStart(2,"0")),minutes:Array.from({length:12},(Z,ee)=>(ee*5).toString().padStart(2,"0"))}),[U,Y]=y.useState(""),[G,V]=y.useState(""),W=[{value:"all",label:"All Records"},{value:"employee",label:"Employee Name"},{value:"locatorNo",label:"Locator Number"},{value:"destination",label:"Destination"},{value:"purpose",label:"Purpose"},{value:"remarks",label:"Remarks"}];y.useEffect(()=>{_(),M()},[N.currentPage,N.pageSize]);const _=async(Z=j)=>{try{l(!0);const ee=new URLSearchParams;Z.filterType!=="all"&&(Z.filterType==="employee"?ee.append("employeeSearch",Z.searchValue):Z.filterType==="locatorNo"?ee.append("locatorNoSearch",Z.searchValue):Z.filterType==="destination"?ee.append("destinationSearch",Z.searchValue):Z.filterType==="purpose"?ee.append("purposeSearch",Z.searchValue):Z.filterType==="remarks"&&ee.append("remarksSearch",Z.searchValue)),Z.dateFrom&&ee.append("dateFrom",Z.dateFrom),Z.dateTo&&ee.append("dateTo",Z.dateTo),ee.append("page",N.currentPage),ee.append("pageSize",N.pageSize);const _e=ee.toString(),Qe=_e?`/locator?${_e}`:"/locator",je=await le.get(Qe);s(je.data.data||[]),je.data.pagination&&f(Ke=>({...Ke,totalRecords:je.data.pagination.totalRecords,totalPages:je.data.pagination.totalPages,currentPage:je.data.pagination.currentPage,pageSize:je.data.pagination.pageSize}))}catch(ee){console.error("Error fetching locators:",ee),V("Error fetching locator data")}finally{l(!1)}},M=async()=>{try{const Z=await le.get("/employees");n(Z.data)}catch(Z){console.error("Error fetching employees:",Z)}},P=(Z,ee)=>{v(_e=>({..._e,[Z]:ee}))},$=()=>{f(Z=>({...Z,currentPage:1})),_(j)},B=()=>{v({filterType:"all",searchValue:"",dateFrom:"",dateTo:""}),f(Z=>({...Z,currentPage:1})),_()},w=Z=>{f(ee=>({...ee,currentPage:Z}))},T=Z=>{f(ee=>({...ee,pageSize:Z,currentPage:1}))},H=Z=>{E(Z),S(""),L(""),g(!0)},K=async()=>{var Z;if(!R.trim()){L("Please enter your SSN/Password");return}try{if(l(!0),L(""),!(await le.post("/auth/verify-password",{password:R})).data.valid){L("Invalid SSN/Password. Please try again.");return}await le.delete(`/locator/${b.LOCNO}`),V("Locator entry deleted successfully"),g(!1),E(null),S(""),_()}catch(ee){console.error("Error deleting locator:",ee),((Z=ee.response)==null?void 0:Z.status)===401?L("Invalid SSN/Password. Please try again."):L("Error deleting locator entry. Please try again.")}finally{l(!1)}},J=()=>{g(!1),E(null),S(""),L("")},X=(Z,ee)=>{D(_e=>({..._e,[Z]:ee}))},pe=Z=>{if(!Z)return{hours:"",minutes:""};const ee=Z.match(/(\d{2}):(\d{2})/);return ee?{hours:ee[1],minutes:ee[2]}:{hours:"",minutes:""}},oe=(Z,ee,_e)=>{const je={...pe(A[_e]),[Z]:ee};if(je.hours&&je.minutes){const Ke=`${je.hours}:${je.minutes}`;X(_e,Ke)}else X(_e,"")},ce=pe(A.LOCTIMEDEPARTURE),Ae=pe(A.LOCTIMEARRIVAL),Be=async Z=>{if(Z.preventDefault(),console.log("=== handleSubmit DEBUG START ==="),console.log("Form data before processing:",A),!A.LOCUSERID||!A.LOCDATE){V("Please fill in all required fields");return}try{if((await le.get("/locator/check-duplicate",{params:{userId:A.LOCUSERID,locDate:A.LOCDATE}})).data.hasDuplicate){V(`Employee already has a locator entry for ${A.LOCDATE}. Please choose a different date.`),l(!1);return}}catch(_e){console.error("Error checking for duplicate entries:",_e)}l(!0);const ee={LOCNO:A.LOCNO,LOCUSERID:A.LOCUSERID,LOCDATE:A.LOCDATE,LOCDESTINATION:A.LOCDESTINATION,LOCPURPOSE:A.LOCPURPOSE,LOCTIMEDEPARTURE:A.LOCTIMEDEPARTURE,LOCTIMEARRIVAL:A.LOCTIMEARRIVAL,LOCENTRYBY:A.LOCENTRYBY||"1",LOCENTRYDATE:new Date().toISOString(),LOCSTATUS:A.LOCSTATUS};console.log("Final submit data:",ee);try{c?(console.log("Updating existing locator..."),await le.put(`/locator/${c.LOCNO}`,ee),V("Locator entry updated successfully")):(console.log("Creating new locator..."),await le.post("/locator",ee),V("Locator entry created successfully")),i(!1),h(null),se(),_()}catch(_e){console.error("Error saving locator:",_e),V("Error saving locator entry")}finally{l(!1)}},Ie=async()=>{try{const Z=new Date,ee=String(Z.getFullYear()).slice(-2),_e=String(Z.getMonth()+1).padStart(2,"0"),Qe=String(Z.getDate()).padStart(2,"0"),je=`${ee}${_e}${Qe}`,Ke=await le.get("/locator",{params:{page:1,pageSize:1e4}});let rt=1;if(Ke.data.success&&Ke.data.data){const ae=new Date().toISOString().split("T")[0];rt=Ke.data.data.filter(Se=>new Date(Se.LOCDATE).toISOString().split("T")[0]===ae).length+1}const gt=String(rt).padStart(3,"0"),mt=`${je}LE-${gt}`;return console.log("Generated Locator No:",mt),mt}catch(Z){console.error("Error generating locator number:",Z);const ee=new Date,_e=String(ee.getFullYear()).slice(-2),Qe=String(ee.getMonth()+1).padStart(2,"0"),je=String(ee.getDate()).padStart(2,"0"),Ke=String(ee.getTime()).slice(-3);return`${_e}${Qe}${je}LE-${Ke}`}},ye=async()=>{const Z=await Ie();D(ee=>({...ee,LOCNO:Z}))},se=()=>{const Z=new Date;Z.getFullYear(),String(Z.getMonth()+1).padStart(2,"0"),String(Z.getDate()).padStart(2,"0"),ye(),D(ee=>({...ee,LOCUSERID:"",LOCDATE:Z.toISOString().slice(0,10),LOCDESTINATION:"",LOCPURPOSE:"",LOCTIMEDEPARTURE:"",LOCTIMEARRIVAL:"",LOCENTRYBY:"",LOCSTATUS:"ACTIVE"})),m(""),x(!1)},we=Z=>{h(Z);const _e=(Z.LOCDATE?new Date(Z.LOCDATE):new Date).toISOString().slice(0,10);D({LOCNO:Z.LOCNO,LOCUSERID:Z.LOCUSERID||"",LOCDATE:_e,LOCDESTINATION:Z.LOCDESTINATION||"",LOCPURPOSE:Z.LOCPURPOSE||"",LOCTIMEDEPARTURE:Z.LOCTIMEDEPARTURE||"",LOCTIMEARRIVAL:Z.LOCTIMEARRIVAL||"",LOCENTRYBY:Z.LOCENTRYBY||"1",LOCSTATUS:Z.LOCSTATUS||"ACTIVE"});const Qe=r.find(je=>je.USERID===Z.LOCUSERID);m(Qe?Qe.NAME:""),x(!1),i(!0)},ve=Z=>{const ee=r.find(_e=>_e.USERID===Z);return ee?ee.NAME:"Unknown Employee"},Q=r.filter(Z=>Z.NAME.toLowerCase().includes(p.toLowerCase())||Z.BADGENUMBER.toLowerCase().includes(p.toLowerCase())),ne=Z=>{m(Z.NAME),X("LOCUSERID",Z.USERID),x(!1)},he=Z=>{if(!Z)return"";const ee=Z.match(/[ T](\d{2}:\d{2})/);if(ee)return ee[1];const _e=Z.match(/T(\d{2}:\d{2})/);return _e?_e[1]:Z},Me=Z=>{if(!Z)return"";const ee=Z.match(/^(\d{4}-\d{2}-\d{2})[ T](\d{2}:\d{2})/);if(ee)return`${ee[1]} ${ee[2]}`;const _e=Z.match(/^(\d{4}-\d{2}-\d{2})T(\d{2}:\d{2})/);return _e?`${_e[1]} ${_e[2]}`:Z},be=Z=>{if(!Z)return"";const ee=Z.match(/^(\d{4}-\d{2}-\d{2})/);if(ee)return ee[1];const _e=Z.match(/^(\d{4}-\d{2}-\d{2})/);return _e?_e[1]:Z},De=Math.ceil(N.totalRecords/N.pageSize),ze=(N.currentPage-1)*N.pageSize+1,Ee=Math.min(N.currentPage*N.pageSize,N.totalRecords);return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Employee Locator"}),e.jsx("button",{onClick:()=>{se(),i(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add New Locator Entry"})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Search Filters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter By"}),e.jsx("select",{value:j.filterType,onChange:Z=>P("filterType",Z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:W.map(Z=>e.jsx("option",{value:Z.value,children:Z.label},Z.value))})]}),j.filterType!=="all"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Value"}),e.jsx("input",{type:"text",value:j.searchValue,onChange:Z=>P("searchValue",Z.target.value),placeholder:`Search by ${j.filterType}...`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date From"}),e.jsx("input",{type:"date",value:j.dateFrom,onChange:Z=>P("dateFrom",Z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date To"}),e.jsx("input",{type:"date",value:j.dateTo,onChange:Z=>P("dateTo",Z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:$,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Search"}),e.jsx("button",{onClick:B,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Clear Filters"})]})]}),G&&e.jsx("div",{className:`mb-4 p-3 rounded-md ${G.includes("Error")||G.includes("already has")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:G}),o&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:c?"Edit Locator Entry":"Add New Locator Entry"}),e.jsxs("form",{onSubmit:Be,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Locator Number"}),e.jsx("input",{type:"text",value:A.LOCNO,onChange:Z=>X("LOCNO",Z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",readOnly:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated: YYMMDDLE-XXX format"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Locator Date *"}),e.jsx("input",{type:"date",value:A.LOCDATE,onChange:Z=>X("LOCDATE",Z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:p,onChange:Z=>{m(Z.target.value),x(!0)},onFocus:()=>x(!0),placeholder:"Search employee...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),u&&p&&Q.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:Q.map(Z=>e.jsxs("div",{onClick:()=>ne(Z),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200 last:border-b-0",children:[e.jsx("div",{className:"font-medium",children:Z.NAME}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Badge: ",Z.BADGENUMBER]})]},Z.USERID))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination"}),e.jsx("textarea",{value:A.LOCDESTINATION,onChange:Z=>X("LOCDESTINATION",Z.target.value),placeholder:"Enter destination",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,maxLength:50}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[A.LOCDESTINATION.length,"/50 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purpose"}),e.jsx("textarea",{value:A.LOCPURPOSE,onChange:Z=>X("LOCPURPOSE",Z.target.value),placeholder:"Enter purpose",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,maxLength:100}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[A.LOCPURPOSE.length,"/100 characters"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Departure"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"at"}),e.jsxs("select",{value:ce.hours,onChange:Z=>oe("hours",Z.target.value,"LOCTIMEDEPARTURE"),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"HH"}),I.hours.map(Z=>e.jsx("option",{value:Z,children:Z},Z))]}),e.jsx("span",{className:"text-gray-500",children:":"}),e.jsxs("select",{value:ce.minutes,onChange:Z=>oe("minutes",Z.target.value,"LOCTIMEDEPARTURE"),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"MM"}),I.minutes.map(Z=>e.jsx("option",{value:Z,children:Z},Z))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Arrival"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"at"}),e.jsxs("select",{value:Ae.hours,onChange:Z=>oe("hours",Z.target.value,"LOCTIMEARRIVAL"),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"HH"}),C.hours.map(Z=>e.jsx("option",{value:Z,children:Z},Z))]}),e.jsx("span",{className:"text-gray-500",children:":"}),e.jsxs("select",{value:Ae.minutes,onChange:Z=>oe("minutes",Z.target.value,"LOCTIMEARRIVAL"),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"MM"}),C.minutes.map(Z=>e.jsx("option",{value:Z,children:Z},Z))]})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Saving...":c?"Update":"Save"}),e.jsx("button",{type:"button",onClick:()=>{i(!1),h(null),se()},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Cancel"})]})]})]})})}),e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",ze," to ",Ee," of ",N.totalRecords," records"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Show:"}),e.jsxs("select",{value:N.pageSize,onChange:Z=>T(parseInt(Z.target.value)),className:"px-2 py-1 border border-gray-300 rounded-md text-sm",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"})]}),e.jsx("span",{className:"text-sm text-gray-600",children:"records per page"})]})]}),a?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-600",children:"Loading..."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b",children:"Locator Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b",children:"Locator No"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b",children:"Employee"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b",children:"Destination"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b",children:"Time Departed"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b",children:"Time Arrived"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b",children:"Purpose"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(Z=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 border-b",children:be(Z.LOCDATE)}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 border-b",children:Z.LOCNO}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 border-b",children:ve(Z.LOCUSERID)}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 border-b",children:Z.LOCDESTINATION||"-"}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 border-b",children:he(Z.LOCTIMEDEPARTURE)||"-"}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 border-b",children:he(Z.LOCTIMEARRIVAL)||"-"}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 border-b",children:Z.LOCPURPOSE||"-"}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 border-b",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>we(Z),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),e.jsx("button",{onClick:()=>H(Z),className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},Z.LOCNO))})]})}),De>1&&e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",N.currentPage," of ",De]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>w(N.currentPage-1),disabled:N.currentPage===1,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),Array.from({length:Math.min(5,De)},(Z,ee)=>{const _e=ee+1;return e.jsx("button",{onClick:()=>w(_e),className:`px-3 py-1 border rounded-md text-sm ${_e===N.currentPage?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"}`,children:_e},_e)}),e.jsx("button",{onClick:()=>w(N.currentPage+1),disabled:N.currentPage===De,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirm Delete"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-gray-700 mb-2",children:"Are you sure you want to delete this locator entry?"}),b&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded-md text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Locator No:"})," ",b.LOCNO]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Employee:"})," ",ve(b.LOCUSERID)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",Me(b.LOCDATE)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",b.LOCTYPE]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Enter your SSN/Password to confirm *"}),e.jsx("input",{type:"password",value:R,onChange:Z=>S(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your SSN/Password",autoFocus:!0}),k&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:k})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:J,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",disabled:a,children:"Cancel"}),e.jsx("button",{onClick:K,disabled:a||!R.trim(),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Deleting...":"Delete"})]})]})})]})},NS=()=>{const[t,s]=y.useState([]),[r,n]=y.useState([]),[a,l]=y.useState([]),[o,i]=y.useState([]),[c,h]=y.useState([]),[p,m]=y.useState([]),[u,x]=y.useState(!1),[j,v]=y.useState(!1),[N,f]=y.useState(null),[d,g]=y.useState(""),[b,E]=y.useState(!1),[R,S]=y.useState([]),[k,L]=y.useState(!1),[A,D]=y.useState([]),[I,O]=y.useState(null),[C,F]=y.useState([]),[U,Y]=y.useState(!1),[G,V]=y.useState({filterType:"all",searchValue:"",dateFrom:"",dateTo:"",leaveType:"all"}),[W,_]=y.useState({currentPage:1,totalPages:1,totalRecords:0,pageSize:10}),M={PENDING:{value:"PENDING",label:"Pending",description:"This record is not yet in effect",color:"bg-yellow-100 text-yellow-800"},APPROVED:{value:"APPROVED",label:"Approved",description:"Leave has been approved",color:"bg-green-100 text-green-800"},DISAPPROVED:{value:"DISAPPROVED",label:"Disapproved",description:"Leave has been disapproved",color:"bg-red-100 text-red-800"},CANCELLED:{value:"CANCELLED",label:"Cancelled",description:"Leave has been cancelled",color:"bg-gray-100 text-gray-800"}},[P,$]=y.useState({USERID:"",LEAVEID:"",LEAVEREMARKS:"",LEAVEREFNO:"",leaveDetails:[],selectedLeaveDetail:"",leaveDetailSpecify:"",specifyText:""}),[B,w]=y.useState({LEAVEDETAIL:"",LEAVESPECIFY:""}),[T,H]=y.useState(new Date),K=[{value:"all",label:"All Fields"},{value:"employee",label:"Employee"},{value:"leaveType",label:"Leave Type"},{value:"remarks",label:"Remarks"}],J=q=>new Date(q.getFullYear(),q.getMonth()+1,0).getDate(),X=q=>new Date(q.getFullYear(),q.getMonth(),1).getDay(),pe=q=>{const me=q.getFullYear(),Te=String(q.getMonth()+1).padStart(2,"0"),Ue=String(q.getDate()).padStart(2,"0");return`${me}-${Te}-${Ue}`},oe=q=>A.some(me=>pe(me)===pe(q)),ce=(q,me)=>{try{if(!q||!me)return!1;const Te=new Date(q),Ue=new Date(me);return isNaN(Te.getTime())||isNaN(Ue.getTime())?!1:Te.getFullYear()===Ue.getFullYear()&&Te.getMonth()===Ue.getMonth()&&Te.getDate()===Ue.getDate()}catch(Te){return console.error("Error comparing dates:",Te,{date1:q,date2:me}),!1}},Ae=q=>P.USERID?!!r.find(Te=>{const Ue=parseInt(Te.USERID),Re=parseInt(P.USERID);let $e=!1;Te.leaveDates&&Te.leaveDates.length>0?$e=Te.leaveDates.some(at=>ce(at.LEAVEDATE,q)):$e=ce(Te.LEAVEDATE,q);const Ve=N&&Te.LEAVEUID===N.LEAVEUID;return Ue===Re&&$e&&!Ve}):!1,[Be,Ie]=y.useState(!1),[ye,se]=y.useState(!1),we=()=>{Ie(!0),$(q=>({USERID:q.USERID,LEAVEID:q.LEAVEID,LEAVEREMARKS:"",leaveDetails:q.leaveDetails,selectedLeaveDetail:q.selectedLeaveDetail,leaveDetailSpecify:q.leaveDetailSpecify,specifyText:q.specifyText})),f(null),E(!1)};y.useEffect(()=>{if(A.length>0){if(Be){Ie(!1);return}$(q=>({...q}))}},[A,Be]);const ve=q=>{O(q),D([q]),we(),N||de(),v(!0),L(!1)},Q=q=>{if(Ae(q)){console.log("Date already has leave record, preventing selection");return}we(),oe(q)?D(me=>me.filter(Te=>pe(Te)!==pe(q))):D(me=>[...me,q])},ne=q=>{const me=J(q),Te=X(q),Ue=[];for(let Re=0;Re<Te;Re++)Ue.push(null);for(let Re=1;Re<=me;Re++){const $e=new Date(q.getFullYear(),q.getMonth(),Re);Ue.push($e)}return Ue},he=async()=>{try{const q=await le.get("/leave/records",{params:{page:1,limit:1e4}});q.data.success?n(q.data.data||[]):n([])}catch(q){console.error("Error fetching all leave records for calendar:",q),n([])}};y.useEffect(()=>{Me(),be(),De(),ze(),he()},[]),y.useEffect(()=>{(async()=>{try{Y(!0),console.log(" [TRAVEL DEBUG] Loading travel orders...");const me=await le.get("/travel-orders");console.log(" [TRAVEL DEBUG] Travel orders response:",me),me.data.success?(console.log(" [TRAVEL DEBUG] Travel orders loaded successfully"),F(me.data.data||[])):(console.log(" [TRAVEL DEBUG] Travel orders response not successful:",me.data),F([]))}catch(me){console.error(" [TRAVEL DEBUG] Error loading travel orders:",me),F([])}finally{Y(!1)}})()},[]),y.useEffect(()=>{if(d.trim()===""){S([]),E(!1);return}const q=o.filter(me=>{const Te=me.privilege>=0,Ue=me.NAME.toLowerCase().includes(d.toLowerCase())||me.BADGENUMBER.toLowerCase().includes(d.toLowerCase());return Te&&Ue});S(q),E(q.length>0)},[d,o]);const Me=async(q=G)=>{x(!0);try{const me=new URLSearchParams;me.append("page",W.currentPage),me.append("limit",W.pageSize),q.filterType!=="all"&&q.searchValue&&(me.append("filterType",q.filterType),me.append("searchValue",q.searchValue)),q.dateFrom&&me.append("dateFrom",q.dateFrom),q.dateTo&&me.append("dateTo",q.dateTo),q.leaveType!=="all"&&me.append("leaveType",q.leaveType);const Te=await le.get("/leave/records",{params:me});Te.data.success?(s(Te.data.data||[]),_(Ue=>({...Ue,totalPages:Te.data.totalPages||1,totalRecords:Te.data.totalRecords||0}))):s([])}catch(me){console.error("Error loading leave records:",me),s([])}finally{x(!1)}},be=async()=>{try{console.log("Loading leave classes...");const q=await le.get("/leave/classes");console.log("Leave classes response:",q.data),q.data.success?(console.log("Leave classes data:",q.data.data),l(q.data.data||[])):(console.log("Leave classes API returned success: false"),l([]))}catch(q){console.error("Error loading leave classes:",q),l([])}},De=async()=>{try{const q=await le.get("/employees");q.data&&Array.isArray(q.data)?i(q.data||[]):i([])}catch(q){console.error("Error loading employees:",q),i([])}},ze=async()=>{try{console.log(" [LEAVE DETAILS DEBUG] Loading leave details...");const q=await le.get("/leave/details");console.log(" [LEAVE DETAILS DEBUG] Leave details response:",q),q.data.success?(console.log(" [LEAVE DETAILS DEBUG] Leave details loaded successfully:",q.data.data),h(q.data.data||[])):(console.log(" [LEAVE DETAILS DEBUG] Leave details response not successful:",q.data),h([]))}catch(q){console.error(" [LEAVE DETAILS DEBUG] Error loading leave details:",q),h([])}},Ee=()=>{_(q=>({...q,currentPage:1})),Me()},Z=()=>{V({filterType:"all",searchValue:"",dateFrom:"",dateTo:"",leaveType:"all"}),_(q=>({...q,currentPage:1})),Me()},ee=q=>{_(me=>({...me,currentPage:q})),Me()},_e=q=>{if(f(q),$({USERID:q.USERID,LEAVEID:q.LEAVEID,LEAVEREMARKS:q.LEAVEREMARKS||"",LEAVEREFNO:q.LEAVEREFNO||"",leaveDetails:q.leaveDetails||[],selectedLeaveDetail:q.LEAVEDETAILID||"",leaveDetailSpecify:"",specifyText:q.LEAVEREMARKS||""}),q.LEAVEDATE){const me=q.LEAVEDATE.split("T")[0],[Te,Ue,Re]=me.split("-");D([new Date(Te,Ue-1,Re)])}v(!0)},Qe=async q=>{var Ue,Re;if(q.preventDefault(),console.log("Form submission started"),console.log("Form data:",P),console.log("Selected dates:",A),!P.USERID||!P.LEAVEID||A.length===0){console.log("Validation failed: Missing required fields"),alert("Please fill in all required fields and select at least one date");return}const me=[];if(A.forEach($e=>{r.find(at=>{const Je=parseInt(at.USERID),ge=parseInt(P.USERID);let He=!1;at.leaveDates&&at.leaveDates.length>0?He=at.leaveDates.some(ct=>ce(ct.LEAVEDATE,$e)):He=ce(at.LEAVEDATE,$e);const Ye=N&&at.LEAVEUID===N.LEAVEUID;return Je===ge&&He&&!Ye})&&me.push(pe($e))}),me.length>0){alert(`Leave records already exist for the following dates: ${me.join(", ")}`);return}let Te=null;if(P.selectedLeaveDetail&&p.length>0&&(Te=p.find($e=>$e.LEAVEDETAILID===parseInt(P.selectedLeaveDetail))),Te&&Te.LEAVESPECIFY===1&&!P.specifyText.trim()){alert("Please specify the leave details as required");return}try{x(!0);const $e=A.length,Ve=A.map(ge=>{const He=ge.getFullYear(),Ye=String(ge.getMonth()+1).padStart(2,"0"),ct=String(ge.getDate()).padStart(2,"0");return`${He}-${Ye}-${ct}`}),at={USERID:parseInt(P.USERID),LEAVEID:parseInt(P.LEAVEID),LEAVESPECIFY:P.specifyText||null,LEAVEREMARKS:P.LEAVEREMARKS||null,LEAVEDAYS:$e,LEAVESTATUS:"PENDING",selectedDates:Ve};console.log("Leave record data to submit:",at),console.log("Original dates:",A),console.log("Converted dates:",Ve);let Je;N?Je=await le.put(`/leave/records/${N.LEAVEUID}`,{leaveRecords:[at],isEdit:!0}):Je=await le.post("/leave/records",{leaveRecords:[at]}),Je.data.success?(console.log("Leave record saved successfully"),alert(Je.data.message),te(),await Me(),await he()):(console.error("Failed to save leave record:",Je.data.message),alert(`Failed to save leave record: ${Je.data.message}`))}catch($e){console.error("Error saving leave record:",$e),alert(`Error saving leave record: ${((Re=(Ue=$e.response)==null?void 0:Ue.data)==null?void 0:Re.message)||$e.message}`)}finally{x(!1)}},je=async q=>{if(window.confirm("Are you sure you want to delete this leave record?"))try{x(!0),await le.delete(`/leave/records/${q}`),Me(),he()}catch(me){console.error("Error deleting leave record:",me)}finally{x(!1)}},Ke=q=>{$(me=>({...me,USERID:q.USERID})),g(q.NAME),E(!1)},rt=q=>{if(!q)return"";if(typeof q=="string"){if(q.includes("T"))return q.split("T")[0];const me=new Date(q);if(!isNaN(me.getTime()))return me.toISOString().split("T")[0]}return q instanceof Date?q.toISOString().split("T")[0]:""},gt=(q,me)=>!C||C.length===0?!1:C.some(Te=>{const Ue=rt(Te.TRAVELDATE),Re=Te.TRAVELSTATUS==="APPROVED",$e=Ue===q,Ve=String(Te.USERID)===String(me);return $e&&Ve&&Re}),mt=(q,me)=>!r||r.length===0?!1:r.some(Te=>{const Ue=rt(Te.LEAVEDATE),Re=Te.LEAVESTATUS==="APPROVED",$e=Ue===q,Ve=String(Te.USERID)===String(me);return $e&&Ve&&Re}),it=q=>{if(!P.USERID)return!1;const me=pe(q),Te=P.USERID,Ue=C.some($e=>{const Ve=rt($e.TRAVELDATE),at=$e.STATUS&&$e.STATUS.toString().toUpperCase().trim()==="APPROVED",Je=Ve===me,ge=String($e.USERID)===String(Te);return Je&&ge&&at}),Re=r.some($e=>{const Ve=rt($e.LEAVEDATE),at=$e.LEAVESTATUS&&$e.LEAVESTATUS.toString().toUpperCase().trim()==="APPROVED",Je=Ve===me,ge=String($e.USERID)===String(Te);return Je&&ge&&at});return Ue||Re},ae=()=>{const q=ne(T),me=["January","February","March","April","May","June","July","August","September","October","November","December"],Te=()=>{H(Ve=>new Date(Ve.getFullYear(),Ve.getMonth()-1,1))},Ue=()=>{H(Ve=>new Date(Ve.getFullYear(),Ve.getMonth()+1,1))},Re=Ve=>P.USERID?r.find(Je=>{const ge=parseInt(Je.USERID),He=parseInt(P.USERID),Ye=ce(Je.LEAVEDATE,Ve);return ge===He&&Ye}):null,$e=Ve=>!r||r.length===0?[]:r.filter(at=>{const Je=rt(at.LEAVEDATE),ge=pe(Ve);return Je===ge});return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-300 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:Te,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:[me[T.getMonth()]," ",T.getFullYear()]}),e.jsx("button",{onClick:Ue,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(Ve=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:Ve},Ve)),q.map((Ve,at)=>{if(!Ve)return e.jsx("div",{className:"p-2"},at);const Je=oe(Ve),ge=pe(Ve)===pe(new Date),He=Ae(Ve),Ye=it(Ve),ct=Re(Ve),yt=$e(Ve),lt=yt.length>0;return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>ve(Ve),disabled:He||Ye,onMouseEnter:jt=>{if(lt){const kt=document.getElementById(`form-tooltip-${at}`);if(kt){const Rt=jt.target.getBoundingClientRect(),yr=kt.getBoundingClientRect();kt.style.position="fixed",kt.style.left=`${Rt.left+Rt.width/2-yr.width/2}px`,kt.style.top=`${Rt.top-yr.height-10}px`,kt.style.display="block",kt.style.zIndex="9999"}}},onMouseLeave:()=>{const jt=document.getElementById(`form-tooltip-${at}`);jt&&(jt.style.display="none")},className:`
                    p-2 text-sm rounded-full transition-colors relative min-h-[50px] flex flex-col items-center justify-center w-full
                  ${Je?"bg-blue-600 text-white":ge?"bg-blue-100 text-blue-600 font-semibold":Ye?"bg-red-100 text-red-600 cursor-not-allowed":He?"bg-gray-200 text-gray-600 cursor-not-allowed":"hover:bg-blue-50 text-gray-700 cursor-pointer"}`,title:Ye?"Has approved travel/leave records - cannot select":He?"Has existing leave record":"Click to select date",children:[e.jsx("div",{className:"text-sm",children:Ve.getDate()}),ct&&e.jsx("div",{className:"text-xs text-blue-600",children:ct.LeaveName||"Leave"}),Ye&&e.jsx("div",{className:"text-xs",children:gt(pe(Ve),P.USERID)?"":mt(pe(Ve),P.USERID)?"":""})]}),lt&&e.jsxs("div",{id:`form-tooltip-${at}`,className:"absolute bg-gray-800 text-white text-xs rounded-lg py-2 px-3 shadow-lg z-50",style:{display:"none",minWidth:"280px"},children:[e.jsxs("div",{className:"font-semibold mb-2 text-white text-center",children:["Leave Records (",yt.length,")"]}),e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-600",children:[e.jsx("th",{className:"text-left py-1 px-2 font-semibold text-gray-300",children:"Employee"}),e.jsx("th",{className:"text-left py-1 px-2 font-semibold text-gray-300",children:"Leave Type"}),e.jsx("th",{className:"text-left py-1 px-2 font-semibold text-gray-300",children:"Status"})]})}),e.jsx("tbody",{children:yt.map((jt,kt)=>{const Rt=M[jt.LEAVESTATUS]||M.PENDING;return e.jsxs("tr",{className:"border-b border-gray-700 last:border-b-0",children:[e.jsx("td",{className:"py-1 px-2 text-white font-medium",children:jt.EmployeeName||"Unknown Employee"}),e.jsx("td",{className:"py-1 px-2 text-gray-300",children:jt.LeaveName||"Unknown Leave Type"}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("span",{className:`px-1 py-0.5 rounded text-xs ${Rt.color}`,children:Rt.label})})]},kt)})})]})}),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-2 h-2 bg-gray-800 rotate-45"})]})]},at)})]})]})},Ce=()=>{const q=ne(T),me=["January","February","March","April","May","June","July","August","September","October","November","December"],Te=()=>{H(Ve=>new Date(Ve.getFullYear(),Ve.getMonth()-1,1))},Ue=()=>{H(Ve=>new Date(Ve.getFullYear(),Ve.getMonth()+1,1))},Re=Ve=>P.USERID?r.find(Je=>{const ge=parseInt(Je.USERID),He=parseInt(P.USERID),Ye=ce(Je.LEAVEDATE,Ve);return ge===He&&Ye}):null,$e=Ve=>!r||r.length===0?[]:r.filter(at=>ce(at.LEAVEDATE,Ve));return e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg shadow-lg p-4 w-80",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:Te,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[me[T.getMonth()]," ",T.getFullYear()]}),e.jsx("button",{onClick:Ue,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsx("button",{onClick:()=>L(!1),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["S","M","T","W","T","F","S"].map(Ve=>e.jsx("div",{className:"p-1 text-center text-xs font-medium text-gray-500",children:Ve},Ve)),q.map((Ve,at)=>{if(!Ve)return e.jsx("div",{className:"p-1"},at);const Je=oe(Ve),ge=pe(Ve)===pe(new Date),He=Ae(Ve),Ye=it(Ve),ct=Re(Ve),yt=$e(Ve),lt=yt.length>0;return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Q(Ve),disabled:He||Ye,onMouseEnter:jt=>{if(lt){const kt=document.getElementById(`form-tooltip-${at}`);if(kt){const Rt=jt.target.getBoundingClientRect(),yr=kt.getBoundingClientRect();kt.style.position="fixed",kt.style.left=`${Rt.left+Rt.width/2-yr.width/2}px`,kt.style.top=`${Rt.top-yr.height-10}px`,kt.style.display="block",kt.style.zIndex="9999"}}},onMouseLeave:()=>{const jt=document.getElementById(`form-tooltip-${at}`);jt&&(jt.style.display="none")},className:`
                    p-1 text-xs rounded transition-colors relative min-h-[30px] flex flex-col items-center justify-center w-full
                  ${Je?"bg-blue-600 text-white":ge?"bg-blue-100 text-blue-600 font-semibold":Ye?"bg-red-100 text-red-600 cursor-not-allowed":He?"bg-gray-200 text-gray-600 cursor-not-allowed":"hover:bg-blue-50 text-gray-700 cursor-pointer"}`,title:Ye?"Has approved travel/leave records - cannot select":He?"Has existing leave record":"Click to select date",children:[e.jsx("div",{className:"text-xs",children:Ve.getDate()}),ct&&e.jsx("div",{className:"text-xs text-blue-600",children:ct.LeaveName||"Leave"}),Ye&&e.jsx("div",{className:"text-xs",children:gt(pe(Ve),P.USERID)?"":mt(pe(Ve),P.USERID)?"":""})]}),lt&&e.jsxs("div",{id:`form-tooltip-${at}`,className:"absolute z-50 bg-gray-800 text-white text-xs rounded py-2 px-3 shadow-lg pointer-events-none",style:{display:"none"},children:[e.jsx("div",{className:"font-semibold mb-1",children:"Leave Records:"}),yt.map((jt,kt)=>e.jsxs("div",{className:"mb-1",children:[e.jsx("div",{className:"font-medium",children:jt.EmployeeName||"Unknown Employee"}),e.jsx("div",{className:"text-gray-300",children:jt.LeaveName||"Unknown Leave"}),e.jsx("div",{className:"text-gray-400",children:jt.LEAVESTATUS||"Unknown Status"})]},kt)),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800"})]})]},at)})]})]})},Se=q=>{const me=M.APPROVED;window.confirm(`Are you sure you want to approve this leave?

Description: ${me.description}`)&&(async()=>{var Ue,Re;try{const $e=await le.put(`/leave/records/${q}/approve`);$e.data.success?(alert("Leave approved successfully"),await Me()):alert(`Failed to approve leave: ${$e.data.message}`)}catch($e){console.error("Error approving leave:",$e),alert(`Error approving leave: ${((Re=(Ue=$e.response)==null?void 0:Ue.data)==null?void 0:Re.message)||$e.message}`)}})()},qe=q=>{const me=window.prompt("Please provide a reason for disapproval (optional):"),Te=async()=>{var Re,$e;try{const Ve=await le.put(`/leave/records/${q}/reject`,{reason:me||null});Ve.data.success?(alert("Leave disapproved successfully"),await Me()):alert(`Failed to disapprove leave: ${Ve.data.message}`)}catch(Ve){console.error("Error disapproving leave:",Ve),alert(`Error disapproving leave: ${(($e=(Re=Ve.response)==null?void 0:Re.data)==null?void 0:$e.message)||Ve.message}`)}},Ue=M.DISAPPROVED;window.confirm(`Are you sure you want to disapprove this leave?

Description: ${Ue.description}`)&&Te()},Ze=q=>{const me=q.getFullYear(),Ue=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][q.getMonth()],Re=String(q.getDate()).padStart(2,"0"),$e=q.toLocaleDateString("en-US",{weekday:"long"});return`${me}-${Ue}-${Re} (${$e})`},ke=()=>{if(console.log(" [CONFLICT DEBUG] Starting conflict check..."),console.log(" [CONFLICT DEBUG] formData.USERID:",P.USERID),console.log(" [CONFLICT DEBUG] selectedDates:",A),console.log(" [CONFLICT DEBUG] travelOrders:",C),console.log(" [CONFLICT DEBUG] allLeaveRecords:",r),!P.USERID||A.length===0){console.log(" [CONFLICT DEBUG] No employee or dates selected, skipping check"),se(!1);return}const q=P.USERID,me=[],Te=[];if(A.forEach(Ue=>{const Re=pe(Ue);console.log(" [CONFLICT DEBUG] Checking date:",Re);const $e=C.filter(ge=>{const Ye=rt(ge.TRAVELDATE)===Re,ct=String(ge.USERID)===String(q);return Ye&&ct}),Ve=C.filter(ge=>{const He=rt(ge.TRAVELDATE),Ye=ge.STATUS&&ge.STATUS.toString().toUpperCase().trim()==="APPROVED",ct=He===Re,yt=String(ge.USERID)===String(q);return ct&&yt&&Ye}),at=r.filter(ge=>{const He=String(ge.USERID)===String(q);let Ye=!1;return ge.leaveDates&&ge.leaveDates.length>0?Ye=ge.leaveDates.some(ct=>rt(ct.LEAVEDATE)===Re):Ye=rt(ge.LEAVEDATE)===Re,Ye&&He}),Je=r.filter(ge=>{const He=ge.LEAVESTATUS&&ge.LEAVESTATUS.toString().toUpperCase().trim()==="APPROVED",Ye=String(ge.USERID)===String(q);let ct=!1;return ge.leaveDates&&ge.leaveDates.length>0?ct=ge.leaveDates.some(yt=>rt(yt.LEAVEDATE)===Re):ct=rt(ge.LEAVEDATE)===Re,ct&&Ye&&He});console.log(" [CONFLICT DEBUG] All travel conflicts found:",$e.length),console.log(" [CONFLICT DEBUG] Approved travel conflicts found:",Ve.length),console.log(" [CONFLICT DEBUG] All leave conflicts found:",at.length),console.log(" [CONFLICT DEBUG] Approved leave conflicts found:",Je.length),($e.length>0||at.length>0)&&me.push({date:Re,travelConflicts:$e,leaveConflicts:at}),(Ve.length>0||Je.length>0)&&Te.push({date:Re,travelConflicts:Ve,leaveConflicts:Je})}),console.log(" [CONFLICT DEBUG] Total all conflicts found:",me.length),console.log(" [CONFLICT DEBUG] Total approved conflicts found:",Te.length),se(Te.length>0),me.length>0){let Ue=`Employee has existing records on selected dates:

`;me.forEach(Re=>{Ue+=`Date: ${Re.date}
`,Re.travelConflicts.length>0&&(Ue+=`  Travel Orders (${Re.travelConflicts.length}):
`,Re.travelConflicts.forEach($e=>{Ue+=`    - ${$e.TRAVELADDRESS||"N/A"} (${$e.STATUS||"N/A"})
`})),Re.leaveConflicts.length>0&&(Ue+=`  Leave Records (${Re.leaveConflicts.length}):
`,Re.leaveConflicts.forEach($e=>{Ue+=`    - ${$e.LeaveName||"N/A"} (${$e.LEAVESTATUS||"N/A"})
`})),Ue+=`
`}),Te.length>0?Ue+=" Unable to proceed with the entry of new Leave due to approved records. Please select different dates or employee.":Ue+=" Please be aware of these existing records.",console.log(" [CONFLICT DEBUG] Showing alert:",Ue),alert(Ue),Te.length>0&&(console.log(" [CONFLICT DEBUG] Closing form due to approved conflicts"),v(!1),L(!1))}else console.log(" [CONFLICT DEBUG] No conflicts found")};y.useEffect(()=>{P.USERID&&A.length>0&&!Be&&ke()},[P.USERID,A]),y.useEffect(()=>{if(console.log(" [LEAVE DETAILS DEBUG] Filtering leave details..."),console.log(" [LEAVE DETAILS DEBUG] formData.LEAVEID:",P.LEAVEID,"type:",typeof P.LEAVEID),console.log(" [LEAVE DETAILS DEBUG] leaveDetails:",c),console.log(" [LEAVE DETAILS DEBUG] leaveDetails.length:",c.length),P.LEAVEID&&c.length>0){const q=c.filter(me=>(console.log(` [LEAVE DETAILS DEBUG] Comparing detail.LEAVEID (${me.LEAVEID}, type: ${typeof me.LEAVEID}) with parseInt(formData.LEAVEID) (${parseInt(P.LEAVEID)}, type: ${typeof parseInt(P.LEAVEID)})`),me.LEAVEID===parseInt(P.LEAVEID)));console.log(` [LEAVE DETAILS DEBUG] Filtered leave details for LEAVEID ${P.LEAVEID}:`,q),m(q)}else console.log(" [LEAVE DETAILS DEBUG] No leave type selected or no leave details available"),console.log(" [LEAVE DETAILS DEBUG] formData.LEAVEID:",P.LEAVEID),console.log(" [LEAVE DETAILS DEBUG] leaveDetails.length:",c.length),m([])},[P.LEAVEID,c]);const te=()=>{$({USERID:"",LEAVEID:"",LEAVEREMARKS:"",LEAVEREFNO:"",leaveDetails:[],selectedLeaveDetail:"",leaveDetailSpecify:"",specifyText:""}),m([]),f(null),D([]),g(""),E(!1),v(!1),L(!1),se(!1),Ie(!1)},Ne=async()=>{try{const q=new Date,me=String(q.getFullYear()).slice(-2),Te=String(q.getMonth()+1).padStart(2,"0"),Ue=String(q.getDate()).padStart(2,"0"),Re=`${me}${Te}${Ue}`,$e=await le.get("/leave/records",{params:{page:1,limit:1e4}});let Ve=1;if($e.data.success&&$e.data.data){const He=new Date().toISOString().split("T")[0];Ve=$e.data.data.filter(ct=>new Date(ct.LEAVEENTRYDATE).toISOString().split("T")[0]===He).length+1}const at=String(Ve).padStart(3,"0"),Je=`${Re}LV-${at}`;return console.log("Generated Leave Ref No:",Je),Je}catch(q){console.error("Error generating leave reference number:",q);const me=new Date,Te=String(me.getFullYear()).slice(-2),Ue=String(me.getMonth()+1).padStart(2,"0"),Re=String(me.getDate()).padStart(2,"0"),$e=String(me.getTime()).slice(-3);return`${Te}${Ue}${Re}LV-${$e}`}},de=async()=>{const q=await Ne();$(me=>({...me,LEAVEREFNO:q}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Leave Management"}),e.jsx("p",{className:"text-gray-600",children:"Click on a date to add a leave record"})]})}),e.jsx(ae,{}),e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-300 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"All Leave Records"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Total: ",W.totalRecords," leave record(s)"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Field"}),e.jsx("select",{value:G.filterType,onChange:q=>V(me=>({...me,filterType:q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:K.map(q=>e.jsx("option",{value:q.value,children:q.label},q.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Value"}),e.jsx("input",{type:"text",value:G.searchValue,onChange:q=>V(me=>({...me,searchValue:q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter search term"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date From"}),e.jsx("input",{type:"date",value:G.dateFrom,onChange:q=>V(me=>({...me,dateFrom:q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date To"}),e.jsx("input",{type:"date",value:G.dateTo,onChange:q=>V(me=>({...me,dateTo:q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:Ee,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Search"}),e.jsx("button",{onClick:Z,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Clear"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[10%]",children:"REF NO"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[20%]",children:"EMPLOYEE"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[15%]",children:"LEAVE TYPE"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[15%]",children:"INCLUSIVE DATE(S)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[25%]",children:"DETAILS"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[10%]",children:"ENTRY DATE"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[10%]",children:"STATUS"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[15%]",children:"ACTIONS"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"No leave records found"})}):t.map(q=>{const me=()=>{const Re=q.LEAVESPECIFY||"",$e=q.LEAVEREMARKS||"";return Re&&$e?`${Re} - ${$e}`:Re||$e||"-"},Te=()=>q.leaveDates&&q.leaveDates.length>0?q.leaveDates.map(Ve=>new Date(Ve.LEAVEDATE)).sort((Ve,at)=>Ve-at).map(Ve=>{const at=String(Ve.getDate()).padStart(2,"0"),Je=Ve.toLocaleDateString("en-US",{month:"short"}),ge=String(Ve.getFullYear()).slice(-2);return`${at}-${Je}-${ge}`}).join(`
`):"N/A",Ue=M[q.LEAVESTATUS]||M.PENDING;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 w-[10%]",children:q.LEAVEREFNO||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 w-[20%]",children:q.EmployeeName||"Unknown Employee"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 w-[15%]",children:q.LeaveName||"Unknown Leave Type"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 w-[15%]",children:e.jsx("div",{className:"max-w-xs",children:e.jsx("div",{className:"text-sm font-medium whitespace-pre-line",children:Te()})})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 w-[25%]",children:me()}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 w-[10%] break-words",children:q.LEAVEENTRYDATE?new Date(q.LEAVEENTRYDATE).toLocaleDateString():"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm w-[10%]",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Ue.color}`,children:q.LEAVESTATUS||"PENDING"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium w-[15%]",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>_e(q),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>je(q.LEAVEUID),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),q.LEAVESTATUS==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Se(q.LEAVEUID),className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Approve",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("button",{onClick:()=>qe(q.LEAVEUID),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Disapprove",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})]})})]},q.LEAVEUID)})})]})}),W.totalPages>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Page ",W.currentPage," of ",W.totalPages]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>ee(W.currentPage-1),disabled:W.currentPage===1,className:`px-3 py-2 text-sm font-medium rounded-md ${W.currentPage===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Previous"}),Array.from({length:Math.min(5,W.totalPages)},(q,me)=>{let Te;return W.totalPages<=5||W.currentPage<=3?Te=me+1:W.currentPage>=W.totalPages-2?Te=W.totalPages-4+me:Te=W.currentPage-2+me,e.jsx("button",{onClick:()=>ee(Te),className:`px-3 py-2 text-sm font-medium rounded-md ${W.currentPage===Te?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:Te},Te)}),e.jsx("button",{onClick:()=>ee(W.currentPage+1),disabled:W.currentPage===W.totalPages,className:`px-3 py-2 text-sm font-medium rounded-md ${W.currentPage===W.totalPages?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Next"})]})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:N?"Edit Leave Record":"Add Leave Record"}),e.jsxs("form",{onSubmit:Qe,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Leave Reference Number"}),e.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-700 font-mono",children:P.LEAVEREFNO||"Generating..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated reference number for this leave record"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Employee *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:d,onChange:q=>{g(q.target.value),E(!0)},onFocus:()=>E(!0),placeholder:"Search employee by name or ID",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0}),b&&e.jsx("div",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:R.map(q=>e.jsxs("div",{onClick:()=>Ke(q),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer",children:[e.jsx("div",{className:"font-medium",children:q.NAME}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",q.BADGENUMBER]})]},q.USERID))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Leave Type *"}),e.jsxs("select",{value:P.LEAVEID,onChange:q=>{$(me=>({...me,LEAVEID:q.target.value,selectedLeaveDetail:"",specifyText:""}))},className:`w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${P.USERID?"":"bg-gray-100 cursor-not-allowed"}`,required:!0,disabled:!P.USERID,children:[e.jsx("option",{value:"",children:"Select Leave Type"}),a.map(q=>e.jsx("option",{value:q.LEAVEID,children:q.LEAVENAME},q.LEAVEID))]})]}),(console.log(" [FORM DEBUG] Rendering leave details section..."),console.log(" [FORM DEBUG] formData.LEAVEID:",P.LEAVEID),console.log(" [FORM DEBUG] filteredLeaveDetails.length:",p.length),console.log(" [FORM DEBUG] filteredLeaveDetails:",p),null),P.LEAVEID&&p.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Leave Detail"}),e.jsxs("select",{value:P.selectedLeaveDetail,onChange:q=>{const me=p.find(Te=>Te.LEAVEDETAILID===q.target.value);$(Te=>({...Te,leaveDetailSpecify:me?me.LEAVEDETAIL:"",selectedLeaveDetail:q.target.value}))},className:`w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${P.USERID?"":"bg-gray-100 cursor-not-allowed"}`,disabled:!P.USERID,children:[e.jsx("option",{value:"",children:"Select Leave Detail"}),p.map(q=>e.jsx("option",{value:q.LEAVEDETAILID,children:q.LEAVEDETAIL},q.LEAVEDETAILID))]}),P.selectedLeaveDetail&&(()=>{const q=p.find(me=>me.LEAVEDETAILID===parseInt(P.selectedLeaveDetail));return q&&q.LEAVESPECIFY===1})()&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Specify"}),e.jsx("input",{type:"text",value:P.specifyText,onChange:q=>$(me=>({...me,specifyText:q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Please specify..."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Leave Date(s) *"}),e.jsx("button",{type:"button",onClick:()=>L(!0),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white hover:bg-gray-50",children:" Open Calendar"}),P.USERID&&e.jsx("div",{className:"mt-2 text-xs text-gray-600",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-red-100 mr-1"}),e.jsx("span",{children:"Conflicts (Travel/Leave)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-blue-100 mr-1"}),e.jsx("span",{children:"Existing Leave"})]})]})})]}),A.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selected Date(s)"}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:[e.jsx("div",{className:"text-sm text-blue-800",children:A.length===1?"Selected Date:":"Selected Dates:"}),e.jsx("div",{className:"mt-1",children:A.map((q,me)=>e.jsx("div",{className:"text-sm font-medium text-blue-900",children:Ze(q)},me))}),e.jsx("button",{type:"button",onClick:()=>D([]),className:"mt-2 text-xs text-blue-600 hover:text-blue-800 underline",children:"Clear Selection"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Remarks"}),e.jsx("textarea",{value:P.leaveDetailSpecify,onChange:q=>$(me=>({...me,leaveDetailSpecify:q.target.value})),className:`w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${P.USERID?"":"bg-gray-100 cursor-not-allowed"}`,rows:"3",placeholder:"Enter remarks or additional details...",disabled:!P.USERID})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:te,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:ye,className:`px-4 py-2 rounded-md ${ye?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:N?"Update Leave Record":"Add Leave Record"})]})]})]})})}),k&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsx(Ce,{})})})]})},wS=({value:t,onChange:s,disabled:r=!1,placeholder:n="Search Philippine addresses...",className:a="",showLabel:l=!0,label:o="Destination",maxLength:i=200,showCharCount:c=!0})=>{const[h,p]=y.useState(t||""),[m,u]=y.useState(!1),[x,j]=y.useState([]),[v,N]=y.useState([]),[f,d]=y.useState(!1),[g,b]=y.useState(null),E=["Manila, Metro Manila","Quezon City, Metro Manila","Caloocan City, Metro Manila","Las Pias City, Metro Manila","Makati City, Metro Manila","Malabon City, Metro Manila","Mandaluyong City, Metro Manila","Marikina City, Metro Manila","Muntinlupa City, Metro Manila","Navotas City, Metro Manila","Paraaque City, Metro Manila","Pasay City, Metro Manila","Pasig City, Metro Manila","Pateros, Metro Manila","San Juan City, Metro Manila","Taguig City, Metro Manila","Valenzuela City, Metro Manila","Cebu City, Cebu","Bogo City, Cebu","Carcar City, Cebu","Danao City, Cebu","Lapu-Lapu City, Cebu","Mandaue City, Cebu","Naga City, Cebu","Talisay City, Cebu","Toledo City, Cebu","Alcantara, Cebu","Alcoy, Cebu","Alegria, Cebu","Aloguinsan, Cebu","Argao, Cebu","Asturias, Cebu","Badian, Cebu","Balamban, Cebu","Bantayan, Cebu","Barili, Cebu","Boljoon, Cebu","Borbon, Cebu","Carmen, Cebu","Catmon, Cebu","Compostela, Cebu","Consolacion, Cebu","Cordova, Cebu","Daanbantayan, Cebu","Dalaguete, Cebu","Dumanjug, Cebu","Ginatilan, Cebu","Liloan, Cebu","Madridejos, Cebu","Malabuyoc, Cebu","Medellin, Cebu","Minglanilla, Cebu","Moalboal, Cebu","Oslob, Cebu","Pilar, Cebu","Pinamungahan, Cebu","Poro, Cebu","Ronda, Cebu","Samboan, Cebu","San Fernando, Cebu","San Francisco, Cebu","San Remigio, Cebu","Santa Fe, Cebu","Santander, Cebu","Sibonga, Cebu","Sogod, Cebu","Tabogon, Cebu","Tabuelan, Cebu","Tuburan, Cebu","Tudela, Cebu","Baguio City, Benguet","Dagupan City, Pangasinan","San Fernando City, La Union","Vigan City, Ilocos Sur","Cabanatuan City, Nueva Ecija","Malolos City, Bulacan","Meycauayan City, Bulacan","San Jose del Monte City, Bulacan","Tarlac City, Tarlac","Olongapo City, Zambales","Angeles City, Pampanga","Mabalacat City, Pampanga","San Fernando City, Pampanga","Batangas City, Batangas","Lipa City, Batangas","Tanauan City, Batangas","Cavite City, Cavite","Dasmarias City, Cavite","General Trias City, Cavite","Imus City, Cavite","Tagaytay City, Cavite","Trece Martires City, Cavite","Antipolo City, Rizal","Calamba City, Laguna","San Pablo City, Laguna","Santa Rosa City, Laguna","Lucena City, Quezon","Tayabas City, Quezon","Legazpi City, Albay","Ligao City, Albay","Tabaco City, Albay","Iriga City, Camarines Sur","Naga City, Camarines Sur","Sorsogon City, Sorsogon","Masbate City, Masbate","Roxas City, Capiz","Iloilo City, Iloilo","Passi City, Iloilo","Bacolod City, Negros Occidental","Bago City, Negros Occidental","Cadiz City, Negros Occidental","Escalante City, Negros Occidental","Himamaylan City, Negros Occidental","Kabankalan City, Negros Occidental","La Carlota City, Negros Occidental","Sagay City, Negros Occidental","San Carlos City, Negros Occidental","Silay City, Negros Occidental","Sipalay City, Negros Occidental","Talisay City, Negros Occidental","Victorias City, Negros Occidental","Tagbilaran City, Bohol","Dumaguete City, Negros Oriental","Guihulngan City, Negros Oriental","Tanjay City, Negros Oriental","Bayawan City, Negros Oriental","Canlaon City, Negros Oriental","Siquijor, Siquijor","Boracay, Aklan","Kalibo, Aklan","Zamboanga City, Zamboanga del Sur","Pagadian City, Zamboanga del Sur","Dipolog City, Zamboanga del Norte","Dapitan City, Zamboanga del Norte","Cagayan de Oro City, Misamis Oriental","Gingoog City, Misamis Oriental","El Salvador City, Misamis Oriental","Iligan City, Lanao del Norte","Oroquieta City, Misamis Occidental","Ozamiz City, Misamis Occidental","Tangub City, Misamis Occidental","Marawi City, Lanao del Sur","Butuan City, Agusan del Norte","Cabadbaran City, Agusan del Norte","Bayugan City, Agusan del Sur","Surigao City, Surigao del Norte","Bislig City, Surigao del Sur","Tandag City, Surigao del Sur","Davao City, Davao del Sur","Digos City, Davao del Sur","Mati City, Davao Oriental","Tagum City, Davao del Norte","Panabo City, Davao del Norte","Island Garden City of Samal, Davao del Norte","General Santos City, South Cotabato","Koronadal City, South Cotabato","Tacurong City, Sultan Kudarat","Kidapawan City, Cotabato","Cotabato City, Maguindanao","Puerto Princesa City, Palawan","Aborlan, Palawan","Agutaya, Palawan","Araceli, Palawan","Balabac, Palawan","Bataraza, Palawan","Brooke's Point, Palawan","Busuanga, Palawan","Cagayancillo, Palawan","Coron, Palawan","Culion, Palawan","Cuyo, Palawan","Dumaran, Palawan","El Nido, Palawan","Kalayaan, Palawan","Linapacan, Palawan","Magsaysay, Palawan","Narra, Palawan","Quezon, Palawan","Rizal, Palawan","Roxas, Palawan","San Vicente, Palawan","Sofronio Espaola, Palawan","Taytay, Palawan"],R=()=>{d(!0);const I=E.map(O=>{const[C,F]=O.split(", ");return{name:C,province:F,type:"City/Municipality",fullAddress:O,original:{name:C,province:F}}});console.log(`Loaded ${I.length} addresses from fallback data`),N(I),b(`Using offline data (${I.length} locations available)`),d(!1)};y.useEffect(()=>{R()},[]),y.useEffect(()=>{if(!h.trim()){j([]);return}const I=v.filter(O=>O.name.toLowerCase().includes(h.toLowerCase())||O.province.toLowerCase().includes(h.toLowerCase())||O.fullAddress.toLowerCase().includes(h.toLowerCase())).slice(0,15);j(I)},[h,v]);const S=I=>{const O=I.target.value;O.length<=i&&(p(O),u(!0),s&&s(O))},k=I=>{p(I.fullAddress),u(!1),s&&s(I.fullAddress)},L=()=>{h.trim()&&u(!0)},A=()=>{setTimeout(()=>{u(!1)},200)},D=I=>{I.key==="Enter"&&(I.preventDefault(),x.length>0&&k(x[0]))};return e.jsxs("div",{className:`relative ${a}`,children:[l&&e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:h,onChange:S,onFocus:L,onBlur:A,onKeyPress:D,placeholder:n,disabled:r,className:`w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${r?"bg-gray-100 cursor-not-allowed":"bg-white"} ${g?"border-yellow-500":""}`,maxLength:i}),c&&e.jsxs("div",{className:"absolute right-2 top-2 text-xs text-gray-500",children:[h.length,"/",i]}),f&&e.jsx("div",{className:"absolute right-8 top-2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"})})]}),g&&e.jsx("div",{className:"mt-1 text-sm text-yellow-600",children:g}),m&&x.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:x.map((I,O)=>e.jsxs("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>k(I),children:[e.jsx("div",{className:"font-medium text-gray-900",children:I.name}),e.jsx("div",{className:"text-sm text-gray-600",children:I.province}),I.type&&e.jsx("div",{className:"text-xs text-blue-600",children:I.type})]},O))}),m&&h.trim()&&x.length===0&&!f&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:e.jsxs("div",{className:"px-3 py-2 text-gray-500 text-sm",children:['No addresses found for "',h,'"']})})]})},ES=()=>{const[t,s]=y.useState([]),[r,n]=y.useState([]),[a,l]=y.useState([]),[o,i]=y.useState([]),[c,h]=y.useState(!1),[p,m]=y.useState(null),[u,x]=y.useState(!1),[j,v]=y.useState(null),[N,f]=y.useState(!1),[d,g]=y.useState([]),[b,E]=y.useState(null),[R,S]=y.useState(new Date),[k,L]=y.useState(""),[A,D]=y.useState(!1),[I,O]=y.useState(!1),[C,F]=y.useState(null),[U,Y]=y.useState({TRAVELNO:"",PURPOSE:"",TRAVELDESTINATION:"",STATUS:"PENDING",selectedEmployees:[]}),[G,V]=y.useState(1),[W,_]=y.useState(1),[M,P]=y.useState(10),[$,B]=y.useState(0),[w,T]=y.useState(10),[H,K]=y.useState("all"),[J,X]=y.useState(""),pe=de=>new Date(de).toISOString().split("T")[0],oe=(de,q)=>{const me=new Date(de),Te=new Date(q);return me.getFullYear()===Te.getFullYear()&&me.getMonth()===Te.getMonth()&&me.getDate()===Te.getDate()},ce=de=>{const q=o.find(me=>me.USERID===de);return q?q.NAME:"Unknown Employee"},Ae=de=>{if(U.selectedEmployees.length===0)return!1;const q=r.some(Te=>{if(Te.travelDates&&Te.travelDates.length>0)return Te.travelDates.some(Ue=>{const Re=U.selectedEmployees.some(Ve=>Ve.USERID===Ue.USERID),$e=oe(Ue.TRAVELDATE,de);return Re&&$e});{const Ue=U.selectedEmployees.some($e=>$e.USERID===Te.USERID),Re=oe(Te.TRAVELDATE,de);return Ue&&Re}}),me=a.some(Te=>{if(Te.leaveDates&&Te.leaveDates.length>0)return Te.leaveDates.some(Ue=>{const Re=U.selectedEmployees.some(Ve=>Ve.USERID===Te.USERID),$e=oe(Ue.LEAVEDATE,de);return Re&&$e});{const Ue=U.selectedEmployees.some($e=>$e.USERID===Te.USERID),Re=oe(Te.LEAVEDATE,de);return Ue&&Re}});return q||me},Be=de=>{const q=[];return r.forEach(me=>{if(me.travelDates&&me.travelDates.length>0)me.travelDates.forEach(Te=>{const Ue=U.selectedEmployees.some($e=>$e.USERID===Te.USERID),Re=oe(Te.TRAVELDATE,de);if(Ue&&Re){const $e=o.find(Ve=>Ve.USERID===Te.USERID);q.push({type:"Travel",employeeName:$e?$e.NAME:"Unknown Employee",status:me.STATUS,purpose:me.PURPOSE,destination:me.TRAVELDESTINATION})}});else{const Te=U.selectedEmployees.some(Re=>Re.USERID===me.USERID),Ue=oe(me.TRAVELDATE,de);if(Te&&Ue){const Re=o.find($e=>$e.USERID===me.USERID);q.push({type:"Travel",employeeName:Re?Re.NAME:"Unknown Employee",status:me.STATUS,purpose:me.PURPOSE,destination:me.TRAVELDESTINATION})}}}),a.forEach(me=>{if(me.leaveDates&&me.leaveDates.length>0)me.leaveDates.forEach(Te=>{const Ue=U.selectedEmployees.some($e=>$e.USERID===me.USERID),Re=oe(Te.LEAVEDATE,de);if(Ue&&Re){const $e=o.find(Ve=>Ve.USERID===me.USERID);q.push({type:"Leave",employeeName:$e?$e.NAME:"Unknown Employee",status:me.LEAVESTATUS,purpose:me.LEAVESPECIFY,leaveType:me.LeaveName})}});else{const Te=U.selectedEmployees.some(Re=>Re.USERID===me.USERID),Ue=oe(me.LEAVEDATE,de);if(Te&&Ue){const Re=o.find($e=>$e.USERID===me.USERID);q.push({type:"Leave",employeeName:Re?Re.NAME:"Unknown Employee",status:me.LEAVESTATUS,purpose:me.LEAVESPECIFY,leaveType:me.LeaveName})}}}),q},Ie=de=>{g(q=>{const me=pe(de),Te=q.some(Ue=>pe(Ue)===me);if(U.selectedEmployees.length>0&&Ae(de)&&!Te){const Re=Be(de);if(Re.length>0){const $e=Re.map(Ve=>`${Ve.employeeName} (${Ve.type}: ${Ve.purpose||Ve.leaveType||"N/A"}) - Status: ${Ve.status||"Unknown"}`).join(`
`);return alert(`Cannot select this date: Selected employees have existing records:

${$e}

Please select a different date or choose different employees.`),q}}return Te?q.filter(Ue=>pe(Ue)!==me):[...q,de]})},ye=async()=>{try{const de=new Date,q=String(de.getFullYear()).slice(-2),me=String(de.getMonth()+1).padStart(2,"0"),Te=String(de.getDate()).padStart(2,"0"),Ue=`${q}${me}${Te}`,$e=(await le.get("/travel-orders/count",{params:{prefix:`${Ue}TO`}})).data.count||0,Ve=String($e+1).padStart(3,"0");return`${Ue}TO-${Ve}`}catch(de){console.error("Error generating travel number:",de);const q=new Date,me=String(q.getFullYear()).slice(-2),Te=String(q.getMonth()+1).padStart(2,"0"),Ue=String(q.getDate()).padStart(2,"0");return`${me}${Te}${Ue}TO-001`}},se=de=>{const q=new Date(de),me=String(q.getDate()).padStart(2,"0"),Te=q.toLocaleDateString("en-US",{month:"short"}),Ue=String(q.getFullYear()).slice(-2);return`${me}-${Te}-${Ue}`},we=de=>{if(!r||r.length===0)return[];const q=new Map;return r.forEach(me=>{if(me.travelDates&&me.travelDates.length>0){const Te=me.travelDates.filter(Ue=>oe(Ue.TRAVELDATE,de));if(Te.length>0){const Ue=me.TRAVELNO;q.has(Ue)||q.set(Ue,{TRAVELNO:Ue,TRAVELUID:me.TRAVELUID,PURPOSE:me.PURPOSE,TRAVELDESTINATION:me.TRAVELDESTINATION,STATUS:me.STATUS,TRAVELENTRYDATE:me.TRAVELENTRYDATE,employees:[],dates:[]}),Te.forEach(Re=>{Re.EmployeeName&&!q.get(Ue).employees.some($e=>$e.USERID===Re.USERID)&&q.get(Ue).employees.push({USERID:Re.USERID,NAME:Re.EmployeeName,BADGENUMBER:Re.BADGENUMBER})}),Te.forEach(Re=>{q.get(Ue).dates.some($e=>oe($e,Re.TRAVELDATE))||q.get(Ue).dates.push(Re.TRAVELDATE)})}}}),Array.from(q.values()).sort((me,Te)=>new Date(Te.TRAVELENTRYDATE)-new Date(me.TRAVELENTRYDATE)).slice(0,5)},ve=de=>U.USERID?!!r.find(me=>{const Te=parseInt(me.USERID),Ue=parseInt(U.USERID),Re=oe(me.TRAVELDATE,de);return Te===Ue&&Re}):null,Q=()=>{const de=ne(R),q=["January","February","March","April","May","June","July","August","September","October","November","December"],me=()=>{S(Re=>new Date(Re.getFullYear(),Re.getMonth()-1,1))},Te=()=>{S(Re=>new Date(Re.getFullYear(),Re.getMonth()+1,1))},Ue=Re=>d.some($e=>pe($e)===pe(Re));return e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg shadow-lg p-4 w-80",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:me,className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("h3",{className:"text-lg font-semibold",children:[q[R.getMonth()]," ",R.getFullYear()]}),e.jsx("button",{onClick:Te,className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsx("button",{onClick:()=>f(!1),className:"p-2 hover:bg-gray-100 rounded-full text-gray-500 hover:text-gray-700",title:"Close calendar",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(Re=>e.jsx("div",{className:"text-center text-sm font-medium text-gray-500 p-2",children:Re},Re))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:de.map((Re,$e)=>{if(!Re)return e.jsx("div",{className:"p-2"},$e);const Ve=Ue(Re),at=pe(Re)===pe(C||new Date),Je=Ae(Re),ge=Je&&!Ve;return ve(Re),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{onClick:()=>{ge||Ie(Re)},disabled:ge,className:`
                    p-2 text-sm rounded-full transition-colors relative
                    ${Ve?"bg-blue-600 text-white":at?Je?"bg-red-100 text-red-600 font-semibold cursor-not-allowed":"bg-blue-100 text-blue-600 font-semibold":Je?"bg-red-50 text-red-500 cursor-not-allowed border border-red-200":"hover:bg-gray-100 text-gray-700"}
                  `,children:[Re.getDate(),Je&&e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"})]}),Je&&e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-gray-800 text-white text-xs rounded-lg py-2 px-3 shadow-lg z-50 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none",style:{minWidth:"300px"},children:[e.jsx("div",{className:"font-semibold mb-2 text-white text-center",children:"Existing Records"}),e.jsx("div",{className:"space-y-1",children:Be(Re).map((He,Ye)=>e.jsxs("div",{className:"border-b border-gray-600 pb-1 last:border-b-0",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Employee:"}),e.jsx("span",{className:"text-white font-medium",children:He.employeeName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Type:"}),e.jsx("span",{className:"text-white font-medium",children:He.type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Status:"}),e.jsx("span",{className:`font-medium ${He.status==="APPROVED"?"text-green-400":He.status==="REJECTED"?"text-red-400":"text-yellow-400"}`,children:He.status||"Unknown"})]}),He.purpose&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Purpose:"}),e.jsx("span",{className:"text-white font-medium max-w-32 truncate",title:He.purpose,children:He.purpose.length>20?`${He.purpose.substring(0,20)}...`:He.purpose})]})]},Ye))}),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-2 h-2 bg-gray-800 rotate-45"})]})]},$e)})}),d.length>0&&e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Selected Dates:"}),e.jsx("div",{className:"space-y-1",children:d.map((Re,$e)=>{const Ve=Ae(Re);return e.jsxs("div",{className:`text-sm ${Ve?"text-red-600":"text-blue-700"}`,children:[Re.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),Ve&&e.jsx("span",{className:"ml-2 text-xs",children:" Already has records"})]},$e)})}),e.jsx("button",{onClick:()=>g([]),className:"mt-2 text-xs text-blue-600 hover:text-blue-800 underline",children:"Clear all dates"})]}),e.jsxs("div",{className:"mt-4 space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-50 border border-red-200 rounded"}),e.jsx("span",{className:"text-gray-600",children:"Employee has existing records"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-100 rounded"}),e.jsx("span",{className:"text-gray-600",children:"Today"})]})]})]})},ne=de=>{const q=de.getFullYear(),me=de.getMonth(),Te=new Date(q,me,1),Ue=new Date(Te);Ue.setDate(Ue.getDate()-Te.getDay());const Re=[],$e=new Date(Ue);for(let Ve=0;Ve<42;Ve++)$e.getMonth()===me?Re.push(new Date($e)):Re.push(null),$e.setDate($e.getDate()+1);return Re},he=async(de=1,q=10,me="",Te="all")=>{try{h(!0);const Ue=await le.get("/travel-orders",{params:{page:de,limit:q,search:me,field:Te}});Ue.data.success&&(s(Ue.data.data||[]),_(Ue.data.totalPages||1),B(Ue.data.totalRecords||0),V(de))}catch(Ue){console.error("Error fetching travel orders:",Ue),m("Failed to fetch travel orders")}finally{h(!1)}},Me=async()=>{try{const de=await le.get("/travel-orders",{params:{page:1,limit:1e4}});de.data.success?n(de.data.data||[]):n([])}catch(de){console.error("Error fetching all travel orders for calendar:",de),n([])}},be=async()=>{try{const de=await le.get("/leave/records",{params:{page:1,limit:1e4}});de.data.success?l(de.data.data||[]):l([])}catch(de){console.error("Error fetching all leave records for validation:",de),l([])}},De=async()=>{try{const de=await le.get("/employees");de.data&&Array.isArray(de.data)?i(de.data||[]):i([])}catch(de){console.error("Error fetching employees:",de),i([])}},ze=()=>{V(1),he(1,w,J,H)},Ee=de=>{T(de),V(1),he(1,de,J,H)},Z=de=>{he(de,w,J,H)},ee=(G-1)*w+1,_e=Math.min(G*w,$),Qe=de=>{const{name:q,value:me}=de.target;Y(Te=>({...Te,[q]:me}))},je=(de,q)=>{Y(q?me=>({...me,selectedEmployees:[...me.selectedEmployees,{USERID:de.USERID,EmployeeName:de.NAME,BADGENUMBER:de.BADGENUMBER}]}):me=>({...me,selectedEmployees:me.selectedEmployees.filter(Te=>Te.USERID!==de.USERID)}))},Ke=de=>{Y(q=>({...q,selectedEmployees:q.selectedEmployees.filter(me=>me.USERID!==de)}))},rt=de=>U.selectedEmployees.some(q=>q.USERID===de),gt=o.filter(de=>{const q=de.privilege>=0,me=de.NAME.toLowerCase().includes(k.toLowerCase())||de.BADGENUMBER.toLowerCase().includes(k.toLowerCase());return q&&me}),mt=async de=>{E(de),x(!0),v(null),g([]),Y({TRAVELNO:"",PURPOSE:"",TRAVELDESTINATION:"",STATUS:"PENDING",selectedEmployees:[]});const q=await ye();Y(me=>({...me,TRAVELNO:q}))},it=async de=>{if(de.preventDefault(),U.selectedEmployees.length===0){alert("Please select at least one employee");return}if(d.length===0){alert("Please select at least one travel date");return}if(!U.PURPOSE.trim()){alert("Please enter the purpose");return}if(!U.TRAVELDESTINATION.trim()){alert("Please enter the destination");return}try{h(!0);const q=[];U.selectedEmployees.forEach(Ue=>{d.forEach(Re=>{const $e=Re.getFullYear(),Ve=String(Re.getMonth()+1).padStart(2,"0"),at=String(Re.getDate()).padStart(2,"0"),Je=`${$e}-${Ve}-${at}`;q.push({USERID:Ue.USERID,TRAVELDATE:Je})})});const me={travelOrderData:{PURPOSE:U.PURPOSE,TRAVELDESTINATION:U.TRAVELDESTINATION,STATUS:U.STATUS,travelDates:q}},Te=j?await le.put(`/travel-orders/${j.TRAVELUID}`,me):await le.post("/travel-orders",me);Te.data.success?(alert(j?"Travel order updated successfully":"Travel order created successfully"),x(!1),v(null),g([]),Y({TRAVELNO:"",PURPOSE:"",TRAVELDESTINATION:"",STATUS:"PENDING",selectedEmployees:[]}),await he(),await Me()):alert(`Failed to save travel order: ${Te.data.message}`)}catch(q){console.error("Error saving travel order:",q),alert("Error saving travel order")}finally{h(!1)}},ae=de=>{if(v(de),x(!0),Y({TRAVELNO:de.TRAVELNO,PURPOSE:de.PURPOSE,TRAVELDESTINATION:de.TRAVELDESTINATION,STATUS:de.STATUS,selectedEmployees:de.travelDates?de.travelDates.map(q=>({USERID:q.USERID,EmployeeName:q.EmployeeName,BADGENUMBER:q.BADGENUMBER})):[]}),de.travelDates&&de.travelDates.length>0){const q=[...new Set(de.travelDates.map(me=>new Date(me.TRAVELDATE)))];g(q)}},Ce=async de=>{if(window.confirm("Are you sure you want to delete this travel order?"))try{h(!0),await le.delete(`/travel-orders/${de}`),await he(),await Me()}catch(q){console.error("Error deleting travel order:",q),alert("Error deleting travel order")}finally{h(!1)}},Se=async de=>{if(window.confirm("Are you sure you want to approve this travel order?"))try{h(!0);const q=await le.put(`/travel-orders/${de}/approve`);q.data.success?(alert("Travel order approved successfully"),await he(),await Me()):alert(`Failed to approve travel order: ${q.data.message}`)}catch(q){console.error("Error approving travel order:",q),alert("Error approving travel order")}finally{h(!1)}},qe=async de=>{if(window.confirm("Are you sure you want to disapprove this travel order?"))try{h(!0);const q=await le.put(`/travel-orders/${de}/disapprove`);q.data.success?(alert("Travel order disapproved successfully"),await he(),await Me()):alert(`Failed to disapprove travel order: ${q.data.message}`)}catch(q){console.error("Error disapproving travel order:",q),alert("Error disapproving travel order")}finally{h(!1)}},Ze=de=>{if(de.travelDates&&de.travelDates.length>0){const q=new Map;return de.travelDates.forEach(me=>{me.USERID&&!q.has(me.USERID)&&q.set(me.USERID,me.EmployeeName||ce(me.USERID))}),Array.from(q.values()).join(`
`)}return ce(de.USERID)},ke=de=>{if(de.travelDates&&de.travelDates.length>0){const q=de.travelDates.map(me=>se(me.TRAVELDATE));return[...new Set(q)].join(`
`)}return se(de.TRAVELDATE)},te=()=>{const de=ne(R),q=["January","February","March","April","May","June","July","August","September","October","November","December"],me=()=>{S(Ue=>new Date(Ue.getFullYear(),Ue.getMonth()-1,1))},Te=()=>{S(Ue=>new Date(Ue.getFullYear(),Ue.getMonth()+1,1))};return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-300 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:me,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:[q[R.getMonth()]," ",R.getFullYear()]}),e.jsx("button",{onClick:Te,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsx("button",{onClick:()=>mt(C||new Date),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Add Travel Order"})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(Ue=>e.jsx("div",{className:"text-center text-sm font-medium text-gray-500 p-2",children:Ue},Ue))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:de.map((Ue,Re)=>{if(!Ue)return e.jsx("div",{className:"p-2"},Re);const $e=pe(Ue)===pe(C||new Date),Ve=Ue<new Date((C||new Date).setHours(0,0,0,0)),at=we(Ue),Je=at.length>0;return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>mt(Ue),onMouseEnter:ge=>{if(Je){const He=document.getElementById(`tooltip-${Re}`);if(He){const Ye=ge.target.getBoundingClientRect(),ct=He.getBoundingClientRect();He.style.position="fixed",He.style.left=`${Ye.left+Ye.width/2-ct.width/2}px`,He.style.top=`${Ye.top-ct.height-10}px`,He.style.display="block",He.style.zIndex="9999"}}},onMouseLeave:()=>{const ge=document.getElementById(`tooltip-${Re}`);ge&&(ge.style.display="none")},className:`
                    relative p-2 text-sm rounded-lg transition-all duration-200 min-h-[60px] flex flex-col items-center justify-start w-full
                    ${$e?"bg-blue-100 text-blue-600 font-semibold hover:bg-blue-200":Je?Ve?"bg-gray-100 text-gray-600 hover:bg-gray-200 border border-gray-300":"bg-green-50 text-green-700 hover:bg-green-100 border border-green-200":"hover:bg-gray-100 text-gray-700 hover:bg-blue-50"}
                  `,children:[e.jsx("span",{className:"font-medium",children:Ue.getDate()}),Je&&e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${Ve?"bg-gray-500":"bg-green-500"}`}),e.jsx("span",{className:`text-xs font-medium ${Ve?"text-gray-600":"text-green-600"}`,children:at.length})]})]}),Je&&e.jsxs("div",{id:`tooltip-${Re}`,className:"absolute bg-gray-800 text-white text-xs rounded-lg py-2 px-3 shadow-lg z-50",style:{display:"none",minWidth:"400px"},children:[e.jsxs("div",{className:"font-semibold mb-2 text-white text-center",children:["Travel Orders (",at.length,")",at.length>5&&e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Showing latest 5 of ",at.length," records"]})]}),e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-600",children:[e.jsx("th",{className:"text-left py-1 px-2 font-semibold text-gray-300",children:"Travel No"}),e.jsx("th",{className:"text-left py-1 px-2 font-semibold text-gray-300",children:"Employees"}),e.jsx("th",{className:"text-left py-1 px-2 font-semibold text-gray-300",children:"Status"})]})}),e.jsx("tbody",{children:at.sort((ge,He)=>new Date(He.TRAVELENTRYDATE)-new Date(ge.TRAVELENTRYDATE)).slice(0,5).map((ge,He)=>e.jsxs("tr",{className:"border-b border-gray-700 last:border-b-0",children:[e.jsx("td",{className:"py-1 px-2 text-white font-medium",children:ge.TRAVELNO||"Unknown Travel No"}),e.jsx("td",{className:"py-1 px-2 text-gray-300",children:ge.employees?ge.employees.map(Ye=>Ye.NAME).join(", "):"Unknown Employees"}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("span",{className:`px-1 py-0.5 rounded text-xs ${ge.STATUS==="APPROVED"?"bg-green-100 text-green-800":ge.STATUS==="REJECTED"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:ge.STATUS||"Unknown"})})]},He))})]})}),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-2 h-2 bg-gray-800 rotate-45"})]})]},Re)})}),e.jsxs("div",{className:"mt-6 flex items-center justify-center space-x-6 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-100 border border-green-200 rounded"}),e.jsx("span",{className:"text-gray-600",children:"Has Travel Orders (Future)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-100 border border-gray-300 rounded"}),e.jsx("span",{className:"text-gray-600",children:"Has Travel Orders (Past)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-100 rounded"}),e.jsx("span",{className:"text-gray-600",children:"Today"})]})]})]})},Ne=async()=>{try{const de=await le.get("/management/server-time");de.data.success&&F(new Date(de.data.serverTime))}catch(de){console.error("Error fetching server time:",de),F(new Date)}};return y.useEffect(()=>{Ne(),he(),Me(),be(),De()},[]),y.useEffect(()=>{C&&S(new Date(C))},[C]),c&&t.length===0?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-lg text-gray-600",children:"Loading travel orders..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Travel Order Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage employee travel orders and approvals"})]}),e.jsx("div",{className:"mb-8",children:e.jsx(te,{})}),b&&e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-300 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Travel Orders for ",b.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),we(b).length===0?e.jsx("p",{className:"text-gray-500",children:"No travel orders for this date."}):e.jsx("div",{className:"space-y-3",children:we(b).map(de=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("span",{className:"font-semibold text-blue-600",children:de.TRAVELNO}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${de.STATUS==="APPROVED"?"bg-green-100 text-green-800":de.STATUS==="REJECTED"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:de.STATUS})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("strong",{children:"Purpose:"})," ",de.PURPOSE]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("strong",{children:"Destination:"})," ",de.TRAVELDESTINATION]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Employees:"})," ",de.employees.map(q=>q.NAME).join(", ")]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>ae(de),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Edit"}),e.jsx("button",{onClick:()=>Ce(de.TRAVELUID),className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]})},de.TRAVELUID))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-300",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"All Travel Orders"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Total: ",$," travel order(s)"]})]})}),e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:H,onChange:de=>K(de.target.value),className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Fields"}),e.jsx("option",{value:"travelNo",children:"Travel Number"}),e.jsx("option",{value:"employee",children:"Employee Name"}),e.jsx("option",{value:"purpose",children:"Purpose"})]}),e.jsx("input",{type:"text",value:J,onChange:de=>X(de.target.value),onKeyPress:de=>de.key==="Enter"&&ze(),placeholder:"Enter search term...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),e.jsx("button",{onClick:ze,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Search"}),e.jsx("button",{onClick:()=>{X(""),K("all"),he(1,w,"","all")},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Clear"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Items per page"}),e.jsxs("select",{value:w,onChange:de=>Ee(parseInt(de.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]})})]})}),e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Showing ",ee," to ",_e," of ",$," entries",J&&e.jsxs("span",{className:"ml-2",children:['(filtered by "',J,'" in ',H==="all"?"all fields":H,")"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[10%]",children:"Travel No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[20%]",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[15%]",children:"Travel Date(s)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[25%]",children:"Purpose"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[15%]",children:"Destination"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[10%]",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[15%]",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(de=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:de.TRAVELNO}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.jsx("div",{className:"whitespace-pre-line",children:Ze(de)})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.jsx("div",{className:"whitespace-pre-line",children:ke(de)})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",children:de.PURPOSE}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:de.TRAVELDESTINATION}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${de.STATUS==="APPROVED"?"bg-green-100 text-green-800":de.STATUS==="REJECTED"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:de.STATUS})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>ae(de),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>Ce(de.TRAVELUID),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),de.STATUS==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Se(de.TRAVELUID),className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Approve",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("button",{onClick:()=>qe(de.TRAVELUID),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Disapprove",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})]})})]},de.TRAVELUID))})]})}),W>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>Z(G-1),disabled:G===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>Z(G+1),disabled:G===W,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page ",e.jsx("span",{className:"font-medium",children:G})," of"," ",e.jsx("span",{className:"font-medium",children:W})]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>Z(G-1),disabled:G===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),Array.from({length:Math.min(5,W)},(de,q)=>{let me;return W<=5||G<=3?me=q+1:G>=W-2?me=W-4+q:me=G-2+q,e.jsx("button",{onClick:()=>Z(me),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${me===G?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:me},me)}),e.jsxs("button",{onClick:()=>Z(G+1),disabled:G===W,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border max-w-2xl shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:j?"Edit Travel Order":"Add Travel Order"}),!j&&e.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Travel Number"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900 mt-1",children:U.TRAVELNO||"Generating..."})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Auto-generated"})]})}),e.jsxs("form",{onSubmit:it,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Select Employees *"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:k,onChange:de=>{L(de.target.value),D(!0)},onFocus:()=>D(!0),placeholder:"Search employee by name or badge number",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),A&&e.jsxs("div",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-gray-200 bg-gray-50",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Select Employees"}),e.jsx("button",{type:"button",onClick:()=>D(!1),className:"text-gray-400 hover:text-gray-600 p-1 rounded hover:bg-gray-200",title:"Close employee selection",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:gt.map(de=>e.jsxs("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:rt(de.USERID),onChange:q=>je(de,q.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:de.NAME}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Badge: ",de.BADGENUMBER]})]})]},de.USERID))}),U.selectedEmployees.length>0&&e.jsx("div",{className:"p-2 border-t border-gray-200 bg-blue-50",children:e.jsxs("div",{className:"text-xs text-blue-700 text-center",children:[U.selectedEmployees.length," employee(s) selected"]})})]})]})}),e.jsx("div",{className:"flex-1",children:U.selectedEmployees.length>0?e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:["Selected Employees (",U.selectedEmployees.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:U.selectedEmployees.map((de,q)=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-2 rounded border",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-blue-600",children:de.EmployeeName.charAt(0)})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 text-sm truncate",children:de.EmployeeName}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Badge: ",de.BADGENUMBER]})]})]}),e.jsx("button",{type:"button",onClick:()=>Ke(de.USERID),className:"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-50",title:"Remove employee",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},de.USERID))})]}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200 flex items-center justify-center h-full",children:e.jsx("p",{className:"text-sm text-gray-500 text-center",children:"No employees selected"})})})]}),U.selectedEmployees.length===0&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Please select at least one employee to continue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Travel Date(s)"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("button",{type:"button",onClick:()=>f(!N),disabled:U.selectedEmployees.length===0,className:`w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm transition-colors ${U.selectedEmployees.length===0?"bg-gray-100 text-gray-500 cursor-not-allowed border-gray-200":"bg-white text-gray-700 hover:bg-gray-50 border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{children:U.selectedEmployees.length===0?"Select employees first":N?"Hide Calendar":"Select Travel Dates"})]})}),N&&U.selectedEmployees.length>0&&e.jsx("div",{className:"absolute z-10 mt-1",children:e.jsx(Q,{})})]}),e.jsx("div",{className:"flex-1",children:d.length>0?e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("h4",{className:"text-sm font-medium text-green-800 mb-2",children:["Selected Travel Dates (",d.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:d.map((de,q)=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-2 rounded border border-green-200",children:[e.jsx("span",{className:"text-sm font-medium text-green-700",children:se(de)}),e.jsx("button",{type:"button",onClick:()=>{g(me=>me.filter((Te,Ue)=>Ue!==q))},className:"text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50",title:"Remove date",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},q))})]}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200 flex items-center justify-center h-full",children:e.jsx("p",{className:"text-sm text-gray-500 text-center",children:"No dates selected"})})})]}),U.selectedEmployees.length===0&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Please select employees first to enable date selection"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Purpose ",e.jsxs("span",{className:"text-gray-500",children:["(",U.PURPOSE.length,"/500)"]})]}),e.jsx("textarea",{name:"PURPOSE",value:U.PURPOSE,onChange:Qe,rows:3,maxLength:500,disabled:I,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Enter the purpose of travel..."})]}),e.jsx("div",{children:e.jsx(wS,{value:U.TRAVELDESTINATION,onChange:de=>Y(q=>({...q,TRAVELDESTINATION:de})),disabled:I,placeholder:"Search Philippine addresses...",label:"Destination",maxLength:200,showCharCount:!0})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{name:"STATUS",value:U.STATUS,onChange:Qe,disabled:I,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"APPROVED",children:"Approved"}),e.jsx("option",{value:"REJECTED",children:"Rejected"})]})]}),U.selectedEmployees.length>0&&d.length>0&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Summary"}),e.jsxs("div",{className:"text-sm text-blue-700",children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("strong",{children:"Employees:"})," ",U.selectedEmployees.length]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("strong",{children:"Travel Dates:"})," ",d.length]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Total Entries:"})," ",U.selectedEmployees.length*d.length,e.jsxs("span",{className:"text-xs text-blue-600 ml-1",children:["(",U.selectedEmployees.length," employees  ",d.length," dates)"]})]})]}),e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"cursor-pointer hover:text-blue-800",children:"View detailed breakdown"}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Selected Dates:"})," ",d.map(de=>se(de)).join(", ")]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Employees:"}),e.jsx("ul",{className:"ml-4 mt-1",children:U.selectedEmployees.map((de,q)=>e.jsxs("li",{className:"text-xs",children:[de.EmployeeName," (Badge: ",de.BADGENUMBER,")"]},q))})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{x(!1),v(null),E(null),g([]),L(""),D(!1)},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c||U.selectedEmployees.length===0||d.length===0||!U.PURPOSE||!U.TRAVELDESTINATION,className:`px-4 py-2 rounded-md transition-colors ${c||U.selectedEmployees.length===0||d.length===0||!U.PURPOSE||!U.TRAVELDESTINATION?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:c?"Saving...":j?"Update":"Save"})]})]})]})})})]})},SS=()=>{const{user:t}=Qt(),[s,r]=y.useState([]),[n,a]=y.useState(!1),[l,o]=y.useState(""),[i,c]=y.useState(new Date().getFullYear()),[h,p]=y.useState(!1),[m,u]=y.useState(null),[x,j]=y.useState(!1),[v,N]=y.useState(null),[f,d]=y.useState(!1),[g,b]=y.useState(1),[E,R]=y.useState(10),[S,k]=y.useState(new Date().getFullYear()),[L,A]=y.useState("ALL"),[D,I]=y.useState({HOLIDAYDATE:"",HOLIDAYNAME:"",HOLIDAYCATEGORY:"NATIONAL",HOLIDAYTYPE:"",HOLIDAYDESCRIPTION:"",ISRECURRING:!1}),[O,C]=y.useState(new Date().getMonth()),[F,U]=y.useState(new Date().getFullYear()),[Y,G]=y.useState(null),V=["Regular Holiday","Special Non-Working Day","Working Holiday"],W=["January","February","March","April","May","June","July","August","September","October","November","December"],_=()=>{const be=new Date().getFullYear(),De=[];for(let ze=be;ze<=be+1;ze++)De.push(ze);return De},M=async()=>{try{a(!0);const be=await le.get(`/holidays/db?year=${i}`);be.data.success&&r(be.data.data)}catch(be){console.error("Error loading holidays:",be),o("Failed to load holidays")}finally{a(!1)}},P=be=>{if(!be||typeof be.getFullYear!="function")return"";const De=be.getFullYear(),ze=String(be.getMonth()+1).padStart(2,"0"),Ee=String(be.getDate()).padStart(2,"0");return`${De}-${ze}-${Ee}`},$=(be,De)=>!be||!De?!1:be.getFullYear()===De.getFullYear()&&be.getMonth()===De.getMonth()&&be.getDate()===De.getDate(),B=be=>{const De=s.filter(Z=>{const ee=new Date(Z.HOLIDAYDATE);return Z.ISRECURRING?ee.getMonth()===be.getMonth()&&ee.getDate()===be.getDate():$(ee,be)}),ze=[],Ee=new Set;return De.forEach(Z=>{!Z.ISRECURRING&&!Ee.has(Z.HOLIDAYNAME)&&(ze.push(Z),Ee.add(Z.HOLIDAYNAME))}),De.forEach(Z=>{Z.ISRECURRING&&!Ee.has(Z.HOLIDAYNAME)&&(ze.push(Z),Ee.add(Z.HOLIDAYNAME))}),ze},w=(be,De)=>be.HOLIDAYNAME,T=(be,De,ze=null)=>{const Ee=new Date(be);return s.filter(Z=>{if(ze&&Z.HOLIDAYUID===ze)return!1;const ee=new Date(Z.HOLIDAYDATE);return!Z.ISRECURRING&&!De?ee.toDateString()===Ee.toDateString():Z.ISRECURRING||De?ee.getMonth()===Ee.getMonth()&&ee.getDate()===Ee.getDate():!1})},H=be=>{const De=s.filter(Ee=>{const Z=new Date(Ee.HOLIDAYDATE);return Ee.ISRECURRING?Z.getMonth()===be.getMonth()&&Z.getDate()===be.getDate():$(Z,be)}),ze=new Set;for(const Ee of De)if(!Ee.ISRECURRING&&!ze.has(Ee.HOLIDAYNAME))return!0;for(const Ee of De)if(Ee.ISRECURRING&&!ze.has(Ee.HOLIDAYNAME))return!0;return!1},K=()=>{const be=new Date(F,O,1),De=new Date(F,O+1,0),ze=be.getDay(),Ee=De.getDate(),Z=[];for(let ee=0;ee<ze;ee++)Z.push(null);for(let ee=1;ee<=Ee;ee++){const _e=new Date(F,O,ee);Z.push(_e)}return Z},J=y.useMemo(()=>K(),[O,F]),X=y.useMemo(()=>s.filter(be=>{const De=new Date(be.HOLIDAYDATE).getFullYear();return!(S!=="ALL"&&De!==S||L==="TRUE"&&!be.ISRECURRING||L==="FALSE"&&be.ISRECURRING)}),[s,S,L]),pe=y.useMemo(()=>{const be=(g-1)*E,De=be+E;return X.slice(be,De)},[X,g,E]),oe=Math.ceil(X.length/E),ce=(g-1)*E+1,Ae=Math.min(g*E,X.length);y.useEffect(()=>{b(1)},[S,L,E]);const Be=async be=>{be.preventDefault();try{const De=T(D.HOLIDAYDATE,D.ISRECURRING,m==null?void 0:m.HOLIDAYUID);if(De.length>0){const Ee=De.map(Z=>Z.ISRECURRING?`${Z.HOLIDAYNAME} (Recurring)`:Z.HOLIDAYNAME);o(`Cannot add holiday. The selected date conflicts with existing holiday(s): ${Ee.join(", ")}`);return}const ze={...D,CREATEDBY:t.USERID};m?await le.put(`/holidays/${m.HOLIDAYUID}`,ze):await le.post("/holidays",ze),p(!1),u(null),we(),o(""),M()}catch(De){console.error("Error saving holiday:",De),o("Failed to save holiday")}},Ie=be=>{u(be),I({HOLIDAYDATE:new Date(be.HOLIDAYDATE).toISOString().split("T")[0],HOLIDAYNAME:be.HOLIDAYNAME,HOLIDAYCATEGORY:be.HOLIDAYCATEGORY,HOLIDAYTYPE:be.HOLIDAYTYPE,HOLIDAYDESCRIPTION:be.HOLIDAYDESCRIPTION||"",ISRECURRING:be.ISRECURRING}),p(!0)},ye=async be=>{if(window.confirm("Are you sure you want to delete this holiday?"))try{await le.delete(`/holidays/${be}`),M()}catch(De){console.error("Error deleting holiday:",De),o("Failed to delete holiday")}},se=be=>{if(H(be)){const De=be.toISOString().split("T")[0],Ee=T(De,!1).map(Z=>Z.ISRECURRING?`${Z.HOLIDAYNAME} (Recurring)`:Z.HOLIDAYNAME);o(`Cannot add holiday on this date. Existing holiday(s): ${Ee.join(", ")}`);return}G(be),I(De=>({...De,HOLIDAYDATE:be.toISOString().split("T")[0]})),p(!0),o("")},we=()=>{I({HOLIDAYDATE:"",HOLIDAYNAME:"",HOLIDAYCATEGORY:"NATIONAL",HOLIDAYTYPE:"",HOLIDAYDESCRIPTION:"",ISRECURRING:!1}),u(null),G(null),o("")},ve=async()=>{if(!v){alert("Please select a file to import");return}try{d(!0);const be=new FormData;be.append("file",v),be.append("CREATEDBY",t.USERID);const De=await le.post("/holidays/import-file",be,{headers:{"Content-Type":"multipart/form-data"}});De.data.success&&(alert(`Import completed: ${De.data.data.imported} imported, ${De.data.data.skipped} skipped`),j(!1),N(null),M())}catch(be){console.error("Error importing file:",be),alert("Failed to import file")}finally{d(!1)}};y.useEffect(()=>{M()},[i]);const Q=()=>e.jsxs("div",{className:"bg-white shadow rounded-lg mb-8",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("div",{className:"flex justify-center items-center mb-4",children:e.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:[W[O]," ",F]})}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Month:"}),e.jsx("select",{value:O,onChange:be=>C(Number(be.target.value)),className:"border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:W.map((be,De)=>e.jsx("option",{value:De,children:be},De))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Year:"}),e.jsx("select",{value:F,onChange:be=>U(Number(be.target.value)),className:"border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:_().map(be=>e.jsx("option",{value:be,children:be},be))})]}),e.jsx("button",{onClick:()=>{const be=new Date;C(be.getMonth()),U(be.getFullYear())},className:"px-3 py-1 border border-gray-300 rounded-md text-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Go to Today"})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(be=>e.jsx("div",{className:"text-center text-sm font-medium text-gray-500 py-2",children:be},be))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:J.map((be,De)=>{if(!be)return e.jsx("div",{className:"p-2"},De);const ze=P(be)===P(new Date),Ee=B(be),Z=Ee.length>0,ee=new Date;ee.setHours(0,0,0,0);const _e=be<ee,Qe=H(be),je=!Qe;return console.log(" [CALENDAR DEBUG] Date:",be.toDateString(),{hasHolidays:Z,dateHasExistingHolidays:Qe,isPastDate:_e,isClickable:je,holidaysOnDate:Ee.map(Ke=>({name:Ke.HOLIDAYNAME,recurring:Ke.ISRECURRING}))}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{console.log(" [CALENDAR CLICK] Date clicked:",be.toDateString(),{isClickable:je}),je?se(be):console.log(" [CALENDAR CLICK] Date not clickable - has existing holidays")},disabled:!je,onMouseEnter:Ke=>{if(Z){const rt=document.getElementById(`tooltip-${De}`);if(rt){const gt=Ke.target.getBoundingClientRect(),mt=rt.getBoundingClientRect();rt.style.position="fixed",rt.style.left=`${gt.left+gt.width/2-mt.width/2}px`,rt.style.top=`${gt.top-mt.height-10}px`,rt.style.display="block",rt.style.zIndex="9999"}}},onMouseLeave:()=>{const Ke=document.getElementById(`tooltip-${De}`);Ke&&(Ke.style.display="none")},className:`
                    relative p-2 text-sm rounded-lg transition-all duration-200 min-h-[60px] flex flex-col items-center justify-start w-full
                    ${je?ze?"bg-blue-100 text-blue-600 font-semibold hover:bg-blue-200 cursor-pointer":Z?"bg-red-50 text-red-700 hover:bg-red-100 border border-red-200 cursor-pointer":_e?"bg-gray-100 text-gray-600 hover:bg-gray-200 cursor-pointer":"hover:bg-gray-100 text-gray-700 hover:bg-blue-50 cursor-pointer":"bg-gray-200 text-gray-400 cursor-not-allowed opacity-60"}
                  `,title:Z?Ee.map(Ke=>w(Ke)).join(", "):je?"Click to add holiday":"Cannot add holiday (already exists)",children:[e.jsx("span",{className:`font-medium ${_e?"text-gray-500":""}`,children:be.getDate()}),Z&&e.jsxs("div",{className:"mt-1 space-y-1",children:[Ee.slice(0,2).map((Ke,rt)=>e.jsx("div",{className:`px-1 py-0.5 rounded text-xs truncate ${Ke.HOLIDAYCATEGORY==="NATIONAL"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,title:w(Ke),children:w(Ke)},`${Ke.HOLIDAYUID}-${rt}`)),Ee.length>2&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",Ee.length-2," more"]})]}),Qe&&!Z&&e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"text-xs text-gray-500",children:"Holiday exists"})})]}),Z&&e.jsx("div",{id:`tooltip-${De}`,className:"absolute bg-gray-800 text-white text-xs rounded py-1 px-2 z-50 hidden",style:{display:"none"},children:Ee.map((Ke,rt)=>e.jsxs("div",{children:[w(Ke),Ke.ISRECURRING&&" (Recurring)"]},rt))})]},De)})})]})]}),ne=()=>e.jsxs("div",{className:"flex items-center justify-between px-6 py-3 bg-gray-50 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm text-gray-700",children:"Show:"}),e.jsxs("select",{value:E,onChange:be=>R(Number(be.target.value)),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{className:"text-sm text-gray-700",children:"entries"})]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",ce," to ",Ae," of ",X.length," entries"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>b(be=>Math.max(be-1,1)),disabled:g===1,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100",children:"Previous"}),e.jsx("div",{className:"flex space-x-1",children:Array.from({length:Math.min(5,oe)},(be,De)=>{let ze;return oe<=5||g<=3?ze=De+1:g>=oe-2?ze=oe-4+De:ze=g-2+De,e.jsx("button",{onClick:()=>b(ze),className:`px-3 py-1 text-sm border rounded ${g===ze?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:ze},ze)})}),e.jsx("button",{onClick:()=>b(be=>Math.min(be+1,oe)),disabled:g===oe,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100",children:"Next"})]})]}),he=()=>e.jsxs("div",{className:"bg-white shadow rounded-lg mb-8",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filter Holidays"})}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),e.jsxs("select",{value:S,onChange:be=>k(Number(be.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"ALL",children:"All Years"}),_().map(be=>e.jsx("option",{value:be,children:be},be))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recurring Status"}),e.jsxs("select",{value:L,onChange:be=>A(be.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"ALL",children:"All Holidays"}),e.jsx("option",{value:"TRUE",children:"Recurring Only"}),e.jsx("option",{value:"FALSE",children:"Non-Recurring Only"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{k(new Date().getFullYear()),A("ALL"),b(1)},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Reset Filters"})})]})})]}),Me=()=>e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Holidays (",X.length," total)"]})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recurring"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:pe.map(be=>{const De=new Date(be.HOLIDAYDATE),ze=be.ISRECURRING?`${De.getMonth()+1}/${De.getDate()}`:De.toLocaleDateString();return e.jsxs("tr",{className:`hover:bg-gray-50 ${be.ISRECURRING?"text-green-600":"text-gray-900"}`,children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[ze,be.ISRECURRING&&e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(recurring)"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:be.HOLIDAYNAME}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${be.HOLIDAYCATEGORY==="NATIONAL"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:be.HOLIDAYCATEGORY})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:be.HOLIDAYTYPE||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:be.HOLIDAYDESCRIPTION||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:be.ISRECURRING?e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Yes"}):e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:"No"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>Ie(be),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Edit"}),e.jsx("button",{onClick:()=>ye(be.HOLIDAYUID),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},be.HOLIDAYUID)})})]}),pe.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No holidays found matching the current filters."})]}),X.length>0&&ne()]});return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Holiday Management"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage holidays and special non-working days"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>p(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200",children:"Add Holiday"}),e.jsx("button",{onClick:()=>j(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors duration-200",children:"Import from File"})]})]})}),Q(),he(),Me(),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:m?"Edit Holiday":"Add Holiday"}),l&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:l}),e.jsxs("form",{onSubmit:Be,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Holiday Date *"}),e.jsx("input",{type:"date",value:D.HOLIDAYDATE,onChange:be=>{I(De=>({...De,HOLIDAYDATE:be.target.value})),o("")},required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Holiday Name *"}),e.jsx("input",{type:"text",value:D.HOLIDAYNAME,onChange:be=>I(De=>({...De,HOLIDAYNAME:be.target.value})),required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter holiday name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Holiday Category *"}),e.jsxs("select",{value:D.HOLIDAYCATEGORY,onChange:be=>I(De=>({...De,HOLIDAYCATEGORY:be.target.value})),required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"NATIONAL",children:"NATIONAL"}),e.jsx("option",{value:"LOCAL",children:"LOCAL"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Holiday Type *"}),e.jsxs("select",{value:D.HOLIDAYTYPE,onChange:be=>I(De=>({...De,HOLIDAYTYPE:be.target.value})),required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select holiday type"}),V.map(be=>e.jsx("option",{value:be,children:be},be))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:D.HOLIDAYDESCRIPTION,onChange:be=>I(De=>({...De,HOLIDAYDESCRIPTION:be.target.value})),rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter holiday description"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isRecurring",checked:D.ISRECURRING,onChange:be=>{I(De=>({...De,ISRECURRING:be.target.checked})),o("")},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isRecurring",className:"ml-2 block text-sm text-gray-900",children:"Recurring Holiday"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:m?"Update Holiday":"Add Holiday"}),e.jsx("button",{type:"button",onClick:()=>{p(!1),we()},className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"})]})]})]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Import Holidays from File"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select File (CSV, Excel, TXT)"}),e.jsx("input",{type:"file",accept:".csv,.xlsx,.xls,.txt",onChange:be=>N(be.target.files[0]),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{className:"font-medium mb-2",children:"Expected file format:"}),e.jsx("p",{children:"CSV/Excel: HOLIDAYDATE, HOLIDAYNAME, HOLIDAYCATEGORY, HOLIDAYTYPE, HOLIDAYDESCRIPTION, ISRECURRING"}),e.jsx("p",{children:"TXT: DATE|NAME|CATEGORY|TYPE|DESCRIPTION|RECURRING"}),e.jsx("p",{className:"mt-2",children:"Categories: NATIONAL, LOCAL"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:ve,disabled:!v||f,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:f?"Importing...":"Import"}),e.jsx("button",{onClick:()=>{j(!1),N(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"})]})]})]})}),l&&e.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded z-50",children:[l,e.jsx("button",{onClick:()=>o(""),className:"ml-4 text-red-500 hover:text-red-700",children:""})]})]})},_S=()=>{const{user:t}=Qt(),[s,r]=y.useState([]),[n,a]=y.useState([]),[l,o]=y.useState([]),[i,c]=y.useState([]),[h,p]=y.useState(!1),[m,u]=y.useState(!1),[x,j]=y.useState(1),[v,N]=y.useState(10),[f,d]=y.useState(0),[g,b]=y.useState(0),E=()=>new Date().toISOString().split("T")[0],R=()=>(new Date().getMonth()+1).toString(),[S,k]=y.useState({employee:"all",department:"all",leaveType:"all",dateFilterType:"month",dateFrom:E(),dateTo:E(),month:R(),year:new Date().getFullYear()}),L=async()=>{p(!0);try{const w=new URLSearchParams;if(w.append("page",1),w.append("pageSize",1e4),S.employee!=="all"&&(w.append("filterType","employee"),w.append("searchValue",S.employee)),S.department,S.leaveType!=="all"&&w.append("leaveType",S.leaveType),S.dateFilterType==="range")S.dateFrom&&w.append("dateFrom",S.dateFrom),S.dateTo&&w.append("dateTo",S.dateTo);else if(S.dateFilterType==="month"){const J=new Date(S.year,S.month-1,1),X=new Date(S.year,S.month,0);w.append("dateFrom",J.toISOString().split("T")[0]),w.append("dateTo",X.toISOString().split("T")[0])}const T=await le.get(`/leave/records?${w.toString()}`);console.log("Leave records response:",T.data);let H=T.data.data||[];const K=await Promise.all(H.map(async J=>{try{const X=await le.get("/leave/records",{params:{page:1,pageSize:1e4,leaveRefNo:J.LEAVEREFNO}});if(X.data.success&&X.data.data.length>0){const pe=[];X.data.data.forEach(ce=>{ce.leaveDates&&ce.leaveDates.length>0&&pe.push(...ce.leaveDates)});const oe=pe.filter((ce,Ae,Be)=>Ae===Be.findIndex(Ie=>Ie.LEAVEDATE===ce.LEAVEDATE));J.leaveDates=oe}}catch(X){console.error(`Error fetching dates for ${J.LEAVEREFNO}:`,X)}return J}));console.log("Processing leave records:",K),K.forEach((J,X)=>{console.log(`Record ${X+1}:`,{LEAVEREFNO:J.LEAVEREFNO,EmployeeName:J.EmployeeName,leaveDatesCount:J.leaveDates?J.leaveDates.length:0,leaveDates:J.leaveDates})}),r(K),d(T.data.totalRecords||0),b(T.data.totalPages||0)}catch(w){console.error("Error fetching leave records:",w)}finally{p(!1)}},A=async()=>{try{const w=new URLSearchParams;if(w.append("page",1),w.append("pageSize",1e4),S.employee!=="all"&&(w.append("filterType","employee"),w.append("searchValue",S.employee)),S.department,S.leaveType!=="all"&&w.append("leaveType",S.leaveType),S.dateFilterType==="range")S.dateFrom&&w.append("dateFrom",S.dateFrom),S.dateTo&&w.append("dateTo",S.dateTo);else if(S.dateFilterType==="month"){const H=new Date(S.year,S.month-1,1),K=new Date(S.year,S.month,0);w.append("dateFrom",H.toISOString().split("T")[0]),w.append("dateTo",K.toISOString().split("T")[0])}const T=await le.get(`/leave/records?${w.toString()}`);return console.log("All leave records for print response:",T.data),T.data.data||[]}catch(w){return console.error("Error fetching all leave records for print:",w),[]}},D=async()=>{try{const w=await le.get("/employees");a(w.data||[])}catch(w){console.error("Error fetching employees:",w),a([])}},I=async()=>{try{const w=await le.get("/departments");o(w.data.data||[])}catch(w){console.error("Error fetching departments:",w),o([])}},O=async()=>{try{const w=await le.get("/leave/classes");console.log("Leave classes response:",w.data);const T=w.data.data||w.data||[];console.log("Setting leave classes:",T),c(Array.isArray(T)?T:[])}catch(w){console.error("Error fetching leave classes:",w),c([])}};y.useEffect(()=>{L()},[S,x,v]),y.useEffect(()=>{D(),I(),O()},[]);const C=(w,T)=>{k(H=>({...H,[w]:T})),j(1)},F=()=>{k({employee:"all",department:"all",leaveType:"all",dateFilterType:"month",dateFrom:E(),dateTo:E(),month:R(),year:new Date().getFullYear()}),j(1)},U=w=>{j(w)},Y=w=>{N(w),j(1)},G=async()=>{u(!0);const w=await A();console.log("Print function - allRecords:",w);const T=await Promise.all(w.map(async pe=>{try{const oe=await le.get("/leave/records",{params:{page:1,pageSize:1e4,leaveRefNo:pe.LEAVEREFNO}});if(oe.data.success&&oe.data.data.length>0){const ce=[];oe.data.data.forEach(Be=>{Be.leaveDates&&Be.leaveDates.length>0&&ce.push(...Be.leaveDates)});const Ae=ce.filter((Be,Ie,ye)=>Ie===ye.findIndex(se=>se.LEAVEDATE===Be.LEAVEDATE));pe.leaveDates=Ae}}catch(oe){console.error(`Error fetching dates for ${pe.LEAVEREFNO}:`,oe)}return pe}));console.log("Print function - enrichedRecords:",T);const H=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),K=`
      @media print {
        /* Hide everything except our print content */
        body * {
          visibility: hidden;
        }
        
        .print-content, .print-content * {
          visibility: visible;
        }
        
        .print-content {
          position: absolute;
          left: 0;
          top: 0;
          width: 100%;
        }
        
        /* Print-specific styles */
        body { 
          font-size: 12px; 
          margin: 0;
          padding: 0;
        }
        .print-header {
          display: block !important;
          text-align: center;
          margin-bottom: 20px;
          border-bottom: 2px solid #333;
          padding-bottom: 10px;
        }
        .print-logo {
          height: 60px;
          margin-bottom: 10px;
        }
        .print-title {
          font-size: 18px;
          font-weight: bold;
          margin-bottom: 5px;
        }
        .print-subtitle {
          font-size: 14px;
          color: #666;
        }
        .print-table {
          width: 100%;
          border-collapse: collapse;
          margin-bottom: 20px;
        }
        .print-table th, 
        .print-table td { 
          border: 1px solid #333; 
          padding: 6px; 
          text-align: left; 
          font-size: 11px;
        }
        .print-table th { 
          background-color: #f0f0f0; 
          font-weight: bold; 
        }
        .print-inclusive-dates {
          white-space: pre-line;
          font-size: 10px;
          line-height: 1.2;
        }
        .print-footer {
          display: block !important;
          text-align: center;
          margin-top: 20px;
          font-size: 10px;
          color: #666;
          border-top: 1px solid #ccc;
          padding-top: 10px;
        }
        @page {
          margin: 0.5in;
        }
      }
    `,J=document.createElement("style");J.textContent=K,document.head.appendChild(J);const X=document.createElement("div");X.className="print-content",X.innerHTML=`
      <div class="print-header">
        <img src="${xi}" alt="Logo" class="print-logo" />
        <div class="print-title">Human Resource Management Office</div>
        <div class="print-subtitle">Leave Records as of ${H}</div>
      </div>
      
      <table class="print-table">
        <thead>
          <tr>
            <th>Leave Ref #</th>
            <th>Employee</th>
            <th>Leave Type</th>
            <th>Inclusive Date(s)</th>
            <th>Days</th>
            <th>Filed Date</th>
            <th>Status</th>
            <th>Remarks</th>
          </tr>
        </thead>
        <tbody>
          ${T.map(pe=>{console.log("Printing record:",pe.LEAVEREFNO,"with dates:",pe.leaveDates);const oe=()=>{if(pe.leaveDates&&pe.leaveDates.length>0){console.log("Processing dates for",pe.LEAVEREFNO,":",pe.leaveDates);const ye=pe.leaveDates.map(se=>new Date(se.LEAVEDATE)).sort((se,we)=>se-we).map(se=>{const we=String(se.getDate()).padStart(2,"0"),ve=se.toLocaleDateString("en-US",{month:"short"}),Q=String(se.getFullYear()).slice(-2);return`${we}-${ve}-${Q}`}).join(`
`);return console.log("Formatted dates for",pe.LEAVEREFNO,":",ye),ye}else return console.log("No dates found for",pe.LEAVEREFNO),"N/A"},ce=()=>pe.leaveDates&&pe.leaveDates.length>0?pe.leaveDates.reduce((Be,Ie)=>Be+(parseFloat(Ie.LEAVECREDIT)||1),0):pe.LEAVEDAYS||"1",Ae=Be=>({PENDING:"Pending",APPROVED:"Approved",REJECTED:"Rejected",CANCELLED:"Cancelled"})[Be]||Be||"Unknown";return`
              <tr>
                <td>${pe.LEAVEREFNO||"N/A"}</td>
                <td>${pe.EmployeeName||"Unknown Employee"}</td>
                <td>${pe.LeaveName||"Unknown Leave Type"}</td>
                <td class="print-inclusive-dates">${oe()}</td>
                <td>${ce()}</td>
                <td>${V(pe.LEAVEFILEDDATE)}</td>
                <td>${Ae(pe.LEAVESTATUS)}</td>
                <td>${pe.LEAVEREMARKS||"N/A"}</td>
              </tr>
            `}).join("")}
        </tbody>
      </table>
      
      <div class="print-footer">
        System Generated (${H}) By: ${(t==null?void 0:t.USERID)||"Unknown"}
      </div>
    `,document.body.appendChild(X),window.print(),setTimeout(()=>{document.body.removeChild(X),document.head.removeChild(J),u(!1)},1e3)},V=w=>w?new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A",W=w=>{const T=n.find(H=>H.USERID===w);return T?T.NAME:`User ID: ${w}`},_=w=>{if(!Array.isArray(i))return"N/A";const T=i.find(H=>H.LeaveId===w);return T?T.LeaveName:"N/A"},M=w=>{const H={PENDING:{color:"bg-yellow-100 text-yellow-800",text:"Pending"},APPROVED:{color:"bg-green-100 text-green-800",text:"Approved"},REJECTED:{color:"bg-red-100 text-red-800",text:"Rejected"},CANCELLED:{color:"bg-gray-100 text-gray-800",text:"Cancelled"}}[w]||{color:"bg-gray-100 text-gray-800",text:w||"Unknown"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${H.color}`,children:H.text})},P=()=>{const w=[];if(g<=5)for(let H=1;H<=g;H++)w.push(H);else{const H=Math.max(1,x-2),K=Math.min(g,H+5-1);for(let J=H;J<=K;J++)w.push(J)}return w},$=y.useMemo(()=>{const w=new Date,T=w.getFullYear(),H=w.getMonth()+1,K=S.year,J=[{value:"1",label:"January"},{value:"2",label:"February"},{value:"3",label:"March"},{value:"4",label:"April"},{value:"5",label:"May"},{value:"6",label:"June"},{value:"7",label:"July"},{value:"8",label:"August"},{value:"9",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}];return K===T?J.slice(0,H):J},[S.year]),B=y.useMemo(()=>{const w=new Date().getFullYear(),T=[];for(let H=w-2;H<=w;H++)T.push(H);return T},[]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"print-header no-print",style:{display:"none"},children:[e.jsx("img",{src:xi,alt:"Logo",className:"print-logo"}),e.jsx("div",{className:"print-title",children:"Human Resource Management Office"}),e.jsxs("div",{className:"print-subtitle",children:["Leave Records as of ",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Leave Records Report"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Generate and print leave records with filters"})]}),e.jsxs("button",{onClick:G,disabled:m||f===0,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),e.jsx("span",{children:m?"Printing...":"Print List"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 no-print",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"}),e.jsx("button",{onClick:F,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",children:"Clear Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee"}),e.jsxs("select",{value:S.employee,onChange:w=>C("employee",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Employees"}),n.map(w=>e.jsx("option",{value:w.NAME,children:w.NAME},w.USERID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsxs("select",{value:S.department,onChange:w=>C("department",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Departments"}),l.map(w=>e.jsx("option",{value:w.DEPTID,children:w.DEPTNAME},w.DEPTID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leave Type"}),e.jsxs("select",{value:S.leaveType,onChange:w=>C("leaveType",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Leave Types"}),Array.isArray(i)&&i.length>0?i.map(w=>e.jsx("option",{value:w.LeaveId||w.LEAVEID,children:w.LeaveName||w.LEAVENAME},w.LeaveId||w.LEAVEID)):e.jsx("option",{value:"",disabled:!0,children:"Loading leave types..."})]})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Filter Type"}),e.jsxs("select",{value:S.dateFilterType,onChange:w=>C("dateFilterType",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"range",children:"Date Range"}),e.jsx("option",{value:"month",children:"By Month"})]})]}),S.dateFilterType==="range"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date From"}),e.jsx("input",{type:"date",value:S.dateFrom,onChange:w=>C("dateFrom",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date To"}),e.jsx("input",{type:"date",value:S.dateTo,onChange:w=>C("dateTo",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("div",{})," "]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),e.jsxs("select",{value:S.month,onChange:w=>C("month",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Months"}),$.map(w=>e.jsx("option",{value:w.value,children:w.label},w.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),e.jsx("select",{value:S.year,onChange:w=>C("year",parseInt(w.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:B.map(w=>e.jsx("option",{value:w,children:w},w))})]}),e.jsx("div",{})," "]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 no-print",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Leave Records (",f," records)"]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Show:"}),e.jsxs("select",{value:v,onChange:w=>Y(parseInt(w.target.value)),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{className:"text-sm text-gray-700",children:"per page"})]}),h&&e.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[e.jsxs("svg",{className:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-sm",children:"Loading..."})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 print-table",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leave Ref #"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leave Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inclusive Date(s)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Filed Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remarks"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(w=>{const T=()=>w.leaveDates&&w.leaveDates.length>0?w.leaveDates.map(X=>new Date(X.LEAVEDATE)).sort((X,pe)=>X-pe).map(X=>{const pe=String(X.getDate()).padStart(2,"0"),oe=X.toLocaleDateString("en-US",{month:"short"}),ce=String(X.getFullYear()).slice(-2);return`${pe}-${oe}-${ce}`}).join(`
`):"N/A",H=()=>w.leaveDates&&w.leaveDates.length>0?w.leaveDates.reduce((K,J)=>K+(parseFloat(J.LEAVECREDIT)||1),0):w.LEAVEDAYS||"1";return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:w.LEAVEREFNO}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.EmployeeName||W(w.USERID)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.LeaveName||_(w.LEAVEID)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.jsx("div",{className:"max-w-xs",children:e.jsx("div",{className:"text-sm font-medium whitespace-pre-line",children:T()})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:H()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:V(w.LEAVEFILEDDATE)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M(w.LEAVESTATUS)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.LEAVEREMARKS||"N/A"})]},w.LEAVEUID)})})]})}),g>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 no-print",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>U(x-1),disabled:x===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>U(x+1),disabled:x===g,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(x-1)*v+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(x*v,f)})," ","of ",e.jsx("span",{className:"font-medium",children:f})," results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>U(x-1),disabled:x===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),P().map(w=>e.jsx("button",{onClick:()=>U(w),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${w===x?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:w},w)),e.jsxs("button",{onClick:()=>U(x+1),disabled:x===g,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})]}),e.jsxs("div",{className:"print-footer no-print",style:{display:"none"},children:["System Generated (",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),") By: ",(t==null?void 0:t.USERID)||"Unknown"]})]})},CS=()=>{const{user:t}=Qt(),[s,r]=y.useState([]),[n,a]=y.useState([]),[l,o]=y.useState([]),[i,c]=y.useState(!1),[h,p]=y.useState(!1),[m,u]=y.useState(1),[x,j]=y.useState(10),[v,N]=y.useState(0),[f,d]=y.useState(0),g=()=>new Date().toISOString().split("T")[0],b=()=>(new Date().getMonth()+1).toString(),[E,R]=y.useState({employee:"all",department:"all",dateFilterType:"month",dateFrom:g(),dateTo:g(),month:b(),year:new Date().getFullYear()}),S=async()=>{var _,M;c(!0);try{const P=new URLSearchParams;if(P.append("page",m),P.append("pageSize",x),E.employee!=="all"&&P.append("employeeSearch",E.employee),E.department,E.destination&&E.destination!=="all"&&P.append("destinationSearch",E.destination),E.dateFilterType==="range")E.dateFrom&&P.append("dateFrom",E.dateFrom),E.dateTo&&P.append("dateTo",E.dateTo);else if(E.dateFilterType==="month"){const B=new Date(E.year,E.month-1,1),w=new Date(E.year,E.month,0);P.append("dateFrom",B.toISOString().split("T")[0]),P.append("dateTo",w.toISOString().split("T")[0])}console.log("Current filters:",E),console.log("API params being sent:",P.toString());const $=await le.get(`/locator?${P.toString()}`);console.log("Locator response:",$.data),r($.data.data||[]),N(((_=$.data.pagination)==null?void 0:_.totalRecords)||0),d(((M=$.data.pagination)==null?void 0:M.totalPages)||0)}catch(P){console.error("Error fetching locator entries:",P)}finally{c(!1)}},k=async()=>{try{const _=new URLSearchParams;if(_.append("page",1),_.append("pageSize",1e4),console.log("Print function filters:",E),E.employee!=="all"&&_.append("employeeSearch",E.employee),E.department,E.destination&&E.destination!=="all"&&_.append("destinationSearch",E.destination),E.dateFilterType==="range")E.dateFrom&&_.append("dateFrom",E.dateFrom),E.dateTo&&_.append("dateTo",E.dateTo);else if(E.dateFilterType==="month"){const P=new Date(E.year,E.month-1,1),$=new Date(E.year,E.month,0);console.log("Print date calculation:",{year:E.year,month:E.month,startDate:P.toISOString().split("T")[0],endDate:$.toISOString().split("T")[0]}),_.append("dateFrom",P.toISOString().split("T")[0]),_.append("dateTo",$.toISOString().split("T")[0])}console.log("Print API params being sent:",_.toString());const M=await le.get(`/locator?${_.toString()}`);return console.log("All locator entries for print:",M.data),M.data.data||[]}catch(_){return console.error("Error fetching all locator entries for print:",_),[]}},L=async()=>{try{const _=await le.get("/employees");a(_.data||[])}catch(_){console.error("Error fetching employees:",_),a([])}},A=async()=>{try{const _=await le.get("/departments");o(_.data.data||[])}catch(_){console.error("Error fetching departments:",_),o([])}};y.useEffect(()=>{S()},[E,m,x]),y.useEffect(()=>{L(),A()},[]);const D=(_,M)=>{R(P=>({...P,[_]:M})),u(1)},I=()=>{R({employee:"all",department:"all",dateFilterType:"month",dateFrom:g(),dateTo:g(),month:b(),year:new Date().getFullYear()}),u(1)},O=_=>{u(_)},C=_=>{j(_),u(1)},F=async()=>{p(!0);try{const _=await k();if(console.log("Print data:",_),console.log("Print data length:",_.length),!_||_.length===0){alert("No data to print"),p(!1);return}const M=window.open("","_blank","width=800,height=600"),P=`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Locator Entries Report</title>
            <style>
              body { 
                font-family: Arial, sans-serif;
                font-size: 12px; 
                margin: 0;
                padding: 20px;
              }
              .print-header {
                text-align: center;
                margin-bottom: 20px;
                border-bottom: 2px solid #333;
                padding-bottom: 10px;
              }
              .print-logo {
                height: 60px;
                margin-bottom: 10px;
              }
              .print-title {
                font-size: 18px;
                font-weight: bold;
                margin-bottom: 5px;
              }
              .print-subtitle {
                font-size: 14px;
                color: #666;
              }
              .print-table {
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 20px;
              }
              .print-table th, 
              .print-table td { 
                border: 1px solid #333; 
                padding: 6px; 
                text-align: left; 
                font-size: 11px;
              }
              .print-table th { 
                background-color: #f0f0f0; 
                font-weight: bold; 
              }
              .print-footer {
                text-align: center;
                margin-top: 20px;
                font-size: 10px;
                color: #666;
                border-top: 1px solid #ccc;
                padding-top: 10px;
              }
              @page {
                margin: 0.5in;
              }
            </style>
          </head>
          <body>
            <div class="print-header">
              <div class="print-title">Human Resource Management Office</div>
              <div class="print-subtitle">Locator Entries as of ${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}</div>
            </div>
            
            <table class="print-table">
              <thead>
                <tr>
                  <th>Locator Date</th>
                  <th>Locator No</th>
                  <th>Employee</th>
                  <th>Destination</th>
                  <th>Time Departed</th>
                  <th>Time Arrived</th>
                  <th>Purpose</th>
                </tr>
              </thead>
              <tbody>
                ${_.map($=>`
                  <tr>
                    <td>${U($.LOCDATE||$.LOCATORDATE)}</td>
                    <td>${$.LOCNO||$.LOCATORID||"N/A"}</td>
                    <td>${$.NAME||Y($.LOCUSERID||$.USERID)}</td>
                    <td>${$.LOCDESTINATION||$.LOCATION||"N/A"}</td>
                    <td>${U($.LOCTIMEDEPARTURE)||"N/A"}</td>
                    <td>${U($.LOCTIMEARRIVAL)||"N/A"}</td>
                    <td>${$.LOCPURPOSE||"N/A"}</td>
                  </tr>
                `).join("")}
              </tbody>
            </table>
            
            <div class="print-footer">
              System Generated (${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}) By: ${(t==null?void 0:t.USERID)||"Unknown"}
            </div>
          </body>
        </html>
      `;M.document.write(P),M.document.close(),M.onload=()=>{M.print(),M.close(),p(!1)}}catch(_){console.error("Error during print:",_),p(!1)}},U=_=>_?new Date(_).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A",Y=_=>{const M=n.find(P=>P.USERID===_);return M?M.NAME:`User ID: ${_}`},G=()=>{const _=[];if(f<=5)for(let P=1;P<=f;P++)_.push(P);else{const P=Math.max(1,m-2),$=Math.min(f,P+5-1);for(let B=P;B<=$;B++)_.push(B)}return _},V=y.useMemo(()=>{const _=new Date,M=_.getFullYear(),P=_.getMonth()+1,$=E.year,B=[{value:"1",label:"January"},{value:"2",label:"February"},{value:"3",label:"March"},{value:"4",label:"April"},{value:"5",label:"May"},{value:"6",label:"June"},{value:"7",label:"July"},{value:"8",label:"August"},{value:"9",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}];return $===M?B.slice(0,P):B},[E.year]),W=y.useMemo(()=>{const _=new Date().getFullYear(),M=[];for(let P=_-2;P<=_;P++)M.push(P);return M},[]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"print-header",style:{display:"none"},children:[e.jsx("img",{src:xi,alt:"Logo",className:"print-logo"}),e.jsx("div",{className:"print-title",children:"Human Resource Management Office"}),e.jsxs("div",{className:"print-subtitle",children:["Locator Entries as of ",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Locator Entries Report"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Generate and print locator entries with filters"})]}),e.jsxs("button",{onClick:F,disabled:h||v===0,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),e.jsx("span",{children:h?"Printing...":"Print List"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 no-print",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"}),e.jsx("button",{onClick:I,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",children:"Clear Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee"}),e.jsxs("select",{value:E.employee,onChange:_=>D("employee",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Employees"}),n.map(_=>e.jsx("option",{value:_.USERID,children:_.NAME},_.USERID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsxs("select",{value:E.department,onChange:_=>D("department",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Departments"}),l.map(_=>e.jsx("option",{value:_.DEPTID,children:_.DEPTNAME},_.DEPTID))]})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Filter Type"}),e.jsxs("select",{value:E.dateFilterType,onChange:_=>D("dateFilterType",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"range",children:"Date Range"}),e.jsx("option",{value:"month",children:"By Month"})]})]}),E.dateFilterType==="range"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date From"}),e.jsx("input",{type:"date",value:E.dateFrom,onChange:_=>D("dateFrom",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date To"}),e.jsx("input",{type:"date",value:E.dateTo,onChange:_=>D("dateTo",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("div",{})," "]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),e.jsxs("select",{value:E.month,onChange:_=>D("month",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Months"}),V.map(_=>e.jsx("option",{value:_.value,children:_.label},_.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),e.jsx("select",{value:E.year,onChange:_=>D("year",parseInt(_.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:W.map(_=>e.jsx("option",{value:_,children:_},_))})]}),e.jsx("div",{})," "]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 no-print",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Locator Entries (",v," entries)"]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Show:"}),e.jsxs("select",{value:x,onChange:_=>C(parseInt(_.target.value)),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{className:"text-sm text-gray-700",children:"per page"})]}),i&&e.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[e.jsxs("svg",{className:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-sm",children:"Loading..."})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 print-table",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Locator Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Locator No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Destination"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time Departed"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time Arrived"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Purpose"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((_,M)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:U(_.LOCDATE||_.LOCATORDATE)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:_.LOCNO||_.LOCATORID||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_.NAME||Y(_.LOCUSERID||_.USERID)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_.LOCDESTINATION||_.LOCATION||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:U(_.LOCTIMEDEPARTURE)||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:U(_.LOCTIMEARRIVAL)||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_.LOCPURPOSE||"N/A"})]},_.LOCATORUID||_.LOCATORID||M))})]})}),f>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 no-print",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>O(m-1),disabled:m===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>O(m+1),disabled:m===f,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(m-1)*x+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(m*x,v)})," ","of ",e.jsx("span",{className:"font-medium",children:v})," results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>O(m-1),disabled:m===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),G().map(_=>e.jsx("button",{onClick:()=>O(_),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${_===m?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:_},_)),e.jsxs("button",{onClick:()=>O(m+1),disabled:m===f,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})]}),e.jsxs("div",{className:"print-footer",style:{display:"none"},children:["System Generated (",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),") By: ",(t==null?void 0:t.USERID)||"Unknown"]})]})},kS=()=>{var V,W;const[t,s]=y.useState([]),[r,n]=y.useState([]),[a,l]=y.useState(!1),[o,i]=y.useState(null),[c,h]=y.useState({employeeId:"",status:"",year:new Date().getFullYear(),month:new Date().getMonth()+1,searchTerm:""}),[p,m]=y.useState(1),[u,x]=y.useState(20),[j,v]=y.useState(0),[N,f]=y.useState([]),[d,g]=y.useState(!1),b=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],E=new Date().getFullYear(),R=Array.from({length:6},(_,M)=>E-M),S=async()=>{try{l(!0),i(null);const _=`${c.year}-${String(c.month).padStart(2,"0")}-01`,M=new Date(c.year,c.month,0).toISOString().slice(0,10),P={page:p,limit:u,employeeId:c.employeeId,status:c.status,dateFrom:_,dateTo:M,searchTerm:c.searchTerm};Object.keys(P).forEach(B=>{(P[B]===""||P[B]===null||P[B]===void 0)&&delete P[B]});const $=await le.get("/travel-orders",{params:P});$.data.success?(s($.data.data||[]),v($.data.total||0)):i($.data.message||"Failed to fetch travel orders")}catch(_){console.error("Error fetching travel orders:",_),i("Failed to fetch travel orders. Please try again.")}finally{l(!1)}},k=async()=>{try{const _=await le.get("/employees");n(_.data||[])}catch(_){console.error("Error fetching employees:",_)}};y.useEffect(()=>{S()},[p,u,c]),y.useEffect(()=>{k()},[]);const L=(_,M)=>{h(P=>({...P,[_]:M})),m(1)},A=()=>{m(1),S()},D=()=>{h({employeeId:"",status:"",year:new Date().getFullYear(),month:new Date().getMonth()+1,searchTerm:""}),m(1)},I=_=>{f(_?t.map(M=>M.TRAVELID):[])},O=(_,M)=>{f(M?P=>[...P,_]:P=>P.filter($=>$!==_))},C=async()=>{if(N.length===0){alert("Please select at least one travel order to print.");return}try{g(!0);const _=window.open("","_blank"),M=t.filter($=>N.includes($.TRAVELID)),P=F(M);_.document.write(P),_.document.close(),_.focus(),_.print(),_.close()}catch(_){console.error("Error printing travel orders:",_),alert("Error printing travel orders. Please try again.")}finally{g(!1)}},F=_=>{var $;const M=new Date().toLocaleDateString(),P=(($=b.find(B=>B.value===c.month))==null?void 0:$.label)||"Unknown";return`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Travel Orders Report - ${P} ${c.year}</title>
        <style>
          body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            font-size: 12px;
          }
          .header { 
            text-align: center; 
            margin-bottom: 30px; 
            border-bottom: 2px solid #333;
            padding-bottom: 15px;
          }
          .header h1 { 
            margin: 0; 
            color: #333; 
            font-size: 24px;
          }
          .header p { 
            margin: 5px 0; 
            color: #666; 
            font-size: 14px;
          }
          .table-container {
            width: 100%;
            overflow-x: auto;
          }
          table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 11px;
          }
          th, td {
            border: 1px solid #333;
            padding: 8px;
            text-align: left;
            vertical-align: top;
          }
          th {
            background-color: #f5f5f5;
            font-weight: bold;
            text-align: center;
            font-size: 12px;
          }
          tr:nth-child(even) {
            background-color: #f9f9f9;
          }
          .travel-no {
            font-weight: bold;
            color: #0066cc;
          }
          .status {
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: bold;
          }
          .status-pending {
            background-color: #fff3cd;
            color: #856404;
          }
          .status-approved {
            background-color: #d4edda;
            color: #155724;
          }
          .status-rejected {
            background-color: #f8d7da;
            color: #721c24;
          }
          .status-completed {
            background-color: #cce5ff;
            color: #004085;
          }
          .employee-info {
            line-height: 1.3;
          }
          .employee-name {
            font-weight: bold;
          }
          .employee-id {
            color: #666;
            font-size: 10px;
          }
          .purpose, .destination {
            max-width: 200px;
            word-wrap: break-word;
          }
          @media print {
            body { margin: 0; }
            .table-container { page-break-inside: auto; }
            tr { page-break-inside: avoid; page-break-after: auto; }
            thead { display: table-header-group; }
            tfoot { display: table-footer-group; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>TRAVEL ORDERS REPORT</h1>
          <p>Period: ${P} ${c.year}</p>
          <p>Generated on: ${M}</p>
          <p>Total Orders: ${_.length}</p>
        </div>
        
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th style="width: 8%;">Travel No</th>
                <th style="width: 20%;">Employee</th>
                <th style="width: 12%;">Travel Date</th>
                <th style="width: 25%;">Purpose</th>
                <th style="width: 25%;">Destination</th>
                <th style="width: 10%;">Status</th>
              </tr>
            </thead>
            <tbody>
              ${_.map(B=>{const w=r.find(J=>J.USERID===B.USERID),T=B.TRAVELDATE?new Date(B.TRAVELDATE).toLocaleDateString():"N/A",H=B.STATUS||"Pending",K=H.toLowerCase().replace(" ","-");return`
                  <tr>
                    <td class="travel-no">${B.TRAVELNO||"N/A"}</td>
                    <td class="employee-info">
                      <div class="employee-name">${w?w.NAME:"N/A"}</div>
                      <div class="employee-id">ID: ${w?w.EMPLOYEEID:"N/A"}</div>
                      <div class="employee-id">Dept: ${w?w.DEPTNAME:"N/A"}</div>
                    </td>
                    <td>${T}</td>
                    <td class="purpose">${B.PURPOSE||"N/A"}</td>
                    <td class="destination">${B.TRAVELADDRESS||"N/A"}</td>
                    <td>
                      <span class="status status-${K}">${H}</span>
                    </td>
                  </tr>
                `}).join("")}
            </tbody>
          </table>
        </div>
        
        <div style="margin-top: 30px; text-align: center; font-size: 10px; color: #666;">
          <p>This report was generated on ${M} for ${P} ${c.year}</p>
          <p>Total records: ${_.length}</p>
        </div>
      </body>
      </html>
    `},U=Math.ceil(j/u),Y=(p-1)*u,G=Math.min(Y+u,j);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Print Travel Orders"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Generate and print travel order reports by month"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[N.length>0&&e.jsxs("span",{className:"text-sm text-gray-600",children:[N.length," selected"]}),e.jsx("button",{onClick:C,disabled:N.length===0||d,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",children:d?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Printing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),e.jsx("span",{children:"Print Selected"})]})})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee"}),e.jsxs("select",{value:c.employeeId,onChange:_=>L("employeeId",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Employees"}),r.map(_=>e.jsxs("option",{value:_.USERID,children:[_.NAME," (",_.EMPLOYEEID,")"]},_.USERID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:c.status,onChange:_=>L("status",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Approved",children:"Approved"}),e.jsx("option",{value:"Rejected",children:"Rejected"}),e.jsx("option",{value:"Completed",children:"Completed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),e.jsx("select",{value:c.year,onChange:_=>L("year",parseInt(_.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:R.map(_=>e.jsx("option",{value:_,children:_},_))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),e.jsx("select",{value:c.month,onChange:_=>L("month",parseInt(_.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:b.map(_=>e.jsx("option",{value:_.value,children:_.label},_.value))})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search by travel number, purpose, or destination...",value:c.searchTerm,onChange:_=>L("searchTerm",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),e.jsx("button",{onClick:A,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Search"}),e.jsx("button",{onClick:D,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Clear"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Travel Orders for ",(V=b.find(_=>_.value===c.month))==null?void 0:V.label," ",c.year," (",j,")"]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:N.length===t.length&&t.length>0,onChange:_=>I(_.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Select All"})]})})]})}),a?e.jsx("div",{className:"p-8 text-center",children:e.jsxs("div",{className:"inline-flex items-center space-x-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-gray-600",children:"Loading travel orders..."})]})}):o?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"text-red-600",children:o}),e.jsx("button",{onClick:S,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Retry"})]}):t.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:["No travel orders found for ",(W=b.find(_=>_.value===c.month))==null?void 0:W.label," ",c.year,"."]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Select"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Travel No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Travel Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Purpose"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Destination"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(_=>{const M=r.find($=>$.USERID===_.USERID),P=N.includes(_.TRAVELID);return e.jsxs("tr",{className:P?"bg-blue-50":"",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:P,onChange:$=>O(_.TRAVELID,$.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:_.TRAVELNO||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:M?M.NAME:"N/A"}),e.jsx("div",{className:"text-gray-500",children:M?M.EMPLOYEEID:"N/A"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_.TRAVELDATE?new Date(_.TRAVELDATE).toLocaleDateString():"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.jsx("div",{className:"max-w-xs truncate",title:_.PURPOSE,children:_.PURPOSE||"N/A"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.jsx("div",{className:"max-w-xs truncate",title:_.TRAVELADDRESS,children:_.TRAVELADDRESS||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_.STATUS==="Approved"?"bg-green-100 text-green-800":_.STATUS==="Rejected"?"bg-red-100 text-red-800":_.STATUS==="Completed"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:_.STATUS||"Pending"})})]},_.TRAVELID)})})]})}),U>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",Y+1," to ",G," of ",j," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>m(_=>Math.max(_-1,1)),disabled:p===1,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),Array.from({length:Math.min(5,U)},(_,M)=>{const P=M+1;return e.jsx("button",{onClick:()=>m(P),className:`px-3 py-1 border rounded-md text-sm ${p===P?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"}`,children:P},P)}),e.jsx("button",{onClick:()=>m(_=>Math.min(_+1,U)),disabled:p===U,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})})]})]})]})},DS=()=>{const{user:t}=Qt(),[s,r]=y.useState(!1),[n,a]=y.useState(!1),[l,o]=y.useState(""),[i,c]=y.useState(""),[h,p]=y.useState([]),[m,u]=y.useState([]),[x,j]=y.useState({dtrCheckerDevice:null,loginBioDevice:null,enableDigitalPersona:!0,enableNetworkMachines:!0,autoDetectDevices:!0}),[v,N]=y.useState(!1),[f,d]=y.useState({digitalPersona:"unknown",networkMachines:"unknown"}),g=new DigitalPersonaHelper;y.useEffect(()=>{b(),R()},[]);const b=async()=>{try{r(!0);const D=await le.get("/settings/kiosk-config");D.data.success&&j(D.data.config)}catch(D){console.error("Failed to load kiosk configuration:",D),c("Failed to load configuration")}finally{r(!1)}},E=async()=>{try{if(a(!0),c(""),x.enableDigitalPersona&&!x.loginBioDevice&&h.length>0)throw new Error("Please select a DigitalPersona device for biometric login");if(x.enableNetworkMachines&&!x.dtrCheckerDevice&&m.length>0)throw new Error("Please select a network machine for DTR checking");const D=await le.post("/settings/kiosk-config",{config:x});if(D.data.success)o("Configuration saved successfully"),setTimeout(()=>o(""),3e3);else throw new Error(D.data.message||"Failed to save configuration")}catch(D){console.error("Failed to save configuration:",D),c(D.message||"Failed to save configuration")}finally{a(!1)}},R=async()=>{N(!0),o("Detecting available devices...");try{await S(),await k(),o("Device detection completed"),setTimeout(()=>o(""),3e3)}catch(D){console.error("Device detection error:",D),c("Device detection failed: "+D.message)}finally{N(!1)}},S=async()=>{try{console.log(" Detecting DigitalPersona devices...");const D=await g.getDevices();p(D),D.length>0?(d(I=>({...I,digitalPersona:"connected"})),console.log(` Found ${D.length} DigitalPersona device(s)`),!x.loginBioDevice&&D.length>0&&j(I=>({...I,loginBioDevice:D[0].serialNumber||D[0].name}))):(d(I=>({...I,digitalPersona:"not_found"})),console.log(" No DigitalPersona devices found"))}catch(D){throw console.error(" DigitalPersona detection failed:",D),d(I=>({...I,digitalPersona:"error"})),D}},k=async()=>{try{console.log(" Detecting network machines...");const D=await le.get("/machines/network");if(D.data.success){const I=D.data.machines||[];u(I),I.length>0?(d(O=>({...O,networkMachines:"connected"})),console.log(` Found ${I.length} network machine(s)`),!x.dtrCheckerDevice&&I.length>0&&j(O=>({...O,dtrCheckerDevice:I[0].id}))):(d(O=>({...O,networkMachines:"not_found"})),console.log(" No network machines found"))}}catch(D){console.error(" Network machine detection failed:",D),d(I=>({...I,networkMachines:"error"}))}},L=async(D,I)=>{try{if(o(`Testing ${D} device...`),D==="digitalPersona"){if(h.find(C=>C.serialNumber===I||C.name===I))if((await g.checkDeviceStatus()).connected)o(" DigitalPersona device test successful");else throw new Error("Device not responding")}else if(D==="network"){const O=await le.post("/machines/test-connection",{machineId:I});if(O.data.success)o(" Network machine test successful");else throw new Error(O.data.message||"Connection test failed")}setTimeout(()=>o(""),3e3)}catch(O){c(`Device test failed: ${O.message}`),setTimeout(()=>c(""),5e3)}},A=D=>{const I={connected:{color:"bg-green-100 text-green-800",text:"Connected"},not_found:{color:"bg-yellow-100 text-yellow-800",text:"Not Found"},error:{color:"bg-red-100 text-red-800",text:"Error"},unknown:{color:"bg-gray-100 text-gray-800",text:"Unknown"}},O=I[D]||I.unknown;return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${O.color}`,children:O.text})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"DTR Checker Kiosk Settings"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Configure biometric devices for DTR checking and login authentication"})]}),e.jsx("button",{onClick:R,disabled:v,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:v?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Detecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Detect Devices"]})})]})}),l&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-green-800",children:l})})]})}),i&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:i})})]})}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Device Status Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-8 h-8 text-blue-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"DigitalPersona Devices"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[h.length," device(s) found"]})]})]}),A(f.digitalPersona)]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-8 h-8 text-green-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Network Machines"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[m.length," machine(s) found"]})]})]}),A(f.networkMachines)]})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"DigitalPersona Biometric Login"}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",checked:x.enableDigitalPersona,onChange:D=>j(I=>({...I,enableDigitalPersona:D.target.checked})),className:"form-checkbox h-4 w-4 text-blue-600 transition duration-150 ease-in-out"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Enable DigitalPersona"})]})]}),x.enableDigitalPersona&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Device for LoginBio Authentication"}),e.jsxs("select",{value:x.loginBioDevice||"",onChange:D=>j(I=>({...I,loginBioDevice:D.target.value})),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:h.length===0,children:[e.jsx("option",{value:"",children:h.length===0?"No DigitalPersona devices found":"Select a device"}),h.map((D,I)=>e.jsx("option",{value:D.serialNumber||D.name,children:D.name||D.serialNumber||`Device ${I+1}`},I))]})]}),x.loginBioDevice&&e.jsxs("button",{onClick:()=>L("digitalPersona",x.loginBioDevice),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Test Device"]})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Network Biometric Machines"}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",checked:x.enableNetworkMachines,onChange:D=>j(I=>({...I,enableNetworkMachines:D.target.checked})),className:"form-checkbox h-4 w-4 text-blue-600 transition duration-150 ease-in-out"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Enable Network Machines"})]})]}),x.enableNetworkMachines&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Machine for DTR Checker"}),e.jsxs("select",{value:x.dtrCheckerDevice||"",onChange:D=>j(I=>({...I,dtrCheckerDevice:D.target.value})),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:m.length===0,children:[e.jsx("option",{value:"",children:m.length===0?"No network machines found":"Select a machine"}),m.map(D=>e.jsxs("option",{value:D.id,children:[D.name," (",D.ip_address,")"]},D.id))]})]}),x.dtrCheckerDevice&&e.jsxs("button",{onClick:()=>L("network",x.dtrCheckerDevice),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Test Connection"]})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Global Settings"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",checked:x.autoDetectDevices,onChange:D=>j(I=>({...I,autoDetectDevices:D.target.checked})),className:"form-checkbox h-4 w-4 text-blue-600 transition duration-150 ease-in-out"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Auto-detect devices on startup"})]})})]}),e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Reset"}),e.jsx("button",{onClick:E,disabled:n,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Configuration"})]})})]})};function Nf({employeeId:t,onSuccess:s,isModal:r=!1,portalUserMode:n=!1}){const{id:a}=Cg(),l=xr(),{user:o}=Qt(),[i,c]=y.useState(!1),[h,p]=y.useState([]),[m,u]=y.useState(null),[x,j]=y.useState(""),[v,N]=y.useState(""),[f,d]=y.useState(!1),[g,b]=y.useState(!1),[E,R]=y.useState(null),[S,k]=y.useState({}),[L,A]=y.useState(!1),[D,I]=y.useState([]),[O,C]=y.useState({BADGENUMBER:"",SSN:"",NAME:"",GENDER:"",TITLE:"",BIRTHDAY:"",HIREDDAY:"",STREET:"",DEFAULTDEPTID:"",privilege:0,Appointment:"",InheritDeptSchClass:"",status:"Activate",PAGER:null,CITY:null,STATE:null,ZIP:null,OPHONE:null,FPHONE:null,VERIFICATIONMETHOD:1,SECURITYFLAGS:null,ATT:1,INLATE:0,OUTEARLY:0,OVERTIME:1,SEP:1,HOLIDAY:1,MINZU:null,PASSWORD:null,LUNCHDURATION:1,MVerifyPass:null,Notes:null,InheritDeptSch:1,AutoSchPlan:1,MinAutoSchInterval:24,RegisterOT:1,InheritDeptRule:0,EMPRIVILEGE:0,CardNo:null,FaceGroup:0,AccGroup:1,UseAccGroupTZ:1,VerifyCode:0,Expires:0,ValidCount:0,ValidTimeBegin:null,ValidTimeEnd:null,TimeZone1:1,TimeZone2:0,TimeZone3:0}),[F,U]=y.useState({}),[Y,G]=y.useState(null),[V,W]=y.useState(4),[_,M]=y.useState(!1),[P,$]=y.useState(""),[B,w]=y.useState(""),T=t||a;y.useEffect(()=>{oe(),Ee()},[]),y.useEffect(()=>{T&&T!=="new"&&Ae()},[T]),y.useEffect(()=>{if(g){W(4);const Z=setInterval(()=>{W(ee=>ee<=1?(clearInterval(Z),0):ee-1)},1e3);return()=>clearInterval(Z)}},[g]);const H=()=>{const Z=[],ee={NAME:"Name",BADGENUMBER:"Badge Number",SSN:"SSN",DEFAULTDEPTID:"Department",TITLE:"Position/Title",GENDER:"Gender",BIRTHDAY:"Birthday",HIREDDAY:"Hire Date",STREET:"Address",privilege:"Employment Status",PASSWORD:"Password",Appointment:"Appointment Type",InheritDeptSchClass:"Shift Schedule"};return T==="new"||!T?(Object.keys(O).forEach(_e=>{if(O[_e]&&O[_e]!==""&&_e!=="employmentStatus"){const Qe=ee[_e]||_e,je=pe(_e,O[_e]);Z.push({name:Qe,value:je})}}),m&&Z.push({name:"Photo",value:"Updated"})):(Object.keys(O).forEach(_e=>{if(_e==="PASSWORD"&&O[_e]&&O[_e].trim()!=="")Z.push({name:ee[_e]||_e,value:"Updated"});else if(_e==="privilege"){const Qe=F[_e]||0,je=O[_e]||0;if(Qe!=je){const Ke=pe(_e,O[_e]);Z.push({name:ee[_e]||_e,value:Ke})}}else{if(_e==="employmentStatus")return;if(F[_e]!==O[_e]&&O[_e]!==""&&O[_e]!==null&&O[_e]!==void 0){const Qe=ee[_e]||_e,je=pe(_e,O[_e]);Z.push({name:Qe,value:je})}}}),m&&Z.push({name:"Photo",value:"Updated"})),console.log("Updated fields:",Z),console.log("Original data:",F),console.log("Current form data:",O),console.log("Is new employee:",T==="new"||!T),Z},K=Z=>{const ee=h.find(_e=>_e.DEPTID===Z);return ee?ee.DEPTNAME:"Unknown Department"},J=Z=>O0(Z),X=Z=>{const ee=D.find(_e=>_e.SHIFTNO===Z);return ee?ee.SHIFTNAME:"No Schedule"},pe=(Z,ee)=>{switch(Z){case"DEFAULTDEPTID":return K(ee);case"Appointment":return J(ee);case"InheritDeptSchClass":return X(ee);case"privilege":return ee>=0?"Active":"Inactive";case"BIRTHDAY":case"HIREDDAY":return ee?new Date(ee).toLocaleDateString():"Not set";case"GENDER":return ee==="M"?"Male":ee==="F"?"Female":ee;case"PASSWORD":return"Updated";default:return ee||"Not set"}},oe=async()=>{try{const Z=await le.get("/employees/departments");p(Z.data)}catch(Z){console.error("Error fetching departments:",Z)}},ce=async Z=>{const{value:ee}=Z.target,_e=ee.replace(/\D/g,"").slice(0,5);if(C(Qe=>({...Qe,BADGENUMBER:_e})),k(Qe=>({...Qe,BADGENUMBER:""})),_e&&(!T||T==="new"))try{const Qe=await le.get("/employees/validate-unique",{params:{badgeNumber:_e,currentUserId:T}});Qe.data.isValid||k(je=>({...je,BADGENUMBER:Qe.data.errors.badgeNumber||"Badge Number already exists"}))}catch(Qe){console.error("Error validating badge number:",Qe)}},Ae=async()=>{if(!(!T||T==="new")){c(!0);try{const ee=(await le.get(`/employees/${T}`)).data;C({BADGENUMBER:ee.BADGENUMBER||"",SSN:ee.SSN||"",NAME:ee.NAME||"",DEFAULTDEPTID:ee.DEFAULTDEPTID||"",TITLE:ee.TITLE||"",GENDER:ee.GENDER||"",BIRTHDAY:ee.BIRTHDAY?ee.BIRTHDAY.split("T")[0]:"",HIREDDAY:ee.HIREDDAY?ee.HIREDDAY.split("T")[0]:"",STREET:ee.STREET||"",privilege:ee.privilege||"",employmentStatus:ee.privilege>=0?"Active":"Inactive",status:ee.privilege>=0?"Activate":"Deactivate",PASSWORD:ee.PASSWORD||"",Appointment:ee.Appointment||"",InheritDeptSchClass:ee.InheritDeptSchClass||""}),G(ee.privilege),U(ee),ee.PHOTO&&N(ee.PHOTO)}catch(Z){console.error("Error fetching employee:",Z)}finally{c(!1)}}},Be=Z=>{const{name:ee,value:_e}=Z.target;if(ee==="status"&&n){C(Qe=>({...Qe,status:_e,privilege:_e==="Deactivate"?-1:0}));return}C(Qe=>({...Qe,[ee]:_e})),S[ee]&&k(Qe=>({...Qe,[ee]:""}))},Ie=Z=>new Promise(ee=>{const _e=document.createElement("canvas"),Qe=_e.getContext("2d"),je=new Image;je.onload=()=>{_e.width=je.width,_e.height=je.height,Qe.drawImage(je,0,0);const Ke=Qe.getImageData(0,0,_e.width,_e.height),gt=_e.width*3,mt=(4-gt%4)%4,ae=(gt+mt)*_e.height,Ce=new Uint8Array(54+ae),Se=new ArrayBuffer(54),qe=new DataView(Se);qe.setUint8(0,66),qe.setUint8(1,77),qe.setUint32(2,54+ae,!0),qe.setUint32(6,0,!0),qe.setUint32(10,54,!0),qe.setUint32(14,40,!0),qe.setUint32(18,_e.width,!0),qe.setUint32(22,_e.height,!0),qe.setUint16(26,1,!0),qe.setUint16(28,24,!0),qe.setUint32(30,0,!0),qe.setUint32(34,ae,!0),qe.setUint32(38,2835,!0),qe.setUint32(42,2835,!0),qe.setUint32(46,0,!0),qe.setUint32(50,0,!0),Ce.set(new Uint8Array(Se),0);let Ze=54;for(let ke=_e.height-1;ke>=0;ke--){for(let te=0;te<_e.width;te++){const Ne=(ke*_e.width+te)*4;Ce[Ze++]=Ke.data[Ne+2],Ce[Ze++]=Ke.data[Ne+1],Ce[Ze++]=Ke.data[Ne]}for(let te=0;te<mt;te++)Ce[Ze++]=0}ee(Ce)},je.src=URL.createObjectURL(Z)}),ye=Z=>{const ee=Z.target.files[0];if(ee){if(ee.size>2*1024*1024){ne("File Size Error","Photo must be less than 2MB.");return}if(!ee.type.startsWith("image/")){ne("File Type Error","Please select a valid image file.");return}const _e=new FileReader;_e.onload=Qe=>{j(Qe.target.result)},_e.readAsDataURL(ee),C(Qe=>({...Qe,photo:ee}))}},se=Z=>{const{value:ee}=Z.target,_e=ee.replace(/\D/g,"").slice(0,4);C(Qe=>({...Qe,SSN:_e})),k(Qe=>({...Qe,SSN:""}))},we=()=>{var _e,Qe;const Z={},ee=[];return console.log("=== VALIDATION DEBUG ==="),console.log("Form data:",O),console.log("Badge Number:",O.BADGENUMBER,"Length:",(_e=O.BADGENUMBER)==null?void 0:_e.length),console.log("SSN:",O.SSN,"Length:",(Qe=O.SSN)==null?void 0:Qe.length),console.log("Name:",O.NAME),console.log("Gender:",O.GENDER),console.log("Department:",O.DEFAULTDEPTID),O.BADGENUMBER?(O.BADGENUMBER.length<1||O.BADGENUMBER.length>5)&&(Z.BADGENUMBER="Badge Number must be 1-5 digits",ee.push("Badge Number (must be 1-5 digits)"),console.log("Badge Number validation failed: length")):(Z.BADGENUMBER="Badge Number is required",ee.push("Badge Number"),console.log("Badge Number validation failed: required")),O.SSN?O.SSN.length!==4&&(Z.SSN="SSN/PIN must be exactly 4 digits",ee.push("SSN/PIN (must be exactly 4 digits)"),console.log("SSN validation failed: length")):(Z.SSN="SSN/PIN is required",ee.push("SSN/PIN"),console.log("SSN validation failed: required")),O.NAME||(Z.NAME="Full Name is required",ee.push("Full Name"),console.log("Name validation failed")),O.GENDER||(Z.GENDER="Gender is required",ee.push("Gender"),console.log("Gender validation failed")),O.DEFAULTDEPTID||(Z.DEFAULTDEPTID="Department is required",ee.push("Department"),console.log("Department validation failed")),console.log("Validation errors:",Z),console.log("Missing fields:",ee),console.log("Validation passed:",Object.keys(Z).length===0),k(Z),Object.keys(Z).length===0},ve=()=>{const Z={};return O.NAME||(Z.NAME="Full Name is required"),O.DEFAULTDEPTID||(Z.DEFAULTDEPTID="Department is required"),k(Z),Object.keys(Z).length===0},Q=async Z=>{if(Z.preventDefault(),k({}),M(!1),$(""),w(""),!(T&&T!=="new"?ve():we())){const _e=[];T&&T!=="new"?(O.NAME||_e.push("Full Name"),O.DEFAULTDEPTID||_e.push("Department")):(O.BADGENUMBER?(O.BADGENUMBER.length<1||O.BADGENUMBER.length>5)&&_e.push("Badge Number (1-5 digits)"):_e.push("Badge Number"),O.SSN?O.SSN.length!==4&&_e.push("SSN/PIN (4 digits)"):_e.push("SSN/PIN"),O.NAME||_e.push("Full Name"),O.GENDER||_e.push("Gender"),O.DEFAULTDEPTID||_e.push("Department"));const Qe=_e.length>0?`Please fill in the following required fields: ${_e.join(", ")}`:"Please fix the validation errors highlighted in red.";ne("Validation Error",Qe);return}if(!T||T==="new")try{const _e=await le.get("/employees/validate-unique",{params:{badgeNumber:O.BADGENUMBER,currentUserId:T}});if(!_e.data.isValid){k(_e.data.errors),ne("Validation Error","Please fix the validation errors highlighted in red.");return}}catch(_e){console.error("Error validating badge number:",_e),ne("Validation Error","Error validating badge number. Please try again.");return}c(!0);try{const _e={BADGENUMBER:O.BADGENUMBER,SSN:O.SSN,NAME:O.NAME,GENDER:O.GENDER,TITLE:O.TITLE,BIRTHDAY:O.BIRTHDAY||null,HIREDDAY:O.HIREDDAY||null,STREET:O.STREET||null,DEFAULTDEPTID:O.DEFAULTDEPTID||null,privilege:O.privilege,Appointment:O.Appointment||null,InheritDeptSchClass:O.InheritDeptSchClass||1,PHOTO:m?await Ie(m):null,PAGER:null,CITY:null,STATE:null,ZIP:null,OPHONE:null,FPHONE:null,VERIFICATIONMETHOD:1,SECURITYFLAGS:null,ATT:1,INLATE:0,OUTEARLY:0,OVERTIME:1,SEP:1,HOLIDAY:1,MINZU:null,PASSWORD:null,LUNCHDURATION:1,MVerifyPass:null,Notes:null,InheritDeptSch:1,AutoSchPlan:1,MinAutoSchInterval:24,RegisterOT:1,InheritDeptRule:0,EMPRIVILEGE:0,CardNo:null,FaceGroup:0,AccGroup:1,UseAccGroupTZ:1,VerifyCode:0,Expires:0,ValidCount:0,ValidTimeBegin:null,ValidTimeEnd:null,TimeZone1:1,TimeZone2:0,TimeZone3:0},Qe=T&&T!=="new"?await le.put(`/employees/${T}`,_e):await le.post("/employees",_e);console.log("Response received:",Qe.data,"Status:",Qe.status),console.log("Success condition met, calling showSuccess"),he()}catch(_e){console.error("Error saving employee:",_e),Me(_e)}finally{c(!1)}},ne=(Z,ee)=>{console.log("showError called:",Z,ee),$(Z),w(ee),M(!0),console.log("Error popup should be visible now")},he=()=>{console.log("showSuccess called");const Z={success:!0,isUpdate:T&&T!=="new",employeeName:O.NAME,updatedFields:H()};console.log("Setting success data:",Z),R(Z),b(!0),console.log("Success popup should be visible now")},Me=Z=>{var Qe,je;let ee="Save Failed",_e="An unexpected error occurred while saving the employee.";if((Qe=Z.response)!=null&&Qe.data){const Ke=Z.response.data;Ke.errors&&typeof Ke.errors=="object"?(k(Ke.errors),ee="Validation Error",_e="Please fix the validation errors highlighted in red."):(je=Ke.message)!=null&&je.includes("duplicate")?Ke.message.includes("BADGENUMBER")?(k(rt=>({...rt,BADGENUMBER:"Badge Number already exists"})),ee="Duplicate Badge Number",_e="The badge number you entered already exists. Please use a different badge number."):Ke.message.includes("SSN")?(k(rt=>({...rt,SSN:"SSN already exists"})),ee="Duplicate SSN",_e="The SSN you entered already exists. Please use a different SSN."):(ee="Duplicate Entry",_e=Ke.message):Ke.message&&(ee="Server Error",_e=Ke.message)}else(Z.code==="NETWORK_ERROR"||!Z.response)&&(ee="Network Error",_e="Unable to connect to the server. Please check your internet connection and try again.");ne(ee,_e)},be=()=>{C({BADGENUMBER:"",SSN:"",NAME:"",GENDER:"",TITLE:"",BIRTHDAY:"",HIREDDAY:"",STREET:"",DEFAULTDEPTID:"",privilege:0,Appointment:"",InheritDeptSchClass:"",PAGER:null,CITY:null,STATE:null,ZIP:null,OPHONE:null,FPHONE:null,VERIFICATIONMETHOD:1,SECURITYFLAGS:null,ATT:1,INLATE:0,OUTEARLY:0,OVERTIME:1,SEP:1,HOLIDAY:1,MINZU:null,PASSWORD:null,LUNCHDURATION:1,MVerifyPass:null,Notes:null,InheritDeptSch:1,AutoSchPlan:1,MinAutoSchInterval:24,RegisterOT:1,InheritDeptRule:0,EMPRIVILEGE:0,CardNo:null,FaceGroup:0,AccGroup:1,UseAccGroupTZ:1,VerifyCode:0,Expires:0,ValidCount:0,ValidTimeBegin:null,ValidTimeEnd:null,TimeZone1:1,TimeZone2:0,TimeZone3:0}),u(null),j(""),N(""),k({})},De=()=>{if(console.log("handleSuccessClose called"),b(!1),R(null),be(),r&&s){const Z={success:!0,isUpdate:T&&T!=="new",employeeName:O.NAME,updatedFields:H()};s(Z)}},ze=()=>{console.log("handleCancel called"),r&&s?s({success:!1,closeModal:!0}):l("/hris-management")},Ee=async()=>{try{const Z=await le.get("/management/shiftschedules");I(Z.data||[])}catch(Z){console.error("Error fetching shift schedules:",Z)}};return r?e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:Q,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.BADGENUMBER?"text-red-600":"text-gray-700"}`,children:["Badge Number ",T&&T!=="new"?"":"*"]}),e.jsx("input",{type:"text",name:"BADGENUMBER",value:O.BADGENUMBER,onChange:ce,required:!T||T==="new",disabled:T&&T!=="new",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${T&&T!=="new"?"bg-gray-100 cursor-not-allowed":""} ${S.BADGENUMBER?"border-red-500":"border-gray-300"}`,placeholder:"Enter badge number"}),S.BADGENUMBER&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.BADGENUMBER}),T&&T!=="new"&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Badge Number cannot be changed for existing employees"})]}),!n||n&&T==="new"?e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.SSN?"text-red-600":"text-gray-700"}`,children:["SSN/PIN ",T&&T!=="new"?"":"*"]}),e.jsx("input",{type:"text",name:"SSN",value:O.SSN,onChange:se,required:!T||T==="new",disabled:!1,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.SSN?"border-red-500":"border-gray-300"}`,placeholder:"Enter SSN"}),S.SSN&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.SSN}),T&&T!=="new"&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"SSN/PIN can be updated for existing employees"})]}):null]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.NAME?"text-red-600":"text-gray-700"}`,children:["Full Name ",T&&T!=="new"?"":"*"]}),e.jsx("input",{type:"text",name:"NAME",value:O.NAME,onChange:Be,required:!T||T==="new",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.NAME?"border-red-500":"border-gray-300"}`,placeholder:"Enter full name"}),S.NAME&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.NAME})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Photo"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:x?e.jsx("img",{src:x,alt:"Photo preview",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-300"}):v?e.jsx("img",{src:v,alt:"Existing photo",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-300"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 border-2 border-gray-300 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:ye,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"JPG, PNG or GIF. Max size 2MB."})]})]})]})]}),!n||n&&T==="new"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.GENDER?"text-red-600":"text-gray-700"}`,children:["Gender ",T&&T!=="new"?"":"*"]}),e.jsxs("select",{name:"GENDER",value:O.GENDER,onChange:Be,required:!T||T==="new",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.GENDER?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]}),S.GENDER&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.GENDER})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),e.jsx("input",{type:"date",name:"BIRTHDAY",value:O.BIRTHDAY,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}):null,e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.DEFAULTDEPTID?"text-red-600":"text-gray-700"}`,children:["Department ",T&&T!=="new"?"":"*"]}),e.jsxs("select",{name:"DEFAULTDEPTID",value:O.DEFAULTDEPTID,onChange:Be,required:!T||T==="new",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.DEFAULTDEPTID?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select Department"}),h.map(Z=>e.jsx("option",{value:Z.DEPTID,children:Z.DEPTNAME},Z.DEPTID))]}),S.DEFAULTDEPTID&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.DEFAULTDEPTID})]}),!n||n&&T==="new"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Position/Title"}),e.jsx("input",{type:"text",name:"TITLE",value:O.TITLE,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter position/title"})]}):null]})]}),!n||n&&T==="new"?e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Other Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hire Date"}),e.jsx("input",{type:"date",name:"HIREDDAY",value:O.HIREDDAY,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("input",{type:"text",name:"STREET",value:O.STREET,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter address"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment"}),e.jsxs("select",{name:"Appointment",value:O.Appointment,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Appointment"}),pi().map(Z=>e.jsx("option",{value:Z.id,children:Z.name},Z.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shift Schedule"}),e.jsxs("select",{name:"InheritDeptSchClass",value:O.InheritDeptSchClass,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Shift Schedule"}),D.map(Z=>e.jsx("option",{value:Z.SHIFTNO,children:Z.SHIFTNAME},Z.SHIFTNO))]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Privilege"}),e.jsxs("select",{name:"privilege",value:O.privilege,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"0",children:"Regular Employee"}),e.jsx("option",{value:"1",children:"Supervisor"}),e.jsx("option",{value:"2",children:"Manager"}),e.jsx("option",{value:"3",children:"Admin"})]})]})})]}):null,n&&T&&T!=="new"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Status-"}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"status",value:"Activate",checked:O.status==="Activate",onChange:Be,className:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Activate"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"status",value:"Deactivate",checked:O.status==="Deactivate",onChange:Be,className:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Deactivate"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:ze,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:i?"Saving...":T&&T!=="new"?"Update Employee":"Create Employee"})]})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",style:{zIndex:99999},children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4 border-4 border-red-500",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center mb-2",children:P}),e.jsx("p",{className:"text-sm text-gray-600 text-center mb-6",children:B}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:()=>{M(!1),$(""),w("")},className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"OK"})})]})}),g&&E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",style:{zIndex:99999},children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4 border-4 border-green-500",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center mb-2",children:E.isUpdate?"Employee Updated Successfully!":"Employee Created Successfully!"}),e.jsx("p",{className:"text-sm text-gray-600 text-center mb-4",children:E.isUpdate?`The following information for ${E.employeeName} has been updated:`:`New employee ${E.employeeName} has been created with the following information:`}),E.updatedFields&&E.updatedFields.length>0&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:e.jsx("ul",{className:"space-y-1",children:E.updatedFields.map((Z,ee)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsxs("span",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:Z.name}),Z.value&&Z.value!=="Updated"&&e.jsxs("span",{className:"text-gray-600",children:[": ",Z.value]})]})]},ee))})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:De,className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Close"})})]})})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Employee"})}),e.jsx("div",{className:"bg-white",children:e.jsxs("form",{onSubmit:Q,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.BADGENUMBER?"text-red-600":"text-gray-700"}`,children:["Badge Number ",T&&T!=="new"?"":"*"]}),e.jsx("input",{type:"text",name:"BADGENUMBER",value:O.BADGENUMBER,onChange:ce,required:!T||T==="new",disabled:T&&T!=="new",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${T&&T!=="new"?"bg-gray-100 cursor-not-allowed":""} ${S.BADGENUMBER?"border-red-500":"border-gray-300"}`,placeholder:"Enter badge number"}),S.BADGENUMBER&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.BADGENUMBER}),T&&T!=="new"&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Badge Number cannot be changed for existing employees"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.SSN?"text-red-600":"text-gray-700"}`,children:["SSN/PIN ",T&&T!=="new"?"":"*"]}),e.jsx("input",{type:"text",name:"SSN",value:O.SSN,onChange:se,required:!T||T==="new",disabled:!1,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.SSN?"border-red-500":"border-gray-300"}`,placeholder:"Enter SSN"}),S.SSN&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.SSN}),T&&T!=="new"&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"SSN/PIN can be updated for existing employees"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.NAME?"text-red-600":"text-gray-700"}`,children:["Full Name ",T&&T!=="new"?"":"*"]}),e.jsx("input",{type:"text",name:"NAME",value:O.NAME,onChange:Be,required:!T||T==="new",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.NAME?"border-red-500":"border-gray-300"}`,placeholder:"Enter full name"}),S.NAME&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.NAME})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Photo"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md hover:border-gray-400 transition-colors",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsxs("label",{htmlFor:"photo-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[e.jsx("span",{children:"Upload a file"}),e.jsx("input",{id:"photo-upload",name:"photo",type:"file",accept:"image/*",onChange:ye,className:"sr-only"})]}),e.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.GENDER?"text-red-600":"text-gray-700"}`,children:["Gender ",T&&T!=="new"?"":"*"]}),e.jsxs("select",{name:"GENDER",value:O.GENDER,onChange:Be,required:!T||T==="new",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.GENDER?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"M",children:"Male"}),e.jsx("option",{value:"F",children:"Female"})]}),S.GENDER&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.GENDER})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),e.jsx("input",{type:"date",name:"BIRTHDAY",value:O.BIRTHDAY,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${S.DEFAULTDEPTID?"text-red-600":"text-gray-700"}`,children:["Department ",T&&T!=="new"?"":"*"]}),e.jsxs("select",{name:"DEFAULTDEPTID",value:O.DEFAULTDEPTID,onChange:Be,required:!T||T==="new",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.DEFAULTDEPTID?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select Department"}),h.map(Z=>e.jsx("option",{value:Z.DEPTID,children:Z.DEPTNAME},Z.DEPTID))]}),S.DEFAULTDEPTID&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.DEFAULTDEPTID})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Position/Title"}),e.jsx("input",{type:"text",name:"TITLE",value:O.TITLE,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter position/title"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Other Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hire Date"}),e.jsx("input",{type:"date",name:"HIREDDAY",value:O.HIREDDAY,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("input",{type:"text",name:"STREET",value:O.STREET,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter address"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment"}),e.jsxs("select",{name:"Appointment",value:O.Appointment,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Appointment"}),pi().map(Z=>e.jsx("option",{value:Z.id,children:Z.name},Z.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shift Schedule"}),e.jsxs("select",{name:"InheritDeptSchClass",value:O.InheritDeptSchClass,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Shift Schedule"}),D.map(Z=>e.jsx("option",{value:Z.SHIFTNO,children:Z.SHIFTNAME},Z.SHIFTNO))]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Privilege"}),e.jsxs("select",{name:"privilege",value:O.privilege,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"0",children:"User"}),e.jsx("option",{value:"1",children:"Enroller"}),e.jsx("option",{value:"2",children:"Manager"}),e.jsx("option",{value:"3",children:"Admin"})]})]})})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-200",children:e.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:i?"Saving...":T&&T!=="new"?"Update Employee":"Create Employee"})})]})})]})})})}function AS({onRefresh:t}){const{user:s}=Qt(),r=()=>{const ee=(s==null?void 0:s.PRIVILEGE)||(s==null?void 0:s.privilege)||(s==null?void 0:s.Privilege);return parseInt(ee)===3},[n,a]=y.useState([]),[l,o]=y.useState(""),[i,c]=y.useState("all"),[h,p]=y.useState("all"),[m,u]=y.useState("all"),[x,j]=y.useState("all"),[v,N]=y.useState({}),[f,d]=y.useState([]),[g,b]=y.useState([]),[E,R]=y.useState(!1),[S,k]=y.useState(1),[L,A]=y.useState(10),[D,I]=y.useState(0),[O,C]=y.useState(0),[F,U]=y.useState(!0),[Y,G]=y.useState(!1),[V,W]=y.useState(null);xr();const[_,M]=y.useState(!1),[P,$]=y.useState(!1),[B,w]=y.useState(null),[T,H]=y.useState(""),[K,J]=y.useState(!1),X=async(ee=1,_e=30,Qe="",je="all",Ke="all",rt="all",gt="all")=>{var mt;try{U(!0);const it=await le.get("/employees/paginated-with-shifts",{params:{page:ee,limit:_e,search:Qe.trim(),status:je!=="all"?je:void 0,appointment:Ke!=="all"?Ke:void 0,department:rt!=="all"?rt:void 0,shiftSchedule:gt!=="all"?gt:void 0}}),{employees:ae,total:Ce,totalPages:Se}=it.data;a(ae||[]),I(Ce||0),C(Se||0);const qe={};ae&&Array.isArray(ae)&&ae.forEach(Ze=>{(Ze.SHIFTNAME||Ze.SHIFTNO)&&(qe[Ze.USERID]={SHIFTNAME:Ze.SHIFTNAME,SHIFTNO:Ze.SHIFTNO})}),N(qe)}catch(it){console.error("Error fetching employees:",it),console.error("Error response:",(mt=it.response)==null?void 0:mt.data),a([]),I(0),C(0)}finally{U(!1)}},pe=async()=>{try{const ee=await le.get("/management/shiftschedules");d(ee.data||[])}catch(ee){console.error("Error fetching shift schedules:",ee)}},oe=async()=>{try{const ee=await le.get("/employees/departments");b(ee.data||[])}catch(ee){console.error("Error fetching departments:",ee)}};y.useEffect(()=>{X(S,L,l,i,h,m,x)},[]),y.useEffect(()=>{X(S,L,l,i,h,m,x)},[S,L,l,i,h,m,x]),y.useEffect(()=>{oe(),pe()},[]);const ce=ee=>{const _e=ee.target.value;c(_e),k(1)},Ae=ee=>{const _e=ee.target.value;u(_e),k(1)},Be=ee=>{W(ee),G(!0)},Ie=()=>{G(!1),W(null)},ye=ee=>{ee&&ee.success,G(!1),W(null),X(S,L,l,i,h,m,x)},se=ee=>{v[ee.USERID],O0(ee.Appointment);const _e=window.open("","_blank"),Qe=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Portal User Record - ${ee.NAME}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #f2f2f2; }
            .header { text-align: center; margin-bottom: 20px; }
            .photo-placeholder { width: 80px; height: 80px; background-color: #f0f0f0; border: 1px solid #ddd; display: flex; align-items: center; justify-content: center; color: #666; }
            @media print { .no-print { display: none; } }
          </style>
        </head>
        <body>
          <div class="header">
            <h2>Portal User Record</h2>
            <p><strong>Name:</strong> ${ee.NAME}</p>
            <p><strong>Badge Number:</strong> ${ee.BADGENUMBER}</p>
            <p><strong>DTR-ID:</strong> ${ee.USERID}</p>
            <p><strong>Department:</strong> ${ee.DEPTNAME||"No Department"}</p>
          </div>
          <table>
            <thead>
              <tr>
                <th>Field</th>
                <th>Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>DTR-ID</td>
                <td>${ee.USERID}</td>
              </tr>
              <tr>
                <td>Name</td>
                <td>${ee.NAME}</td>
              </tr>
              <tr>
                <td>Badge Number</td>
                <td>${ee.BADGENUMBER}</td>
              </tr>
              <tr>
                <td>Department</td>
                <td>${ee.DEPTNAME||"No Department"}</td>
              </tr>
            </tbody>
          </table>
        </body>
      </html>
    `;_e.document.write(Qe),_e.document.close(),_e.focus(),setTimeout(()=>_e.print(),500)},we=ee=>{w(ee),H(""),$(!0)},ve=()=>{$(!1),w(null),H("")},Q=async()=>{var ee,_e;if(B){if(!/^\d{4}$/.test(T)){alert("PIN must be exactly 4 digits");return}try{J(!0),await le.put(`/employees/${B.USERID}/reset-pin`,{pin:T}),alert("PIN reset successfully"),ve(),X(S,L,l,i,h,m,x)}catch(Qe){console.error("Error resetting PIN:",Qe),alert(((_e=(ee=Qe.response)==null?void 0:ee.data)==null?void 0:_e.error)||"Error resetting PIN. Please try again.")}finally{J(!1)}}},ne=async ee=>{try{const Qe=(parseInt(ee.privilege)||0)>=0?-1:0,je={NAME:ee.NAME,BADGENUMBER:ee.BADGENUMBER,DEFAULTDEPTID:ee.DEFAULTDEPTID,SSN:ee.SSN,TITLE:ee.TITLE,GENDER:ee.GENDER,BIRTHDAY:ee.BIRTHDAY,HIREDDAY:ee.HIREDDAY,STREET:ee.STREET,privilege:Qe};(await le.put(`/employees/${ee.USERID}`,je)).data.message==="Employee updated successfully"?(X(S,L,l,i,h,m,x),alert(`Portal user status updated to ${Qe>=0?"Active":"Inactive"}`)):alert("Error updating portal user status")}catch(_e){console.error("Error updating portal user privilege:",_e),alert("Error updating portal user status. Please try again.")}},he=ee=>{const _e=ee.privilege;return _e==null?"Inactive":(typeof _e=="string"?parseInt(_e,10):_e)>=0?"Active":"Inactive"},Me=ee=>ee.PHOTO?e.jsx("img",{src:ee.PHOTO,alt:ee.NAME,className:"w-10 h-10 rounded-full object-cover",onError:_e=>{_e.target.style.display="none",_e.target.nextSibling.style.display="flex"}}):e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),be=ee=>{k(Math.max(1,Math.min(ee,O)))},De=()=>{be(S-1)},ze=()=>{be(S+1)},Ee=()=>{M(!0)},Z=ee=>{M(!1),ee&&ee.success&&X(S,L,l,i,h,m,x)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:l,onChange:ee=>o(ee.target.value),placeholder:"Search by DTR-ID, badge number, name, or department...",className:"w-full sm:w-80 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),r()&&e.jsx("div",{className:"flex-1 sm:flex-none",children:e.jsxs("button",{onClick:Ee,className:"px-6 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition duration-200 ease-in-out flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("span",{children:"Add New Portal User"})]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[F&&e.jsx("div",{className:"p-4 text-center",children:e.jsxs("div",{className:"inline-flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Loading portal users..."})]})}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Status"}),e.jsxs("select",{value:i,onChange:ce,className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Department"}),e.jsxs("select",{value:m,onChange:Ae,className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Departments"}),g.map(ee=>e.jsx("option",{value:ee.DEPTID,children:ee.DEPTNAME},ee.DEPTID))]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",D," portal users"]}),e.jsx("button",{onClick:()=>{c("all"),u("all"),k(1)},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Clear All Filters"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PHOTO"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"USER NAME"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DTR-ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"BADGE NO"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Departments"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"STATUS"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ACTION"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length===0&&!F?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:l?"No portal users found matching your search.":"No portal users available."})}):n.map(ee=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:Me(ee)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:"font-medium",children:ee.NAME})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:ee.USERID}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:ee.BADGENUMBER||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:ee.DEPTNAME||"No Department"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("label",{className:`flex items-center cursor-pointer px-3 py-2 rounded-lg transition-all duration-200 ${he(ee)==="Active"?"bg-green-100 hover:bg-green-200":"bg-red-100 hover:bg-red-200"}`,children:[e.jsx("input",{type:"checkbox",checked:he(ee)==="Active",onChange:()=>ne(ee),className:`w-4 h-4 rounded focus:ring-2 focus:ring-offset-2 ${he(ee)==="Active"?"text-green-600 bg-green-100 border-green-300 focus:ring-green-500":"text-red-600 bg-red-100 border-red-300 focus:ring-red-500"}`}),e.jsx("span",{className:`ml-2 text-sm font-medium ${he(ee)==="Active"?"text-green-800":"text-red-800"}`,children:he(ee)==="Active"?"Active":"Inactive"})]})})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>Be(ee.USERID),className:"px-2 py-1 text-blue-600 hover:text-blue-800",title:"Edit Portal User",children:""}),e.jsx("button",{onClick:()=>we(ee),className:"px-2 py-1 text-orange-600 hover:text-orange-800",title:"Reset PIN",children:""}),e.jsx("button",{onClick:()=>se(ee),className:"px-2 py-1 text-green-600 hover:text-green-800",title:"Print",children:""})]})})]},ee.USERID))})]})}),D>0&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:De,disabled:S===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:ze,disabled:S===O,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm text-gray-700",children:"Show:"}),e.jsxs("select",{value:L,onChange:ee=>A(Number(ee.target.value)),className:"border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:30,children:"30"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{className:"text-sm text-gray-700",children:"entries"})]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(S-1)*L+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(S*L,D)})," of"," ",e.jsx("span",{className:"font-medium",children:D})," results"]})]}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{onClick:De,disabled:S===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),Array.from({length:Math.min(5,O)},(ee,_e)=>{let Qe;return O<=5||S<=3?Qe=_e+1:S>=O-2?Qe=O-4+_e:Qe=S-2+_e,e.jsx("button",{onClick:()=>be(Qe),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${S===Qe?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:Qe},Qe)}),e.jsxs("button",{onClick:ze,disabled:S===O,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:D}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Portal Users"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.filter(ee=>he(ee)==="Active").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active (Current Page)"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:n.filter(ee=>he(ee)==="Inactive").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Inactive (Current Page)"})]})]})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[95vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Portal User"}),e.jsx("button",{onClick:Ie,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-120px)] p-6",children:e.jsx(Nf,{employeeId:V,onSuccess:ye,isModal:!0,portalUserMode:!0})})]})}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[95vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add New Portal User"}),e.jsx("button",{onClick:()=>M(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-120px)] p-6",children:e.jsx(Nf,{onSuccess:Z,isModal:!0})})]})}),P&&B&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Reset PIN/SSN"}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["for ",B.NAME]})]}),e.jsx("button",{onClick:ve,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200 p-1 rounded-full hover:bg-gray-100",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"space-y-4 mb-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New PIN (4 digits)"}),e.jsx("input",{type:"text",value:T,onChange:ee=>{const _e=ee.target.value.replace(/\D/g,"").slice(0,4);H(_e)},maxLength:4,placeholder:"Enter 4-digit PIN",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),T&&!/^\d{4}$/.test(T)&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:"PIN must be exactly 4 digits"})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:ve,className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"button",onClick:Q,disabled:K||!/^\d{4}$/.test(T),className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:K?"Resetting...":"Reset"})]})]})})})]})}const TS=()=>{const{user:t}=Qt(),[s,r]=y.useState([]),[n,a]=y.useState([]),[l,o]=y.useState([]),[i,c]=y.useState(!1),[h,p]=y.useState(!1),[m,u]=y.useState(1),[x,j]=y.useState(10),[v,N]=y.useState(0),[f,d]=y.useState(0),[g,b]=y.useState({privilege:"all",appointment:"all",department:"all",shiftSchedule:"all"}),E=async()=>{c(!0);try{const Y=new URLSearchParams;Y.append("page",m),Y.append("limit",x),g.privilege!=="all"&&Y.append("status",g.privilege),g.appointment!=="all"&&Y.append("appointment",g.appointment),g.department!=="all"&&Y.append("department",g.department),g.shiftSchedule!=="all"&&Y.append("shiftSchedule",g.shiftSchedule);const G=await le.get(`/employees/paginated-with-shifts?${Y.toString()}`);r(G.data.employees||[]),N(G.data.total||0),d(Math.ceil((G.data.total||0)/x))}catch(Y){console.error("Error fetching employees:",Y)}finally{c(!1)}},R=async()=>{try{const Y=new URLSearchParams;return Y.append("limit","1000"),g.privilege!=="all"&&Y.append("status",g.privilege),g.appointment!=="all"&&Y.append("appointment",g.appointment),g.department!=="all"&&Y.append("department",g.department),g.shiftSchedule!=="all"&&Y.append("shiftSchedule",g.shiftSchedule),(await le.get(`/employees/paginated-with-shifts?${Y.toString()}`)).data.employees||[]}catch(Y){return console.error("Error fetching all employees for print:",Y),[]}},S=async()=>{try{const Y=await le.get("/departments");a(Y.data.data||[])}catch(Y){console.error("Error fetching departments:",Y),a([])}},k=async()=>{try{const Y=await le.get("/management/shiftschedules");o(Y.data||[])}catch(Y){console.error("Error fetching shift schedules:",Y),o([])}};y.useEffect(()=>{E()},[g,m,x]),y.useEffect(()=>{S(),k()},[]);const L=(Y,G)=>{b(V=>({...V,[Y]:G})),u(1)},A=()=>{b({privilege:"all",appointment:"all",department:"all",shiftSchedule:"all"}),u(1)},D=Y=>{u(Y)},I=Y=>{j(Y),u(1)},O=async()=>{p(!0);const Y=await R();new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});const G=`
      @media print {
        .no-print { display: none !important; }
        
        /* Hide DTR Management sidebar and navigation */
        .fixed.inset-y-0.left-0.z-50,
        .fixed.inset-0.bg-gray-600,
        nav,
        header,
        .bg-white.shadow-sm.border-b,
        .flex.items-center.justify-between.px-6.py-4,
        .flex.items-center.space-x-4,
        .bg-white.rounded-xl.shadow-sm.border.border-gray-200.p-6:first-child,
        .flex.items-center.justify-between:first-child {
          display: none !important;
        }
        
        /* Reset main content margins for print */
        .flex-1.transition-all.duration-300 {
          margin-left: 0 !important;
        }
        
        /* Print-specific styles */
        body { 
          font-size: 12px; 
          margin: 0;
          padding: 0;
        }
        .print-header {
          display: block !important;
          text-align: center;
          margin-bottom: 20px;
          border-bottom: 2px solid #333;
          padding-bottom: 10px;
        }
        .print-logo {
          height: 60px;
          margin-bottom: 10px;
        }
        .print-title {
          font-size: 18px;
          font-weight: bold;
          margin-bottom: 5px;
        }
        .print-subtitle {
          font-size: 14px;
          color: #666;
        }
        .print-table {
          width: 100%;
          border-collapse: collapse;
          margin-bottom: 20px;
        }
        .print-table th, 
        .print-table td { 
          border: 1px solid #333; 
          padding: 6px; 
          text-align: left; 
          font-size: 11px;
        }
        .print-table th { 
          background-color: #f0f0f0; 
          font-weight: bold; 
        }
        .print-footer {
          display: block !important;
          text-align: center;
          margin-top: 20px;
          font-size: 10px;
          color: #666;
          border-top: 1px solid #ccc;
          padding-top: 10px;
        }
        @page {
          margin: 0.5in;
        }
      }
    `,V=document.createElement("style");V.textContent=G,document.head.appendChild(V);const W=s;r(Y),setTimeout(()=>{window.print(),setTimeout(()=>{r(W),document.head.removeChild(V),p(!1)},1e3)},100)},C=Y=>Y>=0?"Active":"Inactive",F=Y=>Y>=0?"text-green-600 bg-green-100":"text-red-600 bg-red-100",U=()=>{const Y=[];if(f<=5)for(let V=1;V<=f;V++)Y.push(V);else{const V=Math.max(1,m-2),W=Math.min(f,V+5-1);for(let _=V;_<=W;_++)Y.push(_)}return Y};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"print-header no-print",style:{display:"none"},children:[e.jsx("img",{src:xi,alt:"Logo",className:"print-logo"}),e.jsx("div",{className:"print-title",children:"Human Resource Management Office"}),e.jsxs("div",{className:"print-subtitle",children:["List as of ",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Employee List Report"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Generate and print employee list with filters"})]}),e.jsxs("button",{onClick:O,disabled:h||v===0,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),e.jsx("span",{children:h?"Printing...":"Print List"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 no-print",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"}),e.jsx("button",{onClick:A,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",children:"Clear Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:g.privilege,onChange:Y=>L("privilege",Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Employees"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment"}),e.jsxs("select",{value:g.appointment,onChange:Y=>L("appointment",Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Appointments"}),e.jsx("option",{value:"1",children:"Regular"}),e.jsx("option",{value:"2",children:"Casual"}),e.jsx("option",{value:"3",children:"Co-Terminus"}),e.jsx("option",{value:"4",children:"Provisional"}),e.jsx("option",{value:"5",children:"JO"}),e.jsx("option",{value:"6",children:"PB"}),e.jsx("option",{value:"7",children:"SE"}),e.jsx("option",{value:"8",children:"Others"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsxs("select",{value:g.department,onChange:Y=>L("department",Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Departments"}),n.map(Y=>e.jsx("option",{value:Y.DEPTID,children:Y.DEPTNAME},Y.DEPTID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shift Schedule"}),e.jsxs("select",{value:g.shiftSchedule,onChange:Y=>L("shiftSchedule",Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Schedules"}),l.map(Y=>e.jsx("option",{value:Y.SHIFTNO,children:Y.SHIFTNAME},Y.SHIFTNO))]})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 no-print",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Employee List (",v," employees)"]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Show:"}),e.jsxs("select",{value:x,onChange:Y=>I(parseInt(Y.target.value)),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{className:"text-sm text-gray-700",children:"per page"})]}),i&&e.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[e.jsxs("svg",{className:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-sm",children:"Loading..."})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 print-table",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Badge No."}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shift"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Appointment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(Y=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Y.USERID}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Y.BADGENUMBER}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Y.NAME}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Y.TITLE||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Y.DEPTNAME||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Y.SHIFTNAME||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:iS(Y.Appointment)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${F(Y.privilege)}`,children:C(Y.privilege)})})]},Y.USERID))})]})}),f>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 no-print",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>D(m-1),disabled:m===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>D(m+1),disabled:m===f,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(m-1)*x+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(m*x,v)})," ","of ",e.jsx("span",{className:"font-medium",children:v})," results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>D(m-1),disabled:m===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),U().map(Y=>e.jsx("button",{onClick:()=>D(Y),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${Y===m?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:Y},Y)),e.jsxs("button",{onClick:()=>D(m+1),disabled:m===f,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})]}),e.jsxs("div",{className:"print-footer no-print",style:{display:"none"},children:["System Generated (",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),") By: ",(t==null?void 0:t.USERID)||"Unknown"]})]})},LS=()=>{const[t,s]=y.useState([]),[r,n]=y.useState([]),[a,l]=y.useState(null),[o,i]=y.useState(0),[c,h]=y.useState([]),[p,m]=y.useState(!1),[u,x]=y.useState(""),[j,v]=y.useState(!1),[N,f]=y.useState(null),[d,g]=y.useState(!1),[b,E]=y.useState(!1),[R,S]=y.useState(null),[k,L]=y.useState(!1),[A,D]=y.useState(""),[I,O]=y.useState("all"),[C,F]=y.useState([]),[U,Y]=y.useState(0),[G,V]=y.useState(!1),[W,_]=y.useState(""),[M,P]=y.useState(0),[$,B]=y.useState(null),w=y.useRef(null),T=["Right Thumb","Right Index","Right Middle","Right Ring","Right Little","Left Thumb","Left Index","Left Middle","Left Ring","Left Little"],H=async se=>{var we;try{const ve=await le.get(`/bio-enroll/enrollment-progress/${se}`);if(ve.data.success){const Q=ve.data;if(console.log(" Status:",Q.status),Q.status==="initializing"||Q.status==="capturing")x(" DigitalPersona enrollment window is active"),_("Follow the instructions in the enrollment window...");else if(Q.status==="complete"||Q.status==="captured"){console.log(" All samples captured - showing confirmation"),console.log(" Template data:",{hasTemplateBase64:!!Q.templateBase64,samplesCollected:Q.samplesCollected,avgQuality:Q.avgQuality,userName:Q.userName}),w.current&&(console.log(" Stopping progress polling - enrollment complete"),clearInterval(w.current),w.current=null);const ne=Q.detectedFinger||Q.fingerId,he={enrollmentId:se,userId:Q.userId,fingerId:ne,name:Q.userName,templateBase64:Q.templateBase64,samplesCollected:Q.samplesCollected||3,avgQuality:Q.avgQuality||95,qualityScores:Q.qualityScores||[95,95,95],templateSize:Q.templateSize};console.log(" Setting capturedTemplate:",he),console.log(" Detected finger:",T[ne]),S(he),i(ne),P(Q.samplesCollected||3),x(` ${T[ne]} captured successfully!`),_(`Template size: ${Q.templateSize} bytes | Quality: ${Q.avgQuality||95}%`),m(!1),console.log(" Showing save confirmation modal..."),L(!0)}else Q.status==="error"&&(w.current&&(clearInterval(w.current),w.current=null),m(!1),x(` Enrollment failed: ${Q.error||"Unknown error"}`),_(""),P(0))}else console.log(" Progress not found - stopping polling"),w.current&&(clearInterval(w.current),w.current=null)}catch(ve){((we=ve.response)==null?void 0:we.status)===404?(console.log(" Progress not found (404) - stopping polling"),w.current&&(clearInterval(w.current),w.current=null)):console.warn("Progress polling error:",ve.message)}};y.useEffect(()=>()=>{w.current&&(clearInterval(w.current),w.current=null)},[]),y.useEffect(()=>{(async()=>{try{console.log(" Initializing bio enrollment system...");const we=await le.get("/bio-enroll/health");if(we.data.success){if(v(!0),V(!0),we.data.deviceInfo){f(we.data.deviceInfo);const ve=we.data.deviceInfo.model||we.data.deviceInfo.name,Q=we.data.deviceInfo.serialNumber;x(` ${ve} ready${Q!=="Unknown"?` (SN: ${Q})`:""}`),console.log(" Device detected:",ve)}else x(" Bio enrollment system ready (No device detected)"),console.log(" No device information available");console.log(" Bio enrollment system initialized successfully"),console.log("   SDK Ready:",we.data.sdkReady)}else x(" Bio enrollment system not available")}catch(we){console.error("Failed to initialize bio enrollment system:",we),x(" Failed to initialize bio enrollment system"),v(!1),V(!1)}})(),K()},[]),y.useEffect(()=>{J()},[A,I,t]);const K=async()=>{try{g(!0);const se=await le.get("/biometric/employees-bio-status");s(se.data.employees||[])}catch(se){console.error("Error fetching employees:",se),s([])}finally{g(!1)}},J=()=>{let se=t;A&&(se=se.filter(we=>{var ve,Q;return((ve=we.NAME)==null?void 0:ve.toLowerCase().includes(A.toLowerCase()))||((Q=we.BADGENUMBER)==null?void 0:Q.toLowerCase().includes(A.toLowerCase()))})),I!=="all"&&(se=se.filter(we=>I==="enrolled"?we.BIO_COUNT>0:I==="not-enrolled"?we.BIO_COUNT===0:!0)),n(se)},X=async se=>{try{const we=await le.get(`/biometric/enrolled-fingers/${se}`);h(we.data.fingers||[])}catch(we){console.error("Error fetching enrolled fingers:",we),h([])}},pe=async se=>{l(se),await X(se.USERID),i(0),E(!0)},oe=()=>{E(!1),l(null),h([]),x(" Reader ready"),K()},ce=async()=>{if(R)try{w.current&&(console.log(" Stopping progress polling before save"),clearInterval(w.current),w.current=null),x(" Saving enrollment to database..."),_("Please wait..."),console.log(" Saving captured template to database...");const se=await le.post("/bio-enroll/save-enrollment",R);if(se.data.success)console.log(" Enrollment saved successfully:",se.data),x(" Fingerprint enrolled and saved successfully!"),_(`Saved with FUID: ${se.data.fuid}`),L(!1),S(null),B(null),await X(a.USERID),setTimeout(()=>{P(0),_(""),x(" Ready for next enrollment."),K()},2e3);else throw new Error(se.data.message||"Failed to save enrollment")}catch(se){console.error("Error saving enrollment:",se),x(` Failed to save enrollment: ${se.message}`),_(""),L(!1),S(null),B(null),w.current&&(clearInterval(w.current),w.current=null)}},Ae=()=>{console.log(" User stopped active enrollment"),w.current&&(clearInterval(w.current),w.current=null,console.log(" Progress polling stopped")),m(!1),B(null),P(0),_(""),L(!1),S(null),x(" Enrollment cancelled by user during capture process."),console.log(" Enrollment process stopped and states reset"),setTimeout(()=>{x("Ready for enrollment.")},3e3)},Be=()=>{console.log(" User cancelled enrollment after capture"),w.current&&(console.log(" Stopping progress polling - enrollment cancelled"),clearInterval(w.current),w.current=null),L(!1),S(null),B(null),P(0),_(""),x(" Enrollment cancelled. Template not saved."),setTimeout(()=>{x(" Ready for enrollment.")},2e3)},Ie=async se=>{if(a&&window.confirm(`Delete ${T[se]} enrollment?

This will permanently remove this fingerprint from the system.`))try{console.log(` Deleting finger ${se} for user ${a.USERID}...`),x(` Deleting ${T[se]}...`),(await le.delete(`/biometric/delete-finger/${a.USERID}/${se}`)).data.success&&(console.log(` ${T[se]} deleted successfully`),x(` ${T[se]} deleted successfully`),await X(a.USERID),await K(),setTimeout(()=>{x(" Ready for enrollment")},2e3))}catch(we){console.error("Delete error:",we),x(` Failed to delete fingerprint: ${we.message}`)}},ye=async()=>{if(!a||!G){x(" No employee selected or bio enrollment system not available");return}if(p){console.warn(" Enrollment already in progress, ignoring duplicate call");return}try{w.current&&(clearInterval(w.current),w.current=null),m(!0),P(0),x(" Opening DigitalPersona enrollment window..."),_("The enrollment window will appear shortly..."),console.log(" Enrollment state set - using DPFP.Gui UI Support"),console.log(" Starting bio enrollment process..."),console.log("   Employee:",a.NAME,"(ID:",a.USERID,")"),console.log("   Finger:",T[o],"(ID:",o,")");const se=await le.post("/bio-enroll/enroll-finger",{userId:a.USERID,fingerId:o});if(se.data.success&&se.data.enrollmentId){console.log(" Enrollment started:",se.data),console.log(" Setting up progress polling for enrollment ID:",se.data.enrollmentId);const we=se.data.enrollmentId;B(we),m(!0),w.current=setInterval(()=>{H(we)},500),console.log(" Progress polling interval set up for ID:",we)}else throw new Error(se.data.message||"Enrollment failed to start")}catch(se){console.error("Enhanced enrollment error:",se),x(` Enrollment failed: ${se.message}`),_(""),P(0),m(!1),w.current&&(clearInterval(w.current),w.current=null)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Enroll Employee Biometric"}),e.jsx("p",{className:"text-gray-600",children:"Manage employee fingerprints for web login authentication"})]}),e.jsx("div",{className:`mb-6 p-4 rounded-lg ${j?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${j?"bg-green-500 animate-pulse":"bg-yellow-500"}`}),e.jsx("span",{className:`font-medium ${j?"text-green-800":"text-yellow-800"}`,children:u||"Initializing..."})]})}),e.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Search by name or badge number...",value:A,onChange:se=>D(se.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("div",{children:e.jsxs("select",{value:I,onChange:se=>O(se.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Employees"}),e.jsx("option",{value:"enrolled",children:"With Bio Login"}),e.jsx("option",{value:"not-enrolled",children:"No Bio Login"})]})})]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:["Showing ",r.length," of ",t.length," employees"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:d?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"inline-block w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading employees..."})]}):r.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"No employees found"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Badge Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(se=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:se.BADGENUMBER}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:se.NAME}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:se.BIO_COUNT>0?e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),se.BIO_COUNT," finger",se.BIO_COUNT>1?"s":""]}):e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"No bio login"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("button",{onClick:()=>pe(se),disabled:!j,className:`inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-all ${j?"bg-blue-600 text-white hover:bg-blue-700 shadow hover:shadow-lg transform hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:"Enroll biometric",children:[e.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})}),"Enroll"]})})]},se.USERID))})]})})}),b&&a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Enroll Biometric"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[a.BADGENUMBER," - ",a.NAME]})]}),e.jsx("button",{onClick:oe,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:p,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-blue-900",children:"Department:"})," ",e.jsx("span",{className:"text-blue-800",children:a.DEPTNAME||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-blue-900",children:"Enrolled Fingers:"})," ",e.jsxs("span",{className:"text-blue-800",children:[c.length,"/10"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-blue-900",children:"Status:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs ${c.length>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.length>0?"Has Bio Login":"No Bio Login"})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-4 text-center",children:"DigitalPersona Biometric Enrollment"}),c.length>0&&e.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg border-2 border-green-200",children:[e.jsxs("h5",{className:"text-sm font-semibold text-green-800 mb-3 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Enrolled Fingers (",c.length,"/10)"]}),e.jsx("div",{className:"space-y-2",children:c.map(se=>e.jsxs("div",{className:"flex items-center justify-between bg-green-50 p-3 rounded-lg border border-green-200",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"text-sm font-medium text-green-800",children:T[se]})}),e.jsx("button",{onClick:()=>Ie(se),disabled:p,className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:`Delete ${T[se]} enrollment`,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},se))}),e.jsx("p",{className:"mt-3 text-xs text-gray-500 text-center",children:"Click the delete icon to remove a finger enrollment"})]}),!p&&e.jsx("div",{className:"mb-6 bg-blue-50 p-4 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"How it works:"}),e.jsx("p",{className:"text-xs text-blue-700",children:"The DigitalPersona SDK will automatically detect which finger you place on the scanner. Simply place any finger on the device when the enrollment window appears, and the system will identify and enroll it for you."})]})]})}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("svg",{className:`w-24 h-24 mx-auto mb-4 ${p?"text-blue-500 animate-pulse":"text-gray-400"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})}),e.jsx("p",{className:"text-sm text-gray-600",children:p?"Follow the instructions in the DigitalPersona enrollment window":"Click the button below to start enrollment"})]}),p&&e.jsx("div",{className:"mb-6 bg-blue-50 border-2 border-blue-400 p-6 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"inline-block w-20 h-20 bg-blue-500 rounded-full flex items-center justify-center animate-pulse",children:e.jsx("span",{className:"text-4xl",children:""})})}),e.jsx("p",{className:"text-lg font-bold text-blue-800 mb-2",children:"DigitalPersona Enrollment Window Active"}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"A separate enrollment window has appeared. Please follow the on-screen instructions to complete fingerprint enrollment."}),e.jsxs("div",{className:"bg-white p-3 rounded border border-blue-200 mb-3",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:e.jsx("strong",{children:"Instructions:"})}),e.jsxs("ul",{className:"text-xs text-left text-gray-600 space-y-1",children:[e.jsx("li",{children:" Place your finger on the scanner when prompted"}),e.jsx("li",{children:" Follow the visual feedback in the enrollment window"}),e.jsx("li",{children:" The SDK will guide you through multiple samples"}),e.jsx("li",{children:" Keep the window in focus until completion"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 italic",children:W})]})}),p?e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:ye,disabled:!0,className:"w-full py-4 px-6 rounded-lg font-semibold text-white bg-gray-400 cursor-not-allowed",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-3"}),"Enrolling..."]})}),e.jsx("button",{onClick:Ae,className:"w-full py-3 px-6 rounded-lg font-medium text-red-600 bg-red-50 hover:bg-red-100 border-2 border-red-200 transition-all",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel Enrollment"]})})]}):e.jsx("button",{onClick:ye,disabled:!j,className:`w-full py-4 px-6 rounded-lg font-semibold text-white transition-all ${j?"bg-blue-600 hover:bg-blue-700 shadow-lg hover:shadow-xl transform hover:scale-105":"bg-gray-400 cursor-not-allowed"}`,children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})}),"Start Enrollment"]})}),e.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200 text-center",children:e.jsx("p",{className:"text-sm font-medium text-gray-700",children:u})})]})]})}),k&&R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-2xl w-full p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Fingerprint Captured Successfully!"}),e.jsx("p",{className:"text-gray-600",children:"All 3 samples have been captured. Review and confirm to save."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Capture Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Employee:"}),e.jsx("span",{className:"ml-2 font-medium",children:a==null?void 0:a.NAME})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Finger:"}),e.jsx("span",{className:"ml-2 font-medium",children:T[o]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Badge Number:"}),e.jsx("span",{className:"ml-2 font-medium",children:a==null?void 0:a.BADGENUMBER})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Samples Captured:"}),e.jsx("span",{className:"ml-2 font-medium text-green-600",children:(R==null?void 0:R.samplesCollected)||3})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Template Size:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[(R==null?void 0:R.templateSize)||0," bytes"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Quality:"}),e.jsxs("span",{className:"ml-2 font-medium text-green-600",children:[(R==null?void 0:R.avgQuality)||95,"%"]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:Be,className:"flex-1 py-3 px-6 rounded-lg font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 transition-all",children:"Discard"}),e.jsx("button",{onClick:ce,className:"flex-1 py-3 px-6 rounded-lg font-medium text-white bg-green-600 hover:bg-green-700 shadow-lg hover:shadow-xl transition-all",children:"Save Enrollment"})]})]})})]})]})})]})},IS=()=>{const[t,s]=y.useState([]),[r,n]=y.useState(!0),[a,l]=y.useState(""),[o,i]=y.useState(!1),[c,h]=y.useState(null),[p,m]=y.useState(!1),[u,x]=y.useState({shiftname:"",shifttimemode:"AM"}),j=L=>{if(!L)return"";const A=String(L);return A.length>=5?A.slice(0,5):A},v=({name:L,value:A,onChange:D})=>{const I=j(A),[O,C]=I?I.split(":"):["",""],F=Array.from({length:24},(V,W)=>String(W).padStart(2,"0")),U=Array.from({length:60},(V,W)=>String(W).padStart(2,"0")),Y=V=>D({target:{name:L,value:`${V.target.value||"00"}:${C||"00"}`}}),G=V=>D({target:{name:L,value:`${O||"00"}:${V.target.value||"00"}`}});return e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"mt-1 w-full border rounded px-3 py-2",value:O,onChange:Y,"aria-label":`${L}-hours`,children:[e.jsx("option",{value:"",children:"HH"}),F.map(V=>e.jsx("option",{value:V,children:V},V))]}),e.jsx("span",{className:"self-center text-gray-500",children:":"}),e.jsxs("select",{className:"mt-1 w-full border rounded px-3 py-2",value:C,onChange:G,"aria-label":`${L}-minutes`,children:[e.jsx("option",{value:"",children:"MM"}),U.map(V=>e.jsx("option",{value:V,children:V},V))]})]})},N=async()=>{var L;n(!0);try{const A=await le.get("/dtr-shifts");s(((L=A.data)==null?void 0:L.data)||[])}catch(A){console.error(A)}finally{n(!1)}};y.useEffect(()=>{N()},[]);const f=y.useMemo(()=>(t||[]).filter(L=>(L.shiftname||"").toLowerCase().includes((a||"").toLowerCase())),[t,a]),d=()=>{h(null),x({shiftname:"",shifttimemode:"AM",shift_checkin:"08:00",shift_checkin_start:"",shift_checkin_end:"",shift_checkout:"",shift_checkout_start:"",shift_checkout_end:"",is_ot:!1,credits:""}),i(!0)},g=L=>{h(L),x({...L,shift_checkin:j(L.shift_checkin),shift_checkin_start:j(L.shift_checkin_start),shift_checkin_end:j(L.shift_checkin_end),shift_checkout:j(L.shift_checkout),shift_checkout_start:j(L.shift_checkout_start),shift_checkout_end:j(L.shift_checkout_end)}),i(!0)},b=L=>x(A=>({...A,[L.target.name]:L.target.value})),E=L=>x(A=>({...A,[L.target.name]:j(L.target.value)})),R=async()=>{var L;if(!((L=u.shiftname)!=null&&L.trim())){alert("Shift Name is required");return}m(!0);try{const A=String(u.shifttimemode||"AM").toUpperCase(),I={...u,shifttimemode:["AM","PM","AMPM"].includes(A)?A:"AM"};c?await le.put(`/dtr-shifts/${c.id}`,I):await le.post("/dtr-shifts",I),i(!1),N()}catch(A){console.error("Save shift error",A),alert("Failed to save shift")}finally{m(!1)}},S=async L=>{if(confirm("Delete this shift?"))try{await le.delete(`/dtr-shifts/${L.id}`),N()}catch(A){console.error(A),alert("Delete failed")}},k=L=>{if(!L)return"";const A=String(L);return A.length>=5?A.slice(0,5):A};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"DTR Shifts"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{value:a,onChange:L=>l(L.target.value),placeholder:"Search shift name",className:"px-3 py-2 border rounded text-sm"}),e.jsx("button",{className:"px-3 py-2 bg-blue-600 text-white rounded",onClick:d,children:"+ Add Shift"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Shift Name"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Mode"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Check-in"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Check-in Start"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Check-in End"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Check-out"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Check-out Start"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Check-out End"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"OT"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Credits"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"Loading"})}):f.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"No records"})}):f.map(L=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:L.shiftname}),e.jsx("td",{className:"px-4 py-2",children:L.shifttimemode}),e.jsx("td",{className:"px-4 py-2",children:k(L.shift_checkin)}),e.jsx("td",{className:"px-4 py-2",children:k(L.shift_checkin_start)}),e.jsx("td",{className:"px-4 py-2",children:k(L.shift_checkin_end)}),e.jsx("td",{className:"px-4 py-2",children:k(L.shift_checkout)}),e.jsx("td",{className:"px-4 py-2",children:k(L.shift_checkout_start)}),e.jsx("td",{className:"px-4 py-2",children:k(L.shift_checkout_end)}),e.jsx("td",{className:"px-4 py-2",children:L.is_ot?"Yes":"No"}),e.jsx("td",{className:"px-4 py-2",children:L.credits!=null?Number(L.credits).toFixed(1):""}),e.jsxs("td",{className:"px-4 py-2",children:[e.jsx("button",{className:"px-2 py-1 text-blue-600 hover:text-blue-800",onClick:()=>g(L),title:"Edit",children:""}),e.jsx("button",{className:"px-2 py-1 text-red-600 hover:text-red-800",onClick:()=>S(L),title:"Delete",children:""})]})]},L.id))})]})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-3xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:c?"Edit Shift":"Add Shift"}),e.jsx("button",{className:"text-gray-500",onClick:()=>i(!1),children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Shift Name"}),e.jsx("input",{name:"shiftname",className:"mt-1 w-full border rounded px-3 py-2",value:u.shiftname||"",onChange:b})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Mode (AM/PM)"}),e.jsxs("select",{name:"shifttimemode",className:"mt-1 w-full border rounded px-3 py-2",value:u.shifttimemode||"AM",onChange:b,children:[e.jsx("option",{value:"AM",children:"AM"}),e.jsx("option",{value:"PM",children:"PM"}),e.jsx("option",{value:"AMPM",children:"AMPM"})]})]}),e.jsxs("div",{className:"md:col-span-3 bg-gray-50 border rounded p-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Check-in Window"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Check-in"}),e.jsx(v,{name:"shift_checkin",value:u.shift_checkin,onChange:E})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Check-in Start"}),e.jsx(v,{name:"shift_checkin_start",value:u.shift_checkin_start,onChange:E})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Check-in End"}),e.jsx(v,{name:"shift_checkin_end",value:u.shift_checkin_end,onChange:E})]})]})]}),e.jsxs("div",{className:"md:col-span-3 bg-gray-50 border rounded p-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Check-out Window"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Check-out"}),e.jsx(v,{name:"shift_checkout",value:u.shift_checkout,onChange:E})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Check-out Start"}),e.jsx(v,{name:"shift_checkout_start",value:u.shift_checkout_start,onChange:E})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Check-out End"}),e.jsx(v,{name:"shift_checkout_end",value:u.shift_checkout_end,onChange:E})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Is OT"}),e.jsx("input",{type:"checkbox",name:"is_ot",className:"mt-2",checked:!!u.is_ot,onChange:L=>x(A=>({...A,is_ot:L.target.checked}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Credits"}),e.jsx("input",{type:"number",step:"0.1",min:"0",name:"credits",className:"mt-1 w-full border rounded px-3 py-2",value:u.credits||"",onChange:b})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{className:"px-4 py-2 rounded border",onClick:()=>i(!1),children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-60",onClick:R,disabled:p,children:p?"Saving":"Save"})]})]})})]})},Yc=(t,s,r,n)=>{const a=(t||"").trim(),l=(s||"").trim(),o=(r||"").trim()?`${(r||"").trim().charAt(0)}.`:"",i=(n||"").trim();return`${a}, ${l} ${o}${i?" "+i:""}`.trim()},ir=t=>{if(!t)return"";const s=String(t);return s.length>=5?s.slice(0,5):s},Un=t=>{if(!t)return;const s=String(t).trim();return s.startsWith("data:")?s:`data:image/jpeg;base64,${s}`},qc=(t,s)=>{const r=(t||"").trim(),n=(s||"").trim(),a=r?r.charAt(0).toUpperCase():"",l=n?n.charAt(0).toUpperCase():"";return a+l||""},MS=()=>{const[t,s]=y.useState([]),[r,n]=y.useState({}),[a,l]=y.useState({}),[o,i]=y.useState(""),[c,h]=y.useState(!0),[p,m]=y.useState([]),[u,x]=y.useState(!1),[j,v]=y.useState(null),[N,f]=y.useState(null),[d,g]=y.useState(!1),[b,E]=y.useState({}),[R,S]=y.useState(""),[k,L]=y.useState(!1),[A,D]=y.useState({shiftid:"",shiftids:[]});y.useEffect(()=>{(async()=>{var M,P,$;h(!0);try{const[B,w,T]=await Promise.all([le.get("/201-employees"),le.get("/dtr-shifts"),le.get("/dtr-assigned-shifts")]),H=(((M=B.data)==null?void 0:M.data)||[]).map(X=>({objid:X.objid,surname:X.surname||"",firstname:X.firstname||"",middlename:X.middlename||"",extension:X.extension||"",fullname:X.fullname||"",photo_path:X.photo_path||null}));s(H),m(((P=w.data)==null?void 0:P.data)||[]);const J=((($=T.data)==null?void 0:$.data)||[]).reduce((X,pe)=>{const oe=pe.emp_objid;return X[oe]||(X[oe]=[]),X[oe].push(pe),X},{});l(J)}catch(B){console.error("Init failed",B)}finally{h(!1)}})()},[]);const I=y.useMemo(()=>{const _=(o||"").toLowerCase();return(t||[]).filter(M=>{const P=Yc(M.surname,M.firstname,M.middlename,M.extension).toLowerCase(),$=(M.fullname||"").toLowerCase();return P.includes(_)||$.includes(_)})},[t,o]),O=async _=>{const M=_.objid;if(n(P=>({...P,[M]:!P[M]})),!a[M])try{const P=await le.get(`/dtr-assigned-shifts?emp_objid=${encodeURIComponent(M)}`);l($=>{var B;return{...$,[M]:((B=P.data)==null?void 0:B.data)||[]}})}catch(P){console.error("Load assignments failed",P)}},C=async()=>{var _;try{const $=(((_=(await le.get("/dtr-assigned-shifts")).data)==null?void 0:_.data)||[]).reduce((B,w)=>{const T=w.emp_objid;return B[T]||(B[T]=[]),B[T].push(w),B},{});l($)}catch(M){console.error("Refresh all assignments failed",M)}},F=async()=>{var _,M;if(!R){alert("Please select a shift to assign");return}if(confirm("Assign this shift to all employees without this shift?")){L(!0);try{await le.post("/dtr-assigned-shifts/bulk-assign",{shiftid:Number(R)}),await C(),alert("Bulk assign completed")}catch(P){console.error("Bulk assign failed",P),alert(((M=(_=P==null?void 0:P.response)==null?void 0:_.data)==null?void 0:M.message)||"Bulk assign failed")}finally{L(!1)}}},U=_=>{v(_),f(null),D({shiftid:"",shiftids:[]}),x(!0)},Y=(_,M)=>{v(_),f(M),D({shiftid:M.shiftid||"",shiftids:[]}),x(!0)},G=async()=>{if(j){if(N){if(!A.shiftid){alert("Please select a shift");return}}else if((Array.isArray(A.shiftids)?A.shiftids:[]).length===0){alert("Please select at least one shift");return}g(!0);try{if(N)await le.put(`/dtr-assigned-shifts/${N.objid}`,{shiftid:Number(A.shiftid),emp_objid:j.objid});else{const M=Array.isArray(A.shiftids)?A.shiftids:[];for(const P of M)await le.post("/dtr-assigned-shifts",{emp_objid:j.objid,shiftid:Number(P)})}const _=await le.get(`/dtr-assigned-shifts?emp_objid=${encodeURIComponent(j.objid)}`);l(M=>{var P;return{...M,[j.objid]:((P=_.data)==null?void 0:P.data)||[]}}),x(!1)}catch(_){console.error("Save failed",_),alert("Failed to save")}finally{g(!1)}}},V=async(_,M)=>{if(confirm("Delete this assignment?"))try{await le.delete(`/dtr-assigned-shifts/${M.objid}`);const P=await le.get(`/dtr-assigned-shifts?emp_objid=${encodeURIComponent(_.objid)}`);l($=>{var B;return{...$,[_.objid]:((B=P.data)==null?void 0:B.data)||[]}})}catch(P){console.error("Delete failed",P),alert("Failed to delete")}},W=async(_,M)=>{const P=M.objid;E($=>({...$,[P]:!0}));try{const $=Number(M.is_used)===1?0:1;await le.put(`/dtr-assigned-shifts/${P}`,{is_used:$,emp_objid:_.objid,shiftid:M.shiftid});const B=await le.get(`/dtr-assigned-shifts?emp_objid=${encodeURIComponent(_.objid)}`);l(w=>{var T;return{...w,[_.objid]:((T=B.data)==null?void 0:T.data)||[]}})}catch($){console.error("Toggle is_used failed",$),alert("Failed to update In-Used")}finally{E($=>({...$,[P]:!1}))}};return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("h2",{className:"text-xl font-semibold",children:"Assign Shift"})}),e.jsx("div",{className:"bg-white p-3 rounded-md shadow mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Employee Search"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",placeholder:"Type name",value:o,onChange:_=>i(_.target.value)})]}),e.jsxs("div",{className:"md:col-span-2 flex items-end gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Assign To All"}),e.jsxs("select",{className:"mt-1 w-full border rounded px-3 py-2",value:R,onChange:_=>S(_.target.value),children:[e.jsx("option",{value:"",children:"Select shift"}),p.map(_=>e.jsxs("option",{value:_.id,children:[_.shiftname," (",_.shifttimemode,") ",ir(_.shift_checkin)," - ",ir(_.shift_checkout)]},_.id))]})]}),e.jsx("button",{className:"h-10 px-4 rounded bg-blue-600 text-white disabled:opacity-60",disabled:k||!R,onClick:F,children:k?"Assigning":"Assign To All"})]})]})}),c?e.jsx("div",{className:"text-gray-500",children:"Loading"}):e.jsx("div",{className:"bg-white rounded-lg shadow",children:(I||[]).map(_=>{const M=Yc(_.surname,_.firstname,_.middlename,_.extension),P=!!r[_.objid],$=a[_.objid]||[],B=$.filter(T=>Number(T.is_used)===1),w=B.length>0?B:$;return e.jsxs("div",{className:"border-b",children:[e.jsxs("div",{className:"sticky top-0 bg-gray-50 px-4 py-3 flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center text-xs font-semibold text-gray-600",children:Un(_.photo_path)?e.jsx("img",{src:Un(_.photo_path),alt:"",className:"w-full h-full object-cover"}):e.jsx("span",{children:qc(_.surname,_.firstname)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:M}),w.length>0&&e.jsxs("div",{className:"mt-0.5 flex items-center gap-2 flex-wrap text-xs",children:[e.jsx("span",{className:"text-green-700 font-semibold",children:"Active:"}),w.map(T=>e.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full border ${Number(T.is_used)===1?"border-green-300 text-green-800 bg-green-50":"border-red-300 text-red-600 bg-red-50"}`,children:[T.shiftname," (",T.shifttimemode,") ",ir(T.shift_checkin)," - ",ir(T.shift_checkout)]},T.objid))]})]}),e.jsx("button",{className:"ml-auto w-8 h-8 flex items-center justify-center rounded-full border hover:bg-gray-100",title:P?"Hide":"Show",onClick:()=>O(_),children:P?"":""}),e.jsx("button",{className:"ml-2 w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 text-white hover:bg-blue-700",title:"Assign",onClick:()=>U(_),children:"+"})]}),P&&e.jsx("div",{className:"px-4 py-3 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Shift Name"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Period"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Check-in"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Check-out"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"In-Used"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Assigned By"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:$.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-3 py-4 text-center text-gray-500",children:"No assignments"})}):$.map(T=>{var H,K,J,X;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:T.shiftname}),e.jsx("td",{className:"px-3 py-2",children:T.shifttimemode}),e.jsx("td",{className:"px-3 py-2",children:ir(T.shift_checkin)}),e.jsx("td",{className:"px-3 py-2",children:ir(T.shift_checkout)}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex rounded-full border overflow-hidden text-xs",children:[e.jsx("button",{className:`px-3 py-1 ${Number(T.is_used)===1?"bg-green-600 text-white":"bg-white text-gray-700"} disabled:opacity-60`,onClick:()=>{Number(T.is_used)!==1&&W(_,T)},disabled:!!b[T.objid],children:"Yes"}),e.jsx("button",{className:`px-3 py-1 border-l ${Number(T.is_used)===0?"bg-gray-600 text-white":"bg-white text-gray-700"} disabled:opacity-60`,onClick:()=>{Number(T.is_used)!==0&&W(_,T)},disabled:!!b[T.objid],children:"No"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("div",{className:"w-7 h-7 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center text-[10px] font-semibold text-gray-600 cursor-pointer",title:T.createdby_employee_name||T.createdby_username||"Unknown user",children:Un(T.createdby_photo_path)?e.jsx("img",{src:Un(T.createdby_photo_path),alt:"",className:"w-full h-full object-cover"}):e.jsx("span",{children:qc(((K=(H=T.createdby_employee_name)==null?void 0:H.split(","))==null?void 0:K[0])||"",((X=(J=T.createdby_employee_name)==null?void 0:J.split(","))==null?void 0:X[1])||"")})})}),e.jsxs("td",{className:"px-3 py-2",children:[e.jsx("button",{className:"w-8 h-8 inline-flex items-center justify-center rounded-full hover:bg-blue-50 text-blue-600",onClick:()=>Y(_,T),title:"Edit",children:""}),e.jsx("button",{className:"ml-1 w-8 h-8 inline-flex items-center justify-center rounded-full hover:bg-red-50 text-red-600",onClick:()=>V(_,T),title:"Delete",children:""})]})]},T.objid)})})]})})]},_.objid)})}),u&&j&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:N?"Edit Assignment":"Assign Shift"}),e.jsx("button",{className:"text-gray-500",onClick:()=>x(!1),children:""})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center text-sm font-semibold text-gray-600",children:Un(j.photo_path)?e.jsx("img",{src:Un(j.photo_path),alt:"",className:"w-full h-full object-cover"}):e.jsx("span",{children:qc(j.surname,j.firstname)})}),e.jsx("div",{className:"font-medium",children:Yc(j.surname,j.firstname,j.middlename,j.extension)})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:N?e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Shift"}),e.jsxs("select",{className:"mt-1 w-full border rounded px-3 py-2",value:A.shiftid,onChange:_=>D(M=>({...M,shiftid:_.target.value})),children:[e.jsx("option",{value:"",children:"Select a shift"}),p.map(_=>e.jsxs("option",{value:_.id,children:[_.shiftname," (",_.shifttimemode,") ",ir(_.shift_checkin)," - ",ir(_.shift_checkout)]},_.id))]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Select Shifts"}),e.jsx("div",{className:"mt-2 max-h-64 overflow-auto border rounded p-2",children:p.map(_=>{const P=new Set((a[j==null?void 0:j.objid]||[]).map(B=>String(B.shiftid))).has(String(_.id)),$=(A.shiftids||[]).includes(String(_.id));return e.jsxs("label",{className:`flex items-center gap-2 py-1 ${P?"opacity-60 cursor-not-allowed":"cursor-pointer"}`,children:[e.jsx("input",{type:"checkbox",checked:$,disabled:P,onChange:B=>{D(w=>{const T=new Set(w.shiftids||[]);return B.target.checked?T.add(String(_.id)):T.delete(String(_.id)),{...w,shiftids:Array.from(T)}})}}),e.jsxs("span",{className:"text-sm",children:[_.shiftname," (",_.shifttimemode,") ",ir(_.shift_checkin)," - ",ir(_.shift_checkout),P?" (Already assigned)":""]})]},_.id)})})]})}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{className:"px-4 py-2 rounded border",onClick:()=>x(!1),children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-60",disabled:d,onClick:G,children:d?"Saving":"Save"})]})]})})]})},RS=({status:t})=>{const s=t===1?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",r=t===1?"Active":"Inactive";return e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${s}`,children:r})},OS=({isRecurring:t})=>{const s=t?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800",r=t?"Yes":"No";return e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${s}`,children:r})},PS=({isOpen:t,onClose:s,onSaved:r,initial:n})=>{const[a,l]=y.useState(!1),[o,i]=y.useState([]),[c,h]=y.useState({holidayname:"",holidaycategory:"Local",holidaytype:"",holidaydesc:"",holidaydate:"",isreccuring:!1,status:1});y.useEffect(()=>{t&&((async()=>{var x;try{const j=await le.get("/dtr-holidays/types");i(((x=j.data)==null?void 0:x.data)||[])}catch(j){console.error("Failed to load holiday types",j)}})(),h(n?{holidayname:n.holidayname||"",holidaycategory:n.holidaycategory||"Local",holidaytype:n.holidaytype||"",holidaydesc:n.holidaydesc||"",holidaydate:n.holidaydate?String(n.holidaydate).slice(0,10):"",isreccuring:n.isreccuring===1,status:n.status!==void 0?n.status:1}:{holidayname:"",holidaycategory:"Local",holidaytype:"",holidaydesc:"",holidaydate:"",isreccuring:!1,status:1}))},[t,n]);const p=u=>{u.target.type==="checkbox"?h(x=>({...x,[u.target.name]:u.target.checked})):h(x=>({...x,[u.target.name]:u.target.value}))},m=async()=>{var u;if(!((u=c.holidayname)!=null&&u.trim())){alert("Holiday name is required");return}if(!c.holidaycategory){alert("Category is required");return}if(!c.holidaytype){alert("Holiday type is required");return}if(!c.holidaydate){alert("Holiday date is required");return}l(!0);try{const x={...c,isreccuring:c.isreccuring?1:0,status:c.status?1:0};n!=null&&n.id?await le.put(`/dtr-holidays/${n.id}`,x):await le.post("/dtr-holidays",x),r==null||r(),s()}catch(x){console.error("Failed to save holiday",x),alert("Failed to save holiday")}finally{l(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:n!=null&&n.id?"Edit Holiday":"Add Holiday"}),e.jsx("button",{className:"text-gray-500",onClick:s,children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Holiday Name"}),e.jsx("input",{name:"holidayname",className:"mt-1 w-full border rounded px-3 py-2",value:c.holidayname,onChange:p})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Category"}),e.jsxs("select",{name:"holidaycategory",className:"mt-1 w-full border rounded px-3 py-2",value:c.holidaycategory,onChange:p,children:[e.jsx("option",{value:"Local",children:"Local"}),e.jsx("option",{value:"National",children:"National"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Holiday Type"}),e.jsxs("select",{name:"holidaytype",className:"mt-1 w-full border rounded px-3 py-2",value:c.holidaytype,onChange:p,children:[e.jsx("option",{value:"",children:"Select type..."}),o.map(u=>e.jsx("option",{value:u.id,children:u.typesname},u.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Holiday Date"}),e.jsx("input",{name:"holidaydate",type:"date",className:"mt-1 w-full border rounded px-3 py-2",value:c.holidaydate,onChange:p})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Description"}),e.jsx("textarea",{name:"holidaydesc",className:"mt-1 w-full border rounded px-3 py-2",rows:3,value:c.holidaydesc,onChange:p})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Is Recurring"}),e.jsx("input",{type:"checkbox",name:"isreccuring",className:"mt-2",checked:c.isreccuring,onChange:p})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Status"}),e.jsxs("select",{name:"status",className:"mt-1 w-full border rounded px-3 py-2",value:c.status,onChange:p,children:[e.jsx("option",{value:1,children:"Active"}),e.jsx("option",{value:0,children:"Inactive"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{className:"px-4 py-2 rounded border",onClick:s,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-60",onClick:m,disabled:a,children:a?"Saving":"Save"})]})]})}):null},FS=({isOpen:t,onClose:s,onSaved:r,initial:n})=>{const[a,l]=y.useState(!1),[o,i]=y.useState({typesname:""});y.useEffect(()=>{t&&i(n?{typesname:n.typesname||""}:{typesname:""})},[t,n]);const c=p=>i(m=>({...m,[p.target.name]:p.target.value})),h=async()=>{var p;if(!((p=o.typesname)!=null&&p.trim())){alert("Type name is required");return}l(!0);try{n!=null&&n.id?await le.put(`/dtr-holidays/types/${n.id}`,o):await le.post("/dtr-holidays/types",o),r==null||r(),s()}catch(m){console.error("Failed to save holiday type",m),alert("Failed to save holiday type")}finally{l(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:n!=null&&n.id?"Edit Holiday Type":"Add Holiday Type"}),e.jsx("button",{className:"text-gray-500",onClick:s,children:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Type Name"}),e.jsx("input",{name:"typesname",className:"mt-1 w-full border rounded px-3 py-2",value:o.typesname,onChange:c})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{className:"px-4 py-2 rounded border",onClick:s,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-60",onClick:h,disabled:a,children:a?"Saving":"Save"})]})]})}):null},US=()=>{const[t,s]=y.useState("holidays"),[r,n]=y.useState([]),[a,l]=y.useState([]),[o,i]=y.useState(!0),[c,h]=y.useState(""),[p,m]=y.useState(!1),[u,x]=y.useState(!1),[j,v]=y.useState(null),[N,f]=y.useState(null),d=async()=>{var O;try{const C=await le.get("/dtr-holidays");n(((O=C.data)==null?void 0:O.data)||[])}catch(C){console.error("Failed to load holidays",C)}},g=async()=>{var O;try{const C=await le.get("/dtr-holidays/types");l(((O=C.data)==null?void 0:O.data)||[])}catch(C){console.error("Failed to load holiday types",C)}};y.useEffect(()=>{(async()=>{i(!0),await Promise.all([d(),g()]),i(!1)})()},[]);const b=y.useMemo(()=>{const O=(c||"").toLowerCase();return(r||[]).filter(C=>{const F=(C.holidayname||"").toLowerCase(),U=(C.holidaycategory||"").toLowerCase(),Y=(C.holiday_type_name||"").toLowerCase();return F.includes(O)||U.includes(O)||Y.includes(O)})},[r,c]),E=y.useMemo(()=>{const O=(c||"").toLowerCase();return(a||[]).filter(C=>(C.typesname||"").toLowerCase().includes(O))},[a,c]),R=()=>{v(null),m(!0)},S=O=>{v(O),m(!0)},k=()=>{f(null),x(!0)},L=O=>{f(O),x(!0)},A=async O=>{if(confirm("Delete this holiday?"))try{await le.delete(`/dtr-holidays/${O.id}`),d()}catch(C){console.error("Failed to delete holiday",C),alert("Failed to delete holiday")}},D=async O=>{var C,F;if(confirm("Delete this holiday type?"))try{await le.delete(`/dtr-holidays/types/${O.id}`),g()}catch(U){console.error("Failed to delete holiday type",U),alert(((F=(C=U==null?void 0:U.response)==null?void 0:C.data)==null?void 0:F.message)||"Failed to delete holiday type")}},I=O=>{if(!O)return"";try{const C=new Date(O);if(isNaN(C.getTime()))return O;const F=String(C.getMonth()+1).padStart(2,"0"),U=String(C.getDate()).padStart(2,"0"),Y=C.getFullYear();return`${F}/${U}/${Y}`}catch{return O}};return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsx("div",{className:"px-6",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>s("holidays"),className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="holidays"?"border-blue-600 text-blue-700":"border-transparent text-gray-500"}`,children:"Holidays"}),e.jsx("button",{onClick:()=>s("types"),className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="types"?"border-blue-600 text-blue-700":"border-transparent text-gray-500"}`,children:"Holiday Types"})]})})}),t==="holidays"&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4 flex items-end gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Search holiday"}),e.jsx("input",{className:"w-full px-3 py-2 border rounded text-sm",value:c,onChange:O=>h(O.target.value),placeholder:"Search by name, category, or type..."})]}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:R,children:"+ Add Holiday"})]}),o?e.jsx("div",{className:"text-center py-10",children:"Loading"}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Holiday Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Recurring"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Created By"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-4 py-8 text-center text-gray-500",children:"No holidays found"})}):b.map(O=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:O.holidayname}),e.jsx("td",{className:"px-4 py-2",children:O.holidaycategory}),e.jsx("td",{className:"px-4 py-2",children:O.holiday_type_name||""}),e.jsx("td",{className:"px-4 py-2",children:O.holidaydate?I(O.holidaydate):""}),e.jsx("td",{className:"px-4 py-2",children:O.holidaydesc||""}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(OS,{isRecurring:O.isreccuring===1})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(RS,{status:O.status})}),e.jsx("td",{className:"px-4 py-2",children:O.createdby_photo?e.jsx("img",{src:O.createdby_photo,alt:"creator",className:"w-8 h-8 rounded-full object-cover mx-auto cursor-pointer",title:O.createdby_employee_name||O.createdby_username||"Unknown user"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 mx-auto cursor-pointer",title:O.createdby_employee_name||O.createdby_username||"Unknown user"})}),e.jsxs("td",{className:"px-4 py-2",children:[e.jsx("button",{className:"px-2 py-1 text-blue-600 hover:text-blue-800",onClick:()=>S(O),title:"Edit",children:""}),e.jsx("button",{className:"px-2 py-1 text-red-600 hover:text-red-800",onClick:()=>A(O),title:"Delete",children:""})]})]},O.id))})]})})]}),t==="types"&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4 flex items-end gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Search type"}),e.jsx("input",{className:"w-full px-3 py-2 border rounded text-sm",value:c,onChange:O=>h(O.target.value),placeholder:"Search by type name..."})]}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:k,children:"+ Add Holiday Type"})]}),o?e.jsx("div",{className:"text-center py-10",children:"Loading"}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-gray-500",children:"No holiday types found"})}):E.map(O=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:O.id}),e.jsx("td",{className:"px-4 py-2",children:O.typesname}),e.jsxs("td",{className:"px-4 py-2",children:[e.jsx("button",{className:"px-2 py-1 text-blue-600 hover:text-blue-800",onClick:()=>L(O),title:"Edit",children:""}),e.jsx("button",{className:"px-2 py-1 text-red-600 hover:text-red-800",onClick:()=>D(O),title:"Delete",children:""})]})]},O.id))})]})})]}),e.jsx(PS,{isOpen:p,onClose:()=>m(!1),onSaved:d,initial:j}),e.jsx(FS,{isOpen:u,onClose:()=>x(!1),onSaved:g,initial:N})]})},wf=({formData:t,children:s=[],education:r=[],displayValue:n,formatDate:a,employeeMedia:l=[]})=>{Array.from({length:60},(i,c)=>c+1);const o=i=>{if(!i)return"";if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(i))return i;try{const c=new Date(i);if(isNaN(c.getTime()))return console.log("Invalid child birth date:",i),i;const h=(c.getMonth()+1).toString().padStart(2,"0"),p=c.getDate().toString().padStart(2,"0"),m=c.getFullYear();return`${h}/${p}/${m}`}catch(c){return console.log("Child birth date formatting error:",c,"for date:",i),i}};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          @media print {
            @page {
              size: 8.5in 13in;
              margin: 0.25in;
            }
            body {
              margin: 0;
              padding: 0;
              font-size: 9px;
              line-height: 1.1;
            }
            .pds-table {
              border-collapse: collapse !important;
              font-size: 8px !important;
              line-height: 1.0 !important;
            }
            .pds-table td {
              padding: 2px 3px !important;
              border: 1px solid #000 !important;
              vertical-align: top !important;
              white-space: normal !important;
              word-wrap: break-word !important;
              overflow-wrap: break-word !important;
            }
            .field-label {
              font-weight: normal !important;
              background-color: #f8f8f8 !important;
            }
            .field-value {
              background-color: white !important;
            }
            .section-title {
              background-color: #e0e0e0 !important;
              font-weight: bold !important;
              text-align: center !important;
            }
            .no-page-break {
              page-break-inside: avoid !important;
            }
            .checkbox {
              font-size: 12px !important;
              font-weight: bold !important;
              color: #000 !important;
              display: inline-block !important;
              margin-right: 3px !important;
            }
          }
        `}),e.jsxs("div",{className:"no-page-break",style:{width:"100%",maxWidth:"8.5in",margin:"0 auto",padding:"0.25in",fontSize:"10px",lineHeight:"1.3",fontFamily:"Arial, sans-serif",backgroundColor:"white",color:"black"},children:[e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"17%"}}),e.jsx("col",{style:{width:"9%"}}),e.jsx("col",{style:{width:"9%"}}),e.jsx("col",{style:{width:"16%"}}),e.jsx("col",{style:{width:"5%"}}),e.jsx("col",{style:{width:"9%"}}),e.jsx("col",{style:{width:"7%"}}),e.jsx("col",{style:{width:"9%"}}),e.jsx("col",{style:{width:"9%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{style:{height:"15px"},children:e.jsxs("td",{colSpan:"9",className:"pds-header-main",style:{textAlign:"left",fontSize:"8px",padding:"10px 0"},children:["CS Form No. 212 - Revised 2017",e.jsx("br",{})]})}),e.jsx("tr",{style:{height:"70px"},children:e.jsx("td",{colSpan:"9",className:"pds-header-main",style:{topcellborder:"transparent",textAlign:"center",verticalAlign:"middle",fontWeight:"bold",fontSize:"22px",padding:"10px 0"},children:"PERSONAL DATA SHEET"})}),e.jsx("tr",{children:e.jsxs("td",{colSpan:"9",className:"warning-text",style:{fontSize:"12px",padding:"8px 0",fontWeight:"normal"},children:["WARNING: Ang misrepresentation made in the Personal Data Sheet and the Work Experience Sheet shall cause the filing of  administrative/criminal case/s against the person concerned.",e.jsx("br",{}),e.jsx("br",{})," READ THE ATTACHED GUIDE TO FILLING OUT THE PERSONAL DATA SHEET (PDS) BEFORE ACCOMPLISHING THE PDS FORM",e.jsx("br",{})]})}),e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"filling-guidelines",style:{fontSize:"10px",padding:"8px 0"},children:"Print legibly. Tick appropriate []xes () and use separate sheet if necessary. Indicate N/A if not applicable. DO NOT 1. CS ID No [ ] (Do not fill up. For CSC use only)"})}),e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"I. PERSONAL INFORMATION"})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",children:"2. SURNAME"}),e.jsx("td",{className:"field-value",colSpan:"8",style:{textAlign:"left",verticalAlign:"middle"},children:n(t.surname)})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",children:"FIRST NAME"}),e.jsx("td",{className:"field-value",colspan:"4",style:{textAlign:"left",verticalAlign:"middle"},children:n(t.firstname)}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"left",verticalAlign:"middle"},children:"NAME EXTENSION (JR.,SR)"}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"left",verticalAlign:"middle"},children:n(t.name_extension)})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{textAlign:"left",verticalAlign:"middle"},children:"MIDDLE NAME"}),e.jsx("td",{className:"field-value",colSpan:"8",style:{textAlign:"left",verticalAlign:"middle"},children:n(t.middlename)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"3. DATE OF BIRTH (mm/dd/yyyy)"}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle",whiteSpace:"normal",wordWrap:"break-word"},children:n(t.date_of_birth)}),e.jsx("td",{className:"field-label",colspan:"2",rowspan:"2",children:"16. CITIZENSHIP"}),e.jsxs("td",{className:"field-value",rowspan:"2",children:[e.jsx("span",{className:"checkbox",children:t.citizenship_filipino?"":""})," Filipino"]}),e.jsxs("td",{className:"field-value",colspan:"3",children:[e.jsx("span",{className:"checkbox",children:t.citizenship_dual?"":""})," Dual Citizenship"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"4. PLACE OF BIRTH"}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.place_of_birth)}),e.jsxs("td",{className:"field-value",children:[e.jsx("span",{className:"checkbox",children:t.dual_citizenship_type==="by birth"?"":""})," by birth"]}),e.jsxs("td",{className:"field-value",colspan:"2",children:[e.jsx("span",{className:"checkbox",children:(()=>{console.log("=== DUAL CITIZENSHIP DEBUG ==="),console.log("dual_citizenship_type:",t.dual_citizenship_type),console.log("Type of dual_citizenship_type:",typeof t.dual_citizenship_type),console.log("citizenship_dual:",t.citizenship_dual),console.log("citizenship_filipino:",t.citizenship_filipino),console.log("dual_citizenship_country:",t.dual_citizenship_country),console.log("All formData keys:",Object.keys(t));const i=t.dual_citizenship_type==="by naturalization"||t.dual_citizenship_type==="naturalization"||t.dual_citizenship_type==="By Naturalization"||t.dual_citizenship_type==="NATURALIZATION"||t.dual_citizenship_type&&t.dual_citizenship_type.toLowerCase().includes("naturalization"),c=t.citizenship_dual===!0||t.citizenship_dual==="true"||t.citizenship_dual===1,h=t.dual_citizenship_country&&t.dual_citizenship_country.toLowerCase().includes("naturalization"),p=i||c&&h;return console.log("Is naturalization (any variation):",i),console.log("Has dual citizenship:",c),console.log("Has naturalization in country:",h),console.log("Final result:",p),console.log("Final checkbox result:",p?"":""),p?"":""})()})," by naturalization"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"5. SEX"}),e.jsxs("td",{className:"field-value",colSpan:"2",children:[e.jsxs("span",{className:"checkbox-field",children:[e.jsx("span",{className:"checkbox",children:t.sex==="Male"?"":""})," Male"]}),e.jsxs("span",{className:"checkbox-field",style:{marginLeft:"20px"},children:[e.jsx("span",{className:"checkbox",children:t.sex==="Female"?"":""})," Female"]})]}),e.jsx("td",{className:"field-value",colspan:"2",children:"If holder of dual citizenship, please indicate the details."}),e.jsx("td",{className:"field-value",colSpan:"4",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.dual_citizenship_country)||"N/A"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowSpan:"4",children:"6. CIVIL STATUS"}),e.jsx("td",{className:"field-value",rowSpan:"4",children:e.jsxs("div",{className:"civil-status-layout",children:[e.jsxs("div",{children:[e.jsx("span",{className:"checkbox",children:t.civil_status==="Single"?"":""})," Single"]}),e.jsxs("div",{children:[e.jsx("span",{className:"checkbox",children:t.civil_status==="Widowed"?"":""})," Widowed"]}),e.jsxs("div",{children:[e.jsx("span",{className:"checkbox",children:t.civil_status==="Other/s"?"":""})," Other/s"]})]})}),e.jsx("td",{className:"field-value",rowSpan:"4",children:e.jsxs("div",{className:"civil-status-layout",children:[e.jsxs("div",{children:[e.jsx("span",{className:"checkbox",children:t.civil_status==="Married"?"":""})," Married"]}),e.jsxs("div",{children:[e.jsx("span",{className:"checkbox",children:t.civil_status==="Separated"?"":""})," Separated"]})]})}),e.jsx("td",{className:"field-label",rowspan:"6",children:"17. RESIDENTIAL ADDRESS"}),e.jsx("td",{className:"field-value",colSpan:"3",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_house_block_lot)}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_street)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",verticalAlign:"middle"},children:"House/Block/Lot No"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"Street"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-value",colspan:"3",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_subdivision_village)}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_barangay)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Subdivision/Village"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Barangay"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"7. HEIGHT (m)"}),e.jsx("td",{className:"field-value",colSpan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.height)}),e.jsx("td",{className:"field-value",colspan:"3",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_city_municipality)}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_province)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",children:"8. WEIGHT (kg)"}),e.jsx("td",{className:"field-value",colSpan:"2",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.weight)}),e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"City/Municipality"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Province"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"ZIP CODE"}),e.jsx("td",{className:"field-value",colspan:"5",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.residential_zip_code)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",children:"9. BLOOD TYPE"}),e.jsx("td",{className:"field-value",colspan:"2",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.blood_type)}),e.jsx("td",{className:"field-label",rowspan:"6",children:"18. PERMANENT ADDRESS"}),e.jsx("td",{className:"field-value",colspan:"3",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.permanent_house_block_lot)}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.permanent_street)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"House/Block/Lot No"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Street"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",children:"10. GSIS ID NO."}),e.jsx("td",{className:"field-value",colspan:"2",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.gsis)}),e.jsx("td",{className:"field-value",colspan:"3",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.permanent_subdivision_village)}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.permanent_barangay)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Subdivision/Village"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Barangay"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"11. PAG-IBIG ID NO."}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.pagibig)}),e.jsx("td",{className:"field-value",colspan:"3",style:{textAlign:"center",fverticalAlign:"middle"},children:n(t.permanent_city_municipality)}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.permanent_province)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",children:"12. PHILHEALTH NO."}),e.jsx("td",{className:"field-value",colspan:"2",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.philhealth)}),e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"City/Municipality"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",fontSize:"8px",verticalAlign:"middle"},children:"Province"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"ZIP CODE"}),e.jsx("td",{className:"field-value",colspan:"5",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.permanent_zip_code)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"13. SSS NO."}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.sss)}),e.jsx("td",{className:"field-label",children:"19. TELEPHONE NO."}),e.jsx("td",{className:"field-value",colSpan:"5",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.telephone)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"14. TIN NO."}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.tin)}),e.jsx("td",{className:"field-label",children:"20. MOBILE NO."}),e.jsx("td",{className:"field-value",colSpan:"5",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.mobile)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"15. AGENCY EMPLOYEE NO."}),e.jsx("td",{className:"field-value",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.agency_no)}),e.jsx("td",{className:"field-label",children:"21. E-MAIL ADDRESS (if any)"}),e.jsx("td",{className:"field-value",colSpan:"5",style:{textAlign:"center",verticalAlign:"middle"},children:n(t.email)})]})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"19.5%"}}),e.jsx("col",{style:{width:"17%"}}),e.jsx("col",{style:{width:"15.5%"}}),e.jsx("col",{style:{width:"30.5%"}}),e.jsx("col",{style:{width:"21.5%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"II. FAMILY BACKGROUND"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"22. SPOUSE'S SURNAME"}),e.jsx("td",{className:"field-value",COLSPAN:"2",children:n(t.spouse_surname)}),e.jsx("td",{className:"field-label",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:"23. NAME OF CHILD"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:"DATE OF BIRTH"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"FIRST NAME"}),e.jsx("td",{className:"field-value",children:n(t.spouse_firstname)}),e.jsxs("td",{className:"field-value",style:{borderLeft:"1px solid #000",borderRight:"1px solid #000"},children:["Name of Extension: ",n(t.spouse_extension)]}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>0?n(s[0].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>0?o(s[0].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"MIDDLE NAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.spouse_middlename)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>1?n(s[1].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>1?o(s[1].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"OCCUPATION"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.spouse_occupation)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>2?n(s[2].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>2?o(s[2].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"EMPLOYER/BUSINESS NAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.spouse_employer_business_name)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>3?n(s[3].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>3?o(s[3].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"BUSINESS ADDRESS"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.spouse_business_address)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>4?n(s[4].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>4?o(s[4].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"TELEPHONE NO."}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.spouse_telephone)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>5?n(s[5].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>5?o(s[5].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"24. FATHER'S SURNAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.father_surname)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>6?n(s[6].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>6?o(s[6].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"FIRST NAME"}),e.jsx("td",{className:"field-value",children:n(t.father_firstname)}),e.jsxs("td",{className:"field-value",style:{borderLeft:"1px solid #000",borderRight:"1px solid #000"},children:["Name of Extension: ",n(t.father_extension)]}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>7?n(s[7].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>7?o(s[7].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"MIDDLE NAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.father_middlename)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>8?n(s[8].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>8?o(s[8].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"25. MOTHER'S MAIDEN NAME"}),e.jsx("td",{className:"field-value",colspan:"2"}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>9?n(s[9].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>9?o(s[9].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"SURNAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.mother_firstname)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>10?n(s[10].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>10?o(s[10].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"FIRST NAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.mother_middlename)}),e.jsx("td",{className:"field-value",style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>11?n(s[11].full_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:s.length>11?o(s[11].date_of_birth):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",children:"MIDDLE NAME"}),e.jsx("td",{className:"field-value",colspan:"2",children:n(t.mother_surname)}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle",borderLeft:"1px solid black",borderRight:"1px solid black"},children:"(Continue on separate sheet if necessary)"})]})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"19%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"8%"}}),e.jsx("col",{style:{width:"8%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"9%"}}),e.jsx("col",{style:{width:"13%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"III. EDUCATIONAL BACKGROUND"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",style:{verticalAlign:"middle"},children:"26. LEVEL"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",borderbottom:"transparent"},children:"NAME OF SCHOOL"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"BASIC EDUCATION/DEGREE/ COURSE"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"PERIOD OF ATTENDANCE"}),e.jsxs("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["HIGHEST LEVEL/UNITS EARNED",e.jsx("br",{}),"(if not graduated)"]}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"YEAR GRADUATED"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"SCHOLARSHIP/ HONORS"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{borderTop:"transparent"},children:"(Write in full)"}),e.jsx("td",{className:"field-label",style:{borderTop:"transparent"},children:"(Write in full)"}),e.jsx("td",{className:"field-label",children:"FROM"}),e.jsx("td",{className:"field-label",children:"TO"})]}),r.length>0?(()=>{const i=["Elementary","Secondary","Vocational/Trade Course","College","Graduate Studies"];return[...r].sort((h,p)=>{const m=n(h.level)||"",u=n(p.level)||"",x=i.indexOf(m),j=i.indexOf(u);return x!==-1&&j!==-1?x-j:x!==-1?-1:j!==-1?1:0}).slice(0,10).map((h,p)=>{const m=N=>{if(!N)return"";if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(N))return N;try{const f=new Date(N);if(isNaN(f.getTime()))return console.log("Invalid date:",N),N;const d=(f.getMonth()+1).toString().padStart(2,"0"),g=f.getDate().toString().padStart(2,"0"),b=f.getFullYear();return`${d}/${g}/${b}`}catch(f){return console.log("Date formatting error:",f,"for date:",N),N}},u=N=>{if(!N||N==="N/A")return"N/A";try{if(/^\d{4}$/.test(N.toString()))return N.toString();const f=new Date(N);return isNaN(f.getTime())?"N/A":f.getFullYear().toString()}catch{return"N/A"}},x=n(h.honor_received)||"",[j="",v=""]=x.split("|").map(N=>N.trim());return e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:n(h.level)}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:n(h.school_name)}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:n(h.course)}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:(()=>{const N=n(h.from);return console.log("FROM Column Debug:",{rawValue:h.from,displayValue:N,isNA:N==="N/A",formatted:N==="N/A"?N:m(N)}),N==="N/A"?N:m(N)})()}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:(()=>{const N=n(h.to);return console.log("TO Column Debug:",{rawValue:h.to,displayValue:N,isNA:N==="N/A",formatted:N==="N/A"?N:m(N)}),N==="N/A"?N:m(N)})()}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:n(h.highest_level)}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u(n(h.year_graduated))}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:j||v})]},p)})})():Array.from({length:10},(i,c)=>e.jsx("tr",{children:e.jsx("td",{colSpan:"8"})},c))]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word",marginTop:"0.2in"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"18.5%"}}),e.jsx("col",{style:{width:"46.5%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"25%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"left",verticalAlign:"middle",height:"20px"},children:"(Continue on separate sheet if necessary)"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:"SIGNATURE"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:(()=>{console.log("All formData keys:",Object.keys(t)),console.log("formData object:",t),console.log("employeeMedia array:",l);const i=["signature_path","signature","signature_image","signature_file","employee_signature","signature_url"];let c=null;for(const h of i)if(t[h]){c=t[h],console.log(`Found signature field in formData: ${h} = ${c}`);break}if(!c&&l&&l.length>0){console.log("Checking employeeMedia array for signature...");for(const h of l)if(console.log("Media item:",h),h.signature_path){c=h.signature_path,console.log(`Found signature in employeeMedia: ${h.signature_path}`);break}}return console.log("Signature Path Debug:",{signature_path:t.signature_path,type:typeof t.signature_path,exists:!!t.signature_path,foundField:c,employeeMediaLength:l?l.length:0}),c?e.jsx("img",{src:c,alt:"Signature",style:{maxWidth:"100%",maxHeight:"40px",objectFit:"contain",border:"1px solid #ccc"},onError:h=>{console.error("Image load error:",h),console.error("Failed to load signature image:",c)},onLoad:()=>{console.log("Signature image loaded successfully:",c)}}):(console.log("No signature path provided"),console.log("To add signature:"),console.log("1. Fetch employee_media data with signature_path field"),console.log("2. Pass it as employeeMedia prop to PdsPrintPage1 component"),console.log("3. Or add signature_path directly to formData object"),e.jsxs("div",{style:{color:"#999",fontSize:"8px",textAlign:"center",border:"1px dashed #ccc",padding:"5px",backgroundColor:"#f9f9f9"},children:[e.jsx("div",{children:"No signature data found"}),e.jsx("div",{style:{fontSize:"6px",marginTop:"2px"},children:"Add employeeMedia prop with signature_path"})]}))})()}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:"DATE"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:n(t.date_accomplished)||""})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"right",verticalAlign:"middle",height:"20px"},children:" CS FORM 212 (Revised 2017), Page 1 of 4"})})]})]})]})]})},Ef=({formData:t,civilServiceEligibility:s=[],workExperience:r=[],displayValue:n,formatDate:a,displayYesNo:l})=>{const o=i=>{if(!i||i===""||i==="0000-00-00")return"N/A";if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(i))return i;try{const c=new Date(i);if(isNaN(c.getTime()))return console.log("Invalid date:",i),"N/A";const h=(c.getMonth()+1).toString().padStart(2,"0"),p=c.getDate().toString().padStart(2,"0"),m=c.getFullYear();return`${h}/${p}/${m}`}catch(c){return console.log("Date formatting error:",c,"for date:",i),"N/A"}};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          @media print {
            @page {
              size: 8.5in 13in;
              margin: 0.25in;
            }
            body {
              margin: 0;
              padding: 0;
              font-size: 9px;
              line-height: 1.1;
            }
            .pds-table {
              border-collapse: collapse !important;
              font-size: 8px !important;
              line-height: 1.0 !important;
            }
            .pds-table td {
              padding: 2px 3px !important;
              border: 1px solid #000 !important;
              vertical-align: top !important;
              white-space: normal !important;
              word-wrap: break-word !important;
              overflow-wrap: break-word !important;
            }
            .field-label {
              font-weight: normal !important;
              background-color: #f8f8f8 !important;
            }
            .field-value {
              background-color: white !important;
            }
            .section-title {
              background-color: #e0e0e0 !important;
              font-weight: bold !important;
              text-align: center !important;
            }
            .no-page-break {
              page-break-inside: avoid !important;
            }
            .checkbox {
              font-size: 12px !important;
              font-weight: bold !important;
              color: #000 !important;
              display: inline-block !important;
              margin-right: 3px !important;
            }
          }
        `}),e.jsxs("div",{className:"no-page-break",style:{width:"100%",maxWidth:"8.5in",margin:"0 auto",padding:"0.25in",fontSize:"10px",lineHeight:"1.3",fontFamily:"Arial, sans-serif",backgroundColor:"white",color:"black"},children:[e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"20%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"20%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"20%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"IV. CIVIL SERVICE ELIGIBILITY"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"CAREER SERVICE/ RA 1080 (BOARD/ BAR) UNDER SPECIAL LAWS/ CES/ CSEE BARANGAY ELIGIBILITY / DRIVER'S LICENSE"}),e.jsxs("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["RATING ",e.jsx("br",{}),"(if Applicable)"]}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"DATE OF EXAMINATION/ CONFERMENT"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"PLACE OF EXAMINATION / CONFERMENT"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"LICENSE NUMBER (if applicatble)"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"NUMBER"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"DATE OF VALIDITY"})]}),(()=>{const i=[];let c=!1;for(let h=0;h<9;h++){const p=s[h]||{},m=s[h]!==void 0&&p!==null,u=!m&&!c;u&&(c=!0),i.push(e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:m?n(p.eligibility_type):u?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:m?n(p.rating):u?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:m?o(p.date_of_examination):u?"N/A":""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:m?n(p.place_of_examination):u?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:m?n(p.license_number):u?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:m?o(p.date_of_validity):u?"N/A":""})]},h))}return i})(),e.jsx("tr",{children:e.jsx("td",{colspan:"6",style:{textAlign:"center",verticalAlign:"middle",color:"red"},children:"(Continue on separate sheet if necessary)"})})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"18%"}}),e.jsx("col",{style:{width:"18%"}}),e.jsx("col",{style:{width:"20%"}}),e.jsx("col",{style:{width:"12%"}}),e.jsx("col",{style:{width:"12%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"8%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"V. WORK EXPERIENCE"})}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"8",children:"(Include private employment.  Start from your recent work) Description of duties should be indicated in the attached Work Experience sheet."})}),e.jsxs("tr",{children:[e.jsxs("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["28 INCLUSIVE DATES ",e.jsx("br",{}),"(mm/dd/yyyy)"]}),e.jsxs("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["POSITION TITLE ",e.jsx("br",{}),"(Write in full/Do not abbreviate)"]}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"DEPARTMENT / AGENCY / OFFICE / COMPANY   (Write in full/Do not abbreviate)"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"MONTHLY SALARY"}),e.jsxs("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["SALARY/ JOB/ PAY GRADE ",e.jsx("br",{}),'(if applicable)& STEP  (Format "00-0")/ INCREMENT']}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"STATUS OF APPOINTMENT"}),e.jsxs("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["GOV'T SERVICE ",e.jsx("br",{}),"(Y/ N)"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"From"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"To"}),e.jsx("td",{className:"field-label"}),e.jsx("td",{className:"field-label"}),e.jsx("td",{className:"field-label"}),e.jsx("td",{className:"field-label"}),e.jsx("td",{className:"field-label"}),e.jsx("td",{className:"field-label"})]}),(()=>{const i=[];let c=!1;for(let h=0;h<28;h++){const p=h>=0?h-0:-1,m=p>=0?r[p]||{}:{},u=p>=0&&r[p]!==void 0&&m!==null,x=!u&&!c&&h>=0;x&&(c=!0),i.push(e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?o(m.date_from):x?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?m.is_present?"Present":o(m.date_to):x?"N/A":""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:u?n(m.position_title):x?"N/A":""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:u?n(m.department_agency_company):x?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?n(m.monthly_salary):x?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?n(m.salary_grade_step):x?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?n(m.status_of_appointment):x?"N/A":""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?l(m.government_service):x?"N/A":""})]},h))}return i})(),e.jsx("tr",{children:e.jsx("td",{colspan:"8",style:{textAlign:"center",verticalAlign:"middle",color:"red"},children:"(Continue on separate sheet if necessary)"})})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word",marginTop:"0.2in"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"18.5%"}}),e.jsx("col",{style:{width:"46.5%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"25%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"left",verticalAlign:"middle",height:"20px"},children:"(Continue on separate sheet if necessary)"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:"SIGNATURE"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:e.jsx("div",{style:{color:"#999",fontSize:"8px",textAlign:"center",border:"1px dashed #ccc",padding:"5px",backgroundColor:"#f9f9f9"},children:e.jsx("div",{children:"Signature area"})})}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:"DATE"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:n(t.date_accomplished)||""})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"right",verticalAlign:"middle",height:"20px"},children:" CS FORM 212 (Revised 2017), Page 2 of 4"})})]})]})]})]})},Sf=({voluntaryWork:t=[],trainings:s=[],skills:r=[],recognitions:n=[],memberships:a=[],displayValue:l,formatDate:o,formData:i={}})=>{const c=h=>{if(!h||h===""||h==="0000-00-00")return"N/A";if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(h))return h;try{const p=new Date(h);if(isNaN(p.getTime()))return console.log("Invalid date:",h),"N/A";const m=(p.getMonth()+1).toString().padStart(2,"0"),u=p.getDate().toString().padStart(2,"0"),x=p.getFullYear();return`${m}/${u}/${x}`}catch(p){return console.log("Date formatting error:",p,"for date:",h),"N/A"}};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          @media print {
            @page {
              size: 8.5in 13in;
              margin: 0.25in;
            }
            body {
              margin: 0;
              padding: 0;
              font-size: 9px;
              line-height: 1.1;
            }
            .pds-table {
              border-collapse: collapse !important;
              font-size: 8px !important;
              line-height: 1.0 !important;
            }
            .pds-table td {
              padding: 2px 3px !important;
              border: 1px solid #000 !important;
              vertical-align: top !important;
              white-space: normal !important;
              word-wrap: break-word !important;
              overflow-wrap: break-word !important;
            }
            .field-label {
              font-weight: normal !important;
              background-color: #f8f8f8 !important;
            }
            .field-value {
              background-color: white !important;
            }
            .section-title {
              background-color: #e0e0e0 !important;
              font-weight: bold !important;
              text-align: center !important;
            }
            .no-page-break {
              page-break-inside: avoid !important;
            }
            .checkbox {
              font-size: 12px !important;
              font-weight: bold !important;
              color: #000 !important;
              display: inline-block !important;
              margin-right: 3px !important;
            }
          }
        `}),e.jsxs("div",{className:"no-page-break",style:{width:"100%",maxWidth:"8.5in",margin:"0 auto",padding:"0.25in",fontSize:"10px",lineHeight:"1.3",fontFamily:"Arial, sans-serif",backgroundColor:"white",color:"black"},children:[e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"50%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"30%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"VI. VOLUNTARY WORK OR INVOLVEMENT IN CIVIC/NON-GOVERNMENT/PEOPLE/VOLUNTARY ORGANIZATION/S"})}),e.jsxs("tr",{children:[e.jsxs("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["29. NAME & ADDRESS OF ORGANIZATION ",e.jsx("br",{})," (Write in full)"]}),e.jsxs("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:["INCLUSIVE DATES ",e.jsx("br",{}),"(mm/dd/yyyy)"]}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"NUMBER OF HOURS"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"POSITION/NATURE OF WORK"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"From"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"To"})]}),Array.from({length:7},(h,p)=>{const m=t[p]||{},u=t[p]!==void 0&&m!==null;return e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:u?l(m.organization_name_address):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?c(m.date_from):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?c(m.date_to):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?l(m.number_of_hours):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?l(m.position_nature_of_work):""})]},p)}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"5",style:{textAlign:"center",verticalAlign:"middle",color:"red"},children:"(Continue on separate sheet if necessary)"})})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"40%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"20%"}}),e.jsx("col",{style:{width:"30%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsxs("td",{colSpan:"6",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:["VII. LEARNING AND DEVELOPMENT (L&D) INTERVENTIONS/TRAINING PROGRAMS ATTENDED",e.jsx("br",{})]})}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colSpan:"6",children:"Start from the most recent L&D/training program and include only the relevant L&D/training taken for the last five (5) years for Division Chief/Executive/Managerial positions)"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"30. TITLE OF LEARNING AND DEVELOPMENT INTERVENTIONS/TRAINING PROGRAMS"}),e.jsx("td",{className:"field-label",colspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"INCLUSIVE DATES OF ATTENDANCE"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"NUMBER OF HOURS"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:"Type of LD (Managerial/ Supervisory/Technical/etc)"}),e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle"},children:" CONDUCTED/ SPONSORED BY"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"From"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"To"})]}),Array.from({length:21},(h,p)=>{const m=s[p]||{},u=s[p]!==void 0&&m!==null;return e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:u?l(m.training_title):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?c(m.date_from):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?c(m.date_to):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:u?l(m.number_of_hours):""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:u?l(m.type_of_ld):""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:u?l(m.conducted_sponsored_by):""})]},p)}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"6",style:{textAlign:"center",verticalAlign:"middle",color:"red"},children:"(Continue on separate sheet if necessary)"})})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"30%"}}),e.jsx("col",{style:{width:"50%"}}),e.jsx("col",{style:{width:"20%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"VIII. OTHER INFORMATION"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"31. SPECIAL SKILLS and HOBBIES"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"32. NON-ACADEMIC DISTINCTIONS / RECOGNITION"}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"},children:"33. MEMBERSHIP IN ASSOCIATION/ORGANIZATION"})]}),Array.from({length:10},(h,p)=>{const m=r[p]||{},u=n[p]||{},x=a[p]||{},j=r[p]!==void 0&&m!==null,v=n[p]!==void 0&&u!==null,N=a[p]!==void 0&&x!==null;return e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:j?l(m.skill_hobby):""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:v?l(u.recognition):""}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:N?l(x.organization):""})]},p)}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"center",verticalAlign:"middle",color:"red"},children:"(Continue on separate sheet if necessary)"})})]})]}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.1in",whiteSpace:"normal",wordWrap:"break-word",marginTop:"0.2in"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"18.5%"}}),e.jsx("col",{style:{width:"46.5%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"25%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"left",verticalAlign:"middle",height:"20px"},children:"(Continue on separate sheet if necessary)"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:"SIGNATURE"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:e.jsx("div",{style:{color:"#999",fontSize:"8px",textAlign:"center",border:"1px dashed #ccc",padding:"5px",backgroundColor:"#f9f9f9"},children:e.jsx("div",{children:"Signature area"})})}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:"DATE"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"40px"},children:l(i.date_accomplished)||""})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"right",verticalAlign:"middle",height:"20px"},children:" CS FORM 212 (Revised 2017), Page 3 of 4"})})]})]})]})]})},_f=({declarations:t={},references:s=[],governmentIds:r=[],signatureData:n="",photoData:a="",thumbmarkData:l="",dateAccomplished:o="",displayValue:i,displayYesNo:c,formatDate:h,formData:p={}})=>{var m,u,x,j;return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          @media print {
            @page {
              size: 8.5in 13in;
              margin: 0.25in;
            }
            body {
              margin: 0;
              padding: 0;
              font-size: 9px;
              line-height: 1.1;
            }
            .pds-table {
              border-collapse: collapse !important;
              font-size: 8px !important;
              line-height: 1.0 !important;
            }
            .pds-table td {
              padding: 2px 3px !important;
              border: 1px solid #000 !important;
              vertical-align: top !important;
              white-space: normal !important;
              word-wrap: break-word !important;
              overflow-wrap: break-word !important;
            }
            .field-label {
              font-weight: normal !important;
              background-color: #f8f8f8 !important;
            }
            .field-value {
              background-color: white !important;
            }
            .section-title {
              background-color: #e0e0e0 !important;
              font-weight: bold !important;
              text-align: center !important;
            }
            .no-page-break {
              page-break-inside: avoid !important;
            }
            .checkbox {
              font-size: 12px !important;
              font-weight: bold !important;
              color: #000 !important;
              display: inline-block !important;
              margin-right: 3px !important;
            }
            .yes-no-box {
              font-size: 20px !important;
              font-weight: bold !important;
              color: #000 !important;
              display: inline-block !important;
              margin-right: 8px !important;
              width: 20px !important;
              height: 20px !important;
              text-align: center !important;
              line-height: 18px !important;
              border: 2px solid #000 !important;
              background-color: #fff !important;
              vertical-align: middle !important;
            }
            .checkbox-large {
              width: 20px !important;
              height: 20px !important;
              border: 2px solid #000 !important;
              background-color: #fff !important;
              display: inline-block !important;
              margin-right: 8px !important;
              vertical-align: middle !important;
              position: relative !important;
            }
            .checkbox-large.checked::after {
              content: 'X' !important;
              position: absolute !important;
              top: 50% !important;
              left: 50% !important;
              transform: translate(-50%, -50%) !important;
              font-size: 16px !important;
              font-weight: 900 !important;
              color: #000 !important;
              z-index: 10 !important;
              display: block !important;
              line-height: 1 !important;
              text-shadow: none !important;
            }
            .checkbox-large.checked {
              background-color: #f0f0f0 !important;
              border: 3px solid #000 !important;
            }
            .photo-box {
              border: 1px solid #000;
              padding: 5px;
              display: inline-block;
            }
          }
        `}),e.jsxs("div",{className:"no-page-break",style:{width:"100%",maxWidth:"8.5in",margin:"0 auto",padding:"0.25in",fontSize:"10px",lineHeight:"1.3",fontFamily:"Arial, sans-serif",backgroundColor:"white",color:"black"},children:[e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.01in",whiteSpace:"normal",wordWrap:"break-word"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"50%"}}),e.jsx("col",{style:{width:"25%"}}),e.jsx("col",{style:{width:"25%"}})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"section-title",style:{textAlign:"left",fontWeight:"bold",fontSize:"14px",padding:"8px 0",backgroundColor:"#f0f0f0"},children:"IX. DECLARATIONS"})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"34. Are you related by consanguinity or affinity to the appointing or recommending authority, or to the chief of bureau or office or to the person who has immediate supervision over you in the Office, Bureau or Department where you will be apppointed,  "}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"}}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle"}})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"a. within the third degree?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{className:"checkbox-large",style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.third_degree?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.third_degree?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{className:"checkbox-large",style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.third_degree&&t.third_degree!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.third_degree&&t.third_degree!==void 0?"":""})," NO"]})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"b. within the fourth degree? (for Local Government Unit - Career Employees)"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.fourth_degree?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.fourth_degree?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.fourth_degree&&t.fourth_degree!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.fourth_degree&&t.fourth_degree!==void 0?"":""})," NO"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:" "}),e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{}),e.jsx("td",{className:"field-value",style:{verticalAlign:"middle"},children:i(t.thirtyfour_b_details)}),e.jsx("td",{})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"35. a. Have you ever been found guilty of any administrative offense?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.thirtyfive_a?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.thirtyfive_a?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.thirtyfive_a&&t.thirtyfive_a!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.thirtyfive_a&&t.thirtyfive_a!==void 0?"":""})," NO"]})]}),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{}),e.jsx("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:i(t.thirtyfive_a_details)})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"b. Have you been criminally charged before any court?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.criminally_charged?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.criminally_charged?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.criminally_charged&&t.criminally_charged!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.criminally_charged&&t.criminally_charged!==void 0?"":""})," NO"]})]}),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"BIf YES, give details: "})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{}),e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",i(t.thirtyfive_datefiled)]}),e.jsx("td",{})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{}),e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Status of Case/s: ",i(t.thirtyfive_statuses)]}),e.jsx("td",{})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"36. Have you ever been convicted of any crime or violation of any law, decree, ordinance or regulation?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.convicted?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.convicted?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.convicted&&t.convicted!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.convicted&&t.convicted!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",i(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"37. Have you ever been separated from the service in any of the following modes?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.separated_service?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.separated_service?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.separated_service&&t.separated_service!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.separated_service&&t.separated_service!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",i(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"38. a. Have you ever been a candidate in a national or local election held within the last year?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.candidate?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.candidate?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.candidate&&t.candidate!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.candidate&&t.candidate!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",i(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"b. Have you resigned from the government service during the three (3)-month period before the last election to promote/actively campaign for a national or local candidate?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.candidate?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.candidate?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.candidate&&t.candidate!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.candidate&&t.candidate!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",i(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"39. Have you acquired the status of an immigrant or permanent resident of another country?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.indigenous_group?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.indigenous_group?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.indigenous_group&&t.indigenous_group!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.indigenous_group&&t.indigenous_group!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",i(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"40. Pursuant to: (a) Indigenous People's Act (RA 8371); (b) Magna Carta for Disabled Persons (RA 7277); and (c) Solo Parents Welfare Act of 2000 (RA 8972), please answer the following items:"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.pwd?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.pwd?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.pwd&&t.pwd!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.pwd&&t.pwd!==void 0?"":""})," NO"]})]}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"a. Are you a member of any indigenous group?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.indigenous_group?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.indigenous_group?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.indigenous_group&&t.indigenous_group!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.indigenous_group&&t.indigenous_group!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",i(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"b. Are you a person with disability?"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.indigenous_group?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.indigenous_group?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.indigenous_group&&t.indigenous_group!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.indigenous_group&&t.indigenous_group!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",i(t.fourth_degree_details)]})}),e.jsxs("tr",{style:{height:"28px"},children:[e.jsx("td",{className:"field-label",style:{verticalAlign:"middle"},children:"c. Are you a solo parent??"}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:t.indigenous_group?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:t.indigenous_group?"":""})," YES"]}),e.jsxs("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:[e.jsx("div",{style:{width:"10px",height:"10px",border:"1px solid #000",backgroundColor:!t.indigenous_group&&t.indigenous_group!==void 0?"#f0f0f0":"#fff",display:"inline-block",marginRight:"4px",verticalAlign:"middle",textAlign:"center",lineHeight:"8px",fontSize:"8px",fontWeight:"bold"},children:!t.indigenous_group&&t.indigenous_group!==void 0?"":""})," NO"]})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"2",style:{verticalAlign:"middle"},children:"If YES, give details: "})}),t.fourth_degree&&t.fourth_degree_details&&e.jsx("tr",{style:{height:"28px"},children:e.jsxs("td",{className:"field-value",colspan:"2",style:{verticalAlign:"middle"},children:["Date Filed:  ",i(t.fourth_degree_details)]})})]})]}),e.jsxs("table",{className:"pds-table",style:{marginTop:"3px",tableLayout:"fixed",width:"100%"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"40%"}}),e.jsx("col",{style:{width:"23%"}}),e.jsx("col",{style:{width:"15%"}}),e.jsx("col",{style:{width:"18%"}})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"left",verticalAlign:"middle",height:"30px",fontSize:"11px"},children:"41. REFERENCES  (Person not related by consanguinity or affinity to applicant /appointee)"}),e.jsx("td",{className:"field-label",rowspan:"5",style:{textAlign:"center",verticalAlign:"middle",height:"30px"},children:e.jsx("div",{style:{border:"1px solid #000",height:"120px",width:"90px",margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f9f9f9"},children:a?e.jsx("img",{src:a,alt:"Employee Photo",style:{maxWidth:"85px",maxHeight:"115px",objectFit:"cover"}}):e.jsxs("div",{style:{color:"#999",fontSize:"10px",textAlign:"center"},children:["Photo",e.jsx("br",{}),"(Passport Size)"]})})})]}),Array.from({length:3},(v,N)=>{const f=s[N]||{},d=s[N]!==void 0&&f!==null;return e.jsxs("tr",{style:{height:"40px"},children:[e.jsx("td",{className:"field-value",style:{textAlign:"left",verticalAlign:"middle"},children:d?i(f.reference_name):""}),e.jsx("td",{className:"field-value",style:{textAlign:"left",verticalAlign:"middle"},children:d?i(f.reference_address):""}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle"},children:d?i(f.reference_tel_no):""})]},N)}),e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"3",style:{textAlign:"justify",verticalAlign:"middle"},children:"42. I declare under oath that I have personally accomplished this Personal Data Sheet which is a true, correct and complete statement pursuant to the provisions of pertinent laws, rules and regulations of the Republic of the Philippines. I authorize the agency head/authorized representative to verify/validate the contents stated herein. I agree that any misrepresentation made in this document and its attachments shall cause the filing of administrative/criminal case/s against me."})})]})]}),e.jsxs("table",{className:"pds-table",style:{marginTop:"3px",tableLayout:"fixed",width:"100%"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"12%"}}),e.jsx("col",{style:{width:"12%"}}),e.jsx("col",{style:{width:"46%"}}),e.jsx("col",{style:{width:"25%"}})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsxs("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"30px",fontSize:"9px"},children:["Government Issued ID   ",e.jsx("br",{}),"(i.e.Passport, GSIS, SSS, PRC, Driver's License, etc.)"]}),e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"30px",fontSize:"8px"},children:"PLEASE INDICATE ID Number and Date of Issuance"}),e.jsx("td",{className:"field-label",rowspan:"4",style:{textAlign:"center",verticalAlign:"middle",height:"30px"},children:e.jsx("div",{style:{border:"1px solid #000",height:"80px",width:"200px",margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f9f9f9"},children:n?e.jsx("img",{src:n,alt:"Signature",style:{maxWidth:"190px",maxHeight:"75px",objectFit:"contain"}}):e.jsx("div",{style:{color:"#999",fontSize:"10px",textAlign:"center"},children:"Signature"})})}),e.jsx("td",{className:"field-label",rowspan:"6",style:{textAlign:"center",verticalAlign:"middle",height:"30px"},children:e.jsx("div",{style:{border:"1px solid #000",height:"144px",width:"144px",margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f9f9f9"},children:l?e.jsx("img",{src:l,alt:"Thumbmark",style:{maxWidth:"140px",maxHeight:"140px",objectFit:"contain"}}):e.jsxs("div",{style:{color:"#999",fontSize:"10px",textAlign:"center"},children:["Thumbmark",e.jsx("br",{}),'(2" x 2")']})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle",height:"30px",fontSize:"10px"},children:"Government Issued ID:"}),e.jsx("td",{className:"field-value",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle",height:"40px",fontSize:"9px"},children:r.length>0?i((m=r[0])==null?void 0:m.government_issued_id):"_____"})]}),e.jsx("tr",{}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle",height:"30px",fontSize:"10px"},children:"ID/License/Passport No.:"}),e.jsx("td",{className:"field-value",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle",height:"40px",fontSize:"9px"},children:r.length>0?i((u=r[0])==null?void 0:u.id_number):"_____"})]}),e.jsx("tr",{children:e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"9px",fontSize:"9px"},children:"Signature (Sign inside the box)"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle",height:"30px",fontSize:"10px"},children:"Date/Place of Issuance:"}),e.jsxs("td",{className:"field-value",rowspan:"2",style:{textAlign:"center",verticalAlign:"middle",height:"40px",fontSize:"9px"},children:[r.length>0?h((x=r[0])==null?void 0:x.date_issued):"____"," / ",r.length>0?i((j=r[0])==null?void 0:j.place_of_issuance):"_________________"]}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"20px",fontSize:"9px"},children:i(o)||"_________________"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"field-label",style:{textAlign:"center",verticalAlign:"middle",height:"15x"},children:" Date Accomplished"}),e.jsx("td",{className:"field-value",style:{textAlign:"center",verticalAlign:"middle",height:"15px"},children:"Right Thumbmark"})]})]})]}),e.jsx("table",{className:"pds-table",style:{marginTop:"3px"},children:e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{className:"field-label",style:{padding:"10px",textAlign:"left",verticalAlign:"top",fontSize:"10px"},children:"SUBSCRIBED AND SWORN to before me this ___________________________, affiant exhibiting his/her validly issued government ID as indicated above."})}),e.jsx("tr",{children:e.jsx("td",{style:{padding:"20px",textAlign:"center",verticalAlign:"top",borderBottom:"1px solid #000"},children:e.jsx("div",{style:{border:"0px solid #000",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"3px"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{style:{fontWeight:"bold",fontSize:"12px"},children:"____insert here the municipal mayor's name__________________"}),e.jsx("div",{style:{fontSize:"10px",marginTop:"3px"},children:"Person Administering Oath"})]})})})})]})}),e.jsxs("table",{className:"pds-table",style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse",fontSize:"9px",marginBottom:"0.01in",whiteSpace:"normal",wordWrap:"break-word",marginTop:"0.01n"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"18.5%"}}),e.jsx("col",{style:{width:"46.5%"}}),e.jsx("col",{style:{width:"10%"}}),e.jsx("col",{style:{width:"25%"}})]}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{className:"field-label",colspan:"4",style:{textAlign:"right",verticalAlign:"middle",height:"20px"},children:" CS FORM 212 (Revised 2017), Page 4 of 4"})})})]})]})]})},$S=({formData:t,children:s=[],education:r=[],civilServiceEligibility:n=[],workExperience:a=[],voluntaryWork:l=[],trainings:o=[],skills:i=[],recognitions:c=[],memberships:h=[],declarations:p={},references:m=[],governmentIds:u=[],signatureData:x="",photoData:j="",thumbmarkData:v="",dateAccomplished:N="",pageNumber:f=null})=>{const d=S=>!S||S===""||S===null||S===void 0||S==="0000-00-00"?"N/A":S,g=S=>{if(!S||S===""||S==="0000-00-00")return"N/A";try{return new Date(S).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return d(S)}},b=S=>S===!0||S==="true"||S===1?"YES":S===!1||S==="false"||S===0?"NO":"N/A",E=`
    @media print {
      @page {
        size: legal;
        margin: 0.5in;
      }
      
      body {
        font-family: Arial, sans-serif;
        font-size: 9pt;
        line-height: 1.2;
        margin: 0;
        padding: 0;
      }
      
      .page-break {
        page-break-after: always;
      }
      
      .no-page-break {
        page-break-inside: avoid;
      }
      
      .pds-container {
        width: 100%;
        max-width: none;
      }
      
      .pds-header {
        text-align: center;
        font-weight: bold;
        font-size: 10pt;
        margin-bottom: 20px;
        border-bottom: 2px solid black;
        padding-bottom: 10px;
      }
      
      .pds-header-main {
        text-align: center;
        margin-bottom: 20px;
      }
      
      .form-number {
        font-size: 10pt;
        font-weight: bold;
      }
      
      .form-revision {
        font-size: 9pt;
        font-weight: normal;
      }
      
      .form-title {
        font-size: 16pt;
        font-weight: bold;
        margin: 10px 0;
        text-transform: uppercase;
      }
      
      .warning-text {
        font-size: 9pt;
        margin: 10px 0;
        text-align: left;
      }
      
      .instructions-text {
        font-size: 9pt;
        margin: 10px 0;
        text-align: left;
        font-weight: normal;
      }
      
      .filling-guidelines {
        font-size: 9pt;
        margin: 10px 0;
        text-align: left;
      }
      
      .checkbox-field {
        display: inline-flex;
        align-items: center;
        gap: 5px;
      }
      
      .checkbox-group {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 5px;
      }
      
      .checked-box {
        color: black;
      }
      
      .unchecked-box {
        color: black;
      }
      
      .other-field {
        margin-top: 5px;
        font-size: 8pt;
      }
      
      .citizenship-fields {
        display: flex;
        flex-direction: column;
        gap: 5px;
      }
      
      .dual-citizenship-details {
        margin-top: 10px;
        font-size: 8pt;
      }
      
      .checkbox {
        font-family: Arial, sans-serif;
        font-size: 12pt;
      }
      
      .pds-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 15px;
        font-size: 9pt;
      }
      
      .pds-table td, .pds-table th {
        border: 1px solid black;
        padding: 3px 4px;
        vertical-align: top;
      }
      
      .pds-table th {
        background-color: #f0f0f0;
        font-weight: bold;
        text-align: left;
      }
      
      .field-label {
        font-weight: bold;
        background-color: #f8f8f8;
        width: 25%;
      }
      
      .field-value {
        width: 75%;
      }
      
      .section-title {
        font-weight: bold;
        font-size: 10pt;
        background-color: #e0e0e0;
        text-align: center;
        padding: 5px;
        border: 1px solid black;
      }
      
      .yes-no-box {
        width: 20px;
        height: 15px;
        display: inline-block;
        border: 1px solid black;
        margin: 0 5px;
        text-align: center;
        padding-top: 1px;
      }
      
      .signature-box {
        width: 300px;
        height: 80px;
        border: 1px solid black;
        display: inline-block;
        margin: 5px;
      }
      
      .photo-box {
        width: 140px;
        height: 180px;
        border: 1px solid black;
        display: inline-block;
        text-align: center;
        padding: 5px;
      }
      
      .page-number {
        text-align: center;
        font-size: 8pt;
        margin-top: 20px;
      }
    }
    
    @media screen {
      body {
        font-family: Arial, sans-serif;
        font-size: 9pt;
        line-height: 1.2;
        margin: 20px;
      }
      
      .pds-container {
        width: 100%;
        max-width: 100%;
      }
      
      .pds-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 15px;
        font-size: 9pt;
      }
      
      .pds-table td, .pds-table th {
        border: 1px solid black;
        padding: 3px 4px;
        vertical-align: top;
      }
      
      .pds-table th {
        background-color: #f0f0f0;
        font-weight: bold;
        text-align: left;
      }
      
      .field-label {
        font-weight: bold;
        background-color: #f8f8f8;
        width: 25%;
      }
      
      .field-value {
        width: 75%;
      }
      
      .section-title {
        font-weight: bold;
        font-size: 10pt;
        background-color: #e0e0e0;
        text-align: center;
        padding: 5px;
        border: 1px solid black;
      }
      
      .pds-header-main {
        text-align: center;
        margin-bottom: 20px;
      }
      
      .form-number {
        font-size: 10pt;
        font-weight: bold;
      }
      
      .form-revision {
        font-size: 9pt;
        font-weight: normal;
      }
      
      .form-title {
        font-size: 16pt;
        font-weight: bold;
        margin: 10px 0;
        text-transform: uppercase;
      }
      
      .warning-text {
        font-size: 9pt;
        margin: 10px 0;
        text-align: left;
      }
      
      .instructions-text {
        font-size: 9pt;
        margin: 10px 0;
        text-align: left;
        font-weight: normal;
      }
      
      .filling-guidelines {
        font-size: 9pt;
        margin: 10px 0;
        text-align: left;
      }
      
      .checkbox-field {
        display: inline-flex;
        align-items: center;
        gap: 5px;
      }
      
      .checkbox-group {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 5px;
      }
      
      .checked-box {
        color: black;
      }
      
      .unchecked-box {
        color: black;
      }
      
      .other-field {
        margin-top: 5px;
        font-size: 8pt;
      }
      
      .citizenship-fields {
        display: flex;
        flex-direction: column;
        gap: 5px;
      }
      
      .dual-citizenship-details {
        margin-top: 10px;
        font-size: 8pt;
      }
      
      .checkbox {
        font-family: Arial, sans-serif;
        font-size: 12pt;
      }
      
      .civil-status-layout {
        display: flex;
        flex-direction: column;
        gap: 3px;
      }
      
      .civil-status-left {
        display: inline-block;
        width: 45%;
      }
      
      .civil-status-right {
        display: inline-block;
        width: 45%;
        margin-left: 10%;
      }
      
      .citizenship-layout {
        display: flex;
        flex-direction: column;
        gap: 3px;
      }
      
      .citizenship-main {
        display: inline-flex;
        align-items: center;
        gap: 10px;
      }
      
      .dual-citizenship-sub {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        margin-left: 20px;
      }
      
      .citizenship-instruction {
        font-size: 8pt;
        margin-top: 5px;
      }
      
      .citizenship-country {
        font-size: 8pt;
        margin-top: 2px;
      }
      
      .address-label-left {
        font-weight: bold;
        background-color: #f8f8f8;
        width: 25%;
      }
      
      .address-field-left {
        width: 25%;
      }
      
      .address-label-right {
        font-weight: bold;
        background-color: #f8f8f8;
        width: 25%;
      }
      
      .address-field-right {
        width: 25%;
      }
      
      .citizenship-span {
        vertical-align: top;
        height: 100%;
      }
      
      .residential-address-span {
        vertical-align: top;
        height: 100%;
      }
      
      .residential-address-layout {
        display: flex;
        flex-direction: column;
        gap: 2px;
        font-size: 8pt;
      }
      
      .address-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1px;
      }
      
      .address-label {
        font-weight: bold;
        font-size: 7pt;
        min-width: 60px;
      }
      
      .address-value {
        flex: 1;
        font-size: 8pt;
        margin-left: 5px;
      }
      
      .residential-address-header {
        vertical-align: top;
        display: flex;
        flex-direction: column;
        gap: 2px;
      }
      
      .zip-label-in-header {
        font-weight: bold;
        font-size: 8pt;
        text-align: center;
        margin-top: 5px;
      }
      
      .address-label-col4 {
        font-weight: bold;
        font-size: 8pt;
        text-align: center;
      }
      
      .address-label-col5 {
        font-weight: bold;
        font-size: 8pt;
        text-align: center;
      }
      
      .residential-address-content {
        vertical-align: top;
      }
      
      .zip-value-cell {
        font-weight: bold;
        text-align: center;
        vertical-align: middle;
      }
      
      .row-number {
        font-weight: bold;
        text-align: center;
        width: 30px;
        background-color: #f8f8f8;
      }
    }
  `,R=S=>{switch(S){case 1:return e.jsx(wf,{formData:t,children:s,education:r,displayValue:d,formatDate:g});case 2:return e.jsx(Ef,{formData:t,civilServiceEligibility:n,workExperience:a,displayValue:d,formatDate:g,displayYesNo:b});case 3:return e.jsx(Sf,{voluntaryWork:l,trainings:o,skills:i,recognitions:c,memberships:h,displayValue:d,formatDate:g});case 4:return e.jsx(_f,{declarations:p,references:m,governmentIds:u,signatureData:x,photoData:j,thumbmarkData:v,dateAccomplished:N,displayValue:d,displayYesNo:b,formatDate:g});default:return e.jsxs(e.Fragment,{children:[e.jsx(wf,{formData:t,children:s,education:r,displayValue:d,formatDate:g}),e.jsx("div",{className:"page-break"}),e.jsx(Ef,{formData:t,civilServiceEligibility:n,workExperience:a,displayValue:d,formatDate:g,displayYesNo:b}),e.jsx("div",{className:"page-break"}),e.jsx(Sf,{voluntaryWork:l,trainings:o,skills:i,recognitions:c,memberships:h,displayValue:d,formatDate:g}),e.jsx("div",{className:"page-break"}),e.jsx(_f,{declarations:p,references:m,governmentIds:u,signatureData:x,photoData:j,thumbmarkData:v,dateAccomplished:N,displayValue:d,displayYesNo:b,formatDate:g})]})}};return e.jsxs("div",{className:"pds-container",children:[e.jsx("style",{children:E}),R(f)]})},HS=({isOpen:t,onClose:s,selectedEmployee:r,onSave:n})=>{const[a,l]=y.useState(1),[o,i]=y.useState(!1),[c,h]=y.useState({}),[p,m]=y.useState(0),[u,x]=y.useState([]),[j,v]=y.useState(!1),[N,f]=y.useState(!1),[d,g]=y.useState({dtruserid:"",badgenumber:"",cs_id_no:"",surname:"",firstname:"",middlename:"",name_extension:"",date_of_birth:"",place_of_birth:"",sex:"",civil_status:"",height:"",height_unit:"m",weight:"",weight_unit:"kg",blood_type:"",gsis:"",pagibig:"",philhealth:"",sss:"",tin:"",agency_no:"",citizenship_filipino:!0,citizenship_dual:!1,dual_citizenship_type:"",dual_citizenship_country:"",residential_house_block_lot:"",residential_street:"",residential_subdivision_village:"",residential_barangay:"",residential_city_municipality:"",residential_province:"",residential_zip_code:"",permanent_same_as_residential:!1,permanent_house_block_lot:"",permanent_street:"",permanent_subdivision_village:"",permanent_barangay:"",permanent_city_municipality:"",permanent_province:"",permanent_zip_code:"",telephone:"",mobile:"",email:"",spouse_surname:"",spouse_firstname:"",spouse_middlename:"",spouse_extension:"",spouse_occupation:"",spouse_employer_business_name:"",spouse_business_address:"",spouse_telephone:"",father_surname:"",father_firstname:"",father_middlename:"",father_extension:"",mother_surname:"",mother_firstname:"",mother_middlename:""}),[b,E]=y.useState([{full_name:"",date_of_birth:""}]),[R,S]=y.useState([{level:"Elementary",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Secondary",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Vocational/Trade Course",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"College",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Graduate Studies",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""}]),[k,L]=y.useState([{eligibility_type:"",rating:"",date_of_examination:"",place_of_examination:"",license_number:"",date_of_validity:""}]),[A,D]=y.useState([{date_from:"",date_to:"",position_title:"",department_agency_company:"",monthly_salary:"",salary_grade_step:"",status_of_appointment:"",government_service:"",is_present:!1}]),I=["Elementary","Secondary","Vocational/Trade Course","College","Graduate Studies"],O=re=>{if(!re)return"";try{const fe=typeof re=="string"?new Date(re):re;if(Number.isNaN(fe.getTime()))return"";const ue=fe.getFullYear(),Ge=String(fe.getMonth()+1).padStart(2,"0"),ht=String(fe.getDate()).padStart(2,"0");return`${ue}-${Ge}-${ht}`}catch{return""}},C=re=>{if(!re)return"";if(/^\d{4}$/.test(String(re)))return String(re);try{const fe=new Date(re);return Number.isNaN(fe.getTime())?"":String(fe.getFullYear())}catch{return""}},F=(re=[])=>{const fe=new Map((re||[]).filter(Boolean).map(ue=>[ue.level,ue]));return I.map(ue=>{const Ge=fe.get(ue)||{};return{level:ue,school_name:Ge.school_name||"",degree_course:Ge.degree_course||Ge.course||"",period_from:O(Ge.period_from||Ge.from||""),period_to:O(Ge.period_to||Ge.to||""),highest_level_units:Ge.highest_level_units||Ge.highest_level||"",year_graduated:C(Ge.year_graduated||""),scholarship_honors:Ge.scholarship_honors||Ge.honor_received||""}})},[U,Y]=y.useState([{organization_name_address:"",date_from:"",date_to:"",number_of_hours:"",position_nature_of_work:""}]),[G,V]=y.useState([{training_title:"",date_from:"",date_to:"",number_of_hours:"",type_of_ld:"",conducted_sponsored_by:""}]),[W,_]=y.useState([{skill_hobby:""}]),[M,P]=y.useState([{recognition:""}]),[$,B]=y.useState([{organization:""}]),[w,T]=y.useState({third_degree:!1,fourth_degree:!1,fourth_degree_details:"",guilty_admin:!1,guilty_admin_details:"",thirtyfive_b:!1,thirtyfive_datefiled:"",thirtyfive_statuses:"",convicted:!1,convicted_details:"",separated_service:!1,separated_service_details:"",candidate:!1,candidate_details:"",resigned_campaign:!1,resigned_campaign_details:"",immigrant:!1,immigrant_country:"",indigenous_group:!1,indigenous_group_details:"",pwd:!1,pwd_id_no:"",solo_parent:!1,solo_parent_id_no:""}),[H,K]=y.useState([{reference_name:"",reference_address:"",reference_tel_no:""}]),[J,X]=y.useState([{government_issued_id:"",id_number:"",date_issued:"",place_of_issuance:"",status:"active"}]),[pe,oe]=y.useState(!1),[ce,Ae]=y.useState(!1),[Be,Ie]=y.useState(""),[ye,se]=y.useState({value:"",unit:"",convertedValue:""}),[we,ve]=y.useState(""),[Q,ne]=y.useState(""),[he,Me]=y.useState(""),[be,De]=y.useState(""),[ze,Ee]=y.useState([]),[Z,ee]=y.useState([]),[_e,Qe]=y.useState([]),[je,Ke]=y.useState(!1);y.useEffect(()=>{console.log(" [PDS] Eligibility types state updated:",_e.length,"items"),console.log(" [PDS] Eligibility types array:",_e),_e.length>0?(console.log(" [PDS] First few eligibility types:",_e.slice(0,3)),console.log(" [PDS] Sample eligibility type structure:",_e[0])):console.log(" [PDS] No eligibility types loaded")},[_e]);const rt=()=>{console.log(" [PDS] Resetting form state for new session"),g({dtruserid:"",badgenumber:"",surname:"",firstname:"",middlename:"",extension:"",date_of_birth:"",place_of_birth:"",sex:"",civil_status:"",height:"",weight:"",blood_type:"",gsis:"",pagibig:"",philhealth:"",sss:"",tin:"",agency_no:"",residential_house_block_lot:"",residential_street:"",residential_subdivision_village:"",residential_barangay:"",residential_city_municipality:"",residential_province:"",residential_zip_code:"",permanent_same_as_residential:!1,permanent_house_block_lot:"",permanent_street:"",permanent_subdivision_village:"",permanent_barangay:"",permanent_city_municipality:"",permanent_province:"",permanent_zip_code:"",telephone:"",mobile:"",email:"",spouse_surname:"",spouse_firstname:"",spouse_middlename:"",spouse_extension:"",spouse_occupation:"",employer_business_name:"",business_address:"",spouse_telephone_no:"",father_surname:"",father_firstname:"",father_middlename:"",father_extension:"",mother_surname:"",mother_firstname:"",mother_middlename:"",citizenship_filipino:!0,citizenship_dual:!1,dual_citizenship_type:"",dual_citizenship_country:""}),E([{full_name:"",date_of_birth:""}]),S([{level:"Elementary",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Secondary",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Vocational/Trade Course",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"College",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""},{level:"Graduate Studies",school_name:"",degree_course:"",period_from:"",period_to:"",highest_level_units:"",year_graduated:"",scholarship_honors:""}]),K([{reference_name:"",reference_address:"",reference_tel_no:""}]),L([]),D([]),Y([]),V([]),_([]),X([{government_issued_id:"",id_number:"",date_issued:"",place_of_issuance:"",status:"active"}]),T({third_degree:!1,fourth_degree:!1,guilty_admin:!1,thirtyfive_b:!1,convicted:!1,separated_service:!1,candidate:!1,resigned_campaign:!1,immigrant:!1,indigenous_group:!1,pwd:!1,solo_parent:!1,fourth_degree_details:"",guilty_admin_details:"",thirtyfive_datefiled:"",thirtyfive_statuses:"",separated_service_details:"",candidate_details:"",resigned_campaign_details:"",immigrant_country:"",indigenous_group_details:"",pwd_id_no:"",solo_parent_id_no:"",authorized_government:!1,authorized_government_details:""}),l(1),oe(!1),se({value:"",unit:"",convertedValue:""}),Ae(!1),Ie(""),m(0),x([]),v(!1),ve(""),Me(""),ne(""),h({}),i(!1),console.log(" [PDS] Form state reset completed")};y.useEffect(()=>{it()},[]),y.useEffect(()=>{t||(console.log(" [PDS] Modal closed, resetting form state"),rt())},[t]),y.useEffect(()=>()=>{console.log(" [PDS] Component unmounting, cleaning up state"),rt()},[]);const gt=()=>{console.log(" [PDS] Retrying lookup data fetch..."),it()};y.useEffect(()=>{r&&(console.log(" [PDS] Selected employee changed, resetting form state first"),rt(),setTimeout(()=>{r.hasPDS?(console.log(" [PDS] Loading existing PDS data for employee:",r.dtruserid),mt(r.dtruserid)):(console.log(" [PDS] Creating new PDS for employee:",r.dtruserid),g(re=>({...re,dtruserid:r.dtruserid,badgenumber:r.badgenumber}))),Kl(r.dtruserid)},100))},[r]),y.useEffect(()=>{Object.keys(d).length>0&&(r!=null&&r.dtruserid?Kl(r.dtruserid):Ta())},[d,H,J,R,k,A,b,pe,r]);const mt=async re=>{try{i(!0);const ue=(await le.get(`/201-employees/pds/${re}`)).data.data;console.log(" [PDS] Received children data from API:",ue.children),console.log(" [PDS] Received employee data from API:",{date_of_birth:ue.employee.date_of_birth,place_of_birth:ue.employee.place_of_birth,sex:ue.employee.sex,birthdate:ue.employee.birthdate,birthplace:ue.employee.birthplace,gender:ue.employee.gender});const Ge=Object.fromEntries(Object.entries(ue.employee).map(([Pe,z])=>{if(z==null)return[Pe,""];if(Pe==="date_of_birth"&&z){const ie=new Date(z);if(!isNaN(ie.getTime())){const xe=ie.toISOString().split("T")[0];return console.log(` [PDS] Converting date: ${z} -> ${xe}`),[Pe,xe]}}return[Pe,z]}));g(Pe=>({...Pe,...Ge,dtruserid:r.dtruserid,badgenumber:r.badgenumber})),console.log(" [PDS] FormData after setting:",{date_of_birth:Ge.date_of_birth,place_of_birth:Ge.place_of_birth,sex:Ge.sex});const ht=Number(ue.employee.pdscompleprogress)||0;if(m(ht),console.log(" [PDS] Loaded completeness progress:",ht),ue.children&&ue.children.length>0){const Pe=ue.children.map(z=>({full_name:z.full_name||"",date_of_birth:z.date_of_birth||""}));E(Pe),console.log(" [PDS] Loaded children:",Pe)}else E([{full_name:"",date_of_birth:""}]),console.log(" [PDS] No children data found, using default empty row");if(ue.education&&ue.education.length>0?S(F(ue.education)):S(F([])),ue.eligibility&&ue.eligibility.length>0&&L(ue.eligibility),ue.workExperience&&ue.workExperience.length>0){console.log(" Received work experience data:",ue.workExperience);const Pe=ue.workExperience.map(z=>{const ie=z.is_present===!0||z.is_present===1||z.is_present==="true"||z.ispresent===!0||z.ispresent===1||z.ispresent==="true";return{...z,is_present:ie,date_to:ie&&(!z.date_to||z.date_to==="0"||z.date_to==="0000-00-00"||z.date_to==="")?new Date().toISOString().split("T")[0]:z.date_to}});D(Pe)}if(ue.voluntaryWork&&ue.voluntaryWork.length>0&&(console.log(" Received voluntary work data:",ue.voluntaryWork),Y(ue.voluntaryWork)),ue.trainings&&ue.trainings.length>0&&(console.log(" Received trainings data:",ue.trainings),V(ue.trainings)),ue.skills&&ue.skills.length>0&&(console.log(" Received skills data:",ue.skills),_(ue.skills)),ue.recognitions&&ue.recognitions.length>0&&(console.log(" Received recognitions data:",ue.recognitions),P(ue.recognitions)),ue.memberships&&ue.memberships.length>0&&(console.log(" Received memberships data:",ue.memberships),B(ue.memberships)),ue.references&&ue.references.length>0&&(console.log(" Received references data:",ue.references),K(ue.references)),ue.governmentIds&&ue.governmentIds.length>0&&(console.log(" Received government IDs data:",ue.governmentIds),X(ue.governmentIds)),ue.declarations&&Object.keys(ue.declarations).length>0){console.log(" Received declarations data:",ue.declarations);const Pe=xe=>{if(!xe||xe===""||xe==="0000-00-00")return"";try{const Le=new Date(xe);return isNaN(Le.getTime())?"":Le.toISOString().split("T")[0]}catch(Le){return console.log("Date formatting error:",Le,"for date:",xe),""}},z=xe=>{if(!xe||xe===""||xe==="0000-00-00")return"";try{const Le=new Date(xe);if(isNaN(Le.getTime()))return"";const tt=(Le.getMonth()+1).toString().padStart(2,"0"),Fe=Le.getDate().toString().padStart(2,"0"),et=Le.getFullYear();return`${tt}/${Fe}/${et}`}catch(Le){return console.log("Date display formatting error:",Le,"for date:",xe),""}},ie={third_degree:ue.declarations.third_degree||!1,fourth_degree:ue.declarations.fourth_degree||!1,fourth_degree_details:ue.declarations.fourth_degree_details||"",guilty_admin:ue.declarations.guilty_admin||!1,guilty_admin_details:ue.declarations.guilty_admin_details||"",thirtyfive_b:ue.declarations.criminally_charged||!1,thirtyfive_datefiled:z(ue.declarations.criminally_charged_date),thirtyfive_statuses:ue.declarations.criminally_charged_status||"",convicted:ue.declarations.convicted||!1,convicted_details:ue.declarations.convicted_details||"",separated_service:ue.declarations.separated_service||!1,separated_service_details:ue.declarations.separated_service_details||"",candidate:ue.declarations.candidate||!1,candidate_details:ue.declarations.candidate_details||"",resigned_campaign:ue.declarations.resigned_campaign||!1,resigned_campaign_details:ue.declarations.resigned_campaign_details||"",immigrant:ue.declarations.immigrant||!1,immigrant_country:ue.declarations.immigrant_country||"",indigenous_group:ue.declarations.indigenous_group||!1,indigenous_group_details:ue.declarations.indigenous_group_details||"",pwd:ue.declarations.pwd||!1,pwd_id_no:ue.declarations.pwd_id_no||"",solo_parent:ue.declarations.solo_parent||!1,solo_parent_id_no:ue.declarations.solo_parent_id_no||""};console.log(" Mapped declarations data:",ie),console.log(" thirtyfive_datefiled value:",ie.thirtyfive_datefiled),console.log(" thirtyfive_statuses value:",ie.thirtyfive_statuses),T(ie)}ue.media&&Object.keys(ue.media).length>0?(console.log(" Received media data:",ue.media),ue.media.signature&&ue.media.signature.trim()!==""?(console.log(" Loading saved signature, length:",ue.media.signature.length),ve(ue.media.signature)):console.log(" No signature data or empty string"),ue.media.photo&&ue.media.photo.trim()!==""?(console.log(" Loading saved photo, length:",ue.media.photo.length),Me(ue.media.photo)):console.log(" No photo data or empty string"),ue.media.thumb&&ue.media.thumb.trim()!==""?(console.log(" Loading saved thumbmark, length:",ue.media.thumb.length),De(ue.media.thumb)):console.log(" No thumbmark data or empty string"),ue.media.date_accomplished&&(console.log(" Loading date accomplished:",ue.media.date_accomplished),ne(ue.media.date_accomplished))):console.log(" No media data received or empty object"),console.log(" Loaded existing PDS data for employee:",re)}catch(fe){console.error("Error fetching PDS data:",fe)}finally{i(!1)}},it=async()=>{var re,fe,ue,Ge,ht;try{console.log(" [PDS] Fetching lookup data..."),Ke(!0),console.log(" [PDS] API base URL:",le.defaults.baseURL),console.log(" [PDS] API headers:",le.defaults.headers),console.log(" [PDS] Starting API calls...");const[Pe,z,ie]=await Promise.all([le.get("/201-employees/lookup/blood-types"),le.get("/201-employees/lookup/civil-statuses"),le.get("/201-employees/eligibility-types")]);console.log(" [PDS] Blood types response:",Pe.data),console.log(" [PDS] Civil statuses response:",z.data),console.log(" [PDS] Eligibility types response:",ie.data),console.log(" [PDS] Blood types data structure:",{hasData:!!Pe.data.data,dataLength:(re=Pe.data.data)==null?void 0:re.length,success:Pe.data.success}),console.log(" [PDS] Civil statuses data structure:",{hasData:!!z.data.data,dataLength:(fe=z.data.data)==null?void 0:fe.length,success:z.data.success}),console.log(" [PDS] Eligibility types data structure:",{hasData:!!ie.data.data,dataLength:(ue=ie.data.data)==null?void 0:ue.length,success:ie.data.success}),Ee(Pe.data.data),ee(z.data.data),Qe(ie.data.data),console.log(" [PDS] Lookup data loaded successfully"),console.log(" [PDS] Eligibility types set:",ie.data.data.length,"items")}catch(Pe){console.error(" [PDS] Error fetching lookup data:",Pe),console.error(" [PDS] Error details:",((Ge=Pe.response)==null?void 0:Ge.data)||Pe.message),console.error(" [PDS] Error status:",(ht=Pe.response)==null?void 0:ht.status),console.error(" [PDS] Error config:",Pe.config),console.log(" [PDS] Lookup data fetch failed - will retry or show empty dropdowns"),console.error(" [PDS] Failed to load lookup data from HR201 database tables:"),console.error("  - blood_types table"),console.error("  - civilstatus table"),console.error("  - eligibilitytypes table"),console.error("Please ensure these tables exist and have data in the HR201 database.")}finally{Ke(!1)}},ae=re=>{const{name:fe,value:ue,type:Ge,checked:ht}=re.target;g(fe==="citizenship_dual"?Pe=>({...Pe,[fe]:ht,dual_citizenship_type:ht?Pe.dual_citizenship_type:"",dual_citizenship_country:ht?Pe.dual_citizenship_country:"",citizenship:"Filipino"}):Pe=>({...Pe,[fe]:Ge==="checkbox"?ht:ue})),fe==="permanent_same_as_residential"&&ht&&g(Pe=>({...Pe,permanent_house_block_lot:Pe.residential_house_block_lot,permanent_street:Pe.residential_street,permanent_subdivision_village:Pe.residential_subdivision_village,permanent_barangay:Pe.residential_barangay,permanent_city_municipality:Pe.residential_city_municipality,permanent_province:Pe.residential_province,permanent_zip_code:Pe.residential_zip_code})),fe==="civil_status"&&ue==="Single"&&g(Pe=>({...Pe,spouse_surname:"",spouse_firstname:"",spouse_middlename:"",spouse_extension:"",spouse_occupation:"",spouse_employer_business_name:"",spouse_business_address:"",spouse_telephone:""})),c[fe]&&h(Pe=>({...Pe,[fe]:""}))},Ce=()=>{E(re=>[...re,{full_name:"",date_of_birth:""}])},Se=re=>{b.length>1&&E(fe=>fe.filter((ue,Ge)=>Ge!==re))},qe=(re,fe,ue)=>{console.log(` [PDS] updateChild: index=${re}, field=${fe}, value=${ue}`),E(Ge=>Ge.map((ht,Pe)=>{if(Pe===re){const z={...ht,[fe]:ue};return console.log(` [PDS] Updated child ${re}:`,z),z}return ht}))},Ze=(re,fe,ue)=>{S(Ge=>F(Ge).map((z,ie)=>ie===re?{...z,[fe]:ue}:z)),console.log(` [PDS] Updated education ${re} (${fe}):`,ue)},ke=()=>{L(re=>[...re,{eligibility_type:"",rating:"",date_of_examination:"",place_of_examination:"",license_number:"",date_of_validity:""}])},te=re=>{k.length>1&&L(fe=>fe.filter((ue,Ge)=>Ge!==re))},Ne=(re,fe,ue)=>{L(Ge=>Ge.map((ht,Pe)=>Pe===re?{...ht,[fe]:ue}:ht))},de=()=>{D(re=>[...re,{date_from:"",date_to:"",position_title:"",department_agency_company:"",monthly_salary:"",salary_grade_step:"",status_of_appointment:"",government_service:"",is_present:!1}])},q=re=>{A.length>1&&D(fe=>fe.filter((ue,Ge)=>Ge!==re))},me=(re,fe,ue)=>{D(Ge=>{let ht=Ge.map((Pe,z)=>{if(z===re){const ie={...Pe,[fe]:ue};if(fe==="is_present"&&ue===!0){const Le=new Date().toISOString().split("T")[0];ie.date_to=Le}return ie}return Pe});return fe==="is_present"&&ue===!0&&(ht=ht.map((Pe,z)=>z===re?{...Pe,is_present:!0,date_to:ht[z].date_to}:{...Pe,is_present:!1})),ht.sort((Pe,z)=>Pe.is_present===!0&&z.is_present!==!0?-1:Pe.is_present!==!0&&z.is_present===!0?1:Pe.date_to&&z.date_to?new Date(z.date_to)-new Date(Pe.date_to):0),ht})},Te=()=>{Y(re=>[...re,{organization_name_address:"",date_from:"",date_to:"",number_of_hours:"",position_nature_of_work:""}])},Ue=re=>{U.length>1&&Y(fe=>fe.filter((ue,Ge)=>Ge!==re))},Re=(re,fe,ue)=>{Y(Ge=>Ge.map((ht,Pe)=>Pe===re?{...ht,[fe]:ue}:ht))},$e=()=>{V(re=>[...re,{training_title:"",date_from:"",date_to:"",number_of_hours:"",type_of_ld:"",conducted_sponsored_by:""}])},Ve=re=>{G.length>1&&V(fe=>fe.filter((ue,Ge)=>Ge!==re))},at=(re,fe,ue)=>{V(Ge=>Ge.map((ht,Pe)=>Pe===re?{...ht,[fe]:ue}:ht))},Je=()=>{_(re=>[...re,{skill_hobby:""}])},ge=re=>{W.length>1&&_(fe=>fe.filter((ue,Ge)=>Ge!==re))},He=(re,fe)=>{_(ue=>ue.map((Ge,ht)=>ht===re?{skill_hobby:fe}:Ge))},Ye=()=>{P(re=>[...re,{recognition:""}])},ct=re=>{M.length>1&&P(fe=>fe.filter((ue,Ge)=>Ge!==re))},yt=(re,fe)=>{P(ue=>ue.map((Ge,ht)=>ht===re?{recognition:fe}:Ge))},lt=()=>{B(re=>[...re,{organization:""}])},jt=re=>{$.length>1&&B(fe=>fe.filter((ue,Ge)=>Ge!==re))},kt=(re,fe)=>{B(ue=>ue.map((Ge,ht)=>ht===re?{organization:fe}:Ge))},Rt=re=>{const{name:fe,value:ue,type:Ge,checked:ht}=re.target;let Pe=ue;if(fe==="thirtyfive_datefiled"&&ue){const z=ue.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(z){const[,ie,xe,Le]=z,tt=`${Le}-${ie.padStart(2,"0")}-${xe.padStart(2,"0")}`;Pe=tt,console.log(" Date conversion:",ue,"",tt)}else console.log(" Invalid date format:",ue)}T(z=>({...z,[fe]:Ge==="checkbox"?ht:Pe}))},yr=()=>{H.length<3&&K(re=>[...re,{reference_name:"",reference_address:"",reference_tel_no:""}])},ec=re=>{H.length>1&&K(fe=>fe.filter((ue,Ge)=>Ge!==re))},Ca=(re,fe,ue)=>{K(Ge=>Ge.map((ht,Pe)=>Pe===re?{...ht,[fe]:ue}:ht))},Cs=()=>{J.length===0||!J[0].government_issued_id?X([{government_issued_id:"",id_number:"",date_issued:"",place_of_issuance:"",status:"active"}]):(oe(!0),X([{government_issued_id:"",id_number:"",date_issued:"",place_of_issuance:"",status:"active",originalData:J[0]}]))},tc=()=>{var ue,Ge,ht,Pe;const re=J[0];if(!((ue=re.government_issued_id)!=null&&ue.trim())||!((Ge=re.id_number)!=null&&Ge.trim())||!((ht=re.date_issued)!=null&&ht.trim())||!((Pe=re.place_of_issuance)!=null&&Pe.trim())){alert("Please fill in all fields (43.1, 43.2, 43.3, and 43.4) before accepting the change.");return}const fe=re.originalData;if(fe&&!(re.government_issued_id!==fe.government_issued_id||re.id_number!==fe.id_number||re.date_issued!==fe.date_issued||re.place_of_issuance!==fe.place_of_issuance)){alert("No changes detected. Please modify at least one field before accepting the change.");return}X([{government_issued_id:re.government_issued_id,id_number:re.id_number,date_issued:re.date_issued,place_of_issuance:re.place_of_issuance,status:"active"}]),oe(!1)},sc=()=>{var fe;const re=(fe=J[0])==null?void 0:fe.originalData;re&&X([re]),oe(!1)},Rr=(re,fe,ue)=>{X(Ge=>Ge.map((ht,Pe)=>Pe===re?{...ht,[fe]:ue}:ht))},Vl=re=>{Ie(re),se({value:"",unit:re==="height"?"ft":"lbs",convertedValue:""}),Ae(!0)},ka=()=>{Ae(!1),Ie(""),se({value:"",unit:"",convertedValue:""})},An=(re,fe)=>{se(ue=>({...ue,[re]:fe,convertedValue:""}))},Tn=(re,fe)=>{const ue=parseFloat(re)||0;switch(fe){case"ft":return(ue*.3048).toFixed(2);case"cm":return(ue/100).toFixed(2);case"in":return(ue*.0254).toFixed(2);default:return re}},Yl=(re,fe)=>{const ue=parseFloat(re)||0;switch(fe){case"lbs":return(ue*.453592).toFixed(1);case"g":return(ue/1e3).toFixed(1);default:return re}},Ln=()=>{if(!ye.value||!ye.unit)return;let re="";Be==="height"?re=Tn(ye.value,ye.unit):Be==="weight"&&(re=Yl(ye.value,ye.unit)),se(fe=>({...fe,convertedValue:re}))},In=()=>{ye.convertedValue&&(Be==="height"?g(re=>({...re,height:ye.convertedValue})):Be==="weight"&&g(re=>({...re,weight:ye.convertedValue})),ka())},Da=(re,fe,ue,Ge=.9)=>new Promise((ht,Pe)=>{const z=document.createElement("canvas"),ie=z.getContext("2d"),xe=new Image;xe.onload=()=>{let{width:tt,height:Fe}=xe;const et=ue==="jpeg"?600:400;if(ue==="jpeg"){const Zt=tt/Fe;Math.abs(Zt-.78)>.1&&(Zt>.78?tt=Fe*.78:Fe=tt/.78)}tt>et&&(Fe=Fe*et/tt,tt=et),Fe>et*1.3&&(tt=tt*et*1.3/Fe,Fe=et*1.3),z.width=tt,z.height=Fe,ue==="jpeg"&&(ie.fillStyle="white",ie.fillRect(0,0,tt,Fe)),ie.drawImage(xe,0,0,tt,Fe);let ot=Ge,nt,ft=0;const St=20;do{nt=z.toDataURL(`image/${ue}`,ot);const Zt=(nt.split(",")[1]?nt.split(",")[1].length:0)*.75/1024;if(Zt<=fe){console.log(` Image resized successfully: ${Zt.toFixed(2)}KB (target: ${fe}KB), quality: ${ot}`);break}ot-=.05,ft++}while(ot>.1&&ft<St);ft>=St&&console.warn(` Could not compress image below ${fe}KB, using lowest quality available`),ht(nt)};const Le=URL.createObjectURL(re);xe.onerror=()=>{URL.revokeObjectURL(Le),Pe(new Error("Failed to load image"))},xe.addEventListener("load",()=>{URL.revokeObjectURL(Le)},{once:!0}),xe.addEventListener("error",()=>{URL.revokeObjectURL(Le)},{once:!0}),xe.src=Le}),rc=async re=>{const fe=re.target.files[0];if(fe)try{const ue=await Da(fe,150,"jpeg",.8);Me(ue)}catch(ue){console.error("Error resizing photo:",ue);const Ge=new FileReader;Ge.onloadend=()=>{Me(Ge.result)},Ge.readAsDataURL(fe)}},ql=async re=>{const fe=re.target.files[0];if(fe)try{const ue=await Da(fe,150,"png",.9);De(ue)}catch(ue){console.error("Error resizing thumbmark:",ue);const Ge=new FileReader;Ge.onloadend=()=>{De(Ge.result)},Ge.readAsDataURL(fe)}},nc=async re=>{const fe=re.target.files[0];if(fe)try{const ue=await Da(fe,150,"png",.9);ve(ue)}catch(ue){console.error("Error resizing signature:",ue);const Ge=new FileReader;Ge.onloadend=()=>{ve(Ge.result)},Ge.readAsDataURL(fe)}},Aa=()=>{const re={};return!d.surname&&!d.firstname&&(re.surname="At least surname or first name is required"),h(re),Object.keys(re).length===0},Ta=()=>{const re=[];return[{key:"surname",label:"Surname"},{key:"firstname",label:"First Name"},{key:"middlename",label:"Middle Name"},{key:"date_of_birth",label:"Date of Birth"},{key:"place_of_birth",label:"Place of Birth"},{key:"sex",label:"Sex"},{key:"civil_status",label:"Civil Status"},{key:"height",label:"Height"},{key:"weight",label:"Weight"},{key:"blood_type",label:"Blood Type"},{key:"gsis",label:"GSIS ID No."},{key:"pagibig",label:"PAG-IBIG ID No."},{key:"philhealth",label:"PhilHealth No."},{key:"sss",label:"SSS No."},{key:"tin",label:"TIN"},{key:"agency_no",label:"Agency Employee No."}].forEach(Pe=>{(!d[Pe.key]||d[Pe.key]==="")&&re.push({section:"Personal Information",field:Pe.label,key:Pe.key})}),[{key:"residential_province",label:"Residential Province"},{key:"residential_city_municipality",label:"Residential City/Municipality"},{key:"residential_barangay",label:"Residential Barangay"},{key:"residential_zip_code",label:"Residential ZIP Code"},{key:"residential_subdivision_village",label:"Residential Subdivision/Village"},{key:"residential_street",label:"Residential Street"},{key:"permanent_province",label:"Permanent Province"},{key:"permanent_city_municipality",label:"Permanent City/Municipality"},{key:"permanent_barangay",label:"Permanent Barangay"},{key:"permanent_zip_code",label:"Permanent ZIP Code"},{key:"permanent_subdivision_village",label:"Permanent Subdivision/Village"},{key:"permanent_street",label:"Permanent Street"}].forEach(Pe=>{(!d[Pe.key]||d[Pe.key]==="")&&re.push({section:"Address",field:Pe.label,key:Pe.key})}),[{key:"telephone",label:"Telephone"},{key:"mobile",label:"Mobile"},{key:"email",label:"Email"}].forEach(Pe=>{(!d[Pe.key]||d[Pe.key]==="")&&re.push({section:"Contact Information",field:Pe.label,key:Pe.key})}),d.civil_status&&d.civil_status!=="Single"&&[{key:"spouse_surname",label:"Spouse Surname"},{key:"spouse_firstname",label:"Spouse First Name"},{key:"spouse_middlename",label:"Spouse Middle Name"},{key:"spouse_occupation",label:"Spouse Occupation"}].forEach(z=>{(!d[z.key]||d[z.key]==="")&&re.push({section:"Spouse Information",field:z.label,key:z.key})}),[{key:"father_surname",label:"Father Surname"},{key:"father_firstname",label:"Father First Name"},{key:"father_middlename",label:"Father Middle Name"},{key:"mother_surname",label:"Mother Surname"},{key:"mother_firstname",label:"Mother First Name"},{key:"mother_middlename",label:"Mother Middle Name"}].forEach(Pe=>{(!d[Pe.key]||d[Pe.key]==="")&&re.push({section:"Family Background",field:Pe.label,key:Pe.key})}),(!b||b.length===0||!b.some(Pe=>Pe.full_name&&Pe.full_name.trim()!==""||Pe.date_of_birth&&Pe.date_of_birth.trim()!==""))&&re.push({section:"Family Background",field:"Children Information",key:"children"}),!R||R.length===0?re.push({section:"Education",field:"Education Information",key:"education"}):R.some(z=>z.school_name&&typeof z.school_name=="string"&&z.school_name.trim()!==""&&z.degree_course&&typeof z.degree_course=="string"&&z.degree_course.trim()!==""&&z.period_from&&typeof z.period_from=="string"&&z.period_from.trim()!==""&&z.period_to&&typeof z.period_to=="string"&&z.period_to.trim()!==""&&z.highest_level_units&&typeof z.highest_level_units=="string"&&z.highest_level_units.trim()!==""&&z.year_graduated&&z.year_graduated.toString().trim()!=="")||re.push({section:"Education",field:"Education Information (Complete row required)",key:"education"}),(!k||k.length===0||!k.some(Pe=>Pe.eligibility_type&&Pe.eligibility_type.trim()!==""||Pe.rating&&Pe.rating.trim()!==""))&&re.push({section:"Eligibility",field:"Civil Service Eligibility",key:"eligibility"}),(!A||A.length===0||!A.some(Pe=>Pe.position_title&&Pe.position_title.trim()!==""||Pe.department_name&&Pe.department_name.trim()!==""))&&re.push({section:"Work Experience",field:"Work Experience",key:"workExperience"}),(!H||H.length<3||H.filter(Pe=>Pe.reference_name&&Pe.reference_name.trim()!=="").length<3)&&re.push({section:"References",field:"Character References (3 required)",key:"references"}),(!J||J.length===0||!J.some(Pe=>Pe.government_issued_id&&Pe.government_issued_id.trim()!==""))&&re.push({section:"Government IDs",field:"Government Issued ID",key:"governmentIds"}),x(re),re},Kl=async re=>{try{if(!re)return;console.log(" [PDS] Fetching missing fields for employee:",re);const fe=await le.get(`/201-employees/missing-fields/${re}`);if(fe.data.success){const{missingFields:ue,totalMissing:Ge}=fe.data;console.log(" [PDS] Received missing fields from API:",{totalMissing:Ge,missingFields:ue});const ht=[];Object.keys(ue).forEach(Pe=>{Object.keys(ue[Pe]).forEach(z=>{ue[Pe][z].forEach(ie=>{ht.push({...ie,page:parseInt(Pe),section:z})})})}),x(ht)}else console.warn(" [PDS] API returned unsuccessful response for missing fields"),Ta()}catch(fe){console.error(" [PDS] Error fetching missing fields from API:",fe),Ta()}},ac=re=>{try{if(console.log(" [PDS] Attempting to focus on field:",re),re.focusSelector==="education-section"&&a!==1){console.log(" [PDS] Education section is on page 1, switching to page 1"),l(1),setTimeout(()=>{Mn(re)},500);return}let fe=null;const ue=[`#${re.focusSelector}`,`[name="${re.focusSelector}"]`,`input[name*="${re.focusSelector}"]`,`select[name*="${re.focusSelector}"]`,`textarea[name*="${re.focusSelector}"]`,`[id*="${re.focusSelector}"]`];for(const Ge of ue)if(fe=document.querySelector(Ge),fe)break;fe?Mn(re):re.page&&re.page!==a?(console.log(` [PDS] Switching to page ${re.page} for field: ${re.field}`),l(re.page),setTimeout(()=>{Mn(re)},500)):Mn(re)}catch(fe){console.error(" [PDS] Error focusing on field:",fe)}},Mn=re=>{try{const fe=[`#${re.focusSelector}`,`[name="${re.focusSelector}"]`,`input[name*="${re.focusSelector}"]`,`select[name*="${re.focusSelector}"]`,`textarea[name*="${re.focusSelector}"]`,`[id*="${re.focusSelector}"]`];let ue=null;for(const Ge of fe)if(ue=document.querySelector(Ge),ue)break;ue?(ue.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),ue.style.backgroundColor="#fef3c7",setTimeout(()=>{ue.style.backgroundColor=""},2e3),setTimeout(()=>{if(ue.focus&&ue.focus(),!ue.focus&&ue.querySelector){const Ge=ue.querySelector("input, select, textarea");Ge&&Ge.focus&&Ge.focus()}},500),console.log(" [PDS] Successfully focused on field:",re.field)):console.warn(" [PDS] Could not find element for field:",re.field,"selectors tried:",fe)}catch(fe){console.error(" [PDS] Error in focusElement:",fe)}},Gl=()=>{const re=a;console.log(" [PDS Print] Current active page:",re);const ue={1:1,2:2,3:3,4:4}[re]||1;console.log(" [PDS Print] Target print page:",ue);const Ge=`/201-employees/print/${r==null?void 0:r.dtruserid}?page=${ue}`;window.open(Ge,"_blank")},Ql=async(re=!1)=>{if(!(a===1&&!Aa())){i(!0);try{console.log(" [PDS] Education data being saved:",R),console.log(" [PDS] FormData being sent:",{dtruserid:d.dtruserid,date_of_birth:d.date_of_birth,place_of_birth:d.place_of_birth,sex:d.sex,blood_type:d.blood_type});const fe=Pe=>{if(!Pe||Pe==="")return null;if(/^\d{4}-\d{2}-\d{2}$/.test(Pe))return Pe;const z=Pe.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(z){const[,ie,xe,Le]=z;return`${Le}-${ie.padStart(2,"0")}-${xe.padStart(2,"0")}`}return console.log(" Invalid date format for database:",Pe),null},ue={third_degree:w.third_degree,fourth_degree:w.fourth_degree,fourth_degree_details:w.fourth_degree_details,guilty_admin:w.guilty_admin,guilty_admin_details:w.guilty_admin_details,criminally_charged:w.thirtyfive_b,criminally_charged_date:fe(w.thirtyfive_datefiled),criminally_charged_status:w.thirtyfive_statuses,convicted:w.convicted,convicted_details:w.convicted_details,separated_service:w.separated_service,separated_service_details:w.separated_service_details,candidate:w.candidate,candidate_details:w.candidate_details,resigned_campaign:w.resigned_campaign,resigned_campaign_details:w.resigned_campaign_details,immigrant:w.immigrant,immigrant_country:w.immigrant_country,indigenous_group:w.indigenous_group,indigenous_group_details:w.indigenous_group_details,pwd:w.pwd,pwd_id_no:w.pwd_id_no,solo_parent:w.solo_parent,solo_parent_id_no:w.solo_parent_id_no},Ge={employee:{...d,objid:r==null?void 0:r.objid},children:b.filter(Pe=>Pe.full_name||Pe.date_of_birth),education:R,civil_service_eligibility:k.filter(Pe=>Pe.eligibility_type),work_experience:A.filter(Pe=>Pe.position_title||Pe.department_agency_company),voluntary_work:U.filter(Pe=>Pe.organization_name_address||Pe.position_nature_of_work),trainings:G.filter(Pe=>Pe.training_title||Pe.conducted_sponsored_by),skills:W.filter(Pe=>Pe.skill_hobby),recognitions:M.filter(Pe=>Pe.recognition),memberships:$.filter(Pe=>Pe.organization),declarations:ue,references:H.filter(Pe=>Pe.reference_name),government_ids:J.filter(Pe=>Pe.government_issued_id||Pe.id_number),is_replacing_gov_id:pe,signature_data:we,date_accomplished:Q,photo_data:he,thumbmark_data:be,is_draft:re};console.log(" [PDS] Declarations data being sent:",ue),console.log(" [PDS] Date field value being sent:",ue.criminally_charged_date);const ht=await le.post("/201-employees/pds",Ge);if(alert(re?"PDS draft saved successfully! You can continue editing later.":"PDS saved successfully!"),ht.data.progress!==void 0){const Pe=Number(ht.data.progress)||0;m(Pe),console.log(" [PDS] Updated completeness progress:",Pe)}n&&n()}catch(fe){console.error("Error saving PDS:",fe),alert("Failed to save PDS")}finally{i(!1)}}},lc=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-blue-100 text-blue-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"I"}),"PERSONAL INFORMATION"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1. CS ID No"}),e.jsx("input",{type:"text",name:"cs_id_no",value:d.cs_id_no,onChange:ae,placeholder:"(Do not fill up. For CSC use only)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100",disabled:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["2. SURNAME ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"surname",value:d.surname,onChange:ae,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${c.surname?"border-red-500":"border-gray-300"}`,required:!0}),c.surname&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.surname})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["2.1. FIRST NAME ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"firstname",value:d.firstname,onChange:ae,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${c.firstname?"border-red-500":"border-gray-300"}`,required:!0}),c.firstname&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.firstname})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"2.2. MIDDLE NAME"}),e.jsx("input",{type:"text",name:"middlename",value:d.middlename,onChange:ae,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"2.3. NAME EXTENSION (JR., SR)"}),e.jsx("input",{type:"text",name:"name_extension",value:d.name_extension,onChange:ae,placeholder:"Jr., Sr., III",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"3. DATE OF BIRTH"}),e.jsx("input",{type:"date",name:"date_of_birth",value:d.date_of_birth,onChange:ae,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"4. PLACE OF BIRTH"}),e.jsx("input",{type:"text",name:"place_of_birth",value:d.place_of_birth,onChange:ae,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["5. SEX ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"sex",value:"Male",checked:d.sex==="Male",onChange:ae,className:"mr-2"}),"Male"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"sex",value:"Female",checked:d.sex==="Female",onChange:ae,className:"mr-2"}),"Female"]})]}),c.sex&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.sex})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["6. CIVIL STATUS ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"civil_status",value:d.civil_status,onChange:ae,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${c.civil_status?"border-red-500":"border-gray-300"}`,required:!0,children:[e.jsx("option",{value:"",children:"Select Status"}),je?e.jsx("option",{disabled:!0,children:"Loading civil statuses..."}):Z.length>0?Z.map(re=>e.jsx("option",{value:re.civil_status,children:re.civil_status},re.id)):e.jsx("option",{disabled:!0,children:"No civil status data available"})]}),c.civil_status&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.civil_status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"7. HEIGHT (meters)"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"number",step:"0.01",name:"height",value:d.height,onChange:ae,placeholder:"1.75",min:"0.01",max:"3.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:()=>Vl("height"),className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Height Converter",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter height in meters (m)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"8. WEIGHT (kilograms)"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"number",step:"0.1",name:"weight",value:d.weight,onChange:ae,placeholder:"70",min:"1",max:"500",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:()=>Vl("weight"),className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Weight Converter",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter weight in kilograms (kg)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"9. BLOOD TYPE"}),e.jsxs("select",{name:"blood_type",value:d.blood_type,onChange:ae,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Blood Type"}),je?e.jsx("option",{disabled:!0,children:"Loading blood types..."}):ze.length>0?ze.map(re=>e.jsx("option",{value:re.blood_type,children:re.blood_type},re.id)):e.jsx("option",{disabled:!0,children:"No blood type data available"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"10. GSIS ID NO."}),e.jsx("input",{type:"text",name:"gsis",value:d.gsis,onChange:ae,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"11. PAG-IBIG ID NO."}),e.jsx("input",{type:"text",name:"pagibig",value:d.pagibig,onChange:ae,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"12. PHILHEALTH NO."}),e.jsx("input",{type:"text",name:"philhealth",value:d.philhealth,onChange:ae,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"13. SSS NO."}),e.jsx("input",{type:"text",name:"sss",value:d.sss,onChange:ae,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"14. TIN NO."}),e.jsx("input",{type:"text",name:"tin",value:d.tin,onChange:ae,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"15. AGENCY EMPLOYEE NO."}),e.jsx("input",{type:"text",name:"agency_no",value:d.agency_no,onChange:ae,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"16. CITIZENSHIP"}),e.jsxs("div",{className:"flex space-x-6 mb-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"citizenship_filipino",checked:!0,disabled:!0,className:"mr-2 bg-gray-300"}),e.jsx("span",{className:"text-gray-600",children:"Filipino (Default)"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"citizenship_dual",checked:d.citizenship_dual,onChange:ae,className:"mr-2"}),"Dual Citizenship"]})]}),d.citizenship_dual&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("select",{name:"dual_citizenship_type",value:d.dual_citizenship_type,onChange:ae,className:"px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"by_birth",children:"By Birth"}),e.jsx("option",{value:"by_naturalization",children:"By Naturalization"})]}),e.jsx("input",{name:"dual_citizenship_country",value:d.dual_citizenship_country,onChange:ae,placeholder:"Country",className:"px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"17. RESIDENTIAL ADDRESS"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.1 House/Block/Lot No."}),e.jsx("input",{name:"residential_house_block_lot",value:d.residential_house_block_lot,onChange:ae,placeholder:"Enter house/block/lot number",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.2 Street"}),e.jsx("input",{name:"residential_street",value:d.residential_street,onChange:ae,placeholder:"Enter street name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.3 Subdivision/Village"}),e.jsx("input",{name:"residential_subdivision_village",value:d.residential_subdivision_village,onChange:ae,placeholder:"Enter subdivision or village name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.4 Barangay"}),e.jsx("input",{name:"residential_barangay",value:d.residential_barangay,onChange:ae,placeholder:"Enter barangay name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.5 City/Municipality"}),e.jsx("input",{name:"residential_city_municipality",value:d.residential_city_municipality,onChange:ae,placeholder:"Enter city or municipality",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.6 Province"}),e.jsx("input",{name:"residential_province",value:d.residential_province,onChange:ae,placeholder:"Enter province",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"17.7 ZIP CODE"}),e.jsx("input",{name:"residential_zip_code",value:d.residential_zip_code,onChange:ae,placeholder:"Enter ZIP code",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"18. PERMANENT ADDRESS"}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"permanent_same_as_residential",checked:d.permanent_same_as_residential,onChange:ae,className:"mr-2"}),"Same as Residential Address"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.1 House/Block/Lot No."}),e.jsx("input",{name:"permanent_house_block_lot",value:d.permanent_house_block_lot,onChange:ae,placeholder:"Enter house/block/lot number",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.2 Street"}),e.jsx("input",{name:"permanent_street",value:d.permanent_street,onChange:ae,placeholder:"Enter street name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.3 Subdivision/Village"}),e.jsx("input",{name:"permanent_subdivision_village",value:d.permanent_subdivision_village,onChange:ae,placeholder:"Enter subdivision or village name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.4 Barangay"}),e.jsx("input",{name:"permanent_barangay",value:d.permanent_barangay,onChange:ae,placeholder:"Enter barangay name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.5 City/Municipality"}),e.jsx("input",{name:"permanent_city_municipality",value:d.permanent_city_municipality,onChange:ae,placeholder:"Enter city or municipality",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.6 Province"}),e.jsx("input",{name:"permanent_province",value:d.permanent_province,onChange:ae,placeholder:"Enter province",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"18.7 ZIP CODE"}),e.jsx("input",{name:"permanent_zip_code",value:d.permanent_zip_code,onChange:ae,placeholder:"Enter ZIP code",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"19. TELEPHONE NO."}),e.jsx("input",{type:"text",name:"telephone",value:d.telephone,onChange:ae,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"20. MOBILE NO."}),e.jsx("input",{type:"text",name:"mobile",value:d.mobile,onChange:ae,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"21. E-MAIL ADDRESS"}),e.jsx("input",{type:"email",name:"email",value:d.email,onChange:ae,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-green-100 text-green-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"II"}),"FAMILY BACKGROUND"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"22. SPOUSE'S INFORMATION"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.1 Surname"}),e.jsx("input",{name:"spouse_surname",value:d.spouse_surname,onChange:ae,placeholder:"Enter surname",disabled:d.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${d.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.2 First Name"}),e.jsx("input",{name:"spouse_firstname",value:d.spouse_firstname,onChange:ae,placeholder:"Enter first name",disabled:d.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${d.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.3 Middle Name"}),e.jsx("input",{name:"spouse_middlename",value:d.spouse_middlename,onChange:ae,placeholder:"Enter middle name",disabled:d.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${d.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.4 Extension"}),e.jsx("input",{name:"spouse_extension",value:d.spouse_extension,onChange:ae,placeholder:"Enter extension (Jr., Sr., III, etc.)",disabled:d.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${d.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.5 Occupation"}),e.jsx("input",{name:"spouse_occupation",value:d.spouse_occupation,onChange:ae,placeholder:"Enter occupation",disabled:d.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${d.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.6 Employer/Business Name"}),e.jsx("input",{name:"spouse_employer_business_name",value:d.spouse_employer_business_name,onChange:ae,placeholder:"Enter employer or business name",disabled:d.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${d.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.7 Business Address"}),e.jsx("input",{name:"spouse_business_address",value:d.spouse_business_address,onChange:ae,placeholder:"Enter business address",disabled:d.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${d.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"22.8 Telephone"}),e.jsx("input",{name:"spouse_telephone",value:d.spouse_telephone,onChange:ae,placeholder:"Enter telephone number",disabled:d.civil_status==="Single",className:`px-3 py-2 border border-gray-300 rounded-lg w-full ${d.civil_status==="Single"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]})]})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"23. CHILDREN"}),b.map((re,fe)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[3fr_1fr_auto] gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsx("input",{name:`children[${fe}].full_name`,value:re.full_name,onChange:ue=>qe(fe,"full_name",ue.target.value),placeholder:"Enter child's full name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),e.jsx("input",{name:`children[${fe}].date_of_birth`,type:"date",value:re.date_of_birth,onChange:ue=>qe(fe,"date_of_birth",ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsx("div",{className:"flex items-end justify-center",children:e.jsx("button",{type:"button",onClick:()=>Se(fe),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors w-12",title:"Remove child",children:e.jsx("svg",{className:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},fe)),e.jsx("button",{type:"button",onClick:Ce,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Child"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"24. FATHER'S INFORMATION"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"24.1 Surname"}),e.jsx("input",{name:"father_surname",value:d.father_surname,onChange:ae,placeholder:"Enter father's surname",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"24.2 First Name"}),e.jsx("input",{name:"father_firstname",value:d.father_firstname,onChange:ae,placeholder:"Enter father's first name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"24.4 Extension"}),e.jsx("input",{name:"father_extension",value:d.father_extension,onChange:ae,placeholder:"Enter extension (Jr., Sr., III, etc.)",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"24.3 Middle Name"}),e.jsx("input",{name:"father_middlename",value:d.father_middlename,onChange:ae,placeholder:"Enter father's middle name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"25. MOTHER'S MAIDEN NAME"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"25.1 Surname"}),e.jsx("input",{name:"mother_surname",value:d.mother_surname,onChange:ae,placeholder:"Enter mother's maiden surname",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"25.2 First Name"}),e.jsx("input",{name:"mother_firstname",value:d.mother_firstname,onChange:ae,placeholder:"Enter mother's first name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"25.3 Middle Name"}),e.jsx("input",{name:"mother_middlename",value:d.mother_middlename,onChange:ae,placeholder:"Enter mother's middle name",className:"px-3 py-2 border border-gray-300 rounded-lg w-full"})]})]})]})]})]}),e.jsxs("section",{id:"education-section",className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-purple-100 text-purple-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"III"}),"EDUCATIONAL BACKGROUND"]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"26. EDUCATION LEVELS"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 table-fixed",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left w-[10%]",children:"LEVEL"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left w-[20%]",children:"NAME OF SCHOOL"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left w-[15%]",children:"DEGREE/COURSE"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left w-[12%]",children:"PERIOD"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left w-[13%]",children:"HIGHEST LEVEL/UNITS"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left w-[10%]",children:"YEAR GRADUATED"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left w-[20%]",children:"SCHOLARSHIP/HONORS"})]})}),e.jsx("tbody",{children:F(R).map((re,fe)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:re.level}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`education[${fe}].school_name`,value:re.school_name,onChange:ue=>Ze(fe,"school_name",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`education[${fe}].degree_course`,value:re.degree_course,onChange:ue=>Ze(fe,"degree_course",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("input",{name:`education[${fe}].period_from`,type:"date",value:re.period_from,onChange:ue=>Ze(fe,"period_from",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"From"}),e.jsx("input",{name:`education[${fe}].period_to`,type:"date",value:re.period_to,onChange:ue=>Ze(fe,"period_to",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"To"})]})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`education[${fe}].highest_level_units`,value:re.highest_level_units,onChange:ue=>Ze(fe,"highest_level_units",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`education[${fe}].year_graduated`,type:"number",value:re.year_graduated,onChange:ue=>Ze(fe,"year_graduated",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",min:"1900",max:"2100"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`education[${fe}].scholarship_honors`,value:re.scholarship_honors,onChange:ue=>Ze(fe,"scholarship_honors",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})})]},fe))})]})}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"(Continue on separate sheet if necessary)"})]})]})]}),Rn=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-orange-100 text-orange-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"IV"}),"CIVIL SERVICE ELIGIBILITY"]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"27. ELIGIBILITY RECORDS"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"ELIGIBILITY TYPE"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"RATING"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"DATE OF EXAMINATION"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"PLACE OF EXAMINATION"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"LICENSE NUMBER"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"DATE OF VALIDITY"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"ACTION"})]})}),e.jsx("tbody",{children:k.map((re,fe)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsxs("select",{name:`civil_service_eligibility[${fe}].eligibility_type`,value:re.eligibility_type,onChange:ue=>Ne(fe,"eligibility_type",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Eligibility Type"}),je?e.jsx("option",{value:"",disabled:!0,children:"Loading eligibility types..."}):_e.length>0?_e.map(ue=>e.jsx("option",{value:ue.careertypes,children:ue.careertypes},ue.id)):e.jsx("option",{value:"",disabled:!0,children:"No eligibility types available"})]})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${fe}].rating`,value:re.rating,onChange:ue=>Ne(fe,"rating",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${fe}].date_of_examination`,type:"date",value:re.date_of_examination,onChange:ue=>Ne(fe,"date_of_examination",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${fe}].place_of_examination`,value:re.place_of_examination,onChange:ue=>Ne(fe,"place_of_examination",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${fe}].license_number`,value:re.license_number,onChange:ue=>Ne(fe,"license_number",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`civil_service_eligibility[${fe}].date_of_validity`,type:"date",value:re.date_of_validity,onChange:ue=>Ne(fe,"date_of_validity",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("button",{type:"button",onClick:()=>te(fe),className:"p-2 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors",title:"Remove eligibility",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},fe))})]})}),e.jsx("button",{type:"button",onClick:ke,className:"mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Eligibility"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"(Continue on separate sheet if necessary)"})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-red-100 text-red-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"V"}),"WORK EXPERIENCE"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"(Include private employment. Start from your recent work) Description of duties should be indicated in the attached Work Experience sheet."}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"28. WORK HISTORY"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"DATE FROM"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"DATE TO / PRESENT"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"POSITION TITLE"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"DEPARTMENT/AGENCY/COMPANY"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"MONTHLY SALARY"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"SALARY/GRADE/STEP"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"STATUS OF APPOINTMENT"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"GOV'T SERVICE"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"ACTION"})]})}),e.jsx("tbody",{children:A.map((re,fe)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`work_experience[${fe}].date_from`,type:"date",value:re.date_from,onChange:ue=>me(fe,"date_from",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsxs("td",{className:"border border-gray-300 px-4 py-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{name:`work_experience[${fe}].date_to`,type:"date",value:re.is_present===!0?re.date_to||new Date().toISOString().split("T")[0]:re.date_to&&re.date_to!=="0"&&re.date_to!=="0000-00-00"?re.date_to:"",onChange:ue=>me(fe,"date_to",ue.target.value),disabled:re.is_present===!0,className:"w-full px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100 disabled:text-gray-500"}),(re.is_present===!0||!A.some((ue,Ge)=>Ge!==fe&&ue.is_present===!0))&&e.jsxs("label",{className:"flex items-center text-sm whitespace-nowrap",children:[e.jsx("input",{type:"checkbox",checked:re.is_present===!0,onChange:ue=>me(fe,"is_present",ue.target.checked),className:"mr-1"}),"Present"]})]}),re.is_present===!0&&e.jsx("div",{className:"text-sm font-medium text-blue-600 mt-1",children:"Present"})]}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`work_experience[${fe}].position_title`,value:re.position_title,onChange:ue=>me(fe,"position_title",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`work_experience[${fe}].department_agency_company`,value:re.department_agency_company,onChange:ue=>me(fe,"department_agency_company",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`work_experience[${fe}].monthly_salary`,type:"number",step:"0.01",value:re.monthly_salary,onChange:ue=>me(fe,"monthly_salary",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{name:`work_experience[${fe}].salary_grade_step`,value:re.salary_grade_step,onChange:ue=>me(fe,"salary_grade_step",ue.target.value),placeholder:"00-0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsxs("select",{name:`work_experience[${fe}].status_of_appointment`,value:re.status_of_appointment,onChange:ue=>me(fe,"status_of_appointment",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"Permanent",children:"Permanent"}),e.jsx("option",{value:"Casual",children:"Casual"}),e.jsx("option",{value:"Contract",children:"Contract"}),e.jsx("option",{value:"Job Order",children:"Job Order"}),e.jsx("option",{value:"Provisionary",children:"Provisionary"}),e.jsx("option",{value:"Temporary",children:"Temporary"})]})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:`work_experience[${fe}].government_service`,value:"Y",checked:re.government_service==="Y",onChange:ue=>me(fe,"government_service",ue.target.value),className:"mr-1"}),"Y"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:`work_experience[${fe}].government_service`,value:"N",checked:re.government_service==="N",onChange:ue=>me(fe,"government_service",ue.target.value),className:"mr-1"}),"N"]})]})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("button",{type:"button",onClick:()=>q(fe),className:"p-2 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors",title:"Remove work experience",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},fe))})]})}),e.jsx("button",{type:"button",onClick:de,className:"mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Work Experience"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"(Continue on separate sheet if necessary)"})]})]})]}),oc=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-teal-100 text-teal-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"VI"}),"VOLUNTARY WORK OR INVOLVEMENT IN CIVIC/NON-GOVERNMENT/PEOPLE/VOLUNTARY ORGANIZATION/S"]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"29. VOLUNTARY WORK RECORDS"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"NAME & ADDRESS OF ORGANIZATION"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"FROM"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"TO"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"NUMBER OF HOURS"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"POSITION/NATURE OF WORK"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"ACTION"})]})}),e.jsx("tbody",{children:U.map((re,fe)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("textarea",{value:re.organization_name_address,onChange:ue=>Re(fe,"organization_name_address",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",rows:"2"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"date",value:re.date_from,onChange:ue=>Re(fe,"date_from",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"date",value:re.date_to,onChange:ue=>Re(fe,"date_to",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"number",step:"0.5",value:re.number_of_hours,onChange:ue=>Re(fe,"number_of_hours",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:re.position_nature_of_work,onChange:ue=>Re(fe,"position_nature_of_work",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("button",{type:"button",onClick:()=>Ue(fe),className:"p-2 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors",title:"Remove voluntary work",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},fe))})]})}),e.jsx("button",{type:"button",onClick:Te,className:"mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Voluntary Work"})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-indigo-100 text-indigo-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"VII"}),"LEARNING AND DEVELOPMENT (L&D) INTERVENTIONS/TRAINING PROGRAMS ATTENDED"]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"30. TRAINING RECORDS"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"(Start from the most recent L&D/training program and include only the relevant L&D/training taken for the last five (5) years for Division Chief/Executive/Managerial positions)"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"TITLE OF TRAINING"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"FROM"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"TO"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"NUMBER OF HOURS"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"TYPE OF L&D"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"CONDUCTED/SPONSORED BY"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"ACTION"})]})}),e.jsx("tbody",{children:G.map((re,fe)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:re.training_title,onChange:ue=>at(fe,"training_title",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"date",value:re.date_from,onChange:ue=>at(fe,"date_from",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"date",value:re.date_to,onChange:ue=>at(fe,"date_to",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"number",step:"0.5",value:re.number_of_hours,onChange:ue=>at(fe,"number_of_hours",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:re.type_of_ld,onChange:ue=>at(fe,"type_of_ld",ue.target.value),placeholder:"e.g. Managerial, Technical",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",value:re.conducted_sponsored_by,onChange:ue=>at(fe,"conducted_sponsored_by",ue.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("button",{type:"button",onClick:()=>Ve(fe),className:"p-2 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors",title:"Remove training",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},fe))})]})}),e.jsx("button",{type:"button",onClick:$e,className:"mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Add Training"})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-pink-100 text-pink-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"VIII"}),"OTHER INFORMATION"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"31. SPECIAL SKILLS AND HOBBIES"}),W.map((re,fe)=>e.jsxs("div",{className:"flex space-x-2 mb-2",children:[e.jsx("input",{type:"text",value:re.skill_hobby,onChange:ue=>He(fe,ue.target.value),placeholder:"e.g. Computer Programming, Playing Guitar",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("button",{type:"button",onClick:()=>ge(fe),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Remove skill/hobby",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},fe)),e.jsx("button",{type:"button",onClick:Je,className:"mt-2 w-full px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm",children:"Add Skill/Hobby"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"32. NON-ACADEMIC DISTINCTIONS/RECOGNITION"}),M.map((re,fe)=>e.jsxs("div",{className:"flex space-x-2 mb-2",children:[e.jsx("input",{type:"text",value:re.recognition,onChange:ue=>yt(fe,ue.target.value),placeholder:"e.g. Best Employee Award 2023",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("button",{type:"button",onClick:()=>ct(fe),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Remove recognition",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},fe)),e.jsx("button",{type:"button",onClick:Ye,className:"mt-2 w-full px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm",children:"Add Recognition"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"33. MEMBERSHIP IN ASSOCIATION/ORGANIZATION"}),$.map((re,fe)=>e.jsxs("div",{className:"flex space-x-2 mb-2",children:[e.jsx("input",{type:"text",value:re.organization,onChange:ue=>kt(fe,ue.target.value),placeholder:"e.g. Philippine Computer Society",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("button",{type:"button",onClick:()=>jt(fe),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Remove membership",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},fe)),e.jsx("button",{type:"button",onClick:lt,className:"mt-2 w-full px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm",children:"Add Membership"})]})]})]})]}),On=()=>{const re=st.useRef(null),[fe,ue]=st.useState(!1),Ge=st.useRef(null),ht=()=>{const ot=re.current;if(ot){const nt=ot.getContext("2d");nt.clearRect(0,0,ot.width,ot.height),nt.fillStyle="white",nt.fillRect(0,0,ot.width,ot.height),nt.strokeStyle="black",nt.fillStyle="white",nt.lineWidth=2,nt.lineCap="round",nt.lineJoin="round",nt.globalCompositeOperation="source-over",console.log(" Canvas force reset - stroke style:",nt.strokeStyle)}};st.useEffect(()=>{const ot=re.current;if(ot){const nt=ot.getContext("2d");nt.strokeStyle="black",nt.fillStyle="white",nt.lineWidth=2,nt.lineCap="round",nt.lineJoin="round",nt.globalCompositeOperation="source-over",nt.fillRect(0,0,ot.width,ot.height),console.log(" Canvas initialized with stroke style:",nt.strokeStyle)}},[]),st.useEffect(()=>{const ot=re.current;if(ot&&we){const nt=ot.getContext("2d"),ft=new Image;ft.onload=()=>{nt.clearRect(0,0,ot.width,ot.height),nt.fillStyle="#ffffff",nt.fillRect(0,0,ot.width,ot.height),nt.drawImage(ft,0,0,ot.width,ot.height),nt.strokeStyle="black",nt.fillStyle="white",nt.lineWidth=2,nt.lineCap="round",nt.lineJoin="round",nt.globalCompositeOperation="source-over"},ft.src=we}},[we]),st.useEffect(()=>()=>{Ge.current&&clearTimeout(Ge.current)},[]);const Pe=ot=>{const nt=re.current,ft=nt.getBoundingClientRect(),St=nt.width/ft.width,Ot=nt.height/ft.height;return ot.touches&&ot.touches[0]?{x:(ot.touches[0].clientX-ft.left)*St,y:(ot.touches[0].clientY-ft.top)*Ot}:{x:(ot.clientX-ft.left)*St,y:(ot.clientY-ft.top)*Ot}},z=ot=>{ot.preventDefault(),Ge.current&&clearTimeout(Ge.current);const ft=re.current.getContext("2d"),St=Pe(ot);ft.strokeStyle="black",ft.fillStyle="white",ft.lineWidth=2,ft.lineCap="round",ft.lineJoin="round",ft.globalCompositeOperation="source-over",console.log(" Starting new stroke with style:",ft.strokeStyle),ft.beginPath(),ft.moveTo(St.x,St.y),ue(!0)},ie=ot=>{if(!fe)return;ot.preventDefault();const ft=re.current.getContext("2d"),St=Pe(ot);ft.strokeStyle!=="black"&&(ft.strokeStyle="black",ft.lineWidth=2,ft.lineCap="round",ft.lineJoin="round",ft.globalCompositeOperation="source-over"),ft.lineTo(St.x,St.y),ft.stroke()},xe=ot=>{const nt=document.createElement("canvas"),ft=nt.getContext("2d"),St=400,Ot=150;nt.width=St,nt.height=Ot,ft.fillStyle="white",ft.fillRect(0,0,St,Ot),ft.drawImage(ot,0,0,St,Ot);let Zt=.9,pt,dt=0;const Oe=20;do{pt=nt.toDataURL("image/png",Zt);const ks=(pt.split(",")[1]?pt.split(",")[1].length:0)*.75/1024;if(ks<=150){console.log(` Signature compressed successfully: ${ks.toFixed(2)}KB, quality: ${Zt}`);break}Zt-=.05,dt++}while(Zt>.1&&dt<Oe);return dt>=Oe&&console.warn(" Could not compress signature below 150KB, using lowest quality available"),pt},Le=ot=>{ot.preventDefault(),fe&&(ue(!1),Ge.current&&clearTimeout(Ge.current),Ge.current=setTimeout(()=>{tt()},1e3))},tt=()=>{const ot=re.current;if(ot){const nt=xe(ot);ve(nt),console.log(" Signature auto-saved")}},Fe=()=>{Ge.current&&clearTimeout(Ge.current),tt()},et=()=>{const ot=re.current,nt=ot.getContext("2d");Ge.current&&clearTimeout(Ge.current),nt.clearRect(0,0,ot.width,ot.height),nt.fillStyle="white",nt.fillRect(0,0,ot.width,ot.height),nt.strokeStyle="black",nt.fillStyle="white",nt.lineWidth=2,nt.lineCap="round",nt.lineJoin="round",nt.globalCompositeOperation="source-over",console.log(" Canvas cleared and stroke style reset to:",nt.strokeStyle),ve("")};return e.jsxs("div",{className:"border border-gray-300 rounded-lg p-4",children:[e.jsx("canvas",{ref:re,width:400,height:150,className:"border border-gray-300 bg-white cursor-crosshair",onMouseDown:z,onMouseMove:ie,onMouseUp:Le,onMouseLeave:Le,onTouchStart:z,onTouchMove:ie,onTouchEnd:Le,style:{touchAction:"none",backgroundColor:"white",display:"block"}}),e.jsxs("div",{className:"mt-2 flex space-x-2",children:[e.jsx("button",{type:"button",onClick:Fe,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Save Signature"}),e.jsx("button",{type:"button",onClick:et,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Clear Signature"}),e.jsx("button",{type:"button",onClick:ht,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Reset Canvas"})]})]})},ic=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-yellow-100 text-yellow-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"IX"}),"DECLARATIONS"]}),e.jsx("p",{className:"text-sm text-gray-700 mb-6 italic",children:"Please answer the following questions with complete honesty. Any misrepresentation made in this document may cause the filing of administrative/criminal case/s against you."}),e.jsx("div",{className:"mb-6 p-4 bg-gray-50 border-l-4 border-blue-500",children:e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"34. Are you related by consanguinity or affinity to the appointing or recommending authority, or to the chief of bureau or office or to the person who has immediate supervision over you in the Office, Bureau or Department where you will be appointed,"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"a. within the third degree?"}),e.jsx("div",{children:e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"third_degree",value:"true",checked:w.third_degree===!0,onChange:re=>T(fe=>({...fe,third_degree:re.target.value==="true"})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"third_degree",value:"false",checked:w.third_degree===!1,onChange:re=>T(fe=>({...fe,third_degree:re.target.value==="true"})),className:"mr-2"}),"NO"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"b. within the fourth degree? (for Local Government Unit - Career Employees)"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"fourth_degree",value:"true",checked:w.fourth_degree===!0,onChange:re=>T(fe=>({...fe,fourth_degree:re.target.value==="true"})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"fourth_degree",value:"false",checked:w.fourth_degree===!1,onChange:re=>T(fe=>({...fe,fourth_degree:re.target.value==="true"})),className:"mr-2"}),"NO"]})]}),w.fourth_degree&&e.jsx("input",{type:"text",name:"fourth_degree_details",value:w.fourth_degree_details,onChange:Rt,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"35a. Have you ever been found guilty of any administrative offense?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"guilty_admin",value:"true",checked:w.guilty_admin===!0,onChange:re=>T(fe=>({...fe,guilty_admin:re.target.value==="true"})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"guilty_admin",value:"false",checked:w.guilty_admin===!1,onChange:re=>T(fe=>({...fe,guilty_admin:re.target.value==="true"})),className:"mr-2"}),"NO"]})]}),w.guilty_admin&&e.jsx("input",{type:"text",name:"guilty_admin_details",value:w.guilty_admin_details,onChange:Rt,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"35b. Have you been criminally charged before any court?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfive_b",value:"true",checked:w.thirtyfive_b===!0,onChange:re=>T(fe=>({...fe,thirtyfive_b:re.target.value==="true"})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"thirtyfive_b",value:"false",checked:w.thirtyfive_b===!1,onChange:re=>T(fe=>({...fe,thirtyfive_b:re.target.value==="true"})),className:"mr-2"}),"NO"]})]}),w.thirtyfive_b&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsx("input",{type:"text",name:"thirtyfive_datefiled",value:w.thirtyfive_datefiled||"",onChange:Rt,placeholder:"mm/dd/yyyy",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("input",{type:"text",name:"thirtyfive_statuses",value:w.thirtyfive_statuses,onChange:Rt,placeholder:"Status of Case/s:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"36. Have you ever been convicted of any crime or violation of any law, decree, ordinance or regulation by any court or tribunal?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"convicted",value:"true",checked:w.convicted===!0,onChange:re=>T(fe=>({...fe,convicted:re.target.value==="true"})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"convicted",value:"false",checked:w.convicted===!1,onChange:re=>T(fe=>({...fe,convicted:re.target.value==="true"})),className:"mr-2"}),"NO"]})]}),w.convicted&&e.jsx("input",{type:"text",name:"convicted_details",value:w.convicted_details,onChange:Rt,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"37. Have you ever been separated from the service in any of the following modes: resignation, retirement, dropped from the rolls, dismissal, termination, end of term, finished contract or phased out (abolition) in the public or private sector?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"separated_service",value:"true",checked:w.separated_service===!0,onChange:re=>T(fe=>({...fe,separated_service:re.target.value==="true"})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"separated_service",value:"false",checked:w.separated_service===!1,onChange:re=>T(fe=>({...fe,separated_service:re.target.value==="true"})),className:"mr-2"}),"NO"]})]}),w.separated_service&&e.jsx("input",{type:"text",name:"separated_service_details",value:w.separated_service_details,onChange:Rt,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"38a. Have you ever been a candidate in a national or local election held within the last year (except Barangay election)?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"candidate",value:"true",checked:w.candidate===!0,onChange:re=>T(fe=>({...fe,candidate:re.target.value==="true"})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"candidate",value:"false",checked:w.candidate===!1,onChange:re=>T(fe=>({...fe,candidate:re.target.value==="true"})),className:"mr-2"}),"NO"]})]}),w.candidate&&e.jsx("input",{type:"text",name:"candidate_details",value:w.candidate_details,onChange:Rt,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"38b. Have you resigned from the government service during the three (3)-month period before the last election to promote/actively campaign for a national or local candidate?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"resigned_campaign",value:"true",checked:w.resigned_campaign===!0,onChange:re=>T(fe=>({...fe,resigned_campaign:re.target.value==="true"})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"resigned_campaign",value:"false",checked:w.resigned_campaign===!1,onChange:re=>T(fe=>({...fe,resigned_campaign:re.target.value==="true"})),className:"mr-2"}),"NO"]})]}),w.resigned_campaign&&e.jsx("input",{type:"text",name:"resigned_campaign_details",value:w.resigned_campaign_details,onChange:Rt,placeholder:"If YES, give details:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"39. Have you acquired the status of an immigrant or permanent resident of another country?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"immigrant",value:"true",checked:w.immigrant===!0,onChange:re=>T(fe=>({...fe,immigrant:re.target.value==="true"})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"immigrant",value:"false",checked:w.immigrant===!1,onChange:re=>T(fe=>({...fe,immigrant:re.target.value==="true"})),className:"mr-2"}),"NO"]})]}),w.immigrant&&e.jsx("input",{type:"text",name:"immigrant_country",value:w.immigrant_country,onChange:Rt,placeholder:"If YES, give details (country):",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]})]}),e.jsx("div",{className:"mb-6 p-4 bg-gray-50 border-l-4 border-blue-500",children:e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"40. Pursuant to: (a) Indigenous People's Act (RA 8371); (b) Magna Carta for Disabled Persons (RA 7277); and (c) Solo Parents Welfare Act of 2000 (RA 8972), please answer the following items:"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"a. Are you a member of any indigenous group?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"indigenous_group",value:"true",checked:w.indigenous_group===!0,onChange:re=>T(fe=>({...fe,indigenous_group:re.target.value==="true"})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"indigenous_group",value:"false",checked:w.indigenous_group===!1,onChange:re=>T(fe=>({...fe,indigenous_group:re.target.value==="true"})),className:"mr-2"}),"NO"]})]}),w.indigenous_group&&e.jsx("input",{type:"text",name:"indigenous_group_details",value:w.indigenous_group_details,onChange:Rt,placeholder:"If YES, please specify:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"b. Are you a person with disability?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"pwd",value:"true",checked:w.pwd===!0,onChange:re=>T(fe=>({...fe,pwd:re.target.value==="true"})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"pwd",value:"false",checked:w.pwd===!1,onChange:re=>T(fe=>({...fe,pwd:re.target.value==="true"})),className:"mr-2"}),"NO"]})]}),w.pwd&&e.jsx("input",{type:"text",name:"pwd_id_no",value:w.pwd_id_no,onChange:Rt,placeholder:"If YES, please specify ID No:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-[2fr,1fr] gap-4 items-start",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"c. Are you a solo parent?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"solo_parent",value:"true",checked:w.solo_parent===!0,onChange:re=>T(fe=>({...fe,solo_parent:re.target.value==="true"})),className:"mr-2"}),"YES"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"solo_parent",value:"false",checked:w.solo_parent===!1,onChange:re=>T(fe=>({...fe,solo_parent:re.target.value==="true"})),className:"mr-2"}),"NO"]})]}),w.solo_parent&&e.jsx("input",{type:"text",name:"solo_parent_id_no",value:w.solo_parent_id_no,onChange:Rt,placeholder:"If YES, please specify ID No:",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mt-2"})]})]})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"bg-purple-100 text-purple-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"X"}),"CHARACTER REFERENCES"]}),e.jsxs("span",{className:"text-sm font-normal text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:[H.filter(re=>re.reference_name&&re.reference_name.trim()!=="").length,"/3 Required"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"41. REFERENCES (Person not related by consanguinity or affinity to applicant /appointee)"}),e.jsx("div",{className:"space-y-4",children:H.map((re,fe)=>{const ue=re.reference_name&&re.reference_name.trim()!=="";return e.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border rounded-lg ${ue?"border-green-300 bg-green-50":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"41.1 Name"}),e.jsx("input",{type:"text",value:re.reference_name,onChange:Ge=>Ca(fe,"reference_name",Ge.target.value),placeholder:"Enter full name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"41.2 Address"}),e.jsx("input",{type:"text",value:re.reference_address,onChange:Ge=>Ca(fe,"reference_address",Ge.target.value),placeholder:"Enter complete address",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"41.3 Tel. No."}),e.jsx("input",{type:"text",value:re.reference_tel_no,onChange:Ge=>Ca(fe,"reference_tel_no",Ge.target.value),placeholder:"Enter telephone number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"button",onClick:()=>ec(fe),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Remove reference",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})]},fe)})}),e.jsx("button",{type:"button",onClick:yr,disabled:H.length>=3,className:`mt-4 px-4 py-2 rounded-lg ${H.length>=3?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,children:H.length>=3?"Maximum 3 References":"Add Reference"})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-gray-100 text-gray-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"XI"}),"OATH & DECLARATION"]}),e.jsx("div",{className:"bg-gray-50 border border-gray-300 rounded-lg p-6 mb-6",children:e.jsxs("p",{className:"text-sm text-gray-800 leading-relaxed",children:[e.jsx("strong",{children:"42. DECLARATION:"})," I declare under oath that I have personally accomplished this Personal Data Sheet which is a true, correct and complete statement pursuant to the provisions of pertinent laws, rules and regulations of the Republic of the Philippines. I authorize the agency head/authorized representative to verify/validate the contents stated herein. I agree that any misrepresentation made in this document and its attachments shall cause the filing of administrative/criminal case/s against me."]})})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"bg-cyan-100 text-cyan-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"XII"}),"GOVERNMENT ISSUED ID"]}),J.length>0&&J[0].government_issued_id&&!pe&&e.jsxs("span",{className:"text-sm font-normal text-green-600 bg-green-100 px-3 py-1 rounded-full",children:[" Active ID: ",J[0].government_issued_id]}),pe&&e.jsx("span",{className:"text-sm font-normal text-orange-600 bg-orange-100 px-3 py-1 rounded-full",children:" Replacing ID - Fill all fields to accept changes"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"43. GOVERNMENT ISSUED ID"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"(i.e. Passport, GSIS, SSS, PRC, Driver's License, etc.) PLEASE INDICATE ID Number and Date of Issuance"}),e.jsx("div",{className:"space-y-4",children:J.map((re,fe)=>e.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-5 gap-4 p-4 border rounded-lg ${pe?"border-orange-300 bg-orange-50":"border-gray-200 bg-white"}`,children:[e.jsx("input",{type:"text",value:re.government_issued_id,onChange:ue=>Rr(fe,"government_issued_id",ue.target.value),placeholder:"43.1 Government Issued ID",className:`px-3 py-2 border rounded-lg ${pe?"border-orange-300 focus:border-orange-500":"border-gray-300"}`,required:pe}),e.jsx("input",{type:"text",value:re.id_number,onChange:ue=>Rr(fe,"id_number",ue.target.value),placeholder:"43.2 ID Number",className:`px-3 py-2 border rounded-lg ${pe?"border-orange-300 focus:border-orange-500":"border-gray-300"}`,required:pe}),e.jsx("input",{type:"date",value:re.date_issued,onChange:ue=>Rr(fe,"date_issued",ue.target.value),placeholder:"43.3 Date Issued",className:`px-3 py-2 border rounded-lg ${pe?"border-orange-300 focus:border-orange-500":"border-gray-300"}`,required:pe}),e.jsx("input",{type:"text",value:re.place_of_issuance,onChange:ue=>Rr(fe,"place_of_issuance",ue.target.value),placeholder:"43.4 Place of Issuance",className:`px-3 py-2 border rounded-lg ${pe?"border-orange-300 focus:border-orange-500":"border-gray-300"}`,required:pe})]},fe))}),e.jsx("div",{className:"mt-4 flex space-x-3",children:pe?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:tc,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Change Government ID"}),e.jsx("button",{type:"button",onClick:sc,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Cancel"})]}):e.jsx("button",{type:"button",onClick:Cs,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:J.length>0&&J[0].government_issued_id?"Replace Government ID":"Add Government ID"})})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-rose-100 text-rose-700 rounded-full w-8 h-8 flex items-center justify-center mr-3",children:"XIII"}),"SIGNATURE, PHOTO & THUMBMARK"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{id:"signature-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"44. EMPLOYEE SIGNATURE"}),we&&e.jsx("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Signature loaded from saved record"]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Draw your signature below or upload an image"}),e.jsx(On,{}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Or Upload Signature Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:nc,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),we&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Signature Preview:"}),e.jsx("img",{src:we,alt:"Signature",className:"border border-gray-300 rounded-lg max-w-full h-32 object-contain"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Accomplished"}),e.jsx("input",{id:"date-accomplished",type:"date",value:Q,onChange:re=>ne(re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{id:"photo-section",className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"PHOTO (3.5cm x 4.5cm)"}),he&&e.jsx("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Photo loaded from saved record"]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Upload passport-size photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:rc,className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-3"}),he&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Photo Preview:"}),e.jsx("img",{src:he,alt:"Employee",className:"border border-gray-300 rounded-lg w-32 h-40 object-cover"})]})]}),e.jsxs("div",{id:"thumbmark-section",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"RIGHT THUMBMARK"}),be&&e.jsx("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Thumbmark loaded from saved record"]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Upload right thumbmark image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:ql,className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-3"}),be&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Thumbmark Preview:"}),e.jsx("img",{src:be,alt:"Thumbmark",className:"border border-gray-300 rounded-lg w-24 h-24 object-contain"})]})]})]})]})]})]});return t?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-7xl w-full mx-4 my-8 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-indigo-700 rounded-t-lg shadow-lg px-6 py-4 flex justify-between items-center z-10",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-1",children:[r!=null&&r.hasPDS?" Edit":" Add"," Personal Data Sheet (PDS)"]}),e.jsxs("p",{className:"text-blue-100 text-sm",children:["CS Form No. 212 (Revised 2017) - ",(r==null?void 0:r.name)||"Employee"]})]}),e.jsx("button",{onClick:s,className:"text-white hover:text-gray-200 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),!je&&ze.length===0&&Z.length===0&&_e.length===0&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mx-6 mt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:"Lookup Data Not Available"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Unable to load data from HR201 database tables"})]})]}),e.jsx("button",{onClick:gt,className:"bg-yellow-600 text-white px-3 py-1 rounded text-sm hover:bg-yellow-700 transition-colors",children:"Retry"})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"PDS Pages"}),e.jsx("div",{className:"flex space-x-2",children:[1,2,3,4].map(re=>e.jsxs("button",{onClick:()=>l(re),className:`px-4 py-2 rounded-lg font-medium ${a===re?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Page ",re," "]},re))})]})}),e.jsxs("div",{className:"px-6 py-3 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"PDS Completeness"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[(typeof p=="number"?p:0).toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${(p||0)>=80?"bg-green-500":(p||0)>=50?"bg-yellow-500":(p||0)>=25?"bg-orange-500":"bg-red-500"}`,style:{width:`${p||0}%`}})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(p||0)<25?"Just getting started":(p||0)<50?"Making progress":(p||0)<80?"Almost there!":(p||0)<100?"Nearly complete!":"Complete!"}),u.length>0&&e.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("svg",{className:"w-4 h-4 text-yellow-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("span",{className:"text-sm font-medium text-yellow-800",children:["Missing Fields (",u.length,")"]})]}),e.jsx("div",{className:`overflow-y-auto ${j?"max-h-64":"max-h-32"}`,children:e.jsxs("div",{className:"space-y-1",children:[(j?u:u.slice(0,10)).map((re,fe)=>e.jsxs("div",{className:"text-xs text-yellow-700 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-2 flex-shrink-0"}),e.jsxs("span",{className:"font-medium",children:[re.section,":"]}),e.jsx("button",{onClick:()=>ac(re),className:"ml-1 text-blue-600 hover:text-blue-800 hover:underline cursor-pointer transition-colors duration-200",title:`Click to focus on ${re.field} field`,children:re.field})]},fe)),u.length>10&&e.jsx("div",{className:"flex justify-center pt-2",children:e.jsx("button",{onClick:()=>v(!j),className:"text-xs text-blue-600 hover:text-blue-800 hover:underline cursor-pointer transition-colors duration-200 font-medium",children:j?`Show Less (showing ${u.length} of ${u.length})`:`Show More (${u.length-10} more fields)`})})]})})]}),u.length===0&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"All required fields completed! "})]})})]}),e.jsxs("div",{className:"min-h-screen",children:[a===1&&lc(),a===2&&Rn(),a===3&&oc(),a===4&&ic()]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex space-x-3",children:a>1&&e.jsx("button",{onClick:()=>l(a-1),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:" Previous Page"})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>Ql(!1),disabled:o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:"Save"})]})}),e.jsx("button",{onClick:s,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 border border-gray-300",type:"button",children:"Close"}),e.jsxs("button",{onClick:Gl,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),e.jsx("span",{children:"Print PDS"})]}),a<4&&e.jsx("button",{onClick:()=>l(a+1),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Next Page "})]})]})})]})]}),ce&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:Be==="height"?"Height Converter":"Weight Converter"}),e.jsx("button",{onClick:ka,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Be==="height"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Convert height to meters"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value"}),e.jsx("input",{type:"number",value:ye.value,onChange:re=>An("value",re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"5",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsxs("select",{value:ye.unit,onChange:re=>An("unit",re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"ft",children:"Feet (ft)"}),e.jsx("option",{value:"cm",children:"Centimeters (cm)"}),e.jsx("option",{value:"in",children:"Inches (in)"})]})]})]}),e.jsx("button",{onClick:Ln,disabled:!ye.value||!ye.unit,className:"w-full px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Convert to Meters"}),ye.convertedValue&&e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800",children:e.jsxs("strong",{children:["Result: ",ye.convertedValue," meters"]})})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Convert weight to kilograms"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value"}),e.jsx("input",{type:"number",value:ye.value,onChange:re=>An("value",re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"150",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsxs("select",{value:ye.unit,onChange:re=>An("unit",re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"lbs",children:"Pounds (lbs)"}),e.jsx("option",{value:"g",children:"Grams (g)"})]})]})]}),e.jsx("button",{onClick:Ln,disabled:!ye.value||!ye.unit,className:"w-full px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Convert to Kilograms"}),ye.convertedValue&&e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800",children:e.jsxs("strong",{children:["Result: ",ye.convertedValue," kilograms"]})})})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:ka,className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:In,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",disabled:!ye.convertedValue,children:"Apply to Form"})]})]})})]}):null},BS=()=>{const[t,s]=y.useState([]),[r,n]=y.useState(!0),[a,l]=y.useState(null),[o,i]=y.useState(""),[c,h]=y.useState(null),[p,m]=y.useState(!1),[u,x]=y.useState(null);y.useEffect(()=>{f(),d()},[]);const j=b=>{x({dtruserid:b.DTRuserID,badgenumber:b.BadgeNumber,name:b.NAME,department:b.Department,hasPDS:b.hasPDS}),m(!0)},v=()=>{m(!1),x(null)},N=()=>{f(),d()},f=async()=>{try{n(!0);const b=await le.get("/201-employees/dtr-employees");s(b.data.data||[]),l(null),console.log(" Loaded employees from:",b.data.source),console.log(" PDS Count:",b.data.pdsCount)}catch(b){console.error("Error fetching employees:",b),l("Failed to load employees from DTR database")}finally{n(!1)}},d=async()=>{try{const b=await le.get("/201-employees/stats");h(b.data.data)}catch(b){console.error("Error fetching stats:",b)}},g=t.filter(b=>{var R,S,k,L;if(!o)return!0;const E=o.toLowerCase();return((R=b.NAME)==null?void 0:R.toLowerCase().includes(E))||((S=b.BadgeNumber)==null?void 0:S.toString().includes(E))||((k=b.DTRuserID)==null?void 0:k.toString().includes(E))||((L=b.Department)==null?void 0:L.toLowerCase().includes(E))});return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading employees from HR201..."})]})}):a?e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:e.jsxs("div",{className:"flex",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-red-700",children:a})})]})}):e.jsxs("div",{className:"space-y-6",children:[c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Records"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.total})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.active})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Male"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c.male})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:""})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Female"}),e.jsx("p",{className:"text-2xl font-bold text-pink-600",children:c.female})]}),e.jsx("div",{className:"w-12 h-12 bg-pink-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:""})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex-1 max-w-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Employee"}),e.jsx("input",{type:"text",value:o,onChange:b=>i(b.target.value),placeholder:"Search by name, badge number, DTR User ID, or department...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsx("div",{className:"ml-4 flex space-x-3",children:e.jsxs("button",{onClick:f,className:"px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"Refresh"})]})})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",g.length," of ",t.length," employees"]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DTR User ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Badge Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Has PDS"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completeness"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500",children:o?"No employees match your search":"No employees found"})}):g.map(b=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.DTRuserID})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:b.BadgeNumber||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.NAME})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:b.Department||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${b.hasPDS?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:b.hasPDS?" Yes":" No"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.hasPDS?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${b.pdscompleprogress>=80?"bg-green-500":b.pdscompleprogress>=50?"bg-yellow-500":b.pdscompleprogress>=25?"bg-orange-500":"bg-red-500"}`,style:{width:`${b.pdscompleprogress||0}%`}})}),e.jsxs("span",{className:"text-xs text-gray-600 font-medium",children:[Math.round(b.pdscompleprogress||0),"%"]})]}):e.jsx("span",{className:"text-xs text-gray-400",children:"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>j(b),className:`p-2 rounded-lg text-white transition-colors ${b.hasPDS?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,title:b.hasPDS?"Edit PDS":"Add PDS",children:b.hasPDS?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})})]},b.DTRuserID))})]})})}),e.jsx(HS,{isOpen:p,onClose:v,selectedEmployee:u,onSave:N}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:e.jsxs("div",{className:"flex",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Data Source:"})," MSSQL USERINFO table (DTR Database) linked to MySQL employees table (HR201) via dtruserid"]}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:'Employee list is fetched from DTR system. Click "Add PDS" to create or "Edit PDS" to update employee records.'})]})]})})]})},zS=t=>{if(!t)return"";const s=String(t);if(/^\d{4}-\d{2}-\d{2}/.test(s)){const r=s.slice(0,4),n=s.slice(5,7),a=s.slice(8,10);return`${n}/${a}/${r}`}return s},WS=()=>{const[t,s]=y.useState([]),[r,n]=y.useState(!0),[a,l]=y.useState(""),[o,i]=y.useState(null),[c,h]=y.useState(!1),[p,m]=y.useState(!1),u=async()=>{var d;n(!0);try{const g=await le.get("/201-employees-with-pds");s(((d=g.data)==null?void 0:d.data)||[])}catch(g){console.error("Failed to load employees with PDS",g)}finally{n(!1)}};y.useEffect(()=>{u()},[]);const x=y.useMemo(()=>{const d=(a||"").toLowerCase();return(t||[]).filter(g=>(g.fullname||"").toLowerCase().includes(d))},[t,a]),[j,v]=y.useState({surname:"",firstname:"",middlename:"",extension:"",birthdate:""}),N=d=>{i(d),v({surname:"",firstname:"",middlename:"",extension:"",birthdate:String(d.birthdate).match(/^\d{2}\/\d{2}\/\d{4}$/)?`${d.birthdate.slice(6,10)}-${d.birthdate.slice(0,2)}-${d.birthdate.slice(3,5)}`:""}),h(!0)},f=async()=>{m(!0);try{o?await le.put(`/201-employees-with-pds/${o.objid}`,j):await le.post("/201-employees-with-pds",j),h(!1),u()}catch(d){console.error("Save error",d),alert("Failed to save")}finally{m(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Employees (with PDS)"}),e.jsx("input",{value:a,onChange:d=>l(d.target.value),placeholder:"Search name",className:"px-3 py-2 border rounded text-sm"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Photo"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Employee Name"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Birth Date"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Present Designation"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Appointment"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Shift Schedule"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"Loading"})}):x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"No records"})}):x.map(d=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-200",children:d.photo_path?e.jsx("img",{src:d.photo_path,alt:"emp",className:"w-full h-full object-cover"}):null})}),e.jsx("td",{className:"px-4 py-2",children:d.fullname}),e.jsx("td",{className:"px-4 py-2",children:zS(d.birthdate)}),e.jsx("td",{className:"px-4 py-2",children:d.presentDesignation}),e.jsx("td",{className:"px-4 py-2",children:d.appointment}),e.jsx("td",{className:"px-4 py-2",children:d.shiftSchedule}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("button",{className:"px-2 py-1 text-blue-600 hover:text-blue-800",onClick:()=>N(d),title:"Edit",children:""})})]},d.objid))})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:o?"Edit Employee":"Add Employee"}),e.jsx("button",{className:"text-gray-500",onClick:()=>h(!1),children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Surname"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:j.surname,onChange:d=>v(g=>({...g,surname:d.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"First Name"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:j.firstname,onChange:d=>v(g=>({...g,firstname:d.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Middle Name"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:j.middlename,onChange:d=>v(g=>({...g,middlename:d.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Extension"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:j.extension,onChange:d=>v(g=>({...g,extension:d.target.value}))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Birth Date"}),e.jsx("input",{type:"date",className:"mt-1 w-full border rounded px-3 py-2",value:j.birthdate,onChange:d=>v(g=>({...g,birthdate:d.target.value}))})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{className:"px-4 py-2 rounded border",onClick:()=>h(!1),children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-60",onClick:f,disabled:p,children:p?"Saving":"Save"})]})]})})]})},VS=()=>{var ke;const{user:t}=Qt(),[s,r]=y.useState([]),[n,a]=y.useState([]),[l,o]=y.useState([]),[i,c]=y.useState(!0),[h,p]=y.useState(!1),[m,u]=y.useState(""),[x,j]=y.useState(""),[v,N]=y.useState(!1),[f,d]=y.useState("add"),[g,b]=y.useState(null),[E,R]=y.useState(null),[S,k]=y.useState({leavetypeid:"",deductmode:"Leave",leavepurpose:"",selectedDates:[],status:"Pending",deductedcredit:0,inclusivedates:0}),[L,A]=y.useState([]),[D,I]=y.useState({selectedQuestionId:null,answer:""}),[O,C]=y.useState([]),[F,U]=y.useState("leave-information"),[Y,G]=y.useState([]),[V,W]=y.useState({dateFrom:"",dateTo:"",status:""}),[_,M]=y.useState(!1),[P,$]=y.useState(null),[B,w]=y.useState({text:"",type:""}),[T,H]=y.useState([]),[K,J]=y.useState([]),[X,pe]=y.useState(!1),[oe,ce]=y.useState(null),[Ae,Be]=y.useState(!1),Ie=(te,Ne="success")=>{w({text:te,type:Ne}),setTimeout(()=>w({text:"",type:""}),5e3)},[ye,se]=y.useState({dateFrom:"",dateTo:"",status:"",leavetypeid:""}),we=({label:te,value:Ne,options:de=[],onSelect:q,placeholder:me="Select an option",required:Te=!1,className:Ue=""})=>{const[Re,$e]=y.useState(!1),[Ve,at]=y.useState(""),[Je,ge]=y.useState(null),He=Array.isArray(de)?de.filter(lt=>lt&&typeof lt=="object"&&lt.value&&lt.label):[];y.useEffect(()=>{if(Ne&&He.length>0){const lt=He.find(jt=>jt.value===Ne);ge(lt||null)}else ge(null)},[Ne,He]);const Ye=He.filter(lt=>{try{return!lt||!lt.label||typeof lt.label!="string"?!1:lt.label.toLowerCase().includes(Ve.toLowerCase())}catch(jt){return console.error("Error filtering option:",jt,lt),!1}});y.useEffect(()=>{const lt=jt=>{Re&&!jt.target.closest(".enhanced-dropdown")&&($e(!1),at(""))};return document.addEventListener("mousedown",lt),()=>{document.removeEventListener("mousedown",lt)}},[Re]);const ct=lt=>{try{if(!lt||typeof q!="function"){console.error("Invalid option or onSelect function:",lt,q);return}ge(lt),q(lt.value),$e(!1),at("")}catch(jt){console.error("Error selecting option:",jt,lt)}},yt=()=>{$e(!Re),Re||at("")};return e.jsxs("div",{className:`enhanced-dropdown ${Ue}`,children:[te&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[te,Te&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{onClick:yt,className:`w-full px-3 py-2 border border-gray-300 rounded-md cursor-pointer bg-white flex items-center justify-between ${Re?"ring-2 ring-blue-500 border-blue-500":"hover:border-gray-400"} transition-colors duration-200`,children:[e.jsx("span",{className:Je?"text-gray-900":"text-gray-500",children:Je?Je.label:me}),e.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${Re?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),Re&&e.jsxs("div",{className:"absolute z-[70] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b border-gray-200",children:e.jsx("input",{type:"text",value:Ve,onChange:lt=>at(lt.target.value),placeholder:"Search...",className:"w-full px-2 py-1 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 text-gray-900",autoFocus:!0})}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:Ye.length>0?Ye.map(lt=>!lt||!lt.value||!lt.label?(console.warn("Invalid option found:",lt),null):e.jsx("div",{className:`px-3 py-2 text-sm cursor-pointer transition-colors duration-150 ${(Je==null?void 0:Je.value)===lt.value?"bg-blue-50 text-blue-900 font-medium":"text-gray-900 hover:bg-gray-50"}`,onClick:()=>ct(lt),children:lt.label},lt.value)):e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:He.length===0?"No options available":"No options found"})})]})]})]})};y.useEffect(()=>{console.log(" Component mounted, fetching data..."),Q(),ne(),he();const te=new Date,Ne=new Date(te.getFullYear(),te.getMonth(),1),de=new Date(te.getFullYear(),te.getMonth()+1,0);W({dateFrom:Ne.toISOString().split("T")[0],dateTo:de.toISOString().split("T")[0],status:""})},[]);const ve=async()=>{try{c(!0);const te=new URLSearchParams;V.dateFrom&&te.append("dateFrom",V.dateFrom),V.dateTo&&te.append("dateTo",V.dateTo),V.status&&te.append("status",V.status);const Ne=await le.get(`/employee-leave-transactions/all?${te.toString()}`);console.log("All transactions response:",Ne.data),G(Ne.data)}catch(te){console.error("Error fetching all transactions:",te)}finally{c(!1)}},Q=async()=>{try{c(!0);const te=await le.get("/employee-leave-transactions");r(te.data)}catch(te){console.error("Error fetching employees:",te),Ie("Error fetching employees","error")}finally{c(!1)}},ne=async()=>{try{const te=await le.get("/departments");a(te.data||[])}catch(te){console.error("Error fetching departments:",te),a([])}},he=async()=>{var te,Ne;try{console.log(" Fetching leave types..."),console.log(" API base URL:",le.defaults.baseURL);const de=await le.get("/leave-types");console.log(" Leave types response:",de.data),console.log(" Response status:",de.status);const q=de.data.success?de.data.data:de.data;console.log(" Processed leave types:",q),console.log(" First leave type structure:",q==null?void 0:q[0]),console.log(" Available fields:",q!=null&&q[0]?Object.keys(q[0]):"No data"),o(q||[])}catch(de){console.error(" Error fetching leave types:",de),console.error(" Error details:",(te=de.response)==null?void 0:te.data),console.error(" Error status:",(Ne=de.response)==null?void 0:Ne.status),o([])}},Me=async te=>{try{console.log(" Fetching questions for leave type:",te);const Ne=await le.get(`/leave-types/${te}/questions`);if(console.log(" Questions response:",Ne.data),Ne.data.success){const de=Ne.data.data||[];A(de),de.length===1?I({selectedQuestionId:de[0].objid,answer:""}):I({selectedQuestionId:null,answer:""})}else A([]),I({selectedQuestionId:null,answer:""})}catch(Ne){console.error(" Error fetching questions:",Ne),A([]),I({selectedQuestionId:null,answer:""})}},be=async te=>{try{const Ne=await le.get(`/employee-leave-transactions/${te}`);C(Ne.data)}catch(Ne){console.error("Error fetching employee transactions:",Ne),Ie("Error fetching employee transactions","error")}},De=te=>!te||te.length===0?"N/A":te.map(Ne=>new Date(Ne.deducteddate).toLocaleDateString("en-US",{month:"short",day:"numeric"})).join(", "),ze=te=>{switch(te){case"Pending":return"bg-yellow-100 text-yellow-800";case"Approved":return"bg-green-100 text-green-800";case"Returned":return"bg-blue-100 text-blue-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Ee=te=>{if(!te)return console.log("No photo path provided"),null;if(console.log("Getting photo URL for path:",te),te.startsWith("http"))return console.log("Photo path is already full URL:",te),te;if(te.includes("\\")&&(te.startsWith("C:")||te.startsWith("D:")||te.startsWith("E:"))){const de=te.split("\\"),q=de.findIndex(me=>me==="uploads");if(q!==-1){const Te=`http://192.168.8.18:5000/${de.slice(q).join("/")}`;return console.log("Generated photo URL from absolute path:",Te),Te}}if(te.startsWith("uploads/")){const de=`http://192.168.8.18:5000/${te}`;return console.log("Generated photo URL from uploads path:",de),de}const Ne=`http://192.168.8.18:5000/uploads/photo/${te}`;return console.log("Generated photo URL from filename:",Ne),Ne},Z=te=>{u(te.target.value)},ee=te=>{j(te.target.value)},_e=s.filter(te=>{const Ne=te.employee_name.toLowerCase().includes(m.toLowerCase())||te.employee_id.toLowerCase().includes(m.toLowerCase()),de=!x||te.department_id===x;return Ne&&de}),Qe=async(te,Ne,de=null)=>{if(d(te),b(Ne),R(de),te==="add")M(!1),k({leavetypeid:"",deductmode:"Leave",leavepurpose:"",selectedDates:[],status:"Pending",deductedcredit:0,inclusivedates:0}),H([]),J([]);else if(te==="edit"&&de){M(!0),$(de),k({leavetypeid:de.leavetypeid,deductmode:de.deductmode,leavepurpose:de.leavepurpose,selectedDates:de.details?de.details.map(q=>q.deducteddate):[],status:de.status,deductedcredit:de.deductedcredit,inclusivedates:de.inclusivedates});try{const q=(de.details||[]).map(me=>new Date(me.deducteddate));H(q),J((de.details||[]).map(me=>String(me.deducteddate).slice(0,10)))}catch{}de.leavetypeid&&await Me(de.leavetypeid),de.questionAnswer&&I({selectedQuestionId:de.questionAnswer.questionId,answer:de.questionAnswer.answer})}else te==="view"&&be(Ne.emp_objid);N(!0)};y.useEffect(()=>{const te=(T||[]).filter(Boolean).map(Ne=>{const de=Ne.getFullYear(),q=String(Ne.getMonth()+1).padStart(2,"0"),me=String(Ne.getDate()).padStart(2,"0");return`${de}-${q}-${me}`});k(Ne=>({...Ne,selectedDates:Array.from(new Set([...(Ne.selectedDates||[]).filter(de=>!K.includes(de)),...te])),inclusivedates:te.length})),J(te)},[T]);const je=te=>{k(Ne=>({...Ne,selectedDates:(Ne.selectedDates||[]).filter(de=>de!==te),inclusivedates:Math.max(0,(Ne.inclusivedates||0)-1)})),K.includes(te)&&(H(Ne=>Ne.filter(de=>{const q=de.getFullYear(),me=String(de.getMonth()+1).padStart(2,"0"),Te=String(de.getDate()).padStart(2,"0");return`${q}-${me}-${Te}`!==te})),J(Ne=>Ne.filter(de=>de!==te)))},Ke=()=>{N(!1),b(null),R(null),M(!1),$(null),k({leavetypeid:"",deductmode:"Leave",leavepurpose:"",selectedDates:[],status:"Pending",deductedcredit:0,inclusivedates:0}),A([]),I({selectedQuestionId:null,answer:""}),C([])},rt=te=>{const{name:Ne,value:de}=te.target;k(q=>({...q,[Ne]:de}))},gt=async()=>{try{if(p(!0),f==="add"){const te={emp_objid:g.emp_objid,leavetypeid:S.leavetypeid,deductmode:S.deductmode,leavepurpose:S.leavepurpose,selectedDates:S.selectedDates,deductedcredit:S.deductedcredit,inclusivedates:S.inclusivedates,status:S.status,createdby:t.USERID,questionAnswers:D.selectedQuestionId&&D.answer?D:null};await le.post("/employee-leave-transactions",te),Ie("Leave transaction created successfully")}else if(f==="edit"){const te={leavetypeid:S.leavetypeid,deductmode:S.deductmode,leavepurpose:S.leavepurpose,selectedDates:S.selectedDates,deductedcredit:S.deductedcredit,inclusivedates:S.inclusivedates,status:S.status,approvedby:S.status==="Approved"?t.USERID:null,approveddate:S.status==="Approved"?new Date().toISOString():null,questionAnswers:D.selectedQuestionId&&D.answer?D:null};await le.put(`/employee-leave-transactions/${E.objid}`,te),Ie("Leave transaction updated successfully")}Ke(),F==="leave-information"?Q():ve()}catch(te){console.error("Error saving transaction:",te),Ie("Error saving transaction","error")}finally{p(!1)}},mt=async te=>{if(window.confirm("Are you sure you want to delete this transaction?"))try{await le.delete(`/employee-leave-transactions/${te}`),Ie("Transaction deleted successfully"),F==="leave-information"?Q():ve()}catch(Ne){console.error("Error deleting transaction:",Ne),Ie("Error deleting transaction","error")}},it=te=>{ce(te),pe(!0)},ae=()=>{pe(!1),ce(null)},Ce=async te=>{var Ne,de;if(oe)try{Be(!0);const q={leavetypeid:oe.leavetypeid,deductmode:oe.deductmode||"Leave",leavepurpose:oe.leavepurpose,selectedDates:oe.details?oe.details.map(me=>me.deducteddate||me.leavedate):[],deductedcredit:oe.deductedcredit,inclusivedates:oe.inclusivedates,status:te,questionAnswers:oe.questionAnswer?{selectedQuestionId:oe.questionAnswer.questionId,answer:oe.questionAnswer.answer}:null};await le.put(`/employee-leave-transactions/${oe.objid}`,q),Ie(`Leave transaction ${te.toLowerCase()} successfully`,"success"),ae(),F==="leave-information"?Q():ve()}catch(q){console.error("Error updating transaction status:",q),Ie(((de=(Ne=q.response)==null?void 0:Ne.data)==null?void 0:de.error)||"Error updating transaction status","error")}finally{Be(!1)}},Se=te=>{switch(te){case"Pending":return"bg-yellow-100 text-yellow-800";case"Approved":return"bg-green-100 text-green-800";case"Returned":return"bg-blue-100 text-blue-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},qe=te=>new Date(te).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),Ze=O.filter(te=>{const Ne=!ye.dateFrom||new Date(te.deductdate)>=new Date(ye.dateFrom),de=!ye.dateTo||new Date(te.deductdate)<=new Date(ye.dateTo),q=!ye.status||te.status===ye.status,me=!ye.leavetypeid||te.leavetypeid===ye.leavetypeid;return Ne&&de&&q&&me});return i?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6",children:[B.text&&e.jsx("div",{className:`mb-4 p-4 rounded-md ${B.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:B.type==="success"?e.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium",children:B.text})})]})}),e.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[e.jsx("button",{onClick:()=>U("leave-information"),className:`px-6 py-3 font-medium ${F==="leave-information"?"border-b-2 border-green-500 text-green-600":"text-gray-500 hover:text-gray-700"}`,children:"Information"}),e.jsx("button",{onClick:()=>{U("leave-transactions"),ve()},className:`px-6 py-3 font-medium ${F==="leave-transactions"?"border-b-2 border-green-500 text-green-600":"text-gray-500 hover:text-gray-700"}`,children:"Transactions"})]}),F==="leave-information"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Employee"}),e.jsx("input",{type:"text",value:m,onChange:Z,placeholder:"Search by name or ID...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),e.jsxs("select",{value:x,onChange:ee,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[e.jsx("option",{value:"",children:"All Departments"}),n&&Array.isArray(n)&&n.map(te=>e.jsx("option",{value:te.deptid,children:te.departmentname},te.deptid))]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Photo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"VL Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SL Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Filed Leaves"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Approved Leaves"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_e.map(te=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ee(te.photo_path)?e.jsx("img",{src:Ee(te.photo_path),alt:te.employee_name,className:"h-10 w-10 rounded-full object-cover"}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 text-sm font-medium",children:te.employee_name.split(" ").map(Ne=>Ne[0]).join("").substring(0,2)})})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:te.employee_name}),e.jsx("div",{className:"text-sm text-gray-500",children:te.employee_id})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.vl_balance||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.sl_balance||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.filed_leaves||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.approved_leaves||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Qe("add",te),className:"text-green-600 hover:text-green-900",title:"Add Leave Transaction",children:""}),e.jsx("button",{onClick:()=>Qe("view",te),className:"text-purple-600 hover:text-purple-900",title:"View All Transactions",children:""})]})})]},te.emp_objid))})]})})}),v&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"relative w-full max-w-4xl bg-white rounded-lg shadow-xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:Ee(g==null?void 0:g.photo_path)?e.jsx("img",{src:Ee(g.photo_path),alt:g==null?void 0:g.employee_name,className:"w-full h-full object-cover"}):null}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[f==="add"&&"Add Leave Transaction",f==="edit"&&"Edit Leave Transaction",f==="view"&&"View Leave Transactions"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[g==null?void 0:g.employee_name," ",g!=null&&g.employee_id?` ${g.employee_id}`:""]})]})]}),e.jsx("button",{onClick:Ke,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200 p-1 rounded-full hover:bg-gray-100",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f==="view"?e.jsxs("div",{children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[Ee(g==null?void 0:g.photo_path)?e.jsx("img",{src:Ee(g.photo_path),alt:g.employee_name,className:"h-16 w-16 rounded-full object-cover"}):e.jsx("div",{className:"h-16 w-16 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 text-lg font-medium",children:g==null?void 0:g.employee_name.split(" ").map(te=>te[0]).join("").substring(0,2)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:g==null?void 0:g.employee_name}),e.jsx("p",{className:"text-gray-600",children:g==null?void 0:g.employee_id})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date From"}),e.jsx("input",{type:"date",value:ye.dateFrom,onChange:te=>se(Ne=>({...Ne,dateFrom:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date To"}),e.jsx("input",{type:"date",value:ye.dateTo,onChange:te=>se(Ne=>({...Ne,dateTo:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:ye.status,onChange:te=>se(Ne=>({...Ne,status:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Approved",children:"Approved"}),e.jsx("option",{value:"Returned",children:"Returned"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leave Type"}),e.jsxs("select",{value:ye.leavetypeid,onChange:te=>se(Ne=>({...Ne,leavetypeid:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[e.jsx("option",{value:"",children:"All Leave Types"}),l&&Array.isArray(l)&&l.map(te=>e.jsx("option",{value:te.leaveid,children:te.leavetypename},te.leaveid))]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leave No."}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leave Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Purpose"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Credits"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ze.map(te=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.leaveno||""}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:qe(te.deductdate)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.leave_type_name||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:te.leavepurpose}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.inclusivedates}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.deductedcredit}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Se(te.status)}`,children:te.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Qe("edit",g,te),className:"px-2 py-1 text-blue-600 hover:text-blue-800",title:"Edit",children:""}),e.jsx("button",{onClick:()=>mt(te.objid),className:"px-2 py-1 text-red-600 hover:text-red-800 ml-1",title:"Delete",children:""})]})})]},te.objid))})]})})]}):e.jsx("div",{children:e.jsxs("form",{onSubmit:te=>{te.preventDefault(),gt()},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(we,{label:"Leave Type",value:S.leavetypeid,options:l&&Array.isArray(l)?l.map(te=>(console.log(" Mapping leave type:",te),{value:te.leaveid,label:`${te.leavetype||"Unknown Leave Type"} (${te.leavecode||"N/A"})`,hasQuestions:te.hasquestion===1||te.hasquestion===!0})):[],onSelect:te=>{try{k(de=>({...de,leavetypeid:te}));const Ne=l.find(de=>de.leaveid===te);Ne&&(Ne.hasquestion===1||Ne.hasquestion===!0)?Me(te):(A([]),I({selectedQuestionId:null,answer:""}))}catch(Ne){console.error("Error setting leave type:",Ne)}},placeholder:"Select Leave Type",required:!0})}),e.jsx("div",{children:L.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Questions"}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:L.map((te,Ne)=>e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("input",{type:"radio",id:`question-${te.objid}`,name:"leave-question",checked:D.selectedQuestionId===te.objid,onChange:de=>{de.target.checked&&I({selectedQuestionId:te.objid,answer:""})},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("label",{htmlFor:`question-${te.objid}`,className:"block text-xs font-medium text-gray-700 mb-1 cursor-pointer",children:[Ne+1,". ",te.question]}),D.selectedQuestionId===te.objid&&e.jsx("textarea",{value:D.answer,onChange:de=>{I(q=>({...q,answer:de.target.value}))},rows:2,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",placeholder:"Answer..."})]})]})},te.objid))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(we,{label:"Deduct Mode",value:S.deductmode,options:[{value:"Leave",label:"Leave"},{value:"Absent",label:"Absent"},{value:"Lates",label:"Lates"}],onSelect:te=>k(Ne=>({...Ne,deductmode:te})),placeholder:"Select Deduct Mode"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leave Purpose"}),e.jsx("textarea",{name:"leavepurpose",value:S.leavepurpose,onChange:rt,rows:3,maxLength:100,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",placeholder:"Enter leave purpose..."}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[S.leavepurpose.length,"/100 characters"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Dates"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(om,{mode:"multiple",selected:T,onSelect:H,weekStartsOn:1,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-1,toYear:new Date().getFullYear()+1})}),e.jsxs("div",{className:"border rounded p-3 bg-gray-50 max-h-64 overflow-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Selected Dates"}),e.jsxs("span",{className:"text-xs text-gray-600",children:["Total: ",(S.selectedDates||[]).length]})]}),e.jsxs("ul",{className:"space-y-1 text-sm",children:[(S.selectedDates||[]).sort().map(te=>{const Ne=te.slice(5,7),de=te.slice(8,10),q=te.slice(0,4),me=`${Ne}/${de}/${q}`;return e.jsxs("li",{className:"flex items-center justify-between bg-white rounded border px-2 py-1",children:[e.jsx("span",{children:me}),e.jsx("button",{type:"button",onClick:()=>je(te),className:"text-red-600 text-xs",children:"Remove"})]},te)}),!(S.selectedDates||[]).length&&e.jsx("li",{className:"text-xs text-gray-500",children:"No dates selected"})]})]})]})]}),f==="edit"&&e.jsx(we,{label:"Status",value:S.status,options:[{value:"Pending",label:"Pending"},{value:"Approved",label:"Approved"},{value:"Returned",label:"Returned"},{value:"Cancelled",label:"Cancelled"}],onSelect:te=>k(Ne=>({...Ne,status:te})),placeholder:"Select Status"}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:Ke,className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h||!S.leavetypeid||S.selectedDates.length===0,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:h?"Saving...":f==="add"?"Create Transaction":"Update Transaction"})]})]})})]})})})]}),F==="leave-transactions"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date From"}),e.jsx("input",{type:"date",value:V.dateFrom,onChange:te=>W(Ne=>({...Ne,dateFrom:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date To"}),e.jsx("input",{type:"date",value:V.dateTo,onChange:te=>W(Ne=>({...Ne,dateTo:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:V.status,onChange:te=>W(Ne=>({...Ne,status:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Approved",children:"Approved"}),e.jsx("option",{value:"Returned",children:"Returned"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:ve,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Apply Filters"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Photo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leave No."}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leave Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inclusive Date(s)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created By"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Y.map(te=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"h-10 w-10",children:[te.photo_path?e.jsx("img",{src:Ee(te.photo_path),alt:te.employee_name,className:"h-10 w-10 rounded-full object-cover",onError:Ne=>{Ne.target.style.display="none",Ne.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center ${te.photo_path?"hidden":"flex"}`,children:e.jsx("span",{className:"text-gray-600 text-sm font-medium",children:te.employee_name.split(" ").map(Ne=>Ne[0]).join("").substring(0,2)})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:te.employee_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.leaveno||""}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[te.leave_type_name," (",te.leavecode,")"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:De(te.details)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ze(te.status)}`,children:te.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:te.isportal===1?e.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"Portal"}):e.jsx("div",{className:"h-8 w-8",children:te.created_by_photo_path?e.jsx("img",{src:te.created_by_photo_path,alt:te.created_by_employee_name||te.created_by_username||"",className:"h-8 w-8 rounded-full object-cover",title:te.created_by_employee_name||te.created_by_username||"",onError:Ne=>{Ne.target.style.display="none",Ne.target.nextSibling.style.display="flex"}}):e.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsxs("span",{className:"text-gray-600 text-xs font-medium",children:[te.created_by_surname?te.created_by_surname.charAt(0):"?",te.created_by_firstname?te.created_by_firstname.charAt(0):"?"]})})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>it(te),className:"px-2 py-1 text-purple-600 hover:text-purple-800",title:"View Transaction",children:""}),e.jsx("button",{onClick:()=>Qe("edit",{emp_objid:te.emp_objid,employee_name:te.employee_name,photo_path:te.photo_path},te),className:"px-2 py-1 text-blue-600 hover:text-blue-800",title:"Edit Transaction",children:""}),e.jsx("button",{onClick:()=>mt(te.objid),className:"px-2 py-1 text-red-600 hover:text-red-800 ml-1",title:"Delete Transaction",children:""})]})})]},te.objid))})]})})})]}),X&&oe&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"relative w-full max-w-2xl bg-white rounded-lg shadow-xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:oe.photo_path?e.jsx("img",{src:Ee(oe.photo_path),alt:oe.employee_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-300",children:e.jsx("span",{className:"text-gray-600 text-sm font-medium",children:(ke=oe.employee_name)==null?void 0:ke.split(" ").map(te=>te[0]).join("").substring(0,2)})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"View Leave Transaction"}),e.jsx("div",{className:"text-sm text-gray-600",children:oe.employee_name})]})]}),e.jsx("button",{onClick:ae,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200 p-1 rounded-full hover:bg-gray-100",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"space-y-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leave No."}),e.jsx("div",{className:"text-sm text-gray-900",children:oe.leaveno||""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("div",{children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Se(oe.status)}`,children:oe.status})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leave Type"}),e.jsxs("div",{className:"text-sm text-gray-900",children:[oe.leave_type_name||"",oe.leavecode&&` (${oe.leavecode})`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Inclusive Dates"}),e.jsxs("div",{className:"text-sm text-gray-900",children:[oe.inclusivedates||0," day(s)"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deducted Credits"}),e.jsx("div",{className:"text-sm text-gray-900",children:oe.deductedcredit||0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deduct Mode"}),e.jsx("div",{className:"text-sm text-gray-900",children:oe.deductmode||"Leave"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leave Dates"}),e.jsx("div",{className:"text-sm text-gray-900",children:oe.details&&oe.details.length>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:oe.details.map((te,Ne)=>{const de=te.deducteddate||te.leavedate;if(!de)return null;const q=de.slice(5,7),me=de.slice(8,10),Te=de.slice(0,4);return e.jsxs("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:[q,"/",me,"/",Te]},Ne)})}):e.jsx("span",{className:"text-gray-400",children:"No dates"})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purpose"}),e.jsx("div",{className:"text-sm text-gray-900",children:oe.leavepurpose||""})]}),oe.questionAnswer&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question & Answer"}),e.jsxs("div",{className:"text-sm text-gray-900",children:[e.jsx("div",{className:"font-medium mb-1",children:oe.questionAnswer.questionText||""}),e.jsx("div",{className:"text-gray-600",children:oe.questionAnswer.answer||""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created By"}),e.jsx("div",{className:"text-sm text-gray-900",children:oe.isportal===1?e.jsx("span",{className:"text-blue-600 font-medium",children:"Portal"}):oe.created_by_employee_name?oe.created_by_employee_name:oe.created_by_username?oe.created_by_username:""})]}),oe.approved_by_employee_name&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Approved By"}),e.jsx("div",{className:"text-sm text-gray-900",children:oe.approved_by_employee_name})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:ae,className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Close"}),oe.status==="Pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>Ce("Approved"),disabled:Ae,className:"px-6 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:Ae?"Updating...":"Approve"}),e.jsx("button",{type:"button",onClick:()=>Ce("Returned"),disabled:Ae,className:"px-6 py-2 text-sm font-medium text-white bg-orange-600 border border-transparent rounded-md hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:Ae?"Updating...":"Return"})]}),oe.status!=="Cancelled"&&e.jsx("button",{type:"button",onClick:()=>{window.confirm("Are you sure you want to cancel this leave transaction?")&&Ce("Cancelled")},disabled:Ae,className:"px-6 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:Ae?"Updating...":"Cancel"})]})]})})})]})},YS=()=>{var O;const{user:t}=Qt(),[s,r]=y.useState([]),[n,a]=y.useState(!0),[l,o]=y.useState(null),[i,c]=y.useState(""),[h,p]=y.useState(!1),[m,u]=y.useState("add"),[x,j]=y.useState(null),[v,N]=y.useState({total_earned_vl:"",total_earned_sl:"",balance_vl:"",balance_sl:""}),[f,d]=y.useState(!1),g=async()=>{try{a(!0);const C=await le.get("/employee-leave-records");C.data.success?r(C.data.employees):o("Failed to fetch employees")}catch(C){console.error("Error fetching employees:",C),o("Failed to fetch employees")}finally{a(!1)}};y.useEffect(()=>{g()},[]);const b=s.filter(C=>C.name.toLowerCase().includes(i.toLowerCase())||C.employee_id.toLowerCase().includes(i.toLowerCase())),E=(C,F)=>{j(C),u(F),N(F==="add"?{total_earned_vl:C.total_earned_vl||"",total_earned_sl:C.total_earned_sl||"",balance_vl:"",balance_sl:""}:{total_earned_vl:C.total_earned_vl||"",total_earned_sl:C.total_earned_sl||"",balance_vl:C.balance_vl||"",balance_sl:C.balance_sl||""}),p(!0)},R=()=>{p(!1),j(null),N({total_earned_vl:"",total_earned_sl:"",balance_vl:"",balance_sl:""})},S=C=>{const{name:F,value:U}=C.target;N(Y=>({...Y,[F]:U}))},k=()=>{const C=[];return m==="add"&&((!v.balance_vl||v.balance_vl<0)&&C.push("Balance VL must be a positive number"),(!v.balance_sl||v.balance_sl<0)&&C.push("Balance SL must be a positive number")),v.total_earned_vl<0&&C.push("Total Earned VL must be a positive number"),v.total_earned_sl<0&&C.push("Total Earned SL must be a positive number"),C},L=async()=>{const C=k();if(C.length>0){alert(C.join(`
`));return}try{if(d(!0),m==="add"){const F={emp_objid:x.emp_objid,balance_vl:parseFloat(v.balance_vl),balance_sl:parseFloat(v.balance_sl),total_earned_vl:parseFloat(v.total_earned_vl),total_earned_sl:parseFloat(v.total_earned_sl),updated_by:t.user_objid};await le.post("/employee-leave-records",F),alert("Leave record created successfully!")}else{const F={balance_vl:parseFloat(v.balance_vl),balance_sl:parseFloat(v.balance_sl),total_earned_vl:parseFloat(v.total_earned_vl),total_earned_sl:parseFloat(v.total_earned_sl),updated_by:t.user_objid};await le.put(`/employee-leave-records/${x.leave_objid}`,F),alert("Leave record updated successfully!")}R(),g()}catch(F){console.error("Error saving leave record:",F),alert("Failed to save leave record. Please try again.")}finally{d(!1)}},A=async C=>{if(window.confirm(`Are you sure you want to delete the leave record for ${C.name}?`))try{await le.delete(`/employee-leave-records/${C.leave_objid}`),alert("Leave record deleted successfully!"),g()}catch(F){console.error("Error deleting leave record:",F),alert("Failed to delete leave record. Please try again.")}},D=C=>C?parseFloat(C).toFixed(3):"0.000",I=C=>{if(!C)return console.log("No photo path provided"),null;if(console.log("Getting photo URL for path:",C),C.startsWith("http"))return console.log("Photo path is already full URL:",C),C;if(C.includes("\\")&&(C.startsWith("C:")||C.startsWith("D:")||C.startsWith("E:"))){const U=C.split("\\"),Y=U.findIndex(G=>G==="uploads");if(Y!==-1){const V=`http://192.168.8.18:5000/${U.slice(Y).join("/")}`;return console.log("Generated photo URL from absolute path:",V),V}}if(C.startsWith("uploads/")){const U=`http://192.168.8.18:5000/${C}`;return console.log("Generated photo URL from uploads path:",U),U}const F=`http://192.168.8.18:5000/uploads/photo/${C}`;return console.log("Generated photo URL from filename:",F),F};return n?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):l?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:e.jsx("p",{children:l})})]})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",placeholder:"Search employees by name or ID...",value:i,onChange:C=>c(C.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})})}),e.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Photo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Earned VL"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Earned SL"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance VL"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance SL"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Updated By"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(C=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex-shrink-0 h-10 w-10",children:[I(C.photo_path)?e.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:I(C.photo_path),alt:C.name,onError:F=>{F.target.style.display="none",F.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 font-medium",style:{display:I(C.photo_path)?"none":"flex"},children:C.name.charAt(0).toUpperCase()})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",C.employee_id]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:D(C.total_earned_vl)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:D(C.total_earned_sl)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:D(C.balance_vl)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:D(C.balance_sl)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"h-8 w-8",children:[C.updated_by_photo_path?e.jsx("img",{src:C.updated_by_photo_path,alt:`${C.updated_by_employee_name||C.updated_by_username||""}`,className:"h-8 w-8 rounded-full object-cover",title:C.updated_by_employee_name||C.updated_by_username||"",onError:F=>{F.target.style.display="none",F.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`h-8 w-8 rounded-full bg-gray-300 items-center justify-center ${C.updated_by_photo_path?"hidden":"flex"}`,children:e.jsxs("span",{className:"text-gray-600 text-xs font-medium",children:[C.updated_by_surname?C.updated_by_surname.charAt(0):"?",C.updated_by_firstname?C.updated_by_firstname.charAt(0):""]})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("div",{className:"flex space-x-2",children:C.has_leave_record?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>E(C,"edit"),className:"px-2 py-1 text-blue-600 hover:text-blue-800",title:"Edit Leave Record",children:""}),e.jsx("button",{onClick:()=>A(C),className:"px-2 py-1 text-red-600 hover:text-red-800 ml-1",title:"Delete Leave Record",children:""})]}):e.jsx("button",{onClick:()=>E(C,"add"),className:"text-green-600 hover:text-green-900",title:"Add Leave Record",children:""})})})]},C.emp_objid))})]})}),b.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No employees found matching your search criteria."})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:m==="add"?"Add Leave Record":"Edit Leave Record"}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Employee Information"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[I(x==null?void 0:x.photo_path)?e.jsx("img",{className:"h-12 w-12 rounded-full object-cover",src:I(x==null?void 0:x.photo_path),alt:x==null?void 0:x.name}):e.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 font-medium",children:(O=x==null?void 0:x.name)==null?void 0:O.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:x==null?void 0:x.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",x==null?void 0:x.employee_id]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"Total Earned Credits"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Earned VL"}),e.jsx("input",{type:"number",name:"total_earned_vl",value:v.total_earned_vl,onChange:S,step:"0.001",min:"0",max:"9999.999",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Earned SL"}),e.jsx("input",{type:"number",name:"total_earned_sl",value:v.total_earned_sl,onChange:S,step:"0.001",min:"0",max:"9999.999",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-green-900 mb-3",children:"Leave Balances"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"VL"}),e.jsx("input",{type:"number",name:"balance_vl",value:v.balance_vl,onChange:S,step:"0.001",min:"0",max:"9999.999",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SL"}),e.jsx("input",{type:"number",name:"balance_sl",value:v.balance_sl,onChange:S,step:"0.001",min:"0",max:"9999.999",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:R,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),e.jsx("button",{onClick:L,disabled:f,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:f?"Saving...":"Save"})]})]})})})]})},qS=()=>{const[t,s]=y.useState([]),[r,n]=y.useState(!1),[a,l]=y.useState(!1),[o,i]=y.useState(null),[c,h]=y.useState(""),[p,m]=y.useState(null),[u,x]=y.useState(""),[j,v]=y.useState({leavecode:"",leavetype:"",leavedescription:"",coverage:"",annualentitlement:"",accrual:"",cycle:"",isconverttocash:!1,hasquestion:!1}),[N,f]=y.useState({}),[d,g]=y.useState(""),[b,E]=y.useState(!1),[R,S]=y.useState(!1),[k,L]=y.useState(null),[A,D]=y.useState([]);y.useEffect(()=>{I()},[]);const I=async()=>{try{n(!0);const w=await le.get("/leave-types");w.data.success&&s(w.data.data)}catch(w){console.error("Error fetching leave types:",w),O("Failed to fetch leave types","error")}finally{n(!1)}},O=(w,T="success")=>{g(w),E(!0),setTimeout(()=>E(!1),3e3)},C=w=>{const{name:T,value:H,type:K,checked:J}=w.target;v(X=>({...X,[T]:K==="checkbox"?J:H})),N[T]&&f(X=>({...X,[T]:""}))},F=()=>{const w={};return j.leavecode.trim()?j.leavecode.length>10&&(w.leavecode="Leave code must be 10 characters or less"):w.leavecode="Leave code is required",j.leavetype.trim()?j.leavetype.length>25&&(w.leavetype="Leave type must be 25 characters or less"):w.leavetype="Leave type is required",f(w),Object.keys(w).length===0},U=async w=>{var T,H;if(w.preventDefault(),!!F())try{n(!0),o?(await le.put(`/leave-types/${o.leaveid}`,j)).data.success&&(O("Leave type updated successfully"),I(),V()):(await le.post("/leave-types",j)).data.success&&(O("Leave type created successfully"),I(),V())}catch(K){console.error("Error saving leave type:",K);const J=((H=(T=K.response)==null?void 0:T.data)==null?void 0:H.message)||"Failed to save leave type";O(J,"error")}finally{n(!1)}},Y=w=>{i(w),v({leavecode:w.leavecode||"",leavetype:w.leavetype||"",leavedescription:w.leavedescription||"",coverage:w.coverage||"",annualentitlement:w.annualentitlement||"",accrual:w.accrual||"",cycle:w.cycle||"",isconverttocash:w.isconverttocash===1,hasquestion:w.hasquestion===1}),l(!0)},G=async w=>{if(window.confirm(`Are you sure you want to delete "${w.leavetype}"? This will also delete all associated questions.`))try{n(!0),(await le.delete(`/leave-types/${w.leaveid}`)).data.success&&(O("Leave type deleted successfully"),I())}catch(T){console.error("Error deleting leave type:",T),O("Failed to delete leave type","error")}finally{n(!1)}},V=()=>{l(!1),i(null),v({leavecode:"",leavetype:"",leavedescription:"",coverage:"",annualentitlement:"",accrual:"",cycle:"",isconverttocash:!1,hasquestion:!1}),f({})},W=async w=>{try{L(w),n(!0);const T=await le.get(`/leave-types/${w.leaveid}/questions`);T.data.success&&(D(T.data.data),S(!0))}catch(T){console.error("Error fetching questions:",T),O("Failed to fetch questions","error")}finally{n(!1)}},_=()=>{S(!1),L(null),D([]),x(""),m(null)},M=async()=>{if(!u.trim()){O("Question text is required","error");return}try{if(n(!0),(await le.post(`/leave-types/${k.leaveid}/questions`,{question:u.trim()})).data.success){O("Question added successfully"),x("");const T=await le.get(`/leave-types/${k.leaveid}/questions`);T.data.success&&D(T.data.data),I()}}catch(w){console.error("Error adding question:",w),O("Failed to add question","error")}finally{n(!1)}},P=async w=>{try{if(n(!0),(await le.put(`/leave-types/questions/${w.objid}`,{question:u.trim()})).data.success){O("Question updated successfully"),x(""),m(null);const H=await le.get(`/leave-types/${k.leaveid}/questions`);H.data.success&&D(H.data.data),I()}}catch(T){console.error("Error updating question:",T),O("Failed to update question","error")}finally{n(!1)}},$=async w=>{if(window.confirm("Are you sure you want to delete this question?"))try{if(n(!0),(await le.delete(`/leave-types/questions/${w.objid}`)).data.success){O("Question deleted successfully");const H=await le.get(`/leave-types/${k.leaveid}/questions`);H.data.success&&D(H.data.data),I()}}catch(T){console.error("Error deleting question:",T),O("Failed to delete question","error")}finally{n(!1)}},B=t.filter(w=>w.leavecode.toLowerCase().includes(c.toLowerCase())||w.leavetype.toLowerCase().includes(c.toLowerCase())||w.leavedescription&&w.leavedescription.toLowerCase().includes(c.toLowerCase()));return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Add Leave Type"})}),b&&e.jsx("div",{className:`mb-4 p-4 rounded-md ${d.includes("error")||d.includes("Failed")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:d}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search leave types...",value:c,onChange:w=>h(w.target.value),className:"w-full max-w-md px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leave Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leave Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Annual Entitlement"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Accrual"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Has Question"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):B.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No leave types found"})}):B.map(w=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:w.leavecode}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.leavetype}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:w.leavedescription||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.annualentitlement||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.accrual||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:w.hasquestion?"Yes":"No"}),e.jsx("button",{onClick:()=>W(w),className:"ml-2 text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:w.hasquestion?"Manage Questions":"Add Questions",children:w.hasquestion?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>Y(w),className:"px-2 py-1 text-blue-600 hover:text-blue-800",title:"Edit",children:""}),e.jsx("button",{onClick:()=>G(w),className:"px-2 py-1 text-red-600 hover:text-red-800 ml-1",title:"Delete",children:""})]})]},w.leaveid))})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:o?"Edit Leave Type":"Add Leave Type"}),e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leave Code *"}),e.jsx("input",{type:"text",name:"leavecode",value:j.leavecode,onChange:C,maxLength:"10",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${N.leavecode?"border-red-500":"border-gray-300"}`}),N.leavecode&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:N.leavecode})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leave Type *"}),e.jsx("input",{type:"text",name:"leavetype",value:j.leavetype,onChange:C,maxLength:"25",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${N.leavetype?"border-red-500":"border-gray-300"}`}),N.leavetype&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:N.leavetype})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"leavedescription",value:j.leavedescription,onChange:C,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Coverage"}),e.jsx("textarea",{name:"coverage",value:j.coverage,onChange:C,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Annual Entitlement"}),e.jsx("input",{type:"number",name:"annualentitlement",value:j.annualentitlement,onChange:C,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Accrual"}),e.jsx("input",{type:"number",step:"0.001",name:"accrual",value:j.accrual,onChange:C,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cycle"}),e.jsx("input",{type:"number",name:"cycle",value:j.cycle,onChange:C,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"isconverttocash",checked:j.isconverttocash,onChange:C,className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Convert to Cash"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"hasquestion",checked:j.hasquestion,onChange:C,className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Has Question"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:V,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:r?"Saving...":o?"Update":"Create"})]})]})]})}),R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:[k!=null&&k.hasquestion?"Questions for":"Add Questions to"," ",k==null?void 0:k.leavetype]}),e.jsx("button",{onClick:_,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter question text...",value:u,onChange:w=>x(w.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("button",{onClick:p?()=>P(p):M,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[p?"Update":"Add"," Question"]}),p&&e.jsx("button",{onClick:()=>{m(null),x("")},className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"Cancel"})]})}),e.jsx("div",{className:"space-y-2",children:A.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:k!=null&&k.hasquestion?"No questions found for this leave type.":"No questions added yet. Add your first question below."}):A.map(w=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[e.jsx("span",{className:"text-sm text-gray-900 flex-1",children:w.question}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>{m(w),x(w.question)},className:"px-2 py-1 text-blue-600 hover:text-blue-800",title:"Edit",children:""}),e.jsx("button",{onClick:()=>$(w),className:"px-2 py-1 text-red-600 hover:text-red-800 ml-1",title:"Delete",children:""})]})]},w.objid))}),e.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t",children:e.jsx("button",{onClick:_,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Close"})})]})})]})},KS=()=>{const[t,s]=y.useState("transactions");y.useEffect(()=>{const n=localStorage.getItem("201-leaves-active-tab");n&&["transactions","credits","types"].includes(n)&&s(n)},[]);const r=n=>{s(n),localStorage.setItem("201-leaves-active-tab",n)};return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsx("div",{className:"px-6",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>r("transactions"),className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="transactions"?"border-blue-600 text-blue-700":"border-transparent text-gray-500"}`,children:"Leave Transactions"}),e.jsx("button",{onClick:()=>r("credits"),className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="credits"?"border-blue-600 text-blue-700":"border-transparent text-gray-500"}`,children:"Leave Credits"}),e.jsx("button",{onClick:()=>r("types"),className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="types"?"border-blue-600 text-blue-700":"border-transparent text-gray-500"}`,children:"Leave Types"})]})})}),t==="transactions"&&e.jsx("div",{className:"mt-4",children:e.jsx(VS,{})}),t==="credits"&&e.jsx("div",{className:"mt-4",children:e.jsx(YS,{})}),t==="types"&&e.jsx("div",{className:"mt-4",children:e.jsx(qS,{})})]})};function GS(){this.__data__=[],this.size=0}var QS=GS;function ZS(t,s){return t===s||t!==t&&s!==s}var $0=ZS,JS=$0;function XS(t,s){for(var r=t.length;r--;)if(JS(t[r][0],s))return r;return-1}var qi=XS,e_=qi,t_=Array.prototype,s_=t_.splice;function r_(t){var s=this.__data__,r=e_(s,t);if(r<0)return!1;var n=s.length-1;return r==n?s.pop():s_.call(s,r,1),--this.size,!0}var n_=r_,a_=qi;function l_(t){var s=this.__data__,r=a_(s,t);return r<0?void 0:s[r][1]}var o_=l_,i_=qi;function c_(t){return i_(this.__data__,t)>-1}var d_=c_,u_=qi;function m_(t,s){var r=this.__data__,n=u_(r,t);return n<0?(++this.size,r.push([t,s])):r[n][1]=s,this}var h_=m_,f_=QS,p_=n_,x_=o_,g_=d_,y_=h_;function ja(t){var s=-1,r=t==null?0:t.length;for(this.clear();++s<r;){var n=t[s];this.set(n[0],n[1])}}ja.prototype.clear=f_;ja.prototype.delete=p_;ja.prototype.get=x_;ja.prototype.has=g_;ja.prototype.set=y_;var Ki=ja,b_=Ki;function v_(){this.__data__=new b_,this.size=0}var j_=v_;function N_(t){var s=this.__data__,r=s.delete(t);return this.size=s.size,r}var w_=N_;function E_(t){return this.__data__.get(t)}var S_=E_;function __(t){return this.__data__.has(t)}var C_=__,k_=typeof Fs=="object"&&Fs&&Fs.Object===Object&&Fs,H0=k_,D_=H0,A_=typeof self=="object"&&self&&self.Object===Object&&self,T_=D_||A_||Function("return this")(),Mr=T_,L_=Mr,I_=L_.Symbol,cm=I_,Cf=cm,B0=Object.prototype,M_=B0.hasOwnProperty,R_=B0.toString,Va=Cf?Cf.toStringTag:void 0;function O_(t){var s=M_.call(t,Va),r=t[Va];try{t[Va]=void 0;var n=!0}catch{}var a=R_.call(t);return n&&(s?t[Va]=r:delete t[Va]),a}var P_=O_,F_=Object.prototype,U_=F_.toString;function $_(t){return U_.call(t)}var H_=$_,kf=cm,B_=P_,z_=H_,W_="[object Null]",V_="[object Undefined]",Df=kf?kf.toStringTag:void 0;function Y_(t){return t==null?t===void 0?V_:W_:Df&&Df in Object(t)?B_(t):z_(t)}var Gi=Y_;function q_(t){var s=typeof t;return t!=null&&(s=="object"||s=="function")}var z0=q_,K_=Gi,G_=z0,Q_="[object AsyncFunction]",Z_="[object Function]",J_="[object GeneratorFunction]",X_="[object Proxy]";function e4(t){if(!G_(t))return!1;var s=K_(t);return s==Z_||s==J_||s==Q_||s==X_}var W0=e4,t4=Mr,s4=t4["__core-js_shared__"],r4=s4,Kc=r4,Af=function(){var t=/[^.]+$/.exec(Kc&&Kc.keys&&Kc.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function n4(t){return!!Af&&Af in t}var a4=n4,l4=Function.prototype,o4=l4.toString;function i4(t){if(t!=null){try{return o4.call(t)}catch{}try{return t+""}catch{}}return""}var V0=i4,c4=W0,d4=a4,u4=z0,m4=V0,h4=/[\\^$.*+?()[\]{}|]/g,f4=/^\[object .+?Constructor\]$/,p4=Function.prototype,x4=Object.prototype,g4=p4.toString,y4=x4.hasOwnProperty,b4=RegExp("^"+g4.call(y4).replace(h4,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v4(t){if(!u4(t)||d4(t))return!1;var s=c4(t)?b4:f4;return s.test(m4(t))}var j4=v4;function N4(t,s){return t==null?void 0:t[s]}var w4=N4,E4=j4,S4=w4;function _4(t,s){var r=S4(t,s);return E4(r)?r:void 0}var Na=_4,C4=Na,k4=Mr,D4=C4(k4,"Map"),dm=D4,A4=Na,T4=A4(Object,"create"),Qi=T4,Tf=Qi;function L4(){this.__data__=Tf?Tf(null):{},this.size=0}var I4=L4;function M4(t){var s=this.has(t)&&delete this.__data__[t];return this.size-=s?1:0,s}var R4=M4,O4=Qi,P4="__lodash_hash_undefined__",F4=Object.prototype,U4=F4.hasOwnProperty;function $4(t){var s=this.__data__;if(O4){var r=s[t];return r===P4?void 0:r}return U4.call(s,t)?s[t]:void 0}var H4=$4,B4=Qi,z4=Object.prototype,W4=z4.hasOwnProperty;function V4(t){var s=this.__data__;return B4?s[t]!==void 0:W4.call(s,t)}var Y4=V4,q4=Qi,K4="__lodash_hash_undefined__";function G4(t,s){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=q4&&s===void 0?K4:s,this}var Q4=G4,Z4=I4,J4=R4,X4=H4,eC=Y4,tC=Q4;function wa(t){var s=-1,r=t==null?0:t.length;for(this.clear();++s<r;){var n=t[s];this.set(n[0],n[1])}}wa.prototype.clear=Z4;wa.prototype.delete=J4;wa.prototype.get=X4;wa.prototype.has=eC;wa.prototype.set=tC;var sC=wa,Lf=sC,rC=Ki,nC=dm;function aC(){this.size=0,this.__data__={hash:new Lf,map:new(nC||rC),string:new Lf}}var lC=aC;function oC(t){var s=typeof t;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?t!=="__proto__":t===null}var iC=oC,cC=iC;function dC(t,s){var r=t.__data__;return cC(s)?r[typeof s=="string"?"string":"hash"]:r.map}var Zi=dC,uC=Zi;function mC(t){var s=uC(this,t).delete(t);return this.size-=s?1:0,s}var hC=mC,fC=Zi;function pC(t){return fC(this,t).get(t)}var xC=pC,gC=Zi;function yC(t){return gC(this,t).has(t)}var bC=yC,vC=Zi;function jC(t,s){var r=vC(this,t),n=r.size;return r.set(t,s),this.size+=r.size==n?0:1,this}var NC=jC,wC=lC,EC=hC,SC=xC,_C=bC,CC=NC;function Ea(t){var s=-1,r=t==null?0:t.length;for(this.clear();++s<r;){var n=t[s];this.set(n[0],n[1])}}Ea.prototype.clear=wC;Ea.prototype.delete=EC;Ea.prototype.get=SC;Ea.prototype.has=_C;Ea.prototype.set=CC;var Y0=Ea,kC=Ki,DC=dm,AC=Y0,TC=200;function LC(t,s){var r=this.__data__;if(r instanceof kC){var n=r.__data__;if(!DC||n.length<TC-1)return n.push([t,s]),this.size=++r.size,this;r=this.__data__=new AC(n)}return r.set(t,s),this.size=r.size,this}var IC=LC,MC=Ki,RC=j_,OC=w_,PC=S_,FC=C_,UC=IC;function Sa(t){var s=this.__data__=new MC(t);this.size=s.size}Sa.prototype.clear=RC;Sa.prototype.delete=OC;Sa.prototype.get=PC;Sa.prototype.has=FC;Sa.prototype.set=UC;var $C=Sa,HC="__lodash_hash_undefined__";function BC(t){return this.__data__.set(t,HC),this}var zC=BC;function WC(t){return this.__data__.has(t)}var VC=WC,YC=Y0,qC=zC,KC=VC;function gi(t){var s=-1,r=t==null?0:t.length;for(this.__data__=new YC;++s<r;)this.add(t[s])}gi.prototype.add=gi.prototype.push=qC;gi.prototype.has=KC;var GC=gi;function QC(t,s){for(var r=-1,n=t==null?0:t.length;++r<n;)if(s(t[r],r,t))return!0;return!1}var ZC=QC;function JC(t,s){return t.has(s)}var XC=JC,ek=GC,tk=ZC,sk=XC,rk=1,nk=2;function ak(t,s,r,n,a,l){var o=r&rk,i=t.length,c=s.length;if(i!=c&&!(o&&c>i))return!1;var h=l.get(t),p=l.get(s);if(h&&p)return h==s&&p==t;var m=-1,u=!0,x=r&nk?new ek:void 0;for(l.set(t,s),l.set(s,t);++m<i;){var j=t[m],v=s[m];if(n)var N=o?n(v,j,m,s,t,l):n(j,v,m,t,s,l);if(N!==void 0){if(N)continue;u=!1;break}if(x){if(!tk(s,function(f,d){if(!sk(x,d)&&(j===f||a(j,f,r,n,l)))return x.push(d)})){u=!1;break}}else if(!(j===v||a(j,v,r,n,l))){u=!1;break}}return l.delete(t),l.delete(s),u}var q0=ak,lk=Mr,ok=lk.Uint8Array,ik=ok;function ck(t){var s=-1,r=Array(t.size);return t.forEach(function(n,a){r[++s]=[a,n]}),r}var dk=ck;function uk(t){var s=-1,r=Array(t.size);return t.forEach(function(n){r[++s]=n}),r}var mk=uk,If=cm,Mf=ik,hk=$0,fk=q0,pk=dk,xk=mk,gk=1,yk=2,bk="[object Boolean]",vk="[object Date]",jk="[object Error]",Nk="[object Map]",wk="[object Number]",Ek="[object RegExp]",Sk="[object Set]",_k="[object String]",Ck="[object Symbol]",kk="[object ArrayBuffer]",Dk="[object DataView]",Rf=If?If.prototype:void 0,Gc=Rf?Rf.valueOf:void 0;function Ak(t,s,r,n,a,l,o){switch(r){case Dk:if(t.byteLength!=s.byteLength||t.byteOffset!=s.byteOffset)return!1;t=t.buffer,s=s.buffer;case kk:return!(t.byteLength!=s.byteLength||!l(new Mf(t),new Mf(s)));case bk:case vk:case wk:return hk(+t,+s);case jk:return t.name==s.name&&t.message==s.message;case Ek:case _k:return t==s+"";case Nk:var i=pk;case Sk:var c=n&gk;if(i||(i=xk),t.size!=s.size&&!c)return!1;var h=o.get(t);if(h)return h==s;n|=yk,o.set(t,s);var p=fk(i(t),i(s),n,a,l,o);return o.delete(t),p;case Ck:if(Gc)return Gc.call(t)==Gc.call(s)}return!1}var Tk=Ak;function Lk(t,s){for(var r=-1,n=s.length,a=t.length;++r<n;)t[a+r]=s[r];return t}var Ik=Lk,Mk=Array.isArray,um=Mk,Rk=Ik,Ok=um;function Pk(t,s,r){var n=s(t);return Ok(t)?n:Rk(n,r(t))}var Fk=Pk;function Uk(t,s){for(var r=-1,n=t==null?0:t.length,a=0,l=[];++r<n;){var o=t[r];s(o,r,t)&&(l[a++]=o)}return l}var $k=Uk;function Hk(){return[]}var Bk=Hk,zk=$k,Wk=Bk,Vk=Object.prototype,Yk=Vk.propertyIsEnumerable,Of=Object.getOwnPropertySymbols,qk=Of?function(t){return t==null?[]:(t=Object(t),zk(Of(t),function(s){return Yk.call(t,s)}))}:Wk,Kk=qk;function Gk(t,s){for(var r=-1,n=Array(t);++r<t;)n[r]=s(r);return n}var Qk=Gk;function Zk(t){return t!=null&&typeof t=="object"}var Ji=Zk,Jk=Gi,Xk=Ji,eD="[object Arguments]";function tD(t){return Xk(t)&&Jk(t)==eD}var sD=tD,Pf=sD,rD=Ji,K0=Object.prototype,nD=K0.hasOwnProperty,aD=K0.propertyIsEnumerable,lD=Pf(function(){return arguments}())?Pf:function(t){return rD(t)&&nD.call(t,"callee")&&!aD.call(t,"callee")},oD=lD,yi={exports:{}};function iD(){return!1}var cD=iD;yi.exports;(function(t,s){var r=Mr,n=cD,a=s&&!s.nodeType&&s,l=a&&!0&&t&&!t.nodeType&&t,o=l&&l.exports===a,i=o?r.Buffer:void 0,c=i?i.isBuffer:void 0,h=c||n;t.exports=h})(yi,yi.exports);var G0=yi.exports,dD=9007199254740991,uD=/^(?:0|[1-9]\d*)$/;function mD(t,s){var r=typeof t;return s=s??dD,!!s&&(r=="number"||r!="symbol"&&uD.test(t))&&t>-1&&t%1==0&&t<s}var hD=mD,fD=9007199254740991;function pD(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=fD}var Q0=pD,xD=Gi,gD=Q0,yD=Ji,bD="[object Arguments]",vD="[object Array]",jD="[object Boolean]",ND="[object Date]",wD="[object Error]",ED="[object Function]",SD="[object Map]",_D="[object Number]",CD="[object Object]",kD="[object RegExp]",DD="[object Set]",AD="[object String]",TD="[object WeakMap]",LD="[object ArrayBuffer]",ID="[object DataView]",MD="[object Float32Array]",RD="[object Float64Array]",OD="[object Int8Array]",PD="[object Int16Array]",FD="[object Int32Array]",UD="[object Uint8Array]",$D="[object Uint8ClampedArray]",HD="[object Uint16Array]",BD="[object Uint32Array]",$t={};$t[MD]=$t[RD]=$t[OD]=$t[PD]=$t[FD]=$t[UD]=$t[$D]=$t[HD]=$t[BD]=!0;$t[bD]=$t[vD]=$t[LD]=$t[jD]=$t[ID]=$t[ND]=$t[wD]=$t[ED]=$t[SD]=$t[_D]=$t[CD]=$t[kD]=$t[DD]=$t[AD]=$t[TD]=!1;function zD(t){return yD(t)&&gD(t.length)&&!!$t[xD(t)]}var WD=zD;function VD(t){return function(s){return t(s)}}var YD=VD,bi={exports:{}};bi.exports;(function(t,s){var r=H0,n=s&&!s.nodeType&&s,a=n&&!0&&t&&!t.nodeType&&t,l=a&&a.exports===n,o=l&&r.process,i=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=i})(bi,bi.exports);var qD=bi.exports,KD=WD,GD=YD,Ff=qD,Uf=Ff&&Ff.isTypedArray,QD=Uf?GD(Uf):KD,Z0=QD,ZD=Qk,JD=oD,XD=um,e3=G0,t3=hD,s3=Z0,r3=Object.prototype,n3=r3.hasOwnProperty;function a3(t,s){var r=XD(t),n=!r&&JD(t),a=!r&&!n&&e3(t),l=!r&&!n&&!a&&s3(t),o=r||n||a||l,i=o?ZD(t.length,String):[],c=i.length;for(var h in t)(s||n3.call(t,h))&&!(o&&(h=="length"||a&&(h=="offset"||h=="parent")||l&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||t3(h,c)))&&i.push(h);return i}var l3=a3,o3=Object.prototype;function i3(t){var s=t&&t.constructor,r=typeof s=="function"&&s.prototype||o3;return t===r}var c3=i3;function d3(t,s){return function(r){return t(s(r))}}var u3=d3,m3=u3,h3=m3(Object.keys,Object),f3=h3,p3=c3,x3=f3,g3=Object.prototype,y3=g3.hasOwnProperty;function b3(t){if(!p3(t))return x3(t);var s=[];for(var r in Object(t))y3.call(t,r)&&r!="constructor"&&s.push(r);return s}var v3=b3,j3=W0,N3=Q0;function w3(t){return t!=null&&N3(t.length)&&!j3(t)}var E3=w3,S3=l3,_3=v3,C3=E3;function k3(t){return C3(t)?S3(t):_3(t)}var D3=k3,A3=Fk,T3=Kk,L3=D3;function I3(t){return A3(t,L3,T3)}var M3=I3,$f=M3,R3=1,O3=Object.prototype,P3=O3.hasOwnProperty;function F3(t,s,r,n,a,l){var o=r&R3,i=$f(t),c=i.length,h=$f(s),p=h.length;if(c!=p&&!o)return!1;for(var m=c;m--;){var u=i[m];if(!(o?u in s:P3.call(s,u)))return!1}var x=l.get(t),j=l.get(s);if(x&&j)return x==s&&j==t;var v=!0;l.set(t,s),l.set(s,t);for(var N=o;++m<c;){u=i[m];var f=t[u],d=s[u];if(n)var g=o?n(d,f,u,s,t,l):n(f,d,u,t,s,l);if(!(g===void 0?f===d||a(f,d,r,n,l):g)){v=!1;break}N||(N=u=="constructor")}if(v&&!N){var b=t.constructor,E=s.constructor;b!=E&&"constructor"in t&&"constructor"in s&&!(typeof b=="function"&&b instanceof b&&typeof E=="function"&&E instanceof E)&&(v=!1)}return l.delete(t),l.delete(s),v}var U3=F3,$3=Na,H3=Mr,B3=$3(H3,"DataView"),z3=B3,W3=Na,V3=Mr,Y3=W3(V3,"Promise"),q3=Y3,K3=Na,G3=Mr,Q3=K3(G3,"Set"),Z3=Q3,J3=Na,X3=Mr,eA=J3(X3,"WeakMap"),tA=eA,su=z3,ru=dm,nu=q3,au=Z3,lu=tA,J0=Gi,_a=V0,Hf="[object Map]",sA="[object Object]",Bf="[object Promise]",zf="[object Set]",Wf="[object WeakMap]",Vf="[object DataView]",rA=_a(su),nA=_a(ru),aA=_a(nu),lA=_a(au),oA=_a(lu),un=J0;(su&&un(new su(new ArrayBuffer(1)))!=Vf||ru&&un(new ru)!=Hf||nu&&un(nu.resolve())!=Bf||au&&un(new au)!=zf||lu&&un(new lu)!=Wf)&&(un=function(t){var s=J0(t),r=s==sA?t.constructor:void 0,n=r?_a(r):"";if(n)switch(n){case rA:return Vf;case nA:return Hf;case aA:return Bf;case lA:return zf;case oA:return Wf}return s});var iA=un,Qc=$C,cA=q0,dA=Tk,uA=U3,Yf=iA,qf=um,Kf=G0,mA=Z0,hA=1,Gf="[object Arguments]",Qf="[object Array]",jo="[object Object]",fA=Object.prototype,Zf=fA.hasOwnProperty;function pA(t,s,r,n,a,l){var o=qf(t),i=qf(s),c=o?Qf:Yf(t),h=i?Qf:Yf(s);c=c==Gf?jo:c,h=h==Gf?jo:h;var p=c==jo,m=h==jo,u=c==h;if(u&&Kf(t)){if(!Kf(s))return!1;o=!0,p=!1}if(u&&!p)return l||(l=new Qc),o||mA(t)?cA(t,s,r,n,a,l):dA(t,s,c,r,n,a,l);if(!(r&hA)){var x=p&&Zf.call(t,"__wrapped__"),j=m&&Zf.call(s,"__wrapped__");if(x||j){var v=x?t.value():t,N=j?s.value():s;return l||(l=new Qc),a(v,N,r,n,l)}}return u?(l||(l=new Qc),uA(t,s,r,n,a,l)):!1}var xA=pA,gA=xA,Jf=Ji;function X0(t,s,r,n,a){return t===s?!0:t==null||s==null||!Jf(t)&&!Jf(s)?t!==t&&s!==s:gA(t,s,r,n,X0,a)}var yA=X0,bA=yA;function vA(t,s){return bA(t,s)}var jA=vA,ey={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,s){(function(n,a){t.exports=a()})(typeof self<"u"?self:Fs,function(){return function(r){var n={};function a(l){if(n[l])return n[l].exports;var o=n[l]={i:l,l:!1,exports:{}};return r[l].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=r,a.c=n,a.d=function(l,o,i){a.o(l,o)||Object.defineProperty(l,o,{configurable:!1,enumerable:!0,get:i})},a.n=function(l){var o=l&&l.__esModule?function(){return l.default}:function(){return l};return a.d(o,"a",o),o},a.o=function(l,o){return Object.prototype.hasOwnProperty.call(l,o)},a.p="",a(a.s=109)}([function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(17),o=a(18),i=a(19),c=a(45),h=a(46),p=a(47),m=a(48),u=a(49),x=a(12),j=a(32),v=a(33),N=a(31),f=a(1),d={Scope:f.Scope,create:f.create,find:f.find,query:f.query,register:f.register,Container:l.default,Format:o.default,Leaf:i.default,Embed:m.default,Scroll:c.default,Block:p.default,Inline:h.default,Text:u.default,Attributor:{Attribute:x.default,Class:j.default,Style:v.default,Store:N.default}};n.default=d},function(r,n,a){var l=this&&this.__extends||function(){var N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var g in d)d.hasOwnProperty(g)&&(f[g]=d[g])};return function(f,d){N(f,d);function g(){this.constructor=f}f.prototype=d===null?Object.create(d):(g.prototype=d.prototype,new g)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(N){l(f,N);function f(d){var g=this;return d="[Parchment] "+d,g=N.call(this,d)||this,g.message=d,g.name=g.constructor.name,g}return f}(Error);n.ParchmentError=o;var i={},c={},h={},p={};n.DATA_KEY="__blot";var m;(function(N){N[N.TYPE=3]="TYPE",N[N.LEVEL=12]="LEVEL",N[N.ATTRIBUTE=13]="ATTRIBUTE",N[N.BLOT=14]="BLOT",N[N.INLINE=7]="INLINE",N[N.BLOCK=11]="BLOCK",N[N.BLOCK_BLOT=10]="BLOCK_BLOT",N[N.INLINE_BLOT=6]="INLINE_BLOT",N[N.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",N[N.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",N[N.ANY=15]="ANY"})(m=n.Scope||(n.Scope={}));function u(N,f){var d=j(N);if(d==null)throw new o("Unable to create "+N+" blot");var g=d,b=N instanceof Node||N.nodeType===Node.TEXT_NODE?N:g.create(f);return new g(b,f)}n.create=u;function x(N,f){return f===void 0&&(f=!1),N==null?null:N[n.DATA_KEY]!=null?N[n.DATA_KEY].blot:f?x(N.parentNode,f):null}n.find=x;function j(N,f){f===void 0&&(f=m.ANY);var d;if(typeof N=="string")d=p[N]||i[N];else if(N instanceof Text||N.nodeType===Node.TEXT_NODE)d=p.text;else if(typeof N=="number")N&m.LEVEL&m.BLOCK?d=p.block:N&m.LEVEL&m.INLINE&&(d=p.inline);else if(N instanceof HTMLElement){var g=(N.getAttribute("class")||"").split(/\s+/);for(var b in g)if(d=c[g[b]],d)break;d=d||h[N.tagName]}return d==null?null:f&m.LEVEL&d.scope&&f&m.TYPE&d.scope?d:null}n.query=j;function v(){for(var N=[],f=0;f<arguments.length;f++)N[f]=arguments[f];if(N.length>1)return N.map(function(b){return v(b)});var d=N[0];if(typeof d.blotName!="string"&&typeof d.attrName!="string")throw new o("Invalid definition");if(d.blotName==="abstract")throw new o("Cannot register abstract class");if(p[d.blotName||d.attrName]=d,typeof d.keyName=="string")i[d.keyName]=d;else if(d.className!=null&&(c[d.className]=d),d.tagName!=null){Array.isArray(d.tagName)?d.tagName=d.tagName.map(function(b){return b.toUpperCase()}):d.tagName=d.tagName.toUpperCase();var g=Array.isArray(d.tagName)?d.tagName:[d.tagName];g.forEach(function(b){(h[b]==null||d.className==null)&&(h[b]=d)})}return d}n.register=v},function(r,n,a){var l=a(51),o=a(11),i=a(3),c=a(20),h="\0",p=function(m){Array.isArray(m)?this.ops=m:m!=null&&Array.isArray(m.ops)?this.ops=m.ops:this.ops=[]};p.prototype.insert=function(m,u){var x={};return m.length===0?this:(x.insert=m,u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(x.attributes=u),this.push(x))},p.prototype.delete=function(m){return m<=0?this:this.push({delete:m})},p.prototype.retain=function(m,u){if(m<=0)return this;var x={retain:m};return u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(x.attributes=u),this.push(x)},p.prototype.push=function(m){var u=this.ops.length,x=this.ops[u-1];if(m=i(!0,{},m),typeof x=="object"){if(typeof m.delete=="number"&&typeof x.delete=="number")return this.ops[u-1]={delete:x.delete+m.delete},this;if(typeof x.delete=="number"&&m.insert!=null&&(u-=1,x=this.ops[u-1],typeof x!="object"))return this.ops.unshift(m),this;if(o(m.attributes,x.attributes)){if(typeof m.insert=="string"&&typeof x.insert=="string")return this.ops[u-1]={insert:x.insert+m.insert},typeof m.attributes=="object"&&(this.ops[u-1].attributes=m.attributes),this;if(typeof m.retain=="number"&&typeof x.retain=="number")return this.ops[u-1]={retain:x.retain+m.retain},typeof m.attributes=="object"&&(this.ops[u-1].attributes=m.attributes),this}}return u===this.ops.length?this.ops.push(m):this.ops.splice(u,0,m),this},p.prototype.chop=function(){var m=this.ops[this.ops.length-1];return m&&m.retain&&!m.attributes&&this.ops.pop(),this},p.prototype.filter=function(m){return this.ops.filter(m)},p.prototype.forEach=function(m){this.ops.forEach(m)},p.prototype.map=function(m){return this.ops.map(m)},p.prototype.partition=function(m){var u=[],x=[];return this.forEach(function(j){var v=m(j)?u:x;v.push(j)}),[u,x]},p.prototype.reduce=function(m,u){return this.ops.reduce(m,u)},p.prototype.changeLength=function(){return this.reduce(function(m,u){return u.insert?m+c.length(u):u.delete?m-u.delete:m},0)},p.prototype.length=function(){return this.reduce(function(m,u){return m+c.length(u)},0)},p.prototype.slice=function(m,u){m=m||0,typeof u!="number"&&(u=1/0);for(var x=[],j=c.iterator(this.ops),v=0;v<u&&j.hasNext();){var N;v<m?N=j.next(m-v):(N=j.next(u-v),x.push(N)),v+=c.length(N)}return new p(x)},p.prototype.compose=function(m){var u=c.iterator(this.ops),x=c.iterator(m.ops),j=[],v=x.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var N=v.retain;u.peekType()==="insert"&&u.peekLength()<=N;)N-=u.peekLength(),j.push(u.next());v.retain-N>0&&x.next(v.retain-N)}for(var f=new p(j);u.hasNext()||x.hasNext();)if(x.peekType()==="insert")f.push(x.next());else if(u.peekType()==="delete")f.push(u.next());else{var d=Math.min(u.peekLength(),x.peekLength()),g=u.next(d),b=x.next(d);if(typeof b.retain=="number"){var E={};typeof g.retain=="number"?E.retain=d:E.insert=g.insert;var R=c.attributes.compose(g.attributes,b.attributes,typeof g.retain=="number");if(R&&(E.attributes=R),f.push(E),!x.hasNext()&&o(f.ops[f.ops.length-1],E)){var S=new p(u.rest());return f.concat(S).chop()}}else typeof b.delete=="number"&&typeof g.retain=="number"&&f.push(b)}return f.chop()},p.prototype.concat=function(m){var u=new p(this.ops.slice());return m.ops.length>0&&(u.push(m.ops[0]),u.ops=u.ops.concat(m.ops.slice(1))),u},p.prototype.diff=function(m,u){if(this.ops===m.ops)return new p;var x=[this,m].map(function(d){return d.map(function(g){if(g.insert!=null)return typeof g.insert=="string"?g.insert:h;var b=d===m?"on":"with";throw new Error("diff() called "+b+" non-document")}).join("")}),j=new p,v=l(x[0],x[1],u),N=c.iterator(this.ops),f=c.iterator(m.ops);return v.forEach(function(d){for(var g=d[1].length;g>0;){var b=0;switch(d[0]){case l.INSERT:b=Math.min(f.peekLength(),g),j.push(f.next(b));break;case l.DELETE:b=Math.min(g,N.peekLength()),N.next(b),j.delete(b);break;case l.EQUAL:b=Math.min(N.peekLength(),f.peekLength(),g);var E=N.next(b),R=f.next(b);o(E.insert,R.insert)?j.retain(b,c.attributes.diff(E.attributes,R.attributes)):j.push(R).delete(b);break}g-=b}}),j.chop()},p.prototype.eachLine=function(m,u){u=u||`
`;for(var x=c.iterator(this.ops),j=new p,v=0;x.hasNext();){if(x.peekType()!=="insert")return;var N=x.peek(),f=c.length(N)-x.peekLength(),d=typeof N.insert=="string"?N.insert.indexOf(u,f)-f:-1;if(d<0)j.push(x.next());else if(d>0)j.push(x.next(d));else{if(m(j,x.next(1).attributes||{},v)===!1)return;v+=1,j=new p}}j.length()>0&&m(j,{},v)},p.prototype.transform=function(m,u){if(u=!!u,typeof m=="number")return this.transformPosition(m,u);for(var x=c.iterator(this.ops),j=c.iterator(m.ops),v=new p;x.hasNext()||j.hasNext();)if(x.peekType()==="insert"&&(u||j.peekType()!=="insert"))v.retain(c.length(x.next()));else if(j.peekType()==="insert")v.push(j.next());else{var N=Math.min(x.peekLength(),j.peekLength()),f=x.next(N),d=j.next(N);if(f.delete)continue;d.delete?v.push(d):v.retain(N,c.attributes.transform(f.attributes,d.attributes,u))}return v.chop()},p.prototype.transformPosition=function(m,u){u=!!u;for(var x=c.iterator(this.ops),j=0;x.hasNext()&&j<=m;){var v=x.peekLength(),N=x.peekType();if(x.next(),N==="delete"){m-=Math.min(v,m-j);continue}else N==="insert"&&(j<m||!u)&&(m+=v);j+=v}return m},r.exports=p},function(r,n){var a=Object.prototype.hasOwnProperty,l=Object.prototype.toString,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,c=function(x){return typeof Array.isArray=="function"?Array.isArray(x):l.call(x)==="[object Array]"},h=function(x){if(!x||l.call(x)!=="[object Object]")return!1;var j=a.call(x,"constructor"),v=x.constructor&&x.constructor.prototype&&a.call(x.constructor.prototype,"isPrototypeOf");if(x.constructor&&!j&&!v)return!1;var N;for(N in x);return typeof N>"u"||a.call(x,N)},p=function(x,j){o&&j.name==="__proto__"?o(x,j.name,{enumerable:!0,configurable:!0,value:j.newValue,writable:!0}):x[j.name]=j.newValue},m=function(x,j){if(j==="__proto__")if(a.call(x,j)){if(i)return i(x,j).value}else return;return x[j]};r.exports=function u(){var x,j,v,N,f,d,g=arguments[0],b=1,E=arguments.length,R=!1;for(typeof g=="boolean"&&(R=g,g=arguments[1]||{},b=2),(g==null||typeof g!="object"&&typeof g!="function")&&(g={});b<E;++b)if(x=arguments[b],x!=null)for(j in x)v=m(g,j),N=m(x,j),g!==N&&(R&&N&&(h(N)||(f=c(N)))?(f?(f=!1,d=v&&c(v)?v:[]):d=v&&h(v)?v:{},p(g,{name:j,newValue:u(R,d,N)})):typeof N<"u"&&p(g,{name:j,newValue:N}));return g}},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var l=function(){function D(I,O){for(var C=0;C<O.length;C++){var F=O[C];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(I,F.key,F)}}return function(I,O,C){return O&&D(I.prototype,O),C&&D(I,C),I}}(),o=function D(I,O,C){I===null&&(I=Function.prototype);var F=Object.getOwnPropertyDescriptor(I,O);if(F===void 0){var U=Object.getPrototypeOf(I);return U===null?void 0:D(U,O,C)}else{if("value"in F)return F.value;var Y=F.get;return Y===void 0?void 0:Y.call(C)}},i=a(3),c=g(i),h=a(2),p=g(h),m=a(0),u=g(m),x=a(16),j=g(x),v=a(6),N=g(v),f=a(7),d=g(f);function g(D){return D&&D.__esModule?D:{default:D}}function b(D,I){if(!(D instanceof I))throw new TypeError("Cannot call a class as a function")}function E(D,I){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:D}function R(D,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);D.prototype=Object.create(I&&I.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(D,I):D.__proto__=I)}var S=1,k=function(D){R(I,D);function I(){return b(this,I),E(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return l(I,[{key:"attach",value:function(){o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"attach",this).call(this),this.attributes=new u.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new p.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(C,F){var U=u.default.query(C,u.default.Scope.BLOCK_ATTRIBUTE);U!=null&&this.attributes.attribute(U,F)}},{key:"formatAt",value:function(C,F,U,Y){this.format(U,Y)}},{key:"insertAt",value:function(C,F,U){if(typeof F=="string"&&F.endsWith(`
`)){var Y=u.default.create(L.blotName);this.parent.insertBefore(Y,C===0?this:this.next),Y.insertAt(0,F.slice(0,-1))}else o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertAt",this).call(this,C,F,U)}}]),I}(u.default.Embed);k.scope=u.default.Scope.BLOCK_BLOT;var L=function(D){R(I,D);function I(O){b(this,I);var C=E(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,O));return C.cache={},C}return l(I,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(u.default.Leaf).reduce(function(C,F){return F.length()===0?C:C.insert(F.value(),A(F))},new p.default).insert(`
`,A(this))),this.cache.delta}},{key:"deleteAt",value:function(C,F){o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"deleteAt",this).call(this,C,F),this.cache={}}},{key:"formatAt",value:function(C,F,U,Y){F<=0||(u.default.query(U,u.default.Scope.BLOCK)?C+F===this.length()&&this.format(U,Y):o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"formatAt",this).call(this,C,Math.min(F,this.length()-C-1),U,Y),this.cache={})}},{key:"insertAt",value:function(C,F,U){if(U!=null)return o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertAt",this).call(this,C,F,U);if(F.length!==0){var Y=F.split(`
`),G=Y.shift();G.length>0&&(C<this.length()-1||this.children.tail==null?o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertAt",this).call(this,Math.min(C,this.length()-1),G):this.children.tail.insertAt(this.children.tail.length(),G),this.cache={});var V=this;Y.reduce(function(W,_){return V=V.split(W,!0),V.insertAt(0,_),_.length},C+G.length)}}},{key:"insertBefore",value:function(C,F){var U=this.children.head;o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertBefore",this).call(this,C,F),U instanceof j.default&&U.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"length",this).call(this)+S),this.cache.length}},{key:"moveChildren",value:function(C,F){o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"moveChildren",this).call(this,C,F),this.cache={}}},{key:"optimize",value:function(C){o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"optimize",this).call(this,C),this.cache={}}},{key:"path",value:function(C){return o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"path",this).call(this,C,!0)}},{key:"removeChild",value:function(C){o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"removeChild",this).call(this,C),this.cache={}}},{key:"split",value:function(C){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(F&&(C===0||C>=this.length()-S)){var U=this.clone();return C===0?(this.parent.insertBefore(U,this),this):(this.parent.insertBefore(U,this.next),U)}else{var Y=o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"split",this).call(this,C,F);return this.cache={},Y}}}]),I}(u.default.Block);L.blotName="block",L.tagName="P",L.defaultChild="break",L.allowedChildren=[N.default,u.default.Embed,d.default];function A(D){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D==null||(typeof D.formats=="function"&&(I=(0,c.default)(I,D.formats())),D.parent==null||D.parent.blotName=="scroll"||D.parent.statics.scope!==D.statics.scope)?I:A(D.parent,I)}n.bubbleFormats=A,n.BlockEmbed=k,n.default=L},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},o=function(){function V(W,_){var M=[],P=!0,$=!1,B=void 0;try{for(var w=W[Symbol.iterator](),T;!(P=(T=w.next()).done)&&(M.push(T.value),!(_&&M.length===_));P=!0);}catch(H){$=!0,B=H}finally{try{!P&&w.return&&w.return()}finally{if($)throw B}}return M}return function(W,_){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return V(W,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function V(W,_){for(var M=0;M<_.length;M++){var P=_[M];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(W,P.key,P)}}return function(W,_,M){return _&&V(W.prototype,_),M&&V(W,M),W}}();a(50);var c=a(2),h=A(c),p=a(14),m=A(p),u=a(8),x=A(u),j=a(9),v=A(j),N=a(0),f=A(N),d=a(15),g=A(d),b=a(3),E=A(b),R=a(10),S=A(R),k=a(34),L=A(k);function A(V){return V&&V.__esModule?V:{default:V}}function D(V,W,_){return W in V?Object.defineProperty(V,W,{value:_,enumerable:!0,configurable:!0,writable:!0}):V[W]=_,V}function I(V,W){if(!(V instanceof W))throw new TypeError("Cannot call a class as a function")}var O=(0,S.default)("quill"),C=function(){i(V,null,[{key:"debug",value:function(_){_===!0&&(_="log"),S.default.level(_)}},{key:"find",value:function(_){return _.__quill||f.default.find(_)}},{key:"import",value:function(_){return this.imports[_]==null&&O.error("Cannot import "+_+". Are you sure it was registered?"),this.imports[_]}},{key:"register",value:function(_,M){var P=this,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof _!="string"){var B=_.attrName||_.blotName;typeof B=="string"?this.register("formats/"+B,_,M):Object.keys(_).forEach(function(w){P.register(w,_[w],M)})}else this.imports[_]!=null&&!$&&O.warn("Overwriting "+_+" with",M),this.imports[_]=M,(_.startsWith("blots/")||_.startsWith("formats/"))&&M.blotName!=="abstract"?f.default.register(M):_.startsWith("modules")&&typeof M.register=="function"&&M.register()}}]);function V(W){var _=this,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(I(this,V),this.options=F(W,M),this.container=this.options.container,this.container==null)return O.error("Invalid Quill container",W);this.options.debug&&V.debug(this.options.debug);var P=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new x.default,this.scroll=f.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new m.default(this.scroll),this.selection=new g.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(x.default.events.EDITOR_CHANGE,function(B){B===x.default.events.TEXT_CHANGE&&_.root.classList.toggle("ql-blank",_.editor.isBlank())}),this.emitter.on(x.default.events.SCROLL_UPDATE,function(B,w){var T=_.selection.lastRange,H=T&&T.length===0?T.index:void 0;U.call(_,function(){return _.editor.update(null,w,H)},B)});var $=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+P+"<p><br></p></div>");this.setContents($),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return i(V,[{key:"addContainer",value:function(_){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof _=="string"){var P=_;_=document.createElement("div"),_.classList.add(P)}return this.container.insertBefore(_,M),_}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(_,M,P){var $=this,B=Y(_,M,P),w=o(B,4);return _=w[0],M=w[1],P=w[3],U.call(this,function(){return $.editor.deleteText(_,M)},P,_,-1*M)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(_),this.container.classList.toggle("ql-disabled",!_)}},{key:"focus",value:function(){var _=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=_,this.scrollIntoView()}},{key:"format",value:function(_,M){var P=this,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.default.sources.API;return U.call(this,function(){var B=P.getSelection(!0),w=new h.default;if(B==null)return w;if(f.default.query(_,f.default.Scope.BLOCK))w=P.editor.formatLine(B.index,B.length,D({},_,M));else{if(B.length===0)return P.selection.format(_,M),w;w=P.editor.formatText(B.index,B.length,D({},_,M))}return P.setSelection(B,x.default.sources.SILENT),w},$)}},{key:"formatLine",value:function(_,M,P,$,B){var w=this,T=void 0,H=Y(_,M,P,$,B),K=o(H,4);return _=K[0],M=K[1],T=K[2],B=K[3],U.call(this,function(){return w.editor.formatLine(_,M,T)},B,_,0)}},{key:"formatText",value:function(_,M,P,$,B){var w=this,T=void 0,H=Y(_,M,P,$,B),K=o(H,4);return _=K[0],M=K[1],T=K[2],B=K[3],U.call(this,function(){return w.editor.formatText(_,M,T)},B,_,0)}},{key:"getBounds",value:function(_){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,P=void 0;typeof _=="number"?P=this.selection.getBounds(_,M):P=this.selection.getBounds(_.index,_.length);var $=this.container.getBoundingClientRect();return{bottom:P.bottom-$.top,height:P.height,left:P.left-$.left,right:P.right-$.left,top:P.top-$.top,width:P.width}}},{key:"getContents",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-_,P=Y(_,M),$=o(P,2);return _=$[0],M=$[1],this.editor.getContents(_,M)}},{key:"getFormat",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof _=="number"?this.editor.getFormat(_,M):this.editor.getFormat(_.index,_.length)}},{key:"getIndex",value:function(_){return _.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(_){return this.scroll.leaf(_)}},{key:"getLine",value:function(_){return this.scroll.line(_)}},{key:"getLines",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof _!="number"?this.scroll.lines(_.index,_.length):this.scroll.lines(_,M)}},{key:"getModule",value:function(_){return this.theme.modules[_]}},{key:"getSelection",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return _&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-_,P=Y(_,M),$=o(P,2);return _=$[0],M=$[1],this.editor.getText(_,M)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(_,M,P){var $=this,B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:V.sources.API;return U.call(this,function(){return $.editor.insertEmbed(_,M,P)},B,_)}},{key:"insertText",value:function(_,M,P,$,B){var w=this,T=void 0,H=Y(_,0,P,$,B),K=o(H,4);return _=K[0],T=K[2],B=K[3],U.call(this,function(){return w.editor.insertText(_,M,T)},B,_,M.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(_,M,P){this.clipboard.dangerouslyPasteHTML(_,M,P)}},{key:"removeFormat",value:function(_,M,P){var $=this,B=Y(_,M,P),w=o(B,4);return _=w[0],M=w[1],P=w[3],U.call(this,function(){return $.editor.removeFormat(_,M)},P,_)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(_){var M=this,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x.default.sources.API;return U.call(this,function(){_=new h.default(_);var $=M.getLength(),B=M.editor.deleteText(0,$),w=M.editor.applyDelta(_),T=w.ops[w.ops.length-1];T!=null&&typeof T.insert=="string"&&T.insert[T.insert.length-1]===`
`&&(M.editor.deleteText(M.getLength()-1,1),w.delete(1));var H=B.compose(w);return H},P)}},{key:"setSelection",value:function(_,M,P){if(_==null)this.selection.setRange(null,M||V.sources.API);else{var $=Y(_,M,P),B=o($,4);_=B[0],M=B[1],P=B[3],this.selection.setRange(new d.Range(_,M),P),P!==x.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(_){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x.default.sources.API,P=new h.default().insert(_);return this.setContents(P,M)}},{key:"update",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x.default.sources.USER,M=this.scroll.update(_);return this.selection.update(_),M}},{key:"updateContents",value:function(_){var M=this,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x.default.sources.API;return U.call(this,function(){return _=new h.default(_),M.editor.applyDelta(_,P)},P,!0)}}]),V}();C.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},C.events=x.default.events,C.sources=x.default.sources,C.version="1.3.7",C.imports={delta:h.default,parchment:f.default,"core/module":v.default,"core/theme":L.default};function F(V,W){if(W=(0,E.default)(!0,{container:V,modules:{clipboard:!0,keyboard:!0,history:!0}},W),!W.theme||W.theme===C.DEFAULTS.theme)W.theme=L.default;else if(W.theme=C.import("themes/"+W.theme),W.theme==null)throw new Error("Invalid theme "+W.theme+". Did you register it?");var _=(0,E.default)(!0,{},W.theme.DEFAULTS);[_,W].forEach(function($){$.modules=$.modules||{},Object.keys($.modules).forEach(function(B){$.modules[B]===!0&&($.modules[B]={})})});var M=Object.keys(_.modules).concat(Object.keys(W.modules)),P=M.reduce(function($,B){var w=C.import("modules/"+B);return w==null?O.error("Cannot load "+B+" module. Are you sure you registered it?"):$[B]=w.DEFAULTS||{},$},{});return W.modules!=null&&W.modules.toolbar&&W.modules.toolbar.constructor!==Object&&(W.modules.toolbar={container:W.modules.toolbar}),W=(0,E.default)(!0,{},C.DEFAULTS,{modules:P},_,W),["bounds","container","scrollingContainer"].forEach(function($){typeof W[$]=="string"&&(W[$]=document.querySelector(W[$]))}),W.modules=Object.keys(W.modules).reduce(function($,B){return W.modules[B]&&($[B]=W.modules[B]),$},{}),W}function U(V,W,_,M){if(this.options.strict&&!this.isEnabled()&&W===x.default.sources.USER)return new h.default;var P=_==null?null:this.getSelection(),$=this.editor.delta,B=V();if(P!=null&&(_===!0&&(_=P.index),M==null?P=G(P,B,W):M!==0&&(P=G(P,_,M,W)),this.setSelection(P,x.default.sources.SILENT)),B.length()>0){var w,T=[x.default.events.TEXT_CHANGE,B,$,W];if((w=this.emitter).emit.apply(w,[x.default.events.EDITOR_CHANGE].concat(T)),W!==x.default.sources.SILENT){var H;(H=this.emitter).emit.apply(H,T)}}return B}function Y(V,W,_,M,P){var $={};return typeof V.index=="number"&&typeof V.length=="number"?typeof W!="number"?(P=M,M=_,_=W,W=V.length,V=V.index):(W=V.length,V=V.index):typeof W!="number"&&(P=M,M=_,_=W,W=0),(typeof _>"u"?"undefined":l(_))==="object"?($=_,P=M):typeof _=="string"&&(M!=null?$[_]=M:P=_),P=P||x.default.sources.API,[V,W,$,P]}function G(V,W,_,M){if(V==null)return null;var P=void 0,$=void 0;if(W instanceof h.default){var B=[V.index,V.index+V.length].map(function(K){return W.transformPosition(K,M!==x.default.sources.USER)}),w=o(B,2);P=w[0],$=w[1]}else{var T=[V.index,V.index+V.length].map(function(K){return K<W||K===W&&M===x.default.sources.USER?K:_>=0?K+_:Math.max(W,K+_)}),H=o(T,2);P=H[0],$=H[1]}return new d.Range(P,$-P)}n.expandConfig=F,n.overload=Y,n.default=C},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function N(f,d){for(var g=0;g<d.length;g++){var b=d[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(f,d,g){return d&&N(f.prototype,d),g&&N(f,g),f}}(),o=function N(f,d,g){f===null&&(f=Function.prototype);var b=Object.getOwnPropertyDescriptor(f,d);if(b===void 0){var E=Object.getPrototypeOf(f);return E===null?void 0:N(E,d,g)}else{if("value"in b)return b.value;var R=b.get;return R===void 0?void 0:R.call(g)}},i=a(7),c=m(i),h=a(0),p=m(h);function m(N){return N&&N.__esModule?N:{default:N}}function u(N,f){if(!(N instanceof f))throw new TypeError("Cannot call a class as a function")}function x(N,f){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:N}function j(N,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);N.prototype=Object.create(f&&f.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(N,f):N.__proto__=f)}var v=function(N){j(f,N);function f(){return u(this,f),x(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return l(f,[{key:"formatAt",value:function(g,b,E,R){if(f.compare(this.statics.blotName,E)<0&&p.default.query(E,p.default.Scope.BLOT)){var S=this.isolate(g,b);R&&S.wrap(E,R)}else o(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"formatAt",this).call(this,g,b,E,R)}},{key:"optimize",value:function(g){if(o(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"optimize",this).call(this,g),this.parent instanceof f&&f.compare(this.statics.blotName,this.parent.statics.blotName)>0){var b=this.parent.isolate(this.offset(),this.length());this.moveChildren(b),b.wrap(this)}}}],[{key:"compare",value:function(g,b){var E=f.order.indexOf(g),R=f.order.indexOf(b);return E>=0||R>=0?E-R:g===b?0:g<b?-1:1}}]),f}(p.default.Inline);v.allowedChildren=[v,p.default.Embed,c.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=v},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(0),o=i(l);function i(u){return u&&u.__esModule?u:{default:u}}function c(u,x){if(!(u instanceof x))throw new TypeError("Cannot call a class as a function")}function h(u,x){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:u}function p(u,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);u.prototype=Object.create(x&&x.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(u,x):u.__proto__=x)}var m=function(u){p(x,u);function x(){return c(this,x),h(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x}(o.default.Text);n.default=m},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function d(g,b){for(var E=0;E<b.length;E++){var R=b[E];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(g,R.key,R)}}return function(g,b,E){return b&&d(g.prototype,b),E&&d(g,E),g}}(),o=function d(g,b,E){g===null&&(g=Function.prototype);var R=Object.getOwnPropertyDescriptor(g,b);if(R===void 0){var S=Object.getPrototypeOf(g);return S===null?void 0:d(S,b,E)}else{if("value"in R)return R.value;var k=R.get;return k===void 0?void 0:k.call(E)}},i=a(54),c=m(i),h=a(10),p=m(h);function m(d){return d&&d.__esModule?d:{default:d}}function u(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function x(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function j(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var v=(0,p.default)("quill:events"),N=["selectionchange","mousedown","mouseup","click"];N.forEach(function(d){document.addEventListener(d,function(){for(var g=arguments.length,b=Array(g),E=0;E<g;E++)b[E]=arguments[E];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(R){if(R.__quill&&R.__quill.emitter){var S;(S=R.__quill.emitter).handleDOM.apply(S,b)}})})});var f=function(d){j(g,d);function g(){u(this,g);var b=x(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));return b.listeners={},b.on("error",v.error),b}return l(g,[{key:"emit",value:function(){v.log.apply(v,arguments),o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(E){for(var R=arguments.length,S=Array(R>1?R-1:0),k=1;k<R;k++)S[k-1]=arguments[k];(this.listeners[E.type]||[]).forEach(function(L){var A=L.node,D=L.handler;(E.target===A||A.contains(E.target))&&D.apply(void 0,[E].concat(S))})}},{key:"listenDOM",value:function(E,R,S){this.listeners[E]||(this.listeners[E]=[]),this.listeners[E].push({node:R,handler:S})}}]),g}(c.default);f.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},f.sources={API:"api",SILENT:"silent",USER:"user"},n.default=f},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});function l(i,c){if(!(i instanceof c))throw new TypeError("Cannot call a class as a function")}var o=function i(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l(this,i),this.quill=c,this.options=h};o.DEFAULTS={},n.default=o},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=["error","warn","log","info"],o="warn";function i(h){if(l.indexOf(h)<=l.indexOf(o)){for(var p,m=arguments.length,u=Array(m>1?m-1:0),x=1;x<m;x++)u[x-1]=arguments[x];(p=console)[h].apply(p,u)}}function c(h){return l.reduce(function(p,m){return p[m]=i.bind(console,m,h),p},{})}i.level=c.level=function(h){o=h},n.default=c},function(r,n,a){var l=Array.prototype.slice,o=a(52),i=a(53),c=r.exports=function(u,x,j){return j||(j={}),u===x?!0:u instanceof Date&&x instanceof Date?u.getTime()===x.getTime():!u||!x||typeof u!="object"&&typeof x!="object"?j.strict?u===x:u==x:m(u,x,j)};function h(u){return u==null}function p(u){return!(!u||typeof u!="object"||typeof u.length!="number"||typeof u.copy!="function"||typeof u.slice!="function"||u.length>0&&typeof u[0]!="number")}function m(u,x,j){var v,N;if(h(u)||h(x)||u.prototype!==x.prototype)return!1;if(i(u))return i(x)?(u=l.call(u),x=l.call(x),c(u,x,j)):!1;if(p(u)){if(!p(x)||u.length!==x.length)return!1;for(v=0;v<u.length;v++)if(u[v]!==x[v])return!1;return!0}try{var f=o(u),d=o(x)}catch{return!1}if(f.length!=d.length)return!1;for(f.sort(),d.sort(),v=f.length-1;v>=0;v--)if(f[v]!=d[v])return!1;for(v=f.length-1;v>=0;v--)if(N=f[v],!c(u[N],x[N],j))return!1;return typeof u==typeof x}},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(1),o=function(){function i(c,h,p){p===void 0&&(p={}),this.attrName=c,this.keyName=h;var m=l.Scope.TYPE&l.Scope.ATTRIBUTE;p.scope!=null?this.scope=p.scope&l.Scope.LEVEL|m:this.scope=l.Scope.ATTRIBUTE,p.whitelist!=null&&(this.whitelist=p.whitelist)}return i.keys=function(c){return[].map.call(c.attributes,function(h){return h.name})},i.prototype.add=function(c,h){return this.canAdd(c,h)?(c.setAttribute(this.keyName,h),!0):!1},i.prototype.canAdd=function(c,h){var p=l.query(c,l.Scope.BLOT&(this.scope|l.Scope.TYPE));return p==null?!1:this.whitelist==null?!0:typeof h=="string"?this.whitelist.indexOf(h.replace(/["']/g,""))>-1:this.whitelist.indexOf(h)>-1},i.prototype.remove=function(c){c.removeAttribute(this.keyName)},i.prototype.value=function(c){var h=c.getAttribute(this.keyName);return this.canAdd(c,h)&&h?h:""},i}();n.default=o},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var l=function(){function k(L,A){var D=[],I=!0,O=!1,C=void 0;try{for(var F=L[Symbol.iterator](),U;!(I=(U=F.next()).done)&&(D.push(U.value),!(A&&D.length===A));I=!0);}catch(Y){O=!0,C=Y}finally{try{!I&&F.return&&F.return()}finally{if(O)throw C}}return D}return function(L,A){if(Array.isArray(L))return L;if(Symbol.iterator in Object(L))return k(L,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function k(L,A){for(var D=0;D<A.length;D++){var I=A[D];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(L,I.key,I)}}return function(L,A,D){return A&&k(L.prototype,A),D&&k(L,D),L}}(),i=function k(L,A,D){L===null&&(L=Function.prototype);var I=Object.getOwnPropertyDescriptor(L,A);if(I===void 0){var O=Object.getPrototypeOf(L);return O===null?void 0:k(O,A,D)}else{if("value"in I)return I.value;var C=I.get;return C===void 0?void 0:C.call(D)}},c=a(2),h=d(c),p=a(0),m=d(p),u=a(4),x=d(u),j=a(6),v=d(j),N=a(7),f=d(N);function d(k){return k&&k.__esModule?k:{default:k}}function g(k,L){if(!(k instanceof L))throw new TypeError("Cannot call a class as a function")}function b(k,L){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L&&(typeof L=="object"||typeof L=="function")?L:k}function E(k,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof L);k.prototype=Object.create(L&&L.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),L&&(Object.setPrototypeOf?Object.setPrototypeOf(k,L):k.__proto__=L)}var R=function(k){E(L,k);function L(){return g(this,L),b(this,(L.__proto__||Object.getPrototypeOf(L)).apply(this,arguments))}return L}(v.default);R.blotName="code",R.tagName="CODE";var S=function(k){E(L,k);function L(){return g(this,L),b(this,(L.__proto__||Object.getPrototypeOf(L)).apply(this,arguments))}return o(L,[{key:"delta",value:function(){var D=this,I=this.domNode.textContent;return I.endsWith(`
`)&&(I=I.slice(0,-1)),I.split(`
`).reduce(function(O,C){return O.insert(C).insert(`
`,D.formats())},new h.default)}},{key:"format",value:function(D,I){if(!(D===this.statics.blotName&&I)){var O=this.descendant(f.default,this.length()-1),C=l(O,1),F=C[0];F!=null&&F.deleteAt(F.length()-1,1),i(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"format",this).call(this,D,I)}}},{key:"formatAt",value:function(D,I,O,C){if(I!==0&&!(m.default.query(O,m.default.Scope.BLOCK)==null||O===this.statics.blotName&&C===this.statics.formats(this.domNode))){var F=this.newlineIndex(D);if(!(F<0||F>=D+I)){var U=this.newlineIndex(D,!0)+1,Y=F-U+1,G=this.isolate(U,Y),V=G.next;G.format(O,C),V instanceof L&&V.formatAt(0,D-U+I-Y,O,C)}}}},{key:"insertAt",value:function(D,I,O){if(O==null){var C=this.descendant(f.default,D),F=l(C,2),U=F[0],Y=F[1];U.insertAt(Y,I)}}},{key:"length",value:function(){var D=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?D:D+1}},{key:"newlineIndex",value:function(D){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(I)return this.domNode.textContent.slice(0,D).lastIndexOf(`
`);var O=this.domNode.textContent.slice(D).indexOf(`
`);return O>-1?D+O:-1}},{key:"optimize",value:function(D){this.domNode.textContent.endsWith(`
`)||this.appendChild(m.default.create("text",`
`)),i(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"optimize",this).call(this,D);var I=this.next;I!=null&&I.prev===this&&I.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===I.statics.formats(I.domNode)&&(I.optimize(D),I.moveChildren(this),I.remove())}},{key:"replace",value:function(D){i(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"replace",this).call(this,D),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(I){var O=m.default.find(I);O==null?I.parentNode.removeChild(I):O instanceof m.default.Embed?O.remove():O.unwrap()})}}],[{key:"create",value:function(D){var I=i(L.__proto__||Object.getPrototypeOf(L),"create",this).call(this,D);return I.setAttribute("spellcheck",!1),I}},{key:"formats",value:function(){return!0}}]),L}(x.default);S.blotName="code-block",S.tagName="PRE",S.TAB="  ",n.Code=R,n.default=S},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},o=function(){function V(W,_){var M=[],P=!0,$=!1,B=void 0;try{for(var w=W[Symbol.iterator](),T;!(P=(T=w.next()).done)&&(M.push(T.value),!(_&&M.length===_));P=!0);}catch(H){$=!0,B=H}finally{try{!P&&w.return&&w.return()}finally{if($)throw B}}return M}return function(W,_){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return V(W,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function V(W,_){for(var M=0;M<_.length;M++){var P=_[M];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(W,P.key,P)}}return function(W,_,M){return _&&V(W.prototype,_),M&&V(W,M),W}}(),c=a(2),h=I(c),p=a(20),m=I(p),u=a(0),x=I(u),j=a(13),v=I(j),N=a(24),f=I(N),d=a(4),g=I(d),b=a(16),E=I(b),R=a(21),S=I(R),k=a(11),L=I(k),A=a(3),D=I(A);function I(V){return V&&V.__esModule?V:{default:V}}function O(V,W,_){return W in V?Object.defineProperty(V,W,{value:_,enumerable:!0,configurable:!0,writable:!0}):V[W]=_,V}function C(V,W){if(!(V instanceof W))throw new TypeError("Cannot call a class as a function")}var F=/^[ -~]*$/,U=function(){function V(W){C(this,V),this.scroll=W,this.delta=this.getDelta()}return i(V,[{key:"applyDelta",value:function(_){var M=this,P=!1;this.scroll.update();var $=this.scroll.length();return this.scroll.batchStart(),_=G(_),_.reduce(function(B,w){var T=w.retain||w.delete||w.insert.length||1,H=w.attributes||{};if(w.insert!=null){if(typeof w.insert=="string"){var K=w.insert;K.endsWith(`
`)&&P&&(P=!1,K=K.slice(0,-1)),B>=$&&!K.endsWith(`
`)&&(P=!0),M.scroll.insertAt(B,K);var J=M.scroll.line(B),X=o(J,2),pe=X[0],oe=X[1],ce=(0,D.default)({},(0,d.bubbleFormats)(pe));if(pe instanceof g.default){var Ae=pe.descendant(x.default.Leaf,oe),Be=o(Ae,1),Ie=Be[0];ce=(0,D.default)(ce,(0,d.bubbleFormats)(Ie))}H=m.default.attributes.diff(ce,H)||{}}else if(l(w.insert)==="object"){var ye=Object.keys(w.insert)[0];if(ye==null)return B;M.scroll.insertAt(B,ye,w.insert[ye])}$+=T}return Object.keys(H).forEach(function(se){M.scroll.formatAt(B,T,se,H[se])}),B+T},0),_.reduce(function(B,w){return typeof w.delete=="number"?(M.scroll.deleteAt(B,w.delete),B):B+(w.retain||w.insert.length||1)},0),this.scroll.batchEnd(),this.update(_)}},{key:"deleteText",value:function(_,M){return this.scroll.deleteAt(_,M),this.update(new h.default().retain(_).delete(M))}},{key:"formatLine",value:function(_,M){var P=this,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys($).forEach(function(B){if(!(P.scroll.whitelist!=null&&!P.scroll.whitelist[B])){var w=P.scroll.lines(_,Math.max(M,1)),T=M;w.forEach(function(H){var K=H.length();if(!(H instanceof v.default))H.format(B,$[B]);else{var J=_-H.offset(P.scroll),X=H.newlineIndex(J+T)-J+1;H.formatAt(J,X,B,$[B])}T-=K})}}),this.scroll.optimize(),this.update(new h.default().retain(_).retain(M,(0,S.default)($)))}},{key:"formatText",value:function(_,M){var P=this,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys($).forEach(function(B){P.scroll.formatAt(_,M,B,$[B])}),this.update(new h.default().retain(_).retain(M,(0,S.default)($)))}},{key:"getContents",value:function(_,M){return this.delta.slice(_,_+M)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(_,M){return _.concat(M.delta())},new h.default)}},{key:"getFormat",value:function(_){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,P=[],$=[];M===0?this.scroll.path(_).forEach(function(w){var T=o(w,1),H=T[0];H instanceof g.default?P.push(H):H instanceof x.default.Leaf&&$.push(H)}):(P=this.scroll.lines(_,M),$=this.scroll.descendants(x.default.Leaf,_,M));var B=[P,$].map(function(w){if(w.length===0)return{};for(var T=(0,d.bubbleFormats)(w.shift());Object.keys(T).length>0;){var H=w.shift();if(H==null)return T;T=Y((0,d.bubbleFormats)(H),T)}return T});return D.default.apply(D.default,B)}},{key:"getText",value:function(_,M){return this.getContents(_,M).filter(function(P){return typeof P.insert=="string"}).map(function(P){return P.insert}).join("")}},{key:"insertEmbed",value:function(_,M,P){return this.scroll.insertAt(_,M,P),this.update(new h.default().retain(_).insert(O({},M,P)))}},{key:"insertText",value:function(_,M){var P=this,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return M=M.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(_,M),Object.keys($).forEach(function(B){P.scroll.formatAt(_,M.length,B,$[B])}),this.update(new h.default().retain(_).insert(M,(0,S.default)($)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var _=this.scroll.children.head;return _.statics.blotName!==g.default.blotName||_.children.length>1?!1:_.children.head instanceof E.default}},{key:"removeFormat",value:function(_,M){var P=this.getText(_,M),$=this.scroll.line(_+M),B=o($,2),w=B[0],T=B[1],H=0,K=new h.default;w!=null&&(w instanceof v.default?H=w.newlineIndex(T)-T+1:H=w.length()-T,K=w.delta().slice(T,T+H-1).insert(`
`));var J=this.getContents(_,M+H),X=J.diff(new h.default().insert(P).concat(K)),pe=new h.default().retain(_).concat(X);return this.applyDelta(pe)}},{key:"update",value:function(_){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,$=this.delta;if(M.length===1&&M[0].type==="characterData"&&M[0].target.data.match(F)&&x.default.find(M[0].target)){var B=x.default.find(M[0].target),w=(0,d.bubbleFormats)(B),T=B.offset(this.scroll),H=M[0].oldValue.replace(f.default.CONTENTS,""),K=new h.default().insert(H),J=new h.default().insert(B.value()),X=new h.default().retain(T).concat(K.diff(J,P));_=X.reduce(function(pe,oe){return oe.insert?pe.insert(oe.insert,w):pe.push(oe)},new h.default),this.delta=$.compose(_)}else this.delta=this.getDelta(),(!_||!(0,L.default)($.compose(_),this.delta))&&(_=$.diff(this.delta,P));return _}}]),V}();function Y(V,W){return Object.keys(W).reduce(function(_,M){return V[M]==null||(W[M]===V[M]?_[M]=W[M]:Array.isArray(W[M])?W[M].indexOf(V[M])<0&&(_[M]=W[M].concat([V[M]])):_[M]=[W[M],V[M]]),_},{})}function G(V){return V.reduce(function(W,_){if(_.insert===1){var M=(0,S.default)(_.attributes);return delete M.image,W.insert({image:_.attributes.image},M)}if(_.attributes!=null&&(_.attributes.list===!0||_.attributes.bullet===!0)&&(_=(0,S.default)(_),_.attributes.list?_.attributes.list="ordered":(_.attributes.list="bullet",delete _.attributes.bullet)),typeof _.insert=="string"){var P=_.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return W.insert(P,_.attributes)}return W.push(_)},new h.default)}n.default=U},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var l=function(){function k(L,A){var D=[],I=!0,O=!1,C=void 0;try{for(var F=L[Symbol.iterator](),U;!(I=(U=F.next()).done)&&(D.push(U.value),!(A&&D.length===A));I=!0);}catch(Y){O=!0,C=Y}finally{try{!I&&F.return&&F.return()}finally{if(O)throw C}}return D}return function(L,A){if(Array.isArray(L))return L;if(Symbol.iterator in Object(L))return k(L,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function k(L,A){for(var D=0;D<A.length;D++){var I=A[D];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(L,I.key,I)}}return function(L,A,D){return A&&k(L.prototype,A),D&&k(L,D),L}}(),i=a(0),c=f(i),h=a(21),p=f(h),m=a(11),u=f(m),x=a(8),j=f(x),v=a(10),N=f(v);function f(k){return k&&k.__esModule?k:{default:k}}function d(k){if(Array.isArray(k)){for(var L=0,A=Array(k.length);L<k.length;L++)A[L]=k[L];return A}else return Array.from(k)}function g(k,L){if(!(k instanceof L))throw new TypeError("Cannot call a class as a function")}var b=(0,N.default)("quill:selection"),E=function k(L){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;g(this,k),this.index=L,this.length=A},R=function(){function k(L,A){var D=this;g(this,k),this.emitter=A,this.scroll=L,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new E(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){D.mouseDown||setTimeout(D.update.bind(D,j.default.sources.USER),1)}),this.emitter.on(j.default.events.EDITOR_CHANGE,function(I,O){I===j.default.events.TEXT_CHANGE&&O.length()>0&&D.update(j.default.sources.SILENT)}),this.emitter.on(j.default.events.SCROLL_BEFORE_UPDATE,function(){if(D.hasFocus()){var I=D.getNativeRange();I!=null&&I.start.node!==D.cursor.textNode&&D.emitter.once(j.default.events.SCROLL_UPDATE,function(){try{D.setNativeRange(I.start.node,I.start.offset,I.end.node,I.end.offset)}catch{}})}}),this.emitter.on(j.default.events.SCROLL_OPTIMIZE,function(I,O){if(O.range){var C=O.range,F=C.startNode,U=C.startOffset,Y=C.endNode,G=C.endOffset;D.setNativeRange(F,U,Y,G)}}),this.update(j.default.sources.SILENT)}return o(k,[{key:"handleComposition",value:function(){var A=this;this.root.addEventListener("compositionstart",function(){A.composing=!0}),this.root.addEventListener("compositionend",function(){if(A.composing=!1,A.cursor.parent){var D=A.cursor.restore();if(!D)return;setTimeout(function(){A.setNativeRange(D.startNode,D.startOffset,D.endNode,D.endOffset)},1)}})}},{key:"handleDragging",value:function(){var A=this;this.emitter.listenDOM("mousedown",document.body,function(){A.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){A.mouseDown=!1,A.update(j.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(A,D){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[A])){this.scroll.update();var I=this.getNativeRange();if(!(I==null||!I.native.collapsed||c.default.query(A,c.default.Scope.BLOCK))){if(I.start.node!==this.cursor.textNode){var O=c.default.find(I.start.node,!1);if(O==null)return;if(O instanceof c.default.Leaf){var C=O.split(I.start.offset);O.parent.insertBefore(this.cursor,C)}else O.insertBefore(this.cursor,I.start.node);this.cursor.attach()}this.cursor.format(A,D),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(A){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=this.scroll.length();A=Math.min(A,I-1),D=Math.min(A+D,I-1)-A;var O=void 0,C=this.scroll.leaf(A),F=l(C,2),U=F[0],Y=F[1];if(U==null)return null;var G=U.position(Y,!0),V=l(G,2);O=V[0],Y=V[1];var W=document.createRange();if(D>0){W.setStart(O,Y);var _=this.scroll.leaf(A+D),M=l(_,2);if(U=M[0],Y=M[1],U==null)return null;var P=U.position(Y,!0),$=l(P,2);return O=$[0],Y=$[1],W.setEnd(O,Y),W.getBoundingClientRect()}else{var B="left",w=void 0;return O instanceof Text?(Y<O.data.length?(W.setStart(O,Y),W.setEnd(O,Y+1)):(W.setStart(O,Y-1),W.setEnd(O,Y),B="right"),w=W.getBoundingClientRect()):(w=U.domNode.getBoundingClientRect(),Y>0&&(B="right")),{bottom:w.top+w.height,height:w.height,left:w[B],right:w[B],top:w.top,width:0}}}},{key:"getNativeRange",value:function(){var A=document.getSelection();if(A==null||A.rangeCount<=0)return null;var D=A.getRangeAt(0);if(D==null)return null;var I=this.normalizeNative(D);return b.info("getNativeRange",I),I}},{key:"getRange",value:function(){var A=this.getNativeRange();if(A==null)return[null,null];var D=this.normalizedToRange(A);return[D,A]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(A){var D=this,I=[[A.start.node,A.start.offset]];A.native.collapsed||I.push([A.end.node,A.end.offset]);var O=I.map(function(U){var Y=l(U,2),G=Y[0],V=Y[1],W=c.default.find(G,!0),_=W.offset(D.scroll);return V===0?_:W instanceof c.default.Container?_+W.length():_+W.index(G,V)}),C=Math.min(Math.max.apply(Math,d(O)),this.scroll.length()-1),F=Math.min.apply(Math,[C].concat(d(O)));return new E(F,C-F)}},{key:"normalizeNative",value:function(A){if(!S(this.root,A.startContainer)||!A.collapsed&&!S(this.root,A.endContainer))return null;var D={start:{node:A.startContainer,offset:A.startOffset},end:{node:A.endContainer,offset:A.endOffset},native:A};return[D.start,D.end].forEach(function(I){for(var O=I.node,C=I.offset;!(O instanceof Text)&&O.childNodes.length>0;)if(O.childNodes.length>C)O=O.childNodes[C],C=0;else if(O.childNodes.length===C)O=O.lastChild,C=O instanceof Text?O.data.length:O.childNodes.length+1;else break;I.node=O,I.offset=C}),D}},{key:"rangeToNative",value:function(A){var D=this,I=A.collapsed?[A.index]:[A.index,A.index+A.length],O=[],C=this.scroll.length();return I.forEach(function(F,U){F=Math.min(C-1,F);var Y=void 0,G=D.scroll.leaf(F),V=l(G,2),W=V[0],_=V[1],M=W.position(_,U!==0),P=l(M,2);Y=P[0],_=P[1],O.push(Y,_)}),O.length<2&&(O=O.concat(O)),O}},{key:"scrollIntoView",value:function(A){var D=this.lastRange;if(D!=null){var I=this.getBounds(D.index,D.length);if(I!=null){var O=this.scroll.length()-1,C=this.scroll.line(Math.min(D.index,O)),F=l(C,1),U=F[0],Y=U;if(D.length>0){var G=this.scroll.line(Math.min(D.index+D.length,O)),V=l(G,1);Y=V[0]}if(!(U==null||Y==null)){var W=A.getBoundingClientRect();I.top<W.top?A.scrollTop-=W.top-I.top:I.bottom>W.bottom&&(A.scrollTop+=I.bottom-W.bottom)}}}}},{key:"setNativeRange",value:function(A,D){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:A,O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:D,C=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(b.info("setNativeRange",A,D,I,O),!(A!=null&&(this.root.parentNode==null||A.parentNode==null||I.parentNode==null))){var F=document.getSelection();if(F!=null)if(A!=null){this.hasFocus()||this.root.focus();var U=(this.getNativeRange()||{}).native;if(U==null||C||A!==U.startContainer||D!==U.startOffset||I!==U.endContainer||O!==U.endOffset){A.tagName=="BR"&&(D=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode),I.tagName=="BR"&&(O=[].indexOf.call(I.parentNode.childNodes,I),I=I.parentNode);var Y=document.createRange();Y.setStart(A,D),Y.setEnd(I,O),F.removeAllRanges(),F.addRange(Y)}}else F.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(A){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:j.default.sources.API;if(typeof D=="string"&&(I=D,D=!1),b.info("setRange",A),A!=null){var O=this.rangeToNative(A);this.setNativeRange.apply(this,d(O).concat([D]))}else this.setNativeRange(null);this.update(I)}},{key:"update",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:j.default.sources.USER,D=this.lastRange,I=this.getRange(),O=l(I,2),C=O[0],F=O[1];if(this.lastRange=C,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,u.default)(D,this.lastRange)){var U;!this.composing&&F!=null&&F.native.collapsed&&F.start.node!==this.cursor.textNode&&this.cursor.restore();var Y=[j.default.events.SELECTION_CHANGE,(0,p.default)(this.lastRange),(0,p.default)(D),A];if((U=this.emitter).emit.apply(U,[j.default.events.EDITOR_CHANGE].concat(Y)),A!==j.default.sources.SILENT){var G;(G=this.emitter).emit.apply(G,Y)}}}}]),k}();function S(k,L){try{L.parentNode}catch{return!1}return L instanceof Text&&(L=L.parentNode),k.contains(L)}n.Range=E,n.default=R},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function j(v,N){for(var f=0;f<N.length;f++){var d=N[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(v,d.key,d)}}return function(v,N,f){return N&&j(v.prototype,N),f&&j(v,f),v}}(),o=function j(v,N,f){v===null&&(v=Function.prototype);var d=Object.getOwnPropertyDescriptor(v,N);if(d===void 0){var g=Object.getPrototypeOf(v);return g===null?void 0:j(g,N,f)}else{if("value"in d)return d.value;var b=d.get;return b===void 0?void 0:b.call(f)}},i=a(0),c=h(i);function h(j){return j&&j.__esModule?j:{default:j}}function p(j,v){if(!(j instanceof v))throw new TypeError("Cannot call a class as a function")}function m(j,v){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:j}function u(j,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);j.prototype=Object.create(v&&v.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(j,v):j.__proto__=v)}var x=function(j){u(v,j);function v(){return p(this,v),m(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return l(v,[{key:"insertInto",value:function(f,d){f.children.length===0?o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,f,d):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v}(c.default.Embed);x.blotName="break",x.tagName="BR",n.default=x},function(r,n,a){var l=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,x){u.__proto__=x}||function(u,x){for(var j in x)x.hasOwnProperty(j)&&(u[j]=x[j])};return function(u,x){m(u,x);function j(){this.constructor=u}u.prototype=x===null?Object.create(x):(j.prototype=x.prototype,new j)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(44),i=a(30),c=a(1),h=function(m){l(u,m);function u(x){var j=m.call(this,x)||this;return j.build(),j}return u.prototype.appendChild=function(x){this.insertBefore(x)},u.prototype.attach=function(){m.prototype.attach.call(this),this.children.forEach(function(x){x.attach()})},u.prototype.build=function(){var x=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(j){try{var v=p(j);x.insertBefore(v,x.children.head||void 0)}catch(N){if(N instanceof c.ParchmentError)return;throw N}})},u.prototype.deleteAt=function(x,j){if(x===0&&j===this.length())return this.remove();this.children.forEachAt(x,j,function(v,N,f){v.deleteAt(N,f)})},u.prototype.descendant=function(x,j){var v=this.children.find(j),N=v[0],f=v[1];return x.blotName==null&&x(N)||x.blotName!=null&&N instanceof x?[N,f]:N instanceof u?N.descendant(x,f):[null,-1]},u.prototype.descendants=function(x,j,v){j===void 0&&(j=0),v===void 0&&(v=Number.MAX_VALUE);var N=[],f=v;return this.children.forEachAt(j,v,function(d,g,b){(x.blotName==null&&x(d)||x.blotName!=null&&d instanceof x)&&N.push(d),d instanceof u&&(N=N.concat(d.descendants(x,g,f))),f-=b}),N},u.prototype.detach=function(){this.children.forEach(function(x){x.detach()}),m.prototype.detach.call(this)},u.prototype.formatAt=function(x,j,v,N){this.children.forEachAt(x,j,function(f,d,g){f.formatAt(d,g,v,N)})},u.prototype.insertAt=function(x,j,v){var N=this.children.find(x),f=N[0],d=N[1];if(f)f.insertAt(d,j,v);else{var g=v==null?c.create("text",j):c.create(j,v);this.appendChild(g)}},u.prototype.insertBefore=function(x,j){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return x instanceof v}))throw new c.ParchmentError("Cannot insert "+x.statics.blotName+" into "+this.statics.blotName);x.insertInto(this,j)},u.prototype.length=function(){return this.children.reduce(function(x,j){return x+j.length()},0)},u.prototype.moveChildren=function(x,j){this.children.forEach(function(v){x.insertBefore(v,j)})},u.prototype.optimize=function(x){if(m.prototype.optimize.call(this,x),this.children.length===0)if(this.statics.defaultChild!=null){var j=c.create(this.statics.defaultChild);this.appendChild(j),j.optimize(x)}else this.remove()},u.prototype.path=function(x,j){j===void 0&&(j=!1);var v=this.children.find(x,j),N=v[0],f=v[1],d=[[this,x]];return N instanceof u?d.concat(N.path(f,j)):(N!=null&&d.push([N,f]),d)},u.prototype.removeChild=function(x){this.children.remove(x)},u.prototype.replace=function(x){x instanceof u&&x.moveChildren(this),m.prototype.replace.call(this,x)},u.prototype.split=function(x,j){if(j===void 0&&(j=!1),!j){if(x===0)return this;if(x===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(x,this.length(),function(N,f,d){N=N.split(f,j),v.appendChild(N)}),v},u.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},u.prototype.update=function(x,j){var v=this,N=[],f=[];x.forEach(function(d){d.target===v.domNode&&d.type==="childList"&&(N.push.apply(N,d.addedNodes),f.push.apply(f,d.removedNodes))}),f.forEach(function(d){if(!(d.parentNode!=null&&d.tagName!=="IFRAME"&&document.body.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var g=c.find(d);g!=null&&(g.domNode.parentNode==null||g.domNode.parentNode===v.domNode)&&g.detach()}}),N.filter(function(d){return d.parentNode==v.domNode}).sort(function(d,g){return d===g?0:d.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(d){var g=null;d.nextSibling!=null&&(g=c.find(d.nextSibling));var b=p(d);(b.next!=g||b.next==null)&&(b.parent!=null&&b.parent.removeChild(v),v.insertBefore(b,g||void 0))})},u}(i.default);function p(m){var u=c.find(m);if(u==null)try{u=c.create(m)}catch{u=c.create(c.Scope.INLINE),[].slice.call(m.childNodes).forEach(function(j){u.domNode.appendChild(j)}),m.parentNode&&m.parentNode.replaceChild(u.domNode,m),u.attach()}return u}n.default=h},function(r,n,a){var l=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,x){u.__proto__=x}||function(u,x){for(var j in x)x.hasOwnProperty(j)&&(u[j]=x[j])};return function(u,x){m(u,x);function j(){this.constructor=u}u.prototype=x===null?Object.create(x):(j.prototype=x.prototype,new j)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(12),i=a(31),c=a(17),h=a(1),p=function(m){l(u,m);function u(x){var j=m.call(this,x)||this;return j.attributes=new i.default(j.domNode),j}return u.formats=function(x){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return x.tagName.toLowerCase()},u.prototype.format=function(x,j){var v=h.query(x);v instanceof o.default?this.attributes.attribute(v,j):j&&v!=null&&(x!==this.statics.blotName||this.formats()[x]!==j)&&this.replaceWith(x,j)},u.prototype.formats=function(){var x=this.attributes.values(),j=this.statics.formats(this.domNode);return j!=null&&(x[this.statics.blotName]=j),x},u.prototype.replaceWith=function(x,j){var v=m.prototype.replaceWith.call(this,x,j);return this.attributes.copy(v),v},u.prototype.update=function(x,j){var v=this;m.prototype.update.call(this,x,j),x.some(function(N){return N.target===v.domNode&&N.type==="attributes"})&&this.attributes.build()},u.prototype.wrap=function(x,j){var v=m.prototype.wrap.call(this,x,j);return v instanceof u&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},u}(c.default);n.default=p},function(r,n,a){var l=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var u in m)m.hasOwnProperty(u)&&(p[u]=m[u])};return function(p,m){h(p,m);function u(){this.constructor=p}p.prototype=m===null?Object.create(m):(u.prototype=m.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(30),i=a(1),c=function(h){l(p,h);function p(){return h!==null&&h.apply(this,arguments)||this}return p.value=function(m){return!0},p.prototype.index=function(m,u){return this.domNode===m||this.domNode.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(u,1):-1},p.prototype.position=function(m,u){var x=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return m>0&&(x+=1),[this.parent.domNode,x]},p.prototype.value=function(){var m;return m={},m[this.statics.blotName]=this.statics.value(this.domNode)||!0,m},p.scope=i.Scope.INLINE_BLOT,p}(o.default);n.default=c},function(r,n,a){var l=a(11),o=a(3),i={attributes:{compose:function(h,p,m){typeof h!="object"&&(h={}),typeof p!="object"&&(p={});var u=o(!0,{},p);m||(u=Object.keys(u).reduce(function(j,v){return u[v]!=null&&(j[v]=u[v]),j},{}));for(var x in h)h[x]!==void 0&&p[x]===void 0&&(u[x]=h[x]);return Object.keys(u).length>0?u:void 0},diff:function(h,p){typeof h!="object"&&(h={}),typeof p!="object"&&(p={});var m=Object.keys(h).concat(Object.keys(p)).reduce(function(u,x){return l(h[x],p[x])||(u[x]=p[x]===void 0?null:p[x]),u},{});return Object.keys(m).length>0?m:void 0},transform:function(h,p,m){if(typeof h!="object")return p;if(typeof p=="object"){if(!m)return p;var u=Object.keys(p).reduce(function(x,j){return h[j]===void 0&&(x[j]=p[j]),x},{});return Object.keys(u).length>0?u:void 0}}},iterator:function(h){return new c(h)},length:function(h){return typeof h.delete=="number"?h.delete:typeof h.retain=="number"?h.retain:typeof h.insert=="string"?h.insert.length:1}};function c(h){this.ops=h,this.index=0,this.offset=0}c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(h){h||(h=1/0);var p=this.ops[this.index];if(p){var m=this.offset,u=i.length(p);if(h>=u-m?(h=u-m,this.index+=1,this.offset=0):this.offset+=h,typeof p.delete=="number")return{delete:h};var x={};return p.attributes&&(x.attributes=p.attributes),typeof p.retain=="number"?x.retain=h:typeof p.insert=="string"?x.insert=p.insert.substr(m,h):x.insert=p.insert,x}else return{retain:1/0}},c.prototype.peek=function(){return this.ops[this.index]},c.prototype.peekLength=function(){return this.ops[this.index]?i.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},c.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var h=this.offset,p=this.index,m=this.next(),u=this.ops.slice(this.index);return this.offset=h,this.index=p,[m].concat(u)}else return[]},r.exports=i},function(r,n){var a=function(){function l(v,N){return N!=null&&v instanceof N}var o;try{o=Map}catch{o=function(){}}var i;try{i=Set}catch{i=function(){}}var c;try{c=Promise}catch{c=function(){}}function h(v,N,f,d,g){typeof N=="object"&&(f=N.depth,d=N.prototype,g=N.includeNonEnumerable,N=N.circular);var b=[],E=[],R=typeof Buffer<"u";typeof N>"u"&&(N=!0),typeof f>"u"&&(f=1/0);function S(k,L){if(k===null)return null;if(L===0)return k;var A,D;if(typeof k!="object")return k;if(l(k,o))A=new o;else if(l(k,i))A=new i;else if(l(k,c))A=new c(function(W,_){k.then(function(M){W(S(M,L-1))},function(M){_(S(M,L-1))})});else if(h.__isArray(k))A=[];else if(h.__isRegExp(k))A=new RegExp(k.source,j(k)),k.lastIndex&&(A.lastIndex=k.lastIndex);else if(h.__isDate(k))A=new Date(k.getTime());else{if(R&&Buffer.isBuffer(k))return Buffer.allocUnsafe?A=Buffer.allocUnsafe(k.length):A=new Buffer(k.length),k.copy(A),A;l(k,Error)?A=Object.create(k):typeof d>"u"?(D=Object.getPrototypeOf(k),A=Object.create(D)):(A=Object.create(d),D=d)}if(N){var I=b.indexOf(k);if(I!=-1)return E[I];b.push(k),E.push(A)}l(k,o)&&k.forEach(function(W,_){var M=S(_,L-1),P=S(W,L-1);A.set(M,P)}),l(k,i)&&k.forEach(function(W){var _=S(W,L-1);A.add(_)});for(var O in k){var C;D&&(C=Object.getOwnPropertyDescriptor(D,O)),!(C&&C.set==null)&&(A[O]=S(k[O],L-1))}if(Object.getOwnPropertySymbols)for(var F=Object.getOwnPropertySymbols(k),O=0;O<F.length;O++){var U=F[O],Y=Object.getOwnPropertyDescriptor(k,U);Y&&!Y.enumerable&&!g||(A[U]=S(k[U],L-1),Y.enumerable||Object.defineProperty(A,U,{enumerable:!1}))}if(g)for(var G=Object.getOwnPropertyNames(k),O=0;O<G.length;O++){var V=G[O],Y=Object.getOwnPropertyDescriptor(k,V);Y&&Y.enumerable||(A[V]=S(k[V],L-1),Object.defineProperty(A,V,{enumerable:!1}))}return A}return S(v,f)}h.clonePrototype=function(N){if(N===null)return null;var f=function(){};return f.prototype=N,new f};function p(v){return Object.prototype.toString.call(v)}h.__objToStr=p;function m(v){return typeof v=="object"&&p(v)==="[object Date]"}h.__isDate=m;function u(v){return typeof v=="object"&&p(v)==="[object Array]"}h.__isArray=u;function x(v){return typeof v=="object"&&p(v)==="[object RegExp]"}h.__isRegExp=x;function j(v){var N="";return v.global&&(N+="g"),v.ignoreCase&&(N+="i"),v.multiline&&(N+="m"),N}return h.__getRegExpFlags=j,h}();typeof r=="object"&&r.exports&&(r.exports=a)},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function A(D,I){var O=[],C=!0,F=!1,U=void 0;try{for(var Y=D[Symbol.iterator](),G;!(C=(G=Y.next()).done)&&(O.push(G.value),!(I&&O.length===I));C=!0);}catch(V){F=!0,U=V}finally{try{!C&&Y.return&&Y.return()}finally{if(F)throw U}}return O}return function(D,I){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return A(D,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function A(D,I){for(var O=0;O<I.length;O++){var C=I[O];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(D,C.key,C)}}return function(D,I,O){return I&&A(D.prototype,I),O&&A(D,O),D}}(),i=function A(D,I,O){D===null&&(D=Function.prototype);var C=Object.getOwnPropertyDescriptor(D,I);if(C===void 0){var F=Object.getPrototypeOf(D);return F===null?void 0:A(F,I,O)}else{if("value"in C)return C.value;var U=C.get;return U===void 0?void 0:U.call(O)}},c=a(0),h=b(c),p=a(8),m=b(p),u=a(4),x=b(u),j=a(16),v=b(j),N=a(13),f=b(N),d=a(25),g=b(d);function b(A){return A&&A.__esModule?A:{default:A}}function E(A,D){if(!(A instanceof D))throw new TypeError("Cannot call a class as a function")}function R(A,D){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:A}function S(A,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);A.prototype=Object.create(D&&D.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(A,D):A.__proto__=D)}function k(A){return A instanceof x.default||A instanceof u.BlockEmbed}var L=function(A){S(D,A);function D(I,O){E(this,D);var C=R(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,I));return C.emitter=O.emitter,Array.isArray(O.whitelist)&&(C.whitelist=O.whitelist.reduce(function(F,U){return F[U]=!0,F},{})),C.domNode.addEventListener("DOMNodeInserted",function(){}),C.optimize(),C.enable(),C}return o(D,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(O,C){var F=this.line(O),U=l(F,2),Y=U[0],G=U[1],V=this.line(O+C),W=l(V,1),_=W[0];if(i(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"deleteAt",this).call(this,O,C),_!=null&&Y!==_&&G>0){if(Y instanceof u.BlockEmbed||_ instanceof u.BlockEmbed){this.optimize();return}if(Y instanceof f.default){var M=Y.newlineIndex(Y.length(),!0);if(M>-1&&(Y=Y.split(M+1),Y===_)){this.optimize();return}}else if(_ instanceof f.default){var P=_.newlineIndex(0);P>-1&&_.split(P+1)}var $=_.children.head instanceof v.default?null:_.children.head;Y.moveChildren(_,$),Y.remove()}this.optimize()}},{key:"enable",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",O)}},{key:"formatAt",value:function(O,C,F,U){this.whitelist!=null&&!this.whitelist[F]||(i(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"formatAt",this).call(this,O,C,F,U),this.optimize())}},{key:"insertAt",value:function(O,C,F){if(!(F!=null&&this.whitelist!=null&&!this.whitelist[C])){if(O>=this.length())if(F==null||h.default.query(C,h.default.Scope.BLOCK)==null){var U=h.default.create(this.statics.defaultChild);this.appendChild(U),F==null&&C.endsWith(`
`)&&(C=C.slice(0,-1)),U.insertAt(0,C,F)}else{var Y=h.default.create(C,F);this.appendChild(Y)}else i(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertAt",this).call(this,O,C,F);this.optimize()}}},{key:"insertBefore",value:function(O,C){if(O.statics.scope===h.default.Scope.INLINE_BLOT){var F=h.default.create(this.statics.defaultChild);F.appendChild(O),O=F}i(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertBefore",this).call(this,O,C)}},{key:"leaf",value:function(O){return this.path(O).pop()||[null,-1]}},{key:"line",value:function(O){return O===this.length()?this.line(O-1):this.descendant(k,O)}},{key:"lines",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,F=function U(Y,G,V){var W=[],_=V;return Y.children.forEachAt(G,V,function(M,P,$){k(M)?W.push(M):M instanceof h.default.Container&&(W=W.concat(U(M,P,_))),_-=$}),W};return F(this,O,C)}},{key:"optimize",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(i(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"optimize",this).call(this,O,C),O.length>0&&this.emitter.emit(m.default.events.SCROLL_OPTIMIZE,O,C))}},{key:"path",value:function(O){return i(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"path",this).call(this,O).slice(1)}},{key:"update",value:function(O){if(this.batch!==!0){var C=m.default.sources.USER;typeof O=="string"&&(C=O),Array.isArray(O)||(O=this.observer.takeRecords()),O.length>0&&this.emitter.emit(m.default.events.SCROLL_BEFORE_UPDATE,C,O),i(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"update",this).call(this,O.concat([])),O.length>0&&this.emitter.emit(m.default.events.SCROLL_UPDATE,C,O)}}}]),D}(h.default.Scroll);L.blotName="scroll",L.className="ql-editor",L.tagName="DIV",L.defaultChild="block",L.allowedChildren=[x.default,u.BlockEmbed,g.default],n.default=L},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},o=function(){function w(T,H){var K=[],J=!0,X=!1,pe=void 0;try{for(var oe=T[Symbol.iterator](),ce;!(J=(ce=oe.next()).done)&&(K.push(ce.value),!(H&&K.length===H));J=!0);}catch(Ae){X=!0,pe=Ae}finally{try{!J&&oe.return&&oe.return()}finally{if(X)throw pe}}return K}return function(T,H){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return w(T,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function w(T,H){for(var K=0;K<H.length;K++){var J=H[K];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(T,J.key,J)}}return function(T,H,K){return H&&w(T.prototype,H),K&&w(T,K),T}}(),c=a(21),h=A(c),p=a(11),m=A(p),u=a(3),x=A(u),j=a(2),v=A(j),N=a(20),f=A(N),d=a(0),g=A(d),b=a(5),E=A(b),R=a(10),S=A(R),k=a(9),L=A(k);function A(w){return w&&w.__esModule?w:{default:w}}function D(w,T,H){return T in w?Object.defineProperty(w,T,{value:H,enumerable:!0,configurable:!0,writable:!0}):w[T]=H,w}function I(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}function O(w,T){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:w}function C(w,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);w.prototype=Object.create(T&&T.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(w,T):w.__proto__=T)}var F=(0,S.default)("quill:keyboard"),U=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Y=function(w){C(T,w),i(T,null,[{key:"match",value:function(K,J){return J=B(J),["altKey","ctrlKey","metaKey","shiftKey"].some(function(X){return!!J[X]!==K[X]&&J[X]!==null})?!1:J.key===(K.which||K.keyCode)}}]);function T(H,K){I(this,T);var J=O(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,H,K));return J.bindings={},Object.keys(J.options.bindings).forEach(function(X){X==="list autofill"&&H.scroll.whitelist!=null&&!H.scroll.whitelist.list||J.options.bindings[X]&&J.addBinding(J.options.bindings[X])}),J.addBinding({key:T.keys.ENTER,shiftKey:null},M),J.addBinding({key:T.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(J.addBinding({key:T.keys.BACKSPACE},{collapsed:!0},V),J.addBinding({key:T.keys.DELETE},{collapsed:!0},W)):(J.addBinding({key:T.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},V),J.addBinding({key:T.keys.DELETE},{collapsed:!0,suffix:/^.?$/},W)),J.addBinding({key:T.keys.BACKSPACE},{collapsed:!1},_),J.addBinding({key:T.keys.DELETE},{collapsed:!1},_),J.addBinding({key:T.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},V),J.listen(),J}return i(T,[{key:"addBinding",value:function(K){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},pe=B(K);if(pe==null||pe.key==null)return F.warn("Attempted to add invalid keyboard binding",pe);typeof J=="function"&&(J={handler:J}),typeof X=="function"&&(X={handler:X}),pe=(0,x.default)(pe,J,X),this.bindings[pe.key]=this.bindings[pe.key]||[],this.bindings[pe.key].push(pe)}},{key:"listen",value:function(){var K=this;this.quill.root.addEventListener("keydown",function(J){if(!J.defaultPrevented){var X=J.which||J.keyCode,pe=(K.bindings[X]||[]).filter(function(Z){return T.match(J,Z)});if(pe.length!==0){var oe=K.quill.getSelection();if(!(oe==null||!K.quill.hasFocus())){var ce=K.quill.getLine(oe.index),Ae=o(ce,2),Be=Ae[0],Ie=Ae[1],ye=K.quill.getLeaf(oe.index),se=o(ye,2),we=se[0],ve=se[1],Q=oe.length===0?[we,ve]:K.quill.getLeaf(oe.index+oe.length),ne=o(Q,2),he=ne[0],Me=ne[1],be=we instanceof g.default.Text?we.value().slice(0,ve):"",De=he instanceof g.default.Text?he.value().slice(Me):"",ze={collapsed:oe.length===0,empty:oe.length===0&&Be.length()<=1,format:K.quill.getFormat(oe),offset:Ie,prefix:be,suffix:De},Ee=pe.some(function(Z){if(Z.collapsed!=null&&Z.collapsed!==ze.collapsed||Z.empty!=null&&Z.empty!==ze.empty||Z.offset!=null&&Z.offset!==ze.offset)return!1;if(Array.isArray(Z.format)){if(Z.format.every(function(ee){return ze.format[ee]==null}))return!1}else if(l(Z.format)==="object"&&!Object.keys(Z.format).every(function(ee){return Z.format[ee]===!0?ze.format[ee]!=null:Z.format[ee]===!1?ze.format[ee]==null:(0,m.default)(Z.format[ee],ze.format[ee])}))return!1;return Z.prefix!=null&&!Z.prefix.test(ze.prefix)||Z.suffix!=null&&!Z.suffix.test(ze.suffix)?!1:Z.handler.call(K,oe,ze)!==!0});Ee&&J.preventDefault()}}}})}}]),T}(L.default);Y.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Y.DEFAULTS={bindings:{bold:$("bold"),italic:$("italic"),underline:$("underline"),indent:{key:Y.keys.TAB,format:["blockquote","indent","list"],handler:function(T,H){if(H.collapsed&&H.offset!==0)return!0;this.quill.format("indent","+1",E.default.sources.USER)}},outdent:{key:Y.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(T,H){if(H.collapsed&&H.offset!==0)return!0;this.quill.format("indent","-1",E.default.sources.USER)}},"outdent backspace":{key:Y.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(T,H){H.format.indent!=null?this.quill.format("indent","-1",E.default.sources.USER):H.format.list!=null&&this.quill.format("list",!1,E.default.sources.USER)}},"indent code-block":P(!0),"outdent code-block":P(!1),"remove tab":{key:Y.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(T){this.quill.deleteText(T.index-1,1,E.default.sources.USER)}},tab:{key:Y.keys.TAB,handler:function(T){this.quill.history.cutoff();var H=new v.default().retain(T.index).delete(T.length).insert("	");this.quill.updateContents(H,E.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(T.index+1,E.default.sources.SILENT)}},"list empty enter":{key:Y.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(T,H){this.quill.format("list",!1,E.default.sources.USER),H.format.indent&&this.quill.format("indent",!1,E.default.sources.USER)}},"checklist enter":{key:Y.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(T){var H=this.quill.getLine(T.index),K=o(H,2),J=K[0],X=K[1],pe=(0,x.default)({},J.formats(),{list:"checked"}),oe=new v.default().retain(T.index).insert(`
`,pe).retain(J.length()-X-1).retain(1,{list:"unchecked"});this.quill.updateContents(oe,E.default.sources.USER),this.quill.setSelection(T.index+1,E.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Y.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(T,H){var K=this.quill.getLine(T.index),J=o(K,2),X=J[0],pe=J[1],oe=new v.default().retain(T.index).insert(`
`,H.format).retain(X.length()-pe-1).retain(1,{header:null});this.quill.updateContents(oe,E.default.sources.USER),this.quill.setSelection(T.index+1,E.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(T,H){var K=H.prefix.length,J=this.quill.getLine(T.index),X=o(J,2),pe=X[0],oe=X[1];if(oe>K)return!0;var ce=void 0;switch(H.prefix.trim()){case"[]":case"[ ]":ce="unchecked";break;case"[x]":ce="checked";break;case"-":case"*":ce="bullet";break;default:ce="ordered"}this.quill.insertText(T.index," ",E.default.sources.USER),this.quill.history.cutoff();var Ae=new v.default().retain(T.index-oe).delete(K+1).retain(pe.length()-2-oe).retain(1,{list:ce});this.quill.updateContents(Ae,E.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(T.index-K,E.default.sources.SILENT)}},"code exit":{key:Y.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(T){var H=this.quill.getLine(T.index),K=o(H,2),J=K[0],X=K[1],pe=new v.default().retain(T.index+J.length()-X-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(pe,E.default.sources.USER)}},"embed left":G(Y.keys.LEFT,!1),"embed left shift":G(Y.keys.LEFT,!0),"embed right":G(Y.keys.RIGHT,!1),"embed right shift":G(Y.keys.RIGHT,!0)}};function G(w,T){var H,K=w===Y.keys.LEFT?"prefix":"suffix";return H={key:w,shiftKey:T,altKey:null},D(H,K,/^$/),D(H,"handler",function(X){var pe=X.index;w===Y.keys.RIGHT&&(pe+=X.length+1);var oe=this.quill.getLeaf(pe),ce=o(oe,1),Ae=ce[0];return Ae instanceof g.default.Embed?(w===Y.keys.LEFT?T?this.quill.setSelection(X.index-1,X.length+1,E.default.sources.USER):this.quill.setSelection(X.index-1,E.default.sources.USER):T?this.quill.setSelection(X.index,X.length+1,E.default.sources.USER):this.quill.setSelection(X.index+X.length+1,E.default.sources.USER),!1):!0}),H}function V(w,T){if(!(w.index===0||this.quill.getLength()<=1)){var H=this.quill.getLine(w.index),K=o(H,1),J=K[0],X={};if(T.offset===0){var pe=this.quill.getLine(w.index-1),oe=o(pe,1),ce=oe[0];if(ce!=null&&ce.length()>1){var Ae=J.formats(),Be=this.quill.getFormat(w.index-1,1);X=f.default.attributes.diff(Ae,Be)||{}}}var Ie=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(T.prefix)?2:1;this.quill.deleteText(w.index-Ie,Ie,E.default.sources.USER),Object.keys(X).length>0&&this.quill.formatLine(w.index-Ie,Ie,X,E.default.sources.USER),this.quill.focus()}}function W(w,T){var H=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(T.suffix)?2:1;if(!(w.index>=this.quill.getLength()-H)){var K={},J=0,X=this.quill.getLine(w.index),pe=o(X,1),oe=pe[0];if(T.offset>=oe.length()-1){var ce=this.quill.getLine(w.index+1),Ae=o(ce,1),Be=Ae[0];if(Be){var Ie=oe.formats(),ye=this.quill.getFormat(w.index,1);K=f.default.attributes.diff(Ie,ye)||{},J=Be.length()}}this.quill.deleteText(w.index,H,E.default.sources.USER),Object.keys(K).length>0&&this.quill.formatLine(w.index+J-1,H,K,E.default.sources.USER)}}function _(w){var T=this.quill.getLines(w),H={};if(T.length>1){var K=T[0].formats(),J=T[T.length-1].formats();H=f.default.attributes.diff(J,K)||{}}this.quill.deleteText(w,E.default.sources.USER),Object.keys(H).length>0&&this.quill.formatLine(w.index,1,H,E.default.sources.USER),this.quill.setSelection(w.index,E.default.sources.SILENT),this.quill.focus()}function M(w,T){var H=this;w.length>0&&this.quill.scroll.deleteAt(w.index,w.length);var K=Object.keys(T.format).reduce(function(J,X){return g.default.query(X,g.default.Scope.BLOCK)&&!Array.isArray(T.format[X])&&(J[X]=T.format[X]),J},{});this.quill.insertText(w.index,`
`,K,E.default.sources.USER),this.quill.setSelection(w.index+1,E.default.sources.SILENT),this.quill.focus(),Object.keys(T.format).forEach(function(J){K[J]==null&&(Array.isArray(T.format[J])||J!=="link"&&H.quill.format(J,T.format[J],E.default.sources.USER))})}function P(w){return{key:Y.keys.TAB,shiftKey:!w,format:{"code-block":!0},handler:function(H){var K=g.default.query("code-block"),J=H.index,X=H.length,pe=this.quill.scroll.descendant(K,J),oe=o(pe,2),ce=oe[0],Ae=oe[1];if(ce!=null){var Be=this.quill.getIndex(ce),Ie=ce.newlineIndex(Ae,!0)+1,ye=ce.newlineIndex(Be+Ae+X),se=ce.domNode.textContent.slice(Ie,ye).split(`
`);Ae=0,se.forEach(function(we,ve){w?(ce.insertAt(Ie+Ae,K.TAB),Ae+=K.TAB.length,ve===0?J+=K.TAB.length:X+=K.TAB.length):we.startsWith(K.TAB)&&(ce.deleteAt(Ie+Ae,K.TAB.length),Ae-=K.TAB.length,ve===0?J-=K.TAB.length:X-=K.TAB.length),Ae+=we.length+1}),this.quill.update(E.default.sources.USER),this.quill.setSelection(J,X,E.default.sources.SILENT)}}}}function $(w){return{key:w[0].toUpperCase(),shortKey:!0,handler:function(H,K){this.quill.format(w,!K.format[w],E.default.sources.USER)}}}function B(w){if(typeof w=="string"||typeof w=="number")return B({key:w});if((typeof w>"u"?"undefined":l(w))==="object"&&(w=(0,h.default)(w,!1)),typeof w.key=="string")if(Y.keys[w.key.toUpperCase()]!=null)w.key=Y.keys[w.key.toUpperCase()];else if(w.key.length===1)w.key=w.key.toUpperCase().charCodeAt(0);else return null;return w.shortKey&&(w[U]=w.shortKey,delete w.shortKey),w}n.default=Y,n.SHORTKEY=U},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function f(d,g){var b=[],E=!0,R=!1,S=void 0;try{for(var k=d[Symbol.iterator](),L;!(E=(L=k.next()).done)&&(b.push(L.value),!(g&&b.length===g));E=!0);}catch(A){R=!0,S=A}finally{try{!E&&k.return&&k.return()}finally{if(R)throw S}}return b}return function(d,g){if(Array.isArray(d))return d;if(Symbol.iterator in Object(d))return f(d,g);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function f(d,g,b){d===null&&(d=Function.prototype);var E=Object.getOwnPropertyDescriptor(d,g);if(E===void 0){var R=Object.getPrototypeOf(d);return R===null?void 0:f(R,g,b)}else{if("value"in E)return E.value;var S=E.get;return S===void 0?void 0:S.call(b)}},i=function(){function f(d,g){for(var b=0;b<g.length;b++){var E=g[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(d,E.key,E)}}return function(d,g,b){return g&&f(d.prototype,g),b&&f(d,b),d}}(),c=a(0),h=u(c),p=a(7),m=u(p);function u(f){return f&&f.__esModule?f:{default:f}}function x(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function j(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function v(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var N=function(f){v(d,f),i(d,null,[{key:"value",value:function(){}}]);function d(g,b){x(this,d);var E=j(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,g));return E.selection=b,E.textNode=document.createTextNode(d.CONTENTS),E.domNode.appendChild(E.textNode),E._length=0,E}return i(d,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(b,E){if(this._length!==0)return o(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"format",this).call(this,b,E);for(var R=this,S=0;R!=null&&R.statics.scope!==h.default.Scope.BLOCK_BLOT;)S+=R.offset(R.parent),R=R.parent;R!=null&&(this._length=d.CONTENTS.length,R.optimize(),R.formatAt(S,d.CONTENTS.length,b,E),this._length=0)}},{key:"index",value:function(b,E){return b===this.textNode?0:o(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"index",this).call(this,b,E)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var b=this.textNode,E=this.selection.getNativeRange(),R=void 0,S=void 0,k=void 0;if(E!=null&&E.start.node===b&&E.end.node===b){var L=[b,E.start.offset,E.end.offset];R=L[0],S=L[1],k=L[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==d.CONTENTS){var A=this.textNode.data.split(d.CONTENTS).join("");this.next instanceof m.default?(R=this.next.domNode,this.next.insertAt(0,A),this.textNode.data=d.CONTENTS):(this.textNode.data=A,this.parent.insertBefore(h.default.create(this.textNode),this),this.textNode=document.createTextNode(d.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),S!=null){var D=[S,k].map(function(O){return Math.max(0,Math.min(R.data.length,O-1))}),I=l(D,2);return S=I[0],k=I[1],{startNode:R,startOffset:S,endNode:R,endOffset:k}}}}},{key:"update",value:function(b,E){var R=this;if(b.some(function(k){return k.type==="characterData"&&k.target===R.textNode})){var S=this.restore();S&&(E.range=S)}}},{key:"value",value:function(){return""}}]),d}(h.default.Embed);N.blotName="cursor",N.className="ql-cursor",N.tagName="span",N.CONTENTS="\uFEFF",n.default=N},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(0),o=h(l),i=a(4),c=h(i);function h(j){return j&&j.__esModule?j:{default:j}}function p(j,v){if(!(j instanceof v))throw new TypeError("Cannot call a class as a function")}function m(j,v){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:j}function u(j,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);j.prototype=Object.create(v&&v.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(j,v):j.__proto__=v)}var x=function(j){u(v,j);function v(){return p(this,v),m(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v}(o.default.Container);x.allowedChildren=[c.default,i.BlockEmbed,x],n.default=x},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var l=function(){function N(f,d){for(var g=0;g<d.length;g++){var b=d[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(f,d,g){return d&&N(f.prototype,d),g&&N(f,g),f}}(),o=function N(f,d,g){f===null&&(f=Function.prototype);var b=Object.getOwnPropertyDescriptor(f,d);if(b===void 0){var E=Object.getPrototypeOf(f);return E===null?void 0:N(E,d,g)}else{if("value"in b)return b.value;var R=b.get;return R===void 0?void 0:R.call(g)}},i=a(0),c=h(i);function h(N){return N&&N.__esModule?N:{default:N}}function p(N,f){if(!(N instanceof f))throw new TypeError("Cannot call a class as a function")}function m(N,f){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:N}function u(N,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);N.prototype=Object.create(f&&f.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(N,f):N.__proto__=f)}var x=function(N){u(f,N);function f(){return p(this,f),m(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return l(f,[{key:"value",value:function(g){var b=o(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"value",this).call(this,g);return b.startsWith("rgb(")?(b=b.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+b.split(",").map(function(E){return("00"+parseInt(E).toString(16)).slice(-2)}).join("")):b}}]),f}(c.default.Attributor.Style),j=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),v=new x("color","color",{scope:c.default.Scope.INLINE});n.ColorAttributor=x,n.ColorClass=j,n.ColorStyle=v},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var l=function(){function v(N,f){for(var d=0;d<f.length;d++){var g=f[d];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(N,g.key,g)}}return function(N,f,d){return f&&v(N.prototype,f),d&&v(N,d),N}}(),o=function v(N,f,d){N===null&&(N=Function.prototype);var g=Object.getOwnPropertyDescriptor(N,f);if(g===void 0){var b=Object.getPrototypeOf(N);return b===null?void 0:v(b,f,d)}else{if("value"in g)return g.value;var E=g.get;return E===void 0?void 0:E.call(d)}},i=a(6),c=h(i);function h(v){return v&&v.__esModule?v:{default:v}}function p(v,N){if(!(v instanceof N))throw new TypeError("Cannot call a class as a function")}function m(v,N){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:v}function u(v,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);v.prototype=Object.create(N&&N.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(v,N):v.__proto__=N)}var x=function(v){u(N,v);function N(){return p(this,N),m(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return l(N,[{key:"format",value:function(d,g){if(d!==this.statics.blotName||!g)return o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"format",this).call(this,d,g);g=this.constructor.sanitize(g),this.domNode.setAttribute("href",g)}}],[{key:"create",value:function(d){var g=o(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,d);return d=this.sanitize(d),g.setAttribute("href",d),g.setAttribute("rel","noopener noreferrer"),g.setAttribute("target","_blank"),g}},{key:"formats",value:function(d){return d.getAttribute("href")}},{key:"sanitize",value:function(d){return j(d,this.PROTOCOL_WHITELIST)?d:this.SANITIZED_URL}}]),N}(c.default);x.blotName="link",x.tagName="A",x.SANITIZED_URL="about:blank",x.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function j(v,N){var f=document.createElement("a");f.href=v;var d=f.href.slice(0,f.href.indexOf(":"));return N.indexOf(d)>-1}n.default=x,n.sanitize=j},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},o=function(){function N(f,d){for(var g=0;g<d.length;g++){var b=d[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(f,d,g){return d&&N(f.prototype,d),g&&N(f,g),f}}(),i=a(23),c=m(i),h=a(107),p=m(h);function m(N){return N&&N.__esModule?N:{default:N}}function u(N,f){if(!(N instanceof f))throw new TypeError("Cannot call a class as a function")}var x=0;function j(N,f){N.setAttribute(f,N.getAttribute(f)!=="true")}var v=function(){function N(f){var d=this;u(this,N),this.select=f,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){d.togglePicker()}),this.label.addEventListener("keydown",function(g){switch(g.keyCode){case c.default.keys.ENTER:d.togglePicker();break;case c.default.keys.ESCAPE:d.escape(),g.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(N,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),j(this.label,"aria-expanded"),j(this.options,"aria-hidden")}},{key:"buildItem",value:function(d){var g=this,b=document.createElement("span");return b.tabIndex="0",b.setAttribute("role","button"),b.classList.add("ql-picker-item"),d.hasAttribute("value")&&b.setAttribute("data-value",d.getAttribute("value")),d.textContent&&b.setAttribute("data-label",d.textContent),b.addEventListener("click",function(){g.selectItem(b,!0)}),b.addEventListener("keydown",function(E){switch(E.keyCode){case c.default.keys.ENTER:g.selectItem(b,!0),E.preventDefault();break;case c.default.keys.ESCAPE:g.escape(),E.preventDefault();break}}),b}},{key:"buildLabel",value:function(){var d=document.createElement("span");return d.classList.add("ql-picker-label"),d.innerHTML=p.default,d.tabIndex="0",d.setAttribute("role","button"),d.setAttribute("aria-expanded","false"),this.container.appendChild(d),d}},{key:"buildOptions",value:function(){var d=this,g=document.createElement("span");g.classList.add("ql-picker-options"),g.setAttribute("aria-hidden","true"),g.tabIndex="-1",g.id="ql-picker-options-"+x,x+=1,this.label.setAttribute("aria-controls",g.id),this.options=g,[].slice.call(this.select.options).forEach(function(b){var E=d.buildItem(b);g.appendChild(E),b.selected===!0&&d.selectItem(E)}),this.container.appendChild(g)}},{key:"buildPicker",value:function(){var d=this;[].slice.call(this.select.attributes).forEach(function(g){d.container.setAttribute(g.name,g.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var d=this;this.close(),setTimeout(function(){return d.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(d){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,b=this.container.querySelector(".ql-selected");if(d!==b&&(b!=null&&b.classList.remove("ql-selected"),d!=null&&(d.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(d.parentNode.children,d),d.hasAttribute("data-value")?this.label.setAttribute("data-value",d.getAttribute("data-value")):this.label.removeAttribute("data-value"),d.hasAttribute("data-label")?this.label.setAttribute("data-label",d.getAttribute("data-label")):this.label.removeAttribute("data-label"),g))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":l(Event))==="object"){var E=document.createEvent("Event");E.initEvent("change",!0,!0),this.select.dispatchEvent(E)}this.close()}}},{key:"update",value:function(){var d=void 0;if(this.select.selectedIndex>-1){var g=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];d=this.select.options[this.select.selectedIndex],this.selectItem(g)}else this.selectItem(null);var b=d!=null&&d!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",b)}}]),N}();n.default=v},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(0),o=F(l),i=a(5),c=F(i),h=a(4),p=F(h),m=a(16),u=F(m),x=a(25),j=F(x),v=a(24),N=F(v),f=a(35),d=F(f),g=a(6),b=F(g),E=a(22),R=F(E),S=a(7),k=F(S),L=a(55),A=F(L),D=a(42),I=F(D),O=a(23),C=F(O);function F(U){return U&&U.__esModule?U:{default:U}}c.default.register({"blots/block":p.default,"blots/block/embed":h.BlockEmbed,"blots/break":u.default,"blots/container":j.default,"blots/cursor":N.default,"blots/embed":d.default,"blots/inline":b.default,"blots/scroll":R.default,"blots/text":k.default,"modules/clipboard":A.default,"modules/history":I.default,"modules/keyboard":C.default}),o.default.register(p.default,u.default,N.default,b.default,R.default,k.default),n.default=c.default},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(1),o=function(){function i(c){this.domNode=c,this.domNode[l.DATA_KEY]={blot:this}}return Object.defineProperty(i.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),i.create=function(c){if(this.tagName==null)throw new l.ParchmentError("Blot definition missing tagName");var h;return Array.isArray(this.tagName)?(typeof c=="string"&&(c=c.toUpperCase(),parseInt(c).toString()===c&&(c=parseInt(c))),typeof c=="number"?h=document.createElement(this.tagName[c-1]):this.tagName.indexOf(c)>-1?h=document.createElement(c):h=document.createElement(this.tagName[0])):h=document.createElement(this.tagName),this.className&&h.classList.add(this.className),h},i.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},i.prototype.clone=function(){var c=this.domNode.cloneNode(!1);return l.create(c)},i.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[l.DATA_KEY]},i.prototype.deleteAt=function(c,h){var p=this.isolate(c,h);p.remove()},i.prototype.formatAt=function(c,h,p,m){var u=this.isolate(c,h);if(l.query(p,l.Scope.BLOT)!=null&&m)u.wrap(p,m);else if(l.query(p,l.Scope.ATTRIBUTE)!=null){var x=l.create(this.statics.scope);u.wrap(x),x.format(p,m)}},i.prototype.insertAt=function(c,h,p){var m=p==null?l.create("text",h):l.create(h,p),u=this.split(c);this.parent.insertBefore(m,u)},i.prototype.insertInto=function(c,h){h===void 0&&(h=null),this.parent!=null&&this.parent.children.remove(this);var p=null;c.children.insertBefore(this,h),h!=null&&(p=h.domNode),(this.domNode.parentNode!=c.domNode||this.domNode.nextSibling!=p)&&c.domNode.insertBefore(this.domNode,p),this.parent=c,this.attach()},i.prototype.isolate=function(c,h){var p=this.split(c);return p.split(h),p},i.prototype.length=function(){return 1},i.prototype.offset=function(c){return c===void 0&&(c=this.parent),this.parent==null||this==c?0:this.parent.children.offset(this)+this.parent.offset(c)},i.prototype.optimize=function(c){this.domNode[l.DATA_KEY]!=null&&delete this.domNode[l.DATA_KEY].mutations},i.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},i.prototype.replace=function(c){c.parent!=null&&(c.parent.insertBefore(this,c.next),c.remove())},i.prototype.replaceWith=function(c,h){var p=typeof c=="string"?l.create(c,h):c;return p.replace(this),p},i.prototype.split=function(c,h){return c===0?this:this.next},i.prototype.update=function(c,h){},i.prototype.wrap=function(c,h){var p=typeof c=="string"?l.create(c,h):c;return this.parent!=null&&this.parent.insertBefore(p,this.next),p.appendChild(this),p},i.blotName="abstract",i}();n.default=o},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(12),o=a(32),i=a(33),c=a(1),h=function(){function p(m){this.attributes={},this.domNode=m,this.build()}return p.prototype.attribute=function(m,u){u?m.add(this.domNode,u)&&(m.value(this.domNode)!=null?this.attributes[m.attrName]=m:delete this.attributes[m.attrName]):(m.remove(this.domNode),delete this.attributes[m.attrName])},p.prototype.build=function(){var m=this;this.attributes={};var u=l.default.keys(this.domNode),x=o.default.keys(this.domNode),j=i.default.keys(this.domNode);u.concat(x).concat(j).forEach(function(v){var N=c.query(v,c.Scope.ATTRIBUTE);N instanceof l.default&&(m.attributes[N.attrName]=N)})},p.prototype.copy=function(m){var u=this;Object.keys(this.attributes).forEach(function(x){var j=u.attributes[x].value(u.domNode);m.format(x,j)})},p.prototype.move=function(m){var u=this;this.copy(m),Object.keys(this.attributes).forEach(function(x){u.attributes[x].remove(u.domNode)}),this.attributes={}},p.prototype.values=function(){var m=this;return Object.keys(this.attributes).reduce(function(u,x){return u[x]=m.attributes[x].value(m.domNode),u},{})},p}();n.default=h},function(r,n,a){var l=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var u in m)m.hasOwnProperty(u)&&(p[u]=m[u])};return function(p,m){h(p,m);function u(){this.constructor=p}p.prototype=m===null?Object.create(m):(u.prototype=m.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(12);function i(h,p){var m=h.getAttribute("class")||"";return m.split(/\s+/).filter(function(u){return u.indexOf(p+"-")===0})}var c=function(h){l(p,h);function p(){return h!==null&&h.apply(this,arguments)||this}return p.keys=function(m){return(m.getAttribute("class")||"").split(/\s+/).map(function(u){return u.split("-").slice(0,-1).join("-")})},p.prototype.add=function(m,u){return this.canAdd(m,u)?(this.remove(m),m.classList.add(this.keyName+"-"+u),!0):!1},p.prototype.remove=function(m){var u=i(m,this.keyName);u.forEach(function(x){m.classList.remove(x)}),m.classList.length===0&&m.removeAttribute("class")},p.prototype.value=function(m){var u=i(m,this.keyName)[0]||"",x=u.slice(this.keyName.length+1);return this.canAdd(m,x)?x:""},p}(o.default);n.default=c},function(r,n,a){var l=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var u in m)m.hasOwnProperty(u)&&(p[u]=m[u])};return function(p,m){h(p,m);function u(){this.constructor=p}p.prototype=m===null?Object.create(m):(u.prototype=m.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(12);function i(h){var p=h.split("-"),m=p.slice(1).map(function(u){return u[0].toUpperCase()+u.slice(1)}).join("");return p[0]+m}var c=function(h){l(p,h);function p(){return h!==null&&h.apply(this,arguments)||this}return p.keys=function(m){return(m.getAttribute("style")||"").split(";").map(function(u){var x=u.split(":");return x[0].trim()})},p.prototype.add=function(m,u){return this.canAdd(m,u)?(m.style[i(this.keyName)]=u,!0):!1},p.prototype.remove=function(m){m.style[i(this.keyName)]="",m.getAttribute("style")||m.removeAttribute("style")},p.prototype.value=function(m){var u=m.style[i(this.keyName)];return this.canAdd(m,u)?u:""},p}(o.default);n.default=c},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function c(h,p){for(var m=0;m<p.length;m++){var u=p[m];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(h,u.key,u)}}return function(h,p,m){return p&&c(h.prototype,p),m&&c(h,m),h}}();function o(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}var i=function(){function c(h,p){o(this,c),this.quill=h,this.options=p,this.modules={}}return l(c,[{key:"init",value:function(){var p=this;Object.keys(this.options.modules).forEach(function(m){p.modules[m]==null&&p.addModule(m)})}},{key:"addModule",value:function(p){var m=this.quill.constructor.import("modules/"+p);return this.modules[p]=new m(this.quill,this.options.modules[p]||{}),this.modules[p]}}]),c}();i.DEFAULTS={modules:{}},i.themes={default:i},n.default=i},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function f(d,g){for(var b=0;b<g.length;b++){var E=g[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(d,E.key,E)}}return function(d,g,b){return g&&f(d.prototype,g),b&&f(d,b),d}}(),o=function f(d,g,b){d===null&&(d=Function.prototype);var E=Object.getOwnPropertyDescriptor(d,g);if(E===void 0){var R=Object.getPrototypeOf(d);return R===null?void 0:f(R,g,b)}else{if("value"in E)return E.value;var S=E.get;return S===void 0?void 0:S.call(b)}},i=a(0),c=m(i),h=a(7),p=m(h);function m(f){return f&&f.__esModule?f:{default:f}}function u(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function x(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function j(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var v="\uFEFF",N=function(f){j(d,f);function d(g){u(this,d);var b=x(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,g));return b.contentNode=document.createElement("span"),b.contentNode.setAttribute("contenteditable",!1),[].slice.call(b.domNode.childNodes).forEach(function(E){b.contentNode.appendChild(E)}),b.leftGuard=document.createTextNode(v),b.rightGuard=document.createTextNode(v),b.domNode.appendChild(b.leftGuard),b.domNode.appendChild(b.contentNode),b.domNode.appendChild(b.rightGuard),b}return l(d,[{key:"index",value:function(b,E){return b===this.leftGuard?0:b===this.rightGuard?1:o(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"index",this).call(this,b,E)}},{key:"restore",value:function(b){var E=void 0,R=void 0,S=b.data.split(v).join("");if(b===this.leftGuard)if(this.prev instanceof p.default){var k=this.prev.length();this.prev.insertAt(k,S),E={startNode:this.prev.domNode,startOffset:k+S.length}}else R=document.createTextNode(S),this.parent.insertBefore(c.default.create(R),this),E={startNode:R,startOffset:S.length};else b===this.rightGuard&&(this.next instanceof p.default?(this.next.insertAt(0,S),E={startNode:this.next.domNode,startOffset:S.length}):(R=document.createTextNode(S),this.parent.insertBefore(c.default.create(R),this.next),E={startNode:R,startOffset:S.length}));return b.data=v,E}},{key:"update",value:function(b,E){var R=this;b.forEach(function(S){if(S.type==="characterData"&&(S.target===R.leftGuard||S.target===R.rightGuard)){var k=R.restore(S.target);k&&(E.range=k)}})}}]),d}(c.default.Embed);n.default=N},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var l=a(0),o=i(l);function i(u){return u&&u.__esModule?u:{default:u}}var c={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},h=new o.default.Attributor.Attribute("align","align",c),p=new o.default.Attributor.Class("align","ql-align",c),m=new o.default.Attributor.Style("align","text-align",c);n.AlignAttribute=h,n.AlignClass=p,n.AlignStyle=m},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var l=a(0),o=c(l),i=a(26);function c(m){return m&&m.__esModule?m:{default:m}}var h=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),p=new i.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});n.BackgroundClass=h,n.BackgroundStyle=p},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var l=a(0),o=i(l);function i(u){return u&&u.__esModule?u:{default:u}}var c={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},h=new o.default.Attributor.Attribute("direction","dir",c),p=new o.default.Attributor.Class("direction","ql-direction",c),m=new o.default.Attributor.Style("direction","direction",c);n.DirectionAttribute=h,n.DirectionClass=p,n.DirectionStyle=m},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var l=function(){function f(d,g){for(var b=0;b<g.length;b++){var E=g[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(d,E.key,E)}}return function(d,g,b){return g&&f(d.prototype,g),b&&f(d,b),d}}(),o=function f(d,g,b){d===null&&(d=Function.prototype);var E=Object.getOwnPropertyDescriptor(d,g);if(E===void 0){var R=Object.getPrototypeOf(d);return R===null?void 0:f(R,g,b)}else{if("value"in E)return E.value;var S=E.get;return S===void 0?void 0:S.call(b)}},i=a(0),c=h(i);function h(f){return f&&f.__esModule?f:{default:f}}function p(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function m(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function u(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var x={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},j=new c.default.Attributor.Class("font","ql-font",x),v=function(f){u(d,f);function d(){return p(this,d),m(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return l(d,[{key:"value",value:function(b){return o(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"value",this).call(this,b).replace(/["']/g,"")}}]),d}(c.default.Attributor.Style),N=new v("font","font-family",x);n.FontStyle=N,n.FontClass=j},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var l=a(0),o=i(l);function i(p){return p&&p.__esModule?p:{default:p}}var c=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),h=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=c,n.SizeStyle=h},function(r,n,a){r.exports={align:{"":a(76),center:a(77),right:a(78),justify:a(79)},background:a(80),blockquote:a(81),bold:a(82),clean:a(83),code:a(58),"code-block":a(58),color:a(84),direction:{"":a(85),rtl:a(86)},float:{center:a(87),full:a(88),left:a(89),right:a(90)},formula:a(91),header:{1:a(92),2:a(93)},italic:a(94),image:a(95),indent:{"+1":a(96),"-1":a(97)},link:a(98),list:{ordered:a(99),bullet:a(100),check:a(101)},script:{sub:a(102),super:a(103)},strike:a(104),underline:a(105),video:a(106)}},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var l=function(){function g(b,E){for(var R=0;R<E.length;R++){var S=E[R];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,S.key,S)}}return function(b,E,R){return E&&g(b.prototype,E),R&&g(b,R),b}}(),o=a(0),i=u(o),c=a(5),h=u(c),p=a(9),m=u(p);function u(g){return g&&g.__esModule?g:{default:g}}function x(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function j(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function v(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var N=function(g){v(b,g);function b(E,R){x(this,b);var S=j(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,E,R));return S.lastRecorded=0,S.ignoreChange=!1,S.clear(),S.quill.on(h.default.events.EDITOR_CHANGE,function(k,L,A,D){k!==h.default.events.TEXT_CHANGE||S.ignoreChange||(!S.options.userOnly||D===h.default.sources.USER?S.record(L,A):S.transform(L))}),S.quill.keyboard.addBinding({key:"Z",shortKey:!0},S.undo.bind(S)),S.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},S.redo.bind(S)),/Win/i.test(navigator.platform)&&S.quill.keyboard.addBinding({key:"Y",shortKey:!0},S.redo.bind(S)),S}return l(b,[{key:"change",value:function(R,S){if(this.stack[R].length!==0){var k=this.stack[R].pop();this.stack[S].push(k),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(k[R],h.default.sources.USER),this.ignoreChange=!1;var L=d(k[R]);this.quill.setSelection(L)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(R,S){if(R.ops.length!==0){this.stack.redo=[];var k=this.quill.getContents().diff(S),L=Date.now();if(this.lastRecorded+this.options.delay>L&&this.stack.undo.length>0){var A=this.stack.undo.pop();k=k.compose(A.undo),R=A.redo.compose(R)}else this.lastRecorded=L;this.stack.undo.push({redo:R,undo:k}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(R){this.stack.undo.forEach(function(S){S.undo=R.transform(S.undo,!0),S.redo=R.transform(S.redo,!0)}),this.stack.redo.forEach(function(S){S.undo=R.transform(S.undo,!0),S.redo=R.transform(S.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),b}(m.default);N.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function f(g){var b=g.ops[g.ops.length-1];return b==null?!1:b.insert!=null?typeof b.insert=="string"&&b.insert.endsWith(`
`):b.attributes!=null?Object.keys(b.attributes).some(function(E){return i.default.query(E,i.default.Scope.BLOCK)!=null}):!1}function d(g){var b=g.reduce(function(R,S){return R+=S.delete||0,R},0),E=g.length()-b;return f(g)&&(E-=1),E}n.default=N,n.getLastChangeIndex=d},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var l=function(){function M(P,$){for(var B=0;B<$.length;B++){var w=$[B];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(P,w.key,w)}}return function(P,$,B){return $&&M(P.prototype,$),B&&M(P,B),P}}(),o=function M(P,$,B){P===null&&(P=Function.prototype);var w=Object.getOwnPropertyDescriptor(P,$);if(w===void 0){var T=Object.getPrototypeOf(P);return T===null?void 0:M(T,$,B)}else{if("value"in w)return w.value;var H=w.get;return H===void 0?void 0:H.call(B)}},i=a(3),c=L(i),h=a(2),p=L(h),m=a(8),u=L(m),x=a(23),j=L(x),v=a(34),N=L(v),f=a(59),d=L(f),g=a(60),b=L(g),E=a(28),R=L(E),S=a(61),k=L(S);function L(M){return M&&M.__esModule?M:{default:M}}function A(M,P){if(!(M instanceof P))throw new TypeError("Cannot call a class as a function")}function D(M,P){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:M}function I(M,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);M.prototype=Object.create(P&&P.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(M,P):M.__proto__=P)}var O=[!1,"center","right","justify"],C=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],F=[!1,"serif","monospace"],U=["1","2","3",!1],Y=["small",!1,"large","huge"],G=function(M){I(P,M);function P($,B){A(this,P);var w=D(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,$,B)),T=function H(K){if(!document.body.contains($.root))return document.body.removeEventListener("click",H);w.tooltip!=null&&!w.tooltip.root.contains(K.target)&&document.activeElement!==w.tooltip.textbox&&!w.quill.hasFocus()&&w.tooltip.hide(),w.pickers!=null&&w.pickers.forEach(function(J){J.container.contains(K.target)||J.close()})};return $.emitter.listenDOM("click",document.body,T),w}return l(P,[{key:"addModule",value:function(B){var w=o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"addModule",this).call(this,B);return B==="toolbar"&&this.extendToolbar(w),w}},{key:"buildButtons",value:function(B,w){B.forEach(function(T){var H=T.getAttribute("class")||"";H.split(/\s+/).forEach(function(K){if(K.startsWith("ql-")&&(K=K.slice(3),w[K]!=null))if(K==="direction")T.innerHTML=w[K][""]+w[K].rtl;else if(typeof w[K]=="string")T.innerHTML=w[K];else{var J=T.value||"";J!=null&&w[K][J]&&(T.innerHTML=w[K][J])}})})}},{key:"buildPickers",value:function(B,w){var T=this;this.pickers=B.map(function(K){if(K.classList.contains("ql-align"))return K.querySelector("option")==null&&_(K,O),new b.default(K,w.align);if(K.classList.contains("ql-background")||K.classList.contains("ql-color")){var J=K.classList.contains("ql-background")?"background":"color";return K.querySelector("option")==null&&_(K,C,J==="background"?"#ffffff":"#000000"),new d.default(K,w[J])}else return K.querySelector("option")==null&&(K.classList.contains("ql-font")?_(K,F):K.classList.contains("ql-header")?_(K,U):K.classList.contains("ql-size")&&_(K,Y)),new R.default(K)});var H=function(){T.pickers.forEach(function(J){J.update()})};this.quill.on(u.default.events.EDITOR_CHANGE,H)}}]),P}(N.default);G.DEFAULTS=(0,c.default)(!0,{},N.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var P=this,$=this.container.querySelector("input.ql-image[type=file]");$==null&&($=document.createElement("input"),$.setAttribute("type","file"),$.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),$.classList.add("ql-image"),$.addEventListener("change",function(){if($.files!=null&&$.files[0]!=null){var B=new FileReader;B.onload=function(w){var T=P.quill.getSelection(!0);P.quill.updateContents(new p.default().retain(T.index).delete(T.length).insert({image:w.target.result}),u.default.sources.USER),P.quill.setSelection(T.index+1,u.default.sources.SILENT),$.value=""},B.readAsDataURL($.files[0])}}),this.container.appendChild($)),$.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var V=function(M){I(P,M);function P($,B){A(this,P);var w=D(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,$,B));return w.textbox=w.root.querySelector('input[type="text"]'),w.listen(),w}return l(P,[{key:"listen",value:function(){var B=this;this.textbox.addEventListener("keydown",function(w){j.default.match(w,"enter")?(B.save(),w.preventDefault()):j.default.match(w,"escape")&&(B.cancel(),w.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),w!=null?this.textbox.value=w:B!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+B)||""),this.root.setAttribute("data-mode",B)}},{key:"restoreFocus",value:function(){var B=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=B}},{key:"save",value:function(){var B=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var w=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",B,u.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",B,u.default.sources.USER)),this.quill.root.scrollTop=w;break}case"video":B=W(B);case"formula":{if(!B)break;var T=this.quill.getSelection(!0);if(T!=null){var H=T.index+T.length;this.quill.insertEmbed(H,this.root.getAttribute("data-mode"),B,u.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(H+1," ",u.default.sources.USER),this.quill.setSelection(H+2,u.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),P}(k.default);function W(M){var P=M.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||M.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return P?(P[1]||"https")+"://www.youtube.com/embed/"+P[2]+"?showinfo=0":(P=M.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(P[1]||"https")+"://player.vimeo.com/video/"+P[2]+"/":M}function _(M,P){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;P.forEach(function(B){var w=document.createElement("option");B===$?w.setAttribute("selected","selected"):w.setAttribute("value",B),M.appendChild(w)})}n.BaseTooltip=V,n.default=G},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];this.insertBefore(i[0],null),i.length>1&&this.append.apply(this,i.slice(1))},o.prototype.contains=function(i){for(var c,h=this.iterator();c=h();)if(c===i)return!0;return!1},o.prototype.insertBefore=function(i,c){i&&(i.next=c,c!=null?(i.prev=c.prev,c.prev!=null&&(c.prev.next=i),c.prev=i,c===this.head&&(this.head=i)):this.tail!=null?(this.tail.next=i,i.prev=this.tail,this.tail=i):(i.prev=null,this.head=this.tail=i),this.length+=1)},o.prototype.offset=function(i){for(var c=0,h=this.head;h!=null;){if(h===i)return c;c+=h.length(),h=h.next}return-1},o.prototype.remove=function(i){this.contains(i)&&(i.prev!=null&&(i.prev.next=i.next),i.next!=null&&(i.next.prev=i.prev),i===this.head&&(this.head=i.next),i===this.tail&&(this.tail=i.prev),this.length-=1)},o.prototype.iterator=function(i){return i===void 0&&(i=this.head),function(){var c=i;return i!=null&&(i=i.next),c}},o.prototype.find=function(i,c){c===void 0&&(c=!1);for(var h,p=this.iterator();h=p();){var m=h.length();if(i<m||c&&i===m&&(h.next==null||h.next.length()!==0))return[h,i];i-=m}return[null,0]},o.prototype.forEach=function(i){for(var c,h=this.iterator();c=h();)i(c)},o.prototype.forEachAt=function(i,c,h){if(!(c<=0))for(var p=this.find(i),m=p[0],u=p[1],x,j=i-u,v=this.iterator(m);(x=v())&&j<i+c;){var N=x.length();i>j?h(x,i-j,Math.min(c,j+N-i)):h(x,0,Math.min(N,i+c-j)),j+=N}},o.prototype.map=function(i){return this.reduce(function(c,h){return c.push(i(h)),c},[])},o.prototype.reduce=function(i,c){for(var h,p=this.iterator();h=p();)c=i(c,h);return c},o}();n.default=l},function(r,n,a){var l=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,x){u.__proto__=x}||function(u,x){for(var j in x)x.hasOwnProperty(j)&&(u[j]=x[j])};return function(u,x){m(u,x);function j(){this.constructor=u}u.prototype=x===null?Object.create(x):(j.prototype=x.prototype,new j)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(17),i=a(1),c={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},h=100,p=function(m){l(u,m);function u(x){var j=m.call(this,x)||this;return j.scroll=j,j.observer=new MutationObserver(function(v){j.update(v)}),j.observer.observe(j.domNode,c),j.attach(),j}return u.prototype.detach=function(){m.prototype.detach.call(this),this.observer.disconnect()},u.prototype.deleteAt=function(x,j){this.update(),x===0&&j===this.length()?this.children.forEach(function(v){v.remove()}):m.prototype.deleteAt.call(this,x,j)},u.prototype.formatAt=function(x,j,v,N){this.update(),m.prototype.formatAt.call(this,x,j,v,N)},u.prototype.insertAt=function(x,j,v){this.update(),m.prototype.insertAt.call(this,x,j,v)},u.prototype.optimize=function(x,j){var v=this;x===void 0&&(x=[]),j===void 0&&(j={}),m.prototype.optimize.call(this,j);for(var N=[].slice.call(this.observer.takeRecords());N.length>0;)x.push(N.pop());for(var f=function(E,R){R===void 0&&(R=!0),!(E==null||E===v)&&E.domNode.parentNode!=null&&(E.domNode[i.DATA_KEY].mutations==null&&(E.domNode[i.DATA_KEY].mutations=[]),R&&f(E.parent))},d=function(E){E.domNode[i.DATA_KEY]==null||E.domNode[i.DATA_KEY].mutations==null||(E instanceof o.default&&E.children.forEach(d),E.optimize(j))},g=x,b=0;g.length>0;b+=1){if(b>=h)throw new Error("[Parchment] Maximum optimize iterations reached");for(g.forEach(function(E){var R=i.find(E.target,!0);R!=null&&(R.domNode===E.target&&(E.type==="childList"?(f(i.find(E.previousSibling,!1)),[].forEach.call(E.addedNodes,function(S){var k=i.find(S,!1);f(k,!1),k instanceof o.default&&k.children.forEach(function(L){f(L,!1)})})):E.type==="attributes"&&f(R.prev)),f(R))}),this.children.forEach(d),g=[].slice.call(this.observer.takeRecords()),N=g.slice();N.length>0;)x.push(N.pop())}},u.prototype.update=function(x,j){var v=this;j===void 0&&(j={}),x=x||this.observer.takeRecords(),x.map(function(N){var f=i.find(N.target,!0);return f==null?null:f.domNode[i.DATA_KEY].mutations==null?(f.domNode[i.DATA_KEY].mutations=[N],f):(f.domNode[i.DATA_KEY].mutations.push(N),null)}).forEach(function(N){N==null||N===v||N.domNode[i.DATA_KEY]==null||N.update(N.domNode[i.DATA_KEY].mutations||[],j)}),this.domNode[i.DATA_KEY].mutations!=null&&m.prototype.update.call(this,this.domNode[i.DATA_KEY].mutations,j),this.optimize(x,j)},u.blotName="scroll",u.defaultChild="block",u.scope=i.Scope.BLOCK_BLOT,u.tagName="DIV",u}(o.default);n.default=p},function(r,n,a){var l=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,u){m.__proto__=u}||function(m,u){for(var x in u)u.hasOwnProperty(x)&&(m[x]=u[x])};return function(m,u){p(m,u);function x(){this.constructor=m}m.prototype=u===null?Object.create(u):(x.prototype=u.prototype,new x)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(18),i=a(1);function c(p,m){if(Object.keys(p).length!==Object.keys(m).length)return!1;for(var u in p)if(p[u]!==m[u])return!1;return!0}var h=function(p){l(m,p);function m(){return p!==null&&p.apply(this,arguments)||this}return m.formats=function(u){if(u.tagName!==m.tagName)return p.formats.call(this,u)},m.prototype.format=function(u,x){var j=this;u===this.statics.blotName&&!x?(this.children.forEach(function(v){v instanceof o.default||(v=v.wrap(m.blotName,!0)),j.attributes.copy(v)}),this.unwrap()):p.prototype.format.call(this,u,x)},m.prototype.formatAt=function(u,x,j,v){if(this.formats()[j]!=null||i.query(j,i.Scope.ATTRIBUTE)){var N=this.isolate(u,x);N.format(j,v)}else p.prototype.formatAt.call(this,u,x,j,v)},m.prototype.optimize=function(u){p.prototype.optimize.call(this,u);var x=this.formats();if(Object.keys(x).length===0)return this.unwrap();var j=this.next;j instanceof m&&j.prev===this&&c(x,j.formats())&&(j.moveChildren(this),j.remove())},m.blotName="inline",m.scope=i.Scope.INLINE_BLOT,m.tagName="SPAN",m}(o.default);n.default=h},function(r,n,a){var l=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var u in m)m.hasOwnProperty(u)&&(p[u]=m[u])};return function(p,m){h(p,m);function u(){this.constructor=p}p.prototype=m===null?Object.create(m):(u.prototype=m.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(18),i=a(1),c=function(h){l(p,h);function p(){return h!==null&&h.apply(this,arguments)||this}return p.formats=function(m){var u=i.query(p.blotName).tagName;if(m.tagName!==u)return h.formats.call(this,m)},p.prototype.format=function(m,u){i.query(m,i.Scope.BLOCK)!=null&&(m===this.statics.blotName&&!u?this.replaceWith(p.blotName):h.prototype.format.call(this,m,u))},p.prototype.formatAt=function(m,u,x,j){i.query(x,i.Scope.BLOCK)!=null?this.format(x,j):h.prototype.formatAt.call(this,m,u,x,j)},p.prototype.insertAt=function(m,u,x){if(x==null||i.query(u,i.Scope.INLINE)!=null)h.prototype.insertAt.call(this,m,u,x);else{var j=this.split(m),v=i.create(u,x);j.parent.insertBefore(v,j)}},p.prototype.update=function(m,u){navigator.userAgent.match(/Trident/)?this.build():h.prototype.update.call(this,m,u)},p.blotName="block",p.scope=i.Scope.BLOCK_BLOT,p.tagName="P",p}(o.default);n.default=c},function(r,n,a){var l=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var m in p)p.hasOwnProperty(m)&&(h[m]=p[m])};return function(h,p){c(h,p);function m(){this.constructor=h}h.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(19),i=function(c){l(h,c);function h(){return c!==null&&c.apply(this,arguments)||this}return h.formats=function(p){},h.prototype.format=function(p,m){c.prototype.formatAt.call(this,0,this.length(),p,m)},h.prototype.formatAt=function(p,m,u,x){p===0&&m===this.length()?this.format(u,x):c.prototype.formatAt.call(this,p,m,u,x)},h.prototype.formats=function(){return this.statics.formats(this.domNode)},h}(o.default);n.default=i},function(r,n,a){var l=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var u in m)m.hasOwnProperty(u)&&(p[u]=m[u])};return function(p,m){h(p,m);function u(){this.constructor=p}p.prototype=m===null?Object.create(m):(u.prototype=m.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(19),i=a(1),c=function(h){l(p,h);function p(m){var u=h.call(this,m)||this;return u.text=u.statics.value(u.domNode),u}return p.create=function(m){return document.createTextNode(m)},p.value=function(m){var u=m.data;return u.normalize&&(u=u.normalize()),u},p.prototype.deleteAt=function(m,u){this.domNode.data=this.text=this.text.slice(0,m)+this.text.slice(m+u)},p.prototype.index=function(m,u){return this.domNode===m?u:-1},p.prototype.insertAt=function(m,u,x){x==null?(this.text=this.text.slice(0,m)+u+this.text.slice(m),this.domNode.data=this.text):h.prototype.insertAt.call(this,m,u,x)},p.prototype.length=function(){return this.text.length},p.prototype.optimize=function(m){h.prototype.optimize.call(this,m),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof p&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},p.prototype.position=function(m,u){return[this.domNode,m]},p.prototype.split=function(m,u){if(u===void 0&&(u=!1),!u){if(m===0)return this;if(m===this.length())return this.next}var x=i.create(this.domNode.splitText(m));return this.parent.insertBefore(x,this.next),this.text=this.statics.value(this.domNode),x},p.prototype.update=function(m,u){var x=this;m.some(function(j){return j.type==="characterData"&&j.target===x.domNode})&&(this.text=this.statics.value(this.domNode))},p.prototype.value=function(){return this.text},p.blotName="text",p.scope=i.Scope.INLINE_BLOT,p}(o.default);n.default=c},function(r,n,a){var l=document.createElement("div");if(l.classList.toggle("test-class",!1),l.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(i,c){return arguments.length>1&&!this.contains(i)==!c?c:o.call(this,i)}}String.prototype.startsWith||(String.prototype.startsWith=function(i,c){return c=c||0,this.substr(c,i.length)===i}),String.prototype.endsWith||(String.prototype.endsWith=function(i,c){var h=this.toString();(typeof c!="number"||!isFinite(c)||Math.floor(c)!==c||c>h.length)&&(c=h.length),c-=i.length;var p=h.indexOf(i,c);return p!==-1&&p===c}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof c!="function")throw new TypeError("predicate must be a function");for(var h=Object(this),p=h.length>>>0,m=arguments[1],u,x=0;x<p;x++)if(u=h[x],c.call(m,u,x,h))return u}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(r,n){var a=-1,l=1,o=0;function i(b,E,R){if(b==E)return b?[[o,b]]:[];(R<0||b.length<R)&&(R=null);var S=m(b,E),k=b.substring(0,S);b=b.substring(S),E=E.substring(S),S=u(b,E);var L=b.substring(b.length-S);b=b.substring(0,b.length-S),E=E.substring(0,E.length-S);var A=c(b,E);return k&&A.unshift([o,k]),L&&A.push([o,L]),j(A),R!=null&&(A=f(A,R)),A=d(A),A}function c(b,E){var R;if(!b)return[[l,E]];if(!E)return[[a,b]];var S=b.length>E.length?b:E,k=b.length>E.length?E:b,L=S.indexOf(k);if(L!=-1)return R=[[l,S.substring(0,L)],[o,k],[l,S.substring(L+k.length)]],b.length>E.length&&(R[0][0]=R[2][0]=a),R;if(k.length==1)return[[a,b],[l,E]];var A=x(b,E);if(A){var D=A[0],I=A[1],O=A[2],C=A[3],F=A[4],U=i(D,O),Y=i(I,C);return U.concat([[o,F]],Y)}return h(b,E)}function h(b,E){for(var R=b.length,S=E.length,k=Math.ceil((R+S)/2),L=k,A=2*k,D=new Array(A),I=new Array(A),O=0;O<A;O++)D[O]=-1,I[O]=-1;D[L+1]=0,I[L+1]=0;for(var C=R-S,F=C%2!=0,U=0,Y=0,G=0,V=0,W=0;W<k;W++){for(var _=-W+U;_<=W-Y;_+=2){var M=L+_,P;_==-W||_!=W&&D[M-1]<D[M+1]?P=D[M+1]:P=D[M-1]+1;for(var $=P-_;P<R&&$<S&&b.charAt(P)==E.charAt($);)P++,$++;if(D[M]=P,P>R)Y+=2;else if($>S)U+=2;else if(F){var B=L+C-_;if(B>=0&&B<A&&I[B]!=-1){var w=R-I[B];if(P>=w)return p(b,E,P,$)}}}for(var T=-W+G;T<=W-V;T+=2){var B=L+T,w;T==-W||T!=W&&I[B-1]<I[B+1]?w=I[B+1]:w=I[B-1]+1;for(var H=w-T;w<R&&H<S&&b.charAt(R-w-1)==E.charAt(S-H-1);)w++,H++;if(I[B]=w,w>R)V+=2;else if(H>S)G+=2;else if(!F){var M=L+C-T;if(M>=0&&M<A&&D[M]!=-1){var P=D[M],$=L+P-M;if(w=R-w,P>=w)return p(b,E,P,$)}}}}return[[a,b],[l,E]]}function p(b,E,R,S){var k=b.substring(0,R),L=E.substring(0,S),A=b.substring(R),D=E.substring(S),I=i(k,L),O=i(A,D);return I.concat(O)}function m(b,E){if(!b||!E||b.charAt(0)!=E.charAt(0))return 0;for(var R=0,S=Math.min(b.length,E.length),k=S,L=0;R<k;)b.substring(L,k)==E.substring(L,k)?(R=k,L=R):S=k,k=Math.floor((S-R)/2+R);return k}function u(b,E){if(!b||!E||b.charAt(b.length-1)!=E.charAt(E.length-1))return 0;for(var R=0,S=Math.min(b.length,E.length),k=S,L=0;R<k;)b.substring(b.length-k,b.length-L)==E.substring(E.length-k,E.length-L)?(R=k,L=R):S=k,k=Math.floor((S-R)/2+R);return k}function x(b,E){var R=b.length>E.length?b:E,S=b.length>E.length?E:b;if(R.length<4||S.length*2<R.length)return null;function k(Y,G,V){for(var W=Y.substring(V,V+Math.floor(Y.length/4)),_=-1,M="",P,$,B,w;(_=G.indexOf(W,_+1))!=-1;){var T=m(Y.substring(V),G.substring(_)),H=u(Y.substring(0,V),G.substring(0,_));M.length<H+T&&(M=G.substring(_-H,_)+G.substring(_,_+T),P=Y.substring(0,V-H),$=Y.substring(V+T),B=G.substring(0,_-H),w=G.substring(_+T))}return M.length*2>=Y.length?[P,$,B,w,M]:null}var L=k(R,S,Math.ceil(R.length/4)),A=k(R,S,Math.ceil(R.length/2)),D;if(!L&&!A)return null;A?L?D=L[4].length>A[4].length?L:A:D=A:D=L;var I,O,C,F;b.length>E.length?(I=D[0],O=D[1],C=D[2],F=D[3]):(C=D[0],F=D[1],I=D[2],O=D[3]);var U=D[4];return[I,O,C,F,U]}function j(b){b.push([o,""]);for(var E=0,R=0,S=0,k="",L="",A;E<b.length;)switch(b[E][0]){case l:S++,L+=b[E][1],E++;break;case a:R++,k+=b[E][1],E++;break;case o:R+S>1?(R!==0&&S!==0&&(A=m(L,k),A!==0&&(E-R-S>0&&b[E-R-S-1][0]==o?b[E-R-S-1][1]+=L.substring(0,A):(b.splice(0,0,[o,L.substring(0,A)]),E++),L=L.substring(A),k=k.substring(A)),A=u(L,k),A!==0&&(b[E][1]=L.substring(L.length-A)+b[E][1],L=L.substring(0,L.length-A),k=k.substring(0,k.length-A))),R===0?b.splice(E-S,R+S,[l,L]):S===0?b.splice(E-R,R+S,[a,k]):b.splice(E-R-S,R+S,[a,k],[l,L]),E=E-R-S+(R?1:0)+(S?1:0)+1):E!==0&&b[E-1][0]==o?(b[E-1][1]+=b[E][1],b.splice(E,1)):E++,S=0,R=0,k="",L="";break}b[b.length-1][1]===""&&b.pop();var D=!1;for(E=1;E<b.length-1;)b[E-1][0]==o&&b[E+1][0]==o&&(b[E][1].substring(b[E][1].length-b[E-1][1].length)==b[E-1][1]?(b[E][1]=b[E-1][1]+b[E][1].substring(0,b[E][1].length-b[E-1][1].length),b[E+1][1]=b[E-1][1]+b[E+1][1],b.splice(E-1,1),D=!0):b[E][1].substring(0,b[E+1][1].length)==b[E+1][1]&&(b[E-1][1]+=b[E+1][1],b[E][1]=b[E][1].substring(b[E+1][1].length)+b[E+1][1],b.splice(E+1,1),D=!0)),E++;D&&j(b)}var v=i;v.INSERT=l,v.DELETE=a,v.EQUAL=o,r.exports=v;function N(b,E){if(E===0)return[o,b];for(var R=0,S=0;S<b.length;S++){var k=b[S];if(k[0]===a||k[0]===o){var L=R+k[1].length;if(E===L)return[S+1,b];if(E<L){b=b.slice();var A=E-R,D=[k[0],k[1].slice(0,A)],I=[k[0],k[1].slice(A)];return b.splice(S,1,D,I),[S+1,b]}else R=L}}throw new Error("cursor_pos is out of bounds!")}function f(b,E){var R=N(b,E),S=R[1],k=R[0],L=S[k],A=S[k+1];if(L==null)return b;if(L[0]!==o)return b;if(A!=null&&L[1]+A[1]===A[1]+L[1])return S.splice(k,2,A,L),g(S,k,2);if(A!=null&&A[1].indexOf(L[1])===0){S.splice(k,2,[A[0],L[1]],[0,L[1]]);var D=A[1].slice(L[1].length);return D.length>0&&S.splice(k+2,0,[A[0],D]),g(S,k,3)}else return b}function d(b){for(var E=!1,R=function(A){return A.charCodeAt(0)>=56320&&A.charCodeAt(0)<=57343},S=function(A){return A.charCodeAt(A.length-1)>=55296&&A.charCodeAt(A.length-1)<=56319},k=2;k<b.length;k+=1)b[k-2][0]===o&&S(b[k-2][1])&&b[k-1][0]===a&&R(b[k-1][1])&&b[k][0]===l&&R(b[k][1])&&(E=!0,b[k-1][1]=b[k-2][1].slice(-1)+b[k-1][1],b[k][1]=b[k-2][1].slice(-1)+b[k][1],b[k-2][1]=b[k-2][1].slice(0,-1));if(!E)return b;for(var L=[],k=0;k<b.length;k+=1)b[k][1].length>0&&L.push(b[k]);return L}function g(b,E,R){for(var S=E+R-1;S>=0&&S>=E-1;S--)if(S+1<b.length){var k=b[S],L=b[S+1];k[0]===L[1]&&b.splice(S,2,[k[0],k[1]+L[1]])}return b}},function(r,n){n=r.exports=typeof Object.keys=="function"?Object.keys:a,n.shim=a;function a(l){var o=[];for(var i in l)o.push(i);return o}},function(r,n){var a=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=r.exports=a?l:o,n.supported=l;function l(i){return Object.prototype.toString.call(i)=="[object Arguments]"}n.unsupported=o;function o(i){return i&&typeof i=="object"&&typeof i.length=="number"&&Object.prototype.hasOwnProperty.call(i,"callee")&&!Object.prototype.propertyIsEnumerable.call(i,"callee")||!1}},function(r,n){var a=Object.prototype.hasOwnProperty,l="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(l=!1));function i(h,p,m){this.fn=h,this.context=p,this.once=m||!1}function c(){this._events=new o,this._eventsCount=0}c.prototype.eventNames=function(){var p=[],m,u;if(this._eventsCount===0)return p;for(u in m=this._events)a.call(m,u)&&p.push(l?u.slice(1):u);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(m)):p},c.prototype.listeners=function(p,m){var u=l?l+p:p,x=this._events[u];if(m)return!!x;if(!x)return[];if(x.fn)return[x.fn];for(var j=0,v=x.length,N=new Array(v);j<v;j++)N[j]=x[j].fn;return N},c.prototype.emit=function(p,m,u,x,j,v){var N=l?l+p:p;if(!this._events[N])return!1;var f=this._events[N],d=arguments.length,g,b;if(f.fn){switch(f.once&&this.removeListener(p,f.fn,void 0,!0),d){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,m),!0;case 3:return f.fn.call(f.context,m,u),!0;case 4:return f.fn.call(f.context,m,u,x),!0;case 5:return f.fn.call(f.context,m,u,x,j),!0;case 6:return f.fn.call(f.context,m,u,x,j,v),!0}for(b=1,g=new Array(d-1);b<d;b++)g[b-1]=arguments[b];f.fn.apply(f.context,g)}else{var E=f.length,R;for(b=0;b<E;b++)switch(f[b].once&&this.removeListener(p,f[b].fn,void 0,!0),d){case 1:f[b].fn.call(f[b].context);break;case 2:f[b].fn.call(f[b].context,m);break;case 3:f[b].fn.call(f[b].context,m,u);break;case 4:f[b].fn.call(f[b].context,m,u,x);break;default:if(!g)for(R=1,g=new Array(d-1);R<d;R++)g[R-1]=arguments[R];f[b].fn.apply(f[b].context,g)}}return!0},c.prototype.on=function(p,m,u){var x=new i(m,u||this),j=l?l+p:p;return this._events[j]?this._events[j].fn?this._events[j]=[this._events[j],x]:this._events[j].push(x):(this._events[j]=x,this._eventsCount++),this},c.prototype.once=function(p,m,u){var x=new i(m,u||this,!0),j=l?l+p:p;return this._events[j]?this._events[j].fn?this._events[j]=[this._events[j],x]:this._events[j].push(x):(this._events[j]=x,this._eventsCount++),this},c.prototype.removeListener=function(p,m,u,x){var j=l?l+p:p;if(!this._events[j])return this;if(!m)return--this._eventsCount===0?this._events=new o:delete this._events[j],this;var v=this._events[j];if(v.fn)v.fn===m&&(!x||v.once)&&(!u||v.context===u)&&(--this._eventsCount===0?this._events=new o:delete this._events[j]);else{for(var N=0,f=[],d=v.length;N<d;N++)(v[N].fn!==m||x&&!v[N].once||u&&v[N].context!==u)&&f.push(v[N]);f.length?this._events[j]=f.length===1?f[0]:f:--this._eventsCount===0?this._events=new o:delete this._events[j]}return this},c.prototype.removeAllListeners=function(p){var m;return p?(m=l?l+p:p,this._events[m]&&(--this._eventsCount===0?this._events=new o:delete this._events[m])):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=l,c.EventEmitter=c,typeof r<"u"&&(r.exports=c)},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ye){return typeof ye}:function(ye){return ye&&typeof Symbol=="function"&&ye.constructor===Symbol&&ye!==Symbol.prototype?"symbol":typeof ye},o=function(){function ye(se,we){var ve=[],Q=!0,ne=!1,he=void 0;try{for(var Me=se[Symbol.iterator](),be;!(Q=(be=Me.next()).done)&&(ve.push(be.value),!(we&&ve.length===we));Q=!0);}catch(De){ne=!0,he=De}finally{try{!Q&&Me.return&&Me.return()}finally{if(ne)throw he}}return ve}return function(se,we){if(Array.isArray(se))return se;if(Symbol.iterator in Object(se))return ye(se,we);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function ye(se,we){for(var ve=0;ve<we.length;ve++){var Q=we[ve];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(se,Q.key,Q)}}return function(se,we,ve){return we&&ye(se.prototype,we),ve&&ye(se,ve),se}}(),c=a(3),h=I(c),p=a(2),m=I(p),u=a(0),x=I(u),j=a(5),v=I(j),N=a(10),f=I(N),d=a(9),g=I(d),b=a(36),E=a(37),R=a(13),S=I(R),k=a(26),L=a(38),A=a(39),D=a(40);function I(ye){return ye&&ye.__esModule?ye:{default:ye}}function O(ye,se,we){return se in ye?Object.defineProperty(ye,se,{value:we,enumerable:!0,configurable:!0,writable:!0}):ye[se]=we,ye}function C(ye,se){if(!(ye instanceof se))throw new TypeError("Cannot call a class as a function")}function F(ye,se){if(!ye)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se&&(typeof se=="object"||typeof se=="function")?se:ye}function U(ye,se){if(typeof se!="function"&&se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof se);ye.prototype=Object.create(se&&se.prototype,{constructor:{value:ye,enumerable:!1,writable:!0,configurable:!0}}),se&&(Object.setPrototypeOf?Object.setPrototypeOf(ye,se):ye.__proto__=se)}var Y=(0,f.default)("quill:clipboard"),G="__ql-matcher",V=[[Node.TEXT_NODE,Ie],[Node.TEXT_NODE,ce],["br",X],[Node.ELEMENT_NODE,ce],[Node.ELEMENT_NODE,J],[Node.ELEMENT_NODE,Ae],[Node.ELEMENT_NODE,K],[Node.ELEMENT_NODE,Be],["li",oe],["b",H.bind(H,"bold")],["i",H.bind(H,"italic")],["style",pe]],W=[b.AlignAttribute,L.DirectionAttribute].reduce(function(ye,se){return ye[se.keyName]=se,ye},{}),_=[b.AlignStyle,E.BackgroundStyle,k.ColorStyle,L.DirectionStyle,A.FontStyle,D.SizeStyle].reduce(function(ye,se){return ye[se.keyName]=se,ye},{}),M=function(ye){U(se,ye);function se(we,ve){C(this,se);var Q=F(this,(se.__proto__||Object.getPrototypeOf(se)).call(this,we,ve));return Q.quill.root.addEventListener("paste",Q.onPaste.bind(Q)),Q.container=Q.quill.addContainer("ql-clipboard"),Q.container.setAttribute("contenteditable",!0),Q.container.setAttribute("tabindex",-1),Q.matchers=[],V.concat(Q.options.matchers).forEach(function(ne){var he=o(ne,2),Me=he[0],be=he[1];!ve.matchVisual&&be===Ae||Q.addMatcher(Me,be)}),Q}return i(se,[{key:"addMatcher",value:function(ve,Q){this.matchers.push([ve,Q])}},{key:"convert",value:function(ve){if(typeof ve=="string")return this.container.innerHTML=ve.replace(/\>\r?\n +\</g,"><"),this.convert();var Q=this.quill.getFormat(this.quill.selection.savedRange.index);if(Q[S.default.blotName]){var ne=this.container.innerText;return this.container.innerHTML="",new m.default().insert(ne,O({},S.default.blotName,Q[S.default.blotName]))}var he=this.prepareMatching(),Me=o(he,2),be=Me[0],De=Me[1],ze=T(this.container,be,De);return B(ze,`
`)&&ze.ops[ze.ops.length-1].attributes==null&&(ze=ze.compose(new m.default().retain(ze.length()-1).delete(1))),Y.log("convert",this.container.innerHTML,ze),this.container.innerHTML="",ze}},{key:"dangerouslyPasteHTML",value:function(ve,Q){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof ve=="string")this.quill.setContents(this.convert(ve),Q),this.quill.setSelection(0,v.default.sources.SILENT);else{var he=this.convert(Q);this.quill.updateContents(new m.default().retain(ve).concat(he),ne),this.quill.setSelection(ve+he.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(ve){var Q=this;if(!(ve.defaultPrevented||!this.quill.isEnabled())){var ne=this.quill.getSelection(),he=new m.default().retain(ne.index),Me=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){he=he.concat(Q.convert()).delete(ne.length),Q.quill.updateContents(he,v.default.sources.USER),Q.quill.setSelection(he.length()-ne.length,v.default.sources.SILENT),Q.quill.scrollingContainer.scrollTop=Me,Q.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ve=this,Q=[],ne=[];return this.matchers.forEach(function(he){var Me=o(he,2),be=Me[0],De=Me[1];switch(be){case Node.TEXT_NODE:ne.push(De);break;case Node.ELEMENT_NODE:Q.push(De);break;default:[].forEach.call(ve.container.querySelectorAll(be),function(ze){ze[G]=ze[G]||[],ze[G].push(De)});break}}),[Q,ne]}}]),se}(g.default);M.DEFAULTS={matchers:[],matchVisual:!0};function P(ye,se,we){return(typeof se>"u"?"undefined":l(se))==="object"?Object.keys(se).reduce(function(ve,Q){return P(ve,Q,se[Q])},ye):ye.reduce(function(ve,Q){return Q.attributes&&Q.attributes[se]?ve.push(Q):ve.insert(Q.insert,(0,h.default)({},O({},se,we),Q.attributes))},new m.default)}function $(ye){if(ye.nodeType!==Node.ELEMENT_NODE)return{};var se="__ql-computed-style";return ye[se]||(ye[se]=window.getComputedStyle(ye))}function B(ye,se){for(var we="",ve=ye.ops.length-1;ve>=0&&we.length<se.length;--ve){var Q=ye.ops[ve];if(typeof Q.insert!="string")break;we=Q.insert+we}return we.slice(-1*se.length)===se}function w(ye){if(ye.childNodes.length===0)return!1;var se=$(ye);return["block","list-item"].indexOf(se.display)>-1}function T(ye,se,we){return ye.nodeType===ye.TEXT_NODE?we.reduce(function(ve,Q){return Q(ye,ve)},new m.default):ye.nodeType===ye.ELEMENT_NODE?[].reduce.call(ye.childNodes||[],function(ve,Q){var ne=T(Q,se,we);return Q.nodeType===ye.ELEMENT_NODE&&(ne=se.reduce(function(he,Me){return Me(Q,he)},ne),ne=(Q[G]||[]).reduce(function(he,Me){return Me(Q,he)},ne)),ve.concat(ne)},new m.default):new m.default}function H(ye,se,we){return P(we,ye,!0)}function K(ye,se){var we=x.default.Attributor.Attribute.keys(ye),ve=x.default.Attributor.Class.keys(ye),Q=x.default.Attributor.Style.keys(ye),ne={};return we.concat(ve).concat(Q).forEach(function(he){var Me=x.default.query(he,x.default.Scope.ATTRIBUTE);Me!=null&&(ne[Me.attrName]=Me.value(ye),ne[Me.attrName])||(Me=W[he],Me!=null&&(Me.attrName===he||Me.keyName===he)&&(ne[Me.attrName]=Me.value(ye)||void 0),Me=_[he],Me!=null&&(Me.attrName===he||Me.keyName===he)&&(Me=_[he],ne[Me.attrName]=Me.value(ye)||void 0))}),Object.keys(ne).length>0&&(se=P(se,ne)),se}function J(ye,se){var we=x.default.query(ye);if(we==null)return se;if(we.prototype instanceof x.default.Embed){var ve={},Q=we.value(ye);Q!=null&&(ve[we.blotName]=Q,se=new m.default().insert(ve,we.formats(ye)))}else typeof we.formats=="function"&&(se=P(se,we.blotName,we.formats(ye)));return se}function X(ye,se){return B(se,`
`)||se.insert(`
`),se}function pe(){return new m.default}function oe(ye,se){var we=x.default.query(ye);if(we==null||we.blotName!=="list-item"||!B(se,`
`))return se;for(var ve=-1,Q=ye.parentNode;!Q.classList.contains("ql-clipboard");)(x.default.query(Q)||{}).blotName==="list"&&(ve+=1),Q=Q.parentNode;return ve<=0?se:se.compose(new m.default().retain(se.length()-1).retain(1,{indent:ve}))}function ce(ye,se){return B(se,`
`)||(w(ye)||se.length()>0&&ye.nextSibling&&w(ye.nextSibling))&&se.insert(`
`),se}function Ae(ye,se){if(w(ye)&&ye.nextElementSibling!=null&&!B(se,`

`)){var we=ye.offsetHeight+parseFloat($(ye).marginTop)+parseFloat($(ye).marginBottom);ye.nextElementSibling.offsetTop>ye.offsetTop+we*1.5&&se.insert(`
`)}return se}function Be(ye,se){var we={},ve=ye.style||{};return ve.fontStyle&&$(ye).fontStyle==="italic"&&(we.italic=!0),ve.fontWeight&&($(ye).fontWeight.startsWith("bold")||parseInt($(ye).fontWeight)>=700)&&(we.bold=!0),Object.keys(we).length>0&&(se=P(se,we)),parseFloat(ve.textIndent||0)>0&&(se=new m.default().insert("	").concat(se)),se}function Ie(ye,se){var we=ye.data;if(ye.parentNode.tagName==="O:P")return se.insert(we.trim());if(we.trim().length===0&&ye.parentNode.classList.contains("ql-clipboard"))return se;if(!$(ye.parentNode).whiteSpace.startsWith("pre")){var ve=function(ne,he){return he=he.replace(/[^\u00a0]/g,""),he.length<1&&ne?" ":he};we=we.replace(/\r\n/g," ").replace(/\n/g," "),we=we.replace(/\s\s+/g,ve.bind(ve,!0)),(ye.previousSibling==null&&w(ye.parentNode)||ye.previousSibling!=null&&w(ye.previousSibling))&&(we=we.replace(/^\s+/,ve.bind(ve,!1))),(ye.nextSibling==null&&w(ye.parentNode)||ye.nextSibling!=null&&w(ye.nextSibling))&&(we=we.replace(/\s+$/,ve.bind(ve,!1)))}return se.insert(we)}n.default=M,n.matchAttributor=K,n.matchBlot=J,n.matchNewline=ce,n.matchSpacing=Ae,n.matchText=Ie},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function j(v,N){for(var f=0;f<N.length;f++){var d=N[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(v,d.key,d)}}return function(v,N,f){return N&&j(v.prototype,N),f&&j(v,f),v}}(),o=function j(v,N,f){v===null&&(v=Function.prototype);var d=Object.getOwnPropertyDescriptor(v,N);if(d===void 0){var g=Object.getPrototypeOf(v);return g===null?void 0:j(g,N,f)}else{if("value"in d)return d.value;var b=d.get;return b===void 0?void 0:b.call(f)}},i=a(6),c=h(i);function h(j){return j&&j.__esModule?j:{default:j}}function p(j,v){if(!(j instanceof v))throw new TypeError("Cannot call a class as a function")}function m(j,v){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:j}function u(j,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);j.prototype=Object.create(v&&v.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(j,v):j.__proto__=v)}var x=function(j){u(v,j);function v(){return p(this,v),m(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return l(v,[{key:"optimize",value:function(f){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,f),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v}(c.default);x.blotName="bold",x.tagName=["STRONG","B"],n.default=x},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var l=function(){function D(I,O){var C=[],F=!0,U=!1,Y=void 0;try{for(var G=I[Symbol.iterator](),V;!(F=(V=G.next()).done)&&(C.push(V.value),!(O&&C.length===O));F=!0);}catch(W){U=!0,Y=W}finally{try{!F&&G.return&&G.return()}finally{if(U)throw Y}}return C}return function(I,O){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return D(I,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function D(I,O){for(var C=0;C<O.length;C++){var F=O[C];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(I,F.key,F)}}return function(I,O,C){return O&&D(I.prototype,O),C&&D(I,C),I}}(),i=a(2),c=f(i),h=a(0),p=f(h),m=a(5),u=f(m),x=a(10),j=f(x),v=a(9),N=f(v);function f(D){return D&&D.__esModule?D:{default:D}}function d(D,I,O){return I in D?Object.defineProperty(D,I,{value:O,enumerable:!0,configurable:!0,writable:!0}):D[I]=O,D}function g(D,I){if(!(D instanceof I))throw new TypeError("Cannot call a class as a function")}function b(D,I){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:D}function E(D,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);D.prototype=Object.create(I&&I.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(D,I):D.__proto__=I)}var R=(0,j.default)("quill:toolbar"),S=function(D){E(I,D);function I(O,C){g(this,I);var F=b(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,O,C));if(Array.isArray(F.options.container)){var U=document.createElement("div");L(U,F.options.container),O.container.parentNode.insertBefore(U,O.container),F.container=U}else typeof F.options.container=="string"?F.container=document.querySelector(F.options.container):F.container=F.options.container;if(!(F.container instanceof HTMLElement)){var Y;return Y=R.error("Container required for toolbar",F.options),b(F,Y)}return F.container.classList.add("ql-toolbar"),F.controls=[],F.handlers={},Object.keys(F.options.handlers).forEach(function(G){F.addHandler(G,F.options.handlers[G])}),[].forEach.call(F.container.querySelectorAll("button, select"),function(G){F.attach(G)}),F.quill.on(u.default.events.EDITOR_CHANGE,function(G,V){G===u.default.events.SELECTION_CHANGE&&F.update(V)}),F.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){var G=F.quill.selection.getRange(),V=l(G,1),W=V[0];F.update(W)}),F}return o(I,[{key:"addHandler",value:function(C,F){this.handlers[C]=F}},{key:"attach",value:function(C){var F=this,U=[].find.call(C.classList,function(G){return G.indexOf("ql-")===0});if(U){if(U=U.slice(3),C.tagName==="BUTTON"&&C.setAttribute("type","button"),this.handlers[U]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[U]==null){R.warn("ignoring attaching to disabled format",U,C);return}if(p.default.query(U)==null){R.warn("ignoring attaching to nonexistent format",U,C);return}}var Y=C.tagName==="SELECT"?"change":"click";C.addEventListener(Y,function(G){var V=void 0;if(C.tagName==="SELECT"){if(C.selectedIndex<0)return;var W=C.options[C.selectedIndex];W.hasAttribute("selected")?V=!1:V=W.value||!1}else C.classList.contains("ql-active")?V=!1:V=C.value||!C.hasAttribute("value"),G.preventDefault();F.quill.focus();var _=F.quill.selection.getRange(),M=l(_,1),P=M[0];if(F.handlers[U]!=null)F.handlers[U].call(F,V);else if(p.default.query(U).prototype instanceof p.default.Embed){if(V=prompt("Enter "+U),!V)return;F.quill.updateContents(new c.default().retain(P.index).delete(P.length).insert(d({},U,V)),u.default.sources.USER)}else F.quill.format(U,V,u.default.sources.USER);F.update(P)}),this.controls.push([U,C])}}},{key:"update",value:function(C){var F=C==null?{}:this.quill.getFormat(C);this.controls.forEach(function(U){var Y=l(U,2),G=Y[0],V=Y[1];if(V.tagName==="SELECT"){var W=void 0;if(C==null)W=null;else if(F[G]==null)W=V.querySelector("option[selected]");else if(!Array.isArray(F[G])){var _=F[G];typeof _=="string"&&(_=_.replace(/\"/g,'\\"')),W=V.querySelector('option[value="'+_+'"]')}W==null?(V.value="",V.selectedIndex=-1):W.selected=!0}else if(C==null)V.classList.remove("ql-active");else if(V.hasAttribute("value")){var M=F[G]===V.getAttribute("value")||F[G]!=null&&F[G].toString()===V.getAttribute("value")||F[G]==null&&!V.getAttribute("value");V.classList.toggle("ql-active",M)}else V.classList.toggle("ql-active",F[G]!=null)})}}]),I}(N.default);S.DEFAULTS={};function k(D,I,O){var C=document.createElement("button");C.setAttribute("type","button"),C.classList.add("ql-"+I),O!=null&&(C.value=O),D.appendChild(C)}function L(D,I){Array.isArray(I[0])||(I=[I]),I.forEach(function(O){var C=document.createElement("span");C.classList.add("ql-formats"),O.forEach(function(F){if(typeof F=="string")k(C,F);else{var U=Object.keys(F)[0],Y=F[U];Array.isArray(Y)?A(C,U,Y):k(C,U,Y)}}),D.appendChild(C)})}function A(D,I,O){var C=document.createElement("select");C.classList.add("ql-"+I),O.forEach(function(F){var U=document.createElement("option");F!==!1?U.setAttribute("value",F):U.setAttribute("selected","selected"),C.appendChild(U)}),D.appendChild(C)}S.DEFAULTS={container:null,handlers:{clean:function(){var I=this,O=this.quill.getSelection();if(O!=null)if(O.length==0){var C=this.quill.getFormat();Object.keys(C).forEach(function(F){p.default.query(F,p.default.Scope.INLINE)!=null&&I.quill.format(F,!1)})}else this.quill.removeFormat(O,u.default.sources.USER)},direction:function(I){var O=this.quill.getFormat().align;I==="rtl"&&O==null?this.quill.format("align","right",u.default.sources.USER):!I&&O==="right"&&this.quill.format("align",!1,u.default.sources.USER),this.quill.format("direction",I,u.default.sources.USER)},indent:function(I){var O=this.quill.getSelection(),C=this.quill.getFormat(O),F=parseInt(C.indent||0);if(I==="+1"||I==="-1"){var U=I==="+1"?1:-1;C.direction==="rtl"&&(U*=-1),this.quill.format("indent",F+U,u.default.sources.USER)}},link:function(I){I===!0&&(I=prompt("Enter link URL:")),this.quill.format("link",I,u.default.sources.USER)},list:function(I){var O=this.quill.getSelection(),C=this.quill.getFormat(O);I==="check"?C.list==="checked"||C.list==="unchecked"?this.quill.format("list",!1,u.default.sources.USER):this.quill.format("list","unchecked",u.default.sources.USER):this.quill.format("list",I,u.default.sources.USER)}}},n.default=S,n.addControls=L},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function j(v,N){for(var f=0;f<N.length;f++){var d=N[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(v,d.key,d)}}return function(v,N,f){return N&&j(v.prototype,N),f&&j(v,f),v}}(),o=function j(v,N,f){v===null&&(v=Function.prototype);var d=Object.getOwnPropertyDescriptor(v,N);if(d===void 0){var g=Object.getPrototypeOf(v);return g===null?void 0:j(g,N,f)}else{if("value"in d)return d.value;var b=d.get;return b===void 0?void 0:b.call(f)}},i=a(28),c=h(i);function h(j){return j&&j.__esModule?j:{default:j}}function p(j,v){if(!(j instanceof v))throw new TypeError("Cannot call a class as a function")}function m(j,v){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:j}function u(j,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);j.prototype=Object.create(v&&v.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(j,v):j.__proto__=v)}var x=function(j){u(v,j);function v(N,f){p(this,v);var d=m(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,N));return d.label.innerHTML=f,d.container.classList.add("ql-color-picker"),[].slice.call(d.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(g){g.classList.add("ql-primary")}),d}return l(v,[{key:"buildItem",value:function(f){var d=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,f);return d.style.backgroundColor=f.getAttribute("value")||"",d}},{key:"selectItem",value:function(f,d){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,f,d);var g=this.label.querySelector(".ql-color-label"),b=f&&f.getAttribute("data-value")||"";g&&(g.tagName==="line"?g.style.stroke=b:g.style.fill=b)}}]),v}(c.default);n.default=x},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function j(v,N){for(var f=0;f<N.length;f++){var d=N[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(v,d.key,d)}}return function(v,N,f){return N&&j(v.prototype,N),f&&j(v,f),v}}(),o=function j(v,N,f){v===null&&(v=Function.prototype);var d=Object.getOwnPropertyDescriptor(v,N);if(d===void 0){var g=Object.getPrototypeOf(v);return g===null?void 0:j(g,N,f)}else{if("value"in d)return d.value;var b=d.get;return b===void 0?void 0:b.call(f)}},i=a(28),c=h(i);function h(j){return j&&j.__esModule?j:{default:j}}function p(j,v){if(!(j instanceof v))throw new TypeError("Cannot call a class as a function")}function m(j,v){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:j}function u(j,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);j.prototype=Object.create(v&&v.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(j,v):j.__proto__=v)}var x=function(j){u(v,j);function v(N,f){p(this,v);var d=m(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,N));return d.container.classList.add("ql-icon-picker"),[].forEach.call(d.container.querySelectorAll(".ql-picker-item"),function(g){g.innerHTML=f[g.getAttribute("data-value")||""]}),d.defaultItem=d.container.querySelector(".ql-selected"),d.selectItem(d.defaultItem),d}return l(v,[{key:"selectItem",value:function(f,d){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,f,d),f=f||this.defaultItem,this.label.innerHTML=f.innerHTML}}]),v}(c.default);n.default=x},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function c(h,p){for(var m=0;m<p.length;m++){var u=p[m];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(h,u.key,u)}}return function(h,p,m){return p&&c(h.prototype,p),m&&c(h,m),h}}();function o(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}var i=function(){function c(h,p){var m=this;o(this,c),this.quill=h,this.boundsContainer=p||document.body,this.root=h.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){m.root.style.marginTop=-1*m.quill.root.scrollTop+"px"}),this.hide()}return l(c,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(p){var m=p.left+p.width/2-this.root.offsetWidth/2,u=p.bottom+this.quill.root.scrollTop;this.root.style.left=m+"px",this.root.style.top=u+"px",this.root.classList.remove("ql-flip");var x=this.boundsContainer.getBoundingClientRect(),j=this.root.getBoundingClientRect(),v=0;if(j.right>x.right&&(v=x.right-j.right,this.root.style.left=m+v+"px"),j.left<x.left&&(v=x.left-j.left,this.root.style.left=m+v+"px"),j.bottom>x.bottom){var N=j.bottom-j.top,f=p.bottom-p.top+N;this.root.style.top=u-f+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),c}();n.default=i},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function A(D,I){var O=[],C=!0,F=!1,U=void 0;try{for(var Y=D[Symbol.iterator](),G;!(C=(G=Y.next()).done)&&(O.push(G.value),!(I&&O.length===I));C=!0);}catch(V){F=!0,U=V}finally{try{!C&&Y.return&&Y.return()}finally{if(F)throw U}}return O}return function(D,I){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return A(D,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function A(D,I,O){D===null&&(D=Function.prototype);var C=Object.getOwnPropertyDescriptor(D,I);if(C===void 0){var F=Object.getPrototypeOf(D);return F===null?void 0:A(F,I,O)}else{if("value"in C)return C.value;var U=C.get;return U===void 0?void 0:U.call(O)}},i=function(){function A(D,I){for(var O=0;O<I.length;O++){var C=I[O];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(D,C.key,C)}}return function(D,I,O){return I&&A(D.prototype,I),O&&A(D,O),D}}(),c=a(3),h=g(c),p=a(8),m=g(p),u=a(43),x=g(u),j=a(27),v=g(j),N=a(15),f=a(41),d=g(f);function g(A){return A&&A.__esModule?A:{default:A}}function b(A,D){if(!(A instanceof D))throw new TypeError("Cannot call a class as a function")}function E(A,D){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:A}function R(A,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);A.prototype=Object.create(D&&D.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(A,D):A.__proto__=D)}var S=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],k=function(A){R(D,A);function D(I,O){b(this,D),O.modules.toolbar!=null&&O.modules.toolbar.container==null&&(O.modules.toolbar.container=S);var C=E(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,I,O));return C.quill.container.classList.add("ql-snow"),C}return i(D,[{key:"extendToolbar",value:function(O){O.container.classList.add("ql-snow"),this.buildButtons([].slice.call(O.container.querySelectorAll("button")),d.default),this.buildPickers([].slice.call(O.container.querySelectorAll("select")),d.default),this.tooltip=new L(this.quill,this.options.bounds),O.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(C,F){O.handlers.link.call(O,!F.format.link)})}}]),D}(x.default);k.DEFAULTS=(0,h.default)(!0,{},x.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(D){if(D){var I=this.quill.getSelection();if(I==null||I.length==0)return;var O=this.quill.getText(I);/^\S+@\S+\.\S+$/.test(O)&&O.indexOf("mailto:")!==0&&(O="mailto:"+O);var C=this.quill.theme.tooltip;C.edit("link",O)}else this.quill.format("link",!1)}}}}});var L=function(A){R(D,A);function D(I,O){b(this,D);var C=E(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,I,O));return C.preview=C.root.querySelector("a.ql-preview"),C}return i(D,[{key:"listen",value:function(){var O=this;o(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(C){O.root.classList.contains("ql-editing")?O.save():O.edit("link",O.preview.textContent),C.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(C){if(O.linkRange!=null){var F=O.linkRange;O.restoreFocus(),O.quill.formatText(F,"link",!1,m.default.sources.USER),delete O.linkRange}C.preventDefault(),O.hide()}),this.quill.on(m.default.events.SELECTION_CHANGE,function(C,F,U){if(C!=null){if(C.length===0&&U===m.default.sources.USER){var Y=O.quill.scroll.descendant(v.default,C.index),G=l(Y,2),V=G[0],W=G[1];if(V!=null){O.linkRange=new N.Range(C.index-W,V.length());var _=v.default.formats(V.domNode);O.preview.textContent=_,O.preview.setAttribute("href",_),O.show(),O.position(O.quill.getBounds(O.linkRange));return}}else delete O.linkRange;O.hide()}})}},{key:"show",value:function(){o(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),D}(u.BaseTooltip);L.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=k},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(29),o=Q(l),i=a(36),c=a(38),h=a(64),p=a(65),m=Q(p),u=a(66),x=Q(u),j=a(67),v=Q(j),N=a(37),f=a(26),d=a(39),g=a(40),b=a(56),E=Q(b),R=a(68),S=Q(R),k=a(27),L=Q(k),A=a(69),D=Q(A),I=a(70),O=Q(I),C=a(71),F=Q(C),U=a(72),Y=Q(U),G=a(73),V=Q(G),W=a(13),_=Q(W),M=a(74),P=Q(M),$=a(75),B=Q($),w=a(57),T=Q(w),H=a(41),K=Q(H),J=a(28),X=Q(J),pe=a(59),oe=Q(pe),ce=a(60),Ae=Q(ce),Be=a(61),Ie=Q(Be),ye=a(108),se=Q(ye),we=a(62),ve=Q(we);function Q(ne){return ne&&ne.__esModule?ne:{default:ne}}o.default.register({"attributors/attribute/direction":c.DirectionAttribute,"attributors/class/align":i.AlignClass,"attributors/class/background":N.BackgroundClass,"attributors/class/color":f.ColorClass,"attributors/class/direction":c.DirectionClass,"attributors/class/font":d.FontClass,"attributors/class/size":g.SizeClass,"attributors/style/align":i.AlignStyle,"attributors/style/background":N.BackgroundStyle,"attributors/style/color":f.ColorStyle,"attributors/style/direction":c.DirectionStyle,"attributors/style/font":d.FontStyle,"attributors/style/size":g.SizeStyle},!0),o.default.register({"formats/align":i.AlignClass,"formats/direction":c.DirectionClass,"formats/indent":h.IndentClass,"formats/background":N.BackgroundStyle,"formats/color":f.ColorStyle,"formats/font":d.FontClass,"formats/size":g.SizeClass,"formats/blockquote":m.default,"formats/code-block":_.default,"formats/header":x.default,"formats/list":v.default,"formats/bold":E.default,"formats/code":W.Code,"formats/italic":S.default,"formats/link":L.default,"formats/script":D.default,"formats/strike":O.default,"formats/underline":F.default,"formats/image":Y.default,"formats/video":V.default,"formats/list/item":j.ListItem,"modules/formula":P.default,"modules/syntax":B.default,"modules/toolbar":T.default,"themes/bubble":se.default,"themes/snow":ve.default,"ui/icons":K.default,"ui/picker":X.default,"ui/icon-picker":Ae.default,"ui/color-picker":oe.default,"ui/tooltip":Ie.default},!0),n.default=o.default},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var l=function(){function v(N,f){for(var d=0;d<f.length;d++){var g=f[d];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(N,g.key,g)}}return function(N,f,d){return f&&v(N.prototype,f),d&&v(N,d),N}}(),o=function v(N,f,d){N===null&&(N=Function.prototype);var g=Object.getOwnPropertyDescriptor(N,f);if(g===void 0){var b=Object.getPrototypeOf(N);return b===null?void 0:v(b,f,d)}else{if("value"in g)return g.value;var E=g.get;return E===void 0?void 0:E.call(d)}},i=a(0),c=h(i);function h(v){return v&&v.__esModule?v:{default:v}}function p(v,N){if(!(v instanceof N))throw new TypeError("Cannot call a class as a function")}function m(v,N){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:v}function u(v,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);v.prototype=Object.create(N&&N.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(v,N):v.__proto__=N)}var x=function(v){u(N,v);function N(){return p(this,N),m(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return l(N,[{key:"add",value:function(d,g){if(g==="+1"||g==="-1"){var b=this.value(d)||0;g=g==="+1"?b+1:b-1}return g===0?(this.remove(d),!0):o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"add",this).call(this,d,g)}},{key:"canAdd",value:function(d,g){return o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"canAdd",this).call(this,d,g)||o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"canAdd",this).call(this,d,parseInt(g))}},{key:"value",value:function(d){return parseInt(o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"value",this).call(this,d))||void 0}}]),N}(c.default.Attributor.Class),j=new x("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=j},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(4),o=i(l);function i(u){return u&&u.__esModule?u:{default:u}}function c(u,x){if(!(u instanceof x))throw new TypeError("Cannot call a class as a function")}function h(u,x){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:u}function p(u,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);u.prototype=Object.create(x&&x.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(u,x):u.__proto__=x)}var m=function(u){p(x,u);function x(){return c(this,x),h(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x}(o.default);m.blotName="blockquote",m.tagName="blockquote",n.default=m},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function x(j,v){for(var N=0;N<v.length;N++){var f=v[N];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(j,f.key,f)}}return function(j,v,N){return v&&x(j.prototype,v),N&&x(j,N),j}}(),o=a(4),i=c(o);function c(x){return x&&x.__esModule?x:{default:x}}function h(x,j){if(!(x instanceof j))throw new TypeError("Cannot call a class as a function")}function p(x,j){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:x}function m(x,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);x.prototype=Object.create(j&&j.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(x,j):x.__proto__=j)}var u=function(x){m(j,x);function j(){return h(this,j),p(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return l(j,null,[{key:"formats",value:function(N){return this.tagName.indexOf(N.tagName)+1}}]),j}(i.default);u.blotName="header",u.tagName=["H1","H2","H3","H4","H5","H6"],n.default=u},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var l=function(){function b(E,R){for(var S=0;S<R.length;S++){var k=R[S];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(E,k.key,k)}}return function(E,R,S){return R&&b(E.prototype,R),S&&b(E,S),E}}(),o=function b(E,R,S){E===null&&(E=Function.prototype);var k=Object.getOwnPropertyDescriptor(E,R);if(k===void 0){var L=Object.getPrototypeOf(E);return L===null?void 0:b(L,R,S)}else{if("value"in k)return k.value;var A=k.get;return A===void 0?void 0:A.call(S)}},i=a(0),c=x(i),h=a(4),p=x(h),m=a(25),u=x(m);function x(b){return b&&b.__esModule?b:{default:b}}function j(b,E,R){return E in b?Object.defineProperty(b,E,{value:R,enumerable:!0,configurable:!0,writable:!0}):b[E]=R,b}function v(b,E){if(!(b instanceof E))throw new TypeError("Cannot call a class as a function")}function N(b,E){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:b}function f(b,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);b.prototype=Object.create(E&&E.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(b,E):b.__proto__=E)}var d=function(b){f(E,b);function E(){return v(this,E),N(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return l(E,[{key:"format",value:function(S,k){S===g.blotName&&!k?this.replaceWith(c.default.create(this.statics.scope)):o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,S,k)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(S,k){return this.parent.isolate(this.offset(this.parent),this.length()),S===this.parent.statics.blotName?(this.parent.replaceWith(S,k),this):(this.parent.unwrap(),o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replaceWith",this).call(this,S,k))}}],[{key:"formats",value:function(S){return S.tagName===this.tagName?void 0:o(E.__proto__||Object.getPrototypeOf(E),"formats",this).call(this,S)}}]),E}(p.default);d.blotName="list-item",d.tagName="LI";var g=function(b){f(E,b),l(E,null,[{key:"create",value:function(S){var k=S==="ordered"?"OL":"UL",L=o(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,k);return(S==="checked"||S==="unchecked")&&L.setAttribute("data-checked",S==="checked"),L}},{key:"formats",value:function(S){if(S.tagName==="OL")return"ordered";if(S.tagName==="UL")return S.hasAttribute("data-checked")?S.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function E(R){v(this,E);var S=N(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,R)),k=function(A){if(A.target.parentNode===R){var D=S.statics.formats(R),I=c.default.find(A.target);D==="checked"?I.format("list","unchecked"):D==="unchecked"&&I.format("list","checked")}};return R.addEventListener("touchstart",k),R.addEventListener("mousedown",k),S}return l(E,[{key:"format",value:function(S,k){this.children.length>0&&this.children.tail.format(S,k)}},{key:"formats",value:function(){return j({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(S,k){if(S instanceof d)o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,S,k);else{var L=k==null?this.length():k.offset(this),A=this.split(L);A.parent.insertBefore(S,A)}}},{key:"optimize",value:function(S){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,S);var k=this.next;k!=null&&k.prev===this&&k.statics.blotName===this.statics.blotName&&k.domNode.tagName===this.domNode.tagName&&k.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(k.moveChildren(this),k.remove())}},{key:"replace",value:function(S){if(S.statics.blotName!==this.statics.blotName){var k=c.default.create(this.statics.defaultChild);S.moveChildren(k),this.appendChild(k)}o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replace",this).call(this,S)}}]),E}(u.default);g.blotName="list",g.scope=c.default.Scope.BLOCK_BLOT,g.tagName=["OL","UL"],g.defaultChild="list-item",g.allowedChildren=[d],n.ListItem=d,n.default=g},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(56),o=i(l);function i(u){return u&&u.__esModule?u:{default:u}}function c(u,x){if(!(u instanceof x))throw new TypeError("Cannot call a class as a function")}function h(u,x){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:u}function p(u,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);u.prototype=Object.create(x&&x.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(u,x):u.__proto__=x)}var m=function(u){p(x,u);function x(){return c(this,x),h(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x}(o.default);m.blotName="italic",m.tagName=["EM","I"],n.default=m},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function j(v,N){for(var f=0;f<N.length;f++){var d=N[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(v,d.key,d)}}return function(v,N,f){return N&&j(v.prototype,N),f&&j(v,f),v}}(),o=function j(v,N,f){v===null&&(v=Function.prototype);var d=Object.getOwnPropertyDescriptor(v,N);if(d===void 0){var g=Object.getPrototypeOf(v);return g===null?void 0:j(g,N,f)}else{if("value"in d)return d.value;var b=d.get;return b===void 0?void 0:b.call(f)}},i=a(6),c=h(i);function h(j){return j&&j.__esModule?j:{default:j}}function p(j,v){if(!(j instanceof v))throw new TypeError("Cannot call a class as a function")}function m(j,v){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:j}function u(j,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);j.prototype=Object.create(v&&v.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(j,v):j.__proto__=v)}var x=function(j){u(v,j);function v(){return p(this,v),m(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return l(v,null,[{key:"create",value:function(f){return f==="super"?document.createElement("sup"):f==="sub"?document.createElement("sub"):o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,f)}},{key:"formats",value:function(f){if(f.tagName==="SUB")return"sub";if(f.tagName==="SUP")return"super"}}]),v}(c.default);x.blotName="script",x.tagName=["SUB","SUP"],n.default=x},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(6),o=i(l);function i(u){return u&&u.__esModule?u:{default:u}}function c(u,x){if(!(u instanceof x))throw new TypeError("Cannot call a class as a function")}function h(u,x){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:u}function p(u,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);u.prototype=Object.create(x&&x.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(u,x):u.__proto__=x)}var m=function(u){p(x,u);function x(){return c(this,x),h(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x}(o.default);m.blotName="strike",m.tagName="S",n.default=m},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(6),o=i(l);function i(u){return u&&u.__esModule?u:{default:u}}function c(u,x){if(!(u instanceof x))throw new TypeError("Cannot call a class as a function")}function h(u,x){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:u}function p(u,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);u.prototype=Object.create(x&&x.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(u,x):u.__proto__=x)}var m=function(u){p(x,u);function x(){return c(this,x),h(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x}(o.default);m.blotName="underline",m.tagName="U",n.default=m},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function N(f,d){for(var g=0;g<d.length;g++){var b=d[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(f,d,g){return d&&N(f.prototype,d),g&&N(f,g),f}}(),o=function N(f,d,g){f===null&&(f=Function.prototype);var b=Object.getOwnPropertyDescriptor(f,d);if(b===void 0){var E=Object.getPrototypeOf(f);return E===null?void 0:N(E,d,g)}else{if("value"in b)return b.value;var R=b.get;return R===void 0?void 0:R.call(g)}},i=a(0),c=p(i),h=a(27);function p(N){return N&&N.__esModule?N:{default:N}}function m(N,f){if(!(N instanceof f))throw new TypeError("Cannot call a class as a function")}function u(N,f){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:N}function x(N,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);N.prototype=Object.create(f&&f.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(N,f):N.__proto__=f)}var j=["alt","height","width"],v=function(N){x(f,N);function f(){return m(this,f),u(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return l(f,[{key:"format",value:function(g,b){j.indexOf(g)>-1?b?this.domNode.setAttribute(g,b):this.domNode.removeAttribute(g):o(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"format",this).call(this,g,b)}}],[{key:"create",value:function(g){var b=o(f.__proto__||Object.getPrototypeOf(f),"create",this).call(this,g);return typeof g=="string"&&b.setAttribute("src",this.sanitize(g)),b}},{key:"formats",value:function(g){return j.reduce(function(b,E){return g.hasAttribute(E)&&(b[E]=g.getAttribute(E)),b},{})}},{key:"match",value:function(g){return/\.(jpe?g|gif|png)$/.test(g)||/^data:image\/.+;base64/.test(g)}},{key:"sanitize",value:function(g){return(0,h.sanitize)(g,["http","https","data"])?g:"//:0"}},{key:"value",value:function(g){return g.getAttribute("src")}}]),f}(c.default.Embed);v.blotName="image",v.tagName="IMG",n.default=v},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function N(f,d){for(var g=0;g<d.length;g++){var b=d[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(f,d,g){return d&&N(f.prototype,d),g&&N(f,g),f}}(),o=function N(f,d,g){f===null&&(f=Function.prototype);var b=Object.getOwnPropertyDescriptor(f,d);if(b===void 0){var E=Object.getPrototypeOf(f);return E===null?void 0:N(E,d,g)}else{if("value"in b)return b.value;var R=b.get;return R===void 0?void 0:R.call(g)}},i=a(4),c=a(27),h=p(c);function p(N){return N&&N.__esModule?N:{default:N}}function m(N,f){if(!(N instanceof f))throw new TypeError("Cannot call a class as a function")}function u(N,f){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:N}function x(N,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);N.prototype=Object.create(f&&f.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(N,f):N.__proto__=f)}var j=["height","width"],v=function(N){x(f,N);function f(){return m(this,f),u(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return l(f,[{key:"format",value:function(g,b){j.indexOf(g)>-1?b?this.domNode.setAttribute(g,b):this.domNode.removeAttribute(g):o(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"format",this).call(this,g,b)}}],[{key:"create",value:function(g){var b=o(f.__proto__||Object.getPrototypeOf(f),"create",this).call(this,g);return b.setAttribute("frameborder","0"),b.setAttribute("allowfullscreen",!0),b.setAttribute("src",this.sanitize(g)),b}},{key:"formats",value:function(g){return j.reduce(function(b,E){return g.hasAttribute(E)&&(b[E]=g.getAttribute(E)),b},{})}},{key:"sanitize",value:function(g){return h.default.sanitize(g)}},{key:"value",value:function(g){return g.getAttribute("src")}}]),f}(i.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",n.default=v},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var l=function(){function g(b,E){for(var R=0;R<E.length;R++){var S=E[R];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,S.key,S)}}return function(b,E,R){return E&&g(b.prototype,E),R&&g(b,R),b}}(),o=function g(b,E,R){b===null&&(b=Function.prototype);var S=Object.getOwnPropertyDescriptor(b,E);if(S===void 0){var k=Object.getPrototypeOf(b);return k===null?void 0:g(k,E,R)}else{if("value"in S)return S.value;var L=S.get;return L===void 0?void 0:L.call(R)}},i=a(35),c=x(i),h=a(5),p=x(h),m=a(9),u=x(m);function x(g){return g&&g.__esModule?g:{default:g}}function j(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function v(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function N(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var f=function(g){N(b,g);function b(){return j(this,b),v(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return l(b,null,[{key:"create",value:function(R){var S=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,R);return typeof R=="string"&&(window.katex.render(R,S,{throwOnError:!1,errorColor:"#f00"}),S.setAttribute("data-value",R)),S}},{key:"value",value:function(R){return R.getAttribute("data-value")}}]),b}(c.default);f.blotName="formula",f.className="ql-formula",f.tagName="SPAN";var d=function(g){N(b,g),l(b,null,[{key:"register",value:function(){p.default.register(f,!0)}}]);function b(){j(this,b);var E=v(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return E}return b}(u.default);n.FormulaBlot=f,n.default=d},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var l=function(){function R(S,k){for(var L=0;L<k.length;L++){var A=k[L];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(S,A.key,A)}}return function(S,k,L){return k&&R(S.prototype,k),L&&R(S,L),S}}(),o=function R(S,k,L){S===null&&(S=Function.prototype);var A=Object.getOwnPropertyDescriptor(S,k);if(A===void 0){var D=Object.getPrototypeOf(S);return D===null?void 0:R(D,k,L)}else{if("value"in A)return A.value;var I=A.get;return I===void 0?void 0:I.call(L)}},i=a(0),c=v(i),h=a(5),p=v(h),m=a(9),u=v(m),x=a(13),j=v(x);function v(R){return R&&R.__esModule?R:{default:R}}function N(R,S){if(!(R instanceof S))throw new TypeError("Cannot call a class as a function")}function f(R,S){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:R}function d(R,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);R.prototype=Object.create(S&&S.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(R,S):R.__proto__=S)}var g=function(R){d(S,R);function S(){return N(this,S),f(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return l(S,[{key:"replaceWith",value:function(L){this.domNode.textContent=this.domNode.textContent,this.attach(),o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,L)}},{key:"highlight",value:function(L){var A=this.domNode.textContent;this.cachedText!==A&&((A.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=L(A),this.domNode.normalize(),this.attach()),this.cachedText=A)}}]),S}(j.default);g.className="ql-syntax";var b=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),E=function(R){d(S,R),l(S,null,[{key:"register",value:function(){p.default.register(b,!0),p.default.register(g,!0)}}]);function S(k,L){N(this,S);var A=f(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,k,L));if(typeof A.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var D=null;return A.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(D),D=setTimeout(function(){A.highlight(),D=null},A.options.interval)}),A.highlight(),A}return l(S,[{key:"highlight",value:function(){var L=this;if(!this.quill.selection.composing){this.quill.update(p.default.sources.USER);var A=this.quill.getSelection();this.quill.scroll.descendants(g).forEach(function(D){D.highlight(L.options.highlight)}),this.quill.update(p.default.sources.SILENT),A!=null&&this.quill.setSelection(A,p.default.sources.SILENT)}}}]),S}(u.default);E.DEFAULTS={highlight:function(){return window.hljs==null?null:function(R){var S=window.hljs.highlightAuto(R);return S.value}}(),interval:1e3},n.CodeBlock=g,n.CodeToken=b,n.default=E},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var l=function S(k,L,A){k===null&&(k=Function.prototype);var D=Object.getOwnPropertyDescriptor(k,L);if(D===void 0){var I=Object.getPrototypeOf(k);return I===null?void 0:S(I,L,A)}else{if("value"in D)return D.value;var O=D.get;return O===void 0?void 0:O.call(A)}},o=function(){function S(k,L){for(var A=0;A<L.length;A++){var D=L[A];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(k,D.key,D)}}return function(k,L,A){return L&&S(k.prototype,L),A&&S(k,A),k}}(),i=a(3),c=N(i),h=a(8),p=N(h),m=a(43),u=N(m),x=a(15),j=a(41),v=N(j);function N(S){return S&&S.__esModule?S:{default:S}}function f(S,k){if(!(S instanceof k))throw new TypeError("Cannot call a class as a function")}function d(S,k){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:S}function g(S,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);S.prototype=Object.create(k&&k.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(S,k):S.__proto__=k)}var b=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],E=function(S){g(k,S);function k(L,A){f(this,k),A.modules.toolbar!=null&&A.modules.toolbar.container==null&&(A.modules.toolbar.container=b);var D=d(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,L,A));return D.quill.container.classList.add("ql-bubble"),D}return o(k,[{key:"extendToolbar",value:function(A){this.tooltip=new R(this.quill,this.options.bounds),this.tooltip.root.appendChild(A.container),this.buildButtons([].slice.call(A.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(A.container.querySelectorAll("select")),v.default)}}]),k}(u.default);E.DEFAULTS=(0,c.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(k){k?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var R=function(S){g(k,S);function k(L,A){f(this,k);var D=d(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,L,A));return D.quill.on(p.default.events.EDITOR_CHANGE,function(I,O,C,F){if(I===p.default.events.SELECTION_CHANGE)if(O!=null&&O.length>0&&F===p.default.sources.USER){D.show(),D.root.style.left="0px",D.root.style.width="",D.root.style.width=D.root.offsetWidth+"px";var U=D.quill.getLines(O.index,O.length);if(U.length===1)D.position(D.quill.getBounds(O));else{var Y=U[U.length-1],G=D.quill.getIndex(Y),V=Math.min(Y.length()-1,O.index+O.length-G),W=D.quill.getBounds(new x.Range(G,V));D.position(W)}}else document.activeElement!==D.textbox&&D.quill.hasFocus()&&D.hide()}),D}return o(k,[{key:"listen",value:function(){var A=this;l(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){A.root.classList.remove("ql-editing")}),this.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!A.root.classList.contains("ql-hidden")){var D=A.quill.getSelection();D!=null&&A.position(A.quill.getBounds(D))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(A){var D=l(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"position",this).call(this,A),I=this.root.querySelector(".ql-tooltip-arrow");if(I.style.marginLeft="",D===0)return D;I.style.marginLeft=-1*D-I.offsetWidth/2+"px"}}]),k}(m.BaseTooltip);R.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=R,n.default=E},function(r,n,a){r.exports=a(63)}]).default})})(ey);var NA=ey.exports,wA=Fs&&Fs.__extends||function(){var t=function(s,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)a.hasOwnProperty(l)&&(n[l]=a[l])},t(s,r)};return function(s,r){t(s,r);function n(){this.constructor=s}s.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vi=Fs&&Fs.__assign||function(){return vi=Object.assign||function(t){for(var s,r=1,n=arguments.length;r<n;r++){s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},vi.apply(this,arguments)},EA=Fs&&Fs.__spreadArrays||function(){for(var t=0,s=0,r=arguments.length;s<r;s++)t+=arguments[s].length;for(var n=Array(t),a=0,s=0;s<r;s++)for(var l=arguments[s],o=0,i=l.length;o<i;o++,a++)n[a]=l[o];return n},Xi=Fs&&Fs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},cr=Xi(y),SA=Xi(xg),Ya=Xi(jA),Xf=Xi(NA),_A=function(t){wA(s,t);function s(r){var n=t.call(this,r)||this;n.dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.selection=null,n.onEditorChange=function(l,o,i,c){var h,p,m,u;l==="text-change"?(p=(h=n).onEditorChangeText)===null||p===void 0||p.call(h,n.editor.root.innerHTML,o,c,n.unprivilegedEditor):l==="selection-change"&&((u=(m=n).onEditorChangeSelection)===null||u===void 0||u.call(m,o,c,n.unprivilegedEditor))};var a=n.isControlled()?r.value:r.defaultValue;return n.value=a??"",n}return s.prototype.validateProps=function(r){var n;if(cr.default.Children.count(r.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(cr.default.Children.count(r.children)){var a=cr.default.Children.only(r.children);if(((n=a)===null||n===void 0?void 0:n.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&r.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},s.prototype.shouldComponentUpdate=function(r,n){var a=this,l;if(this.validateProps(r),!this.editor||this.state.generation!==n.generation)return!0;if("value"in r){var o=this.getEditorContents(),i=(l=r.value,l??"");this.isEqualValue(i,o)||this.setEditorContents(this.editor,i)}return r.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,r.readOnly),EA(this.cleanProps,this.dirtyProps).some(function(c){return!Ya.default(r[c],a.props[c])})},s.prototype.shouldComponentRegenerate=function(r){var n=this;return this.dirtyProps.some(function(a){return!Ya.default(r[a],n.props[a])})},s.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},s.prototype.componentWillUnmount=function(){this.destroyEditor()},s.prototype.componentDidUpdate=function(r,n){var a=this;if(this.editor&&this.shouldComponentRegenerate(r)){var l=this.editor.getContents(),o=this.editor.getSelection();this.regenerationSnapshot={delta:l,selection:o},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==n.generation){var i=this.regenerationSnapshot,l=i.delta,c=i.selection;delete this.regenerationSnapshot,this.instantiateEditor();var h=this.editor;h.setContents(l),ep(function(){return a.setEditorSelection(h,c)})}},s.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},s.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},s.prototype.isControlled=function(){return"value"in this.props},s.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},s.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},s.prototype.createEditor=function(r,n){var a=new Xf.default(r,n);return n.tabIndex!=null&&this.setEditorTabIndex(a,n.tabIndex),this.hookEditor(a),a},s.prototype.hookEditor=function(r){this.unprivilegedEditor=this.makeUnprivilegedEditor(r),r.on("editor-change",this.onEditorChange)},s.prototype.unhookEditor=function(r){r.off("editor-change",this.onEditorChange)},s.prototype.getEditorContents=function(){return this.value},s.prototype.getEditorSelection=function(){return this.selection},s.prototype.isDelta=function(r){return r&&r.ops},s.prototype.isEqualValue=function(r,n){return this.isDelta(r)&&this.isDelta(n)?Ya.default(r.ops,n.ops):Ya.default(r,n)},s.prototype.setEditorContents=function(r,n){var a=this;this.value=n;var l=this.getEditorSelection();typeof n=="string"?r.setContents(r.clipboard.convert(n)):r.setContents(n),ep(function(){return a.setEditorSelection(r,l)})},s.prototype.setEditorSelection=function(r,n){if(this.selection=n,n){var a=r.getLength();n.index=Math.max(0,Math.min(n.index,a-1)),n.length=Math.max(0,Math.min(n.length,a-1-n.index)),r.setSelection(n)}},s.prototype.setEditorTabIndex=function(r,n){var a,l;!((l=(a=r)===null||a===void 0?void 0:a.scroll)===null||l===void 0)&&l.domNode&&(r.scroll.domNode.tabIndex=n)},s.prototype.setEditorReadOnly=function(r,n){n?r.disable():r.enable()},s.prototype.makeUnprivilegedEditor=function(r){var n=r;return{getHTML:function(){return n.root.innerHTML},getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}},s.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var r=SA.default.findDOMNode(this.editingArea);if(!r)throw new Error("Cannot find element for editing area");if(r.nodeType===3)throw new Error("Editing area cannot be a text node");return r},s.prototype.renderEditingArea=function(){var r=this,n=this.props,a=n.children,l=n.preserveWhitespace,o=this.state.generation,i={key:o,ref:function(c){r.editingArea=c}};return cr.default.Children.count(a)?cr.default.cloneElement(cr.default.Children.only(a),i):l?cr.default.createElement("pre",vi({},i)):cr.default.createElement("div",vi({},i))},s.prototype.render=function(){var r;return cr.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(r=this.props.className,r??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},s.prototype.onEditorChangeText=function(r,n,a,l){var o,i;if(this.editor){var c=this.isDelta(this.value)?l.getContents():l.getHTML();c!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=c,(i=(o=this.props).onChange)===null||i===void 0||i.call(o,r,n,a,l))}},s.prototype.onEditorChangeSelection=function(r,n,a){var l,o,i,c,h,p;if(this.editor){var m=this.getEditorSelection(),u=!m&&r,x=m&&!r;Ya.default(r,m)||(this.selection=r,(o=(l=this.props).onChangeSelection)===null||o===void 0||o.call(l,r,n,a),u?(c=(i=this.props).onFocus)===null||c===void 0||c.call(i,r,n,a):x&&((p=(h=this.props).onBlur)===null||p===void 0||p.call(h,m,n,a)))}},s.prototype.focus=function(){this.editor&&this.editor.focus()},s.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},s.displayName="React Quill",s.Quill=Xf.default,s.defaultProps={theme:"snow",modules:{},readOnly:!1},s}(cr.default.Component);function ep(t){Promise.resolve().then(t)}var CA=_A;const kA=rp(CA),tp=({filters:t,setFilters:s,ranks:r,appointments:n,onSearch:a})=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4 grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:t.search,onChange:l=>s(o=>({...o,search:l.target.value})),placeholder:"Search employee name",className:"px-3 py-2 border rounded"}),e.jsxs("select",{value:t.rankId,onChange:l=>s(o=>({...o,rankId:l.target.value})),className:"px-3 py-2 border rounded",children:[e.jsx("option",{value:"",children:"All Designation"}),(r||[]).map(l=>e.jsx("option",{value:l.rankid,children:l.rankname},l.rankid))]}),e.jsxs("select",{value:t.appointmentId,onChange:l=>s(o=>({...o,appointmentId:l.target.value})),className:"px-3 py-2 border rounded",children:[e.jsx("option",{value:"",children:"All Appointments"}),(n||[]).map(l=>e.jsx("option",{value:l.id,children:l.appointmentname},l.id))]}),e.jsx("button",{onClick:a,className:"px-4 py-2 bg-indigo-600 text-white rounded",children:"Filter"})]}),ji=({src:t,name:s})=>t?e.jsx("img",{src:t,alt:s,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-sm text-gray-600",children:(s||"NA").split(" ").map(r=>r[0]).join("").substring(0,2)}),DA=({items:t,onAdd:s,onEdit:r,can:n})=>e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:[e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Employee Designations"}),n("201-designation","create")&&e.jsx("button",{type:"button",onClick:s,className:"px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Add"})]}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Photo"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Designation"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Position"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Department"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Appointment"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Created By"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:e.jsx(ji,{src:a.photo_path,name:`${a.surname}, ${a.firstname}`})}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-800",children:`${a.surname}, ${a.firstname} ${a.middlename||""}`.trim()}),e.jsx("td",{className:"px-4 py-2 text-sm",children:a.rankname||"-"}),e.jsx("td",{className:"px-4 py-2 text-sm",children:a.position||"-"}),e.jsx("td",{className:"px-4 py-2 text-sm",children:a.departmentname||"-"}),e.jsx("td",{className:"px-4 py-2 text-sm",children:a.appointmentname||"-"}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(ji,{src:a.createdby_photo_path,name:"Creator"})}),e.jsx("td",{className:"px-4 py-2",children:n("201-designation","update")&&e.jsx("button",{onClick:()=>r(a),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"})})]},a.objid))})]})]}),AA=({employee:t,records:s,onView:r,can:n,onEdit:a,onDelete:l})=>e.jsxs("div",{className:"bg-white rounded-lg shadow mb-4",children:[e.jsxs("div",{className:"p-4 flex items-center gap-3 border-b",children:[e.jsx(ji,{src:t.photo_path,name:`${t.surname}, ${t.firstname}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:`${t.surname}, ${t.firstname} ${t.middlename||""}`.trim()}),e.jsx("div",{className:"text-xs text-gray-500",children:t.departmentname||""})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Designation"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Position"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Department"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Appointment"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Created By"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(o=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm",children:o.rankname||"-"}),e.jsx("td",{className:"px-4 py-2 text-sm",children:o.position||"-"}),e.jsx("td",{className:"px-4 py-2 text-sm",children:o.departmentname||"-"}),e.jsx("td",{className:"px-4 py-2 text-sm",children:o.appointmentname||"-"}),e.jsx("td",{className:"px-4 py-2 text-sm",children:e.jsx(ji,{src:o.createdby_photo_path,name:"Creator"})}),e.jsx("td",{className:"px-4 py-2 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${String(o.ispresent)==="1"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:String(o.ispresent)==="1"?"Present":"Not Present"})}),e.jsx("td",{className:"px-4 py-2 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",title:"View","aria-label":"View",onClick:()=>r&&r(o),className:"text-indigo-600 hover:text-indigo-900 p-1 rounded",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{d:"M12 5c-7.633 0-11 6.5-11 7s3.367 7 11 7 11-6.5 11-7-3.367-7-11-7zm0 12c-3.314 0-6-2.239-6-5s2.686-5 6-5 6 2.239 6 5-2.686 5-6 5zm0-8a3 3 0 100 6 3 3 0 000-6z"})})}),n("201-designation","update")&&e.jsx("button",{type:"button",title:"Edit","aria-label":"Edit",onClick:()=>a&&a(o),className:"text-blue-600 hover:text-blue-900 p-1 rounded",children:""}),n("201-designation","delete")&&e.jsx("button",{type:"button",title:"Delete","aria-label":"Delete",onClick:()=>l&&l(o),className:"text-red-600 hover:text-red-900 p-1 rounded",children:""})]})})]},o.objid))})]})})]}),TA=()=>{const{can:t}=im(),[s,r]=y.useState("active"),[n,a]=y.useState({search:"",rankId:"",appointmentId:""}),[l,o]=y.useState([]),[i,c]=y.useState([]),[h,p]=y.useState([]),[m,u]=y.useState([]),[x,j]=y.useState(!1),[v,N]=y.useState(!1),[f,d]=y.useState(null),[g,b]=y.useState(!1),[E,R]=y.useState([]),[S,k]=y.useState(""),[L,A]=y.useState({emp_objid:"",designationid:"",position:"",jobdescription:"",appointmentdate:"",appointmentstatus:"",assigneddept:"",plantillano:"",salarygrade:"",gradeincrement:"",salary:"",status:0}),D=async()=>{var Y;const[C,F,U]=await Promise.all([le.get("/employee-designations/ranks"),le.get("/employee-designations/appointment-types"),le.get("/departments")]);o(Array.isArray(C.data)?C.data:[]),c(Array.isArray(F.data)?F.data:[]),p(Array.isArray(U.data)?U.data:((Y=U.data)==null?void 0:Y.data)||[])},I=async(C="active")=>{var F;j(!0);try{const{search:U,rankId:Y,appointmentId:G}=n,V=await le.get("/employee-designations",{params:{status:C,search:U,rankId:Y,appointmentId:G}});u(((F=V.data)==null?void 0:F.data)||[])}finally{j(!1)}};y.useEffect(()=>{D(),I("active"),(async()=>{var C;try{const F=await le.get("/201-employees");R(((C=F.data)==null?void 0:C.data)||[])}catch{}})()},[]),y.useEffect(()=>{if(f){A(F=>({...F,emp_objid:f.emp_objid||f.employee_objid||"",designationid:f.rankid||"",position:f.position||"",appointmentstatus:f.appointmentid||"",appointmentdate:f.appointmentdate?String(f.appointmentdate).slice(0,10):"",assigneddept:f.assigneddept||f.deptid||"",plantillano:f.plantillano||"",salarygrade:f.salarygrade||"",gradeincrement:f.gradeincrement||"",dailywage:f.dailywage??"",salary:f.salary??"",jobdescription:f.jobdescription||"",status:f.status??0}));const C=`${f.surname||""}, ${f.firstname||""} ${f.middlename||""}`.trim();k(C)}},[f]);const O=y.useMemo(()=>{const C=new Map;return m.forEach(F=>{const U=F.emp_objid;C.has(U)||C.set(U,{employee:F,records:[]}),C.get(U).records.push(F)}),Array.from(C.values())},[m]);return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsx("div",{className:"px-6",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>{r("active"),I("active")},className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="active"?"border-green-600 text-green-700":"border-transparent text-gray-500"}`,children:"Active Employee Designations"}),e.jsx("button",{onClick:()=>{r("history"),I("all")},className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="history"?"border-green-600 text-green-700":"border-transparent text-gray-500"}`,children:"Designation History"})]})})}),s==="active"&&e.jsx(tp,{filters:n,setFilters:a,ranks:l,appointments:i,onSearch:()=>I("active")}),s==="history"&&e.jsx(tp,{filters:n,setFilters:a,ranks:l,appointments:i,onSearch:()=>I("all")}),x?e.jsx("div",{className:"text-center py-10",children:"Loading..."}):s==="active"?e.jsx(DA,{items:m,can:t,onAdd:()=>{d(null),k(""),A({emp_objid:"",designationid:"",position:"",jobdescription:"",appointmentdate:"",appointmentstatus:"",assigneddept:"",plantillano:"",salarygrade:"",gradeincrement:"",dailywage:"",salary:"",status:0}),N(!0)},onEdit:C=>{d(C),N(!0)}}):e.jsx("div",{children:O.map(C=>e.jsx(AA,{employee:C.employee,records:C.records,can:t,onView:F=>{d(F),b(!0),N(!0)},onEdit:F=>{d(F),b(!1),N(!0)},onDelete:async F=>{if(window.confirm("Delete this designation record?"))try{await le.delete(`/employee-designations/${F.objid}`),I("all")}catch(U){console.error("Delete failed",U),alert("Delete failed")}}},C.employee.emp_objid))}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4",children:[e.jsxs("div",{className:"px-6 py-4 border-b flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:g?"View Designation":f?"Edit Designation":"Add Designation"}),e.jsx("button",{type:"button",onClick:()=>N(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:S,onChange:C=>{k(C.target.value),A(F=>({...F,emp_objid:""}))},placeholder:"Type employee name to search...",className:`w-full px-3 py-2 border rounded ${f||g?"bg-gray-100 cursor-not-allowed":""}`,disabled:!!f||g}),S&&!L.emp_objid&&e.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[E.filter(C=>`${C.surname}, ${C.firstname} ${C.middlename||""}`.toLowerCase().includes(S.toLowerCase())).slice(0,10).map(C=>{var F;return e.jsxs("div",{onClick:()=>{A(U=>({...U,emp_objid:C.objid})),k(`${C.surname}, ${C.firstname} ${C.middlename||""}`)},className:"px-3 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0 flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-200 flex-shrink-0",children:C.photo_path?e.jsx("img",{src:C.photo_path,alt:"Employee",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500 text-xs",children:((F=C.firstname)==null?void 0:F.charAt(0))||"?"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:`${C.surname}, ${C.firstname} ${C.middlename||""}`})})]},C.objid)}),E.filter(C=>`${C.surname}, ${C.firstname} ${C.middlename||""}`.toLowerCase().includes(S.toLowerCase())).length===0&&e.jsx("div",{className:"px-3 py-2 text-gray-500",children:"No employees found"})]})]}),L.emp_objid&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200 flex-shrink-0",children:(()=>{var F;const C=E.find(U=>U.objid===L.emp_objid);return C!=null&&C.photo_path?e.jsx("img",{src:C.photo_path,alt:"Selected Employee",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500 text-lg font-medium",children:((F=C==null?void 0:C.firstname)==null?void 0:F.charAt(0))||"?"})})()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-green-800",children:" Selected Employee"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:(()=>{const C=E.find(F=>F.objid===L.emp_objid);return C?`${C.surname}, ${C.firstname} ${C.middlename||""}`:"Unknown Employee"})()}),e.jsxs("div",{className:"text-sm text-gray-600",children:["DTR User ID: ",(()=>{const C=E.find(F=>F.objid===L.emp_objid);return(C==null?void 0:C.dtruserid)||"-"})()]})]}),!f&&!g&&e.jsx("button",{type:"button",onClick:()=>{A(C=>({...C,emp_objid:""})),k("")},className:"text-gray-400 hover:text-gray-600 text-sm",children:" Clear"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Designation"}),e.jsxs("select",{value:L.designationid,onChange:C=>A(F=>({...F,designationid:C.target.value})),className:"w-full px-3 py-2 border rounded",disabled:g,children:[e.jsx("option",{value:"",children:"Select"}),(l||[]).map(C=>e.jsx("option",{value:C.rankid,children:C.rankname},C.rankid))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appointment Status"}),e.jsxs("select",{value:L.appointmentstatus,onChange:C=>A(F=>({...F,appointmentstatus:C.target.value})),className:"w-full px-3 py-2 border rounded",disabled:g,children:[e.jsx("option",{value:"",children:"Select"}),(i||[]).map(C=>e.jsx("option",{value:C.id,children:C.appointmentname},C.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appointment Date"}),e.jsx("input",{type:"date",value:L.appointmentdate,onChange:C=>A(F=>({...F,appointmentdate:C.target.value})),className:"w-full px-3 py-2 border rounded",disabled:g})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),e.jsx("input",{type:"text",value:L.position,onChange:C=>A(F=>({...F,position:C.target.value})),className:"w-full px-3 py-2 border rounded",disabled:g})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assigned Department"}),e.jsxs("select",{value:L.assigneddept,onChange:C=>A(F=>({...F,assigneddept:C.target.value})),className:"w-full px-3 py-2 border rounded",disabled:g,children:[e.jsx("option",{value:"",children:"Select"}),(h||[]).map(C=>{const F=C.deptid,U=C.departmentshortname||C.departmentname||"Unnamed Department";return e.jsx("option",{value:F,children:U},F)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plantilla No."}),e.jsx("input",{type:"text",value:L.plantillano,onChange:C=>A(F=>({...F,plantillaNo:C.target.value,plantillano:C.target.value})),className:"w-full px-3 py-2 border rounded",disabled:g})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salary Grade"}),e.jsxs("select",{value:L.salarygrade||"",onChange:C=>A(F=>({...F,salarygrade:C.target.value})),className:"w-full px-3 py-2 border rounded",disabled:g,children:[e.jsx("option",{value:"",children:"Select"}),Array.from({length:33},(C,F)=>F+1).map(C=>e.jsx("option",{value:C,children:C},C))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Step (Increment)"}),e.jsxs("select",{value:L.gradeincrement||"",onChange:C=>A(F=>({...F,gradeincrement:C.target.value})),className:"w-full px-3 py-2 border rounded",disabled:g,children:[e.jsx("option",{value:"",children:"Select"}),Array.from({length:9},(C,F)=>String(F+1).padStart(2,"0")).map(C=>e.jsx("option",{value:C,children:C},C))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Daily Wage"}),e.jsx("input",{type:"number",step:"0.01",value:L.dailywage||"",onChange:C=>A(F=>({...F,dailywage:C.target.value})),className:"w-full px-3 py-2 border rounded",disabled:g})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salary"}),e.jsx("input",{type:"number",step:"0.01",value:L.salary,onChange:C=>A(F=>({...F,salary:C.target.value})),className:"w-full px-3 py-2 border rounded",disabled:g})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Description"}),e.jsx("div",{className:"border rounded",children:e.jsx(kA,{value:L.jobdescription||"",onChange:C=>A(F=>({...F,jobdescription:C})),modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],["link"],["clean"]]},formats:["header","bold","italic","underline","strike","list","bullet","indent","align","link"],placeholder:"Enter job description...",style:{minHeight:"120px"},readOnly:g})})]}),f&&!g&&e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:L.status===1,onChange:C=>A(F=>({...F,status:C.target.checked?1:0})),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active Status"})]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>{N(!1),b(!1)},className:"px-4 py-2 rounded border",children:g?"Close":"Cancel"}),!g&&(f?t("201-designation","update"):t("201-designation","create"))&&e.jsx("button",{type:"button",onClick:async()=>{if(!L.emp_objid||!L.designationid||!L.appointmentstatus)return;const C={emp_objid:L.emp_objid,rankid:L.designationid,position:L.position,appointmentid:L.appointmentstatus?parseInt(L.appointmentstatus,10):null,appointmentdate:L.appointmentdate||null,assigneddept:L.assigneddept||null,plantillano:L.plantillano||null,salarygrade:L.salarygrade?parseInt(L.salarygrade,10):null,gradeincrement:L.gradeincrement?parseInt(L.gradeincrement,10):null,dailywage:L.dailywage===""||L.dailywage==null?null:parseFloat(L.dailywage),salary:L.salary===""||L.salary==null?null:parseFloat(L.salary),jobdescription:L.jobdescription||null,status:L.status??0};try{f?await le.put(`/employee-designations/${f.objid}`,{rankid:C.rankid,position:C.position,appointmentid:C.appointmentid,dailywage:C.dailywage,salary:C.salary,assigneddept:C.assigneddept,jobdescription:C.jobdescription,status:C.status}):await le.post("/employee-designations",C),N(!1),I("active")}catch(F){console.error("Save failed",F)}},className:"px-4 py-2 rounded bg-indigo-600 text-white",children:"Save"})]})]})]})})]})},sp=({status:t})=>{const s=t==="Approved"?"bg-green-100 text-green-800":t==="Returned"?"bg-yellow-100 text-yellow-800":t==="Cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800";return e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${s}`,children:t})},LA=({isOpen:t,onClose:s,onSaved:r,initial:n,emp:a})=>{const[l,o]=y.useState(!1),i=d=>{if(!d)return"";const g=String(d);if(/^\d{2}:\d{2}$/.test(g))return g;if(/^\d{2}:\d{2}:\d{2}$/.test(g))return g.slice(0,5);if(g.includes("T")){const E=g.match(/T(\d{2}:\d{2})/);if(E)return E[1]}if(g.includes(" ")||g.includes("T")){const E=g.split(/[ T]/);if(E.length>1&&/^\d{2}:\d{2}/.test(E[1]))return E[1].slice(0,5)}const b=g.match(/^(\d{2}:\d{2})/);return b?b[1]:""},[c,h]=y.useState(()=>({emp_objid:(n==null?void 0:n.emp_objid)||(a==null?void 0:a.objid)||"",locpurpose:(n==null?void 0:n.locpurpose)||"",locatordate:n!=null&&n.locatordate?String(n.locatordate).slice(0,10):"",locdestination:(n==null?void 0:n.locdestination)||"",loctimedeparture:i(n==null?void 0:n.loctimedeparture),loctimearrival:i(n==null?void 0:n.loctimearrival),locstatus:(n==null?void 0:n.locstatus)||"Pending"})),p=d=>{if(!d)return{hours:"",minutes:""};const g=String(d).match(/(\d{2}):(\d{2})/);if(g)return{hours:g[1],minutes:g[2]};if(d.includes("T")){const b=String(d).match(/T(\d{2}):(\d{2})/);if(b)return{hours:b[1],minutes:b[2]}}return{hours:"",minutes:""}},m=p(c.loctimedeparture),u=p(c.loctimearrival),x=Array.from({length:24},(d,g)=>g.toString().padStart(2,"0")),j=Array.from({length:60},(d,g)=>g.toString().padStart(2,"0")),v=(d,g,b)=>{h(E=>{const R=E[d]||"",k={...p(R),[g]:b};if(k.hours&&k.minutes){const L=`${k.hours}:${k.minutes}`;return{...E,[d]:L}}else{if(!k.hours&&!k.minutes)return{...E,[d]:""};{const L=k.hours&&k.minutes?`${k.hours}:${k.minutes}`:"";return{...E,[d]:L}}}})};y.useEffect(()=>{t&&h({emp_objid:(n==null?void 0:n.emp_objid)||(a==null?void 0:a.objid)||"",locpurpose:(n==null?void 0:n.locpurpose)||"",locatordate:n!=null&&n.locatordate?String(n.locatordate).slice(0,10):"",locdestination:(n==null?void 0:n.locdestination)||"",loctimedeparture:i(n==null?void 0:n.loctimedeparture),loctimearrival:i(n==null?void 0:n.loctimearrival),locstatus:(n==null?void 0:n.locstatus)||"Pending"})},[t,n,a]);const N=d=>h(g=>({...g,[d.target.name]:d.target.value})),f=async()=>{if(!c.emp_objid||!c.locpurpose||!c.locatordate||!c.loctimedeparture||!c.loctimearrival){alert("Please fill required fields");return}o(!0);try{const d={locpurpose:c.locpurpose,locatordate:c.locatordate,locdestination:c.locdestination,loctimedeparture:c.loctimedeparture,loctimearrival:c.loctimearrival};n!=null&&n.objid?await le.put(`/employee-locators/${n.objid}`,d):await le.post("/employee-locators",{emp_objid:c.emp_objid,...d}),r==null||r(),s()}catch(d){console.error("Failed to save locator",d),alert("Failed to save locator")}finally{o(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:a!=null&&a.photo?e.jsx("img",{src:a.photo,alt:(a==null?void 0:a.name)||"Employee",className:"w-full h-full object-cover"}):null}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:n!=null&&n.objid?"Edit Locator":"Add Locator"}),a!=null&&a.name?e.jsx("div",{className:"text-sm text-gray-600",children:a.name}):null]})]}),e.jsx("button",{className:"text-gray-500",onClick:s,children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Locator Date"}),e.jsx("input",{name:"locatordate",type:"date",className:"mt-1 w-full border rounded px-3 py-2",value:c.locatordate,onChange:N})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Destination"}),e.jsx("input",{name:"locdestination",className:"mt-1 w-full border rounded px-3 py-2",value:c.locdestination,onChange:N})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Time Departure"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("select",{value:m.hours,onChange:d=>v("loctimedeparture","hours",d.target.value),className:"flex-1 border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"HH"}),x.map(d=>e.jsx("option",{value:d,children:d},d))]}),e.jsx("span",{className:"text-gray-500",children:":"}),e.jsxs("select",{value:m.minutes,onChange:d=>v("loctimedeparture","minutes",d.target.value),className:"flex-1 border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"MM"}),j.map(d=>e.jsx("option",{value:d,children:d},d))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Time Arrival"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("select",{value:u.hours,onChange:d=>v("loctimearrival","hours",d.target.value),className:"flex-1 border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"HH"}),x.map(d=>e.jsx("option",{value:d,children:d},d))]}),e.jsx("span",{className:"text-gray-500",children:":"}),e.jsxs("select",{value:u.minutes,onChange:d=>v("loctimearrival","minutes",d.target.value),className:"flex-1 border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"MM"}),j.map(d=>e.jsx("option",{value:d,children:d},d))]})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Purpose"}),e.jsx("textarea",{name:"locpurpose",className:"mt-1 w-full border rounded px-3 py-2",rows:1,value:c.locpurpose,onChange:N})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{className:"px-4 py-2 rounded border",onClick:s,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-60",onClick:f,disabled:l,children:l?"Saving":"Save"})]})]})}):null},IA=({isOpen:t,onClose:s,onApprove:r,locatorNo:n})=>{const[a,l]=y.useState(""),[o,i]=y.useState(!1);y.useEffect(()=>{t&&l("")},[t]);const c=async()=>{if(!a.trim()){alert("Please enter remarks");return}i(!0);try{await r(a),s()}catch(h){console.error("Approve failed",h),alert("Failed to approve locator")}finally{i(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Approve Locator"}),e.jsx("button",{className:"text-gray-500",onClick:s,children:""})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Are you sure you want to approve locator ",e.jsx("strong",{children:n}),"?"]}),e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Remarks"}),e.jsx("textarea",{className:"w-full border rounded px-3 py-2",rows:3,value:a,onChange:h=>l(h.target.value),placeholder:"Enter remarks..."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{className:"px-4 py-2 rounded border",onClick:s,disabled:o,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded bg-green-600 text-white disabled:opacity-60",onClick:c,disabled:o,children:o?"Approving":"Approve"})]})]})}):null},MA=()=>{const{user:t}=Qt(),{can:s}=im(),[r,n]=y.useState("info"),[a,l]=y.useState([]),[o,i]=y.useState([]),[c,h]=y.useState([]),[p,m]=y.useState(""),[u,x]=y.useState(!0),[j,v]=y.useState(!1),[N,f]=y.useState(null),[d,g]=y.useState(null),[b,E]=y.useState(!1),[R,S]=y.useState(null),k=async w=>{try{const T=new Map,H=w.map(async J=>{var X;try{const oe=(((X=(await le.get("/employee-locators",{params:{emp_objid:J.objid}})).data)==null?void 0:X.data)||[]).length;return{objid:J.objid,count:oe}}catch(pe){return console.error(`Failed to load count for employee ${J.objid}`,pe),{objid:J.objid,count:0}}});(await Promise.all(H)).forEach(({objid:J,count:X})=>{T.set(J,X)}),U(T)}catch(T){console.error("Failed to load locator counts",T)}},L=async()=>{var w;try{x(!0);const H=((w=(await le.get("/201-employees")).data)==null?void 0:w.data)||[];i(H),l([]),await k(H)}catch(T){console.error("Failed to load locators",T)}finally{x(!1)}},A=async()=>{var w;x(!0);try{const H=(((w=(await le.get("/employee-locators")).data)==null?void 0:w.data)||[]).sort((K,J)=>new Date(J.locatordate)-new Date(K.locatordate));h(H)}catch(T){console.error("Failed to load transactions",T)}finally{x(!1)}};y.useEffect(()=>{L()},[]),y.useEffect(()=>{r==="tx"&&A()},[r]);const[D,I]=y.useState(new Set),[O,C]=y.useState(new Map),[F,U]=y.useState(new Map),Y=y.useMemo(()=>(o||[]).filter(T=>p?(T.fullname||`${T.surname||""}, ${T.firstname||""} ${T.middlename||""}`).toLowerCase().includes(p.toLowerCase()):!0).map(T=>({employee:{objid:T.objid,name:T.fullname||`${T.surname||""}, ${T.firstname||""} ${T.middlename||""}`.trim(),photo:T.photo_path||null},items:O.get(T.objid)||[]})),[o,O,p]),G=async w=>{var T;try{const K=(((T=(await le.get("/employee-locators",{params:{emp_objid:w}})).data)==null?void 0:T.data)||[]).length;U(J=>new Map(J).set(w,K))}catch(H){console.error("Failed to refresh locator count",H),U(K=>new Map(K).set(w,0))}},V=async w=>{var H;const T=new Set(D);if(T.has(w)){T.delete(w),I(T);return}if(T.add(w),I(T),!O.has(w))try{const J=(((H=(await le.get("/employee-locators",{params:{emp_objid:w}})).data)==null?void 0:H.data)||[]).sort((X,pe)=>new Date(pe.locatordate)-new Date(X.locatordate));C(X=>new Map(X).set(w,J)),U(X=>new Map(X).set(w,J.length))}catch(K){console.error("Failed to load employee locators",K),C(J=>new Map(J).set(w,[])),U(J=>new Map(J).set(w,0))}},W=w=>{g({objid:w.employee.objid,name:w.employee.name,photo:w.employee.photo}),f(null),v(!0)},_=w=>{g({objid:w.emp_objid}),f(w),v(!0)},M=w=>{S(w),E(!0)},P=async w=>{var T;if(R)try{if(await le.put(`/employee-locators/${R.objid}`,{...R,locstatus:"Approved",locremarks:w}),r==="info"){const H=R.emp_objid;if(await G(H),O.has(H)){const J=(((T=(await le.get("/employee-locators",{params:{emp_objid:H}})).data)==null?void 0:T.data)||[]).sort((X,pe)=>new Date(pe.locatordate)-new Date(X.locatordate));C(X=>new Map(X).set(H,J)),U(X=>new Map(X).set(H,J.length))}}else A()}catch(H){throw console.error("Approve failed",H),H}},$=w=>{if(!w)return"";const T=String(w).slice(0,10);if(T.length===10&&T.includes("-")){const[H,K,J]=T.split("-");return`${K}/${J}/${H}`}return T},B=w=>{if(!w)return"";const T=String(w);if(/^\d{2}:\d{2}$/.test(T))return T;if(/^\d{2}:\d{2}:\d{2}$/.test(T))return T.slice(0,5);if(T.includes("T")){const K=T.match(/T(\d{2}:\d{2})/);if(K)return K[1]}if(T.includes(" ")||T.includes("T")){const K=T.split(/[ T]/);if(K.length>1&&/^\d{2}:\d{2}/.test(K[1]))return K[1].slice(0,5)}const H=T.match(/^(\d{2}:\d{2})/);return H?H[1]:""};return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsx("div",{className:"px-6",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>{n("info")},className:`py-4 px-1 border-b-2 font-medium text-sm ${r==="info"?"border-green-600 text-green-700":"border-transparent text-gray-500"}`,children:"Employee Locators"}),e.jsx("button",{onClick:()=>{n("tx")},className:`py-4 px-1 border-b-2 font-medium text-sm ${r==="tx"?"border-green-600 text-green-700":"border-transparent text-gray-500"}`,children:"Transactions"})]})})}),r==="info"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Search employee name"}),e.jsx("input",{type:"text",value:p,onChange:w=>m(w.target.value),placeholder:"e.g. Dela Cruz, Juan",className:"w-full px-3 py-2 border rounded text-sm"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>m(p),className:"px-4 py-2 bg-indigo-600 text-white rounded text-sm",children:"Filter"}),p&&e.jsx("button",{className:"px-4 py-2 border rounded text-sm",onClick:()=>m(""),children:"Clear"})]})]})}),u?e.jsx("div",{className:"text-center py-10",children:"Loading..."}):Y.length===0?e.jsx("div",{className:"text-center py-10 text-gray-500",children:"No employees found."}):e.jsx("div",{className:"space-y-4",children:Y.map((w,T)=>e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:w.employee.photo?e.jsx("img",{src:w.employee.photo,alt:"emp",className:"w-full h-full object-cover"}):null}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:w.employee.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[F.get(w.employee.objid)||0," record",(F.get(w.employee.objid)||0)!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"text-sm text-blue-600",onClick:()=>V(w.employee.objid),children:D.has(w.employee.objid)?"Hide":"Show"}),s("201-locator","create")&&e.jsxs("button",{onClick:()=>W(w),className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:[e.jsx("span",{children:""})," Add"]})]})]}),D.has(w.employee.objid)&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Locator No."}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Locator Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Destination"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Purpose"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Created By"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 text-sm",children:(O.get(w.employee.objid)||[]).map(H=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:H.locatorno||""}),e.jsx("td",{className:"px-4 py-2",children:$(H.locatordate)||""}),e.jsx("td",{className:"px-4 py-2",children:H.locdestination||""}),e.jsx("td",{className:"px-4 py-2 max-w-md truncate",title:H.locpurpose,children:H.locpurpose}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(sp,{status:H.locstatus||"Pending"})}),e.jsx("td",{className:"px-4 py-2",children:H.createdby_photo_path?e.jsx("img",{src:H.createdby_photo_path,alt:H.createdby_name||"Creator",className:"w-8 h-8 rounded-full object-cover",title:H.createdby_name||""}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200",title:H.createdby_name||""})}),e.jsxs("td",{className:"px-4 py-2",children:[s("201-locator","update")&&e.jsx("button",{className:"px-2 py-1 text-blue-600 hover:text-blue-800",onClick:()=>_(H),title:"Edit",children:""}),s("201-locator","delete")&&e.jsx("button",{className:"px-2 py-1 text-red-600 hover:text-red-800 ml-1",onClick:async()=>{var K;if(window.confirm("Delete this locator?"))try{await le.delete(`/employee-locators/${H.objid}`);const J=H.emp_objid;if(O.has(J)){const pe=(((K=(await le.get("/employee-locators",{params:{emp_objid:J}})).data)==null?void 0:K.data)||[]).sort((oe,ce)=>new Date(ce.locatordate)-new Date(oe.locatordate));C(oe=>new Map(oe).set(J,pe)),U(oe=>new Map(oe).set(J,pe.length))}else await G(J)}catch(J){console.error("Delete failed",J),alert("Delete failed")}},title:"Delete",children:""})]})]},H.objid))})]})})]},T))})]}),r==="tx"&&e.jsx("div",{className:"mt-4",children:u?e.jsx("div",{className:"text-center py-10",children:"Loading"}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-4 flex items-center justify-between border-b",children:e.jsx("div",{className:"font-semibold",children:"Locator Transactions"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Locator No."}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Locator Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Destination"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Purpose"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Time Departure - Arrival"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Created By"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 text-sm",children:c.map(w=>{var T,H,K,J;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-200",children:(T=w.employee)!=null&&T.photo_path||w.employee_photo_path?e.jsx("img",{src:((H=w.employee)==null?void 0:H.photo_path)||w.employee_photo_path,alt:"emp",className:"w-full h-full object-cover"}):null}),e.jsx("div",{children:((K=w.employee)==null?void 0:K.name)||((J=w.employee)==null?void 0:J.fullname)||w.employee_name||""})]})}),e.jsx("td",{className:"px-4 py-2",children:w.locatorno||""}),e.jsx("td",{className:"px-4 py-2",children:$(w.locatordate)||""}),e.jsx("td",{className:"px-4 py-2",children:w.locdestination||""}),e.jsx("td",{className:"px-4 py-2 max-w-md truncate",title:w.locpurpose,children:w.locpurpose}),e.jsx("td",{className:"px-4 py-2",children:(()=>{const X=B(w.loctimedeparture),pe=B(w.loctimearrival);return X!==""&&pe!==""?`${X}-${pe}`:X!==""?X:pe!==""?pe:""})()}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(sp,{status:w.locstatus||"Pending"})}),e.jsx("td",{className:"px-4 py-2",children:w.createdby_photo_path?e.jsx("img",{src:w.createdby_photo_path,alt:w.createdby_name||"Creator",className:"w-8 h-8 rounded-full object-cover",title:w.createdby_name||""}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200",title:w.createdby_name||""})}),e.jsxs("td",{className:"px-4 py-2",children:[s("201-locator","update")&&w.locstatus!=="Approved"&&e.jsx("button",{className:"px-2 py-1 text-green-600 hover:text-green-800",onClick:()=>M(w),title:"Approve",children:""}),s("201-locator","update")&&e.jsx("button",{className:"px-2 py-1 text-blue-600 hover:text-blue-800 ml-1",onClick:()=>{var X,pe,oe;g({objid:w.emp_objid,name:((X=w.employee)==null?void 0:X.name)||((pe=w.employee)==null?void 0:pe.fullname)||w.employee_name,photo:((oe=w.employee)==null?void 0:oe.photo_path)||w.employee_photo_path}),f(w),v(!0)},title:"Edit",children:""}),s("201-locator","delete")&&e.jsx("button",{className:"px-2 py-1 text-red-600 hover:text-red-800 ml-1",onClick:async()=>{if(window.confirm("Delete this locator?"))try{await le.delete(`/employee-locators/${w.objid}`),A()}catch(X){console.error("Delete failed",X),alert("Delete failed")}},title:"Delete",children:""})]})]},w.objid)})})]})})]})})}),e.jsx(LA,{isOpen:j,onClose:()=>v(!1),onSaved:async()=>{var T;const w=(d==null?void 0:d.objid)||(N==null?void 0:N.emp_objid);if(w&&await G(w),r==="info"){if(w)try{const K=(((T=(await le.get("/employee-locators",{params:{emp_objid:w}})).data)==null?void 0:T.data)||[]).sort((J,X)=>new Date(X.locatordate)-new Date(J.locatordate));C(J=>new Map(J).set(w,K)),U(J=>new Map(J).set(w,K.length))}catch(H){console.error("Failed to refresh employee locators",H)}}else await A()},initial:N,emp:d}),e.jsx(IA,{isOpen:b,onClose:()=>{E(!1),S(null)},onApprove:P,locatorNo:(R==null?void 0:R.locatorno)||""})]})},RA=({status:t})=>{const s=t==="Approved"?"bg-green-100 text-green-800":t==="Rescheduled"?"bg-yellow-100 text-yellow-800":t==="Cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800";return e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${s}`,children:t})},OA=({isOpen:t,onClose:s,onSaved:r,employee:n})=>{const[a,l]=y.useState(!1),[o,i]=y.useState({purpose:"",traveldestination:"",dates:[]}),[c,h]=y.useState([]),[p,m]=y.useState([]),[u,x]=y.useState(""),[j,v]=y.useState("");y.useEffect(()=>{t&&(i({purpose:"",traveldestination:"",dates:[]}),x(""),h([]),m([]),v(""))},[t]);const N=d=>{i(g=>({...g,dates:(g.dates||[]).filter(b=>b!==d)})),p.includes(d)&&(h(g=>g.filter(b=>{const E=b.getFullYear(),R=String(b.getMonth()+1).padStart(2,"0"),S=String(b.getDate()).padStart(2,"0");return`${E}-${R}-${S}`!==d})),m(g=>g.filter(b=>b!==d)))};y.useEffect(()=>{if(!c||!Array.isArray(c))return;const d=c.filter(Boolean).map(b=>{const E=b.getFullYear(),R=String(b.getMonth()+1).padStart(2,"0"),S=String(b.getDate()).padStart(2,"0");return`${E}-${R}-${S}`}),g=p;m(d),i(b=>{const E=(b.dates||[]).filter(R=>!g.includes(R));return{...b,dates:Array.from(new Set([...E,...d]))}})},[c]);const f=async()=>{if(!(n!=null&&n.objid)||!o.purpose||!o.traveldestination||!(o.dates||[]).length){alert("Please complete required fields");return}l(!0);try{await le.post("/employee-travels",{emp_objid:n.objid,purpose:o.purpose,traveldestination:o.traveldestination,dates:o.dates}),r==null||r(),s()}catch(d){console.error("Failed to create travel",d),alert("Failed to create travel")}finally{l(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-2xl",children:[e.jsxs("div",{className:"px-6 py-4 border-b flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:n!=null&&n.photo_path?e.jsx("img",{src:n.photo_path,alt:"emp",className:"w-full h-full object-cover"}):null}),e.jsxs("div",{className:"font-semibold",children:["Add Travel  ",n==null?void 0:n.fullname]})]}),e.jsx("button",{className:"text-gray-600",onClick:s,children:""})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Purpose"}),e.jsx("textarea",{className:"mt-1 w-full border rounded px-3 py-2",rows:2,value:o.purpose,onChange:d=>i(g=>({...g,purpose:d.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Destination"}),e.jsx("input",{className:"mt-1 w-full border rounded px-3 py-2",value:o.traveldestination,onChange:d=>i(g=>({...g,traveldestination:d.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Dates"}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(om,{mode:"multiple",selected:c,onSelect:h,weekStartsOn:1,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-1,toYear:new Date().getFullYear()+1})}),e.jsxs("div",{className:"border rounded p-3 bg-gray-50 max-h-64 overflow-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Selected Dates"}),e.jsxs("span",{className:"text-xs text-gray-600",children:["Total: ",(o.dates||[]).length]})]}),e.jsxs("ul",{className:"space-y-1 text-sm",children:[(o.dates||[]).sort().map(d=>{const g=d.slice(5,7),b=d.slice(8,10),E=d.slice(0,4),R=`${g}/${b}/${E}`;return e.jsxs("li",{className:"flex items-center justify-between bg-white rounded border px-2 py-1",children:[e.jsx("span",{children:R}),e.jsx("button",{onClick:()=>N(d),className:"text-red-600 text-xs",children:"Remove"})]},d)}),!(o.dates||[]).length&&e.jsx("li",{className:"text-xs text-gray-500",children:"No dates selected"})]})]})]})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t flex justify-end gap-2",children:[e.jsx("button",{className:"px-4 py-2 border rounded",onClick:s,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded disabled:opacity-60",disabled:a,onClick:f,children:a?"Saving":"Save"})]})]})}):null},PA=()=>{const[t,s]=y.useState("info"),[r,n]=y.useState(!0),[a,l]=y.useState([]),[o,i]=y.useState([]),[c,h]=y.useState(""),[p,m]=y.useState(!1),[u,x]=y.useState(null),j=async()=>{var f;n(!0);try{const d=await le.get("/employee-travels/info");l(((f=d.data)==null?void 0:f.data)||[])}catch(d){console.error(d)}finally{n(!1)}},v=async()=>{var f;n(!0);try{const d=await le.get("/employee-travels/transactions");i(((f=d.data)==null?void 0:f.data)||[])}catch(d){console.error(d)}finally{n(!1)}};y.useEffect(()=>{j()},[]),y.useEffect(()=>{t==="tx"&&v()},[t]);const N=y.useMemo(()=>(a||[]).filter(f=>(f.fullname||"").toLowerCase().includes((c||"").toLowerCase())),[a,c]);return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsx("div",{className:"px-6",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>{s("info")},className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="info"?"border-green-600 text-green-700":"border-transparent text-gray-500"}`,children:"Information"}),e.jsx("button",{onClick:()=>{s("tx")},className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="tx"?"border-green-600 text-green-700":"border-transparent text-gray-500"}`,children:"Transactions"})]})})}),t==="info"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-4 flex items-end gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Search employee name"}),e.jsx("input",{className:"w-full px-3 py-2 border rounded text-sm",value:c,onChange:f=>h(f.target.value),placeholder:"e.g. Dela Cruz, Juan"})]})}),r?e.jsx("div",{className:"text-center py-10",children:"Loading"}):e.jsx("div",{className:"space-y-4",children:N.map(f=>e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsxs("div",{className:"p-4 flex items-center justify-between border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:f.photo_path?e.jsx("img",{src:f.photo_path,alt:"emp",className:"w-full h-full object-cover"}):null}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:f.fullname}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Has Travel: ",f.has_travel_dates||"","  Total: ",f.total_travel_dates]})]})]}),e.jsx("button",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",onClick:()=>{x(f),m(!0)},children:" Add Travel"})]})},f.objid))})]}),t==="tx"&&e.jsx("div",{className:"mt-4",children:r?e.jsx("div",{className:"text-center py-10",children:"Loading"}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-4 flex items-center justify-between border-b",children:e.jsx("div",{className:"font-semibold",children:"Travel Transactions"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Travel No"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Purpose"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Destination"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Dates"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 text-sm",children:o.map(f=>{var d,g;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-200",children:(d=f.employee)!=null&&d.photo_path?e.jsx("img",{src:f.employee.photo_path,alt:"emp",className:"w-full h-full object-cover"}):null}),e.jsx("div",{children:(g=f.employee)==null?void 0:g.name})]})}),e.jsx("td",{className:"px-4 py-2",children:f.travelno}),e.jsx("td",{className:"px-4 py-2",children:f.purpose}),e.jsx("td",{className:"px-4 py-2",children:f.traveldestination}),e.jsx("td",{className:"px-4 py-2",children:f.travel_dates}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(RA,{status:f.travelstatus})}),e.jsx("td",{className:"px-4 py-2"})]},f.objid)})})]})})]})})}),e.jsx(OA,{isOpen:p,onClose:()=>m(!1),onSaved:j,employee:u})]})},FA=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg shadow-lg p-8 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Payroll Dashboard"}),e.jsx("p",{className:"text-purple-100",children:"Overview of payroll operations and statistics"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Payroll"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:" 0.00"})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Employees Paid"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"0"})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:"0"})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Processing"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"0"})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Payroll Module - Coming Soon"}),e.jsxs("div",{className:"space-y-3 text-gray-600",children:[e.jsx("p",{children:"The Payroll module is currently under development. Features will include:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Automated salary computation based on DTR"}),e.jsx("li",{children:"Deductions management (SSS, PhilHealth, Pag-IBIG, Tax)"}),e.jsx("li",{children:"Payslip generation and distribution"}),e.jsx("li",{children:"Government mandatory reports (BIR, SSS, etc.)"}),e.jsx("li",{children:"Loans and advances tracking"}),e.jsx("li",{children:"13th month pay computation"}),e.jsx("li",{children:"Payroll history and audit trail"}),e.jsx("li",{children:"Bank integration for salary transfer"})]})]})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Note:"})," This module will be fully integrated with the DTR system to ensure accurate salary calculations based on attendance records."]})})]})})]}),UA=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg shadow-lg p-8 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Payroll Processing"}),e.jsx("p",{className:"text-purple-100",children:"Process and compute employee salaries"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Payroll Processing Workflow"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-bold",children:"1"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Attendance Verification"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Verify and finalize DTR records for the payroll period"})]}),e.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-bold",children:"2"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Salary Computation"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Calculate gross pay based on rate and attendance"})]}),e.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-bold",children:"3"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Deductions Processing"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Apply mandatory deductions and contributions"})]}),e.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-bold",children:"4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Net Pay Calculation"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Compute final take-home pay"})]}),e.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-bold",children:"5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Payslip Generation"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate and distribute payslips to employees"})]}),e.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-bold",children:"6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Payment Distribution"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Release payments via bank transfer or cash"})]}),e.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:" Current Payroll Period"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Start Date:"})," Not set"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"End Date:"})," Not set"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pay Date:"})," Not set"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{className:"text-gray-400",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:" Payroll Summary"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Employees:"})," 0"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Gross Pay:"}),"  0.00"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Deductions:"}),"  0.00"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Net Pay:"}),"  0.00"]})]})]})]}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-yellow-700",children:[e.jsx("strong",{children:"Development Status:"})," Payroll processing functionality is under development and will be available in the next system update."]})})]})})]}),$A=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg shadow-lg p-8 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Payroll Reports"}),e.jsx("p",{className:"text-indigo-100",children:"Generate and view payroll-related reports"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Payroll Register"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Complete list of all employee salaries for a period"}),e.jsx("button",{className:"w-full px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Employee Payslips"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Individual payslips with earnings and deductions"}),e.jsx("button",{className:"w-full px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"BIR Reports"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Tax reports for BIR submission (2316, Alphalist)"}),e.jsx("button",{className:"w-full px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"SSS Report"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Social Security contributions report"}),e.jsx("button",{className:"w-full px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"PhilHealth Report"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Health insurance contributions report"}),e.jsx("button",{className:"w-full px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Pag-IBIG Report"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"HDMF contributions report"}),e.jsx("button",{className:"w-full px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-pink-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-pink-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"13th Month Pay"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Annual 13th month pay computation"}),e.jsx("button",{className:"w-full px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Loans & Advances"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Employee loans and salary advances report"}),e.jsx("button",{className:"w-full px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Payroll History"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Historical payroll records and audit trail"}),e.jsx("button",{className:"w-full px-4 py-2 bg-gray-200 text-gray-400 rounded-md cursor-not-allowed",disabled:!0,children:"Coming Soon"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Report Templates"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"All payroll reports will be available for export in multiple formats:"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("span",{className:"px-4 py-2 bg-red-100 text-red-700 rounded-full text-sm font-medium",children:"PDF"}),e.jsx("span",{className:"px-4 py-2 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:"Excel (XLSX)"}),e.jsx("span",{className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:"CSV"}),e.jsx("span",{className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-full text-sm font-medium",children:"Print"})]})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Integration:"})," Payroll reports will automatically pull data from the DTR system and employee 201 files for accurate calculations."]})})]})})]}),HA=()=>{const{user:t}=Qt(),[s,r]=y.useState({lguDtrName:"DTR Management System",lguName:"",lguType:"Municipal",lguAddress:"",lguContact:"",lguEmail:"",lguFbUrl:"",lguMayor:"",lguHrmo:"",lguTreasurer:"",lguBursar:""}),[n,a]=y.useState(!1),[l,o]=y.useState(!1),[i,c]=y.useState(""),[h,p]=y.useState(""),[m,u]=y.useState(null),[x,j]=y.useState(""),[v,N]=y.useState(null),[f,d]=y.useState(""),[g,b]=y.useState(null),[E,R]=y.useState(""),[S,k]=y.useState(null),[L,A]=y.useState(""),[D,I]=y.useState(null),[O,C]=y.useState(""),F=[{value:"Municipal",label:"Municipal"},{value:"Province",label:"Province"},{value:"National",label:"National"}];y.useEffect(()=>{U()},[]);const U=async()=>{a(!0);try{const _=await le.get("/company/info");_.data.success&&(r(_.data.data),_.data.data.logoPreview&&j(_.data.data.logoPreview),_.data.data.mayorEsigPreview&&d(_.data.data.mayorEsigPreview),_.data.data.hrmoEsigPreview&&R(_.data.data.hrmoEsigPreview),_.data.data.treasurerEsigPreview&&A(_.data.data.treasurerEsigPreview),_.data.data.bursarEsigPreview&&C(_.data.data.bursarEsigPreview))}catch(_){console.error("Error fetching company info:",_),r({lguDtrName:"",lguName:"",lguType:"Municipal",lguAddress:"",lguContact:"",lguEmail:"",lguFbUrl:"",lguMayor:"",lguHrmo:"",lguTreasurer:"",lguBursar:""})}finally{a(!1)}},Y=(_,M)=>{r(P=>({...P,[_]:M}))},G=(_,M)=>{if(!_)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(_.type)){p("Please upload a valid image file (JPEG, PNG, GIF, or WebP)");return}if(_.size>5*1024*1024){p("File size must be less than 5MB");return}p("");const $=new FileReader;$.onload=B=>{const w=B.target.result;switch(M){case"logo":u(_),j(w),c("Logo will be resized to 200x200 pixels and compressed to max 50KB");break;case"mayorEsig":N(_),d(w),c("E-signature will be resized to 300x200 pixels and compressed to max 100KB");break;case"hrmoEsig":b(_),R(w),c("E-signature will be resized to 300x200 pixels and compressed to max 100KB");break;case"treasurerEsig":k(_),A(w),c("E-signature will be resized to 300x200 pixels and compressed to max 100KB");break;case"bursarEsig":I(_),C(w),c("E-signature will be resized to 300x200 pixels and compressed to max 100KB");break}},$.readAsDataURL(_)},V=_=>{switch(_){case"logo":u(null),j("");break;case"mayorEsig":N(null),d("");break;case"hrmoEsig":b(null),R("");break;case"treasurerEsig":k(null),A("");break;case"bursarEsig":I(null),C("");break}},W=async()=>{var _,M;o(!0),p(""),c("");try{const P=new FormData;Object.keys(s).forEach(B=>{P.append(B,s[B])}),m&&P.append("logo",m),v&&P.append("mayorEsig",v),g&&P.append("hrmoEsig",g),S&&P.append("treasurerEsig",S),D&&P.append("bursarEsig",D);const $=await le.put("/company/info",P,{headers:{"Content-Type":"multipart/form-data"}});$.data.success?(c("Company information updated successfully!"),u(null),N(null),b(null),k(null),I(null)):p($.data.message||"Failed to update company information")}catch(P){console.error("Error updating company info:",P),p(((M=(_=P.response)==null?void 0:_.data)==null?void 0:M.message)||"Failed to update company information")}finally{o(!1)}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-600",children:"Loading company information..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Company Information"}),e.jsx("p",{className:"text-gray-600",children:"Manage LGU details and organization information"})]}),i&&e.jsx("div",{className:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded",children:i}),h&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:h}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Organization Details"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["DTR System Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.lguDtrName,onChange:_=>Y("lguDtrName",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter DTR system name...",disabled:l,maxLength:25}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will be displayed as the main title in the application header (max 25 characters)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["LGU Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.lguName,onChange:_=>Y("lguName",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter LGU name...",disabled:l,maxLength:50})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["LGU Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:s.lguType,onChange:_=>Y("lguType",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:l,children:F.map(_=>e.jsx("option",{value:_.value,children:_.label},_.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.lguAddress,onChange:_=>Y("lguAddress",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter complete address...",disabled:l,maxLength:50})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Number"}),e.jsx("input",{type:"text",value:s.lguContact,onChange:_=>Y("lguContact",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter contact number...",disabled:l,maxLength:20})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:s.lguEmail,onChange:_=>Y("lguEmail",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address...",disabled:l,maxLength:25})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Facebook URL"}),e.jsx("input",{type:"url",value:s.lguFbUrl,onChange:_=>Y("lguFbUrl",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter Facebook page URL...",disabled:l,maxLength:250})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"LGU Signatories"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mayor Name"}),e.jsx("input",{type:"text",value:s.lguMayor,onChange:_=>Y("lguMayor",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter mayor's name...",disabled:l,maxLength:50})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mayor's E-Signature"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:f?e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:f,alt:"Mayor E-Signature Preview",className:"max-h-20 max-w-full object-contain mx-auto mb-2"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("label",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 cursor-pointer",children:["Change",e.jsx("input",{type:"file",accept:"image/*",onChange:_=>G(_.target.files[0],"mayorEsig"),className:"hidden",disabled:l})]}),e.jsx("button",{onClick:()=>V("mayorEsig"),className:"px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",disabled:l,children:"Remove"})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),e.jsxs("label",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 cursor-pointer",children:["Upload E-Signature",e.jsx("input",{type:"file",accept:"image/*",onChange:_=>G(_.target.files[0],"mayorEsig"),className:"hidden",disabled:l})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"HRMO Name"}),e.jsx("input",{type:"text",value:s.lguHrmo,onChange:_=>Y("lguHrmo",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter HRMO name...",disabled:l,maxLength:50})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"HRMO's E-Signature"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:E?e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:E,alt:"HRMO E-Signature Preview",className:"max-h-20 max-w-full object-contain mx-auto mb-2"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("label",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 cursor-pointer",children:["Change",e.jsx("input",{type:"file",accept:"image/*",onChange:_=>G(_.target.files[0],"hrmoEsig"),className:"hidden",disabled:l})]}),e.jsx("button",{onClick:()=>V("hrmoEsig"),className:"px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",disabled:l,children:"Remove"})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),e.jsxs("label",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 cursor-pointer",children:["Upload E-Signature",e.jsx("input",{type:"file",accept:"image/*",onChange:_=>G(_.target.files[0],"hrmoEsig"),className:"hidden",disabled:l})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Treasurer Name"}),e.jsx("input",{type:"text",value:s.lguTreasurer,onChange:_=>Y("lguTreasurer",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter treasurer's name...",disabled:l,maxLength:50})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Treasurer's E-Signature"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:L?e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:L,alt:"Treasurer E-Signature Preview",className:"max-h-20 max-w-full object-contain mx-auto mb-2"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("label",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 cursor-pointer",children:["Change",e.jsx("input",{type:"file",accept:"image/*",onChange:_=>G(_.target.files[0],"treasurerEsig"),className:"hidden",disabled:l})]}),e.jsx("button",{onClick:()=>V("treasurerEsig"),className:"px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",disabled:l,children:"Remove"})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),e.jsxs("label",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 cursor-pointer",children:["Upload E-Signature",e.jsx("input",{type:"file",accept:"image/*",onChange:_=>G(_.target.files[0],"treasurerEsig"),className:"hidden",disabled:l})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bursar Name"}),e.jsx("input",{type:"text",value:s.lguBursar,onChange:_=>Y("lguBursar",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter bursar's name...",disabled:l,maxLength:50})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bursar's E-Signature"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:O?e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:O,alt:"Bursar E-Signature Preview",className:"max-h-20 max-w-full object-contain mx-auto mb-2"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("label",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 cursor-pointer",children:["Change",e.jsx("input",{type:"file",accept:"image/*",onChange:_=>G(_.target.files[0],"bursarEsig"),className:"hidden",disabled:l})]}),e.jsx("button",{onClick:()=>V("bursarEsig"),className:"px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",disabled:l,children:"Remove"})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),e.jsxs("label",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 cursor-pointer",children:["Upload E-Signature",e.jsx("input",{type:"file",accept:"image/*",onChange:_=>G(_.target.files[0],"bursarEsig"),className:"hidden",disabled:l})]})]})})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"LGU Logo"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:x?e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:x,alt:"Logo Preview",className:"max-h-40 max-w-full object-contain mx-auto mb-4"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("label",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 cursor-pointer text-sm",children:["Change Logo",e.jsx("input",{type:"file",accept:"image/*",onChange:_=>G(_.target.files[0],"logo"),className:"hidden",disabled:l})]}),e.jsx("button",{onClick:()=>V("logo"),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm",disabled:l,children:"Remove"})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-20 h-20 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsxs("label",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 cursor-pointer text-sm",children:["Upload Logo",e.jsx("input",{type:"file",accept:"image/*",onChange:_=>G(_.target.files[0],"logo"),className:"hidden",disabled:l})]})]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Recommended size: 200x200 pixels, max 2MB"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:W,disabled:l,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Saving...":"Save Changes"})})]})};function BA(){const[t,s]=y.useState([]),[r,n]=y.useState(!1),[a,l]=y.useState(!1),[o,i]=y.useState(!1),[c,h]=y.useState(null),[p,m]=y.useState({DEPTNAME:"",SUPDEPTID:0,InheritParentSch:0,InheritDeptSch:0,InheritDeptSchClass:0,AutoSchPlan:0,InLate:0,OutEarly:0,InheritDeptRule:0,MinAutoSchInterval:0,RegisterOT:0,DefaultSchId:0,ATT:0,Holiday:0,OverTime:0}),[u,x]=y.useState(""),[j,v]=y.useState(new Set),N=async()=>{try{n(!0),console.log(" [DEPARTMENTS] Fetching departments...");const C=await le.get("/departments");console.log(" [DEPARTMENTS] API Response:",C.data),C.data&&C.data.success&&C.data.data?(s(C.data.data),console.log(" [DEPARTMENTS] Loaded departments:",C.data.data.length)):(console.log(" [DEPARTMENTS] No data in response"),s([]))}catch(C){console.error(" [DEPARTMENTS] Error fetching departments:",C),s([])}finally{n(!1)}};y.useEffect(()=>{N()},[]);const f=C=>{const F=new Map,U=[];return C.forEach(Y=>{F.set(Y.DEPTID,{...Y,children:[]})}),C.forEach(Y=>{const G=F.get(Y.DEPTID);if(Y.SUPDEPTID===0||!Y.SUPDEPTID)U.push(G);else{const V=F.get(Y.SUPDEPTID);V?V.children.push(G):U.push(G)}}),U},d=(C,F)=>F?C.filter(U=>{var V;const Y=(V=U.DEPTNAME)==null?void 0:V.toLowerCase().includes(F.toLowerCase()),G=U.children?d(U.children,F).length>0:!1;return Y||G}):C,g=C=>{const F=new Set(j);F.has(C)?F.delete(C):F.add(C),v(F)},b=C=>{if(!C||C===0)return"None";const F=t.find(U=>U.DEPTID===C);return F?F.DEPTNAME:"Unknown"},E=(C,F=0)=>{const U=C.children&&C.children.length>0,Y=j.has(C.DEPTID),G={paddingLeft:`${F*24}px`},V=F<=1;return e.jsxs(st.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-200",children:[e.jsx("td",{className:"px-4 py-3 text-center",children:U?e.jsx("button",{onClick:()=>g(C.DEPTID),className:"w-6 h-6 flex items-center justify-center text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded transition-colors",children:Y?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):e.jsx("div",{className:"w-6 h-6"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",style:G,children:[e.jsxs("div",{className:"flex items-center mr-2",children:[Array.from({length:F},(W,_)=>e.jsx("div",{className:"w-6 h-px bg-gray-300 mr-2"},_)),U&&e.jsx("div",{className:"w-3 h-3 mr-1",children:Y?e.jsx("svg",{className:"w-3 h-3 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-3 h-3 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center text-white font-bold text-sm mr-3",children:C.DEPTNAME.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:C.DEPTNAME}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",C.DEPTID]})]})]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:b(C.SUPDEPTID)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Level ",F]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[C.InheritParentSch===1&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"IPS"}),C.InheritDeptSch===1&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"IDS"}),C.InheritDeptSchClass===1&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"IDSC"}),C.AutoSchPlan===1&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"ASP"}),C.InLate===1&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"IL"}),C.OutEarly===1&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"OE"}),C.InheritDeptRule===1&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:"IDR"}),C.RegisterOT===1&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-pink-100 text-pink-800",children:"ROT"}),C.ATT===1&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-teal-100 text-teal-800",children:"ATT"}),C.Holiday===1&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-cyan-100 text-cyan-800",children:"HOL"}),C.OverTime===1&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"OT"})]})}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("button",{onClick:()=>A(C),className:"text-indigo-600 hover:text-indigo-900 px-3 py-1 rounded border border-indigo-300 hover:bg-indigo-50 transition duration-200",children:"Edit"}),e.jsx("button",{onClick:()=>L(C.DEPTID),disabled:V,title:V?"Cannot delete Level 0 or Level 1 departments":"Delete",className:`px-3 py-1 rounded border transition duration-200 ${V?"text-gray-400 border-gray-200 bg-gray-100 cursor-not-allowed":"text-red-600 hover:text-red-900 border-red-300 hover:bg-red-50"}`,children:"Delete"})]})})]}),U&&Y&&e.jsx(e.Fragment,{children:C.children.map(W=>E(W,F+1))})]},C.DEPTID)},R=C=>{const{name:F,value:U}=C.target;m(Y=>({...Y,[F]:U}))},S=async C=>{C.preventDefault();try{n(!0);const F=await le.post("/departments",p);F.data.success?(alert("Department added successfully!"),l(!1),m({DEPTNAME:"",SUPDEPTID:0,InheritParentSch:0,InheritDeptSch:0,InheritDeptSchClass:0,AutoSchPlan:0,InLate:0,OutEarly:0,InheritDeptRule:0,MinAutoSchInterval:0,RegisterOT:0,DefaultSchId:0,ATT:0,Holiday:0,OverTime:0}),N()):alert("Error adding department: "+F.data.message)}catch(F){console.error("Error adding department:",F),alert("Error adding department. Please try again.")}finally{n(!1)}},k=async C=>{C.preventDefault();try{n(!0);const F=await le.put(`/departments/${c.DEPTID}`,p);F.data.success?(alert("Department updated successfully!"),i(!1),h(null),m({DEPTNAME:"",SUPDEPTID:0,InheritParentSch:0,InheritDeptSch:0,InheritDeptSchClass:0,AutoSchPlan:0,InLate:0,OutEarly:0,InheritDeptRule:0,MinAutoSchInterval:0,RegisterOT:0,DefaultSchId:0,ATT:0,Holiday:0,OverTime:0}),N()):alert("Error updating department: "+F.data.message)}catch(F){console.error("Error updating department:",F),alert("Error updating department. Please try again.")}finally{n(!1)}},L=async C=>{if(window.confirm("Are you sure you want to delete this department?"))try{n(!0);const F=await le.delete(`/departments/${C}`);F.data.success?(alert("Department deleted successfully!"),N()):alert("Error deleting department: "+F.data.message)}catch(F){console.error("Error deleting department:",F),alert("Error deleting department. Please try again.")}finally{n(!1)}},A=C=>{h(C),m({DEPTNAME:C.DEPTNAME||"",SUPDEPTID:C.SUPDEPTID||0,InheritParentSch:C.InheritParentSch||0,InheritDeptSch:C.InheritDeptSch||0,InheritDeptSchClass:C.InheritDeptSchClass||0,AutoSchPlan:C.AutoSchPlan||0,InLate:C.InLate||0,OutEarly:C.OutEarly||0,InheritDeptRule:C.InheritDeptRule||0,MinAutoSchInterval:C.MinAutoSchInterval||0,RegisterOT:C.RegisterOT||0,DefaultSchId:C.DefaultSchId||0,ATT:C.ATT||0,Holiday:C.Holiday||0,OverTime:C.OverTime||0}),i(!0)},D=()=>{l(!1),i(!1),h(null),m({DEPTNAME:"",SUPDEPTID:0,InheritParentSch:0,InheritDeptSch:0,InheritDeptSchClass:0,AutoSchPlan:0,InLate:0,OutEarly:0,InheritDeptRule:0,MinAutoSchInterval:0,RegisterOT:0,DefaultSchId:0,ATT:0,Holiday:0,OverTime:0})},I=f(t),O=d(I,u);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:u,onChange:C=>x(C.target.value),placeholder:"Search departments...",className:"w-full sm:w-80 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),e.jsxs("button",{onClick:()=>l(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition duration-200 ease-in-out flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("span",{children:"Add Department"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[r&&e.jsx("div",{className:"p-4 text-center",children:e.jsxs("div",{className:"inline-flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Loading departments..."})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-12",children:e.jsx("svg",{className:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DEPARTMENT NAME"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PARENT DEPARTMENT"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"HIERARCHY LEVEL"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"STATUS FLAGS"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ACTIONS"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.length===0&&!r?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:u?"No departments found matching your search.":"No departments available."})}):O.map(C=>E(C))})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Departments"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.filter(C=>C.SUPDEPTID===0||!C.SUPDEPTID).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Top Level Departments"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.filter(C=>C.SUPDEPTID!==0&&C.SUPDEPTID).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Sub Departments"})]})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add New Department"}),e.jsx("button",{onClick:D,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:S,className:"p-6 space-y-4 overflow-y-auto max-h-[calc(90vh-120px)]",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department Name *"}),e.jsx("input",{type:"text",name:"DEPTNAME",value:p.DEPTNAME,onChange:R,required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter department name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Department"}),e.jsxs("select",{name:"SUPDEPTID",value:p.SUPDEPTID,onChange:R,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:0,children:"Select parent department"}),t.map(C=>e.jsx("option",{value:C.DEPTID,children:C.DEPTNAME},C.DEPTID))]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:r,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Adding...":"Add Department"}),e.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"})]})]})]})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Department"}),e.jsx("button",{onClick:D,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:k,className:"p-6 space-y-4 overflow-y-auto max-h-[calc(90vh-120px)]",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department Name *"}),e.jsx("input",{type:"text",name:"DEPTNAME",value:p.DEPTNAME,onChange:R,required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter department name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Department"}),e.jsxs("select",{name:"SUPDEPTID",value:p.SUPDEPTID,onChange:R,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:0,children:"Select parent department"}),t.filter(C=>C.DEPTID!==(c==null?void 0:c.DEPTID)).map(C=>e.jsx("option",{value:C.DEPTID,children:C.DEPTNAME},C.DEPTID))]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:r,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Updating...":"Update Department"}),e.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"})]})]})]})})]})}const zA=()=>{const[t,s]=y.useState([]),[r,n]=y.useState({}),[a,l]=y.useState(!1),[o,i]=y.useState(null),[c,h]=y.useState(!1),[p,m]=y.useState(!1),[u,x]=y.useState([]),[j,v]=y.useState(!1),[N,f]=y.useState({currentStep:"",totalSteps:0,currentStepNumber:0,percentage:0,message:"",details:"",logsProcessed:0,totalLogs:0,errors:[]}),[d,g]=y.useState(null),[b,E]=y.useState({startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[R,S]=y.useState({}),[k,L]=y.useState(!1),[A,D]=y.useState({currentStep:"",percentage:0,message:"",details:"",logsFound:0,logsProcessed:0,logsSaved:0,errors:[]}),[I,O]=y.useState(null),[C,F]=y.useState(!1),[U,Y]=y.useState({currentStep:"",percentage:0,message:"",details:"",totalMachines:0,processedMachines:0,currentMachine:"",machineResults:[],errors:[],currentMachineProgress:0,currentMachineStep:"",currentMachineDetails:"",logsFound:0,logsProcessed:0,logsSaved:0}),[G,V]=y.useState(null),[W,_]=y.useState(!1),[M,P]=y.useState({id:"",name:"",connectionType:1,ipAddress:"",serialPort:1,port:4370,baudrate:115200,commPassword:0,machine:""}),[$,B]=y.useState(!1),[w,T]=y.useState(null),[H,K]=y.useState(!1),[J,X]=y.useState(!1),[pe,oe]=y.useState(null),[ce,Ae]=y.useState({id:"",name:"",connectionType:1,ipAddress:"",serialPort:1,port:4370,baudrate:115200,commPassword:0,machine:""}),[Be,Ie]=y.useState(!1),[ye,se]=y.useState(null),[we,ve]=y.useState(!1),Q=y.useRef(null),[ne,he]=y.useState(!1),Me=async()=>{try{console.log("Fetching device info...");const ae=await le.get("/machines/device-info",{timeout:6e4});if(console.log("Device info response:",ae.data),ae.data.success){const Ce={};ae.data.data.forEach(Se=>{Ce[Se.machineId]=Se}),S(Ce),console.log("Device info map:",Ce)}}catch(ae){console.error("Error fetching device info:",ae)}};y.useEffect(()=>{Me();const ae=setInterval(Me,3e4);return()=>clearInterval(ae)},[]),y.useEffect(()=>(be(),ze(),()=>{Q.current&&clearInterval(Q.current)}),[]);const be=async()=>{try{l(!0);const ae=await le.get("/machines");ae.data.success&&s(ae.data.data)}catch(ae){console.error("Error fetching machines:",ae)}finally{l(!1)}},De=async()=>{try{const ae=await le.get("/machines/status/all");if(ae.data.success){const Ce={};ae.data.data.forEach(Se=>{Ce[Se.id]=Se}),n(Ce)}}catch(ae){console.error("Error fetching machine statuses:",ae)}},ze=()=>{De(),Q.current=setInterval(()=>{De()},3e4)},Ee=ae=>{const Ce=r[ae];return Ce||{status:"checking",pingTime:null,errorMessage:null}},Z=ae=>{const Ce=Ee(ae.ID);return Ce.status==="checking"?e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Checking..."}):Ce.status==="online"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Online"}),Ce.pingTime&&e.jsxs("span",{className:"text-xs text-gray-500",children:[Ce.pingTime,"ms"]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"Offline"}),Ce.pingTime&&Ce.pingTime>1e3&&e.jsxs("span",{className:"text-xs text-red-500",title:`High latency: ${Ce.pingTime}ms`,children:[Ce.pingTime,"ms"]}),Ce.errorMessage&&e.jsx("span",{className:"text-xs text-red-500",title:Ce.errorMessage,children:"Error"})]})},ee=async ae=>{try{console.log("Starting preview logs for machine:",ae),v(!0),L(!0),D({currentStep:"Starting",percentage:0,message:"Initializing preview process...",details:"",logsFound:0,logsProcessed:0,logsSaved:0,errors:[]}),O(null);const Ce=new EventSource(`/api/machines/${ae}/manual-fetch?startDate=${b.startDate}&endDate=${b.endDate}`);window.currentEventSource=Ce,Ce.onopen=()=>{console.log("SSE connection opened for preview logs")},Ce.onmessage=Se=>{var qe,Ze,ke,te,Ne,de;try{const q=JSON.parse(Se.data);if(console.log("[FRONTEND] Received SSE data for preview:",q),q.type==="connected"){console.log("Connected to preview logs process");return}if(q.type==="complete"){console.log("[FRONTEND] Preview complete event received:",q),console.log("[FRONTEND] Full data object:",JSON.stringify(q,null,2)),console.log("[FRONTEND] Data.data:",q.data),console.log("[FRONTEND] New logs count:",(qe=q.data)==null?void 0:qe.newLogs),console.log("[FRONTEND] Logs array length:",(ke=(Ze=q.data)==null?void 0:Ze.logs)==null?void 0:ke.length),console.log("[FRONTEND] Duplicates count:",(te=q.data)==null?void 0:te.duplicates),console.log("[FRONTEND] Skipped count:",(Ne=q.data)==null?void 0:Ne.skipped),console.log("[FRONTEND] Unregistered employees:",(de=q.data)==null?void 0:de.unregisteredEmployees),O(q),q.data&&q.data.logs&&(x(q.data.logs),console.log("Preview logs set:",q.data.logs)),D(me=>({...me,currentStep:"Completed",message:q.message,percentage:100,errors:[]})),v(!1),Ce.close(),window.currentEventSource=null;return}if(q.type==="error"){console.error("[FRONTEND] Preview error event received:",q),O({success:!1,message:q.message}),D(me=>({...me,currentStep:"Error",message:q.message,percentage:100,errors:[q.message]})),v(!1),Ce.close(),window.currentEventSource=null;return}if(q.type==="progress"){console.log("[FRONTEND] Progress event received:",q),D(me=>({...me,...q,errors:q.errors||me.errors||[]}));return}if(q.error)throw new Error(q.error);console.log("[FRONTEND] Regular update received:",q),D(me=>({...me,...q,errors:q.errors||me.errors||[]}))}catch(q){console.error("Error parsing SSE data:",q)}},Ce.onerror=Se=>{console.error("SSE error for preview logs:",Se),D(qe=>({...qe,errors:[...qe.errors,"Connection error occurred"]})),Ce.close()}}catch(Ce){console.error("Error previewing logs:",Ce),O({success:!1,message:Ce.message}),D(Se=>({...Se,message:"Preview failed!"}))}},_e=async ae=>{try{console.log("Starting fetch logs for machine:",ae),v(!0),m(!0),f({currentStep:"Starting",totalSteps:0,currentStepNumber:0,percentage:0,message:"Initializing fetch process...",details:"",logsProcessed:0,totalLogs:0,errors:[]}),g(null);const Ce=new EventSource(`/api/machines/${ae}/sync-sse?startDate=${b.startDate}&endDate=${b.endDate}&saveToDatabase=true`);window.currentEventSource=Ce,Ce.onopen=()=>{console.log("SSE connection opened for fetch logs")},Ce.onmessage=Se=>{try{const qe=JSON.parse(Se.data);if(console.log("[FRONTEND] Received SSE data for fetch:",qe),qe.type==="connected"){console.log("Connected to fetch logs process");return}if(qe.type==="complete"){console.log("[FRONTEND] Fetch complete event received:",qe),g(qe),qe.data&&qe.data.logs&&x(qe.data.logs),f(Ze=>({...Ze,currentStep:"Completed",message:qe.message,percentage:100,errors:[]})),v(!1),Ce.close(),window.currentEventSource=null;return}if(qe.type==="error"){console.log("[FRONTEND] Fetch error event received:",qe),g({success:!1,message:qe.message}),f(Ze=>({...Ze,errors:[...Ze.errors||[],qe.message]})),v(!1),Ce.close(),window.currentEventSource=null;return}if(qe.type==="progress"){console.log("[FRONTEND] Fetch progress event received:",qe),f(Ze=>({...Ze,...qe,errors:qe.errors||Ze.errors||[]}));return}if(qe.error)throw new Error(qe.error);console.log("[FRONTEND] Fetch regular update received:",qe),f(Ze=>({...Ze,...qe,errors:qe.errors||Ze.errors||[]}))}catch(qe){console.error("Error parsing SSE data:",qe)}},Ce.onerror=Se=>{console.error("SSE error for fetch logs:",Se),f(qe=>({...qe,errors:[...qe.errors||[],"Connection error occurred"]})),v(!1),Ce.close(),window.currentEventSource=null}}catch(Ce){console.error("Error fetching logs:",Ce),g({success:!1,message:Ce.message}),f(Se=>({...Se,message:"Fetch failed!"})),v(!1)}},Qe=async()=>{try{v(!0),F(!0),Y({currentStep:"Initializing",percentage:0,message:"Starting bulk fetch process...",details:"Preparing to fetch logs from all online machines",totalMachines:0,processedMachines:0,currentMachine:"",machineResults:[],errors:[],currentMachineProgress:0,currentMachineStep:"",currentMachineDetails:"",logsFound:0,logsProcessed:0,logsSaved:0}),V(null);const ae=new EventSource(`/api/machines/sync-all-sse?startDate=${b.startDate}&endDate=${b.endDate}&saveToDatabase=true`);window.currentEventSource=ae,ae.onopen=()=>{console.log("SSE connection opened for fetch all logs")},ae.onmessage=Ce=>{try{const Se=JSON.parse(Ce.data);if(console.log("[FRONTEND] Received SSE data for fetch all:",Se),Se.type==="connected"){console.log("Connected to fetch all logs process");return}if(Se.type==="complete"){console.log("[FRONTEND] Fetch all complete event received:",Se),V(Se),Y(qe=>({...qe,currentStep:"Completed",message:Se.message,percentage:100,errors:[]})),v(!1),ae.close(),window.currentEventSource=null;return}if(Se.type==="error"){console.log("[FRONTEND] Fetch all error event received:",Se),V({success:!1,message:Se.message}),Y(qe=>({...qe,currentStep:"Error",message:Se.message,percentage:100,errors:[Se.message]})),v(!1),ae.close(),window.currentEventSource=null;return}if(Se.type==="progress"){console.log("[FRONTEND] Fetch all progress event received:",Se),console.log("[FRONTEND] logsFound:",Se.logsFound),console.log("[FRONTEND] logsProcessed:",Se.logsProcessed),console.log("[FRONTEND] currentMachine:",Se.currentMachine),Y(qe=>({...qe,...Se,errors:Se.errors||qe.errors||[]}));return}if(Se.error)throw new Error(Se.error);console.log("[FRONTEND] Fetch all regular update received:",Se),Y(qe=>({...qe,...Se,errors:Se.errors||qe.errors||[]}))}catch(Se){console.error("Error parsing SSE data:",Se)}},ae.onerror=Ce=>{console.error("SSE error for fetch all logs:",Ce),Y(Se=>({...Se,errors:[...Se.errors||[],"Connection error occurred"]})),v(!1),ae.close(),window.currentEventSource=null}}catch(ae){console.error("Error fetching all logs:",ae),V({success:!1,message:ae.message}),Y(Ce=>({...Ce,message:"Fetch all failed!"})),v(!1)}},je=async()=>{var ae,Ce;if(!M.ipAddress||!M.port){T({success:!1,message:"Please enter IP address and port"});return}B(!0),T(null);try{const Se=await le.post("/machines/test-connection",{ipAddress:M.ipAddress,port:M.port,password:M.password});T({success:Se.data.success,message:Se.data.message,pingTime:Se.data.pingTime})}catch(Se){T({success:!1,message:((Ce=(ae=Se.response)==null?void 0:ae.data)==null?void 0:Ce.message)||"Connection test failed"})}finally{B(!1)}},Ke=async()=>{var ae,Ce,Se,qe;if(!M.name||!M.ipAddress||!M.id||!M.machine){alert("Please fill in all required fields");return}if(M.machine.length!==3){alert("Machine number must be exactly 3 digits");return}K(!0);try{const Ze=await le.post("/machines",M);Ze.data.success?(alert("Machine registered successfully!"),_(!1),P({id:"",name:"",connectionType:1,ipAddress:"",serialPort:1,port:4370,baudrate:115200,commPassword:0,machine:""}),T(null),be()):alert("Failed to register machine: "+Ze.data.message)}catch(Ze){if((Ce=(ae=Ze.response)==null?void 0:ae.data)!=null&&Ce.conflicts){const ke=Ze.response.data.conflicts;alert(`Registration failed: The following fields already exist: ${ke.join(", ")}. Please use different values.`)}else alert("Error registering machine: "+(((qe=(Se=Ze.response)==null?void 0:Se.data)==null?void 0:qe.message)||Ze.message))}finally{K(!1)}},rt=async()=>{var ae,Ce;if(!ce.name||!ce.ipAddress||!ce.id||!ce.machine){alert("Please fill in all required fields");return}if(ce.machine.length!==3){alert("Machine number must be exactly 3 digits");return}ve(!0);try{const Se=await le.put(`/machines/${pe.ID}`,ce);Se.data.success?(alert("Machine updated successfully!"),X(!1),oe(null),Ae({id:"",name:"",connectionType:1,ipAddress:"",serialPort:1,port:4370,baudrate:115200,commPassword:0,machine:""}),se(null),be()):alert("Failed to update machine: "+Se.data.message)}catch(Se){alert("Error updating machine: "+(((Ce=(ae=Se.response)==null?void 0:ae.data)==null?void 0:Ce.message)||Se.message))}finally{ve(!1)}},gt=async()=>{var ae,Ce;if(!ce.ipAddress||!ce.port){se({success:!1,message:"Please enter IP address and port"});return}Ie(!0),se(null);try{const Se=await le.post("/machines/test-connection",{ipAddress:ce.ipAddress,port:ce.port,password:ce.commPassword});se({success:Se.data.success,message:Se.data.message,pingTime:Se.data.pingTime})}catch(Se){se({success:!1,message:((Ce=(ae=Se.response)==null?void 0:ae.data)==null?void 0:Ce.message)||"Connection test failed"})}finally{Ie(!1)}},mt=ae=>{oe(ae),Ae({id:ae.ID.toString(),name:ae.MachineAlias,connectionType:ae.ConnectType,ipAddress:ae.IP,serialPort:ae.SerialPort,port:ae.Port,baudrate:ae.Baudrate,commPassword:ae.CommPassword,machine:ae.MachineNumber.toString().padStart(3,"0")}),se(null),X(!0)},it=async ae=>{var Ce,Se;try{he(!0);const qe=await le.post(`/machines/${ae}/sync-time`);qe.data.success?alert(`Time synchronized successfully for ${qe.data.machineName}!`):alert("Failed to sync time: "+qe.data.message)}catch(qe){alert("Error syncing time: "+(((Se=(Ce=qe.response)==null?void 0:Ce.data)==null?void 0:Se.message)||qe.message))}finally{he(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Biometric Machine Management"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>_(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center space-x-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("span",{children:"Register Machine"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Real-time monitoring active"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Date Range"}),e.jsx("button",{onClick:Qe,disabled:j,className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",title:"Fetch logs from all online machines",children:j?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Fetching All..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),e.jsx("span",{children:"Fetch All Logs"})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),e.jsx("input",{type:"date",value:b.startDate,onChange:ae=>E({...b,startDate:ae.target.value}),className:"mt-1 block border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),e.jsx("input",{type:"date",value:b.endDate,onChange:ae=>E({...b,endDate:ae.target.value}),className:"mt-1 block border border-gray-300 rounded-md px-3 py-2"})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Machine Alias"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IP Address"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Port"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Face Print"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Finger Print"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Log Count"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(ae=>{var Ce,Se,qe;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:ae.MachineAlias}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ae.IP}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ae.Port}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:((Ce=R[ae.ID])==null?void 0:Ce.faceCount)||0})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:((Se=R[ae.ID])==null?void 0:Se.fingerprintCount)||0})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:((qe=R[ae.ID])==null?void 0:qe.logCount)||0})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Z(ae)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>mt(ae),className:"bg-yellow-600 text-white p-2 rounded-lg hover:bg-yellow-700 transition-colors",title:"Edit machine information",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>it(ae.ID),disabled:ne||Ee(ae.ID).status!=="online",className:"bg-orange-600 text-white p-2 rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Sync PC time to biometric machine",children:ne?e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("button",{onClick:()=>ee(ae.ID),disabled:j||Ee(ae.ID).status!=="online",className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Preview logs from machine (read-only)",children:e.jsxs("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("button",{onClick:()=>_e(ae.ID),disabled:j||Ee(ae.ID).status!=="online",className:"bg-green-600 text-white p-2 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Fetch logs and save to database",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})})]})})]},ae.ID)})})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:d?"Sync Complete":"Syncing Logs"}),e.jsx("button",{onClick:()=>{m(!1),v(!1),window.currentEventSource&&(window.currentEventSource.close(),window.currentEventSource=null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:`p-4 rounded-lg ${d.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-3 ${d.success?"bg-green-100":"bg-red-100"}`,children:d.success?e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium ${d.success?"text-green-800":"text-red-800"}`,children:d.success?"Sync Completed Successfully":"Sync Failed"}),e.jsx("p",{className:"text-sm text-gray-600",children:d.message})]})]}),d.success&&d.data&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Logs:"}),e.jsx("span",{className:"font-medium",children:d.data.totalLogs})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"New Logs:"}),e.jsx("span",{className:"font-medium text-green-600",children:d.data.saved})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Duplicates:"}),e.jsx("span",{className:"font-medium text-orange-600",children:d.data.duplicates})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Processed:"}),e.jsx("span",{className:"font-medium",children:d.data.processed})]})]}),d.data.saved>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("button",{onClick:()=>h(!0),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.jsxs("span",{children:["View Saved Logs (",d.data.saved,")"]})]})})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:N.currentStep}),e.jsx("span",{className:"text-sm text-gray-500",children:N.logsFound>0?`${N.logsProcessed}/${N.logsFound}`:"Processing..."})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:N.logsFound>0?`${Math.min(N.logsProcessed/N.logsFound*100,100)}%`:"0%"}})}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:N.message}),N.details&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:N.details})]})]}),N.logsFound>0&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Logs:"}),e.jsx("span",{className:"font-medium",children:N.logsFound})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Processed:"}),e.jsx("span",{className:"font-medium",children:N.logsProcessed})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Saved:"}),e.jsx("span",{className:"font-medium text-green-600",children:N.logsSaved||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Progress:"}),e.jsxs("span",{className:"font-medium",children:[Math.round(N.logsProcessed/N.logsFound*100),"%"]})]})]})})]}),e.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{m(!1),v(!1),window.currentEventSource&&(window.currentEventSource.close(),window.currentEventSource=null)},className:`px-6 py-2 rounded-lg font-medium transition-colors ${d?"bg-gray-600 text-white hover:bg-gray-700":"bg-red-600 text-white hover:bg-red-700"}`,children:d?"Close":"Cancel"})})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:I?"Preview Complete":"Previewing Logs"}),e.jsx("button",{onClick:()=>{L(!1),v(!1),window.currentEventSource&&(window.currentEventSource.close(),window.currentEventSource=null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),I?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:`p-4 rounded-lg ${I.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-3 ${I.success?"bg-green-100":"bg-red-100"}`,children:I.success?e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium ${I.success?"text-green-800":"text-red-800"}`,children:I.success?"Preview Completed":"Preview Failed"}),e.jsx("p",{className:"text-sm text-gray-600",children:I.message})]})]}),I.success&&I.data&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Logs:"}),e.jsx("span",{className:"font-medium",children:I.data.totalLogs})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"New Logs:"}),e.jsx("span",{className:"font-medium text-green-600",children:I.data.newLogs})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Duplicates:"}),e.jsx("span",{className:"font-medium text-orange-600",children:I.data.duplicates})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Skipped:"}),e.jsx("span",{className:"font-medium text-gray-600",children:I.data.skipped})]})]}),I.data.newLogs>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("button",{onClick:()=>h(!0),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.jsxs("span",{children:["View New Logs (",I.data.newLogs,")"]})]})})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:A.currentStep}),e.jsx("span",{className:"text-sm text-gray-500",children:A.logsFound>0?`${A.logsProcessed}/${A.logsFound}`:"Processing..."})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:A.logsFound>0?`${Math.min(A.logsProcessed/A.logsFound*100,100)}%`:"0%"}})}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:A.message}),A.details&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:A.details})]})]}),A.logsFound>0&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Logs:"}),e.jsx("span",{className:"font-medium",children:A.logsFound})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Processed:"}),e.jsx("span",{className:"font-medium",children:A.logsProcessed})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"New Logs:"}),e.jsx("span",{className:"font-medium text-green-600",children:A.logsSaved||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Progress:"}),e.jsxs("span",{className:"font-medium",children:[Math.round(A.logsProcessed/A.logsFound*100),"%"]})]})]})})]}),e.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{L(!1),v(!1),window.currentEventSource&&(window.currentEventSource.close(),window.currentEventSource=null)},className:`px-6 py-2 rounded-lg font-medium transition-colors ${I?"bg-gray-600 text-white hover:bg-gray-700":"bg-red-600 text-white hover:bg-red-700"}`,children:I?"Close":"Cancel"})})]})}),C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:G?"Fetch All Complete":"Fetching All Logs"}),e.jsx("button",{onClick:()=>{F(!1),v(!1),window.currentEventSource&&(window.currentEventSource.close(),window.currentEventSource=null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),G?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:`p-4 rounded-lg ${G.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-3 ${G.success?"bg-green-100":"bg-red-100"}`,children:G.success?e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium ${G.success?"text-green-800":"text-red-800"}`,children:G.success?"Fetch All Completed":"Fetch All Failed"}),e.jsx("p",{className:"text-sm text-gray-600",children:G.message})]})]}),G.success&&G.data&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Machines:"}),e.jsx("span",{className:"font-medium",children:G.data.totalMachines})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Online Machines:"}),e.jsx("span",{className:"font-medium text-green-600",children:G.data.onlineMachines})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Logs Found:"}),e.jsx("span",{className:"font-medium",children:G.data.totalLogs})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"New Logs Saved:"}),e.jsx("span",{className:"font-medium text-green-600",children:G.data.totalSaved})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Duplicates:"}),e.jsx("span",{className:"font-medium text-orange-600",children:G.data.totalDuplicates})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Offline Machines:"}),e.jsx("span",{className:"font-medium text-red-600",children:G.data.offlineMachines})]})]}),G.data.results&&G.data.results.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Machine Results:"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:G.data.results.map((ae,Ce)=>e.jsxs("div",{className:`p-2 rounded text-xs ${ae.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:ae.machineAlias}),e.jsx("span",{className:ae.success?"text-green-600":"text-red-600",children:ae.success?"":""})]}),ae.success?e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[ae.totalLogs||0," logs found, ",ae.saved||0," new logs, ",ae.duplicates||0," duplicates"]}):e.jsx("div",{className:"text-xs text-red-600 mt-1",children:ae.error||"Failed to process"})]},Ce))})]})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:U.currentStep}),e.jsx("span",{className:"text-sm text-gray-500",children:U.totalMachines>0?`${U.processedMachines||0}/${U.totalMachines} machines`:"Initializing..."})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-purple-600 h-3 rounded-full transition-all duration-500 ease-out",style:{width:`${Math.min(U.percentage||0,100)}%`}})}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:U.message}),U.details&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:U.details}),U.currentMachine&&U.logsFound>0&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded border",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs text-blue-700 font-medium",children:U.currentMachine}),e.jsxs("span",{className:"text-xs text-blue-600",children:[U.logsProcessed||0,"/",U.logsFound||0]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:U.logsFound>0?`${Math.min(U.logsProcessed/U.logsFound*100,100)}%`:"0%"}})}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs text-gray-600",children:U.currentMachineStep||"Processing logs..."}),U.currentMachineDetails&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:U.currentMachineDetails})]})]}),U.currentMachine&&(!U.logsFound||U.logsFound===0)&&e.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded border",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-blue-700 font-medium",children:["Current: ",U.currentMachine]}),e.jsxs("span",{className:"text-xs text-blue-600",children:[U.currentMachineProgress||0,"%"]})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"text-xs text-blue-600",children:U.currentMachineStep||""}),U.currentMachineDetails&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:U.currentMachineDetails})]})]})]})]}),U.machineResults&&U.machineResults.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Machine Results:"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:U.machineResults.map((ae,Ce)=>e.jsxs("div",{className:`p-2 rounded text-xs ${ae.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:ae.machineAlias}),e.jsx("span",{className:ae.success?"text-green-600":"text-red-600",children:ae.success?"":""})]}),ae.success?e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[ae.totalLogs||0," logs found, ",ae.saved||0," new logs, ",ae.duplicates||0," duplicates"]}):e.jsx("div",{className:"text-xs text-red-600 mt-1",children:ae.error||"Failed to process"})]},Ce))})]})]}),e.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{F(!1),v(!1),window.currentEventSource&&(window.currentEventSource.close(),window.currentEventSource=null)},className:`px-6 py-2 rounded-lg font-medium transition-colors ${G?"bg-gray-600 text-white hover:bg-gray-700":"bg-red-600 text-white hover:bg-red-700"}`,children:G?"Close":"Cancel"})})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-6xl max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"New Logs from Machine"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Date Range: ",b.startDate," to ",b.endDate," | New Logs: ",u.length," (logs not yet in database)"]}),e.jsx("div",{className:"overflow-auto max-h-96",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"User ID"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Badge Number"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Timestamp"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Device"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map((ae,Ce)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:ae.userId||ae.employeeId||ae.deviceUserId}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:ae.badgeNumber||ae.deviceUserId}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:ae.userName||ae.name||"Unknown Employee"}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:new Date(ae.timestamp).toLocaleString()}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:ae.deviceName||ae.machineAlias})]},Ce))})]})}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Register New Machine"}),e.jsx("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:ae=>{ae.preventDefault(),Ke()},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID *"}),e.jsx("input",{type:"text",value:M.id,onChange:ae=>P({...M,id:ae.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter machine ID",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Machine Name *"}),e.jsx("input",{type:"text",value:M.name,onChange:ae=>P({...M,name:ae.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Main Office Biometric",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Connection Type"}),e.jsxs("select",{value:M.connectionType,onChange:ae=>P({...M,connectionType:parseInt(ae.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:1,children:"TCP/IP"}),e.jsx("option",{value:2,children:"Serial"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IP Address *"}),e.jsx("input",{type:"text",value:M.ipAddress,onChange:ae=>P({...M,ipAddress:ae.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"192.168.1.100",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Port"}),e.jsx("input",{type:"number",value:M.serialPort,onChange:ae=>P({...M,serialPort:parseInt(ae.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),e.jsx("input",{type:"number",value:M.port,onChange:ae=>P({...M,port:parseInt(ae.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"4370"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Baudrate"}),e.jsx("input",{type:"number",value:M.baudrate,onChange:ae=>P({...M,baudrate:parseInt(ae.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"115200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comm Password"}),e.jsx("input",{type:"number",value:M.commPassword,onChange:ae=>P({...M,commPassword:parseInt(ae.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Machine (3 digits) *"}),e.jsx("input",{type:"number",value:M.machine,onChange:ae=>{const Ce=ae.target.value;(Ce===""||Ce.length<=3&&/^\d+$/.test(Ce))&&P({...M,machine:Ce})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"001",maxLength:3,required:!0}),M.machine&&M.machine.length!==3&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Machine number must be exactly 3 digits"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Test Connection"}),e.jsx("button",{type:"button",onClick:je,disabled:$||!M.ipAddress,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-3 py-1 rounded text-sm flex items-center space-x-1",children:$?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-3 w-3",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Testing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Test"})]})})]}),w&&e.jsx("div",{className:`p-3 rounded-md text-sm ${w.success?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[w.success?e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),e.jsx("span",{children:w.message}),w.pingTime&&e.jsxs("span",{className:"text-xs",children:["(",w.pingTime,"ms)"]})]})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>_(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-md",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:H||!w||!w.success||M.machine&&M.machine.length!==3,className:`px-4 py-2 ${H||!w||!w.success||M.machine&&M.machine.length!==3?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"} text-white rounded-md flex items-center space-x-2`,children:H?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Registering..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("span",{children:"Register Machine"})]})})]})]})]})}),J&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Edit Machine"}),e.jsx("button",{onClick:()=>X(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:ae=>{ae.preventDefault(),rt()},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID *"}),e.jsx("input",{type:"text",value:ce.id,onChange:ae=>Ae({...ce,id:ae.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter machine ID",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Machine Name *"}),e.jsx("input",{type:"text",value:ce.name,onChange:ae=>Ae({...ce,name:ae.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Main Office Biometric",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Connection Type"}),e.jsxs("select",{value:ce.connectionType,onChange:ae=>Ae({...ce,connectionType:parseInt(ae.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:1,children:"TCP/IP"}),e.jsx("option",{value:2,children:"Serial"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IP Address *"}),e.jsx("input",{type:"text",value:ce.ipAddress,onChange:ae=>Ae({...ce,ipAddress:ae.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"192.168.1.100",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Port"}),e.jsx("input",{type:"number",value:ce.serialPort,onChange:ae=>Ae({...ce,serialPort:parseInt(ae.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),e.jsx("input",{type:"number",value:ce.port,onChange:ae=>Ae({...ce,port:parseInt(ae.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"4370"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Baudrate"}),e.jsx("input",{type:"number",value:ce.baudrate,onChange:ae=>Ae({...ce,baudrate:parseInt(ae.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"115200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comm Password"}),e.jsx("input",{type:"number",value:ce.commPassword,onChange:ae=>Ae({...ce,commPassword:parseInt(ae.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Machine (3 digits) *"}),e.jsx("input",{type:"number",value:ce.machine,onChange:ae=>{const Ce=ae.target.value;(Ce===""||Ce.length<=3&&/^\d+$/.test(Ce))&&Ae({...ce,machine:Ce})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"001",maxLength:3,required:!0}),ce.machine&&ce.machine.length!==3&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Machine number must be exactly 3 digits"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Test Connection"}),e.jsx("button",{type:"button",onClick:gt,disabled:Be||!ce.ipAddress,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-3 py-1 rounded text-sm flex items-center space-x-1",children:Be?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-3 w-3",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Testing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Test"})]})})]}),ye&&e.jsx("div",{className:`p-3 rounded-md text-sm ${ye.success?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[ye.success?e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),e.jsx("span",{children:ye.message}),ye.pingTime&&e.jsxs("span",{className:"text-xs",children:["(",ye.pingTime,"ms)"]})]})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>X(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-md",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:we||!ye||!ye.success||ce.machine&&ce.machine.length!==3,className:`px-4 py-2 ${we||!ye||!ye.success||ce.machine&&ce.machine.length!==3?"bg-gray-400 cursor-not-allowed":"bg-yellow-600 hover:bg-yellow-700"} text-white rounded-md flex items-center space-x-2`,children:we?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Updating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{children:"Update Machine"})]})})]})]})]})})]})},WA=()=>{const[t,s]=y.useState([]),[r,n]=y.useState([]),[a,l]=y.useState([]),[o,i]=y.useState(""),[c,h]=y.useState(!1),[p,m]=y.useState(!1),[u,x]=y.useState(""),[j,v]=y.useState("all"),[N,f]=y.useState([]),[d,g]=y.useState({currentStep:"",percentage:0,message:"",details:"",employeesProcessed:0,totalEmployees:0,errors:[]}),[b,E]=y.useState(null),[R,S]=y.useState(!1),[k,L]=y.useState("all"),[A,D]=y.useState([]),[I,O]=y.useState(!1),[C,F]=y.useState(""),[U,Y]=y.useState(!1),[G,V]=y.useState([]),[W,_]=y.useState(!1),[M,P]=y.useState([]),[$,B]=y.useState(!1),[w,T]=y.useState([]),[H,K]=y.useState(!1),[J,X]=y.useState(!1),[pe,oe]=y.useState({userInfo:!0,fingerprints:!0,face:!0}),[ce,Ae]=y.useState("all"),[Be,Ie]=y.useState(null);y.useEffect(()=>{ye(),we(),ve()},[]),y.useEffect(()=>{Y(!!(k==="not-uploaded"&&C))},[k,C]),y.useEffect(()=>{k==="not-uploaded"?V([]):l([])},[k]);const ye=async()=>{try{h(!0);const je=await le.get("/employees");if(je.data&&Array.isArray(je.data.data)){if(s(je.data.data),je.data.data.length>0){console.log("=== FRONTEND BIOMETRIC DEBUG ===");const Ke=je.data.data[0];console.log("Sample employee from API:",{NAME:Ke.NAME,FINGER_COUNT:Ke.FINGER_COUNT,FACE_COUNT:Ke.FACE_COUNT,hasFingerCount:"FINGER_COUNT"in Ke,hasFaceCount:"FACE_COUNT"in Ke}),console.log("All available fields:",Object.keys(Ke))}}else if(Array.isArray(je.data)){if(s(je.data),je.data.length>0){console.log("=== FRONTEND BIOMETRIC DEBUG ===");const Ke=je.data[0];console.log("Sample employee from API:",{NAME:Ke.NAME,FINGER_COUNT:Ke.FINGER_COUNT,FACE_COUNT:Ke.FACE_COUNT,hasFingerCount:"FINGER_COUNT"in Ke,hasFaceCount:"FACE_COUNT"in Ke}),console.log("All available fields:",Object.keys(Ke))}}else console.warn("Employees response is not an array:",je.data),s([])}catch(je){console.error("Error fetching employees:",je),s([])}finally{h(!1)}},se=async()=>{var je,Ke,rt,gt;if(C)try{O(!0),console.log(`Fetching not uploaded employees for machine: ${C}`);const mt=await le.get(`/machines/${C}/not-uploaded-employees`,{timeout:6e4});console.log("Response received:",mt.data),mt.data.success&&mt.data.data?(D(mt.data.data),console.log(`Successfully fetched ${mt.data.data.length} not uploaded employees`),console.log("Sample not uploaded employees:",mt.data.data.slice(0,3))):(console.error("Invalid response format:",mt.data),D([]))}catch(mt){console.error("Error fetching not uploaded employees:",mt),mt.code==="ECONNABORTED"||mt.message.includes("timeout")?(console.error("Machine connection timeout - the biometric device may be offline or unreachable"),alert("Connection timeout: The biometric device may be offline or unreachable. Please check the device connection and try again."),D([])):((je=mt.response)==null?void 0:je.status)===404?(console.error("Machine not found"),alert("Machine not found. Please select a valid machine."),D([])):((Ke=mt.response)==null?void 0:Ke.status)===500?(console.error("Server error:",(rt=mt.response.data)==null?void 0:rt.message),alert(`Server error: ${((gt=mt.response.data)==null?void 0:gt.message)||"Failed to connect to the biometric device"}`),D([])):(console.error("Unknown error:",mt.message),alert(`Error: ${mt.message}`),D([]))}finally{O(!1)}},we=async()=>{try{const je=await le.get("/machines");je.data&&Array.isArray(je.data.data)?n(je.data.data):Array.isArray(je.data)?n(je.data):(console.warn("Machines response is not an array:",je.data),n([]))}catch(je){console.error("Error fetching machines:",je),n([])}},ve=async()=>{try{const je=await le.get("/departments");je.data&&Array.isArray(je.data.data)?f(je.data.data):Array.isArray(je.data)?f(je.data):(console.warn("Departments response is not an array:",je.data),f([]))}catch(je){console.error("Error fetching departments:",je),f([])}},Q=(je,Ke)=>{V(Ke?rt=>[...rt,je]:rt=>rt.filter(gt=>gt!==je))},ne=()=>{G.length===ee.length?V([]):V(ee.map(je=>je.USERID))},he=je=>{ze("individual",je)},Me=()=>{ze("not-uploaded")},be=(je,Ke)=>{l(Ke?rt=>[...rt,je]:rt=>rt.filter(gt=>gt!==je))},De=()=>{a.length===ee.length?l([]):l(ee.map(je=>je.USERID))},ze=(je="all",Ke=null)=>{if(je==="all"){if(a.length===0){alert("Please select employees to upload");return}if(!o){alert("Please select a machine");return}}else if(je==="not-uploaded"){if(G.length===0){alert("Please select employees to upload");return}if(!C){alert("Please select a machine first");return}}else if(je==="individual"){if(!Ke){alert("No employee selected");return}if(!C){alert("Please select a machine first");return}}Ae(je),Ie(Ke),X(!0)},Ee=async()=>{var rt,gt,mt,it,ae,Ce;X(!1);let je=[],Ke=null;ce==="all"?(je=a,Ke=o):ce==="not-uploaded"?(je=G,Ke=C):ce==="individual"&&(je=[Be.USERID],Ke=C);try{ce==="all"?(m(!0),S(!0)):_(!0),ce==="all"&&g({currentStep:"Starting upload...",percentage:0,message:"Preparing to upload employees",details:"",employeesProcessed:0,totalEmployees:je.length,errors:[]});const Se=[pe.userInfo?"User Info":null,pe.fingerprints?"Fingerprints":null,pe.face?"Face Templates":null].filter(Boolean).join(", ");ce==="all"&&g(ke=>({...ke,details:`Uploading: ${Se}`}));const qe=pe.fingerprints||pe.face?`/machines/${Ke}/upload-employees-biometrics`:`/machines/${Ke}/upload-employees`,Ze=await le.post(qe,{employeeIds:je,includeBiometrics:pe.fingerprints||pe.face,includeFingerprints:pe.fingerprints,includeFace:pe.face});if(Ze.data.success)if(ce==="all"){const ke=Ze.data.details,te=ke?`Successfully uploaded ${ke.successCount||je.length} employees
Fingerprints: ${pe.fingerprints?"Yes":"No"}
Face Templates: ${pe.face?"Yes":"No"}`:`Successfully uploaded ${je.length} employees`;E({success:!0,message:te,details:ke||""}),g(Ne=>({...Ne,percentage:100,currentStep:"Upload completed",message:"All employees uploaded successfully"}))}else{const ke=je.length,te=ce==="individual"?Be.NAME:`${ke} employee${ke>1?"s":""}`;alert(`${te} uploaded successfully with:
${Se}`),ce!=="individual"&&V([]),await se()}else ce==="all"?E({success:!1,message:"Upload failed",details:Ze.data.message||"Unknown error occurred"}):alert(`Failed to upload: ${Ze.data.message}`)}catch(Se){console.error("Error uploading employees:",Se),ce==="all"?E({success:!1,message:"Upload failed",details:((gt=(rt=Se.response)==null?void 0:rt.data)==null?void 0:gt.error)||((it=(mt=Se.response)==null?void 0:mt.data)==null?void 0:it.message)||Se.message}):alert(`Error uploading: ${((Ce=(ae=Se.response)==null?void 0:ae.data)==null?void 0:Ce.message)||Se.message}`)}finally{ce==="all"?m(!1):_(!1)}},ee=(()=>{let je=k==="not-uploaded"?A||[]:t||[];return Array.isArray(je)?je.filter(Ke=>{var mt,it,ae,Ce,Se;const rt=((mt=Ke.NAME)==null?void 0:mt.toLowerCase().includes(u.toLowerCase()))||((it=Ke.SSN)==null?void 0:it.toString().includes(u))||((ae=Ke.USERID)==null?void 0:ae.toString().includes(u))||((Ce=Ke.BADGENUMBER)==null?void 0:Ce.toString().includes(u)),gt=j==="all"||((Se=Ke.DEFAULTDEPTID)==null?void 0:Se.toString())===j;return rt&&gt}):(console.warn("baseEmployees is not an array:",je),[])})(),_e=async()=>{if(!o){alert("Please select a machine first");return}try{B(!0);const je=await le.get(`/machines/${o}/biometric-templates`);je.data.success?(P(je.data.data),console.log("Biometric templates:",je.data.data)):(console.error("Failed to fetch biometric templates:",je.data.message),P([]))}catch(je){console.error("Error fetching biometric templates:",je),P([])}finally{B(!1)}},Qe=async()=>{if(!o){alert("Please select a machine first");return}try{K(!0);const je=await le.get(`/machines/${o}/users-with-biometrics`);je.data.success?(T(je.data.data),console.log("Users with biometrics:",je.data.data)):(console.error("Failed to fetch users with biometrics:",je.data.message),T([]))}catch(je){console.error("Error fetching users with biometrics:",je),T([])}finally{K(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Employee Upload Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Upload employees to biometric machines"})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>L("all"),className:`py-2 px-1 border-b-2 font-medium text-sm ${k==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"All Employees"}),e.jsx("button",{onClick:()=>L("not-uploaded"),className:`py-2 px-1 border-b-2 font-medium text-sm ${k==="not-uploaded"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Not Uploaded Employees"})]})})}),k==="not-uploaded"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Machine to Scan"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:C,onChange:je=>F(je.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a machine..."}),r.map(je=>e.jsxs("option",{value:je.ID,children:[je.MachineAlias," (",je.IP,":",je.Port,")"]},je.ID))]}),U&&e.jsx("button",{onClick:se,disabled:I,className:`px-4 py-2 rounded-md font-medium ${I?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:I?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Scanning..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-5 w-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Scan Employees"]})})]})]}),k==="all"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Target Machine"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(je=>e.jsx("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${o===je.ID.toString()?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>i(je.ID.toString()),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:je.MachineAlias}),e.jsxs("p",{className:"text-sm text-gray-600",children:[je.IP,":",je.Port]})]}),e.jsx("div",{className:`w-3 h-3 rounded-full ${o===je.ID.toString()?"bg-blue-500":"bg-gray-300"}`})]})},je.ID))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Employee"}),e.jsx("input",{type:"text",value:u,onChange:je=>x(je.target.value),placeholder:"Search by name, SSN, ID, or badge number...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),e.jsxs("select",{value:j,onChange:je=>v(je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Departments"}),Array.isArray(N)&&N.map(je=>e.jsx("option",{value:je.DEPTID,children:je.DEPTNAME},je.DEPTID))]})]})]})]}),k==="not-uploaded"&&G.length>0&&e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsx("button",{onClick:Me,disabled:W||G.length===0,className:`px-6 py-3 rounded-md font-medium ${W||G.length===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:W?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-5 w-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload Selected ",G.length>1?"Employees":"Employee"]})})}),k==="all"&&o&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Biometric Templates"}),e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("button",{onClick:_e,disabled:$,className:`px-4 py-2 rounded-md font-medium ${$?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:$?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-5 w-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Get Biometric Templates"]})}),e.jsx("button",{onClick:Qe,disabled:H,className:`px-4 py-2 rounded-md font-medium ${H?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:H?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-5 w-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Get Users with Biometrics"]})})]}),M.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:["Biometric Templates (",M.length," found)"]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 max-h-64 overflow-y-auto",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.slice(0,20).map((je,Ke)=>e.jsx("div",{className:"bg-white p-3 rounded border",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900",children:je.name||je.userId||"Unknown User"}),e.jsxs("div",{className:"text-gray-600",children:["PIN: ",je.pin||je.userId||"N/A"]}),e.jsxs("div",{className:"text-gray-600",children:["Type: ",je.templateType||"Unknown"]}),e.jsxs("div",{className:"text-gray-600",children:["Size: ",je.templateSize||0," bytes"]}),je.fingerId!==void 0&&e.jsxs("div",{className:"text-gray-600",children:["Finger ID: ",je.fingerId]}),je.faceId!==void 0&&e.jsxs("div",{className:"text-gray-600",children:["Face ID: ",je.faceId]}),e.jsxs("div",{className:"text-gray-600",children:["Valid: ",je.valid?"Yes":"No"]}),e.jsxs("div",{className:"text-gray-600",children:["Method: ",je.method||"Unknown"]})]})},Ke))}),M.length>20&&e.jsxs("div",{className:"text-center text-gray-500 text-sm mt-2",children:["Showing first 20 of ",M.length," templates"]})]})]}),w.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:["Users with Biometric Data (",w.length," found)"]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 max-h-64 overflow-y-auto",children:[e.jsx("div",{className:"space-y-3",children:w.slice(0,10).map((je,Ke)=>{var rt,gt;return e.jsx("div",{className:"bg-white p-3 rounded border",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:je.Name||je.name||"Unknown User"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["PIN: ",je.PIN||je.pin||"N/A"," | Badge: ",je.BADGENUMBER||je.badgeNumber||"N/A"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Templates: ",je.templateCount||0," | Fingerprints: ",((rt=je.fingerprintTemplates)==null?void 0:rt.length)||0," | Face: ",((gt=je.faceTemplates)==null?void 0:gt.length)||0]})]}),e.jsxs("div",{className:"flex space-x-2",children:[je.hasFingerprints&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Fingerprint"}),je.hasFace&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Face"})]})]})},Ke)})}),w.length>10&&e.jsxs("div",{className:"text-center text-gray-500 text-sm mt-2",children:["Showing first 10 of ",w.length," users"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:k==="not-uploaded"?`Employees Not Uploaded to Selected Machine (${ee.length})`:`Available Employees (${ee.length})`}),k==="all"&&e.jsx("button",{onClick:De,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:a.length===ee.length?"Deselect All":"Select All"}),k==="not-uploaded"&&e.jsx("button",{onClick:ne,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:G.length===ee.length?"Deselect All":"Select All"})]})}),c||I?e.jsxs("div",{className:"p-8 text-center",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600 mx-auto mb-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("p",{className:"text-gray-600",children:k==="not-uploaded"?"Scanning employees from machine...":"Loading employees..."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:k==="all"?a.length===ee.length&&ee.length>0:G.length===ee.length&&ee.length>0,onChange:k==="all"?De:ne,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Badge Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),k==="all"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Finger Count"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Face Count"})]}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Upload Status"}),k==="not-uploaded"&&e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ee.map(je=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:k==="all"?a.includes(je.USERID):G.includes(je.USERID),onChange:Ke=>k==="all"?be(je.USERID,Ke.target.checked):Q(je.USERID,Ke.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:je.BADGENUMBER||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:je.NAME}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:je.DEPTNAME||"N/A"}),k==="all"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${je.FINGER_COUNT>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),je.FINGER_COUNT||0]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${je.FACE_COUNT>0?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"}`,children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),je.FACE_COUNT||0]})})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${je.privilege>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:je.privilege>=0?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-amber-100 text-amber-800",children:"Not Uploaded"})}),k==="not-uploaded"&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{onClick:()=>he(je),disabled:W,className:"text-blue-600 hover:text-blue-900 disabled:text-gray-400 disabled:cursor-not-allowed",title:"Upload this employee to the machine",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})})})]},je.USERID))})]})}),J&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-[500px] shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Data to Upload"}),e.jsx("button",{onClick:()=>X(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Choose what data to upload to the biometric device for ",ce==="individual"?`employee ${(Be==null?void 0:Be.NAME)||""}`:`the selected ${ce==="all"?a.length:G.length} employee${(ce==="all"?a.length:G.length)>1?"s":""}`,":"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-3 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsx("input",{type:"checkbox",id:"upload-userinfo",checked:pe.userInfo,onChange:je=>oe(Ke=>({...Ke,userInfo:je.target.checked})),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"upload-userinfo",className:"font-medium text-gray-900 cursor-pointer",children:"Basic User Information"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Employee name, badge number, password/PIN, and privilege level"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",id:"upload-fingerprints",checked:pe.fingerprints,onChange:je=>oe(Ke=>({...Ke,fingerprints:je.target.checked})),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{htmlFor:"upload-fingerprints",className:"font-medium text-gray-900 cursor-pointer flex items-center",children:["Fingerprint Templates",e.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"Biometric"]})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Upload all enrolled fingerprint templates from database"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",id:"upload-face",checked:pe.face,onChange:je=>oe(Ke=>({...Ke,face:je.target.checked})),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{htmlFor:"upload-face",className:"font-medium text-gray-900 cursor-pointer flex items-center",children:["Face Templates",e.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"Biometric"]})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Upload face recognition templates from database"})]})]})]}),!pe.userInfo&&!pe.fingerprints&&!pe.face&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx("svg",{className:"h-5 w-5 text-yellow-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-sm text-yellow-800",children:"Please select at least one option to upload"})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>X(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:Ee,disabled:!pe.userInfo&&!pe.fingerprints&&!pe.face,className:`px-6 py-2 text-sm font-medium rounded-md ${!pe.userInfo&&!pe.fingerprints&&!pe.face?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[e.jsx("svg",{className:"h-5 w-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Start Upload"]})]})]})})}),ee.length===0&&!c&&!I&&e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:k==="not-uploaded"?'No employees found. Click "Scan Employees" to check the selected machine.':"No employees found matching the current filters."})})]}),k==="all"&&e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:ze,disabled:a.length===0||!o||p,className:`px-6 py-3 rounded-md font-medium ${a.length===0||!o||p?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:p?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-5 w-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload Selected (",a.length,")"]})})}),R&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Upload Progress"}),e.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:d.currentStep}),e.jsxs("span",{children:[d.percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${d.percentage}%`}})})]}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:d.message}),d.details&&e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:d.details}),d.employeesProcessed>0&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Processed: ",d.employeesProcessed," / ",d.totalEmployees]}),b&&e.jsxs("div",{className:`mt-4 p-3 rounded-md ${b.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsx("div",{className:"font-medium",children:b.success?"Upload Successful!":"Upload Failed"}),e.jsx("div",{className:"text-sm mt-1",children:b.details})]})]})})})]})},VA=()=>{const[t,s]=y.useState([]),[r,n]=y.useState(""),[a,l]=y.useState([]),[o,i]=y.useState(!1),[c,h]=y.useState({}),[p,m]=y.useState(""),[u,x]=y.useState([]),[j,v]=y.useState(!1);y.useEffect(()=>{N()},[]),y.useEffect(()=>{r&&f()},[r]),y.useEffect(()=>{x([])},[r]);const N=async()=>{try{const S=await le.get("/machines");S.data.success&&s(S.data.data)}catch(S){console.error("Error fetching machines:",S)}},f=async()=>{if(r){i(!0);try{const S=await le.get(`/machines/${r}/users`);S.data.success&&(l(S.data.data),console.log(`Found ${S.data.data.length} users not in database`),console.log(`Total machine users: ${S.data.totalMachineUsers}`),console.log(`Total database users: ${S.data.totalDatabaseUsers}`))}catch(S){console.error("Error fetching employees from machine:",S)}finally{i(!1)}}},d=(S,k)=>{x(k?L=>[...L,S]:L=>L.filter(A=>A!==S))},g=()=>{u.length===R.length?x([]):x(R.map(S=>S.userId||S.PIN))},b=async S=>{var k,L;if(r){h(A=>({...A,[S.PIN||S.userId]:!0}));try{const A=await le.post(`/machines/${r}/download-employee`,{userId:S.PIN||S.userId,employeeData:S});A.data.success?(alert(`Employee ${S.Name||S.name} downloaded successfully!`),f()):alert(`Error downloading employee: ${A.data.message}`)}catch(A){console.error("Error downloading employee:",A),alert(`Error downloading employee: ${((L=(k=A.response)==null?void 0:k.data)==null?void 0:L.message)||A.message}`)}finally{h(A=>({...A,[S.PIN||S.userId]:!1}))}}},E=async()=>{var S,k;if(u.length===0){alert("Please select employees to download");return}v(!0);try{const L=u.map(A=>{const D=a.find(I=>(I.PIN||I.userId)===A);return D?le.post(`/machines/${r}/download-employee`,{userId:D.PIN||D.userId,employeeData:D}):Promise.resolve()});await Promise.all(L),alert(`Successfully downloaded ${u.length} employees!`),x([]),f()}catch(L){console.error("Error downloading selected employees:",L),alert(`Error downloading employees: ${((k=(S=L.response)==null?void 0:S.data)==null?void 0:k.message)||L.message}`)}finally{v(!1)}},R=a.filter(S=>{var k,L;return((k=S.Name||S.name)==null?void 0:k.toLowerCase().includes(p.toLowerCase()))||((L=S.PIN||S.userId)==null?void 0:L.toString().includes(p))});return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Download Employee"}),e.jsx("p",{className:"text-gray-600",children:"Download employee data from selected ZKTeco machine to database (only shows users not already in database)"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Machine"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("select",{value:r,onChange:S=>n(S.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select a machine..."}),t.map(S=>e.jsxs("option",{value:S.ID,children:[S.MachineAlias," (",S.IP,")"]},S.ID))]}),r&&e.jsx("button",{onClick:f,disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:o?"Loading...":"Refresh"})]})]}),r&&u.length>0&&e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsx("button",{onClick:E,disabled:j||u.length===0,className:`px-6 py-3 rounded-md font-medium ${j||u.length===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:j?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Downloading Selected..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-5 w-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Selected ",u.length>1?"Employees":"Employee"]})})}),r&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Employees from Machine NOT in Database (",a.length,")"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:g,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:u.length===R.length?"Deselect All":"Select All"}),e.jsx("input",{type:"text",placeholder:"Search by badge number or name...",value:p,onChange:S=>m(S.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:u.length===R.length&&R.length>0,onChange:g,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Badge Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(S=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("input",{type:"checkbox",checked:u.includes(S.userId||S.PIN),onChange:k=>d(S.userId||S.PIN,k.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S.PIN||S.userId}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S.Name||S.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${S.Enabled!==!1?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:S.Enabled!==!1?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("button",{onClick:()=>b(S),disabled:c[S.PIN||S.userId],className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:c[S.PIN||S.userId]?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Downloading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download"]})})})]},S.userId||S.PIN))})]})}),R.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:p?"No employees found matching your search.":"No employees found on this machine that are not in the database."})]})]})},YA=()=>{const{user:t}=Qt(),[s,r]=y.useState({}),[n,a]=y.useState(!1),[l,o]=y.useState(!1),[i,c]=y.useState(!1),[h,p]=y.useState(""),[m,u]=y.useState(""),[x,j]=y.useState(""),[v,N]=y.useState(null);y.useEffect(()=>{d(),f()},[]);const f=async()=>{try{const L=await le.get("/env/deployment-info");N(L.data)}catch{console.log("Deployment info not available, using fallback methods"),N({environment:"development",processManager:"none",hasPM2:!1,hasNodemon:!1,hasDocker:!1})}},d=async()=>{a(!0);try{const L=await le.get("/env");r(L.data.data||{}),j(L.data.filePath||"")}catch(L){console.error("Error fetching environment variables:",L),u("Failed to fetch environment variables")}finally{a(!1)}},g=(L,A)=>{r(D=>({...D,[L]:{...D[L],value:A}}))},b=async()=>{o(!0),u(""),p("");try{await le.put("/env",{variables:s}),p("Environment variables updated successfully!"),setTimeout(()=>{E()},1e3)}catch(L){console.error("Error updating environment variables:",L),u("Failed to update environment variables")}finally{o(!1)}},E=async()=>{c(!0),p("Restarting services to apply changes...");try{p("Step 1/3: Restarting backend server..."),await le.post("/env/restart"),p("Step 2/3: Waiting for backend to restart..."),await new Promise(L=>setTimeout(L,5e3)),p("Step 3/3: Refreshing frontend..."),await new Promise(L=>setTimeout(L,2e3)),window.location.reload()}catch(L){console.error("Error during restart process:",L),u("Error during restart process. Please manually refresh the page."),p("Backend restart initiated. Please refresh the page manually in a few seconds."),setTimeout(()=>{window.location.reload()},3e3)}finally{c(!1)}},R=async()=>{window.confirm("This will restart the backend server and refresh the frontend. Continue?")&&await E()},S=()=>{const L=prompt("Enter variable name:");L&&!s[L]&&r(A=>({...A,[L]:{value:"",lineNumber:Object.keys(A).length+1,originalLine:`${L}=`}}))},k=L=>{window.confirm(`Are you sure you want to remove ${L}?`)&&r(A=>{const D={...A};return delete D[L],D})};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-600",children:"Loading environment variables..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Environment Variables Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage system configuration variables"}),x&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["File: ",x]}),v&&e.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded text-sm",children:[e.jsx("strong",{children:"Environment:"})," ",v.environment," |",e.jsx("strong",{children:" Process Manager:"})," ",v.processManager," |",e.jsx("strong",{children:" PM2:"})," ",v.hasPM2?"Yes":"No"," |",e.jsx("strong",{children:" Nodemon:"})," ",v.hasNodemon?"Yes":"No"]})]}),h&&e.jsx("div",{className:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded",children:h}),m&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:m}),e.jsxs("div",{className:"mb-6 flex gap-4",children:[e.jsx("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:l||i,children:"Add New Variable"}),e.jsx("button",{onClick:b,disabled:l||i,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:l?"Saving...":i?"Restarting...":"Save & Restart Services"}),e.jsx("button",{onClick:R,disabled:l||i,className:"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50",children:"Manual Restart"}),e.jsx("button",{onClick:d,className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",disabled:l||i,children:"Refresh"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Variable Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.keys(s).length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"px-6 py-4 text-center text-gray-500",children:"No environment variables found"})}):Object.entries(s).map(([L,A])=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:L}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Line ",A.lineNumber]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:L.toLowerCase().includes("password")?"password":"text",value:A.value,onChange:D=>g(L,D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter value...",disabled:l||i})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>k(L),className:"text-red-600 hover:text-red-900 text-sm",disabled:l||i,children:"Remove"})})]},L))})]})}),e.jsxs("div",{className:"mt-6 p-4 bg-yellow-100 border border-yellow-400 text-yellow-700 rounded",children:[e.jsx("h3",{className:"font-semibold mb-2",children:" Important Notes:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Changes to environment variables will automatically restart both backend and frontend services"}),e.jsx("li",{children:"Be careful when modifying database connection settings"}),e.jsx("li",{children:"Always backup your .env file before making changes"}),e.jsx("li",{children:"Some variables may be sensitive (passwords, API keys)"}),e.jsx("li",{children:"The page will automatically refresh after services restart"})]})]}),i&&e.jsxs("div",{className:"mt-6 p-4 bg-blue-100 border border-blue-400 text-blue-700 rounded",children:[e.jsx("h3",{className:"font-semibold mb-2",children:" Restarting Services..."}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-700 mr-2"}),e.jsx("span",{className:"text-sm",children:"Please wait while services restart..."})]})]})]})},qA=()=>{const[t,s]=y.useState({host:"",port:"3306",database:"",username:"",password:"",enabled:!1}),[r,n]=y.useState(!1),[a,l]=y.useState(!1),[o,i]=y.useState({type:"",text:""}),[c,h]=y.useState(null),[p,m]=y.useState(!1);y.useEffect(()=>{(async()=>{try{const v=await le.get("/env/db-201files");v.data.success&&(s(v.data.data),h(v.data.data.connectionStatus))}catch(v){console.error("Error fetching 201 Files DB config:",v)}})()},[]);const u=async()=>{var j,v;l(!0),i({type:"",text:""});try{const N=await le.post("/env/db-201files/test",t);N.data.success?(i({type:"success",text:" Connection successful!"}),h("connected")):(i({type:"error",text:` ${N.data.message}`}),h("failed"))}catch(N){i({type:"error",text:` ${((v=(j=N.response)==null?void 0:j.data)==null?void 0:v.message)||"Connection failed"}`}),h("failed")}finally{l(!1)}},x=async j=>{var v,N;j.preventDefault(),n(!0),i({type:"",text:""});try{const f=await le.post("/env/db-201files/save",t);f.data.success?(i({type:"success",text:" Configuration saved successfully!"}),setTimeout(()=>i({type:"",text:""}),3e3)):i({type:"error",text:` ${f.data.message}`})}catch(f){i({type:"error",text:` ${((N=(v=f.response)==null?void 0:v.data)==null?void 0:N.message)||"Failed to save configuration"}`})}finally{n(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg shadow-lg p-8 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:" 201 Files Database Connection"}),e.jsx("p",{className:"text-green-100",children:"Configure MySQL database for 201 Files module"})]}),c&&e.jsx("div",{className:`p-4 rounded-lg border-l-4 ${c==="connected"?"bg-green-50 border-green-500":c==="failed"?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[c==="connected"&&e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-green-700 font-medium",children:"Database Connected"})]}),c==="failed"&&e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-red-700 font-medium",children:"Connection Failed"})]})]})}),e.jsxs("form",{onSubmit:x,className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Database Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-900",children:"Enable 201 Files Module"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Activate separate database for 201 Files"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.enabled,onChange:j=>s({...t,enabled:j.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Database Host"}),e.jsx("input",{type:"text",value:t.host,onChange:j=>s({...t,host:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"localhost or IP address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Port"}),e.jsx("input",{type:"number",value:t.port,onChange:j=>s({...t,port:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"3306",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Database Name"}),e.jsx("input",{type:"text",value:t.database,onChange:j=>s({...t,database:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"201files_db",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),e.jsx("input",{type:"text",value:t.username,onChange:j=>s({...t,username:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"database username",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:p?"text":"password",value:t.password,onChange:j=>s({...t,password:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 pr-10",placeholder:"database password",required:!0}),e.jsx("button",{type:"button",onClick:()=>m(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:p?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]})]}),o.text&&e.jsx("div",{className:`mt-4 p-4 rounded-lg ${o.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:o.text}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:u,disabled:a||!t.host||!t.database,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Testing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Test Connection"})]})}),e.jsx("button",{type:"submit",disabled:r,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),e.jsx("span",{children:"Save Configuration"})]})})]})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:"About 201 Files Database"}),e.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"The 201 Files module uses a separate MySQL database to store employee personnel records, documents, and related data."}),e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Purpose:"})," Isolates sensitive employee documents and personnel information for better security and data management."]})]})]})}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-6 h-6 text-yellow-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-yellow-800 mb-2",children:"Security Notice"}),e.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Only super administrators can modify this configuration"}),e.jsx("li",{children:"Use strong credentials for database access"}),e.jsx("li",{children:"Ensure the database server is properly secured"}),e.jsx("li",{children:"Test connection before saving to avoid downtime"}),e.jsx("li",{children:"Configuration is stored in environment variables (.env)"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Expected Database Schema"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"The 201 Files database should contain tables for:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-green-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Documents"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Employee document storage"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-green-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Personal Data Sheets"}),e.jsx("p",{className:"text-xs text-gray-600",children:"PDS information"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-green-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Education Records"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Educational background"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-green-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Work Experience"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Employment history"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-green-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Certifications"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Professional licenses"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-green-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Performance Records"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Evaluations and ratings"})]})]})]})]})},KA=()=>{const[t,s]=y.useState({host:"",port:"3306",database:"",username:"",password:"",enabled:!1}),[r,n]=y.useState(!1),[a,l]=y.useState(!1),[o,i]=y.useState({type:"",text:""}),[c,h]=y.useState(null),[p,m]=y.useState(!1);y.useEffect(()=>{(async()=>{try{const v=await le.get("/env/db-payroll");v.data.success&&(s(v.data.data),h(v.data.data.connectionStatus))}catch(v){console.error("Error fetching Payroll DB config:",v)}})()},[]);const u=async()=>{var j,v;l(!0),i({type:"",text:""});try{const N=await le.post("/env/db-payroll/test",t);N.data.success?(i({type:"success",text:" Connection successful!"}),h("connected")):(i({type:"error",text:` ${N.data.message}`}),h("failed"))}catch(N){i({type:"error",text:` ${((v=(j=N.response)==null?void 0:j.data)==null?void 0:v.message)||"Connection failed"}`}),h("failed")}finally{l(!1)}},x=async j=>{var v,N;j.preventDefault(),n(!0),i({type:"",text:""});try{const f=await le.post("/env/db-payroll/save",t);f.data.success?(i({type:"success",text:" Configuration saved successfully!"}),setTimeout(()=>i({type:"",text:""}),3e3)):i({type:"error",text:` ${f.data.message}`})}catch(f){i({type:"error",text:` ${((N=(v=f.response)==null?void 0:v.data)==null?void 0:N.message)||"Failed to save configuration"}`})}finally{n(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg shadow-lg p-8 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:" Payroll Database Connection"}),e.jsx("p",{className:"text-purple-100",children:"Configure MySQL database for Payroll module"})]}),c&&e.jsx("div",{className:`p-4 rounded-lg border-l-4 ${c==="connected"?"bg-green-50 border-green-500":c==="failed"?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[c==="connected"&&e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-green-700 font-medium",children:"Database Connected"})]}),c==="failed"&&e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-red-700 font-medium",children:"Connection Failed"})]})]})}),e.jsxs("form",{onSubmit:x,className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Database Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-900",children:"Enable Payroll Module"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Activate separate database for Payroll"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.enabled,onChange:j=>s({...t,enabled:j.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Database Host"}),e.jsx("input",{type:"text",value:t.host,onChange:j=>s({...t,host:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"localhost or IP address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Port"}),e.jsx("input",{type:"number",value:t.port,onChange:j=>s({...t,port:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"3306",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Database Name"}),e.jsx("input",{type:"text",value:t.database,onChange:j=>s({...t,database:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"payroll_db",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),e.jsx("input",{type:"text",value:t.username,onChange:j=>s({...t,username:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"database username",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:p?"text":"password",value:t.password,onChange:j=>s({...t,password:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 pr-10",placeholder:"database password",required:!0}),e.jsx("button",{type:"button",onClick:()=>m(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:p?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]})]}),o.text&&e.jsx("div",{className:`mt-4 p-4 rounded-lg ${o.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:o.text}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:u,disabled:a||!t.host||!t.database,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Testing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Test Connection"})]})}),e.jsx("button",{type:"submit",disabled:r,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),e.jsx("span",{children:"Save Configuration"})]})})]})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:"About Payroll Database"}),e.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"The Payroll module uses a separate MySQL database to store salary information, deductions, payroll history, and financial data."}),e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Purpose:"})," Isolates sensitive financial data with stricter access controls and audit trails."]})]})]})}),e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-6 h-6 text-red-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-red-800 mb-2",children:"High Security Database"}),e.jsxs("ul",{className:"text-sm text-red-700 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Contains highly sensitive salary and financial information"}),e.jsx("li",{children:"Only super administrators can modify this configuration"}),e.jsx("li",{children:"Use extremely strong credentials"}),e.jsx("li",{children:"Enable database encryption if possible"}),e.jsx("li",{children:"Regular backups are critical"}),e.jsx("li",{children:"Audit all access to this database"}),e.jsx("li",{children:"Configuration is stored securely in environment variables"})]})]})]})}),e.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-500 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-6 h-6 text-purple-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-purple-800 mb-2",children:"DTR Integration"}),e.jsx("p",{className:"text-sm text-purple-700",children:"The Payroll module will automatically pull attendance data from the main HR201 database (DTR system) to compute salaries accurately. Employee information will be synced between databases while payroll-specific data (salaries, deductions, payslips) remain isolated."})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Expected Database Schema"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"The Payroll database should contain tables for:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-purple-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Salary Rates"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Employee salary information"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-purple-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Payroll Register"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Payroll computation records"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-purple-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Payslips"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Generated payslip records"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-purple-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Deductions"}),e.jsx("p",{className:"text-xs text-gray-600",children:"SSS, PhilHealth, Pag-IBIG, Tax"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-purple-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Loans & Advances"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Employee loan tracking"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-purple-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Government Reports"}),e.jsx("p",{className:"text-xs text-gray-600",children:"BIR, SSS, PhilHealth reports"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-purple-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" 13th Month Pay"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Bonus computation records"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border-l-2 border-purple-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Payroll History"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Historical payroll data"})]})]})]})]})},GA=()=>{const[t,s]=y.useState({base_path:"",photopath:"",signaturepath:"",thumbpath:"",educationpath:"",cscpath:"",workcertpath:"",certificatepath:"",leavepath:""}),[r,n]=y.useState({}),[a,l]=y.useState(!1),[o,i]=y.useState({type:"",text:""}),c=[{key:"photopath",label:"Photo Storage",description:"Employee photos"},{key:"signaturepath",label:"Signature Storage",description:"Employee signatures"},{key:"thumbpath",label:"Thumbmark Storage",description:"Employee thumbmarks"},{key:"educationpath",label:"Education Documents",description:"Educational certificates"},{key:"cscpath",label:"CSC Documents",description:"Civil Service certificates"},{key:"workcertpath",label:"Work Certificates",description:"Work experience certificates"},{key:"certificatepath",label:"General Certificates",description:"Other certificates"},{key:"leavepath",label:"Leave Documents",description:"Leave-related documents"}];y.useEffect(()=>{console.log("MediaStorage component mounted, fetching config..."),h()},[]),y.useEffect(()=>{console.log("Config state updated:",t)},[t]);const h=async()=>{try{l(!0);const f=await le.get("/media-storage");f.data.success&&s(f.data.data)}catch(f){console.error("Error fetching config:",f),i({type:"error",text:"Failed to load configuration"})}finally{l(!1)}},p=f=>{const d=document.createElement("input");d.type="file",d.webkitdirectory=!0,d.directory=!0,d.multiple=!0,d.onchange=g=>{if(g.target.files.length>0){const b=g.target.files[0];console.log("Selected file:",b),console.log("webkitRelativePath:",b.webkitRelativePath);let E="";if(b.path)E=b.path.substring(0,b.path.lastIndexOf("\\")||b.path.lastIndexOf("/"));else if(b.webkitRelativePath){const R=b.webkitRelativePath.split("/");R.length>1&&(E=R.slice(0,-1).join("/"))}if(!E&&b.webkitRelativePath){const R=b.webkitRelativePath.split("/");R.length>1&&(E=R.slice(0,-1).join("/"))}console.log("Extracted folder path:",E),E?m(f,E):(console.warn("Could not extract folder path from selected files"),i({type:"warning",text:"Could not extract folder path. Please enter the path manually in the text field."}))}},d.click()},m=(f,d)=>{console.log(`Updating ${f} to:`,d),s(g=>{const b={...g,[f]:d};return console.log("New config:",b),b}),n(g=>({...g,[f]:null}))},u=async(f,d)=>{if(!f){console.log("No path provided for validation");return}console.log(`Validating path: "${f}" for type: ${d}`),console.log(`Base path: "${t.base_path}"`);try{const g=await le.post("/media-storage/validate",{path:f,type:d,basePath:t.base_path});if(console.log("Validation response:",g.data),g.data.success)return n(b=>({...b,[d]:g.data.valid})),g.data.valid?i({type:"success",text:g.data.message}):i({type:"error",text:g.data.message}),g.data.valid}catch(g){return console.error("Error validating path:",g),n(b=>({...b,[d]:!1})),i({type:"error",text:`Validation error: ${g.message}`}),!1}},x=async()=>{l(!0);const f={};for(const g of c)if(t[g.key]){const b=await u(t[g.key],g.key);f[g.key]=b}n(f),l(!1);const d=Object.values(f).every(g=>g!==!1);i({type:d?"success":"warning",text:d?"All paths are valid":"Some paths have issues"})},j=async()=>{try{l(!0),(await le.put("/media-storage",t)).data.success&&i({type:"success",text:"Configuration saved successfully"})}catch(f){console.error("Error saving config:",f),i({type:"error",text:"Failed to save configuration"})}finally{l(!1)}},v=()=>{s({base_path:"",photopath:"",signaturepath:"",thumbpath:"",educationpath:"",cscpath:"",workcertpath:"",certificatepath:"",leavepath:""}),n({}),i({type:"info",text:"Configuration reset to default"})},N=f=>{const d=r[f];return d===!0?e.jsx("span",{className:"text-green-500",children:""}):d===!1?e.jsx("span",{className:"text-red-500",children:""}):null};return e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Media Storage Configuration"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure storage paths for different types of employee media and documents"})]}),e.jsxs("div",{className:"p-6",children:[o.text&&e.jsx("div",{className:`mb-6 p-4 rounded-md ${o.type==="success"?"bg-green-50 text-green-800":o.type==="error"?"bg-red-50 text-red-800":o.type==="warning"?"bg-yellow-50 text-yellow-800":"bg-blue-50 text-blue-800"}`,children:o.text}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Base Storage Path"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:t.base_path,onChange:f=>m("base_path",f.target.value),placeholder:"Enter base storage path (e.g., C:\\HRIS\\backend\\uploads)",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),e.jsx("button",{onClick:()=>p("base_path"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:" Select Folder"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This will be used as the default base path for all media types if individual paths are not specified."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Individual Media Type Paths"}),c.map(f=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:f.label}),e.jsx("p",{className:"text-sm text-gray-500",children:f.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[N(f.key),e.jsx("button",{onClick:()=>u(t[f.key],f.key),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Validate"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:t[f.key],onChange:d=>m(f.key,d.target.value),placeholder:`Enter path for ${f.label.toLowerCase()}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),e.jsx("button",{onClick:()=>p(f.key),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:" Select Folder"})]})]},f.key))]}),e.jsxs("div",{className:"flex gap-4 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:x,disabled:a,className:"px-6 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 disabled:opacity-50",children:a?"Validating...":"Validate All Paths"}),e.jsx("button",{onClick:j,disabled:a,className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50",children:a?"Saving...":"Save Configuration"}),e.jsx("button",{onClick:v,disabled:a,className:"px-6 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50",children:"Reset to Default"})]})]})]})})})},QA=()=>{const[t,s]=y.useState("users"),[r,n]=y.useState([]),[a,l]=y.useState(!1),[o,i]=y.useState(!1),[c,h]=y.useState(null),[p,m]=y.useState({username:"",password:"",usertype:"",emp_objid:"",status:1}),[u,x]=y.useState(null),[j,v]=y.useState(null),[N,f]=y.useState(!1),[d,g]=y.useState(null),[b,E]=y.useState(""),[R,S]=y.useState([]),[k,L]=y.useState([]),[A,D]=y.useState(""),[I,O]=y.useState(!1),[C,F]=y.useState(!1),[U,Y]=y.useState(""),[G,V]=y.useState([]),[W,_]=y.useState([]),[M,P]=y.useState(!1),[$,B]=y.useState({}),[w,T]=y.useState([]),[H,K]=y.useState(!1),[J,X]=y.useState(!1),[pe,oe]=y.useState(null),[ce,Ae]=y.useState({componentname:""}),[Be,Ie]=y.useState([]),[ye,se]=y.useState(!1),[we,ve]=y.useState(!1),[Q,ne]=y.useState(null),[he,Me]=y.useState({typename:""}),[be,De]=y.useState(""),[ze,Ee]=y.useState("success");y.useEffect(()=>{ee(),_e(),Ze(),me()},[]);const Z=async()=>{F(!0);try{const ge=await le.get("/201-employees");ge.data.success&&L(ge.data.data||[])}catch(ge){console.error("Error fetching employees:",ge)}finally{F(!1)}};y.useEffect(()=>{if(c&&c.emp_objid&&k.length>0){const ge=k.find(He=>He.objid===c.emp_objid);ge&&!A&&D(`${ge.surname||""}, ${ge.firstname||""} ${ge.middlename||""}`.trim())}},[k,c]);const ee=async()=>{l(!0);try{const ge=await le.get("/sys-users");ge.data.success&&n(ge.data.data||[])}catch(ge){console.error("Error fetching sysusers:",ge),Je("Failed to fetch system users","error")}finally{l(!1)}},_e=async()=>{try{const ge=await le.get("/user-types");ge.data.success&&S(ge.data.data||[])}catch(ge){console.error("Error fetching user types:",ge)}},Qe=ge=>{const{name:He,value:Ye,type:ct,checked:yt}=ge.target;m(lt=>({...lt,[He]:ct==="checkbox"?yt:ct==="number"?parseInt(Ye):Ye}))},je=ge=>{const He=ge.target.files[0];if(He){x(He);const Ye=new FileReader;Ye.onloadend=()=>{v(Ye.result)},Ye.readAsDataURL(He)}},Ke=(ge=null)=>{if(Z(),ge)if(h(ge),m({username:ge.username||"",password:"",usertype:ge.usertype||"",emp_objid:ge.emp_objid||"",status:ge.status!==void 0?ge.status:1}),v(ge.photo||null),x(null),ge.emp_objid){const He=k.find(Ye=>Ye.objid===ge.emp_objid);D(He?`${He.surname||""}, ${He.firstname||""} ${He.middlename||""}`.trim():"")}else D("");else h(null),m({username:"",password:"",usertype:"",emp_objid:"",status:1}),v(null),x(null),D("");O(!1),i(!0)},rt=k.filter(ge=>{const He=`${ge.surname||""}, ${ge.firstname||""} ${ge.middlename||""}`.trim().toLowerCase(),Ye=A.toLowerCase();return He.includes(Ye)||ge.objid&&ge.objid.toLowerCase().includes(Ye)}),gt=y.useMemo(()=>{const ge={};return G.forEach(He=>{const Ye=He.componentgroup||"Uncategorized";ge[Ye]||(ge[Ye]=[]),ge[Ye].push(He)}),ge},[G]),mt=ge=>{B(He=>({...He,[ge]:!He[ge]}))};y.useEffect(()=>{if(G.length>0&&Object.keys($).length===0){const ge=Object.keys(gt),He={};ge.forEach(Ye=>{He[Ye]=!0}),B(He)}},[G,gt]);const it=ge=>{D(`${ge.surname||""}, ${ge.firstname||""} ${ge.middlename||""}`.trim()),m(He=>({...He,emp_objid:ge.objid})),O(!1)},ae=async()=>{var ge,He;if(!p.username){Je("Username is required","error");return}if(!c&&!p.password){Je("Password is required for new users","error");return}try{const Ye=new FormData;Ye.append("username",p.username),p.password&&Ye.append("password",p.password),Ye.append("usertype",p.usertype||""),Ye.append("emp_objid",p.emp_objid||""),Ye.append("status",p.status),u&&Ye.append("photo",u),c?(await le.put(`/sys-users/${c.id}`,Ye,{headers:{"Content-Type":"multipart/form-data"}}),Je("User updated successfully")):(await le.post("/sys-users",Ye,{headers:{"Content-Type":"multipart/form-data"}}),Je("User created successfully")),i(!1),ee()}catch(Ye){console.error("Error saving user:",Ye),Je(((He=(ge=Ye.response)==null?void 0:ge.data)==null?void 0:He.message)||"Failed to save user","error")}},Ce=async ge=>{var He,Ye;if(window.confirm("Are you sure you want to delete this user?"))try{await le.delete(`/sys-users/${ge}`),Je("User deleted successfully"),ee()}catch(ct){console.error("Error deleting user:",ct),Je(((Ye=(He=ct.response)==null?void 0:He.data)==null?void 0:Ye.message)||"Failed to delete user","error")}},Se=ge=>{g(ge),E(""),f(!0)},qe=async()=>{var ge,He;if(!b||b.length<6){Je("Password must be at least 6 characters","error");return}try{await le.post(`/sys-users/${d}/change-password`,{newPassword:b}),Je("Password changed successfully"),f(!1),E("")}catch(Ye){console.error("Error changing password:",Ye),Je(((He=(ge=Ye.response)==null?void 0:ge.data)==null?void 0:He.message)||"Failed to change password","error")}},Ze=async()=>{K(!0);try{const ge=await le.get("/sys-components");ge.data.success&&T(ge.data.data||[])}catch(ge){console.error("Error fetching components:",ge)}finally{K(!1)}},ke=async ge=>{if(!ge){_([]);return}P(!0);try{const He=await le.get(`/sys-users-roles/user/${ge}`);if(He.data.success){const Ye=He.data.data||[],ct=r.find(yt=>yt.id===parseInt(ge));if(Ye.length>0)_(Ye);else if(ct&&ct.typename==="Administrator"&&G.length>0){const yt=G.map(lt=>({component:lt.id,componentname:lt.componentname,canaccesspage:1,canread:1,cancreate:1,canupdate:1,candelete:1}));_(yt)}else _([])}}catch(He){console.error("Error fetching user permissions:",He)}finally{P(!1)}},te=(ge,He)=>{const Ye=W.find(ct=>ct.component===ge);return Ye?Ye[He]===1:!1};y.useEffect(()=>{U?ke(U):_([])},[U,G.length,r.length]);const Ne=(ge,He)=>{_(Ye=>{var yt;return Ye.find(lt=>lt.component===ge)?Ye.map(lt=>lt.component===ge?{...lt,[He]:!lt[He]}:lt):[...Ye,{component:ge,componentname:((yt=G.find(lt=>lt.id===ge))==null?void 0:yt.componentname)||"",canaccesspage:He==="canaccesspage"?1:0,canread:He==="canread"?1:0,cancreate:He==="cancreate"?1:0,canupdate:He==="canupdate"?1:0,candelete:He==="candelete"?1:0}]})},de=ge=>{const Ye=!G.every(ct=>{const yt=W.find(lt=>lt.component===ct.id);return(yt==null?void 0:yt[ge])===1});_(ct=>{const yt=[...ct];return G.forEach(lt=>{const jt=yt.findIndex(kt=>kt.component===lt.id);jt>=0?yt[jt]={...yt[jt],[ge]:Ye?1:0}:yt.push({component:lt.id,componentname:lt.componentname,canaccesspage:ge==="canaccesspage"&&Ye?1:0,canread:ge==="canread"&&Ye?1:0,cancreate:ge==="cancreate"&&Ye?1:0,canupdate:ge==="canupdate"&&Ye?1:0,candelete:ge==="candelete"&&Ye?1:0})}),yt})},q=async()=>{var ge,He;if(!U){Je("Please select a user first","error");return}try{const Ye=G.map(lt=>{const jt=W.find(kt=>kt.component===lt.id);return jt?{componentId:lt.id,canaccesspage:jt.canaccesspage===1,canread:jt.canread===1,cancreate:jt.cancreate===1,canupdate:jt.canupdate===1,candelete:jt.candelete===1}:{componentId:lt.id,canaccesspage:!1,canread:!1,cancreate:!1,canupdate:!1,candelete:!1}}),ct=Ye.filter(lt=>lt.canaccesspage||lt.canread||lt.cancreate||lt.canupdate||lt.candelete);console.log(" [handleSavePermissions] Sending permissions:",{userId:U,totalComponents:G.length,permissionsWithChecks:ct.length,permissionsTotal:Ye.length,samplePermissions:ct.slice(0,5),allComponentIds:ct.map(lt=>lt.componentId)});const yt=await le.post("/sys-users-roles",{userId:U,permissions:ct});console.log(" [handleSavePermissions] Response:",yt.data),Je("Permissions saved successfully"),ke(U)}catch(Ye){console.error("Error saving permissions:",Ye),Je(((He=(ge=Ye.response)==null?void 0:ge.data)==null?void 0:He.message)||"Failed to save permissions","error")}},me=async()=>{se(!0);try{const ge=await le.get("/user-types");ge.data.success&&Ie(ge.data.data||[])}catch(ge){console.error("Error fetching user types:",ge)}finally{se(!1)}},Te=(ge=null)=>{ge?(oe(ge),Ae({componentname:ge.componentname||""})):(oe(null),Ae({componentname:""})),X(!0)},Ue=async()=>{var ge,He;if(!ce.componentname.trim()){Je("Component name is required","error");return}try{pe?(await le.put(`/sys-components/${pe.id}`,ce),Je("Component updated successfully")):(await le.post("/sys-components",ce),Je("Component created successfully")),X(!1),Ze()}catch(Ye){console.error("Error saving component:",Ye),Je(((He=(ge=Ye.response)==null?void 0:ge.data)==null?void 0:He.message)||"Failed to save component","error")}},Re=async ge=>{var He,Ye;if(window.confirm("Are you sure you want to delete this component?"))try{await le.delete(`/sys-components/${ge}`),Je("Component deleted successfully"),Ze()}catch(ct){console.error("Error deleting component:",ct),Je(((Ye=(He=ct.response)==null?void 0:He.data)==null?void 0:Ye.message)||"Failed to delete component","error")}},$e=(ge=null)=>{ge?(ne(ge),Me({typename:ge.typename||""})):(ne(null),Me({typename:""})),ve(!0)},Ve=async()=>{var ge,He;if(!he.typename.trim()){Je("Type name is required","error");return}try{Q?(await le.put(`/user-types/${Q.id}`,he),Je("User type updated successfully")):(await le.post("/user-types",he),Je("User type created successfully")),ve(!1),me(),_e()}catch(Ye){console.error("Error saving user type:",Ye),Je(((He=(ge=Ye.response)==null?void 0:ge.data)==null?void 0:He.message)||"Failed to save user type","error")}},at=async ge=>{var He,Ye;if(window.confirm("Are you sure you want to delete this user type?"))try{await le.delete(`/user-types/${ge}`),Je("User type deleted successfully"),me(),_e()}catch(ct){console.error("Error deleting user type:",ct),Je(((Ye=(He=ct.response)==null?void 0:He.data)==null?void 0:Ye.message)||"Failed to delete user type","error")}},Je=(ge,He="success")=>{De(ge),Ee(He),setTimeout(()=>De(""),3e3)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"System Users Management"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage system users, roles, and permissions"})]}),be&&e.jsx("div",{className:`mb-4 p-3 rounded-md ${ze==="error"?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:be}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>s("users"),className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="users"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"System Users"}),e.jsx("button",{onClick:()=>s("roles"),className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="roles"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"User Roles"}),e.jsx("button",{onClick:()=>s("parameters"),className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="parameters"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"User Parameters"})]})}),t==="users"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"System Users"}),e.jsx("button",{onClick:()=>Ke(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add User"})]}),a?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Photo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Username"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"No users found"})}):r.map(ge=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"h-10 w-10 rounded-full overflow-hidden bg-gray-200",children:ge.photo?e.jsx("img",{src:ge.photo,alt:ge.username,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-400 text-xs",children:ge.username.charAt(0).toUpperCase()})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:ge.username}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ge.typename||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ge.surname&&ge.firstname?`${ge.surname}, ${ge.firstname} ${ge.middlename||""}`.trim():"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${ge.status===1?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ge.status===1?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>Ke(ge),className:"text-blue-600 hover:text-blue-900 mr-3",title:"Edit",children:""}),e.jsx("button",{onClick:()=>Se(ge.id),className:"text-yellow-600 hover:text-yellow-900 mr-3",title:"Change Password",children:""}),e.jsx("button",{onClick:()=>Ce(ge.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:""})]})]},ge.id))})]})})})]}),t==="roles"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select User"}),e.jsxs("select",{value:U,onChange:ge=>Y(ge.target.value),className:"w-full max-w-md px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"-- Select a user --"}),r.map(ge=>e.jsxs("option",{value:ge.id,children:[ge.username," ",ge.typename?`(${ge.typename})`:""]},ge.id))]})]}),U&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Permissions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>de("canaccesspage"),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Toggle All Access"}),e.jsx("button",{onClick:()=>de("canread"),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Toggle All Read"}),e.jsx("button",{onClick:()=>de("cancreate"),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Toggle All Create"}),e.jsx("button",{onClick:()=>de("canupdate"),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Toggle All Update"}),e.jsx("button",{onClick:()=>de("candelete"),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Toggle All Delete"}),e.jsx("button",{onClick:q,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save Permissions"})]})]}),M?e.jsx("div",{className:"text-center py-8",children:"Loading permissions..."}):e.jsxs("div",{className:"space-y-4",children:[Object.keys(gt).map(ge=>e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:[e.jsxs("button",{onClick:()=>mt(ge),className:"w-full px-6 py-4 bg-gray-50 hover:bg-gray-100 flex items-center justify-between transition-colors",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:[ge,e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",gt[ge].length," ",gt[ge].length===1?"component":"components",")"]})]}),e.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${$[ge]?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),$[ge]&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Component"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Access Page"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Read"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Create"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Update"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Delete"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:gt[ge].map(He=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:He.componentname}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("input",{type:"checkbox",checked:te(He.id,"canaccesspage"),onChange:()=>Ne(He.id,"canaccesspage"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("input",{type:"checkbox",checked:te(He.id,"canread"),onChange:()=>Ne(He.id,"canread"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("input",{type:"checkbox",checked:te(He.id,"cancreate"),onChange:()=>Ne(He.id,"cancreate"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("input",{type:"checkbox",checked:te(He.id,"canupdate"),onChange:()=>Ne(He.id,"canupdate"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("input",{type:"checkbox",checked:te(He.id,"candelete"),onChange:()=>Ne(He.id,"candelete"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})})]},He.id))})]})})]},ge)),Object.keys(gt).length===0&&e.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center text-gray-500",children:"No components found"})]})]})]}),t==="parameters"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"System Components"}),e.jsx("button",{onClick:()=>Te(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add Component"})]}),H?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Component Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"px-6 py-8 text-center text-gray-500",children:"No components found"})}):w.map(ge=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ge.id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ge.componentname}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>Te(ge),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Edit"}),e.jsx("button",{onClick:()=>Re(ge.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},ge.id))})]})})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"User Types"}),e.jsx("button",{onClick:()=>$e(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add User Type"})]}),ye?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Be.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"px-6 py-8 text-center text-gray-500",children:"No user types found"})}):Be.map(ge=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ge.id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ge.typename}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>$e(ge),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Edit"}),e.jsx("button",{onClick:()=>at(ge.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},ge.id))})]})})})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:ge=>{ge.target===ge.currentTarget&&O(!1)},children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:c?"Edit User":"Add User"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:A,onChange:ge=>{D(ge.target.value),O(!0),ge.target.value||m(He=>({...He,emp_objid:""}))},onFocus:()=>O(!0),placeholder:"Search employee by name...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),I&&A&&rt.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:rt.slice(0,20).map(ge=>{var He,Ye;return e.jsxs("div",{onClick:()=>it(ge),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200 last:border-b-0 flex items-center space-x-3",children:[ge.photo_path?e.jsx("img",{src:ge.photo_path,alt:ge.surname,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-sm text-gray-600",children:(((He=ge.surname)==null?void 0:He.charAt(0))||"")+(((Ye=ge.firstname)==null?void 0:Ye.charAt(0))||"")}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:`${ge.surname||""}, ${ge.firstname||""} ${ge.middlename||""}`.trim()}),ge.dtruserid&&e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",ge.dtruserid]})]})]},ge.objid)})})]}),p.emp_objid&&e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Selected: ",A]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username *"}),e.jsx("input",{type:"text",name:"username",value:p.username,onChange:Qe,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",c?"":"*"]}),e.jsx("input",{type:"password",name:"password",value:p.password,onChange:Qe,placeholder:c?"Leave blank to keep current password":"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Type"}),e.jsxs("select",{name:"usertype",value:p.usertype,onChange:Qe,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"-- Select --"}),R.map(ge=>e.jsx("option",{value:ge.id,children:ge.typename},ge.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:p.status,onChange:Qe,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:1,children:"Active"}),e.jsx("option",{value:0,children:"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:je,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),j&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:j,alt:"Preview",className:"h-20 w-20 rounded-full object-cover"})})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{i(!1),O(!1)},className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>{O(!1),ae()},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save"})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Change Password"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password *"}),e.jsx("input",{type:"password",value:b,onChange:ge=>E(ge.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:qe,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Change Password"})]})]})}),J&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:pe?"Edit Component":"Add Component"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Component Name *"}),e.jsx("input",{type:"text",value:ce.componentname,onChange:ge=>Ae({componentname:ge.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>X(!1),className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:Ue,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save"})]})]})}),we&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:Q?"Edit User Type":"Add User Type"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type Name *"}),e.jsx("input",{type:"text",value:he.typename,onChange:ge=>Me({typename:ge.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>ve(!1),className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:Ve,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save"})]})]})})]})},ZA=()=>{const{user:t,logout:s}=Qt(),r=xr(),{canAccessPage:n}=im(),[a,l]=y.useState("dtr"),[o,i]=y.useState("dashboard"),[c,h]=y.useState(""),[p,m]=y.useState(!0),[u,x]=y.useState(!0),[j,v]=y.useState(!1),[N,f]=y.useState(!1),[d,g]=y.useState(!1),[b,E]=y.useState(!1),[R,S]=y.useState(!1),[k,L]=y.useState(!1),[A,D]=y.useState(!1),[I,O]=y.useState(!1),[C,F]=y.useState(!1),[U,Y]=y.useState(!1),[G,V]=y.useState(!1),[W,_]=y.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[M,P]=y.useState(!1),[$,B]=y.useState(""),[w,T]=y.useState(!1),[H,K]=y.useState(null),[J,X]=y.useState(null),[pe,oe]=y.useState(!1),[ce,Ae]=y.useState("");y.useEffect(()=>{try{const Ee=JSON.parse(localStorage.getItem("hrisNavState")||"{}");Ee.activeModule&&l(Ee.activeModule),Ee.activeTab&&i(Ee.activeTab),typeof Ee.activeSubTab=="string"&&h(Ee.activeSubTab),typeof Ee.sidebarOpen=="boolean"&&m(Ee.sidebarOpen),typeof Ee.dtrExpanded=="boolean"&&x(Ee.dtrExpanded),typeof Ee.files201Expanded=="boolean"&&f(Ee.files201Expanded),typeof Ee.payrollExpanded=="boolean"&&g(Ee.payrollExpanded),typeof Ee.systemExpanded=="boolean"&&F(Ee.systemExpanded)}catch{}},[]),y.useEffect(()=>{const Ee={activeModule:a,activeTab:o,activeSubTab:c,sidebarOpen:p,dtrExpanded:u,files201Expanded:N,payrollExpanded:d,systemExpanded:C};try{localStorage.setItem("hrisNavState",JSON.stringify(Ee))}catch{}},[a,o,c,p,u,N,d,C]);const[Be,Ie]=y.useState({lguDtrName:"HRIS Management System",lguName:"Organization Name",lguType:"Management Portal",logoPreview:null}),[ye,se]=y.useState({totalEmployees:0,activeEmployees:0,totalDepartments:0,todayTimeLogs:0,pendingLeaves:0,activeLocators:0,inactiveEmployees:0,presentToday:0,absentToday:0,lateToday:0,onLeave:0,onTravel:0,onLocator:0}),we=async()=>{try{const Ee=await le.get("/company/info");Ee.data.success&&Ie(Ee.data.data)}catch(Ee){console.error("Error fetching company info:",Ee)}},ve=async()=>{try{const Ee=await le.get("/management/dashboard");se(Ee.data)}catch(Ee){console.error("Error fetching dashboard data:",Ee)}};y.useEffect(()=>{we(),ve()},[]);const Q=Ee=>{l(Ee),i(`${Ee}-dashboard`),h(""),x(Ee==="dtr"),f(Ee==="201"),g(Ee==="payroll"),E(!1),S(!1),L(!1),D(!1),O(!1)},ne=(Ee,Z=!1)=>{i(Ee),Z||h(""),Ee==="time-logs"?E(!b):Ee==="shifts"?S(!R):Ee==="dtr-reports"?L(!k):Ee==="employee-records"?D(!A):Ee==="dtr-settings"?O(!I):Ee==="dtr-menu"?v(!j):Ee==="system-setup"&&F(!C)},he=Ee=>{h(Ee)},Me=Ee=>{const Z=Ee.target.files[0];if(Z){if(!Z.type.startsWith("image/")){Ae("Please select an image file");return}if(Z.size>5*1024*1024){Ae("File size must be less than 5MB");return}X(Z),Ae("");const ee=new FileReader;ee.onloadend=()=>{K(ee.result)},ee.readAsDataURL(Z)}},be=async()=>{var Ee,Z;if(!J){Ae("Please select a photo");return}try{oe(!0),Ae("");const ee=new FormData;ee.append("photo",J);const _e=await le.post("/auth/upload-photo",ee,{headers:{"Content-Type":"multipart/form-data"}});if(_e.data.success){const Qe={...t,PHOTO:_e.data.photo};localStorage.setItem("authUser",JSON.stringify(Qe)),window.dispatchEvent(new Event("authUpdate")),T(!1),K(null),X(null),Y(!1),alert("Photo uploaded successfully!")}else Ae(_e.data.message||"Failed to upload photo")}catch(ee){console.error("Error uploading photo:",ee),Ae(((Z=(Ee=ee.response)==null?void 0:Ee.data)==null?void 0:Z.message)||"Failed to upload photo")}finally{oe(!1)}},De=async()=>{var Ee,Z;if(!W.currentPassword||!W.newPassword||!W.confirmPassword){B("All fields are required");return}if(W.newPassword!==W.confirmPassword){B("New passwords do not match");return}if(W.newPassword.length<6){B("New password must be at least 6 characters long");return}try{P(!0),B("");const ee=await le.post("/auth/change-password",{currentPassword:W.currentPassword,newPassword:W.newPassword});ee.data.success?(_({currentPassword:"",newPassword:"",confirmPassword:""}),V(!1),Y(!1),alert("Password changed successfully!")):B(ee.data.message||"Failed to change password")}catch(ee){console.error("Error changing password:",ee),B(((Z=(Ee=ee.response)==null?void 0:Ee.data)==null?void 0:Z.message)||"Failed to change password")}finally{P(!1)}};y.useEffect(()=>{const Ee=Z=>{U&&!Z.target.closest(".user-dropdown")&&Y(!1)};return document.addEventListener("mousedown",Ee),()=>{document.removeEventListener("mousedown",Ee)}},[U]);const ze=()=>{const Ee=c||o;return Ee==="manage-time-logs"?e.jsx(oS,{}):Ee==="compute-attendance"?e.jsx(cS,{}):Ee==="shift-schedules"?e.jsx(dS,{}):Ee==="dtr-shifts"?e.jsx(IS,{}):Ee==="dtr-assign-shift"?e.jsx(MS,{}):Ee==="dtr-holidays"?e.jsx(US,{}):Ee==="shift-assignment"?e.jsx(uS,{}):Ee==="employee-locator"?e.jsx(jS,{}):Ee==="leave-management"?e.jsx(NS,{}):Ee==="travel-order"?e.jsx(ES,{}):Ee==="holidays"?e.jsx(SS,{}):Ee==="dtr-checker-kiosk"?e.jsx(DS,{}):Ee==="generate-dtr"?e.jsx(vS,{}):Ee==="print-dtr-individual"?e.jsx(F0,{}):Ee==="print-dtr-department"?e.jsx(U0,{}):Ee==="print-leave-records"?e.jsx(_S,{}):Ee==="print-locator-entries"?e.jsx(CS,{}):Ee==="print-travel-order"?e.jsx(kS,{}):Ee==="portal-users"?e.jsx(AS,{}):Ee==="enroll-bio"?e.jsx(LS,{}):Ee==="print-employee-list"?e.jsx(TS,{}):Ee==="201-dashboard"?e.jsx(XA,{}):Ee==="201-employees"?e.jsx(WS,{}):Ee==="201-pds"?e.jsx(BS,{}):Ee==="201-leave"?e.jsx(KS,{}):Ee==="201-designation"?e.jsx(TA,{}):Ee==="201-locator"?e.jsx(MA,{}):Ee==="201-travel"?e.jsx(PA,{}):Ee==="payroll-dashboard"?e.jsx(FA,{}):Ee==="payroll-processing"?e.jsx(UA,{}):Ee==="payroll-reports"?e.jsx($A,{}):Ee==="company-info"?e.jsx(HA,{}):Ee==="departments"?e.jsx(BA,{}):Ee==="machine-management"?e.jsx(zA,{}):Ee==="upload-employee"?e.jsx(WA,{}):Ee==="download-employee"?e.jsx(VA,{}):Ee==="db-connection"?e.jsx(YA,{}):Ee==="db-201files"?e.jsx(qA,{}):Ee==="db-payroll"?e.jsx(KA,{}):Ee==="media-storage"?e.jsx(GA,{}):Ee==="sys-users"?e.jsx(QA,{}):e.jsx(JA,{stats:ye,activeModule:a})};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-80 bg-gradient-to-b from-slate-50 to-white shadow-2xl transform transition-transform duration-300 ease-in-out ${p?"translate-x-0":"-translate-x-full"}`,children:[e.jsxs("div",{className:"relative h-20 px-6 bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 text-white overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-10"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white bg-opacity-5 rounded-full -translate-y-16 translate-x-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white bg-opacity-5 rounded-full translate-y-12 -translate-x-12"}),e.jsxs("div",{className:"relative flex items-center justify-between h-full",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center",children:Be.logoPreview?e.jsx("img",{src:Be.logoPreview,alt:"Company Logo",className:"w-8 h-8 object-contain",onError:Ee=>{Ee.target.style.display="none"}}):e.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold tracking-tight",children:Be.lguDtrName}),e.jsx("p",{className:"text-sm text-indigo-100 font-medium",children:Be.lguName})]})]}),e.jsx("button",{onClick:()=>m(!1),className:"p-2 rounded-xl hover:bg-white hover:bg-opacity-20 transition-all duration-200 backdrop-blur-sm",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsxs("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",style:{maxHeight:"calc(100vh - 200px)"},children:[e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>Q("dtr"),className:`w-full flex items-center px-3 py-3 text-sm font-bold rounded-lg transition-all duration-200 ${a==="dtr"?"bg-blue-100 text-blue-700 shadow-sm":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"text-xl mr-3",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"DTR Management"}),e.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${u?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),u&&e.jsxs("div",{className:"ml-6 mt-1 space-y-1",children:[n("dtr-dashboard")&&e.jsxs("button",{onClick:()=>{i("dtr-dashboard"),h("")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${o==="dtr-dashboard"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Dashboard"})]}),n("time-logs")&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>ne("time-logs",!0),className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${o==="time-logs"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Time Logs"}),e.jsx("svg",{className:`w-3 h-3 transition-transform duration-200 ${b?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),b&&e.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[n("manage-time-logs")&&e.jsx("button",{onClick:()=>he("manage-time-logs"),className:`w-full flex items-center px-3 py-2 text-xs rounded-md transition-colors duration-200 ${c==="manage-time-logs"?"bg-green-50 text-green-700 font-medium border-l-2 border-green-700":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx("span",{className:"flex-1 text-left",children:"Manage Time Logs"})}),n("compute-attendance")&&e.jsx("button",{onClick:()=>he("compute-attendance"),className:`w-full flex items-center px-3 py-2 text-xs rounded-md transition-colors duration-200 ${c==="compute-attendance"?"bg-green-50 text-green-700 font-medium border-l-2 border-green-700":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx("span",{className:"flex-1 text-left",children:"Compute Attendance"})})]})]}),(n("shifts")||n("shift-schedules")||n("shift-assignment"))&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>ne("shifts",!0),className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${o==="shifts"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Shifts & Schedules"}),e.jsx("svg",{className:`w-3 h-3 transition-transform duration-200 ${R?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),R&&e.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[n("shift-schedules")&&e.jsx("button",{onClick:()=>he("shift-schedules"),className:`w-full flex items-center px-3 py-2 text-xs rounded-md transition-colors duration-200 ${c==="shift-schedules"?"bg-green-50 text-green-700 font-medium border-l-2 border-green-700":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx("span",{className:"flex-1 text-left",children:"Shift Schedules"})}),n("shift-assignment")&&e.jsx("button",{onClick:()=>he("shift-assignment"),className:`w-full flex items-center px-3 py-2 text-xs rounded-md transition-colors duration-200 ${c==="shift-assignment"?"bg-green-50 text-green-700 font-medium border-l-2 border-green-700":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx("span",{className:"flex-1 text-left",children:"Shift Assignment"})})]})]}),(n("employee-records")||n("enroll-bio")||n("employee-locator")||n("leave-management")||n("travel-order"))&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>ne("employee-records",!0),className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${o==="employee-records"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Employee Records"}),e.jsx("svg",{className:`w-3 h-3 transition-transform duration-200 ${A?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),A&&e.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[n("enroll-bio")&&e.jsx("button",{onClick:()=>he("enroll-bio"),className:`w-full flex items-center px-3 py-2 text-xs rounded-md transition-colors duration-200 ${c==="enroll-bio"?"bg-green-50 text-green-700 font-medium border-l-2 border-green-700":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx("span",{className:"flex-1 text-left",children:"Enroll Biometric"})}),n("employee-locator")&&e.jsx("button",{onClick:()=>he("employee-locator"),className:`w-full flex items-center px-3 py-2 text-xs rounded-md transition-colors duration-200 ${c==="employee-locator"?"bg-green-50 text-green-700 font-medium border-l-2 border-green-700":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx("span",{className:"flex-1 text-left",children:"Employee Locator"})}),n("leave-management")&&e.jsx("button",{onClick:()=>he("leave-management"),className:`w-full flex items-center px-3 py-2 text-xs rounded-md transition-colors duration-200 ${c==="leave-management"?"bg-green-50 text-green-700 font-medium border-l-2 border-green-700":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx("span",{className:"flex-1 text-left",children:"Leave Management"})}),n("travel-order")&&e.jsx("button",{onClick:()=>he("travel-order"),className:`w-full flex items-center px-3 py-2 text-xs rounded-md transition-colors duration-200 ${c==="travel-order"?"bg-green-50 text-green-700 font-medium border-l-2 border-green-700":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx("span",{className:"flex-1 text-left",children:"Travel Orders"})})]})]}),(n("dtr-settings")||n("holidays")||n("dtr-checker-kiosk"))&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>ne("dtr-settings",!0),className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${o==="dtr-settings"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Settings"}),e.jsx("svg",{className:`w-3 h-3 transition-transform duration-200 ${I?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),I&&e.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[n("holidays")&&e.jsx("button",{onClick:()=>he("holidays"),className:`w-full flex items-center px-3 py-2 text-xs rounded-md transition-colors duration-200 ${c==="holidays"?"bg-green-50 text-green-700 font-medium border-l-2 border-green-700":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx("span",{className:"flex-1 text-left",children:"Holidays"})}),n("dtr-checker-kiosk")&&e.jsx("button",{onClick:()=>he("dtr-checker-kiosk"),className:`w-full flex items-center px-3 py-2 text-xs rounded-md transition-colors duration-200 ${c==="dtr-checker-kiosk"?"bg-green-50 text-green-700 font-medium border-l-2 border-green-700":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx("span",{className:"flex-1 text-left",children:"DTR Checker Kiosk"})})]})]}),(n("dtr-reports")||n("generate-dtr")||n("print-dtr-individual")||n("print-dtr-department")||n("print-employee-list")||n("print-leave-records")||n("print-locator-entries")||n("print-travel-order"))&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>ne("dtr-reports",!0),className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${o==="dtr-reports"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Reports"}),e.jsx("svg",{className:`w-3 h-3 transition-transform duration-200 ${k?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),k&&e.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[n("generate-dtr")&&e.jsx("button",{onClick:()=>he("generate-dtr"),className:`w-full flex items-center px-3 py-2 text-xs rounded-md transition-colors duration-200 ${c==="generate-dtr"?"bg-green-50 text-green-700 font-medium border-l-2 border-green-700":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx("span",{className:"flex-1 text-left",children:"Generate DTR"})}),n("print-dtr-individual")&&e.jsx("button",{onClick:()=>he("print-dtr-individual"),className:`w-full flex items-center px-3 py-2 text-xs rounded-md transition-colors duration-200 ${c==="print-dtr-individual"?"bg-green-50 text-green-700 font-medium border-l-2 border-green-700":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx("span",{className:"flex-1 text-left",children:"Print DTR (Individual)"})}),n("print-dtr-department")&&e.jsx("button",{onClick:()=>he("print-dtr-department"),className:`w-full flex items-center px-3 py-2 text-xs rounded-md transition-colors duration-200 ${c==="print-dtr-department"?"bg-green-50 text-green-700 font-medium border-l-2 border-green-700":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx("span",{className:"flex-1 text-left",children:"Print DTR (Department)"})}),n("print-employee-list")&&e.jsx("button",{onClick:()=>he("print-employee-list"),className:`w-full flex items-center px-3 py-2 text-xs rounded-md transition-colors duration-200 ${c==="print-employee-list"?"bg-green-50 text-green-700 font-medium border-l-2 border-green-700":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx("span",{className:"flex-1 text-left",children:"Employee List"})}),n("print-leave-records")&&e.jsx("button",{onClick:()=>he("print-leave-records"),className:`w-full flex items-center px-3 py-2 text-xs rounded-md transition-colors duration-200 ${c==="print-leave-records"?"bg-green-50 text-green-700 font-medium border-l-2 border-green-700":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx("span",{className:"flex-1 text-left",children:"Leave Records"})}),n("print-locator-entries")&&e.jsx("button",{onClick:()=>he("print-locator-entries"),className:`w-full flex items-center px-3 py-2 text-xs rounded-md transition-colors duration-200 ${c==="print-locator-entries"?"bg-green-50 text-green-700 font-medium border-l-2 border-green-700":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx("span",{className:"flex-1 text-left",children:"Locator Entries"})}),n("print-travel-order")&&e.jsx("button",{onClick:()=>he("print-travel-order"),className:`w-full flex items-center px-3 py-2 text-xs rounded-md transition-colors duration-200 ${c==="print-travel-order"?"bg-green-50 text-green-700 font-medium border-l-2 border-green-700":"text-gray-600 hover:bg-gray-50"}`,children:e.jsx("span",{className:"flex-1 text-left",children:"Travel Orders"})})]})]})]})]}),(n("portal-users")||n("201-locator")||n("dtr-holidays")||n("dtr-shifts")||n("dtr-assign-shift"))&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>ne("dtr-menu",!0),className:`w-full flex items-center px-3 py-3 text-sm font-bold rounded-lg transition-all duration-200 ${o==="dtr-menu"?"bg-blue-100 text-blue-700 shadow-sm":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"text-xl mr-3",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"DTR"}),e.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${j?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),j&&e.jsxs("div",{className:"ml-6 mt-1 space-y-1",children:[n("portal-users")&&e.jsxs("button",{onClick:()=>he("portal-users"),className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${c==="portal-users"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Portal Users"})]}),n("201-locator")&&e.jsxs("button",{onClick:()=>he("201-locator"),className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${c==="201-locator"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Locator"})]}),n("dtr-holidays")&&e.jsxs("button",{onClick:()=>he("dtr-holidays"),className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${c==="dtr-holidays"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Holiday"})]}),n("dtr-shifts")&&e.jsxs("button",{onClick:()=>he("dtr-shifts"),className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${c==="dtr-shifts"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Shifts"})]}),n("dtr-assign-shift")&&e.jsxs("button",{onClick:()=>he("dtr-assign-shift"),className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${c==="dtr-assign-shift"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Assign Shift"})]})]})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>Q("201"),className:`w-full flex items-center px-3 py-3 text-sm font-bold rounded-lg transition-all duration-200 ${a==="201"?"bg-green-100 text-green-700 shadow-sm":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"text-xl mr-3",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"201 Files"}),e.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${N?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),N&&e.jsxs("div",{className:"ml-6 mt-1 space-y-1",children:[n("201-dashboard")&&e.jsxs("button",{onClick:()=>{i("201-dashboard"),h("")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${o==="201-dashboard"?"bg-green-50 text-green-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Dashboard"})]}),n("201-employees")&&e.jsxs("button",{onClick:()=>{i("201-employees"),h("")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${o==="201-employees"?"bg-green-50 text-green-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Employees"})]}),n("201-pds")&&e.jsxs("button",{onClick:()=>{i("201-pds"),h("")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${o==="201-pds"?"bg-green-50 text-green-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"PDS"})]}),n("201-leave")&&e.jsxs("button",{onClick:()=>{i("201-leave"),h("")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${o==="201-leave"?"bg-green-50 text-green-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Manage Leaves"})]}),n("201-designation")&&e.jsxs("button",{onClick:()=>{i("201-designation"),h("")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${o==="201-designation"?"bg-green-50 text-green-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Designation"})]}),n("201-travel")&&e.jsxs("button",{onClick:()=>{i("201-travel"),h("")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${o==="201-travel"?"bg-green-50 text-green-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Travel"})]})]})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>Q("payroll"),className:`w-full flex items-center px-3 py-3 text-sm font-bold rounded-lg transition-all duration-200 ${a==="payroll"?"bg-purple-100 text-purple-700 shadow-sm":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"text-xl mr-3",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Payroll"}),e.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${d?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),d&&e.jsxs("div",{className:"ml-6 mt-1 space-y-1",children:[n("payroll-dashboard")&&e.jsxs("button",{onClick:()=>{i("payroll-dashboard"),h("")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${o==="payroll-dashboard"?"bg-purple-50 text-purple-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Dashboard"})]}),n("payroll-processing")&&e.jsxs("button",{onClick:()=>{i("payroll-processing"),h("")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${o==="payroll-processing"?"bg-purple-50 text-purple-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Payroll Processing"})]}),n("payroll-reports")&&e.jsxs("button",{onClick:()=>{i("payroll-reports"),h("")},className:`w-full flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${o==="payroll-reports"?"bg-purple-50 text-purple-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Reports"})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 mt-4",children:[e.jsxs("button",{onClick:()=>ne("system-setup",!0),className:"w-full flex items-center px-3 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50 rounded-md",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"System Setup"}),e.jsx("svg",{className:`w-3 h-3 transition-transform duration-200 ${C?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),C&&e.jsxs("div",{className:"ml-6 mt-1 space-y-1",children:[n("company-info")&&e.jsxs("button",{onClick:()=>{i("company-info"),h("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Company Info"})]}),n("departments")&&e.jsxs("button",{onClick:()=>{i("departments"),h("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Departments"})]}),n("machine-management")&&e.jsxs("button",{onClick:()=>{i("machine-management"),h("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Machine Management"})]}),n("upload-employee")&&e.jsxs("button",{onClick:()=>{i("upload-employee"),h("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Upload Employee"})]}),n("download-employee")&&e.jsxs("button",{onClick:()=>{i("download-employee"),h("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Download Employee"})]}),n("db-connection")&&e.jsxs("button",{onClick:()=>{i("db-connection"),h("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"DB Connection (Main)"})]}),n("db-201files")&&e.jsxs("button",{onClick:()=>{i("db-201files"),h("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"DB 201 Files"})]}),n("db-payroll")&&e.jsxs("button",{onClick:()=>{i("db-payroll"),h("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"DB Payroll"})]}),n("media-storage")&&e.jsxs("button",{onClick:()=>{i("media-storage"),h("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"Media Storage"})]}),n("sys-users")&&e.jsxs("button",{onClick:()=>{i("sys-users"),h("")},className:"w-full flex items-center px-3 py-2 text-sm rounded-md text-gray-600 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{className:"flex-1 text-left",children:"System Users"})]})]})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-6 py-4 border-t border-gray-200 bg-white",children:e.jsxs("div",{className:"text-center text-xs text-gray-500",children:[e.jsx("p",{className:"font-semibold",children:"HRIS System v2.0"}),e.jsx("p",{children:" 2025 All Rights Reserved"})]})})]}),e.jsxs("div",{className:`flex-1 transition-all duration-300 ${p?"ml-80":"ml-0"}`,children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>m(!0),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:[a==="dtr"&&" DTR Management",a==="201"&&" 201 Files",a==="payroll"&&" Payroll"]}),e.jsx("p",{className:"text-sm text-gray-500",children:(c||o).replace(/-/g," ").replace(/\b\w/g,Ee=>Ee.toUpperCase())})]})]}),e.jsxs("div",{className:"relative user-dropdown",children:[e.jsxs("button",{onClick:()=>Y(!U),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 transition-all duration-200",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:(t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"Administrator"}),e.jsx("div",{className:"text-xs text-gray-500",children:(t==null?void 0:t.TITLE)||(t==null?void 0:t.title)||"System Administrator"})]}),e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-md overflow-hidden relative",children:(()=>{let Ee=null;const Z=t==null?void 0:t.PHOTO;if(Z){if(typeof Z=="string")Z.startsWith("data:")?Ee=Z:Ee=(t==null?void 0:t.role)==="admin"?`data:image/png;base64,${Z}`:`data:image/jpeg;base64,${Z}`;else if(typeof Z=="object"&&Z!==null){const ee=Z.base64||Z.data||(typeof Z.toString=="function"?Z.toString():null);ee&&typeof ee=="string"&&(Ee=ee.startsWith("data:")?ee:`data:image/png;base64,${ee}`)}}return Ee?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:Ee,alt:(t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"User",className:"w-full h-full object-cover rounded-xl",onError:ee=>{ee.target.style.display="none",ee.target.nextSibling&&(ee.target.nextSibling.style.display="flex")}}),e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-lg absolute inset-0",style:{display:"none"},children:((t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"U").charAt(0).toUpperCase()})]}):e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-lg",children:((t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"U").charAt(0).toUpperCase()})})()}),e.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${U?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),U&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[e.jsxs("button",{onClick:()=>{r("/dtr-checker"),Y(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{children:"My DTR"})]}),e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:()=>{T(!0),Y(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{children:"Change Photo"})]}),e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:()=>{V(!0),Y(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 0121 9z"})}),e.jsx("span",{children:"Change Password"})]}),e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:()=>{s(),Y(!1),r("/login")},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),e.jsx("span",{children:"Logout"})]})]})]})]})}),e.jsx("main",{className:"p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:ze()})})]}),G&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Change Password"}),e.jsx("button",{onClick:()=>{V(!1),B(""),_({currentPassword:"",newPassword:"",confirmPassword:""})},className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),$&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:$}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),e.jsx("input",{type:"password",value:W.currentPassword,onChange:Ee=>_(Z=>({...Z,currentPassword:Ee.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter current password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsx("input",{type:"password",value:W.newPassword,onChange:Ee=>_(Z=>({...Z,newPassword:Ee.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter new password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsx("input",{type:"password",value:W.confirmPassword,onChange:Ee=>_(Z=>({...Z,confirmPassword:Ee.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Confirm new password"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:De,disabled:M,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:M?"Changing...":"Change Password"}),e.jsx("button",{onClick:()=>{V(!1),B(""),_({currentPassword:"",newPassword:"",confirmPassword:""})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"})]})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Change Photo"}),e.jsx("button",{onClick:()=>{T(!1),Ae(""),K(null),X(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),ce&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:ce}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Photo"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-32 h-32 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-md overflow-hidden",children:t!=null&&t.PHOTO?e.jsx("img",{src:t.PHOTO&&typeof t.PHOTO=="string"&&t.PHOTO.startsWith("data:")?t.PHOTO:(t==null?void 0:t.role)==="admin"?`data:image/png;base64,${t.PHOTO}`:`data:image/jpeg;base64,${t.PHOTO}`,alt:(t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"User",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-3xl",children:((t==null?void 0:t.NAME)||(t==null?void 0:t.name)||"U").charAt(0).toUpperCase()})})})]}),H&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Photo Preview"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:H,alt:"Preview",className:"w-32 h-32 object-cover rounded-xl border-2 border-blue-500"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select New Photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:Me,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"JPG, PNG or GIF. Max size 5MB."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:be,disabled:pe||!J,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:pe?"Uploading...":"Upload Photo"}),e.jsx("button",{onClick:()=>{T(!1),Ae(""),K(null),X(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 z-40 lg:hidden",onClick:()=>m(!1)})]})},JA=({stats:t,activeModule:s})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Employees"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.totalEmployees})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Employees"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:t.activeEmployees})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Departments"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:t.totalDepartments})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})})]})}),s==="dtr"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Today's Time Logs"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:t.todayTimeLogs})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Leaves"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:t.pendingLeaves})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Locators"}),e.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:t.activeLocators})]}),e.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:e.jsxs("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Welcome to ",s==="dtr"?"DTR Management":s==="201"?"201 Files Management":"Payroll Management"]}),e.jsxs("p",{className:"text-gray-600",children:["Select an option from the left sidebar to get started managing your ",s==="dtr"?"daily time records and attendance":s==="201"?"employee files and records":"payroll processing and reports","."]})]})]}),XA=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg shadow-lg p-8 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:" 201 Files Module"}),e.jsx("p",{className:"text-green-100",children:"Employee Personnel Records Management"})]}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("svg",{className:"w-6 h-6 text-yellow-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Module Under Development"}),e.jsx("p",{className:"text-sm text-yellow-700 mb-4",children:"The 201 Files module is currently under development. This module will be dedicated to comprehensive employee personnel file management."}),e.jsxs("p",{className:"text-sm text-yellow-700 mb-3",children:[e.jsx("strong",{children:"Note:"})," Employee management features are currently available under the ",e.jsx("strong",{children:"DTR Management  Employee Records"})," section."]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Planned Features"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Document Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Digital storage and management of employee documents, certificates, and credentials"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Personal Data Sheets"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Complete employee personal information, education, work history, and eligibility"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Compliance Documents"}),e.jsx("p",{className:"text-sm text-gray-600",children:"NBI clearance, medical certificates, government IDs, and mandatory requirements"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Training & Development"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Training records, seminars attended, certifications, and professional development"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Performance Records"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Performance evaluations, IPCR/OPCR ratings, awards, and recognitions"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-pink-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Service Records"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Complete employment history, position changes, promotions, and service milestones"})]})]})]})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Current Access:"})," Basic employee management features are available under DTR Management  Employee Records until this dedicated module is completed."]})})]})})]}),eT=()=>{var j,v,N,f;const{employeeId:t}=Cg(),s=xr(),[r]=Nj(),[n,a]=y.useState(null),[l,o]=y.useState(!0),[i,c]=y.useState(null),h=r.get("page")?parseInt(r.get("page")):null;y.useEffect(()=>{t&&(async()=>{try{o(!0);const g=await le.get(`/201-employees/pds/${t}`);g.data.success?a(g.data.data):c("Failed to load PDS data")}catch(g){console.error("Error fetching PDS data:",g),c("Error loading PDS data")}finally{o(!1)}})()},[t]);const p=()=>{window.print()},m=()=>{console.log("Close button clicked - navigating to 201-employees");try{s("/201-employees")}catch(d){console.error("Navigation error:",d),window.location.href="/201-employees"}},u=()=>{console.log("Alternative close method - navigating to 201-employees"),window.location.href="/201-employees"};return l?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading PDS data..."})]})}):i||!n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:i||"PDS data not found"}),e.jsx("button",{onClick:m,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Go Back"})]})}):e.jsxs("div",{children:[e.jsx("style",{children:`
    @media print {
      body * {
        visibility: hidden;
      }
      
      .print-content, .print-content * {
        visibility: visible;
      }
      
      .print-content {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
      }
      
      .no-print {
        display: none !important;
      }
      
      @page {
        size: 8.5in 13in;
        margin: 0.25in;
      }
    }
    
    @media screen {
      .print-controls {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        background: white;
        border-bottom: 1px solid #ccc;
        padding: 10px 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      
      .print-controls button {
        pointer-events: auto !important;
        cursor: pointer !important;
        z-index: 1001 !important;
        position: relative !important;
      }
      
      .print-preview {
        margin-top: 60px;
        padding: 20px;
      }
    }
  `}),e.jsx("div",{className:"no-print print-controls",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-xl font-bold",children:"PDS Print Preview"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Print PDS"}),e.jsx("button",{onClick:d=>{d.preventDefault(),d.stopPropagation(),console.log("Close button clicked - event:",d),m()},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 cursor-pointer",type:"button",style:{zIndex:9999,position:"relative"},children:"Close"}),e.jsx("button",{onClick:d=>{d.preventDefault(),d.stopPropagation(),console.log("Alternative close button clicked"),u()},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 cursor-pointer",type:"button",style:{zIndex:9999,position:"relative"},children:"X"})]})]})}),e.jsx("div",{className:"print-content print-preview",children:e.jsx($S,{formData:n.employee,children:n.children,education:n.education,civilServiceEligibility:n.eligibility,workExperience:n.workExperience,voluntaryWork:n.voluntaryWork,trainings:n.trainings,skills:n.skills,recognitions:n.recognitions,memberships:n.memberships,declarations:n.declarations,references:n.references,governmentIds:n.governmentIds,signatureData:(j=n.media)==null?void 0:j.signature,photoData:(v=n.media)==null?void 0:v.photo,thumbmarkData:(N=n.media)==null?void 0:N.thumb,dateAccomplished:(f=n.media)==null?void 0:f.date_accomplished,pageNumber:h})})]})},Zc=({children:t,requireAdmin:s=!1})=>{const r=localStorage.getItem("authToken"),n=localStorage.getItem("authUser"),a=localStorage.getItem("authMethod");if(!r||!n)return a==="biometric"?e.jsx(mn,{to:"/login-bio",replace:!0}):e.jsx(mn,{to:"/",replace:!0});try{const l=JSON.parse(n);return s?typeof l.privilege<"u"&&l.privilege>0?t:e.jsx(mn,{to:"/",replace:!0}):t}catch(l){return console.error("Error parsing user data:",l),a==="biometric"?e.jsx(mn,{to:"/login-bio",replace:!0}):e.jsx(mn,{to:"/",replace:!0})}};function tT(){return e.jsx(r0,{children:e.jsxs(gj,{children:[e.jsx(Ur,{path:"/",element:e.jsx(e1,{})}),e.jsx(Ur,{path:"/login-bio",element:e.jsx(r1,{})}),e.jsx(Ur,{path:"/hris-management",element:e.jsx(Zc,{requireAdmin:!0,children:e.jsx(ZA,{})})}),e.jsx(Ur,{path:"/dtr-management",element:e.jsx(mn,{to:"/hris-management",replace:!0})}),e.jsx(Ur,{path:"/dtr-checker",element:e.jsx(Zc,{children:e.jsx(OE,{})})}),e.jsx(Ur,{path:"/201-employees/print/:employeeId",element:e.jsx(Zc,{children:e.jsx(eT,{})})}),e.jsx(Ur,{path:"*",element:e.jsx(mn,{to:"/",replace:!0})})]})})}Jc.createRoot(document.getElementById("root")).render(e.jsx(jj,{children:e.jsx(r0,{children:e.jsx(tT,{})})}));
